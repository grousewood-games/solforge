(function(){"use strict";var at=(o=>(o[o.Left=0]="Left",o[o.Both=1]="Both",o[o.Right=2]="Right",o[o.ForceRight=3]="ForceRight",o))(at||{});const si=["A","N","T","U"];const $e=["C","R","H","L"];const ce=[{c:"AAK",f:"T",r:"L",s:1,t:"C",ds:["AH"]},{c:"ABB",f:"N",r:"R",s:4,t:"C",dp:["SL"],ds:["RG","ZB"]},{c:"ABM",f:"N",r:"C",s:5,t:"C",dp:["AB"]},{c:"AGC",f:"A",r:"C",s:1,t:"C",ds:["AR"]},{c:"AGK",f:"A",r:"L",s:2.1,t:"C",dp:["AR"]},{c:"AGP",f:"A",r:"C",s:1.1,t:"S",ds:["AR"]},{c:"AGW",f:"A",r:"R",s:4,t:"S",dp:["AH"],ds:["AR","MV"]},{c:"ASG",f:"T",r:"R",s:1,t:"S",ds:["MV","SP","LV"]},{c:"AMS",f:"A",r:"H",s:5,t:"C",dp:["MM"],ds:["MV"]},{c:"AFO",f:"A",r:"C",s:2.1,t:"C",dp:["LV"],ds:["SP"]},{c:"ATG",f:"A",r:"C",s:2,t:"C",dp:["SP"],ds:["AR","RB"]},{c:"ATP",f:"U",r:"H",s:3,t:"C",dn:["SP","CD"]},{c:"ART",f:"U",r:"H",s:2.1,t:"C",dp:["MU","SP","PL"]},{c:"ATS",f:"T",r:"C",s:6,t:"C",ds:["SP","MV"]},{c:"AGM",f:"T",r:"L",s:2.2,t:"C",dp:["XA"],ds:["RG","AR","MV"]},{c:"ALG",f:"A",r:"R",s:1,t:"C",ds:["AH"]},{c:"AHL",f:"A",r:"H",s:1,t:"C",dp:["HL"],ds:["RB"]},{c:"ALS",f:"A",r:"H",s:2,t:"C",ds:["AH","MV"]},{c:"ASB",f:"A",r:"L",s:6,t:"C",dp:["MS","SB"]},{c:"AAA",f:"A",r:"L",s:5.1,t:"C",dp:["HL"],dn:["FC","AG","BN"]},{c:"ABE",f:"A",r:"H",s:5.1,t:"S",ds:["HL","TD"],dn:["GW"]},{c:"ATZ",f:"A",r:"C",s:4,t:"S",ds:["FR","AL","SP"]},{c:"AEC",f:"U",r:"L",s:5,t:"S",ds:["GW"]},{c:"ARB",f:"A",r:"H",s:4,t:"C",ds:["AR","RB"],dn:["TK","LZ"]},{c:"AEN",f:"A",r:"C",s:2,t:"C",dp:[],ds:["RB","AR"],dn:[]},{c:"APM",f:"A",r:"H",s:2,t:"C",dp:["MA","LV"],ds:["SP"]},{c:"AQE",f:"T",r:"C",s:1,t:"S",ds:["HR"]},{c:"AGD",f:"U",r:"L",s:1,t:"C",dp:["LG"],ds:["DR"]},{c:"AFS",f:"A",r:"L",s:1,t:"C",dp:["RB"],ds:["FR","VT"]},{c:"AWU",f:"T",r:"R",s:6,t:"C",dp:["MV"],ds:["BN"]},{c:"ASQ",f:"N",r:"L",s:6,t:"C",ds:["RV"]},{c:"AOP",f:"A",r:"R",s:7,t:"S",ds:["AH"]},{c:"AMD",f:"T",r:"H",s:5,t:"C",dp:["FC"],ds:["AG"]},{c:"ABR",f:"T",r:"C",s:2,t:"C",dp:["FC"]},{c:"AFR",f:"T",r:"H",s:3.1,t:"C",dp:["MT","SP"],ds:["CS"]},{c:"AMY",f:"T",r:"C",s:1,t:"C",dp:["FC"]},{c:"ABL",f:"T",r:"R",s:1,t:"S",ds:["FC"]},{c:"ATT",f:"T",r:"L",s:4.1,t:"C",ds:["FC","AG","AS"]},{c:"AMP",f:"A",r:"H",s:7,t:"C",ds:["RB","AR"]},{c:"AGU",f:"T",r:"R",s:2.1,t:"C",ds:["WL","MV"]},{c:"AIV",f:"T",r:"H",s:1,t:"C",dp:["MT"],ds:["RK"]},{c:"ATI",f:"T",r:"L",s:7.2,t:"C",dp:["SP"],ds:["FR","MV","DR"]},{c:"BRS",f:"A",r:"C",s:5,t:"C",dn:["FC","AG","BN"]},{c:"BTB",f:"A",r:"R",s:5,t:"C",dp:["AR"],ds:["RB","DI"]},{c:"BTH",f:"U",r:"R",s:3,t:"C",ds:["DI","CS"]},{c:"BTI",f:"A",r:"C",s:4,t:"C",ds:["MM","AL"]},{c:"BTN",f:"A",r:"H",s:1,t:"C",ds:["NX","AH"]},{c:"BBB",f:"U",r:"H",s:4,t:"C",ds:["CS","UD"]},{c:"BLH",f:"T",r:"L",s:2,t:"C",dp:["SP"],ds:["AG","TK","GW","SF"]},{c:"BFT",f:"N",r:"C",s:5,t:"S",dp:["UD"]},{c:"BZH",f:"T",r:"H",s:7.2,t:"S",ds:["BN"],dn:["MN"]},{c:"BSP",f:"N",r:"C",s:2.2,t:"C",ds:["RK"]},{c:"BWK",f:"N",r:"R",s:1,t:"C",ds:["RV","ZB"]},{c:"BLW",f:"N",r:"R",s:3,t:"C",ds:["ZB","CS"]},{c:"BTD",f:"T",r:"L",s:7,t:"C",ds:["MV","AG","DR","BN"]},{c:"BZS",f:"T",r:"C",s:5,t:"C",ds:["MV","FC"]},{c:"BBR",f:"A",r:"C",s:6,t:"S",ds:["AR","SV"]},{c:"BBD",f:"N",r:"C",s:6,t:"S",ds:["SV"]},{c:"BBL",f:"T",r:"C",s:6,t:"S",ds:["SV"]},{c:"BBN",f:"U",r:"C",s:6,t:"S",ds:["SV"]},{c:"BSR",f:"N",r:"R",s:1,t:"C",ds:["AB","RV"]},{c:"BMY",f:"T",r:"H",s:2.1,t:"C",ds:["MV"]},{c:"BSW",f:"T",r:"C",s:3,t:"C",ds:["MS"]},{c:"BWW",f:"T",r:"H",s:4,t:"C",ds:["MV"]},{c:"BTM",f:"U",r:"H",s:1,t:"S",ds:["PL","RV","RP"]},{c:"BLP",f:"U",r:"H",s:7.2,t:"S",ds:["PS"],dn:["MT"]},{c:"BAW",f:"U",r:"R",s:2,t:"C",ds:["FC"]},{c:"BWG",f:"U",r:"C",s:1,t:"C",ds:["PL"]},{c:"BTR",f:"U",r:"H",s:3.1,t:"C",dp:["MU"],ds:["CS","FR"]},{c:"BWD",f:"U",r:"C",s:2,t:"C",ds:["PL","GW","SF","TK"]},{c:"BOF",f:"N",r:"C",s:7,t:"C",dp:["AB"],ds:["LG","SV"]},{c:"BSG",f:"A",r:"L",s:1,t:"C",ds:["RB","MV","AR"]},{c:"BSS",f:"A",r:"L",s:1,t:"C",dp:["RB"],ds:["AR"]},{c:"BTS",f:"U",r:"C",s:1.1,t:"C",ds:["PL","TK","GW"]},{c:"BST",f:"T",r:"L",s:4,t:"C",dp:["RP"],ds:["MS"]},{c:"BWT",f:"U",r:"L",s:4.2,t:"C",dp:["DI"],ds:["RP","HR"]},{c:"BRH",f:"N",r:"R",s:5,t:"C",ds:["AB"]},{c:"BWH",f:"A",r:"R",s:1,t:"S",dp:["AR"]},{c:"BWN",f:"A",r:"H",s:7,t:"C",ds:["AR"]},{c:"BRN",f:"T",r:"R",s:3,t:"S",ds:["BN","TD"]},{c:"BZD",f:"N",r:"R",s:2,t:"C",dp:["QT"],ds:["DR","RG","MV"]},{c:"BFM",f:"N",r:"H",s:2.3,t:"C",dp:["QT"],ds:["MV","AL"]},{c:"BSM",f:"T",r:"H",s:2,t:"C",dp:["QN"],ds:["RV","AG"]},{c:"CKB",f:"N",r:"H",s:5,t:"C",ds:["RV"]},{c:"CDT",f:"U",r:"R",s:1,t:"C",ds:["PL","PS"]},{c:"CMF",f:"N",r:"R",s:4,t:"C",ds:["AS"]},{c:"CTL",f:"T",r:"L",s:1,t:"S",ds:["XA"]},{c:"CCS",f:"N",r:"C",s:3,t:"C",ds:["RG"]},{c:"CDM",f:"T",r:"H",s:7,t:"C",ds:["YT","BN"]},{c:"CHY",f:"U",r:"C",s:1,t:"C",ds:["RG"]},{c:"CSR",f:"U",r:"C",s:5,t:"C",ds:["PS"]},{c:"CSL",f:"N",r:"C",s:6,t:"C",ds:["RG"]},{c:"CGG",f:"N",r:"H",s:7.1,t:"C",dp:["HL"],ds:["TK","LZ"]},{c:"CHV",f:"N",r:"L",s:2,t:"C",dp:["FB"],ds:["MV","RV"]},{c:"CCC",f:"N",r:"H",s:7.3,t:"S",dp:["ZB"],ds:["SV","TK","FR"]},{c:"CRS",f:"A",r:"R",s:3,t:"C",dp:["MM"],ds:["LV"],dn:[]},{c:"COD",f:"T",r:"R",s:4,t:"S",dp:["UD"],dn:["GW"]},{c:"CHT",f:"T",r:"R",s:7,t:"S",dn:["GW"]},{c:"CTI",f:"N",r:"C",s:1.1,t:"C",dp:["AL"],ds:["AB"]},{c:"CHA",f:"U",r:"R",s:2.1,t:"C",dn:["MV"]},{c:"CHH",f:"U",r:"C",s:2,t:"C",dp:["GW"]},{c:"CHR",f:"U",r:"L",s:1,t:"C",ds:["PL","MS","LV","RG"]},{c:"CBB",f:"T",r:"C",s:3,t:"C",dp:["UD"]},{c:"CDC",f:"T",r:"C",s:2,t:"C",ds:["WL"]},{c:"CFB",f:"T",r:"H",s:1,t:"C",ds:["FC"]},{c:"CNM",f:"T",r:"C",s:2,t:"C"},{c:"CSW",f:"T",r:"L",s:2.3,t:"C",ds:["DR","MV"]},{c:"CTG",f:"A",r:"C",s:3,t:"C",ds:["RB","WL"]},{c:"CCT",f:"T",r:"R",s:2,t:"C",ds:["MV","FC"]},{c:"CFG",f:"T",r:"C",s:2,t:"S"},{c:"CGL",f:"N",r:"H",s:3,t:"C",dp:["AB"],ds:["FR"]},{c:"CSU",f:"N",r:"R",s:1,t:"S",ds:["FR"]},{c:"CCR",f:"N",r:"C",s:1,t:"C",dp:["SF"],ds:["AB","LZ"]},{c:"CSB",f:"N",r:"C",s:2,t:"C",ds:["ZB","TK","VG"]},{c:"CNT",f:"A",r:"R",s:5,t:"S",ds:["AL","AH"]},{c:"CWK",f:"T",r:"C",s:3,t:"C",ds:["DI","MV"]},{c:"CRC",f:"A",r:"R",s:2,t:"C",ds:["RB","RK","WL"]},{c:"CMR",f:"A",r:"L",s:7.1,t:"C",dp:["RP"],ds:["MM","AR","AL"]},{c:"CYC",f:"N",r:"H",s:2,t:"C",dp:["MN","SP"],ds:["BN","LG"]},{c:"CYS",f:"N",r:"C",s:4,t:"C",ds:["TK","VG"]},{c:"CYW",f:"N",r:"R",s:7,t:"S",ds:["LG","BN"]},{c:"CTW",f:"N",r:"C",s:1,t:"S",dp:["AL"],ds:["RV"]},{c:"CTV",f:"U",r:"H",s:1,t:"S",dp:["PL"],ds:["RP"]},{c:"CYR",f:"T",r:"H",s:7.1,t:"C",dn:["FC"],ds:["MV"]},{c:"CAG",f:"A",r:"R",s:1,t:"S",ds:["NX","FR","LV"]},{c:"CBS",f:"A",r:"C",s:2.1,t:"S",dp:["MA"],ds:["AH","AR"]},{c:"CEX",f:"A",r:"H",s:7.1,t:"S",ds:["AH","AR","HL"]},{c:"CIN",f:"A",r:"R",s:1.1,t:"C",dp:["AH"]},{c:"CSH",f:"A",r:"C",s:3,t:"C",ds:["AR"]},{c:"CSG",f:"A",r:"C",s:2,t:"S",ds:["AR"]},{c:"CTM",f:"N",r:"L",s:7.3,t:"C",dp:["AL"],ds:["SV"]},{c:"DFR",f:"N",r:"H",s:2,t:"C",dp:["AL"]},{c:"DHC",f:"N",r:"H",s:6,t:"C",ds:["SP","RG"]},{c:"DHW",f:"N",r:"R",s:1,t:"C",dp:["SP"],ds:["RG"]},{c:"DRS",f:"U",r:"C",s:6,t:"C",dp:["DF"],ds:["PL"]},{c:"DSS",f:"N",r:"R",s:1,t:"C",dp:["MN"],ds:["ZB"]},{c:"DSW",f:"N",r:"C",s:6,t:"C",dp:["DF"],ds:["LG","BN"]},{c:"DSE",f:"A",r:"C",s:6,t:"C",dp:["DF"],ds:["RB","AH"]},{c:"DSA",f:"T",r:"C",s:6,t:"C",dp:["DF"]},{c:"DCR",f:"N",r:"R",s:2,t:"S",ds:["RV"]},{c:"DSK",f:"N",r:"C",s:1,t:"C",ds:["TK","SF","VG"]},{c:"DPO",f:"N",r:"H",s:7.2,t:"S",dp:["AL"],ds:["TK","RV"],dn:["MA"]},{c:"DBA",f:"U",r:"H",s:1,t:"C",dp:["GW"]},{c:"DBP",f:"U",r:"C",s:1,t:"C",ds:["UD"]},{c:"DMR",f:"U",r:"C",s:2,t:"C",ds:["DI"]},{c:"DBR",f:"U",r:"C",s:1,t:"C"},{c:"DFS",f:"A",r:"C",s:7,t:"S",ds:["AR","TD"]},{c:"DCS",f:"A",r:"L",s:2,t:"C",ds:["LV"]},{c:"DPG",f:"U",r:"H",s:7,t:"C",ds:["PS"]},{c:"DWW",f:"N",r:"C",s:6,t:"C",dn:["AG"]},{c:"DDF",f:"U",r:"R",s:5,t:"S",ds:["RP","UD","TD"]},{c:"DGZ",f:"A",r:"R",s:2,t:"S",ds:["AL"],dn:["GW"]},{c:"DBN",f:"N",r:"C",s:4,t:"C",ds:["AL"]},{c:"DOV",f:"N",r:"R",s:7,t:"C",ds:["LG","BN"]},{c:"DDS",f:"A",r:"H",s:4.2,t:"S",dp:["QN"],ds:["AL"]},{c:"DIS",f:"T",r:"R",s:1,t:"S",ds:["BN"]},{c:"DSV",f:"U",r:"R",s:2,t:"S",dp:["PS"],ds:["FR"]},{c:"DDD",f:"N",r:"L",s:1,t:"C",ds:["MV","RV","DR"]},{c:"DPB",f:"A",r:"L",s:5.2,t:"C",ds:["RB","RP"]},{c:"DZD",f:"U",r:"L",s:3,t:"C",dp:["MS"],ds:["AG"]},{c:"DRE",f:"T",r:"L",s:5,t:"S",ds:["BN"]},{c:"DKS",f:"T",r:"R",s:7,t:"C",dn:["GW"]},{c:"DGS",f:"U",r:"H",s:6,t:"C",ds:["RV"],dn:["DR"]},{c:"DGW",f:"T",r:"L",s:5.2,t:"S",dp:["DR"],ds:["AG","TK"]},{c:"DRD",f:"N",r:"L",s:7,t:"C",dp:["LZ"],ds:["TK","AB"]},{c:"DBT",f:"N",r:"H",s:1,t:"S",ds:["RV"]},{c:"DTR",f:"U",r:"L",s:6,t:"C",dp:["MS","SQ"],ds:["FR","RG","PL"]},{c:"DFB",f:"N",r:"R",s:1,t:"C",dp:["AB"],ds:["BN","SF","LZ","SV"]},{c:"DMW",f:"A",r:"L",s:1.1,t:"C",dp:["MM","CD"],ds:["AH"]},{c:"DCH",f:"U",r:"C",s:1,t:"S",ds:["LG"]},{c:"DTD",f:"N",r:"L",s:4.2,t:"C",dp:["DR"],ds:["MV"]},{c:"DHM",f:"U",r:"R",s:6,t:"C",dp:["DF"],ds:["SB"]},{c:"DSZ",f:"N",r:"C",s:2,t:"C",ds:["ZB","RG"]},{c:"DYB",f:"U",r:"R",s:2,t:"S",dp:["GW","TK"]},{c:"DBQ",f:"N",r:"H",s:3,t:"C",dp:["QU"],ds:["TK","RV","PS"]},{c:"DYS",f:"N",r:"R",s:3,t:"S",dp:["QU"]},{c:"DYL",f:"U",r:"L",s:3,t:"C",dp:["QN","LG"],ds:["TK"]},{c:"EBW",f:"N",r:"C",s:3,t:"C",dp:["UD"]},{c:"ESD",f:"N",r:"L",s:7,t:"C",ds:["FR"]},{c:"ESK",f:"N",r:"H",s:2,t:"C",dp:["RK"],ds:["UD"]},{c:"EHW",f:"U",r:"L",s:1,t:"C",ds:["GW","TK"]},{c:"ETN",f:"A",r:"C",s:1,t:"S",ds:["AL"]},{c:"EWE",f:"T",r:"H",s:2,t:"C",dp:["MV"]},{c:"EVT",f:"U",r:"L",s:6.1,t:"S",dp:["MU"],ds:["TD"]},{c:"ENP",f:"A",r:"H",s:1,t:"S",ds:["FR","WL"]},{c:"ESU",f:"A",r:"R",s:1,t:"S",ds:["CD","TD","FR"]},{c:"ENR",f:"U",r:"C",s:1,t:"S"},{c:"EPD",f:"N",r:"H",s:1,t:"S",dn:["GW"]},{c:"EPH",f:"A",r:"L",s:4.2,t:"C",dp:["CD"],ds:["TK"]},{c:"ESG",f:"A",r:"H",s:4.1,t:"C",dp:["QU","LV"],ds:["TK","GW"]},{c:"ESC",f:"A",r:"H",s:2,t:"C",dp:["QU"],ds:["RB","TK","GW","AR"]},{c:"ESP",f:"U",r:"H",s:2.3,t:"C",dp:["QA"],ds:["AR","HR"]},{c:"EWT",f:"U",r:"R",s:2,t:"C",dp:["QA"],ds:["AR"]},{c:"EHN",f:"U",r:"C",s:1,t:"C",ds:["TK","GW"]},{c:"EWV",f:"U",r:"C",s:7,t:"S",ds:["TD","TK"]},{c:"EFA",f:"T",r:"R",s:5,t:"S",ds:["MV"]},{c:"EFM",f:"T",r:"L",s:2.1,t:"C",dp:["FC","SP"],ds:["FR"]},{c:"EFP",f:"T",r:"L",s:1,t:"C",dp:["RK"],ds:["MV","TK","VG"]},{c:"EFE",f:"U",r:"L",s:5.2,t:"C",ds:["PL","TK","GW","UD"]},{c:"EXD",f:"N",r:"H",s:1,t:"S",ds:["LG","BN","SF"]},{c:"FWB",f:"U",r:"C",s:2.3,t:"C"},{c:"FWR",f:"U",r:"C",s:1,t:"C"},{c:"FFG",f:"U",r:"C",s:4,t:"C",ds:["DI"]},{c:"FST",f:"N",r:"R",s:4,t:"C",ds:["ZB","TK","VG"]},{c:"FWK",f:"N",r:"C",s:1,t:"C",ds:["ZB","TK","VG"]},{c:"FIN",f:"U",r:"C",s:1,t:"S",ds:["FC"]},{c:"FRR",f:"U",r:"H",s:1,t:"S",dp:["GW"]},{c:"FVA",f:"T",r:"H",s:1,t:"S",ds:["MV"]},{c:"FSL",f:"N",r:"C",s:7,t:"C"},{c:"FFU",f:"T",r:"H",s:1,t:"C",ds:["YT"]},{c:"FLH",f:"T",r:"C",s:4,t:"C",ds:["AS"]},{c:"FMS",f:"T",r:"C",s:2,t:"C",ds:["MV"]},{c:"FSM",f:"T",r:"H",s:1,t:"S",ds:["MS"],dn:["GW"]},{c:"FOR",f:"T",r:"C",s:7,t:"S",ds:["TD","AH"]},{c:"FBC",f:"T",r:"L",s:1,t:"C",dp:["FC"],dn:["GW"]},{c:"FBI",f:"T",r:"H",s:2.2,t:"C",dp:["MT","SP"]},{c:"FFS",f:"T",r:"R",s:2,t:"C",ds:["AH"]},{c:"FJT",f:"T",r:"C",s:5,t:"S",dp:["UD"]},{c:"FLN",f:"T",r:"R",s:2,t:"S",ds:["BN"]},{c:"FRI",f:"T",r:"C",s:3,t:"C",dp:["WL"]},{c:"FSS",f:"T",r:"R",s:1,t:"C",dp:["MT"],ds:["BN"]},{c:"FLS",f:"T",r:"C",s:1,t:"C",dp:["SP"],ds:["BN"]},{c:"FSH",f:"T",r:"R",s:1,t:"C",ds:["AG","FC"]},{c:"FFD",f:"N",r:"H",s:1,t:"C",ds:["AB","TK","VG"]},{c:"FRV",f:"N",r:"H",s:3,t:"C",ds:["AB","RV","CS"]},{c:"FSC",f:"A",r:"C",s:6,t:"C",dp:["RB"],ds:["VG","AR"]},{c:"FSP",f:"A",r:"L",s:1,t:"C",ds:["UD"]},{c:"FPR",f:"T",r:"C",s:2.1,t:"C"},{c:"FFL",f:"A",r:"C",s:1,t:"S",ds:["AR"]},{c:"FGA",f:"A",r:"C",s:1,t:"C",ds:["RB","WL","VT"]},{c:"FGB",f:"A",r:"R",s:1,t:"C",ds:["RB","VT"]},{c:"FGD",f:"A",r:"H",s:3,t:"C",dp:["VT"],ds:["RB"]},{c:"FGG",f:"A",r:"H",s:1,t:"C",dp:["VT"],ds:["RB","TK"]},{c:"FOL",f:"A",r:"H",s:3.1,t:"C",dp:["MA"],ds:["CS"]},{c:"FPM",f:"A",r:"R",s:3,t:"C",ds:["RB","AR","CS"]},{c:"FPS",f:"A",r:"C",s:1,t:"C",ds:["RB","AR"]},{c:"FWS",f:"A",r:"H",s:6,t:"C",ds:["RB","AR"]},{c:"FLC",f:"A",r:"L",s:7.2,t:"C",ds:["AR"],dn:["SQ"]},{c:"FFM",f:"T",r:"H",s:3,t:"C",dp:["MV"]},{c:"FMD",f:"T",r:"L",s:3,t:"C",dp:["RK"],ds:["TK","GW","MV","DR"]},{c:"FSK",f:"T",r:"C",s:2.3,t:"S",ds:["AH"]},{c:"FKS",f:"T",r:"H",s:6,t:"C",dp:["SQ"],ds:["YT","BN"]},{c:"FWT",f:"U",r:"H",s:1,t:"C",ds:["UD","FR","GW"]},{c:"FZS",f:"T",r:"R",s:1,t:"S",ds:["RV"]},{c:"GOS",f:"A",r:"L",s:4,t:"S",dp:["AR"]},{c:"GHS",f:"U",r:"C",s:2.2,t:"C",dp:["GW"],ds:["PL","SQ","LG"]},{c:"GHB",f:"U",r:"R",s:1,t:"C",ds:["DI","RV"]},{c:"GHR",f:"U",r:"H",s:4.2,t:"C",dp:["QT"],ds:["FC","LG","MV","DI"]},{c:"GRN",f:"N",r:"C",s:2,t:"S",ds:["RG"]},{c:"GTH",f:"N",r:"C",s:1,t:"S"},{c:"GSC",f:"U",r:"C",s:1,t:"C",ds:["PS"]},{c:"GMP",f:"A",r:"L",s:1,t:"C",ds:["MM","CD"]},{c:"GTT",f:"T",r:"L",s:2,t:"C",dp:["RK"],ds:["RV"]},{c:"GCL",f:"T",r:"C",s:1,t:"C",ds:["WL"]},{c:"GCR",f:"T",r:"C",s:2,t:"S",ds:["FR","BN"],dn:["WL","SQ"]},{c:"GLF",f:"N",r:"C",s:2,t:"C",ds:["AB"]},{c:"GRW",f:"N",r:"C",s:1,t:"C",dp:["AL"],ds:["RV"]},{c:"GSW",f:"N",r:"C",s:2,t:"C"},{c:"GVS",f:"U",r:"C",s:2,t:"C",ds:["VG","LG"]},{c:"GSS",f:"U",r:"C",s:1,t:"C",ds:["LG"]},{c:"GPV",f:"U",r:"C",s:6,t:"C",ds:["PL"],dn:["MV"]},{c:"GBG",f:"N",r:"C",s:1,t:"C",ds:["AB","VG","BN"]},{c:"GGE",f:"N",r:"C",s:2,t:"C"},{c:"GGH",f:"N",r:"C",s:1,t:"C",ds:["ZB","RG"]},{c:"GRP",f:"N",r:"R",s:1,t:"S",dp:["SF"],ds:["RV","FR"]},{c:"GGB",f:"N",r:"H",s:6,t:"C",dp:["DF"]},{c:"GGD",f:"N",r:"L",s:1,t:"C",dp:["SV","SB"]},{c:"GGR",f:"N",r:"L",s:3,t:"C",ds:["SF","MV","SV"]},{c:"GGP",f:"N",r:"H",s:1,t:"C",dp:["RV"],ds:["MV","SV"]},{c:"GGS",f:"N",r:"C",s:1,t:"C",ds:["MV"]},{c:"GGW",f:"N",r:"H",s:6.1,t:"C",dp:["SV"]},{c:"GRM",f:"N",r:"R",s:2,t:"S",ds:["GW"],dn:["GW"]},{c:"GHT",f:"U",r:"C",s:1,t:"C"},{c:"GMR",f:"U",r:"C",s:1,t:"C",ds:["TK","VG","PL"]},{c:"GSF",f:"A",r:"H",s:7.3,t:"C",dp:["MM"],ds:["AR"]},{c:"GAS",f:"A",r:"H",s:7,t:"S",dp:["VT"],ds:["FR","TK","NX"]},{c:"HMF",f:"T",r:"H",s:3,t:"C",ds:["YT","MV"]},{c:"HOS",f:"U",r:"R",s:7,t:"C",dp:["TK","SB"]},{c:"HTR",f:"U",r:"L",s:1,t:"C",ds:["RG","SQ","PL"]},{c:"HAR",f:"A",r:"C",s:1,t:"C",ds:["AH"]},{c:"HFA",f:"N",r:"H",s:1,t:"C",dp:["MN"],ds:["AB","RG"]},{c:"HOD",f:"T",r:"R",s:3,t:"C",ds:["BN"],dn:["TK","LZ"]},{c:"HMO",f:"U",r:"C",s:7,t:"C",ds:["DI"]},{c:"HRM",f:"A",r:"H",s:6,t:"C",ds:["RB","AR"]},{c:"HWM",f:"A",r:"L",s:1,t:"C",dp:["AH"],ds:["MV","RG","AR"]},{c:"HVE",f:"U",r:"R",s:7,t:"C",ds:["PS"]},{c:"HOX",f:"N",r:"R",s:4,t:"S",dp:["UD"],ds:["BN","LG"]},{c:"HGS",f:"N",r:"R",s:1,t:"S",ds:["AH","AL"]},{c:"HTP",f:"U",r:"C",s:1,t:"C",ds:["TK","GW"]},{c:"IBF",f:"T",r:"R",s:1,t:"S",ds:["HR","GW"]},{c:"IGR",f:"T",r:"L",s:6.1,t:"S",ds:["TD","BN"]},{c:"ITO",f:"T",r:"R",s:2,t:"S",dp:["MT","SP"],ds:["FR","BN"]},{c:"ISB",f:"T",r:"C",s:7,t:"C"},{c:"IKA",f:"T",r:"L",s:6,t:"C",dp:["FB"],ds:["BN"]},{c:"IME",f:"N",r:"L",s:5,t:"S",ds:["TK","GW"]},{c:"IDF",f:"N",r:"H",s:7,t:"C",dp:["UD","LZ"],ds:["TK","ZB"]},{c:"IRT",f:"N",r:"L",s:6.1,t:"S",dp:["MN"],ds:["TD","RG","SL"]},{c:"IVS",f:"N",r:"C",s:4,t:"S",ds:["RG","SL"]},{c:"ICD",f:"N",r:"L",s:5,t:"C",dp:["RG"],ds:["VG","SV","MV"]},{c:"IWC",f:"A",r:"C",s:1,t:"C",ds:["RB","MV"]},{c:"IBA",f:"A",r:"L",s:7,t:"C",dp:["FB"],ds:["AR","AL"],dn:["TD"]},{c:"IHA",f:"A",r:"L",s:2,t:"C",dp:["FB"],ds:["AR","AL"]},{c:"IBR",f:"A",r:"C",s:3,t:"C",dp:["UD"],ds:["AH"]},{c:"IMD",f:"A",r:"L",s:3,t:"C",ds:["RB","BN","MS"]},{c:"IMA",f:"A",r:"L",s:2.3,t:"C",dp:["CD"],ds:["FR"]},{c:"IZK",f:"T",r:"L",s:3,t:"C",ds:["FC","RP","BN"]},{c:"JPK",f:"A",r:"C",s:1,t:"S",dp:["UD"],ds:["AH","MV","FC"]},{c:"KDC",f:"T",r:"C",s:3,t:"C"},{c:"KSB",f:"T",r:"C",s:6,t:"C",ds:["DI"]},{c:"KAW",f:"T",r:"L",s:1.1,t:"C",dp:["SP"],ds:["XA"]},{c:"KOD",f:"N",r:"L",s:1,t:"C",dp:["LZ"],ds:["ZB"]},{c:"KBE",f:"U",r:"H",s:5,t:"C",ds:["PS","MV"]},{c:"KIW",f:"A",r:"L",s:3,t:"C",dp:["LV","FB"]},{c:"KTS",f:"U",r:"H",s:4,t:"C",dp:["RP"],ds:["TK"]},{c:"KKK",f:"T",r:"L",s:2,t:"C",dp:["FB"],ds:["AG","FC"]},{c:"LOD",f:"U",r:"L",s:4,t:"S",ds:["PS"]},{c:"LFA",f:"T",r:"H",s:4,t:"C",ds:["FC","AH"]},{c:"LKP",f:"U",r:"L",s:1,t:"C",ds:["PL","TK"]},{c:"LGT",f:"N",r:"R",s:2.3,t:"C",dp:["SL"],ds:["ZB","RG"]},{c:"LLD",f:"N",r:"H",s:5,t:"C",ds:["TK"],dn:["FR"]},{c:"LLG",f:"U",r:"H",s:5,t:"C",ds:["TK"],dn:["MV"]},{c:"LLS",f:"A",r:"H",s:5,t:"C",ds:["RB","TK"],dn:["TK","LZ"]},{c:"LLT",f:"T",r:"H",s:5,t:"C",ds:["TK"],dn:["LG"]},{c:"LLV",f:"U",r:"H",s:7.1,t:"C",dp:["PS"],ds:["TK"]},{c:"LMD",f:"N",r:"L",s:7.1,t:"C",ds:["DR","TK","MV"]},{c:"LBD",f:"U",r:"H",s:1,t:"C",dp:["GW"]},{c:"LSS",f:"U",r:"R",s:1,t:"C",dp:["MU"],ds:["UD"]},{c:"LBL",f:"U",r:"R",s:1,t:"C",ds:["LG"]},{c:"LBC",f:"U",r:"H",s:7,t:"C",dp:["FC","MU"],ds:["LG"]},{c:"LBR",f:"T",r:"C",s:1,t:"S",dp:["FC"],ds:["AG"]},{c:"LSK",f:"T",r:"C",s:1,t:"S",ds:["BN"]},{c:"LTM",f:"T",r:"C",s:7,t:"C",ds:["AG"]},{c:"LWY",f:"T",r:"C",s:1,t:"C",ds:["AG"]},{c:"LSP",f:"A",r:"C",s:1,t:"C",dp:["AH"],ds:["AR"]},{c:"LVH",f:"U",r:"L",s:7,t:"C",dp:["MS","PS","SQ"],ds:["TK","GW"]},{c:"LTU",f:"U",r:"L",s:7,t:"C",ds:["TK","GW"]},{c:"LCE",f:"A",r:"L",s:5,t:"S",ds:["CD"]},{c:"LUC",f:"T",r:"L",s:4.2,t:"C",dp:["MV"],ds:["XA","YT"]},{c:"LMV",f:"N",r:"L",s:1,t:"C",ds:["TK","LZ","GW"]},{c:"LHY",f:"U",r:"C",s:2,t:"C",ds:["RG"]},{c:"LYR",f:"U",r:"C",s:4,t:"S",ds:["LG","HR"]},{c:"LYS",f:"U",r:"R",s:3,t:"S",ds:["TD"]},{c:"MMH",f:"T",r:"C",s:1,t:"C"},{c:"MHR",f:"U",r:"L",s:5.1,t:"C",dp:["PS"],ds:["YT"]},{c:"MRF",f:"N",r:"C",s:1,t:"C"},{c:"MMG",f:"A",r:"L",s:6,t:"C",dp:["RB"],ds:["TK","AR"]},{c:"MOE",f:"T",r:"H",s:1,t:"C",dp:["SP"],ds:["FR"]},{c:"MXW",f:"A",r:"C",s:1,t:"C",ds:["RB","AH"]},{c:"MSP",f:"U",r:"R",s:2,t:"S",ds:["LG"]},{c:"MDR",f:"A",r:"R",s:7,t:"C",ds:["NT","MM"]},{c:"MMA",f:"A",r:"C",s:1,t:"C",ds:["CD","MM"]},{c:"MMR",f:"A",r:"C",s:5,t:"C",dp:["MM"],ds:["CD"]},{c:"MMX",f:"A",r:"C",s:2,t:"C",ds:["MM","CD","VG"]},{c:"MMI",f:"A",r:"C",s:4,t:"C",ds:["MM"]},{c:"MMO",f:"A",r:"C",s:2,t:"C",ds:["MM"]},{c:"MMV",f:"A",r:"C",s:2.2,t:"C",ds:["MM","CD","RK"]},{c:"MPH",f:"U",r:"H",s:3,t:"S",ds:["RK","DR","RV","RP","TK","MV"]},{c:"MSC",f:"A",r:"H",s:1,t:"S",ds:["NT","FR"]},{c:"MTS",f:"A",r:"C",s:1.1,t:"S",ds:["LV","FR"]},{c:"MTT",f:"A",r:"C",s:2,t:"S",ds:["LV","AL"]},{c:"MML",f:"U",r:"H",s:2,t:"C",ds:["TK","GW","PL"]},{c:"MMW",f:"U",r:"L",s:2.2,t:"C",ds:["TK","GW"]},{c:"MBR",f:"A",r:"R",s:6,t:"C",dp:["MM"],ds:["CD"]},{c:"MDE",f:"N",r:"C",s:4,t:"C",ds:["AS","LG","BN"]},{c:"MBP",f:"U",r:"H",s:1,t:"C",ds:["HR","PL"]},{c:"MTD",f:"U",r:"R",s:6,t:"C",dp:["DI"]},{c:"MND",f:"A",r:"R",s:1,t:"C",ds:["RB","SQ","AH"]},{c:"MNM",f:"N",r:"L",s:7.2,t:"C",ds:["TK","GW"]},{c:"NNS",f:"A",r:"R",s:3,t:"S",ds:["NT","AL"]},{c:"NGB",f:"T",r:"C",s:1,t:"C",ds:["HR"]},{c:"NGW",f:"T",r:"C",s:4,t:"C"},{c:"NSL",f:"U",r:"R",s:1,t:"S",dp:["GW"],ds:["RV"]},{c:"NCF",f:"N",r:"C",s:4,t:"S",ds:["FR"]},{c:"NCM",f:"N",r:"H",s:5,t:"C",ds:["MS","TK","RG","GW"]},{c:"NCP",f:"N",r:"H",s:7,t:"C",dn:["CD"]},{c:"NCS",f:"N",r:"R",s:1,t:"C"},{c:"NCW",f:"N",r:"C",s:1,t:"C"},{c:"NCV",f:"N",r:"C",s:1,t:"S",ds:["RG"]},{c:"NSW",f:"N",r:"L",s:3,t:"C",dp:["SF"],ds:["SQ","TK","GW"]},{c:"NDY",f:"N",r:"R",s:6,t:"S",dn:["SV"]},{c:"NEM",f:"N",r:"C",s:1,t:"S",ds:["LG","BN"]},{c:"NSH",f:"N",r:"L",s:2.3,t:"S",ds:["DR","RV","MV"],dn:["GW"]},{c:"NXA",f:"A",r:"L",s:3.1,t:"C",ds:["NX","AH","AR","MV"]},{c:"NXB",f:"A",r:"L",s:6.1,t:"S",dp:["MA"],ds:["NX","AR","TD"]},{c:"NXC",f:"A",r:"C",s:1,t:"C",ds:["RB","WL"]},{c:"NXG",f:"A",r:"H",s:3,t:"C",dp:["NX"],ds:["AH"]},{c:"NXO",f:"A",r:"C",s:5,t:"C",dp:["NX"],ds:["LV"]},{c:"NXP",f:"A",r:"C",s:1,t:"C",dp:["NX"]},{c:"NXT",f:"A",r:"H",s:2,t:"C",dp:["NX"],ds:["AR"]},{c:"NGT",f:"N",r:"R",s:2,t:"C",ds:["RG","SV"]},{c:"NGQ",f:"U",r:"L",s:4.1,t:"C",dp:["RP","FB"],ds:["TK","GW","PL"]},{c:"NCL",f:"U",r:"R",s:1.1,t:"S",ds:["PS"],dn:["GW"]},{c:"NFF",f:"U",r:"L",s:2,t:"C",dp:["PL"],ds:["RP","SQ","TK"]},{c:"NUG",f:"T",r:"L",s:7.1,t:"C",ds:["YT"]},{c:"NAM",f:"N",r:"C",s:3,t:"C"},{c:"NOZ",f:"N",r:"R",s:2,t:"C",ds:["TK","VG"]},{c:"NSY",f:"N",r:"C",s:2.1,t:"C",ds:["RG"]},{c:"ONN",f:"N",r:"H",s:1.1,t:"S",dp:["ZB"]},{c:"OXA",f:"A",r:"H",s:2.3,t:"C",dp:["QN"],ds:["LV","SQ","RG"]},{c:"OXM",f:"A",r:"R",s:2,t:"C",dp:["QN"],ds:["RG","AR"]},{c:"OXP",f:"N",r:"H",s:2,t:"C",dp:["QA"],ds:["RG","AL","SQ"]},{c:"OBB",f:"T",r:"R",s:3,t:"S",dp:["QA"],ds:["LV"]},{c:"OEX",f:"A",r:"H",s:3,t:"S",dp:["QT"],ds:["FC","AH"],dn:["GW"]},{c:"OWH",f:"T",r:"H",s:3,t:"C",dp:["QA"],ds:["FC","MV","LV"]},{c:"ORC",f:"A",r:"C",s:7,t:"C",ds:["AH"]},{c:"OBD",f:"A",r:"H",s:1,t:"C",ds:["AR","RB"]},{c:"OFM",f:"A",r:"R",s:2.1,t:"C",ds:["AH"]},{c:"OJC",f:"A",r:"H",s:1.1,t:"C",ds:["AL"],dn:["TK","LZ"]},{c:"OPK",f:"A",r:"R",s:2,t:"C",ds:["RB","AR"]},{c:"OSV",f:"A",r:"H",s:4,t:"C",dp:["RP"],ds:["AR","RB"]},{c:"OSS",f:"A",r:"C",s:5,t:"S",dp:["UD"],ds:["AR"]},{c:"OWW",f:"A",r:"L",s:1,t:"C",ds:["RB"]},{c:"OHV",f:"N",r:"R",s:2,t:"C",ds:["AB","RV"]},{c:"ODC",f:"U",r:"L",s:2,t:"C",dp:["FB"],ds:["LG"]},{c:"OSP",f:"N",r:"R",s:2,t:"C",ds:["RG"]},{c:"OAP",f:"U",r:"L",s:6,t:"C",dp:["RK"],ds:["PS"]},{c:"OSL",f:"U",r:"C",s:3,t:"C",ds:["PL"]},{c:"OWF",f:"A",r:"H",s:2,t:"S",ds:["AH","GW"]},{c:"OXS",f:"U",r:"R",s:1,t:"C",ds:["DI"],dn:["AR"]},{c:"PHM",f:"A",r:"R",s:2,t:"C",ds:["AL"],dn:["GW"]},{c:"PPM",f:"A",r:"R",s:1,t:"C",ds:["AL","SQ"]},{c:"PSM",f:"A",r:"L",s:2.2,t:"C",dp:["NX"],ds:["MV","TK"]},{c:"PLW",f:"A",r:"R",s:4,t:"S",dp:["UD"],ds:["AL"],dn:["GW"]},{c:"POA",f:"A",r:"H",s:6.1,t:"C",dp:["MA"],ds:["AH"]},{c:"POD",f:"U",r:"H",s:6.1,t:"C",dp:["MU"],ds:["GW","TK"]},{c:"POK",f:"T",r:"H",s:6.1,t:"C",dp:["MT"],ds:["AH"]},{c:"POT",f:"N",r:"H",s:6.1,t:"C",dp:["MN"],dn:["GW"]},{c:"PRG",f:"N",r:"C",s:4,t:"C"},{c:"PRI",f:"A",r:"R",s:3,t:"S",dp:["LV"],ds:["TD"]},{c:"PHS",f:"A",r:"R",s:2.2,t:"C",dp:["AR"]},{c:"PHC",f:"T",r:"L",s:6.2,t:"S",ds:["MV","TK","BN"]},{c:"PTB",f:"U",r:"H",s:1,t:"S",ds:["PL","TK","GW"]},{c:"PLI",f:"N",r:"R",s:6,t:"C"},{c:"PSC",f:"U",r:"R",s:2,t:"C",ds:["PS","SQ"]},{c:"PSH",f:"N",r:"H",s:4,t:"C",ds:["RK","LZ","TK"]},{c:"PTR",f:"A",r:"R",s:2,t:"S",ds:["AH","FR"]},{c:"PSG",f:"U",r:"R",s:1,t:"S",ds:["FR"]},{c:"PVA",f:"U",r:"L",s:7.2,t:"C",ds:["TK","GW","LG","DI"]},{c:"PMI",f:"T",r:"H",s:5.1,t:"C",ds:["BN"]},{c:"PMS",f:"T",r:"C",s:1,t:"S",ds:["AH"]},{c:"POX",f:"N",r:"H",s:4.2,t:"C",dp:["UD"],ds:["TK","VG","AB"]},{c:"PMP",f:"A",r:"R",s:6,t:"S",dp:["HL"],ds:["AR","AH"]},{c:"PYG",f:"T",r:"H",s:1,t:"C",dp:["FC"],ds:["AG"]},{c:"PYM",f:"T",r:"R",s:6,t:"C",dn:["LG"],ds:["BN"]},{c:"PYS",f:"T",r:"C",s:1.1,t:"S",dp:["GW"],dn:["GW"]},{c:"QSW",f:"T",r:"L",s:7.3,t:"C",dp:["DI"],ds:["BN"]},{c:"RBH",f:"T",r:"L",s:1,t:"C",dp:["FC"]},{c:"ROK",f:"T",r:"L",s:3.1,t:"S",dp:["MT"],ds:["TD"]},{c:"REW",f:"U",r:"L",s:7.3,t:"C",ds:["TK","GW"]},{c:"RHY",f:"U",r:"C",s:3,t:"C",ds:["RG"]},{c:"RTS",f:"T",r:"C",s:2.2,t:"C",ds:["MV","FC","DI"]},{c:"RTW",f:"U",r:"H",s:7,t:"C",ds:["WD","TK"]},{c:"RHU",f:"A",r:"L",s:4.1,t:"C",ds:["RP","WL"]},{c:"RMB",f:"N",r:"L",s:6.2,t:"S",dp:["TD"],ds:["TK"]},{c:"RPR",f:"A",r:"H",s:7.2,t:"S",ds:["AL","NT"],dn:["MU"]},{c:"RLW",f:"U",r:"H",s:1,t:"C",dp:["WD"]},{c:"RFL",f:"T",r:"R",s:1,t:"C",dp:["FC"]},{c:"RHC",f:"T",r:"C",s:1,t:"C",ds:["MV"]},{c:"ROG",f:"N",r:"H",s:1,t:"S",ds:["SV"]},{c:"ROU",f:"N",r:"C",s:7,t:"S",ds:["RG","GW"]},{c:"ROE",f:"T",r:"H",s:7.3,t:"S",ds:["TK","AG","AH"]},{c:"RWC",f:"U",r:"C",s:4,t:"C",ds:["DI","TK","GW"]},{c:"RFA",f:"U",r:"H",s:1,t:"C",dp:["MU"]},{c:"RWD",f:"N",r:"C",s:5,t:"C",dp:["AL"],ds:["ZB"]},{c:"RSD",f:"U",r:"L",s:6.2,t:"C",ds:["SQ","GW","LG","DR"]},{c:"RSE",f:"T",r:"H",s:4.1,t:"C",dp:["FC"],ds:["AG"]},{c:"RBG",f:"U",r:"H",s:2,t:"C",dp:["LG"]},{c:"RGG",f:"U",r:"H",s:1,t:"C",dp:["RK"],ds:["PL"]},{c:"RSZ",f:"N",r:"R",s:1.1,t:"C",ds:["ZB","VG","SP"]},{c:"RSP",f:"T",r:"R",s:3,t:"C",ds:["CS","AG"]},{c:"RHW",f:"N",r:"C",s:3,t:"C",dp:["WD"]},{c:"SBF",f:"T",r:"H",s:4,t:"C",ds:["AG","XA"]},{c:"SAP",f:"A",r:"C",s:2,t:"S",ds:["AL"]},{c:"SVO",f:"U",r:"C",s:2.1,t:"S",dp:["MU"]},{c:"SSE",f:"U",r:"L",s:2.1,t:"C",ds:["PL","TK","GW"]},{c:"SST",f:"U",r:"C",s:7,t:"C",ds:["PL","TK","GW"]},{c:"STS",f:"U",r:"C",s:3,t:"S",ds:["PL","TK","GW"]},{c:"SCS",f:"N",r:"C",s:1,t:"C",ds:["AB","RG"]},{c:"SMD",f:"T",r:"L",s:1,t:"C",ds:["DR","MV"]},{c:"SFS",f:"N",r:"L",s:1,t:"C",ds:["ZB","SF","RV"]},{c:"SHY",f:"N",r:"C",s:5,t:"C",ds:["MS"]},{c:"SKN",f:"N",r:"C",s:7,t:"C",ds:["ZB"]},{c:"SCD",f:"A",r:"H",s:1,t:"C",ds:["RB","FR"]},{c:"SFT",f:"A",r:"H",s:1,t:"C",ds:["AR","RB"]},{c:"SOC",f:"N",r:"L",s:4,t:"S",ds:["AL"]},{c:"SOA",f:"A",r:"C",s:3,t:"S",dp:["CS"],ds:["AH"]},{c:"SOD",f:"U",r:"C",s:3,t:"S",dp:["CS"]},{c:"SOK",f:"T",r:"C",s:3,t:"S",dp:["CS"]},{c:"SOT",f:"N",r:"C",s:3,t:"S",dp:["CS"],ds:["BN"]},{c:"SAD",f:"T",r:"H",s:1,t:"C",ds:["FC"]},{c:"SCZ",f:"N",r:"R",s:6,t:"C",dp:["DF"],ds:["RG","ZB"]},{c:"SFE",f:"T",r:"H",s:6,t:"C",dp:["DF"],ds:["AG"]},{c:"SWS",f:"A",r:"H",s:6,t:"C",dp:["DF"],ds:["LV"]},{c:"SHA",f:"A",r:"R",s:6,t:"C",dp:["DF"],ds:["AR"]},{c:"SHG",f:"N",r:"L",s:2,t:"S",dp:["LZ"]},{c:"SBI",f:"U",r:"C",s:3,t:"C",dp:["UD"]},{c:"SCC",f:"U",r:"C",s:4,t:"C",dp:["RP"]},{c:"SPB",f:"U",r:"L",s:5,t:"C",dp:["HR"]},{c:"SPD",f:"U",r:"R",s:1,t:"C",dp:["SB"],ds:["DI"]},{c:"SPG",f:"U",r:"R",s:6.2,t:"S",ds:["SB"]},{c:"SPM",f:"U",r:"L",s:1,t:"C",dp:["UD"]},{c:"SPT",f:"U",r:"L",s:7.1,t:"C",ds:["PS"]},{c:"STD",f:"A",r:"H",s:2.2,t:"C",ds:["MM"],dn:["RG"]},{c:"STB",f:"T",r:"C",s:5,t:"S",ds:["BN"],dn:["AR"]},{c:"SHS",f:"U",r:"R",s:2.2,t:"C",dp:["AH"],ds:["PS"]},{c:"SSP",f:"U",r:"H",s:6,t:"C",dp:["DF"],ds:["PL","TK","GW"]},{c:"SGF",f:"N",r:"H",s:2.2,t:"C",dp:["SQ","SF"],ds:["AB","LG","BN"]},{c:"SKG",f:"A",r:"C",s:2,t:"C",ds:["NX","MV"]},{c:"SLS",f:"T",r:"L",s:7,t:"C",dp:["SQ"],ds:["SP","WL"],dn:["TD"]},{c:"SSD",f:"T",r:"L",s:5,t:"C",dp:["SQ"],ds:["DR"],dn:["GW"]},{c:"SDA",f:"U",r:"H",s:5,t:"C",ds:["TK","GW"]},{c:"SSR",f:"U",r:"L",s:2,t:"C",dp:["RK"],ds:["GW","FC"]},{c:"SNB",f:"A",r:"C",s:2.3,t:"S",ds:["AL"]},{c:"SNP",f:"A",r:"H",s:1,t:"S",ds:["AL"],dn:["GW"]},{c:"SRD",f:"U",r:"C",s:1,t:"S",ds:["HR","GW"]},{c:"SSH",f:"U",r:"H",s:4,t:"C"},{c:"SRM",f:"N",r:"H",s:4,t:"C",dp:["AL"],ds:["RV"]},{c:"SRH",f:"N",r:"C",s:2.3,t:"C",dp:["AB"],ds:["CD"]},{c:"SDN",f:"N",r:"L",s:1,t:"C",ds:["AL","MV"]},{c:"SHV",f:"N",r:"H",s:1,t:"S",dp:["SF"],ds:["FR"]},{c:"SRP",f:"N",r:"L",s:4,t:"S",dp:["AL"],ds:["RV","TK"]},{c:"SGG",f:"N",r:"H",s:4,t:"C",dp:["SV"]},{c:"SBA",f:"A",r:"C",s:1,t:"C"},{c:"SKB",f:"A",r:"C",s:1,t:"C",ds:["RB"]},{c:"SBR",f:"T",r:"C",s:2,t:"C",ds:["AG"]},{c:"SKS",f:"T",r:"C",s:4,t:"C",ds:["RP","AG"]},{c:"SEL",f:"T",r:"R",s:5,t:"C",ds:["WL"],dn:["SQ"]},{c:"STM",f:"T",r:"R",s:4,t:"C",ds:["MV","AG"]},{c:"SWA",f:"T",r:"H",s:6,t:"C",dp:["SP","MT"],ds:["MV","AH"]},{c:"SFG",f:"A",r:"L",s:6.2,t:"C",dp:["VT"],ds:["TK","RB"]},{c:"S01",f:"A",r:"L",s:7.3,t:"C",dp:["MS"],ds:["AR","AH"]},{c:"SPR",f:"N",r:"R",s:7,t:"C",ds:["SV","SB"]},{c:"SBD",f:"U",r:"C",s:2.1,t:"C",ds:["LG"]},{c:"SCV",f:"N",r:"R",s:3,t:"S",ds:["RV"]},{c:"SFM",f:"T",r:"H",s:1,t:"C",ds:["VG","MS"]},{c:"SSN",f:"A",r:"C",s:2.2,t:"C",ds:["AR","RB"]},{c:"SSM",f:"T",r:"C",s:2.2,t:"C",ds:["RK","BN"]},{c:"SLH",f:"N",r:"C",s:2,t:"S",dp:["SF"]},{c:"SRV",f:"N",r:"R",s:2.2,t:"C",dp:[],ds:[],dn:[]},{c:"SSI",f:"A",r:"R",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"SND",f:"U",r:"R",s:4,t:"C",dp:["RP"],ds:["TK","GW"]},{c:"SNT",f:"N",r:"L",s:5.1,t:"C",dp:[],ds:[],dn:[]},{c:"STR",f:"N",r:"R",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"SPH",f:"N",r:"H",s:4.1,t:"C",dp:[],ds:[],dn:[]},{c:"SSA",f:"N",r:"H",s:2.1,t:"C",dp:[],ds:[],dn:[]},{c:"STO",f:"U",r:"R",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"SDR",f:"U",r:"R",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"SOL",f:"U",r:"C",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"SOV",f:"T",r:"L",s:4,t:"S",dp:["XA"],ds:["DR","MV"]},{c:"SMS",f:"T",r:"C",s:7,t:"C",ds:["DI","BN"]},{c:"SHK",f:"T",r:"H",s:1,t:"S",dp:[],ds:[],dn:[]},{c:"SIX",f:"A",r:"R",s:7,t:"C",ds:["MM","SP","WL"]},{c:"SWR",f:"A",r:"R",s:1,t:"C",ds:["MM","SP","WL"]},{c:"SMN",f:"T",r:"C",s:5,t:"C",dp:[],ds:[],dn:[]},{c:"SER",f:"A",r:"C",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"SES",f:"A",r:"L",s:5,t:"C",dp:[],ds:[],dn:[]},{c:"SFA",f:"A",r:"H",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"STG",f:"A",r:"L",s:2,t:"C",dp:[],ds:["DR","RB"],dn:[]},{c:"SSS",f:"A",r:"R",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"SSK",f:"A",r:"C",s:3,t:"C",dp:[],ds:[],dn:[]},{c:"SNK",f:"A",r:"C",s:7,t:"C",dp:["LV"],ds:["WL"]},{c:"SWG",f:"A",r:"C",s:4,t:"C",dp:[],ds:["RB"],dn:[]},{c:"SWM",f:"A",r:"R",s:2,t:"C",dp:[],ds:[],dn:[]},{c:"SIV",f:"U",r:"H",s:5.1,t:"S",dp:[],ds:[],dn:[]},{c:"STN",f:"T",r:"R",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"SGI",f:"T",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"SBG",f:"T",r:"L",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"SCL",f:"T",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"SGA",f:"T",r:"H",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"STP",f:"T",r:"C",s:4,t:"S",dp:[],ds:[],dn:[]},{c:"SSG",f:"U",r:"C",s:2,t:"C",dp:[],ds:["DI"],dn:[]},{c:"SVH",f:"U",r:"C",s:2.3,t:"C",dp:[],ds:[],dn:[]},{c:"SIN",f:"U",r:"C",s:1.1,t:"S",dp:[],ds:[],dn:[]},{c:"SYL",f:"U",r:"H",s:2.2,t:"C",dp:[],ds:["PL"],dn:[]},{c:"SEV",f:"N",r:"L",s:3.1,t:"C",dp:[],ds:[],dn:[]},{c:"SMA",f:"U",r:"C",s:5,t:"C",dp:[],ds:["DI"],dn:[]},{c:"SML",f:"U",r:"C",s:1,t:"C",dp:[],ds:["DI"],dn:[]},{c:"SYO",f:"A",r:"L",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"TST",f:"T",r:"C",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"TBA",f:"U",r:"L",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"TGL",f:"U",r:"R",s:3,t:"S",dp:[],ds:[],dn:[]},{c:"TGS",f:"U",r:"C",s:2,t:"C",dp:[],ds:["PL"],dn:[]},{c:"TPT",f:"N",r:"C",s:2.1,t:"S",dp:[],ds:[],dn:[]},{c:"TDW",f:"N",r:"R",s:1.1,t:"C",dp:[],ds:[],dn:[]},{c:"TNL",f:"N",r:"L",s:4.1,t:"C",dp:[],ds:[],dn:[]},{c:"TEX",f:"A",r:"C",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"TGN",f:"A",r:"C",s:2,t:"C",dp:[],ds:[],dn:[]},{c:"TSM",f:"A",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"TUP",f:"A",r:"R",s:1,t:"S",dp:[],ds:[],dn:[]},{c:"TAB",f:"T",r:"C",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"TGI",f:"T",r:"R",s:2,t:"C",dp:[],ds:[],dn:[]},{c:"TDS",f:"U",r:"L",s:1.1,t:"C",dp:[],ds:["DI"],dn:[]},{c:"TSP",f:"T",r:"H",s:4.2,t:"S",dp:["DI"],ds:[],dn:[]},{c:"TNM",f:"U",r:"C",s:7,t:"C"},{c:"TPG",f:"N",r:"H",s:3.1,t:"C",dp:[],ds:["ZB"],dn:[]},{c:"TMG",f:"U",r:"R",s:3,t:"C",dp:[],ds:["PL"],dn:[]},{c:"TMM",f:"U",r:"C",s:5,t:"C",dp:[],ds:["PL"],dn:[]},{c:"TRA",f:"A",r:"R",s:5,t:"C",dp:[],ds:["MM"],dn:[]},{c:"TRS",f:"U",r:"R",s:5,t:"C",dp:[],ds:[],dn:[]},{c:"TRV",f:"T",r:"R",s:5,t:"C",dp:[],ds:[],dn:[]},{c:"TRW",f:"N",r:"R",s:5,t:"C",dp:[],ds:[],dn:[]},{c:"TBB",f:"T",r:"R",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"TOB",f:"N",r:"R",s:1,t:"S",dp:[],ds:[],dn:[]},{c:"TCN",f:"A",r:"C",s:7,t:"C",dp:["WL"],ds:["RB"]},{c:"TWS",f:"A",r:"C",s:2,t:"C",dp:[],ds:[],dn:[]},{c:"TVG",f:"A",r:"R",s:1.1,t:"C",dp:[],ds:["RB"],dn:[]},{c:"TXB",f:"U",r:"R",s:5,t:"S",dp:[],ds:[],dn:[]},{c:"TXS",f:"U",r:"C",s:1,t:"S",dp:[],ds:[],dn:[]},{c:"TCG",f:"T",r:"C",s:2.1,t:"S",dp:[],ds:[],dn:[]},{c:"TMS",f:"U",r:"H",s:6,t:"C",dp:["SB"],dn:["BN"]},{c:"TBC",f:"T",r:"H",s:6.2,t:"S",ds:["AH","MS"]},{c:"TWT",f:"A",r:"C",s:3,t:"C",dp:[],ds:["RB"],dn:[]},{c:"TRN",f:"T",r:"H",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"TGK",f:"U",r:"R",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"TSL",f:"U",r:"H",s:3,t:"C",dp:["PL"],ds:["TK","GW"]},{c:"TWG",f:"U",r:"C",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"UGM",f:"U",r:"C",s:2.2,t:"C",dp:[],ds:[],dn:[]},{c:"USY",f:"T",r:"R",s:6,t:"C",dp:["DF"],ds:["YT","MV"]},{c:"UGL",f:"T",r:"R",s:2,t:"C",dp:[],ds:["DI"],dn:[]},{c:"UIC",f:"T",r:"H",s:2.3,t:"C",dp:[],ds:["DI"],dn:[]},{c:"ULR",f:"U",r:"H",s:2,t:"C",dp:[],ds:["DI"],dn:[]},{c:"ULG",f:"N",r:"H",s:7,t:"S",dp:["LZ"],ds:["TK","TD"]},{c:"URD",f:"N",r:"H",s:1,t:"C",dp:[],ds:["ZB"],dn:[]},{c:"USA",f:"T",r:"H",s:7,t:"C",ds:["WL","VG","FC"]},{c:"UBL",f:"T",r:"R",s:1,t:"S",dp:[],ds:[],dn:[]},{c:"UCM",f:"T",r:"R",s:1,t:"C",dp:[],ds:["YT"],dn:[]},{c:"UEM",f:"T",r:"C",s:4,t:"C",dp:[],ds:["YT"],dn:[]},{c:"UHS",f:"T",r:"H",s:2,t:"C",dp:[],ds:["YT"],dn:[]},{c:"UIM",f:"T",r:"C",s:2,t:"C",dp:[],ds:["YT"],dn:[]},{c:"USS",f:"T",r:"H",s:7,t:"C",dp:["SQ"],ds:["TK","YT"]},{c:"UWL",f:"T",r:"H",s:2,t:"C",dp:["YT"]},{c:"UWS",f:"T",r:"R",s:2.3,t:"C",dp:["YT"],ds:[],dn:[]},{c:"UIW",f:"A",r:"L",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"URS",f:"U",r:"C",s:5,t:"S",dp:[],ds:[],dn:[]},{c:"UTM",f:"U",r:"C",s:2,t:"C",dp:[],ds:["DI"],dn:[]},{c:"UTR",f:"U",r:"H",s:2,t:"C",dp:["DI"],ds:[],dn:[]},{c:"URB",f:"U",r:"L",s:2.3,t:"C",dp:[],ds:["DI"],dn:[]},{c:"UPM",f:"U",r:"L",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"VIC",f:"T",r:"L",s:6,t:"C",ds:["MV","FR"],dn:["TD"]},{c:"VIK",f:"N",r:"L",s:5.2,t:"C",dp:["FB"],ds:["TK","SV"]},{c:"VRP",f:"N",r:"L",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"VBK",f:"A",r:"R",s:2,t:"C",dp:[],ds:["RB"],dn:[]},{c:"VIN",f:"A",r:"C",s:6,t:"C",ds:["RB"]},{c:"VTC",f:"A",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"VTW",f:"A",r:"R",s:4,t:"C",dp:[],ds:["RB"],dn:[]},{c:"VGN",f:"N",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"VND",f:"U",r:"R",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"VNF",f:"U",r:"R",s:1.1,t:"C",dp:[],ds:[],dn:[]},{c:"VNS",f:"U",r:"H",s:2,t:"C",dp:[],ds:[],dn:[]},{c:"VSK",f:"U",r:"C",s:4,t:"S",dp:[],ds:[],dn:[]},{c:"VCH",f:"U",r:"H",s:4.1,t:"S",dp:[],ds:[],dn:[]},{c:"VGR",f:"U",r:"C",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"VSP",f:"U",r:"C",s:6,t:"S",ds:["LG"]},{c:"VTR",f:"U",r:"R",s:7,t:"S"},{c:"VGL",f:"N",r:"R",s:5,t:"S",dp:[],ds:[],dn:[]},{c:"VGW",f:"U",r:"R",s:6,t:"C",dp:["HR"],ds:["GW"]},{c:"VOB",f:"T",r:"R",s:4,t:"S",dp:[],ds:[],dn:[]},{c:"VCG",f:"T",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"VPR",f:"A",r:"L",s:7,t:"C",ds:["LV"]},{c:"VES",f:"N",r:"L",s:2.1,t:"C",dp:[],ds:[],dn:[]},{c:"VYE",f:"N",r:"C",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"WBY",f:"T",r:"R",s:2,t:"C",dp:[],ds:["YT"],dn:[]},{c:"WBU",f:"T",r:"C",s:1.1,t:"C",dp:[],ds:["YT"],dn:[]},{c:"WHR",f:"T",r:"R",s:7,t:"C",ds:["AG"],dn:["TD"]},{c:"WMC",f:"A",r:"H",s:5,t:"C",dp:[],ds:["RB"],dn:[]},{c:"WMR",f:"A",r:"H",s:2.1,t:"C",dp:[],ds:[],dn:[]},{c:"WTK",f:"A",r:"H",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"WMM",f:"A",r:"H",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"WTW",f:"T",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"WGE",f:"U",r:"H",s:7.3,t:"S",ds:["FC","LG"]},{c:"WTA",f:"U",r:"L",s:4,t:"C",dp:["LG","SB"],ds:["PL"]},{c:"WWP",f:"U",r:"H",s:1.1,t:"C",dp:[],ds:[],dn:[]},{c:"WWR",f:"U",r:"C",s:3,t:"C",dp:[],ds:[],dn:[]},{c:"WOD",f:"U",r:"R",s:4,t:"S",dp:[],ds:[],dn:[]},{c:"WFM",f:"T",r:"H",s:1.1,t:"C",dp:[],ds:[],dn:[]},{c:"WWS",f:"U",r:"R",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"WBH",f:"T",r:"R",s:1.1,t:"C",dp:[],ds:[],dn:[]},{c:"WCS",f:"T",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"WPD",f:"T",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"WSE",f:"T",r:"L",s:5.1,t:"C",dp:[],ds:[],dn:[]},{c:"WPC",f:"A",r:"H",s:6.2,t:"S",ds:["TD"],dp:["NT"]},{c:"WFB",f:"N",r:"C",s:1.1,t:"C",dp:[],ds:[],dn:[]},{c:"WFS",f:"N",r:"H",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"WBG",f:"N",r:"L",s:1.1,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XTE",f:"N",r:"L",s:6,t:"C",dp:["MN"],ds:["TK","LZ"]},{c:"XCR",f:"N",r:"C",s:2,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XDH",f:"N",r:"R",s:3,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XHS",f:"N",r:"C",s:2.2,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XHU",f:"N",r:"C",s:1,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XRF",f:"N",r:"C",s:2,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XSH",f:"N",r:"L",s:1,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XTR",f:"N",r:"H",s:5.1,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XDV",f:"N",r:"H",s:1,t:"C",dp:["ZB"],ds:[],dn:[]},{c:"XRW",f:"N",r:"H",s:2,t:"S",dp:["ZB"],ds:[],dn:[]},{c:"YWC",f:"T",r:"C",s:2,t:"C",dp:[],ds:["YT"],dn:[]},{c:"YNS",f:"N",r:"L",s:2.2,t:"C",dp:[],ds:[],dn:[]},{c:"ZXR",f:"T",r:"H",s:5,t:"C",dp:[],ds:[],dn:[]},{c:"ZPM",f:"T",r:"R",s:1.1,t:"C",dp:[],ds:[],dn:[]},{c:"ZTU",f:"N",r:"L",s:1,t:"C",dp:[],ds:["ZB"],dn:[]},{c:"ZDK",f:"N",r:"H",s:6,t:"C",dp:["RG"],ds:["ZB"]},{c:"ZIN",f:"N",r:"C",s:1,t:"C",dp:[],ds:["ZB"],dn:[]},{c:"ZMT",f:"N",r:"C",s:3,t:"C",dp:[],ds:["ZB"],dn:[]},{c:"ZSH",f:"T",r:"L",s:1,t:"C",dp:[],ds:[],dn:[]}],Ii=[["ASQ",["SLG","SLG"]],["CGL",["CGF"]],["DHC",["DYF"]],["DTD",["TOT"]],["FGD",["FGA","FGB","FGG"]],["IBA",["AVB"]],["IZK",["IFL","IFR"]],["RHU",["RSC"]],["SLS",["MMY"]],["TSL",["FUN"]],["WHR",["WHC"]]];class Wi{raw={["C"]:{["A"]:0,["N"]:0,["T"]:0,["U"]:0},["S"]:{["A"]:0,["N"]:0,["T"]:0,["U"]:0}};addStat(t,i){this.raw[t][i]++}g(t,i){return this.raw[t][i]}typeSum(t){return si.map(i=>this.g(t,i)).reduce((i,r)=>i+r,0)}getTotal(){const t=this.typeSum("C"),i=this.typeSum("S");return[t,i,t+i]}getFactTotal(t){const i=this.g("C",t),r=this.g("S",t);return[i,r,i+r]}}const s=(o,t)=>({card:o,num:t}),F=(o,t,i,r,n)=>{const c=i==="X"?[t]:[t,i];return{name:o,factions:c,rating:r,cards:n}},sr={name:"Official 2 - 3",id:"SBE1",decks:[F("Cruel Corrosion","A","N","O",[s("IHA",1),s("WBG",1),s("OXP",1),s("DFR",1),s("APM",1),s("SNP",1),s("GRM",2),s("ETN",2),s("DHW",2),s("OXM",2),s("AEN",2),s("ATG",2),s("CTI",2),s("CTW",2),s("FPS",2),s("GRW",2),s("MTT",2),s("SAP",2)]),F("Death March","N","T","O",[s("ZTU",1),s("VRP",1),s("GGP",1),s("EPD",1),s("DBT",1),s("BSM",1),s("TDW",2),s("NGT",2),s("UBL",2),s("FWK",2),s("BZD",2),s("CSB",2),s("SLH",2),s("MMH",2),s("LSK",2),s("GBG",2),s("CFG",2),s("DSK",2)]),F("Dinosaurs!","T","U","O",[s("TDS",1),s("SSR",1),s("FRR",1),s("ULR",1),s("UTR",1),s("BTM",1),s("UGL",2),s("EHN",2),s("SPD",2),s("GHB",2),s("FLN",2),s("SML",2),s("RFL",2),s("OXS",2),s("UTM",2),s("TWG",2),s("ENR",2),s("DBP",2)]),F("Wyvern's Wrath","T","U","O",[s("CSW",1),s("SMD",1),s("FRR",1),s("UIC",1),s("CFB",1),s("UGL",2),s("FSH",2),s("FLN",2),s("WPD",1),s("TWG",2),s("TCG",2),s("TGS",2),s("SML",2),s("SVH",1),s("SCL",2),s("RTS",1),s("FWB",2),s("ENR",2),s("ABR",2)]),F("Ironmind Intuition","A","N","O",[s("IMA",1),s("GMP",1),s("OXA",1),s("EPD",1),s("OJC",1),s("ESU",2),s("OXM",2),s("MMA",2),s("SAP",1),s("AFO",2),s("GBG",2),s("CTW",2),s("SRH",1),s("TSM",2),s("SLH",1),s("MTT",1),s("DCR",1),s("DFB",1),s("BSR",1),s("LGT",1),s("XRF",2),s("MMX",1)]),F("Nethershriek Negation","N","T","O",[s("SBG",1),s("NSH",1),s("FFU",1),s("EWE",1),s("BFM",1),s("WBH",1),s("UWS",1),s("TGI",2),s("RFL",2),s("GRM",1),s("ASG",1),s("YWC",2),s("XRF",2),s("WPD",2),s("WCS",2),s("WBU",2),s("TCG",1),s("FSK",1),s("SLH",2),s("CFG",1),s("RTS",2)]),F("Ridgeback's Rage","A","U","O",[s("URB",1),s("AGK",1),s("ESP",1),s("FRR",1),s("NXT",1),s("ALG",1),s("FGB",1),s("PHS",2),s("TUP",1),s("EWT",2),s("PTR",1),s("VBK",1),s("AGC",1),s("AEN",2),s("ETN",1),s("FPS",2),s("MXW",2),s("GHT",1),s("TWG",2),s("SNB",1),s("SML",1),s("JPK",1),s("ENR",1),s("IWC",1)]),F("Spare Parts","N","X","O",[s("SEV",1),s("SHG",1),s("TPG",1),s("CGL",1),s("FRV",1),s("HFA",2),s("XDH",1),s("GRM",1),s("SCV",1),s("DFB",2),s("EBW",2),s("GBG",2),s("GLF",2),s("XHS",2),s("SOT",1),s("XRF",2),s("SCS",1),s("ZMT",1),s("SLH",1),s("VYE",1),s("XCR",2),s("XHU",1)]),F("Future Forged","A","X","O",[s("NXA",1),s("IMD",1),s("FOL",1),s("SFA",2),s("SFT",1),s("SCD",1),s("CAG",1),s("ESU",1),s("NNS",1),s("FPM",1),s("PRI",1),s("SSS",1),s("CTG",1),s("TSM",2),s("IWC",1),s("MMA",2),s("TGN",2),s("MTT",1),s("SKG",1),s("AFO",1),s("MMV",1),s("TWS",1),s("SBA",2),s("SSK",1),s("JPK",1)]),F("Burning Rage","T","X","O",[s("ROK",1),s("KKK",1),s("MOE",1),s("AFR",1),s("FBI",1),s("FSS",2),s("FLN",2),s("CCT",2),s("BRN",2),s("WPD",2),s("SSM",2),s("SOK",1),s("RTS",2),s("FSK",2),s("CWK",2),s("CFG",2),s("BSW",2),s("FMS",2)]),F("Awakened Fury","U","X","O",[s("DZD",1),s("SSE",1),s("BTR",1),s("TSL",1),s("MPH",1),s("CDT",1),s("DYB",1),s("BTH",2),s("TMG",2),s("BWD",2),s("RHY",2),s("SBD",2),s("GMR",2),s("STS",1),s("OSL",2),s("SBI",2),s("LYS",2),s("TGS",2),s("SOD",2)]),F("Titan's Assault","N","T","O",[s("ATT",1),s("TNL",1),s("RSE",1),s("SPH",1),s("SCV",2),s("ABB",2),s("TBB",2),s("BRN",2),s("FLN",2),s("CMF",2),s("XDH",2),s("FST",2),s("TAB",2),s("MDE",2),s("FSK",2),s("FLH",2),s("CBB",2)]),F("Verdant Fortress","A","U","O",[s("NGQ",1),s("RHU",1),s("VCH",1),s("ESG",1),s("PLW",2),s("NNS",2),s("SND",2),s("WOD",2),s("IBR",2),s("BWD",2),s("SBI",2),s("RWC",2),s("TEX",2),s("SER",2),s("SWG",2),s("SCC",2),s("DYB",2)]),F("Umbruk Uprising","T","U","O",[s("LUC",1),s("BWT",1),s("GHR",1),s("TSP",1),s("WBH",1),s("COD",1),s("SDR",1),s("ZPM",1),s("OXS",1),s("WOD",1),s("RWC",2),s("SSG",2),s("VGR",2),s("CFG",2),s("UEM",2),s("FFG",2),s("UGL",2),s("DMR",2),s("RTS",2),s("CWK",2)]),F("Onyxium Twilight","A","N","O",[s("EPH",1),s("DTD",1),s("POX",1),s("DDS",1),s("OHV",1),s("PHS",1),s("DFB",1),s("TDW",1),s("CAG",1),s("ALG",1),s("TUP",2),s("CTW",2),s("XCR",2),s("SSK",2),s("SRH",2),s("ATG",2),s("MTT",2),s("SLH",2),s("GLF",2),s("AFO",2)])]},ar={name:"Official 5 - 7",id:"SBE2",decks:[F("Blistering Chaos","T","U","O",[s("WSE",1),s("MHR",1),s("PMI",1),s("SIV",1),s("BRN",1),s("HOD",1),s("CHA",1),s("LYS",1),s("TRS",2),s("PSC",2),s("FLN",2),s("EFA",2),s("SHS",2),s("TXB",2),s("VNF",2),s("CFG",2),s("FSK",2),s("CBB",2),s("VND",2)]),F("Dark Retribution","A","N","O",[s("AAA",1),s("SNT",1),s("ABE",1),s("XTR",1),s("CNT",1),s("HOX",1),s("PLW",1),s("AGW",1),s("OHV",2),s("OXM",2),s("XDH",2),s("VGL",2),s("ETN",2),s("MTT",2),s("VYE",2),s("DSK",2),s("BFT",2),s("ATZ",2),s("IBR",2)]),F("Iron Tide","A","U","O",[s("EFE",1),s("DPB",1),s("HWM",1),s("HTR",1),s("OJC",1),s("RBG",1),s("EWT",1),s("CIN",1),s("TGK",2),s("CAG",2),s("TGN",3),s("SCC",3),s("URS",3),s("LSP",3),s("TSM",3),s("TMM",3)]),F("Dragon Forge","N","T","O",[s("DGW",1),s("VIK",1),s("DDD",1),s("SMD",1),s("FFM",1),s("SHV",1),s("GRP",1),s("TGI",1),s("SLH",1),s("WBH",2),s("BZD",2),s("EFA",2),s("WFB",3),s("BZS",3),s("CCR",3),s("DSK",3),s("RHC",3)]),F("Call of Deepwood","U","X","O",[s("EVT",1),s("POD",1),s("RFA",1),s("TMS",1),s("LSS",1),s("DYB",1),s("TRS",1),s("VGW",1),s("UTM",2),s("RHY",2),s("SMA",2),s("TMM",2),s("BBN",2),s("GHS",2),s("SBI",2),s("BTS",2),s("STS",2),s("SVO",2),s("GMR",2)]),F("Kadras' Fury","T","X","O",[s("IGR",1),s("POK",1),s("SWA",1),s("SGA",1),s("FLN",1),s("TRV",1),s("FSS",1),s("AWU",1),s("STB",2),s("CFG",2),s("BBL",2),s("KSB",2),s("NGW",2),s("ATS",2),s("ABR",2),s("BSW",2),s("TCG",2),s("CBB",2),s("WPD",2)]),F("Tarsus Unleashed","N","X","O",[s("IRT",1),s("POT",1),s("ZDK",1),s("HFA",1),s("GRM",1),s("DSS",1),s("TRW",1),s("ABB",1),s("XCR",2),s("CSB",2),s("SHY",2),s("BBD",2),s("EBW",2),s("NSY",2),s("TPT",2),s("XRF",2),s("GGS",2),s("ZMT",2),s("IVS",2)]),F("Might of Anvillon","A","X","O",[s("NXB",1),s("FWS",1),s("POA",1),s("SFA",1),s("SSS",1),s("TRA",1),s("BTB",1),s("BWH",1),s("TWT",2),s("TEX",2),s("IBR",2),s("VIN",2),s("BBR",2),s("NXP",2),s("CBS",2),s("FPS",2),s("ATG",2),s("SNB",2),s("SSK",2)]),F("Nature's Defenses","T","U","O",[s("RSD",1),s("PHC",1),s("SPG",1),s("TBC",1),s("GHR",1),s("NGB",1),s("DDF",1),s("VGW",3),s("UEM",3),s("FSK",2),s("TMM",2),s("VSP",2),s("BZS",2),s("SPD",3),s("RTS",3),s("TGK",3)]),F("Unlikely Alliance","A","N","O",[s("RMB",1),s("SFG",1),s("GGW",1),s("WPC",1),s("SBA",2),s("IBR",1),s("BSR",1),s("MMV",1),s("CRC",1),s("BSP",1),s("NNS",1),s("XDH",2),s("EBW",2),s("SLH",2),s("CTG",3),s("XRF",3),s("OHV",3),s("TSM",3)]),F("Toxic Shards","U","X","O",[s("SPT",1),s("MHR",1),s("KBE",1),s("DPG",1),s("LLV",1),s("HVE",2),s("PSC",2),s("VND",2),s("DSV",2),s("TXB",2),s("CSR",3),s("GSC",3),s("GVS",3),s("LHY",3),s("TGS",3)]),F("Winds of Fury","T","X","O",[s("NUG",1),s("FMD",1),s("CYR",1),s("FFM",1),s("AIV",1),s("WBH",2),s("UBL",2),s("FZS",2),s("EFA",2),s("WBY",2),s("KSB",3),s("SCL",3),s("TCG",3),s("CWK",3),s("ISB",3)]),F("Ghastly Echoes","N","X","O",[s("LMD",1),s("XTE",1),s("CGG",1),s("EPD",1),s("NCP",1),s("NOZ",2),s("OSP",2),s("PLI",2),s("GRP",2),s("DOV",2),s("CYS",3),s("IVS",3),s("MRF",3),s("GRW",3),s("FSL",3)]),F("Cypien Technology","A","X","O",[s("CMR",1),s("RHU",1),s("CEX",1),s("FOL",1),s("AHL",1),s("SSI",2),s("CAG",2),s("CIN",2),s("CNT",2),s("PHS",2),s("MXW",3),s("LSP",3),s("SSN",3),s("TWT",3),s("CSH",3)])]},nr={name:"Starters & Early Tournies",id:"T1309",decks:[F("Alloyin Starter","A","X","O",[s("SYO",1),s("BSS",1),s("SFT",2),s("SNP",2),s("TSM",2),s("SSS",2),s("ALG",2),s("MXW",3),s("TUP",3),s("FPS",3),s("MND",3),s("IWC",3),s("SKB",3)]),F("Nekrium Starter","N","X","O",[s("SFS",1),s("GGD",1),s("FFD",3),s("EPD",2),s("CCR",2),s("HGS",2),s("DSS",2),s("BWK",2),s("GBG",3),s("DSK",3),s("GRP",3),s("VGN",3),s("XHU",3)]),F("Tempys Starter","T","X","O",[s("FBC",1),s("RBH",1),s("CFB",3),s("FSM",2),s("FSH",2),s("FSS",2),s("PMS",2),s("RFL",2),s("UBL",3),s("WPD",3),s("SGI",3),s("AMY",3),s("WCS",3)]),F("Uterra Starter","U","X","O",[s("UPM",1),s("EHW",1),s("FRR",3),s("SPD",2),s("HTP",2),s("LSS",2),s("SDR",2),s("SRD",2),s("FWR",3),s("DBP",3),s("GHT",3),s("GSS",3),s("TXS",3)]),F("Axel: Lifegain","T","U","1",[s("AGD",3),s("EHW",3),s("FRR",3),s("FIN",1),s("UPM",1),s("LKP",2),s("BTM",2),s("LBL",3),s("GSS",3),s("RFA",3),s("GHB",3),s("EFP",3)]),F("Bryan: Knightbots","A","U","1",[s("AGK",3),s("AFS",3),s("BSG",2),s("BSS",3),s("JPK",3),s("VBK",2),s("FRR",3),s("TDS",3),s("WWP",3),s("MXW",2),s("OJC",3)]),F("Derk: Metaminds","A","X","1",[s("OJC",3),s("DMW",3),s("MMV",3),s("JPK",3),s("MMO",3),s("GMP",3),s("ALS",3),s("MMA",3),s("SFA",3),s("BTN",3)]),F("Foxhull: Grow Wide","U","X","1",[s("DBP",3),s("EHW",2),s("FRR",3),s("FWT",3),s("UPM",3),s("LKP",2),s("BTM",3),s("HTR",2),s("LBD",2),s("RFA",3),s("GHB",2),s("SDR",2)]),F("Hectares: Dino Attack","A","U","1",[s("ALS",3),s("TDS",3),s("FRR",3),s("WWP",3),s("SML",2),s("BSG",3),s("JPK",2),s("ODC",3),s("NXT",2),s("WMM",3),s("GHB",3)]),F("Klaven: Mono-N","N","X","1",[s("SCS",3),s("ROG",1),s("GGP",1),s("GGD",3),s("WFS",1),s("DSS",3),s("ZTU",1),s("GBG",3),s("HFA",3),s("EXD",1),s("EPD",1),s("BSR",1),s("MRF",2),s("HGS",3),s("GTH",3)]),F("Phoenyx: Free Spell Dmg","T","U","1",[s("SHK",3),s("MOE",3),s("FRR",3),s("LSK",3),s("FFU",3),s("UBL",3),s("WWS",3),s("FSS",3),s("ENR",3),s("MMH",3)]),F("Technogeek5000: Grow Wide","N","U","1",[s("DBP",2),s("EHW",2),s("FRR",3),s("HTP",2),s("UPM",3),s("LKP",2),s("GHT",3),s("GGP",2),s("LBD",1),s("EPD",2),s("DBT",2),s("SPD",3),s("SDR",3)]),F("Thematik: Level Up","A","T","1",[s("IWC",3),s("FSS",3),s("ETN",1),s("WPD",2),s("FSM",1),s("AHL",1),s("UBL",3),s("SMD",2),s("BTN",3),s("LSK",1),s("MMH",3),s("FFU",1),s("TSM",3),s("ALG",3)]),F("TinyGrimes: NT Shapers","N","T","1",[s("DSS",3),s("FSS",3),s("EPD",2),s("GTH",3),s("FSM",1),s("MOE",1),s("UBL",3),s("GGP",3),s("GBG",1),s("LSK",3),s("HGS",1),s("CTW",1),s("SHK",3),s("GGD",1),s("DBT",1)])]},or={name:"The Forge",id:"TG10",decks:[F("DarkSoulSP: Grim Debuff","N","U","1",[s("BWK",3),s("TDS",2),s("FRR",3),s("WWP",3),s("GGP",3),s("GGD",3),s("DBT",1),s("WFS",3),s("CTW",3),s("EPD",3),s("GHB",3)]),F("ErrorAsh: Burn","N","T","1",[s("UBL",2),s("EFM",2),s("FBI",3),s("ESK",3),s("FLN",3),s("EFP",3),s("MOE",3),s("FSS",3),s("SHK",3),s("EPD",3),s("CHV",2)]),F("ErrorAsh: Farmer Tarsus","N","U","1",[s("WWS",3),s("DYB",3),s("FRR",3),s("SYL",3),s("EPD",3),s("SSE",2),s("NSH",2),s("TDW",3),s("NFF",2),s("CHR",2),s("LKP",2),s("EXD",2)]),F("ErrorAsh: Necro Mobiltiy","N","T","1",[s("NSH",2),s("SMD",2),s("DDD",3),s("TDW",3),s("VRP",3),s("WCS",3),s("BSM",3),s("SHG",2),s("TGI",2),s("EPD",3),s("FVA",2),s("DBT",1),s("TRN",1)]),F("Hans: Yetis","T","U","1",[s("UWL",3),s("FFU",3),s("WBY",3),s("UIM",3),s("WBU",3),s("SSR",1),s("TRN",1),s("GTT",1),s("GCR",3),s("FRR",3),s("UBL",3),s("WWP",3)]),F("MingisTheKing: Mobility","N","T","1",[s("DDD",3),s("DBT",3),s("EPD",3),s("EFP",3),s("GGP",3),s("LSK",3),s("SHK",3),s("UBL",3),s("WCS",3),s("ZTU",3)]),F("Noetherian: Shambler","N","U","1",[s("XSH",3),s("SPM",3),s("FRR",3),s("ODC",3),s("SSE",3),s("ESK",3),s("TGS",3),s("XRF",3),s("VRP",3),s("URB",3)]),F("Noetherian: Tempo","T","U","1",[s("RBH",3),s("TDS",3),s("FRR",3),s("WWP",3),s("EFP",3),s("AMY",2),s("FVA",2),s("ENR",3),s("ZSH",3),s("EHW",3),s("GHB",2)]),F("Piquadore: Zombies","N","T","1",[s("BWK",2),s("KOD",2),s("CYC",3),s("GRM",3),s("VYE",3),s("XRW",3),s("MOE",2),s("ZTU",3),s("BSM",3),s("EPD",3),s("DSS",3)]),F("Stautmeister: Yeti Mobility","T","U","1",[s("AGM",3),s("TDS",2),s("FRR",3),s("WWP",3),s("CSW",3),s("FLN",3),s("EFP",2),s("UWL",3),s("WBY",2),s("WCS",2),s("EHW",2),s("SHS",2)]),F("Technonaut: Steelscale","A","T","1",[s("UHS",2),s("FLN",3),s("STG",3),s("CRC",3),s("SHK",3),s("EFP",2),s("WMR",2),s("WMM",3),s("JPK",3),s("SMD",3),s("FVA",3)]),F("Technonaut: Woebringer","N","T","1",[s("LSK",2),s("WBG",3),s("EPD",3),s("DDD",3),s("SHK",3),s("EFP",3),s("ZTU",2),s("GGD",2),s("GGP",3),s("CTW",3),s("DBT",3)]),F("Zrandles: Metaminds","A","N","1",[s("DMW",3),s("GMP",3),s("MMA",3),s("MMV",2),s("TDW",3),s("VRP",3),s("EPD",3),s("SHG",2),s("OJC",2),s("ESK",2),s("CHV",2),s("CTW",2)]),F("Zrandles: Tempo","N","T","1",[s("CTW",1),s("GCR",1),s("CFG",1),s("FZS",1),s("FBI",3),s("MOE",3),s("EFP",3),s("LSK",3),s("FLN",3),s("SHK",3),s("RTS",3),s("GGP",3),s("UBL",2)])]},hr={name:"Team A1",id:"A1FU",decks:[F("Phytogaunt","N","U","J",[s("DTD",3),s("EPD",2),s("XTE",3),s("GGD",3),s("GGP",3),s("GGR",3),s("ROG",1),s("ESK",3),s("GGW",3),s("POT",3),s("PTB",3)]),F("ANfinity","A","N","J",[s("IMA",3),s("AAA",2),s("MMA",3),s("KIW",3),s("ESU",3),s("ABE",3),s("AFO",1),s("XDH",2),s("GBG",1),s("SHV",2),s("SCV",2),s("LCE",2),s("MTS",1),s("PRI",1),s("WPC",1)]),F("Icefinity","A","T","J",[s("IMA",3),s("AAA",1),s("MMA",2),s("MOE",3),s("ESU",3),s("ABE",3),s("NNS",1),s("IGR",2),s("SHK",1),s("OBB",2),s("LCE",2),s("ITO",1),s("PRI",3),s("BRN",3)]),F("Drain Tank","A","N","5",[s("DTD",3),s("SRP",2),s("LLS",3),s("ESK",3),s("CYC",3),s("BRS",3),s("PLI",1),s("SOC",2),s("EPD",2),s("ABE",2),s("HOX",2),s("DCR",2),s("VYE",2)]),F("Big Animals","N","U","5",[s("DTD",3),s("MHR",2),s("DZD",3),s("SPB",3),s("SHY",3),s("URB",3),s("VIK",1),s("ESK",3),s("DYS",3),s("LYS",3),s("IME",3)]),F("Explosive Dragon Rage","A","T","5",[s("FMD",3),s("SGA",2),s("AFR",3),s("FBI",3),s("POK",3),s("SHK",3),s("ROK",3),s("IGR",1),s("OEX",3),s("BWW",2),s("STB",2),s("BRN",2)]),F("Angry Tree","N","U","5",[s("DTD",3),s("EPD",2),s("CYC",3),s("SPB",3),s("IME",3),s("SOC",3),s("ODC",2),s("ESK",2),s("WTA",3),s("VYE",3),s("HOX",3)]),F("Commando","A","N","5",[s("GSF",3),s("SIX",2),s("GMP",3),s("DMW",3),s("IMA",3),s("MMA",3),s("MBR",3),s("POA",3),s("WMM",2),s("EXD",2),s("SFA",3)]),F("Our Robot Overlords","A","T","5",[s("AGK",3),s("AFS",3),s("ATT",3),s("BTB",3),s("BSS",3),s("FWS",3),s("FLC",3),s("GOS",3),s("RHU",3),s("WMC",3)]),F("Random Aggression","T","U","5",[s("SMA",3),s("EHW",3),s("KSB",3),s("FSH",3),s("RTW",3),s("SDR",3),s("LBD",3),s("KKK",3),s("FRR",3),s("SIV",3)]),F("The Crux of it All","A","N","5",[s("CMR",3),s("VPR",3),s("LLD",3),s("DCR",3),s("SCV",3),s("IBA",2),s("SRM",2),s("SRP",1),s("MMR",2),s("LCE",1),s("NXA",2),s("IMD",1),s("OJC",2),s("WPC",2)])]},lr={name:"Fandom Wiki",id:"FDWK",decks:[F("Castles","A","U","5",[s("TDS",3),s("TMS",3),s("DTR",3),s("HTR",3),s("RSD",3),s("SPB",3),s("MHR",3),s("RHU",3),s("AEC",3),s("FRR",3)]),F("Runebark's Revenge","U","X","5",[s("RBG",3),s("EVT",3),s("EFE",3),s("SBI",3),s("RSD",3),s("SPB",3),s("ODC",3),s("GSS",3),s("BTR",3),s("POD",3)]),F("Don't Wake Boris","T","U","5",[s("AGD",3),s("EVT",3),s("EFE",3),s("DGW",3),s("LYS",3),s("SBD",3),s("ODC",3),s("GSS",3),s("BRN",3),s("POD",3)]),F("Shrink N' Squat","A","N","5",[s("DDS",3),s("ESK",3),s("EPD",3),s("GRW",3),s("GGP",3),s("HRM",3),s("PPM",3),s("SRM",3),s("MMG",3),s("WFS",3)]),F("Healthy Mystic","T","U","A",[s("LYR",3),s("PYM",3),s("EFE",3),s("TGS",3),s("LYS",3),s("SBD",3),s("TMG",3),s("TMM",3),s("SSH",3),s("SSE",3)]),F("Varna Control","A","N","5",[s("VIK",3),s("KIW",3),s("LCE",3),s("ABE",3),s("ZTU",3),s("SES",3),s("DCR",3),s("SCV",3),s("ESU",3),s("BRS",2),s("HOX",1)]),F("Barry's Buddies","A","T","5",[s("AAA",3),s("BRS",3),s("SMD",3),s("GOS",3),s("PMP",3),s("AGW",3),s("NNS",3),s("PLW",3),s("OBB",3),s("ABE",3)]),F("Heraldbomb","T","U","5",[s("UWL",3),s("HOD",3),s("PTB",3),s("BTM",3),s("LYS",3),s("DDF",3),s("MHR",3),s("WSE",3),s("SPB",3),s("WWP",3)]),F("Heartseeker","A","T","3",[s("UWL",3),s("FFU",3),s("FKS",3),s("OEX",3),s("POK",3),s("ROK",3),s("UHS",3),s("WBU",3),s("UCM",2),s("WSE",2),s("KKK",2)]),F("Punchy","A","U","3",[s("ODC",3),s("DBP",3),s("URB",3),s("RHU",3),s("CEX",3),s("GOS",3),s("LYS",3),s("PMP",3),s("WMM",3),s("ABE",3)]),F("Sea of Sludge","N","U","3",[s("ODC",3),s("WTA",3),s("GSS",3),s("DYL",3),s("AGD",3),s("GGW",3),s("CYC",3),s("VYE",3),s("DCR",3),s("SCV",3)]),F("Poison Control","A","U","5",[s("MHR",3),s("LOD",3),s("VNS",3),s("ESG",3),s("LCE",3),s("ESU",3),s("IMA",3),s("DSV",3),s("GSS",2),s("CSR",1),s("ABE",3)]),F("Original Fangsters","A","N","3",[s("VES",3),s("XTE",3),s("GGP",3),s("RHU",3),s("WBG",3),s("ABE",3),s("DDS",3),s("SOC",3),s("JPK",3),s("EPD",3)]),F("Hatorade","A","U","5",[s("MHR",3),s("ARB",3),s("DDF",3),s("IHA",3),s("LLG",3),s("NXA",3),s("OJC",3),s("RHU",3),s("SPB",3),s("LYS",3)]),F("Wegu Control","A","U","5",[s("MHR",3),s("CHR",3),s("KIW",3),s("ESG",3),s("WTA",3),s("ODC",3),s("GSS",3),s("OAP",2),s("NGQ",1),s("DDF",2),s("WPC",1),s("ABE",3)])]},cr={name:"Battlebranded",id:"BTLB",decks:[F("Bucket of Spite","N","T","3",[s("SMD",2),s("SPH",3),s("BSM",3),s("EBW",3),s("UWL",3),s("BSW",2),s("BWW",1),s("FMD",3),s("BST",3),s("EPD",3),s("GGD",2),s("HOX",1),s("SOC",1)]),F("Overoverloaded","A","N","J",[s("XDH",3),s("RMB",3),s("ABE",3),s("IMA",3),s("EPD",3),s("TPG",3),s("ESU",3),s("KIW",2),s("LCE",2),s("ESK",2),s("STR",1),s("CYC",1),s("PRI",1)]),F("Dysian Forest","N","U","3",[s("POX",3),s("DBQ",3),s("TDS",3),s("NGQ",3),s("WWP",3),s("DTD",3),s("LBD",3),s("SSH",2),s("LYS",3),s("DYS",2),s("FRR",1),s("HOX",1)]),F("Statis Shenanigans","A","T","J",[s("OBB",3),s("SHK",3),s("ABE",3),s("IMA",3),s("SIX",3),s("GCR",2),s("ESU",3),s("NNS",2),s("LCE",3),s("OJC",2),s("BRS",1),s("VIC",1),s("PRI",1)]),F("Masochist Zoo","N","U","5",[s("DZD",3),s("TDW",3),s("LLD",3),s("LLG",3),s("RWC",3),s("BWT",3),s("DYS",2),s("SPB",3),s("SHY",3),s("IME",2),s("TDS",2)]),F("Pummelled by Gauntlets","A","N","3",[s("AGK",3),s("FWS",3),s("LLD",3),s("LLS",3),s("NXA",3),s("RHU",3),s("ARB",2),s("GOS",2),s("OJC",2),s("ESK",2),s("PMP",2),s("SOC",2)]),F("Nuada's Greenhouse","T","U","3",[s("NFF",3),s("NGQ",3),s("LKP",3),s("SYL",3),s("ATT",3),s("BWW",3),s("GMR",2),s("FRR",2),s("SSH",1),s("URB",2),s("BRN",2),s("SSE",3)]),F("Abominable Slaughter","N","T","3",[s("CGL",3),s("XDH",3),s("LLD",3),s("POX",3),s("ABM",3),s("ZXR",3),s("BWW",3),s("FMD",3),s("BST",2),s("ROK",3),s("HOX",1)]),F("Outraged Ingir","A","T","5",[s("OBB",3),s("FMD",3),s("IKA",3),s("BST",3),s("NXA",3),s("KKK",2),s("RHU",3),s("ROK",3),s("BWW",3),s("WSE",1),s("OEX",3)]),F("Lord of the Necros","N","T","3",[s("TPG",3),s("BSM",3),s("EBW",3),s("FST",3),s("TNL",3),s("BWW",3),s("XRW",3),s("CSB",3),s("GGD",3),s("SOC",3)]),F("Thar' Be Omegas","A","U","J",[s("AFS",3),s("BSS",3),s("ARB",3),s("FGA",3),s("FGB",3),s("FGG",3),s("FGD",3),s("TBA",3),s("SSH",3),s("NNS",3)]),F("Skillshriek","N","U","5",[s("POX",3),s("SEV",3),s("LLD",3),s("SPB",3),s("NSH",3),s("TDW",3),s("XDH",2),s("SBI",2),s("ATP",2),s("FRR",2),s("AEC",2),s("IME",2)]),F("Kitfinity","A","N","J",[s("XDH",3),s("MMX",3),s("GMP",2),s("IMA",3),s("VRP",3),s("SEV",3),s("ESU",3),s("KIW",3),s("SHG",2),s("SHV",2),s("SCV",1),s("CYC",1),s("AFO",1)]),F("There Can Be Only One","A","U","J",[s("AHL",3),s("WMM",3),s("ESU",3),s("PRI",3),s("JPK",3),s("MPH",3),s("LYS",3),s("BTM",2),s("FIN",1),s("SOD",3),s("VGR",3)])]},dr={name:"Misc. Web Decks",id:"WEB1",decks:[F("Steelscale Debuff","A","N","J",[s("STG",3),s("CTG",3),s("VTW",3),s("IME",3),s("NNS",3),s("PLW",3),s("SOC",3),s("SES",2),s("IMD",1),s("DFR",1),s("EXD",1),s("HOX",2),s("SHV",1),s("WMM",1)]),F("The Fun Train","T","U","5",[s("AMD",3),s("ATT",3),s("BWW",3),s("EFM",3),s("SPB",3),s("URB",3),s("AEC",3),s("BRN",3),s("LYS",3),s("SOV",2),s("TGL",1)]),F("Snouty's Sludges","N","U","A",[s("DYL",3),s("ODC",3),s("SOL",3),s("RSD",3),s("PVA",2),s("SFS",3),s("GRP",3),s("NCM",3),s("LBD",3),s("DYS",3),s("WGE",1)]),F("Metabuse","A","N","J",[s("POX",3),s("WMC",3),s("SEV",3),s("CKB",3),s("ARB",3),s("LLD",3),s("LLS",3),s("XDH",3),s("IME",3),s("GRM",2),s("HOX",1)]),F("Immortal Dino","N","U","3",[s("BTR",3),s("BWT",3),s("RWC",3),s("TDS",3),s("UTR",3),s("SEV",2),s("SMA",2),s("LSS",3),s("TDW",2),s("HOX",2),s("SOC",2),s("VRP",2)]),F("Redacted","A","U","J",[s("MDR",3),s("RHU",3),s("TBA",3),s("SPM",3),s("CTG",3),s("NXO",3),s("AFO",2),s("SVO",2),s("AGW",2),s("FRR",2),s("SBI",3),s("LLV",1)]),F("Ebonflame Thunderskull","N","T","3",[s("ATT",3),s("EFM",3),s("VES",3),s("ESK",3),s("BWW",3),s("SOV",3),s("NSH",3),s("DCR",2),s("SCV",2),s("DBT",2),s("IME",3)]),F("Binben the Math Nut","A","T","A",[s("BLH",3),s("KIW",3),s("GMP",3),s("SHK",3),s("OBB",3),s("BRN",3),s("STP",3),s("ESU",2),s("GOS",2),s("FLN",2),s("MTT",2),s("GCR",1)]),F("For Ever More the Oil's Chore","U","X","A",[s("VNS",3),s("VNF",3),s("SHS",3),s("STO",3),s("DSV",3),s("PSC",2),s("ODC",2),s("WWP",2),s("SBI",2),s("TDS",2),s("DZD",2),s("FRR",2),s("LYS",1)]),F("Aegis Boon","A","U","1",[s("AGK",3),s("ALS",3),s("BSG",3),s("IHA",3),s("NXT",3),s("OBD",3),s("FRR",3),s("DYB",2),s("WWP",3),s("SYL",2),s("TDS",2)]),F("Thanksgiving Dinner","N","T","J",[s("BTD",3),s("CSW",3),s("GBG",3),s("ICD",3),s("CDM",2),s("GGR",2),s("EFP",2),s("SOC",2),s("DCR",2),s("FSL",1),s("DRD",1),s("NCM",1),s("XSH",1),s("GRM",1),s("TBC",1),s("EXD",1),s("HGS",1)]),F("Warden of Ice","A","T","A",[s("GTT",3),s("SHK",3),s("GMP",3),s("MTT",3),s("SIX",3),s("GCR",3),s("ESU",3),s("CAG",2),s("UBL",3),s("AFO",2),s("ENP",2)]),F("Magmifly","T","X","A",[s("SLS",3),s("STM",3),s("LUC",3),s("POK",3),s("AWU",3),s("BTD",3),s("BMY",2),s("AGU",2),s("SWA",2),s("TST",2),s("ROK",2),s("BRN",2)]),F("Harvesting Dehboy's Soul","N","T","1",[s("SHV",3),s("GGD",3),s("SHK",3),s("EPD",3),s("VGN",3),s("ZTU",1),s("FWK",2),s("FSS",2),s("DSS",2),s("DBT",2),s("CTW",2),s("UBL",2),s("SFS",2)])]},ur={name:"Fundecks 1",id:"FUN1",decks:[F("Frankenbomb","N","X","A",[s("DFB",3),s("BSR",3),s("HGS",3),s("HFA",3),s("FFD",3),s("XSH",3),s("XHU",3),s("WBG",3),s("GBG",3),s("CTI",3)]),F("Hangry Beasts","T","U","A",[s("TBA",3),s("SVH",3),s("MBP",2),s("FSH",3),s("RBH",3),s("FBC",3),s("LBR",2),s("CFB",3),s("AAK",3),s("KKK",2),s("FRR",1),s("FIN",1),s("IBF",1)]),F("Metamind Zapper","A","T","A",[s("MMA",3),s("DMW",3),s("GMP",3),s("SYO",3),s("KAW",3),s("SHK",3),s("CTL",2),s("CAG",2),s("MSC",2),s("MTS",2),s("ASG",2),s("ESU",2)]),F("Plant Party","N","U","1",[s("CTV",3),s("TDW",3),s("BTS",3),s("CHR",3),s("GMR",3),s("KOD",2),s("LKP",2),s("SHV",2),s("DBA",2),s("CCR",2),s("PTB",2),s("FIN",1),s("DBT",2)]),F("Voltron","A","X","J",[s("FGA",3),s("FGB",3),s("FGD",3),s("FGG",3),s("AFS",3),s("BSS",3),s("PRI",3),s("TUP",2),s("JPK",2),s("BWH",2),s("SFT",3)]),F("Do Fear the Reaper","A","N","1",[s("CTI",3),s("DFR",3),s("GRW",3),s("LGT",3),s("OXM",3),s("OXP",3),s("PHM",3),s("CTW",2),s("NNS",2),s("OXA",2),s("SDN",3)]),F("Muadib","N","U","J",[s("DBA",3),s("DYL",3),s("GSW",3),s("LBD",3),s("MMW",3),s("NCW",3),s("SRV",3),s("LBL",2),s("MSP",2),s("VYE",2),s("SBD",3)]),F("Triassic Park","T","U","A",[s("URB",3),s("UTR",3),s("UTM",3),s("ULR",3),s("UIC",3),s("UGL",3),s("RTS",3),s("BRN",2),s("LBR",2),s("IBF",2),s("GHB",3)]),F("Whacky Whinds","N","T","A",[s("DDD",3),s("WBH",3),s("HMF",3),s("WCS",3),s("GGP",3),s("SAD",3),s("SDN",3),s("EWE",3),s("SBG",3),s("ZSH",3)]),F("WWP 4 Victory","A","U","A",[s("WWP",3),s("EHN",2),s("SDR",2),s("HTR",2),s("MML",2),s("HTP",2),s("SHS",3),s("MND",2),s("NXC",2),s("CDT",2),s("PTB",2),s("SVO",2),s("MPH",2),s("SYO",2)]),F("Braaiins","N","X","A",[s("XDV",3),s("XRW",3),s("ONN",2),s("SLH",2),s("FWK",2),s("BWK",2),s("URD",2),s("TPG",2),s("DSS",2),s("KOD",2),s("ZMT",2),s("RSZ",2),s("BLW",2),s("CSB",2)]),F("Wanderin'","N","U","A",[s("LYS",3),s("STR",2),s("MBP",2),s("OSL",2),s("RLW",3),s("SSR",1),s("SVO",2),s("SSE",2),s("RHW",3),s("SYL",2),s("TGS",2),s("TMG",3),s("XDH",3)]),F("Walls","A","T","3",[s("CDC",3),s("CTG",3),s("CRC",3),s("DCS",3),s("FRI",3),s("FGA",2),s("OBB",3),s("FVA",2),s("TGN",2),s("OWH",3),s("STN",3)]),F("Snakes in a Lane","A","U","A",[s("AFO",3),s("DSV",3),s("PSC",3),s("SHS",3),s("STO",3),s("NCL",2),s("VNF",3),s("LYS",2),s("SVO",1),s("VNS",3),s("TXS",2),s("ART",2)]),F("Benny & Izzy","A","T","A",[s("BRN",3),s("EFM",2),s("IZK",3),s("JPK",1),s("MTT",1),s("NNS",1),s("OBB",2),s("OWF",2),s("OEX",3),s("PRI",2),s("PTR",1),s("TST",1),s("FLS",2),s("BLH",3),s("SHK",3)])]},fr={name:"Fundecks 2",id:"FUN2",decks:[F("Ride the Lightning","T","U","J",[s("HOS",3),s("BLH",3),s("USS",3),s("LSK",3),s("SHK",3),s("CTL",3),s("LWY",3),s("KAW",3),s("RSP",3),s("DYB",2),s("SVO",1)]),F("Caught in a Web","A","N","A",[s("ASQ",3),s("IRT",3),s("OXA",2),s("OXM",3),s("DFS",3),s("HRM",3),s("ESD",3),s("ULG",3),s("DDS",3),s("CCS",2),s("DWW",2)]),F("Rando Calrissian","T","U","J",[s("CDM",3),s("BZS",3),s("PMI",3),s("IKA",3),s("ROE",3),s("PHC",3),s("DIS",3),s("DRE",3),s("SIV",3),s("HTP",3)]),F("Beards of Glory","A","U","J",[s("IBA",3),s("IHA",3),s("MBP",3),s("ESC",3),s("EWT",3),s("ESG",3),s("DBA",3),s("TGN",3),s("BLP",2),s("RPR",2),s("JPK",2)]),F("None More Verdant","U","X","J",[s("VCH",2),s("VSP",2),s("VGR",2),s("POD",2),s("MBP",2),s("EFE",3),s("VGW",3),s("WOD",1),s("SVO",1),s("RBG",3),s("RSD",3),s("SRD",2),s("ART",2),s("LYR",2)]),F("Exploding Cat","A","T","J",[s("SBF",3),s("OEX",3),s("ATI",3),s("KAW",3),s("ZSH",3),s("RSP",3),s("WMM",2),s("OWF",2),s("DFS",2),s("CHT",2),s("OBB",2),s("ABL",2)]),F("No, Not the Bees!","T","U","J",[s("LVH",3),s("HVE",3),s("SIV",3),s("TRS",3),s("KBE",3),s("SHK",3),s("LBR",3),s("RSP",3),s("VCH",2),s("VGR",2),s("CTL",2)]),F("Armored Column","A","U","A",[s("ESP",2),s("BTB",3),s("FLC",3),s("CEX",3),s("FRR",2),s("SSN",2),s("FSC",3),s("NXB",3),s("BWH",3),s("AMP",3),s("WMC",1),s("NXT",2)]),F("Angered Alyssa","A","T","J",[s("ASB",3),s("SHK",3),s("FSM",3),s("BST",3),s("SFM",3),s("BSW",3),s("VOB",3),s("TBC",3),s("SCD",3),s("MTT",2),s("ASG",1)]),F("Big Dawg Iniog","N","U","A",[s("ICD",3),s("DHC",3),s("ZDK",3),s("CCS",2),s("NCM",3),s("VCH",2),s("HTR",2),s("IRT",3),s("NGT",3),s("ROU",2),s("TOB",2),s("SPG",2)]),F("Rumblestone Clown Show","A","T","J",[s("RSE",3),s("OWF",3),s("AGP",3),s("DFS",3),s("FSM",3),s("IBF",3),s("TST",3),s("BWN",2),s("DKS",2),s("CHT",2),s("COD",1),s("LFA",2)]),F("Kills Bugs Dead","T","U","A",[s("TSP",3),s("SMS",3),s("BTD",3),s("HMO",3),s("QSW",3),s("UTR",3),s("VTR",3),s("GHB",3),s("STM",3),s("DKS",2),s("VCH",1)]),F("Aeon Buzzard","A","T","J",[s("EPH",3),s("BWN",3),s("TBB",3),s("CDM",2),s("SAD",3),s("LCE",2),s("MBR",3),s("COD",1),s("MMR",3),s("MMX",3),s("BZH",2),s("STD",2)]),F("Unholy Matrimony","N","X","A",[s("DFB",3),s("BOF",3),s("CGL",3),s("SGF",2),s("POX",3),s("ULG",3),s("IME",3),s("SHG",2),s("IRT",2),s("SHV",3),s("DRD",3)]),F("Dance of the Dryads","T","U","A",[s("NGQ",2),s("HOS",3),s("SDR",3),s("LBD",3),s("KTS",3),s("MPH",3),s("SSR",3),s("PYS",2),s("SVO",2),s("SBD",2),s("DYB",2),s("SND",2)])]},gr={name:"Fundecks 3",id:"FUN3",decks:[F("Ashy Larry","A","T","A",[s("AMD",3),s("LFA",3),s("SSI",3),s("SAD",3),s("HMF",3),s("AMY",3),s("ABR",2),s("UEM",2),s("WFM",2),s("DCS",2),s("PHM",2),s("OBB",2)]),F("Wander These Lands","N","U","A",[s("LYS",3),s("CYW",1),s("RTW",3),s("RLW",3),s("SVO",2),s("DYS",2),s("RHW",3),s("GHB",2),s("ROU",2),s("IME",3),s("VCH",1),s("ULG",3),s("AEC",2)]),F("Blob Convention","A","N","J",[s("S01",3),s("NCM",3),s("NCS",3),s("CYS",3),s("FSL",3),s("NCP",3),s("NOZ",3),s("SLH",3),s("GRP",2),s("SHV",2),s("GRM",2)]),F("We Shall Not Cease","N","T","J",[s("CGG",3),s("FSM",3),s("EXD",3),s("GRP",3),s("SHV",3),s("HOX",2),s("SCV",1),s("VYE",3),s("COD",1),s("DCR",2),s("BRN",2),s("DBT",2),s("TOB",1),s("VOB",1)]),F("What Tek Iz This?","T","U","J",[s("IZK",3),s("VIC",3),s("IGR",3),s("SSH",3),s("DGW",3),s("BRN",3),s("LYS",3),s("ROK",3),s("DDF",3),s("EWV",3)]),F("Tromping Tuskins","A","U","A",[s("LBC",3),s("LBL",3),s("CTV",3),s("TGK",3),s("EWT",3),s("NFF",2),s("TSL",2),s("CSG",2),s("VPR",2),s("MXW",2),s("AOP",2),s("HRM",2),s("ESC",1)]),F("Enhanced Voltron","A","X","J",[s("FGA",3),s("FGB",3),s("FGD",3),s("FGG",3),s("SFG",3),s("GAS",3),s("WTK",3),s("MMG",3),s("HRM",3),s("LCE",2),s("PLW",1)]),F("Lazarus (Big Skills)","N","T","A",[s("TDW",3),s("NSH",3),s("PHC",3),s("PSH",3),s("IME",3),s("ULG",3),s("SHG",3),s("VIK",3),s("IDF",2),s("GRP",2),s("ASG",1),s("COD",1)]),F("Dogs! Dogs! Dogs!","T","U","J",[s("LTU",3),s("SDA",3),s("EHN",3),s("EWV",3),s("HTP",2),s("DYB",2),s("SVO",1),s("VCH",1),s("WHR",3),s("MMH",2),s("DBR",2),s("SIN",2),s("PYS",1),s("VTR",2)]),F("The Cackler","A","N","J",[s("CKB",3),s("ARB",3),s("GMP",3),s("LCE",2),s("PRI",2),s("RPR",3),s("DPO",3),s("SAP",3),s("DDS",3),s("OXP",3),s("ABE",2)]),F("Nugalug","N","T","A",[s("NUG",3),s("LUC",3),s("EWE",3),s("SBG",3),s("AWU",3),s("SPH",3),s("ROU",3),s("FFM",3),s("BZD",3),s("BFM",3)]),F("Blessed Shrine","A","T","J",[s("SLS",3),s("CTG",3),s("USS",3),s("MMG",3),s("CRC",3),s("STN",3),s("NXC",3),s("MND",2),s("SSD",2),s("USA",2),s("SES",1),s("OBB",2)]),F("The Dixie Pig","T","U","J",[s("SSD",3),s("WSE",3),s("NCL",3),s("STN",3),s("PYS",3),s("BSW",3),s("FKS",3),s("UCM",2),s("UHS",2),s("HTR",2),s("TBC",2),s("GHS",1)]),F("Wafer Thin Mint","N","T","J",[s("LFA",2),s("EXD",3),s("GBG",3),s("USA",3),s("PMS",3),s("STN",1),s("VOB",1),s("FSK",3),s("WFM",3),s("FFS",3),s("TBC",2),s("FOR",3)]),F("Cyrus the Virus","N","U","A",[s("CTM",3),s("PTB",3),s("POT",3),s("GRM",3),s("MNM",3),s("LMD",3),s("MPH",3),s("SOC",3),s("SRP",3),s("HGS",3)])]},mr={name:"Fundecks 4",id:"FUN4",decks:[F("Pain Forest","T","U","A",[s("TDS",3),s("TMS",3),s("DTR",3),s("HTR",3),s("EFE",3),s("SFM",3),s("SHK",3),s("VCH",2),s("BSW",2),s("UCM",2),s("MSP",1),s("VSP",1),s("IBF",1)]),F("Disrespect the Weak","A","N","A",[s("UIW",3),s("SRM",3),s("OXP",3),s("OXM",3),s("SRP",3),s("WFS",2),s("GRW",2),s("DGZ",2),s("VPR",2),s("DDS",2),s("PHM",2),s("OFM",2),s("LMV",1)]),F("I Love the Dead","N","U","J",[s("YNS",3),s("NSW",3),s("STS",2),s("SIV",2),s("SLH",3),s("CCR",3),s("GGW",3),s("REW",3),s("SST",2),s("MML",2),s("DYS",2),s("TPT",2)]),F("Silly Ol' Steelscale","A","T","J",[s("STG",3),s("DGW",3),s("FKS",3),s("FSK",3),s("USA",3),s("CEX",3),s("OBB",3),s("BWH",2),s("DRE",1),s("FVA",1),s("AGW",2),s("SOK",2),s("NNS",1)]),F("Poison Crush","T","U","A",[s("WBY",3),s("LOD",3),s("SPT",3),s("VND",3),s("DPG",3),s("FZS",3),s("GCR",3),s("UBL",2),s("MPH",3),s("FKS",2),s("STB",2)]),F("Dragons, Eh","N","T","A",[s("DGW",3),s("SMD",3),s("ATI",3),s("LMD",3),s("DDD",3),s("CSW",3),s("DTD",3),s("VIC",3),s("BTD",3),s("SOV",3)]),F("Hail Hydra","A","U","J",[s("ESG",3),s("DBA",3),s("CHY",3),s("LHY",3),s("RHY",3),s("SVH",3),s("SVO",2),s("EVT",3),s("AEC",2),s("AGW",2),s("SPG",1),s("VCH",2)]),F("Coral, Get to the Sides!","N","X","J",[s("IRT",3),s("IVS",3),s("ZMT",3),s("ZDK",3),s("XDV",3),s("TNL",3),s("ABB",3),s("SNT",3),s("XRW",3),s("CCC",3)]),F("The Bear and the Maiden Fair","T","U","J",[s("DZD",3),s("FWB",3),s("DBR",3),s("FFM",3),s("AMD",3),s("WFM",3),s("SHK",3),s("SIV",3),s("AIV",2),s("NCL",2),s("SOV",1),s("EFA",1)]),F("Bionic Darkforged","A","U","A",[s("SWS",3),s("DSE",3),s("DRS",3),s("SSP",3),s("DHM",3),s("SHA",3),s("ESC",3),s("LBD",3),s("AGP",2),s("CTV",2),s("SVO",1),s("NNS",1)]),F("Caustic Darkforged","N","T","A",[s("DSW",3),s("GGB",3),s("SFE",3),s("DSA",3),s("SCZ",3),s("USY",3),s("ZXR",3),s("SPH",3),s("BZH",2),s("IBF",1),s("VGL",2),s("CYW",1)]),F("Thralled Darkforged","A","N","A",[s("SWS",3),s("GGB",3),s("DSW",3),s("DSE",3),s("SCZ",3),s("SHA",3),s("PSH",3),s("STD",3),s("DDS",2),s("AOP",1),s("BFT",2),s("TPT",1)]),F("Roasted Darkforged","T","U","A",[s("DSA",3),s("DRS",3),s("SFE",3),s("SSP",3),s("DHM",3),s("USY",3),s("CDM",3),s("GHR",3),s("MPH",2),s("ENR",1),s("PYS",2),s("STB",1)]),F("Punchy Darkforged","A","T","A",[s("SWS",3),s("DSE",3),s("SFE",3),s("DSA",3),s("SHA",3),s("USY",3),s("WMR",3),s("AMD",3),s("OWF",2),s("SOA",1),s("UBL",2),s("SOK",1)]),F("Mouldy Darkforged","N","U","A",[s("DSW",3),s("GGB",3),s("DRS",3),s("SSP",3),s("DHM",3),s("SCZ",3),s("DBA",3),s("GGW",3),s("ROG",2),s("SIN",2),s("SLH",1),s("DYB",1)])]},Ue=[nr,sr,ar,or,hr,cr,lr,dr,ur,fr,gr,mr];const Ht=()=>{m.dirt()};class ai{state;constructor(t){this.state=t}getState(){return this.state}get adjacent(){return m.adjacentPositions(this.lane)}get attack(){return this.state.attack+this.modSum("AT")}get activationAvailable(){return this.state.negateActivate?!1:this.state.activationAvailable}set activationAvailable(t){this.state.activationAvailable=t}get aggressive(){return this.state.aggressive||this.modBool("AG")}set aggressive(t){this.state.aggressive=t,Ht()}get armor(){return this.negateArmor?0:this.state.armor+this.modSum("AR")}get armorDmg(){return this.state.armorDmg}set armorDmg(t){this.state.armorDmg=t}get breakthrough(){return this.state.breakthrough||this.modBool("BT")}set breakthrough(t){const i=this.state;i.breakthrough=t,Ht(),Y.addFactBoard("U",i.id,i.lane,i.owner)}get changed(){return this.state.changed||this.negateDefender||this.negateArmor||this.negateActivate||this.negateMobility||this.negateRegen||this.state.triggers.some(t=>t.changes)}set changed(t){this.state.changed=t,Ht()}get code(){return this.state.code}get defender(){return this.negateDefender?!1:this.state.defender||this.modBool("DF")}set defender(t){this.negateDefender||(this.state.defender=t,Ht(),me.defenderChange(this.owner))}get effects(){return this.state.effects}get extraBattles(){return this.state.extraBattles}set extraBattles(t){this.state.extraBattles=t}get faction(){return O.getCard(this.code).faction}get health(){return this.state.health+this.modSum("HL")}get id(){return this.state.id}get isActive(){return!this.sleeping||this.aggressive}isTribe(t){return O.getCard(this.code).isTribe(t)}get lane(){return this.state.lane}get level(){return this.state.level}get maxHealth(){return this.state.maxHealth+this.modSum("MH")}get mobility(){return this.negateMobility?0:this.state.mobility+this.modSum("MB")}get mobilityAvailable(){return this.state.mobilityAvailable}set mobilityAvailable(t){this.state.mobilityAvailable=t}get mods(){return this.state.mods}get negateActivate(){return this.state.negateActivate}set negateActivate(t){this.state.negateActivate=t}get negateArmor(){return this.state.negateArmor||this.modBool("NA")}set negateArmor(t){const i=this.state;i.negateArmor=t,Ht(),this.enforceEffects("AR"),Y.addFactBoard("U",i.id,i.lane,i.owner)}get negateDefender(){return this.state.negateDefender||this.modBool("ND")}negDefend(t){const i=this.state;i.negateDefender||(i.negateDefender=!0,Ht(),me.defenderChange(this.owner),Y.addFactBoard(t,i.id,i.lane,i.owner))}get negateMobility(){return this.state.negateMobility||this.modBool("NM")}set negateMobility(t){const i=this.state;i.negateMobility=t,Ht(),Y.addFactBoard("U",i.id,i.lane,i.owner)}get negateRegen(){return this.state.negateRegen}set negateRegen(t){this.state.negateRegen=t,Ht()}get opposed(){return m.searchByLane(m.oppositeLane(this.lane),!this.owner)}get owner(){return this.state.owner}get poison(){return this.state.poison+this.modSum("PN")}get rank(){return T.toPlayer(this.owner).rank}get regen(){return this.negateRegen?0:this.state.regen+this.modSum("RG")}get sleeping(){return this.state.sleeping}set sleeping(t){this.state.sleeping=t}get status(){return this.state.status}set status(t){this.state.status=t}get triggers(){return this.state.triggers}buff(t,i,r,n=void 0){this.state.status==="A"&&(t!==0&&(this.state.attack+=t,this.enforceEffects("AT"),Ht()),i!==0&&(this.state.health+=i,this.state.maxHealth+=i,this.enforceEffects("CH"),Ft.deathProdder(this,n),Ht(),i>0&&H.addEvents(W.creatHeal(this,i))),Y.addFactBoard(r,this.id,this.lane,this.owner))}addArmor(t){if(!this.negateArmor&&this.state.status==="A"){const i=this.state.armor+t;this.state.armor=Math.max(0,i),this.enforceEffects("AR"),Ht(),Y.addFactBoard("A",this.id,this.lane,this.owner)}}addMobility(t,i){if(!this.negateMobility&&this.state.status==="A"){const r=this.state.mobility+t;this.state.mobility=Math.max(0,r),Ht(),Y.addFactBoard(i,this.id,this.lane,this.owner)}}addPoison(t){if(this.state.status==="A"){const i=this.state.poison+t;this.state.poison=Math.max(0,i),Ht(),Y.addFactBoard("U",this.id,this.lane,this.owner)}}addRegen(t,i){if(!this.negateRegen&&this.state.status==="A"){const r=this.state.regen+t;this.state.regen=Math.max(0,r),Ht(),Y.addFactBoard(i,this.id,this.lane,this.owner)}}heal(t,i=!0){if(t<1||this.state.status!=="A")return 0;const r=Math.min(this.health+t,this.maxHealth)-this.health;return r<1?0:(this.state.health+=r,Ht(),this.enforceEffects("CH"),H.addEvents(W.creatHeal(this,r)),i&&Y.addFactBoard("U",this.id,this.lane,this.owner),r)}setHealth(t){this.state.health=t,Ht()}hurt(t,i=!1){if(t<1)return[0,0];const r=Math.max(Math.min(t,this.armor-this.armorDmg),0);let n=t-r,c=this.health-n;this.state.armorDmg+=r;let f=0;return i&&c<0&&(f=n-this.health,n=this.health),n>0&&(Ht(),this.state.health-=n,this.enforceEffects("CH")),[n,f]}hurtBattle(t,i,r=!1){const n=this.hurt(t,r);return n[0]>0&&H.addEvents(W.damage(!0,n[0],this.health,!0,!0,this,i)),n[1]}hurtDirect(t,i,r,n=void 0){const c=this.hurt(t,!1);return c[0]>0&&(y.lawg(i,` dealt ${t} dmg to `,this.code,"."),Y.addFactBoard(r,this.id,this.lane,this.owner),H.addEvents(W.damage(!1,c[0],this.health,!1,!0,this,void 0)),Ft.deathProdder(this,n)),c[0]}modEffectPropagator(t){t.type==="AT"?this.enforceEffects("AT"):t.type==="HL"?(this.enforceEffects("CH"),Ft.deathProdder(this)):t.type==="AR"||t.type==="NA"?this.enforceEffects("AR"):(t.type==="DF"||t.type==="ND")&&me.defenderChange(this.owner)}modSum(t){return b.modSum(this.mods,t)}modBool(t){return b.modBool(this.mods,t)}hasMod(t){return b.hasModG(this.mods,t)}addMod(t,i){this.mods.push(t),this.modEffectPropagator(t),Ht(),t.type!=="MH"&&Y.addFactBoard(i,this.id,this.lane,this.owner)}anim8(t){Y.addFactBoard(t,this.id,this.lane,this.owner)}addModSafe(t){b.hasMod(this.mods,t)||this.addMod(t,"X")}removeMod(t,i=!0){const r=this.state.mods.filter(n=>n.granter===t);r.length>0&&(Ht(),this.state.mods=this.state.mods.filter(n=>n.granter!==t),r.forEach(n=>{i&&this.modEffectPropagator(n),n.type==="AR"&&(this.state.armorDmg=Math.max(0,this.state.armorDmg-n.value))}))}removeModSafe(t,i=!0){this.hasMod(t)&&this.removeMod(t,i)}expireMod(t){this.state.mods.splice(b.modIdx(this.state.mods,t),1)}bonusTotal(){let t=St.sumNuggets(this.triggers);return this.state.bonus&&(t=St.addNuggets(t,this.state.bonus)),t}threatTotal(){const t=this.triggers.map(i=>i.bonus?.threat).filter(Boolean);return this.state.bonus?.threat&&t.push(this.state.bonus.threat),t}endActivation(){this.modBool("EA")?this.removeMod(this.id):this.state.activationAvailable=!1,Ft.deathCheck(),S.actionDone()}move(t,i){this.state.status==="A"&&(Y.addFactBoard(i,this.id,this.lane,this.owner),Y.addLaneMove(this.id,this.lane,t,this.owner),Ht(),this.state.lane=t,me.positionChange(this.owner),H.addEvents(W.creature("MOV",this)))}addEffect(t,i){const r=b.effect(t,i);return this.effects.push(r),r}enforceEffects(t,i=!1){this.effects.filter(r=>r.watch===t).filter(r=>r.area==="A"||r.area==="C"&&this.owner===i).forEach(r=>O.getCard(r.logicCode).enforceEffect(this))}jr4(t,i=""){i===""&&(i=this.code);const r=b.trigger(t,i);return r.creatId=this.id,this.triggers.push(r),Ht(),r}removeTrigger(t){const i=b.trigIdx(this.triggers,t);i>-1?(this.triggers.splice(i,1),t.changes&&Ht()):console.error("Wery curious, could not find trigger to remove",t)}wipeAll(){this.preWipe();const t=this.state;t.hints=[],t.armor=0,t.mobility=0,t.poison=0,t.regen=0,t.aggressive=!1,t.defender=!1,t.breakthrough=!1,t.defender=!1,t.negateDefender=!1,t.negateArmor=!1,t.bonus=void 0,t.changed=!0,t.negateActivate=!0,T.removeModSafe(!0,t.id),T.removeModSafe(!1,t.id),m.creatByTarget(b.crTarg()).forEach(i=>{i.removeModSafe(t.id),i.enforceEffects("PS",t.owner)}),this.enforceEffects("AT"),this.enforceEffects("AR"),this.enforceEffects("CH"),me.defenderChange(t.owner),this.anim8("A"),Ht()}preWipe(){this.state.mods=[],this.state.triggers=[],this.state.effects=[]}get hints(){return this.state.hints}aiHints(){return this.hints}}class b{static creatureState(t,i){return{activationAvailable:!0,aggressive:!1,armor:0,armorDmg:0,attack:0,bonus:void 0,breakthrough:!1,changed:!1,code:"",defender:!1,effects:[],extraBattles:0,health:0,hints:[],id:"",lane:i,level:0,maxHealth:0,mobility:0,mobilityAvailable:!0,mods:[],negateActivate:!1,negateArmor:!1,negateDefender:!1,negateMobility:!1,negateRegen:!1,owner:t,poison:0,regen:0,sleeping:!0,status:"A",triggers:[]}}static effect(t,i){return{area:"A",watch:t,logicCode:i}}static freeCard(t){return{id:R.genId(),condition:b.target("TH"),sourceCard:t}}static mod(t,i,r=""){return{type:t,value:typeof i=="boolean"?i?1:0:i,granter:r,expiry:"NN"}}static modT(t,i,r=""){const n=b.mod(t,i,r);return n.expiry="ET",n}static trigger(t,i){return{id:R.genId(),type:t,logicCode:i,creatId:"",customCode:"",interactive:!1,changes:!1,bonus:void 0,batch:!1}}static triggerReaction(t,i,r,n){return{event:t,owner:r,creatId:"",cardCode:"",trigger:i,host:n,draw:!0}}static basicAction(t){return{zone:"N",key:t,host:"",param:""}}static fieldSelectAction(t,i=-1,r=!0){return{zone:"F",key:t,playerA:r,lane:i,host:"",param:""}}static deckSelectAction(t,i,r){return{zone:"N",key:t,card:i,position:r,host:"",param:""}}static handSelectAction(t,i="",r="",n=-1){return{zone:"H",key:t,card:i,cost:r,position:n,host:"",param:"",canPlay:!1,lvlOnly:!1}}static playerSelectAction(t,i){return{zone:"P",key:t,playerA:i,host:"",param:""}}static draftSelectAction(t,i,r){return{zone:"N",key:t,index:i,pack:r,host:"",param:""}}static menuButtonAction(t){return{zone:"N",key:"MNBT",host:"",param:t}}static actionifier(t,i,r,n){const c=t;return c.key=i,c.host=r,c.param=n,c}static target(t){return{target:t,level:"LA",canLevel:!1,faction:"X",player:"X",card:"A",field:"A",creatStatus:"A",tribe:"AN",notMe:"",hasArmor:!1,canArmor:!1,hasDefender:!1,canDefender:!1,hasMobility:!1,canMove:!1,hasPoison:!1,hasRegen:!1,canRegen:!1,cardCode:"",victims:""}}static actionTarget(t,i,r,n){return b.actionifier(b.target(t),i,r,n)}static crTarg(){const t=b.target("TF");return t.field="O",t.creatStatus="V",t}static crActTarg(t,i,r){return b.actionifier(b.crTarg(),t,i,r)}static crNotMeTarg(t){const i=b.target("TF");return i.field="O",i.creatStatus="V",i.notMe=t,i}static crNotMeActTarg(t,i,r,n){return b.actionifier(b.crNotMeTarg(i),t,r,n)}static crFriendTarg(){const t=b.crTarg();return t.player="F",t}static crFriendActTarg(t,i,r){return b.actionifier(b.crFriendTarg(),t,i,r)}static crFriendNotMeTarg(t){const i=b.crNotMeTarg(t);return i.player="F",i}static crFriendNotMeActTarg(t,i,r,n){return b.actionifier(b.crFriendNotMeTarg(i),t,r,n)}static crEnemyTarg(){const t=b.crTarg();return t.player="E",t}static crEnemyActTarg(t,i,r){return b.actionifier(b.crEnemyTarg(),t,i,r)}static playerTarg(t){const i=b.target("TP");return i.player=T.toTarget(t),i}static playerActTarg(t,i,r,n){return b.actionifier(b.playerTarg(t),i,r,n)}static lvlHandActTarg(t,i){const r=this.actionTarget("TH","CARD",t,i);return r.player="F",r.canLevel=!0,r.hint=["CD"],r}static emptyTarg(){const t=b.target("TF");return t.field="E",t}static emptyActTarg(t,i,r){return b.actionifier(b.emptyTarg(),t,i,r)}static emptyPlayerTarg(t){const i=b.emptyTarg();return i.player=T.toTarget(t),i}static emptyPlayerActTarg(t,i,r,n){return b.actionifier(b.emptyPlayerTarg(t),i,r,n)}static modSum(t,i){return t.filter(r=>r.type===i).map(r=>r.value).reduce((r,n)=>r+n,0)}static modBool(t,i){return t.some(r=>r.type===i&&r.value===1)}static hasModG(t,i){return t.findIndex(r=>r.granter===i)>-1}static hasMod(t,i){return b.modIdx(t,i)>-1}static modIdx(t,i){return t.findIndex(r=>r.granter===i.granter&&r.type===i.type)}static trigIdx(t,i){return t.findIndex(r=>r.id===i.id)}}class Vt{constructor(t){this.code=t,this.level=parseInt(t.substring(3))}code;consistent=!1;faction="X";cardCode(){return Vt.extractCardCode(this.code)}image(t){return this.type==="S"?this.fixedImage(t):this.leveledImage(t)}leveledImage(t){return this.rawImage(this.code,t)}fixedImage(t){return this.rawImage(this.cardCode(),t)}rawImage(t,i){return`card/${i?"b":"s"}/${this.faction}/${t}.jpg`}free=!1;level;maxLevel=3;minLevel=1;name="";overload=!1;rarity="T";spice;text="";get type(){return "C"}hints;addSp(t,i){}aiHints(){return this.hints??[]}canLevel(){return this.level<this.maxLevel}canPlay(){return!0}enforceEffect(t){console.error("Effect without an enforcement routine",t.code)}enforcePlayerEffect(t,i){console.error("Effect without an enforcement routine",t)}ddf8(t){return!1}handleAction(t){console.error("Custom card action did not have handler written for it.",t.key)}levelSpice(){return this.spice??[]}levelUpCard(){return this.canLevel()?`${this.cardCode()}${this.level+1}`:this.code}logAct(t,i=void 0,r=void 0){if(J.simOn)return;const n=[this.code,t?" activated":" triggered"];i&&(n.push(" on ",i.code),r&&n.push(" and ",r.code)),n.push("."),y.lawg(...n)}lValB(t){return t[this.level-1]}lValN(t){return t[this.level-1]}lValS(t){return t[this.level-1]}lValH(t){return t[this.level-1]}playTargets(){return[]}jr8(t){throw new Error(`Unhandled trigger resolve in card ${this.code}, trigger ${t.trigger.type}`)}anim8(t){typeof t=="string"?J.simOff&&m.jr5(t).anim8(this.faction):t.anim8(this.faction)}balm(t,i,r=!0){const n=T.toPlayer(t);T.heal(n,i,this.code),r&&Y.addHeal(n.isPlayerA)}buffA(t,i,r=void 0){t.buff(i,0,this.faction,r)}buffB(t,i,r,n=void 0){t.buff(i,r,this.faction,n)}buffD(t,i,r=void 0){t.buff(i,i,this.faction,r)}buffH(t,i,r=void 0){t.buff(0,i,this.faction,r)}kill(t,i=void 0){Ft.destroy(t,this.code,this.faction,i)}lurk(t,i){t.move(i,this.faction)}modA(t,i){t.addMod(i,this.faction)}ouch(t,i,r=!0){const n=T.toPlayer(t),c=T.hurtDirect(n,i,this.code);r&&c&&Y.addDirDmg(n.isPlayerA)}poot(t,i,r,n=void 0){return m.birth(t,"P",i,r,this.faction,n)}regn(t,i){t.addRegen(i,this.faction)}replc(t,i,r,n=void 0){return m.birth(t,"R",i,r,this.faction,n)}smack(t,i,r=void 0){return t.hurtDirect(i,this.code,this.faction,r)}spawn(t,i,r=void 0){return m.birth(t,"S",i,0,this.faction,r)}wings(t,i){t.addMobility(i,this.faction)}wrang(t){t.extraBattles+=1,t.anim8(this.faction)}bonus;avgCreatureStats(t=0){const i=t===0?this.level:t,r=[[4,8,14],[7,11,17]];let n;i===1?n=[1,0,0]:i===2?n=[.5,.5,0]:n=[.2,.4,.4];let c=0,f=0;return[0,1,2].forEach(p=>{c+=n[p]*r[0][p],f+=n[p]*r[1][p]}),[c,f]}rawNug(t,i,r,n,c,f=0,p=void 0){return St.rawNugget(t,i,r,n,c,f,p)}buffNug(t,i,r=void 0){return this.rawNug(0,i+t,t,0,0,0,r)}playerNug(t,i,r=void 0){return this.rawNug(0,0,0,t,i,0,r)}spawnNug(t,i=void 0){const r=St.cardCreatValueFormula(t);return this.rawNug(1,r,t.iAttack,0,0,0,i)}statSpawnNug(t,i,r=void 0){const n=this.buffNug(t,i,r);return n.count=1,n}avgSpawnNug(t){const i=this.avgCreatureStats(t);return this.statSpawnNug(i[0],i[1])}regnNug(t,i=void 0){return this.rawNug(0,St.calcCreatValueFormula(0,0,0,0,t,!1,0),0,0,0,0,i)}bonNug(t,i=void 0){return this.rawNug(0,0,0,0,0,t,i)}multNug(t,i){return t.attack*=i,t.value*=i,t.count*=i,t.peLife*=i,t.pfLife*=i,t}static extractCardCode(t){return t.substring(0,3)}get boof123n(){return this.level*-1}get boof124(){return this.lValN([1,2,4])}get boof135(){return this.lValN([1,3,5])}get boof137(){return this.lValN([1,3,7])}get boof147(){return this.lValN([1,4,7])}get boof234(){return this.level+1}get boof235(){return this.lValN([2,3,5])}get boof236(){return this.lValN([2,3,6])}get boof246(){return this.level*2}get boof246n(){return this.level*-2}get boof247(){return this.lValN([2,4,7])}get boof247n(){return this.lValN([-2,-4,-7])}get boof248(){return this.lValN([2,4,8])}get boof2410(){return this.lValN([2,4,10])}get boof258(){return this.lValN([2,5,8])}get boof259(){return this.lValN([2,5,9])}get boof2510(){return this.lValN([2,5,10])}get boof2612(){return this.lValN([2,6,12])}get boof346(){return this.lValN([3,4,6])}get boof347(){return this.lValN([3,4,7])}get boof357(){return this.lValN([3,5,7])}get boof358(){return this.lValN([3,5,8])}get boof359(){return this.lValN([3,5,9])}get boof3510(){return this.lValN([3,5,10])}get boof368(){return this.lValN([3,6,8])}get boof369(){return this.level*3}get boof369n(){return this.level*-3}get boof3610(){return this.lValN([3,6,10])}get boof3612(){return this.lValN([3,6,12])}get boof3711(){return this.lValN([3,7,11])}get boof3712(){return this.lValN([3,7,12])}get boof3713(){return this.lValN([3,7,13])}get boof3714(){return this.lValN([3,7,14])}get boof3814(){return this.lValN([3,8,14])}get boof3915(){return this.lValN([3,9,15])}get boof468(){return this.lValN([4,6,8])}get boof469(){return this.lValN([4,6,9])}get boof4610(){return this.lValN([4,6,10])}get boof4612(){return this.lValN([4,6,12])}get boof4710(){return this.lValN([4,7,10])}get boof4711(){return this.lValN([4,7,11])}get boof4712(){return this.lValN([4,7,12])}get boof4713(){return this.lValN([4,7,13])}get boof4714(){return this.lValN([4,7,14])}get boof4810(){return this.lValN([4,8,10])}get boof4812(){return this.level*4}get boof4812n(){return this.level*-4}get boof4813(){return this.lValN([4,8,13])}get boof4814(){return this.lValN([4,8,14])}get boof4815(){return this.lValN([4,8,15])}get boof4816(){return this.lValN([4,8,16])}get boof4914(){return this.lValN([4,9,14])}get boof4915(){return this.lValN([4,9,15])}get boof5610(){return this.lValN([5,6,10])}get boof579(){return this.lValN([5,7,9])}get boof5711(){return this.lValN([5,7,11])}get boof5714(){return this.lValN([5,7,14])}get boof5812(){return this.lValN([5,8,12])}get boof5813(){return this.lValN([5,8,13])}get boof5814(){return this.lValN([5,8,14])}get boof5815(){return this.lValN([5,8,15])}get boof5914(){return this.lValN([5,9,14])}get boof5915(){return this.lValN([5,9,15])}get boof5916(){return this.lValN([5,9,16])}get boof5917(){return this.lValN([5,9,17])}get boof51014(){return this.lValN([5,10,14])}get boof51015(){return this.level*5}get boof51016(){return this.lValN([5,10,16])}get boof51020(){return this.lValN([5,10,20])}get boof6810(){return this.lValN([6,8,10])}get boof6812(){return this.lValN([6,8,12])}get boof6814(){return this.lValN([6,8,14])}get boof6912(){return this.lValN([6,9,12])}get boof6914(){return this.lValN([6,9,14])}get boof6915(){return this.lValN([6,9,15])}get boof6916(){return this.lValN([6,9,16])}get boof61014(){return this.lValN([6,10,14])}get boof61015(){return this.lValN([6,10,15])}get boof61016(){return this.lValN([6,10,16])}get boof61017(){return this.lValN([6,10,17])}get boof61018(){return this.lValN([6,10,18])}get boof61117(){return this.lValN([6,11,17])}get boof61218(){return this.lValN([6,12,18])}get boof61224(){return this.lValN([6,12,24])}get boof7911(){return this.lValN([7,9,11])}get boof7914(){return this.lValN([7,9,14])}get boof71013(){return this.lValN([7,10,13])}get boof71014(){return this.lValN([7,10,14])}get boof71015(){return this.lValN([7,10,15])}get boof71116(){return this.lValN([7,11,16])}get boof71117(){return this.lValN([7,11,17])}get boof71118(){return this.lValN([7,11,18])}get boof71217(){return this.lValN([7,12,17])}get boof71218(){return this.lValN([7,12,18])}get boof71220(){return this.lValN([7,12,20])}get boof81116(){return this.lValN([8,11,16])}get boof81117(){return this.lValN([8,11,17])}get boof81217(){return this.lValN([8,12,17])}get boof81218(){return this.lValN([8,12,18])}get boof81219(){return this.lValN([8,12,19])}get boof81220(){return this.lValN([8,12,20])}get boof81318(){return this.lValN([8,13,18])}get boof81420(){return this.lValN([8,14,20])}get boof91218(){return this.lValN([9,12,18])}get boof91420(){return this.lValN([9,14,20])}get boof91421(){return this.lValN([9,14,21])}get boof101520(){return this.lValN([10,15,20])}get boof255080(){return this.lValN([25,50,80])}}class E extends Vt{constructor(t){super(t)}iHealth=0;iAttack=0;iAggro=!1;iArmor=0;iBT=!1;iDefend=!1;iMobile=0;iRegen=0;tribe=[];isTribe(t){return(Array.isArray(t)?t:[t]).every(r=>this.tribe.includes(r))}jr3(t,i){const r=b.creatureState(t,i);return r.id=R.genId(),r.code=this.code,r.level=this.level,r.health=this.iHealth,r.attack=this.iAttack,r.maxHealth=r.health,r.regen=this.iRegen,r.breakthrough=this.iBT,r.defender=this.iDefend,r.aggressive=this.iAggro,r.armor=this.iArmor,r.mobility=this.iMobile,r.hints=this.aiHints(),r.bonus=this.bonus,new ai(r)}playTargets(){const t=b.actionTarget("TF","FORG",this.code,"");return t.player="F",[t]}canActivate(t){return!1}startActivation(t){console.error("encountered activation request for creature with no activate",t)}get formation(){return!1}addExtraActivate(t){t.addMod(b.modT("EA",!0,t.id),"X")}bFac(t){return t.draw?this.faction:"X"}}class kt extends Vt{constructor(t){super(t)}get type(){return "S"}logSpell(t=void 0,i=void 0){if(J.simOn)return;const r=["Casted ",this.code];t&&(r.push(" on ",t.code),i&&r.push(" and ",i.code)),r.push("."),y.lawg(...r)}}class Be{paStats;pbStats;constructor(t,i){this.paStats=t,this.pbStats=i}allStats(){return[this.paStats,this.pbStats]}playerStats(t){return t?this.paStats:this.pbStats}deltaStats(t){const i=this.playerStats(t),r=this.playerStats(!t);return Be.deltafier(i,r,!0)}static deltafier(t,i,r){const n=Be.blankStats(!0);return n.creatN=t.creatN-i.creatN,n.creatV=t.creatV-i.creatV,n.threat=t.threat-i.threat,r?(n.frLife=t.frLife+i.enLife,n.enLife=i.frLife+t.enLife):(n.frLife=t.frLife-i.frLife,n.enLife=t.enLife-i.enLife),n.bonus=t.bonus-i.bonus,n}static blankStats(t){return{side:t,creatN:0,creatV:0,threat:0,frLife:0,enLife:0,bonus:0}}}class St{dCC=1;dCT=1;dCV=1;dEL=1;dFL=1;statPrep(t){this.dCC=this.numbo(t.minion,[6,4,2]),this.dCT=this.numbo(t.menace,[15,12,9]),this.dCV=this.numbo(t.potent,[13,10,7]),this.dEL=this.numbo(t.lifed,[10,8,6]),this.dFL=this.numbo(t.lifeg,[10,8,6])}numbo(t,i){const r=parseInt(t)-1;return i[r]}fromState(t=!1){const i=m.qActiveCreats(),n=[!0,!1].map(c=>{const f=Be.blankStats(c),p=T.toPlayer(c);f.frLife=St.playerFormula(p.health,T.totalArmor(p),T.totalPoison(p),p.effects.length);const v=St.sumNuggets(p.triggers);f.frLife+=v.pfLife,f.enLife=v.peLife,f.creatN=v.count,f.creatV=v.value,f.threat=v.attack,f.bonus=v.bonus;const w=i.filter(x=>x.owner===c);return w.forEach(x=>{const L=x.bonusTotal();f.frLife+=L.pfLife,f.enLife+=L.peLife,f.bonus+=L.bonus,f.creatN+=1+L.count,f.creatV+=St.creatValueFormula(x)+L.value,f.threat+=St.threatFormula(x,i)+L.attack}),t&&c&&(w.forEach(x=>{f.bonus+=St.threatEOT(x,p.turn,i)}),G.regularPlays>2&&(f.bonus+=(G.regularPlays-2)*(Math.min(p.rank,3)*2))),f});return new Be(n[0],n[1])}ddp9(t,i,r,n,c,f=0){const p=t/this.dCC,v=i/this.dCV,w=r/this.dCT,x=n/this.dFL,L=c/this.dEL;return p+v+w+x+f-L}static creatValueFormula(t){return St.calcCreatValueFormula(t.attack,t.health,t.armor,t.mobility,t.regen,t.breakthrough,t.poison)}static cardCreatValueFormula(t){return St.calcCreatValueFormula(t.iAttack,t.iHealth,t.iArmor,t.iMobile,t.iRegen,t.iBT,0)}static calcCreatValueFormula(t,i,r,n,c,f,p){const v=f?1:0;return i+Math.max(0,t)+(r+Math.min(n,3)+v+c-p)*1.5}static playerFormula(t,i,r,n){return t+(i-r)*2+n*4}static threatFormula(t,i){let r=0,n=0;if(t.defender)r=t.attack;else{const c=St.oppFinder(t,i);c?(t.breakthrough&&(n=Math.max(t.attack-c.health,0)),r=t.attack-n):n=t.attack,n>0&&(n+=St.scalingBonus(n))}return Math.max(r,0)+Math.max(n,0)}static threatEOT(t,i,r){let n=0;return t.threatTotal().forEach(f=>{f==="TP"?t.attack>0&&k.isUn(St.oppFinder(t,r))&&(t.defender?n+=t.level/2:n+=t.level):f==="TS"?n+=t.level*2*(t.health/(t.maxHealth||1)):f==="TX"||f==="TW"?n+=t.level*(f==="TX"?1.5:.5):f==="TH"&&i>1?n+=t.level*(i/4):f==="TL"&&i===4&&(n-=t.level)}),n}static oppFinder(t,i){const r=6-t.lane;return i.find(n=>n.owner!==t.owner&&n.lane===r)}static rawNugget(t,i,r,n,c,f=0,p=void 0){return{count:t,value:i,attack:r,pfLife:n,peLife:c,bonus:f,threat:p}}static addNuggets(t,i){return St.rawNugget(t.count+i.count,t.value+i.value,t.attack+i.attack,t.pfLife+i.pfLife,t.peLife+i.peLife,t.bonus+i.bonus)}static sumNuggets(t){let i=St.rawNugget(0,0,0,0,0);return t.forEach(r=>{r.bonus&&(i=St.addNuggets(i,r.bonus))}),i}static scalingBonus(t){let i=7;if(t<=i)return 0;let r=!0,n=0,c=1;const f=7;for(;r;)t>i+f?(n+=c*f,i+=f,c++):(n+=c*(t-i),r=!1);return n}weighState(t,i,r){const n=t.deltaStats(r),c=i.deltaStats(r),f=Be.deltafier(c,n,!1),p=St.pLifeScale(f.frLife),v=St.pLifeScale(f.enLife);return this.ddp9(f.creatN,f.creatV,f.threat,p,v,f.bonus)}static pLifeScale(t){const i=t<0?-1:1;return St.scalingBonus(t*i)*i*.6+t}}class pr{aiPlayer;constructor(t){this.aiPlayer=t}jr7(t,i=3){return`${t}${i}`}jr6(t,i){const r=k.randInt(0,i.length),n=i[r];return i.splice(r,1),m.birth(t,"F",this.aiPlayer,n,"X")}cheatin(){const t=T.toPlayer(this.aiPlayer),i=T.toPlayer(!this.aiPlayer),r=i.health-t.health;let n=0;r>85?n=3:r>65?n=2:r>45&&(n=1);const c=m.emptyLanes(this.aiPlayer);if(n===0||c.length===0)return!1;y.lawg(this.aiPlayer," is a cheaty cheaterton.");let f=0;if(n===1){if(G.regularPlays-=1,f=k.randInt(0,13),f===0)this.jr6(this.jr7("HTR"),c);else if(f===1)this.jr6(this.jr7("AGM"),c).addRegen(8,"T");else if(f===2){const p=this.jr6(this.jr7("YNS"),c);p.buff(0,15,"N"),p.addRegen(4,"N")}else if(f===3)this.jr6(this.jr7("TBA"),c);else if(f===4)this.jr6(this.jr7("DCS"),c);else if(f===5)this.jr6(this.jr7("GGP"),c).addRegen(8,"N");else if(f===6){const p=this.jr6(this.jr7("WFM"),c);p.aggressive=!0}else if(f===7){const p=this.jr6(this.jr7("FFU"),c);p.aggressive=!0}else if(f===8){const p=this.jr6(this.jr7("URB"),c);p.aggressive=!0}else if(f===9){const p=this.jr6(this.jr7("KOD"),c);p.aggressive=!0,p.addRegen(6,"N")}else if(f===10)this.jr6(this.jr7("AGK"),c).addArmor(3);else if(f===11){const p=this.jr6(this.jr7("PSC"),c);p.aggressive=!0}else if(f===12){const p=this.jr6(this.jr7("SAD"),c);p.aggressive=!0}}else if(n===2)if(G.regularPlays-=1,f=k.randInt(0,17),f===0){const p=this.jr6(this.jr7("NDR"),c);p.aggressive=!0}else if(f===1){const p=this.jr6(this.jr7("CSW"),c);p.aggressive=!0}else if(f===2)this.jr6(this.jr7("GGD"),c).addRegen(6,"N");else if(f===3)this.jr6(this.jr7("EFP"),c);else if(f===4)this.jr6(this.jr7("ZTU"),c);else if(f===5){const p=this.jr6(this.jr7("DDD"),c);p.aggressive=!0}else if(f===6)this.jr6(this.jr7("RBH"),c).addRegen(8,"T");else if(f===7)this.jr6(this.jr7("SFT"),c);else if(f===8)this.jr6(this.jr7("GTT"),c);else if(f===9)this.jr6(this.jr7("SMD"),c);else if(c.length===5)this.jr6(this.jr7("DFB"),c),[1,2,3,4].forEach(p=>this.jr6(this.jr7("XHS"),c));else if(c.length===4)this.jr6(this.jr7("LMV"),c);else if(c.length===3)this.jr6(this.jr7("LHY"),c),this.jr6(this.jr7("SVH"),c),this.jr6(this.jr7("DBA"),c);else if(c.length===2)this.jr6(this.jr7("UTR"),c),this.jr6(this.jr7("TDS"),c);else if(t.turn===4)this.jr6(this.jr7("SSR"),c);else if(t.turn===1)this.jr6(this.jr7("ESK"),c);else{const p=this.jr6(this.jr7("XSH"),c);p.aggressive=!0}else if(n===3)if(f=k.randInt(0,20),f===0){const p=this.jr6(this.jr7("IHA",4),c);p.aggressive=!0}else if(f===1)this.jr6(this.jr7("CHR"),c);else if(f===2)this.jr6(this.jr7("FGO",1),c);else if(f===3)this.jr6(this.jr7("CHV",4),c);else if(f===4)this.jr6(this.jr7("KKK",4),c);else if(t.health<20){const p=this.jr6(this.jr7("ODC",4),c);p.aggressive=!0}else if(c.length===5){const p=k.randInt(0,4);if(p===0)[1,2,3,4,5].forEach(v=>this.jr6(this.jr7("UWL",2),c));else if(p===1)[1,2].forEach(v=>this.jr6(this.jr7("DFB"),c)),[1,2,3].forEach(v=>this.jr6(this.jr7("FFD"),c));else if(p===2)[1,2,3,4,5].forEach(v=>this.jr6(this.jr7("BWK"),c));else if(p===3){this.jr6(this.jr7("SBG"),c),this.jr6(this.jr7("EWE"),c);const v=this.jr6(this.jr7("BMY"),c);v.defender=!0,v.aggressive=!0}}else if(i.health>350)t.health<180&&(T.heal(t,180-t.health,"POZ1"),Y.addHeal(t.isPlayerA)),this.jr6(this.jr7("AGD"),c);else if(i.health>250)this.jr6(this.jr7("FGO"),c);else if(c.length===4){const p=k.randInt(0,3);p===0?(this.jr6(this.jr7("AGK"),c),[1,2,3].forEach(v=>this.jr6(this.jr7("VBK"),c))):p===1?(this.jr6(this.jr7("TDS"),c),this.jr6(this.jr7("TDS"),c),this.jr6(this.jr7("UTR"),c)):p===2&&[1,2,3,4].forEach(v=>this.jr6(this.jr7("CDC"),c))}else if(c.length===3)if(k.randInt(0,2)){this.jr6(this.jr7("SDR"),c),this.jr6(this.jr7("SDR"),c);const p=this.jr6(this.jr7("UPM"),c);p.aggressive=!0}else{this.jr6(this.jr7("SDL"),c);const p=this.jr6(this.jr7("NFF"),c);p.aggressive=!0}else if(c.length===2)this.jr6(this.jr7("SPM"),c),this.jr6(this.jr7("SPM"),c);else{const p=this.jr6(this.jr7("NXC"),c);p.buff(10,0,"A"),p.aggressive=!0,p.addMobility(2,"A"),p.addRegen(5,"A")}return t.health<30&&(T.heal(t,50-t.health,"POZ1"),Y.addHeal(t.isPlayerA)),!0}}class vi{action;hitTest(t,i,r){}enabled=!0;mouse=at.Left;validButton(t){return this.mouse===at.Both||this.mouse===t}static arrayHit(t,i,r,n){let c,f=0;const p=t.length;for(;c===void 0&&f<p;)c=t[f].hitTest(i,r,n),f++;return c}}class ct extends vi{originX;originY;endX;endY;constructor(t,i,r,n,c,f=at.Left){super(),this.action=t,this.originX=i,this.originY=r,this.endX=i+n,this.endY=r+c,this.mouse=f}static fromArr(t,i,r=at.Left){return new ct(t,i[0],i[1],i[2],i[3],r)}hitTest(t,i,r){if(!(!this.enabled||!this.validButton(r)))return this.originX<=t&&this.endX>=t&&this.originY<=i&&this.endY>=i?this.action:void 0}}const yr={zone:"N",key:"BNDL",host:"",param:""};class ie extends ct{constructor(t,i,r,n,c=at.Left){super(yr,t,i,r,n,c)}static fromBox(t,i=at.Left){return new ie(t[0],t[1],t[2],t[3],i)}childs=[];addChild(t){this.childs.push(t)}clear(){this.childs=[]}hitTest(t,i,r){if(super.hitTest(t,i,r))return vi.arrayHit(this.childs,t,i,r)}}class Re{realPromise;resolveMe(t){}rejectMe(){}getPromise(){return this.realPromise}constructor(){this.realPromise=new Promise((t,i)=>{this.resolveMe=t,this.rejectMe=i})}}const Si=25,Ci=9999,br=-9999,Ar=-999999,kr=["CANC","DEET","SCRH"],Tr=["HPLY","ACTV","MOVE"];class vr{aiPlayer=!1;brain="S";dcWeight=.4;dumb=!1;endCount=0;inPhase=!0;log=!1;prefs;simOff=!0;simOn=!1;turnSims=0;turnTime=0;boulos(t){this.simOff=!t,this.simOn=t}brdEval;kickOut=!1;kickTimer=0;lvlAdjust=0;mrgnAct=0;mrgnMain=0;promStack=[];peekStack=[];peeking=!1;rootBoardStats;slowpoke=0;constructor(){this.brdEval=new St,this.rootBoardStats=new Be(Be.blankStats(!0),Be.blankStats(!1)),this.prefs={deck:"2",hand:"2",lifed:"2",lifeg:"2",minion:"2",menace:"2",potent:"2"}}statPrep(){this.brain==="M"?(this.mrgnAct=.04,this.mrgnMain=.04):(this.mrgnAct=this.brain==="S"?.2:.8,this.mrgnMain=this.mrgnAct+=.2),this.brdEval.statPrep(this.prefs),this.dcWeight=this.brdEval.numbo(this.prefs.hand,[.1,.4,.7]),this.lvlAdjust=this.brdEval.numbo(this.prefs.deck,[-.4,0,.4])}setLog(t){this.log=t}lNum(t){return t<-899999?"NUNS":t<-8999?"LOSS":t>8888?"KILL":t.toFixed(1)}popProm(t){this.promStack.pop().resolveMe(t)}popPeeker(t){this.peekStack.pop().resolveMe(t)}hitMainPhase(){this.dumb&&this.simOn&&this.inPhase&&G.mainBattle&&(this.inPhase=!1)}simEndpoint(t){if(this.endCount++,this.promStack.length===0)y.debug("Tried to end a sim, but no promise to unlock."),console.trace();else{let i;if(t==="T"){const r=this.brdEval.fromState(!0);i=this.brdEval.weighState(this.rootBoardStats,r,this.aiPlayer)}else t==="W"?i=Ci:t==="L"?i=br:i=Ar;this.popProm(i)}}async processAction(t,i,r=!1){const n=this.simOff;let c=0,f=this.actionPruner(t);if(f=this.noHandDoubles(f),this.peeking){this.popPeeker(f);return}if(n&&this.dumb&&i&&(this.dumb=!1,y.debug("Smart Again.",!1)),this.dumb&&!this.inPhase){let x=f.filter(L=>L.key==="FITE"||L.key==="ENDT");x.length>0&&(f=x)}if(n){Ct.hwhipe();const x=f.map((_,q)=>Ct.drawAiGear(q,!1));await Promise.all(x),await Xe.drawActions([]),await k.sleep(Si),this.kickOut=!1,this.boulos(!0),this.slowpoke=Date.now(),this.rootBoardStats=this.brdEval.fromState(),this.endCount=0;const L=await this.peeker(f),V=[];let Q=0,I=0,tt=[];L.forEach(_=>{Q+=_.peek.length,_.free&&(_.free==="FREE"?I++:tt.includes(_.free)||(I++,tt.push(_.free))),_.wasPeek&&_.peek.some(q=>this.hasHint(q,"DF"))&&V.push(_.root)}),V.length>0?(f=V,this.dumb=!0,y.debug("Do firsts; dumb mode. Action count "+f.length,!1)):r?(this.dumb=!0,y.debug("Forced dumb mode.",!1)):G.regularPlays+I>3?(this.dumb=!0,y.debug("4+ plays; dumb mode. Peek was "+Q,!1)):T.getActive().hand.length>7?(this.dumb=!0,y.debug("8+ in hand; dumb mode. Peek was "+Q,!1)):Q>29&&k.options.debug&&this.peekerReport(L)}if(f.length===0){n&&(console.error("Root eval set consisted of 0 valid actions"),y.debug("!! Zero Action Root !!")),this.simEndpoint("D");return}let p=-99999;const v=[];let w=!0;if(n)if(f.length===1)v.push({a:f[0],weight:99}),w=!1;else{const x=f.findIndex(L=>L.key==="HPLY"&&L.card==="ESU2"||L.card==="ESU3");x>-1&&(v.push({a:f[x],weight:99}),w=!1)}if(w){Ke.saveState();let x=!0;for(let L=0;L<f.length&&!this.kickOut&&x;L++){const V=f[L];n&&(this.kickTimer=Date.now(),this.dumb&&V.key==="FITE"&&this.inPhase&&G.mainBattle&&(this.inPhase=!1));const Q=new Re;this.promStack.push(Q),S.handleAction(V);let I=await Q.getPromise();Date.now()-this.kickTimer>4e4&&(this.kickOut=!0),I===Ci&&(x=!1),I+=this.hintWeight(V),I>p&&(p=I),Ke.restoreState(),n&&(v.push({a:V,weight:I}),await Ct.drawAiGear(L,!0),c++,await k.sleep(Si))}Ke.popState()}if(n)if(this.boulos(!1),this.kickOut)y.lawg(": High complexity encountered. Recombobulating."),this.processAction(t,i,!0);else{const x=p-(i?this.mrgnMain:this.mrgnAct);let L=v.filter(q=>q.weight>x);L.length>1&&L.findIndex(q=>q.a.key==="ENDT")>-1&&(L=L.filter(q=>q.a.key!=="ENDT"));let V,Q=!0;if(L.length===1)V=L[0].a,Q=!1;else if(p>Ci-100){const q=L.find(wt=>wt.a.key==="FITE");q&&(V=q.a,Q=!1)}Q&&(V=L[k.randInt(0,L.length)].a);const I=Date.now()-this.slowpoke,tt=Math.max(1,350-I),_=I-Si*c;this.turnSims+=this.endCount,this.turnTime+=_,k.options.debug&&(i?(y.debug(""),y.debug(" Main Choices"),v.sort((q,wt)=>wt.weight-q.weight).forEach(q=>{const wt=this.dazzler(q,V,x);let we="",vt;const Et=q.a.key;Et==="HPLY"?(we=q.a.card,vt="Play "):Et==="MOVE"||Et==="ACTV"?(we=q.a.host,vt=Et==="MOVE"?"Move ":"Actv "):Et==="FITE"||Et==="ENDT"?vt=Et==="FITE"?"Fite ":"Done ":vt=Et+" ??? ",y.lawg(vt,we," : "+this.lNum(q.weight)+wt)}),y.debug(" ~~~~~~~~~~~~~~"),y.debug("")):V.key==="FORG"&&(y.debug(" Lane Choices"),v.filter(q=>q.a.key==="FORG").sort((q,wt)=>wt.weight-q.weight).forEach(q=>{y.lawg("Lane "+q.a.lane+" : "+this.lNum(q.weight)+this.dazzler(q,V,x))}),y.debug(" ~~~~~~~~~~~~~~"),y.debug(""))),k.sleep(tt).then(()=>{S.handleAction(V)})}else this.popProm(p)}dazzler(t,i,r){return t.a===i?" ":t.weight>r?" ":""}actionPruner(t){let i=t.filter(r=>kr.indexOf(r.key)===-1);return G.mainBattle?i=i.filter(r=>r.key!=="HDSC"):i=i.filter(r=>!this.hasHint(r,"BB")),i=i.filter(r=>{if(this.hasHint(r,"HR")){if(r.zone==="P")return r.playerA!==this.aiPlayer;{const n=m.ddf6(r);return n.owner===this.aiPlayer?n.aiHints().includes("MC"):!0}}else return!0}),i=i.filter(r=>{if(this.hasHint(r,"KL")){const n=m.ddf6(r);return n.owner===this.aiPlayer?n.aiHints().includes("ST"):!0}else return!0}),i=i.filter(r=>this.hasHint(r,"BF")?r.playerA===this.aiPlayer:!0),i=i.filter(r=>this.hasHint(r,"DB")?r.playerA!==this.aiPlayer:!0),i=i.filter(r=>{if(this.hasHint(r,"PN")){if(r.zone==="P")return r.playerA!==this.aiPlayer;{const n=r,c=m.ddf6(n);return c.owner===this.aiPlayer?c.aiHints().includes("MC"):!0}}else return!0}),i=i.filter(r=>{const n=r.key==="FORG";if(n||this.hasHint(r,"FL")){const c=r,f=m.searchByFSA(c);return f&&(G.mainBattle?G.newPre:G.newPost).includes(f.id)?f.aiHints().includes("RT")?!0:n?O.getCard(c.host).aiHints().includes("RD"):!1:!0}else return!0}),i}noHandDoubles(t){const i=[],r=[],n=[];return t.forEach(c=>{c.key==="HPLY"?i.push(c):r.push(c)}),i.forEach(c=>{const f=c.card;n.includes(f)||(n.push(f),r.push(c))}),r}async peeker(t){this.peeking=!0;const i=[],r=[];t.forEach(n=>{Tr.includes(n.key)?r.push(n):i.push({root:n,peek:[n],wasPeek:!1,free:""})}),Ke.saveState();for(let n=0;n<r.length;n++){const c=r[n],f=new Re;this.peekStack.push(f),S.handleAction(c);const p=await f.getPromise();if(p.length>0){let v="";if(c.key==="HPLY"){const w=c;w.cost!==""&&(v=w.cost)}i.push({root:c,peek:p,wasPeek:!0,free:v})}Ke.restoreState()}return Ke.popState(),this.peeking=!1,i}peekerReport(t){let i=0,r=0,n=0,c=[],f=[];t.forEach(p=>{const v=p.peek.length;if(v>0){const w=p.root.key;if(w==="HPLY")if(p.peek[0].key==="FORG")r+=v;else{const x=y.fastName(p.root.card)+": "+v;c.push(x)}else if(w==="MOVE")n+=v;else if(w==="ACTV"){const x=y.fastName(p.root.host)+": "+v;f.push(x)}else i+=v}}),y.debug("High complexity hit: Root: "+t.length),r>0&&y.debug("Forges: "+r),n>0&&y.debug("Mobility: "+n),c.forEach(p=>y.debug(p)),f.forEach(p=>y.debug(p)),i>0&&y.debug("Other: "+i)}hintWeight(t){let i=!1,r=!1,n="",c=0;if(t.key==="HPLY"?n=t.card:t.key==="HDSC"?(r=!0,n=t.host):this.hasHint(t,"CD")&&(n=t.card,i=!0),n){const f=O.getCard(n);if(f.level<f.maxLevel&&!r&&(c+=this.levelBonusFormula(f,i)),!i){const p=this.hintAdjuster(f);p>0&&(r?c-=p:c+=p)}}return c}levelBonusFormula(t,i){let r=0;const n=t.aiHints();return n.includes("LG")?(r+=1,n.includes("LM")&&(r+=.8+this.lvlAdjust)):n.includes("LB")?r-=1.3:i&&(r+=.4),r>0?r+=this.lvlAdjust:r<0&&(r-=this.lvlAdjust),r}hintAdjuster(t){let i=0;const n=t.aiHints().find(c=>c.startsWith("ZZ"));return n&&(i=.5*parseInt(n.slice(2))),i}hasHint(t,i){return!t.hint||t.hint.length===0?!1:t.hint.includes(i)}logStats(t,i){const n=["Crt Cnt","Crt Val","Threat","P Health"].map((c,f)=>`${c}: ${this.numNum(i[f])}`).join(", ");console.log(t+n)}numNum(t){return t.length>6?t.charAt(0)==="-"?"NUNS":"KILL":t.padEnd(4)}cheater(){return R.aiMode&&R.aiActive&&k.options.cheater?new pr(this.aiPlayer).cheatin():!1}peekAllCards(){const t=T.toPlayer(this.aiPlayer),i=t.deck.concat(t.hand,t.discard).sort();console.log(i.map(r=>y.fastName(r)).join(`
`))}peekDecks(){const t=T.toPlayer(!1),i=t.deck.map(f=>y.fastName(f)).sort(),r=t.hand.map(f=>y.fastName(f)).sort(),n=t.discard.map(f=>y.fastName(f)).sort(),c=["-- Deck --"].concat(i,"-- Hand --",r,"-- Discard --",n);console.log(c.join(`
`))}}const J=new vr;class Sr{getState(){const t={cCrd:this.currPlayCard,cCst:this.currPlayCost,cPos:this.currPlayPos,aa:this.actionHistory};return JSON.stringify(t)}setState(t){const i=JSON.parse(t);this.currPlayCard=i.cCrd,this.currPlayCost=i.cCst,this.currPlayPos=i.cPos,this.actionHistory=i.aa}handleAction(t){if(t.key==="DEET"){Se.init(t.param);return}if(t.key==="HPLY"){this.playCardSelect(t);return}if(t.key==="FORG"){G.forgeCard(t,this.currPlayCard,this.currPlayCost,this.currPlayPos);return}if(t.key==="FITE"){ji.fight(t.param==="M");return}if(t.key==="ENDT"){G.endTurn();return}if(t.key==="MOVE"){this.mobilitySelect(t);return}if(t.key==="MEND"){G.mobility(t);return}if(t.key==="HDSC"){this.currPlayCost="",G.cardPlayed(this.currPlayCard,this.currPlayCost,this.currPlayPos,!0),this.actionDone();return}if(t.key==="ACTV"){const i=m.jr5(t.param);O.getCard(i.code).startActivation(i);return}if(t.key==="NOTR"){t.param==="PM"&&ut.popMode(),this.actionDone(!0);return}if(t.key==="CARD"){O.getCard(t.host).handleAction(t);return}if(t.key==="CANC"||t.key==="CNCL"){t.param==="PM"&&ut.popMode(),this.actionHistory.pop(),this.ddf5();return}if(t.key==="USWP"){ut.popMode(),ae.whatNext();return}if(t.key==="DTUP"){Se.updateDetails(t),bt.drawAll();return}if(t.key==="VWDK"){yt.handleShowDeck(t);return}if(t.key==="SCRK"){yt.handleDeckScroll(t);return}if(t.key==="SCRH"){const i=T.getLocal();t.param==="R"?R.ui.handScrollLeft=Math.min(i.hand.length-5,R.ui.handScrollLeft+5):R.ui.handScrollLeft=Math.max(0,R.ui.handScrollLeft-5),bt.dirtyA=!0,ue.dirty=!0,bt.drawAll().then(()=>k.setMouse("default"));return}if(t.key==="DRFT"){gt.resumeDraft(t.param);return}if(t.key==="SCRD"){gt.paginate(t.param==="D"),bt.drawAll();return}if(t.key==="UIBT"){We.handleUIButton(t);return}if(t.key==="MENU"){We.handleMainMenuButton(t);return}if(t.key==="MNBT"){We.handleMenuButton(t);return}if(t.key==="DSET"){this.ddf5(Lt.generateDeckPickerActions(parseInt(t.param)));return}if(t.key==="DECK"){Lt.handleDeckPick(t.param);return}if(t.key==="DPVW"){Lt.previewDeckPick(t.param);return}if(t.key==="DBUG"){t.param==="AB"&&k.options.debug?y.clearAll():k.toggleDebug();return}}ddf5(t,i=!1){let r;if(t){const n=this.generateDetailActions();r=t.concat(n),this.actionHistory.push(r)}else r=this.actionHistory[this.actionHistory.length-1];R.aiActive?J.processAction(r,i):(ut.mode==="G"&&(bt.dirtyA=!0),bt.drawAll().then(()=>{const n=r.find(c=>c.key==="FITE"||c.key==="ENDT");if(n){const c=["HPLY","ACTV","MOVE"];r.some(f=>c.includes(f.key))?k.setMouse("default"):this.handleAction(n)}else k.setMouse("default")}))}currPlayCard="";currPlayCost="";currPlayPos=-1;shiftPlayCard(t){t<this.currPlayPos&&this.currPlayPos--}playPosition(){return this.currPlayPos}actionHistory=[];get activeActions(){const t=this.actionHistory.length;return t===0?[]:this.actionHistory[t-1]}actionDone(t=!1){this.currPlayCard="",this.currPlayCost="",this.currPlayPos=-1,this.actionHistory=[],J.simOff&&(ht.removeAll(),bt.dirtyA=!0,bt.drawActions([])),t?H.triggerDone():ae.whatNext()}spellCast(){G.cardPlayed(this.currPlayCard,this.currPlayCost,this.currPlayPos),T.activeA!==T.isLocalA&&Y.addCardFlash(this.currPlayCard),this.actionDone()}playCardSelect(t){this.currPlayCard=t.card,this.currPlayCost=t.cost,this.currPlayPos=t.position;const i=this.getPlayCardActions(t);this.ddf5(i)}getPlayCardActions(t){const i=O.getCard(t.card),r=t.canPlay?i.playTargets():[];G.regularPlays>0&&i.canLevel()&&r.push(D.buttonTarget("HDSC",t.card));const n=D.toActions(r);return n.push(b.handSelectAction("CANC",t.card,"",t.position)),n}mobilitySelect(t){const i=this.getMoveCardActions(t);this.ddf5(i)}getMoveCardActions(t){const i=m.ddf6(t);let r=[];if(t.param==="ACTV"){const n=b.actionTarget("TB","ACTV",i.code,i.id);r=D.toActions(n)}return r.push(b.fieldSelectAction("CANC",t.lane,t.playerA)),m.canMove(i).map(n=>{const c=b.fieldSelectAction("MEND",n,t.playerA);return c.param=i.id,c}).concat(r)}noneEndTrigger(){return D.toActions(D.buttonTarget("NOTR"))[0]}cancelAction(){return D.toActions(D.buttonTarget("CANC"))[0]}emptyAdjacents(t,i){const r=i||t.id,n=b.emptyPlayerActTarg("F","CARD",t.code,r);return n.lanes=t.adjacent,D.toActions(n)}generateDetailActions(){const t=ut.mode;if(R.aiActive)return[];if(t==="G"){const i=T.getLocal().hand.map((n,c)=>{const f=b.handSelectAction("DEET",n,"",c);return f.param=n,f}),r=m.qActiveCreats().map(n=>{const c=b.fieldSelectAction("DEET",n.lane,n.owner);return c.param=n.code,c});return i.concat(r)}else if(t==="D"){const i=gt.currentPack.map((n,c)=>{const f=b.draftSelectAction("DEET",c,!0);return f.param=`${n}1`,f}),r=gt.picksAsDeck.map((n,c)=>{const f=b.draftSelectAction("DEET",c,!1);return f.param=`${n.card}1`,f});return i.concat(r)}return[]}}const S=new Sr,Cr=16.6,wr=200,Dr="!CF",xr="!RU",oi=35,Br=.11,Oi=40,wi=18,Di=18,$i=32,Ui=40,xi=45,je=["L1","L2","L3","L4","L5","L6"],Bi=["F1","F2","F3","F4"],Hi=o=>Math.round(100*o)/100,Hr=(o,t,i)=>Math.round((1-i)*o+i*t);class Fr{active=!1;animBase=[];animOpac=[];animOver=[];animQ=[];blocker=new Re;cardCache=new Map;easingCache=new Map;eCanvas;hcFrame;fct2anm=new Map;initBlock=new Re;initialzed=!1;lastStep=-1;movingBoard=[];movingHand=[];on=!0;pathCache=new Map;rafStartTime=0;speedCache=new Map;spriteCache=new Map;spriteToSchema=new Map;constructor(){["F","F0","D"].concat(je,Bi).forEach(t=>this.pathCache.set(t,[[],[]]))}actF(){return[this.animOpac,this.animBase,this.animOver].map(t=>t.filter(i=>i.active))}addArmorC(t){if(this.ok()){const i=new In("M","M","F",t.id,18);i.setDelay(wi),i.preLoad("icons/effects/big/armor.png"),i.setField(t.lane,t.owner),i.nudge(40,76),i.dOrd=2,this.animQ.push(i)}}addArmorP(t){if(this.ok()){const i=new ki("M","I","P",t,this.speedCache.get("D"));i.preLoad("icons/effects/big/armor.png"),i.nudge(897,t===T.isLocalA?552:65),this.animQ.push(i)}}addCardFlash(t){if(this.ok()){const i=Ce.fader("P",Dr,t);i.x=861,i.y=200,this.animQ.push(i)}}addDeathBoard(t,i,r){if(this.ok()){const n=Ce.fader("F",t,t);n.setField(i,r),this.animQ.push(n)}}addDirDmg(t){if(this.ok()){const i=new Oe("Z","P",t);i.nudge(834,t===T.isLocalA?486:-1),this.animQ.push(i)}}addFactBoard(t,i,r,n){if(this.ok()&&t!=="X"){const c=new Gn(this.fct2anm.get(t),"F",i);c.setField(r,n),c.nudge(20,30),c.budge(),this.animQ.push(c)}}addFight(t){if(this.ok()){const i=new Ti("F","F",t.id,t.id);i.endWrite=!0,i.setField(t.lane,t.owner);const r=this.pathCache.get("F");i.moveY=r[T.isLocalA===t.owner?1:0],this.animQ.push(i)}}addForgeMove(t,i,r,n,c=void 0){if(this.ok()){const f=T.isLocalA===n,p=(r-(i+1))*(f?1:-1),v=p===0?"F0":Bi[Math.abs(p)-1],w=new Ti(v,"F",t,t);w.endWrite=!0,w.dOrd=2;const x=ue.fastCoord(i);f||(x[1]=-184),w.x=x[0],w.y=x[1];const L=this.pathCache.get(w.aId);if(w.moveY=L[f?1:0],p!==0){const V=this.pathCache.get(je[Math.abs(p)-1]);w.moveX=V[p>0?0:1]}if(this.animQ.push(w),c){const V=Ce.fixed("F",c.id,c.id);V.steps=w.steps,V.dOrd=0,V.setField(c.lane,c.owner),this.animQ.push(V)}}}addHandDiscard(t,i,r){if(this.ok()){const n=this.pathCache.get("D")[0];let c;c=Ce.fader("H",t,i),c.setHand(r),c.moveY=n,this.animQ.push(c)}}addHandFling(t,i,r){if(this.ok()){const n="L6",c=this.pathCache.get(n)[0],f=Ce.fader("H",t,i);f.setHand(-1),f.x+=40+100*r,f.moveX=c,this.animQ.push(f)}}addHandMove(t,i,r,n,c){if(this.ok()){const f=Math.min(Math.max(n-r,-5),5),p=je[Math.abs(f)-1],w=this.pathCache.get(p)[f>0?0:1];let x;const L=n<0||n>4;L?x=Ce.fader("H",t,i):(x=new Ti(p,"H",t,i),x.endWrite=!0,r>4?r=Math.min(r,n+5):r<0&&(r=Math.max(r,n-5))),x.setHand(r),x.moveX=w,c&&!L&&x.extend(15,!0,!1),this.animQ.push(x)}}addHeal(t){if(this.ok()){const i=new Oe("H","P",t);i.slow(4),i.nudge(859,t===T.isLocalA?517:30),this.animQ.push(i)}}addLaneMove(t,i,r,n){if(this.ok()){const c=(r-i)*(T.isLocalA===n?1:-1),f=new Ti(je[Math.abs(c)-1],"F",t,t);f.endWrite=!0,f.setField(i,n);const p=this.pathCache.get(f.aId);f.moveX=p[c>0?0:1],this.animQ.push(f)}}addLevel(t,i){if(this.ok()){const r=new Oe("V","H",t);r.slow(4),r.setHand(i),r.nudge(20,72),this.animQ.push(r)}}addOverload(t,i){if(this.ok()){const r=new Oe("O","H",t);r.slow(4),r.setHand(i),r.nudge(21,72),this.animQ.push(r)}}addPoison(t){if(this.ok()){const i=new ki("P","I","F",t.id,this.speedCache.get("D"));i.preLoad("icons/effects/big/poison.png"),i.setField(t.lane,t.owner),i.nudge(70,36),this.animQ.push(i)}}addRankup(t){if(this.ok()){const i=new Oe("R","P",xr);i.slow(4),i.nudge(890,t===T.isLocalA?466:-21),this.animQ.push(i)}}addRegen(t){if(this.ok()){const i=new ki("G","I","F",t.id,this.speedCache.get("D"));i.preLoad("icons/effects/big/regenerate.png"),i.setField(t.lane,t.owner),i.nudge(10,35),this.animQ.push(i)}}addSlash(t){if(this.ok()){const i=new rr("B","F",t.id);i.slow(3),i.setDelay(wi),i.setField(t.lane,t.owner),i.nudge(8,44),this.animQ.push(i)}}addSwipe(t){if(this.ok()){const i=new rr("W","P",t);i.slow(3),i.setDelay(wi),i.nudge(877,t===T.isLocalA?531:44),this.animQ.push(i)}}aniProm(){return this.active?this.blocker.getPromise():Promise.resolve()}async done(t){const i=t??this.actF().flat();await Promise.all(i.map(r=>r.onEnd())),this.eCanvas.clear(),this.active=!1,this.purge(),this.blocker.resolveMe()}async draw(t){if(t-this.lastStep===0){requestAnimationFrame(c=>this.rafNext(c));return}let r=!1;const n=[];for(let c=this.lastStep+1;c<=t;c++)this.actF().forEach(f=>{f.forEach(p=>{p.steps===c?(p.active=!1,n.push(p)):(c===t&&(r=!0),p.moveX.length>c&&(p.x+=p.moveX[c]),p.moveY.length>c&&(p.y+=p.moveY[c]))})});if(r){const c=this.actF();this.hcFrame.clear(),c[0].length>0&&(this.hcFrame.context.globalAlpha=this.easingCache.get("D")[t],await Promise.all(c[0].map(f=>f.draw(t))),this.hcFrame.context.globalAlpha=1),c[1].length>0&&await Promise.all(c[1].map(f=>f.draw(t))),c[2].length>0&&await Promise.all(c[2].map(f=>f.draw(t))),await Promise.all(n.map(f=>f.onEnd())),this.eCanvas.clear(),this.eCanvas.writeHC(this.hcFrame,0,0),this.lastStep=t,t>wr?this.done(n):requestAnimationFrame(f=>this.rafNext(f))}else this.done(n)}easingFade(t){const i=Array(t);let r=0;for(let n=0;n<t;n++)if(n/t<Br)i[n]=1,r=n+1;else{const c=(n+1-r)/(t-r);i[n]=Hi(1-Math.pow(c,2))}return i}easingFight(t){const i=Array(t);for(let r=0;r<t;r++)i[r]=Hi(Math.sin(Math.PI*((r+1)/t)));return i}easingLine(t){const i=Array(t);for(let r=0;r<t;r++)i[r]=Hi(1-(Math.cos(Math.PI*((r+1)/t))+1)/2);return i}async genCard(t){if(!this.cardCache.has(t.drawId)){const i=Tt.cardSize(),r=new _i(i[0],i[1]);t.target==="F"?await Tt.drawCard(m.jr5(t.drawId),r,0,0):await Tt.drawCard(O.getCard(t.drawId),r,0,0),this.cardCache.set(t.drawId,r)}}getCC(t){if(!this.cardCache.has(t)){const i="Could not find card cache image for key "+t;throw console.error(i),new Error(i)}return this.cardCache.get(t)}getSS(t){return this.spriteCache.get(t)}getSSS(t){return this.spriteToSchema.get(t)}async init(){if(this.active=!1,this.on=k.options.anim8,this.on&&!this.initialzed){this.eCanvas=ft.get("effects"),this.hcFrame=new _i(k.gameWidth,k.gameHeight),[["A","A"],["N","N"],["T","T"],["U","U"]].forEach(vt=>this.fct2anm.set(vt[1],vt[0]));const i=[["A","effectA"],["B","slash"],["W","swipe"],["Z","boomer"],["H","heal"],["V","level"],["O","overload"],["N","effectN"],["R","rankup"],["T","effectT"],["U","effectU"]];(await Promise.all(i.map(vt=>k.imageLoader(`img/sprites/${vt[1]}.png`)))).forEach((vt,Et)=>{this.spriteCache.set(i[Et][0],vt)});const n=this.schemaBuilder(5,7,110,154,0),c=this.schemaBuilder(5,7,108,153,0),f=this.schemaBuilder(2,3,134,134,0),p=this.schemaBuilder(2,3,114,114,0),v=this.schemaBuilder(3,3,120,116,0),w=this.schemaBuilder(3,3,110,81,0),x=this.schemaBuilder(3,3,112,114,0),L=this.schemaBuilder(5,2,142,142,0),V=this.schemaBuilder(8,4,205,205,0);[["A",n],["N",n],["U",n],["T",c],["B",f],["W",p],["R",v],["V",w],["O",x],["H",L],["Z",V]].forEach(vt=>this.spriteToSchema.set(vt[0],vt[1])),[["D",oi],["F",Oi],["L1",Di],["L2",$i],["L3",Ui],["L4",xi],["L5",xi],["L6",oi],["F0",Di],["F1",Di],["F2",$i],["F3",Ui],["F4",xi]].forEach(vt=>this.speedCache.set(vt[0],vt[1])),this.easingCache.set("D",this.easingFade(oi));const tt=(vt,Et)=>{const Dt=new Array(Et.length),Xt=Et.map(Jt=>Hr(0,vt,Jt));return Xt.forEach((Jt,ye)=>{ye===0?Dt[0]=Jt:Dt[ye]=Jt-Xt[ye-1]}),Dt},_=vt=>vt.map(Et=>-Et),q=250;je.forEach((vt,Et)=>{const Dt=this.easingLine(this.speedCache.get(vt)),Xt=(Et+1)*pe.fieldGap,Jt=tt(Xt,Dt);if(this.pathCache.set(vt,[Jt,_(Jt)]),Et<5){const ye=tt(q,Dt);this.pathCache.set(Bi[Et],[ye,_(ye)])}Et===0&&this.pathCache.set("F0",this.pathCache.get("F1"))});const wt=tt(15,this.easingFight(Oi));this.pathCache.set("F",[wt,_(wt)]);const we=tt(100,this.easingLine(oi));this.pathCache.set("D",[we,[]]),this.initialzed=!0,this.initBlock.resolveMe()}}initProm(){return this.on?this.initBlock.getPromise():Promise.resolve()}ok(){return this.on&&J.simOff}async prep(){if(!this.on||this.animQ.length===0)return 0;if(!this.initialzed)return this.animQ=[],0;this.active=!0;const t=new Map;this.animQ.forEach(n=>{t.has(n.targId)?t.get(n.targId).push(n):t.set(n.targId,[n])});const i=[];let r=0;t.forEach((n,c)=>{const f=n[0].target,p=new Set,v=n.filter(w=>p.has(w.aId)?!1:(p.add(w.aId),!0));if(r+=v.length,n.some(w=>w.type==="F"||w.type==="C"||w.type==="X"?(i.push(w),!0):!1),f==="F"||f==="H"){const w=n.find(x=>x.moveX.length>0||x.moveY.length>0);if(w){if(f==="F")this.movingBoard.push(c);else if(f==="H"){const x=k.deTil(c);k.txt2bool(x[0])&&this.movingHand.push(parseInt(x[1]))}n.length>1&&n.forEach(x=>{x!==w&&(x.moveX=w.moveX,x.moveY=w.moveY)})}}v.forEach(w=>{w.type==="S"?this.animOver.push(w):w.type==="F"||w.type==="I"?this.animOpac.push(w):(w.type==="C"||w.type==="X"||w.type==="M")&&this.animBase.push(w)}),this.animBase.sort((w,x)=>w.dOrd-x.dOrd)});for(let n=0;n<i.length;n++)await this.genCard(i[n]);return this.animQ=[],r}purge(){this.cardCache.clear(),this.animBase=[],this.animOpac=[],this.animOver=[],this.movingBoard=[],this.movingHand=[]}rafFirst(t){this.rafStartTime=t,this.lastStep=-1,this.rafNext(t)}async rafNext(t){this.draw(Math.round((t-this.rafStartTime)/Cr))}schemaBuilder(t,i,r,n,c){const f=t*i-c,p=Array(f);for(let v=0;v<f;v++)p[v]=[r*(v%i),n*Math.floor(v/i)];return{rows:t,cols:i,width:r,height:n,count:f,origins:p}}start(){!this.on||this.animBase.length===0&&this.animOpac.length===0&&this.animOver.length===0||(this.blocker=new Re,requestAnimationFrame(t=>this.rafFirst(t)))}}const Y=new Fr;class Nr{type="N0";events=[];reactions=[];deathCheck=!0;iaTrigLane=0;getState(){const t={type:this.type,events:this.events,tA:this.reactions,dC:this.deathCheck,tL:this.iaTrigLane};return JSON.stringify(t)}setState(t){const i=JSON.parse(t);this.type=i.type,this.events=i.events,this.reactions=i.tA,this.deathCheck=i.dC,this.iaTrigLane=i.tL}reset(){this.type="N0",this.events=[],this.reactions=[],this.deathCheck=!0}startBatch(){this.deathCheck=!1,this.type==="C0"?this.type="C1":this.type==="C1"?this.type="C2":this.type==="C2"&&(this.type="N0");const t=this.type;let i;if(t==="N0")i=this.events.slice(),this.events=[];else{const n=this.events.filter(f=>f.code==="DIE"),c=this.events.filter(f=>f.code!=="DIE");t==="C1"?(i=c,this.events=n):(i=n,this.events=c)}const r=this.getReactions(i);this.reactions=this.sortReactions(r),ae.whatNext()}getReactions(t){let i;const r=t.map(n=>{n.code==="TRS"&&(i=n);const c=m.field.map(p=>p.triggers.map(v=>{const w=b.triggerReaction(n,v,p.owner,"C");return w.creatId=p.id,w.cardCode=p.code,w}).filter(v=>Mi.ddf8(v))).flat(),f=[!0,!1].map(p=>T.toPlayer(p).triggers.map(w=>b.triggerReaction(n,w,p,"P")).filter(w=>Mi.ddf8(w))).flat();return c.concat(f)}).flat();return i&&this.handleTurnStart(i),r}sortReactions(t){const i=T.activeA;let r=t.filter(f=>!f.trigger.interactive&&f.owner===i),n=t.filter(f=>!f.trigger.interactive&&f.owner!==i);const c=t.filter(f=>f.trigger.interactive&&f.owner===i);return J.simOff&&(r=this.animBatching(r),n=this.animBatching(n)),c.concat(n,r)}animBatching(t){const i=new Map;if(t.forEach(f=>{if(f.trigger.batch){const p=f.trigger.id;i.set(p,1+(i.get(p)??0))}}),i.size===0)return t;const r=[];if(i.forEach((f,p)=>{f>1&&r.push(p)}),r.length===0)return t;const n=t.filter(f=>!r.includes(f.trigger.id));return r.map(f=>t.filter(p=>p.trigger.id===f).map((p,v)=>(v>0&&(p.draw=!1),p))).flat().concat(n)}handleTurnStart(t){m.dirt();const i=R.tick();m.qActiveCreats().forEach(r=>{r.owner===t.playerA&&(r.activationAvailable=!0,r.mobilityAvailable=!0,r.sleeping=!1),r.armorDmg=0,r.poison>0&&r.hurtDirect(r.poison,"POIS","X",i)&&Y.addPoison(r),r.regen>0&&r.heal(r.regen,!1)>0&&Y.addRegen(r),Ft.deathProdder(r,i)}),[T.playerA,T.playerB].forEach(r=>{r.armorDmg=0;const n=T.totalPoison(r);n>0&&T.hurtDirect(r,n,"POIS")>0&&Y.addDirDmg(r.isPlayerA)})}getNextTrigger(){const t=this.reactions;if(t.length!==0)return t[t.length-1]}triggerDone(){this.reactions.length===0?console.error("batch.triggerDone() was called when there is no trigger actions"):(this.reactions.pop(),this.iaTrigLane=0),ae.whatNext()}addEvents(...t){this.events.push(...t)}}const H=new Nr;class Pr{registry;constructor(){this.registry={}}register(t){if(this.registry[t])throw new Error(`Double registration of canvas ${t}`);this.registry[t]=new bn(t)}get(t){return this.registry[t]}}const ft=new Pr;class Mr extends E{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Abraxas, Avatar of Kadras",this.iAttack=this.boof4712,this.iHealth=this.lValN([7,11,21]),this.tribe.push("HY");const i=this.lValS(["Give an adjacent creature","Each adjacent creature gets","Each other friendly creature gets"]);this.text=`Activate: ${i} 2x attack this turn.`,this.bonus=this.buffNug(this.iAttack,0,"TX")}targ(t){const i=b.crFriendNotMeActTarg("CARD",t.id,this.code,t.id);return this.level<3&&(i.lanes=t.adjacent),i}canActivate(t){return m.creatByTarget(this.targ(t)).length>0}startActivation(t){let i;this.level===1?i=this.targ(t):(i=D.boardTarget("CARD",this.code),i.param=t.id),i.hint=["BB"],S.ddf5(D.toActions([i,D.buttonTarget("CANC")]))}handleAction(t){const i=m.jr5(t.param);if(t.zone==="F"){const r=m.ddf6(t);this.logAct(!0,r),this.applyMod(r)}else{this.logAct(!0);const r=this.targ(i);m.creatByTarget(r).forEach(n=>{this.applyMod(n)})}i.endActivation()}applyMod(t){this.modA(t,b.modT("AT",t.attack))}}class Er extends E{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Abyssal Brute",this.iAttack=this.boof4712,this.iHealth=this.iAttack,this.tribe.push("ZB"),this.text=`When ${this.name} or another friendly creature enters a side lane, that creature gets ${y.jr9(this.level,this.level,!0)} and Regenerate ${this.level}.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("EF");n.bonus=this.buffNug(this.level,this.level,"TW");const c=r.jr4("MV");return c.bonus=this.regnNug(this.level),r}ddf8(t){const i=W.toCreature(t.event);return(i.creature.lane===1||i.creature.lane===5)&&i.creature.owner===t.owner}jr8(t){const i=W.toCreature(t.event);this.buffD(i.creature,this.level),this.regn(i.creature,this.level),H.triggerDone()}}class Rr extends E{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Alloyin Highlander",this.iAttack=this.lValN([5,7,10]),this.iHealth=this.boof6914,this.tribe.push("HM"),this.text=`While ${this.name} is your only friendly creature, it gets ${y.jr9(this.boof4812,0)} and Armor ${this.boof248}.`}jr3(t,i){const r=super.jr3(t,i),n=r.addEffect("PS",this.code);return n.area="C",r}enforceEffect(t){const i=b.crNotMeTarg(t.id);i.player=T.toTarget(t.owner),m.creatByTarget(i).length===0?[b.mod("AT",this.boof4812,t.id),b.mod("AR",this.boof248,t.id)].forEach(n=>{t.addModSafe(n)}):t.removeModSafe(t.id)}}class Lr extends E{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Ambriel Archangel",this.iAttack=this.boof51016,this.iHealth=this.iAttack+1,this.tribe.push("AG"),this.hints=["ZZ-3"];const i=this.boof101520;this.text=`While ${this.name} is your only friendly creature, you get Armor ${i}, and this gets Armor ${this.level+1} and Mobility 1.`}jr3(t,i){const r=super.jr3(t,i),n=r.addEffect("PS",this.code);return n.area="C",r}enforceEffect(t){const i=t.status==="A",r=b.crNotMeTarg(t.id);r.player=T.toTarget(t.owner);const n=m.creatByTarget(r);if(i&&n.length===0){const c=b.mod("AR",this.boof101520,t.id);T.addModSafe(t.owner,c);const f=b.mod("AR",this.level+1,t.id),p=b.mod("MB",1,t.id);t.addModSafe(f),t.addModSafe(p)}else T.removeModSafe(t.owner,t.id),t.removeModSafe(t.id)}}class Je extends E{cons(t){({["LLD"]:()=>this.demC(),["LLG"]:()=>this.golC(),["LLS"]:()=>this.senC(),["LLT"]:()=>this.tyrC(),["LLV"]:()=>this.verC()})[t]()}constructor(t){super(t),this.cons(this.cardCode())}t;ddf8(t){return J.simOff&&this.t(t)}jr8(t){const i=this.cardCode(),r=T.toPlayer(t.owner),n=r.hand.length;for(let c=n-1;c>-1;c--){const f=r.hand[c];f.startsWith(i)&&(y.lawg(f," Ambushed."),this.spawn(f,r.isPlayerA),G.levelAndDiscard(f,c,!1,"E"))}H.triggerDone()}ambT(){return`Spawn a ${this.name}. Then discard ${this.level===3?"":"and level up "} ${this.name}.`}demC(){this.faction="N",this.rarity="H",this.name="Leyline Demon",this.iAttack=this.lValN([3,9,14]),this.iHealth=this.iAttack+2,this.tribe.push("DM"),this.text="Ambush: When the enemy player plays a card, if it is their third card played that turn, "+this.ambT(),this.t=this.demT}demT(t){return t.event.code==="PLC"?t.owner!==t.event.playerA&&G.cardsPlayed===3:!1}golC(){this.faction="U",this.rarity="H",this.name="Leyline Golem",this.iAttack=this.lValN([5,12,18]),this.iHealth=this.iAttack-(this.level+1),this.tribe.push("GL"),this.text="Ambush: When an enemy creature moves on the enemy player's turn, "+this.ambT(),this.t=this.golT}golT(t){if(t.event.code==="MOV"){const i=W.toCreature(t.event);return t.owner!==i.creature.owner&&T.activeA===i.creature.owner}else return!1}senC(){this.faction="A",this.rarity="H",this.name="Leyline Sentry",this.iAttack=this.lValN([2,7,9]),this.iHealth=this.iAttack+this.level+5,this.tribe.push("RB"),this.text="Ambush: When an enemy creature enters play on the enemy player's turn, if it wasn't Forged, "+this.ambT(),this.t=this.senT}senT(t){if(t.event.code==="ENT"){const i=W.toEnterField(t.event);return t.owner!==i.creature.owner&&T.activeA===i.creature.owner&&!i.forged}else return!1}tyrC(){this.faction="T",this.rarity="H",this.name="Leyline Tyrant",this.iAttack=this.lValN([6,12,17]),this.iHealth=this.iAttack-2,this.tribe.push("GT"),this.text="Ambush: When an enemy player gains health on their turn, "+this.ambT(),this.t=this.tyrT}tyrT(t){return t.event.code==="PHL"?t.owner!==t.event.playerA&&T.activeA===t.event.playerA:!1}verC(){this.faction="U",this.rarity="H",this.name="Leyline Vermin",this.iAttack=this.boof61218,this.iHealth=this.boof358,this.tribe.push("IN"),this.text="Ambush: When an enemy creature with Poison is destroyed on the enemy player's turn, "+this.ambT(),this.t=this.verT}verT(t){if(t.event.code==="DIE"){const i=W.toCreature(t.event);return t.owner!==i.creature.owner&&T.activeA===i.creature.owner&&i.creature.poison>0}else return!1}}class Gr extends E{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Apocrymancer",this.iAttack=this.boof3713,this.iHealth=this.iAttack+3,this.tribe.push("HM"),this.text="When you play an Alloyin spell, you may discard and level up a card."}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("PC");return n.bonus=this.bonNug(.5,"TW"),n.interactive=!0,r}handleAction(t){G.levelAndDiscardA(t),this.anim8(t.param),S.actionDone(!0)}ddf8(t){if(t.event.playerA===t.owner){const i=O.getCard(t.event.cardCode);if(i.type==="S"&&i.faction==="A")return!0}return!1}jr8(t){const i=b.lvlHandActTarg(this.code,t.creatId),r=D.toActions([i,D.buttonTarget("NOTR")]);r.length>1?S.ddf5(r):H.triggerDone()}}class Ir extends E{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Arboris, Grove Dragon",this.iAttack=this.lValN([5,9,20]),this.iHealth=this.iAttack,this.tribe.push("DG");const i=this.boof;this.text=`While you have over 120 health, Arboris gets ${y.jr9(i,i)}.`}jr3(t,i){const r=super.jr3(t,i);return r.addEffect("PH",this.code),r}enforceEffect(t){if(T.toPlayer(t.owner).health>120&&t.status==="A"){const r=this.boof;t.addModSafe(b.mod("HL",r,t.id)),t.addModSafe(b.mod("MH",r,t.id)),t.addModSafe(b.mod("AT",r,t.id))}else t.removeModSafe(t.id)}get boof(){return this.lValN([4,8,80])}}class Wr extends E{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Ash Maiden",this.iAttack=this.boof368,this.iHealth=this.iAttack*2,this.tribe.push("HM"),this.text=`When a friendly creature ${y.dbdtap()}, it gets ${y.jr9(this.level,this.level)}.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("DM");return n.bonus=this.buffNug(this.level,this.level,"TP"),r}ddf8(t){const i=W.toDamage(t.event);return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcCreat.owner===t.owner}jr8(t){const i=W.toDamage(t.event);this.logAct(!1,i.srcCreat),this.buffD(i.srcCreat,this.level),H.triggerDone()}}class hi extends E{constructor(t){super(t),this.rarity="H",this.iAttack=this.level+2,this.iHealth=this.iAttack;const i=this.cardCode();i==="SFA"?this.steel():i==="RFA"?this.root():i==="HFA"?this.hell():i==="SGA"&&this.storm(),this.text=`Forge: ${this.name} gets ${y.jr9(this.level,this.level)} for each ${y.factionText(this.faction)} card in your hand.`}hell(){this.faction="N",this.name="Hellforged Avatar",this.iRegen=this.level,this.tribe.push("AB")}root(){this.faction="U",this.name="Rootforged Avatar",this.iBT=!0,this.tribe.push("HM")}steel(){this.faction="A",this.name="Steelforged Avatar",this.iArmor=this.level,this.tribe.push("CY")}storm(){this.faction="T",this.name="Stormforged Avatar",this.iMobile=this.level,this.tribe.push("MT")}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}jr8(t){const i=b.target("TH");i.player=T.toTarget(t.owner),i.faction=this.faction;const r=D.deckByTarget(i).length;if(r>0){const n=W.toEnterField(t.event);this.buffD(n.creature,r*this.level)}H.triggerDone()}}class X extends E{imgKey="";cons(t){({["BOS"]:()=>this.fixedSapling(3),["COZ"]:()=>this.cooze(),["DFM"]:()=>this.dfmimic(),["DZA"]:()=>this.dozer(),["EWF"]:()=>this.woof(),["FWG"]:()=>this.feywing(),["FRH"]:()=>this.hulk(),["FUN"]:()=>this.funguy(),["POZ"]:()=>this.purpz(),["NSD"]:()=>this.fixedSeedling(1),["OOZ"]:()=>this.nooze(),["RPT"]:()=>this.raptor(),["SPL"]:()=>this.minion(),["SXP"]:()=>this.fixedSapling(5),["SXD"]:()=>this.fixedSeedling(3),["SXT"]:()=>this.fixedTreefolk(7),["SDL"]:()=>this.minion(),["SPN"]:()=>this.nekSpirit(),["SPU"]:()=>this.uspirit(),["XYR"]:()=>this.yuruSpirit(),["TFK"]:()=>this.minion(),["TFD"]:()=>this.fixedTreefolk(this.boof5714),["TFF"]:()=>this.tfFight(),["TTF"]:()=>this.fixedTreefolk(3),["ZTR"]:()=>this.zimus(),["ZBS"]:()=>this.threeZomb(),["ZST"]:()=>this.strideZomb(),["ZMB"]:()=>this.commonZomb()})[t]()}constructor(t){super(t),this.rarity="T";const i=this.cardCode();this.imgKey=i,this.minLevel=this.level,this.maxLevel=this.level,this.cons(this.cardCode())}image(t){return this.rawImage(this.imgKey,t)}static fgoc(t){return "FGO"+t}fixedNekSpirit(t){this.faction="N",this.name="Spirit",this.tribe.push("ST"),this.iAttack=t,this.iHealth=t,this.imgKey=`${"SPN"}${this.level}`}nekSpirit(){this.fixedNekSpirit(this.boof51015)}yuruSpirit(){this.fixedNekSpirit(this.boof5814)}static purpOzC(t){return "POZ"+t}oozer(t){this.faction="N",this.name="Oozeling",this.tribe.push("OZ"),this.iHealth=this.iAttack,this.imgKey=t?"POZ":"OOZ"}purpz(){this.iAttack=this.boof135,this.oozer(!0)}nooze(){this.iAttack=this.boof4711,this.oozer(!1)}cooze(){this.iAttack=1,this.oozer(!1),this.hints=["RT"]}minion(){this.iAttack=X.minionBuff(this.level),this.plont(),this.name=X.minionName(this.level),this.hints=["RT"]}static tffc(t){return "TFF"+t}static minionCode(t){return(t===1?"SDL":t===2?"SPL":"TFK")+t}static minionName(t){return t===1?"Seedling":t===2?"Sapling":"Treefolk"}static minionBuff(t){return t===1?1:t===2?3:5}plont(){this.faction="U",this.iHealth=this.iAttack,this.tribe.push("PL")}fixedSapling(t){this.iAttack=t,this.plont(),this.name=X.minionName(2),this.imgKey="SPL"}fixedSeedling(t){this.iAttack=t,this.plont(),this.name=X.minionName(1),this.imgKey="SDL",this.hints=["RT"]}fixedTreefolk(t){this.iAttack=t,this.plont(),this.name=X.minionName(3),this.imgKey="TFK"}tfFight(){this.iAttack=this.boof91421,this.plont(),this.name=X.minionName(3),this.imgKey="TFK"}static bee(t){return "KBE"+t}dfmimic(){this.faction="U",this.name="Darkforged Mimic",this.tribe.push("DF","PL"),this.iHealth=this.boof3711,this.iAttack=this.iHealth-1,this.imgKey="SSP"+this.level}dozer(){this.faction="U",this.name="Dozer, the Awakened",this.iAttack=this.level*3+6,this.iHealth=this.iAttack,this.iAggro=!0,this.iBT=!0,this.tribe.push("BR"),this.imgKey=this.code,this.text=`${this.name} enters play with health equal to the Dozer, the Dormant it replaced.`}feywing(){this.faction="U",this.name="Feywing",this.iAttack=9,this.iHealth=9,this.iMobile=1,this.tribe.push("DG")}funguy(){this.name="Funguy",this.iAttack=this.lValN([6,12,14]),this.plont(),this.minLevel=1,this.maxLevel=3,this.level===1?this.hints=["ZZ-1"]:this.level===2&&(this.hints=["LB"])}raptor(){this.faction="U",this.name="Raptor",this.iAttack=1,this.iHealth=1,this.tribe.push("DN"),this.hints=["RT"]}uspirit(){this.faction="U",this.name="Spirit",this.iAttack=this.boof4610,this.iHealth=this.boof346,this.tribe.push("ST")}woof(){this.faction="U",this.name="Ether Wolf",this.tribe.push("ST","WF"),this.iHealth=5,this.iAttack=6,this.imgKey="EWV"}static zomc(t){return "ZMB"+t}zimus(){this.faction="N",this.name="Zimus, the Returned",this.tribe.push("ZB"),this.iAttack=10,this.iHealth=5,this.imgKey=`${"ZTU"}2`}zomb(t,i){this.faction="N",this.name="Zombie",this.tribe.push("ZB"),this.iAttack=t,this.iHealth=i,this.imgKey="ZMB"}commonZomb(){const t=this.boof359;this.zomb(t,t)}threeZomb(){this.zomb(3,3)}strideZomb(){this.zomb(this.boof4810,this.boof369)}hulk(){this.faction="T",this.name="Frost Hulk",this.iAttack=9,this.iHealth=9,this.tribe.push("IC","EL")}}class dt extends kt{cons(t){({["AGP"]:()=>this.apulseC(),["ABE"]:()=>this.edicC(),["CTL"]:()=>this.ctlC(),["CCC"]:()=>this.ccalC(),["COD"]:()=>this.chontC(),["CEX"]:()=>this.cypeC(),["DCR"]:()=>this.dcurC(),["DFS"]:()=>this.defsC(),["DGZ"]:()=>this.digiC(),["EPD"]:()=>this.epiC(),["EWV"]:()=>this.ewolC(),["FRR"]:()=>this.roarC(),["FSM"]:()=>this.fstormC(),["GRM"]:()=>this.mealC(),["IBF"]:()=>this.ibfC(),["IVS"]:()=>this.infvC(),["LOD"]:()=>this.lashC(),["NSH"]:()=>this.shriekC(),["NCL"]:()=>this.noxC(),["OWF"]:()=>this.oforceC(),["PLW"]:()=>this.palwC(),["PHC"]:()=>this.pcallC(),["PTB"]:()=>this.phyC(),["PYS"]:()=>this.pyreC(),["ROK"]:()=>this.rokC(),["ROU"]:()=>this.riteC(),["ROE"]:()=>this.roteC(),["STS"]:()=>this.stsC(),["SNP"]:()=>this.pulseC(),["SRD"]:()=>this.sradC(),["SIV"]:()=>this.beesC(),["TST"]:()=>this.talinC(),["TRN"]:()=>this.turnbC(),["VCH"]:()=>this.verdC(),["WOD"]:()=>this.wdenC(),["WPC"]:()=>this.wipeC()})[t]()}constructor(t){super(t),this.cons(this.cardCode())}t;z;image(t){const i=this.cardCode();return i==="NSH"||i==="PHC"?this.leveledImage(t):this.fixedImage(t)}canPlay(){return this.t()}playTargets(){return[D.boardTarget("CARD",this.code)]}handleAction(t){this.logSpell(),this.z(),S.spellCast()}acT(){return m.qActiveCreats().length>0}aoT(){return m.qActiveCreats().length<10}ecT(){return m.qEnemyCreats().length>0}fcT(){return m.ddf1().length>0}foT(){return m.ddf1().length<5}tpytar(){const t=b.crFriendTarg();return t.faction="T",m.creatByTarget(t)}apulseC(){this.faction="A",this.rarity="C",this.name="Aegis Pulse",this.text=`Each friendly creature gets Armor ${this.boof234}.`,this.t=this.fcT,this.z=this.apulseZ}apulseZ(){const t=this.boof234;m.ddf1().forEach(i=>{i.addArmor(t)})}aeSides(){return[m.qPlayerCreats(!0),m.qPlayerCreats(!1)]}edicC(){this.faction="A",this.rarity="H",this.name="Ambriel's Edict",this.maxLevel=1,this.overload=!0,this.text="If each player has at least one creature in play, destroy all but the highest attack creature that each player controls.~Then discard you hand.",this.t=this.edicT,this.z=this.edicZ}edicT(){return this.aeSides().every(t=>t.length>0)}edicZ(){const t=this.aeSides(),i=R.tick();let r=[];t.forEach(p=>{if(p.length>1){let v=[],w=-999999;p.forEach(x=>{x.attack>w?(w=x.attack,r.push(...v),v=[x]):x.attack===w?v.push(x):r.push(x)}),v.length>1&&(v.splice(k.randInt(0,v.length),1),r.push(...v))}}),r.forEach(p=>this.kill(p,i));const n=T.getActive(),c=S.playPosition(),f=n.hand.length;for(let p=f-1;p>-1;p--)p!==c&&(xt.cardDiscard(n,p),S.shiftPlayCard(p))}get ctlboof(){return(this.level-1)*2}ctlC(){this.faction="T",this.rarity="L",this.name="Call the Lightning";const t=this.level>1?` gets ${y.jr9(this.ctlboof,0)} this turn. Those creatures`:"";this.text=`Each friendly creature${t} battles an additional time this turn.`,this.t=this.fcT,this.z=this.ctlZ}ctlZ(){const t=this.ctlboof;m.ddf1().forEach(i=>{this.modA(i,b.modT("AT",t)),this.wrang(i)})}ccalC(){this.faction="N",this.rarity="H",this.name="Cercee's Call",this.maxLevel=2,this.free=this.level===2,this.text="Spawn a copy of a friendly Zombie that was destroyed this turn.",this.t=this.ccalT,this.z=this.ccalZ}ccalZ(){const t=this.ccz(),i=t.length;i>0&&this.spawn(t[k.randInt(0,i)],T.activeA)}ccalT(){return this.ccz().length>0}ccz(){return(T.activeA?G.deathsA:G.deathsB).filter(i=>{const r=O.getCard(i);return r.type==="C"&&r.isTribe("ZB")})}chontC(){this.faction="T",this.rarity="R",this.name="Chant of Dragonwatch",this.maxLevel=1,this.text="Deal X damage to each enemy creature, where X is your rank.",this.t=this.ecT,this.z=this.chontZ}chontZ(){const t=T.getActive().rank,i=R.tick();m.qEnemyCreats().forEach(r=>{this.smack(r,t,i)})}cypeC(){this.faction="A",this.rarity="H",this.name="Cypien Experimentation";const t=this.boof5610;this.text=`Give a random friendly creature ${y.jr9(t,0)}. Give a random friendly creature Armor ${t}`,this.t=this.fcT,this.z=this.cypeZ}cypeZ(){const t=m.ddf1(),i=t.length;if(i>0){const r=this.boof5610,n=t[k.randInt(0,i)],c=t[k.randInt(0,i)];this.logAct(!1,n,c),this.buffA(n,r),c.addArmor(r)}}dcurC(){this.faction="N",this.rarity="R",this.name="Death Current";const t=this.lValS(["a level 2 or lower","an","two"]);this.text=`Destroy ${t} enemy creature at random.`,this.t=this.dcurT,this.z=this.dcurZ}dcurZ(){const t=this.dctargs(),i=t.length;if(i>0){const r=k.randInt(0,i),n=R.tick();this.kill(t[r],n),this.level===3&&i>1&&(t.splice(r,1),this.kill(t[k.randInt(0,i-1)],n))}}dcurT(){return this.dctargs().length>0}dctargs(){const t=b.crEnemyTarg();return t.level=D.ddf2(this.level+1),m.creatByTarget(t)}defsC(){this.faction="A",this.rarity="C",this.name="Defense Spire",this.overload=!0,this.maxLevel=1,this.text="Each friendly creature gets Armor 6 this turn.",this.t=this.fcT,this.z=this.defsZ}defsZ(){m.ddf1().forEach(t=>{this.modA(t,b.modT("AR",6))})}digiC(){this.faction="A",this.rarity="R",this.name="Digitize",this.text=`Each enemy creature gets ${y.jr9(this.boof4812n,0)} this turn.`,this.t=this.ecT,this.z=this.digiZ}digiZ(){const t=this.boof4812n;m.qEnemyCreats().forEach(i=>{this.modA(i,b.modT("AT",t))})}epiC(){this.faction="N",this.rarity="H",this.name="Epidemic";const t=this.boof246n;this.text=`Each enemy creature gets ${y.jr9(t,t)}.`,this.t=this.ecT,this.z=this.epiZ}epiZ(){const t=this.boof246n,i=b.crEnemyTarg();m.creatByTarget(i).forEach(r=>{this.buffD(r,t)})}ewolC(){this.faction="U",this.rarity="C",this.name="Ether Wolves",this.maxLevel=1,this.overload=!0,this.hints=["ZZ-3"],this.text="Spawn two Ether Wolves.",this.t=this.foT,this.z=this.ewolZ}ewolZ(){const t=R.tick(),i="EWF"+"1",r=T.activeA;this.spawn(i,r,t),this.spawn(i,r,t)}roarC(){this.faction="U",this.rarity="H",this.name="Ferocious Roar";const t=this.boof235;this.text=`Each friendly creature gets ${y.jr9(t,t,this.level===3)}${this.level===3?", and Breakthrough":""}.`,this.t=this.fcT,this.z=this.roarZ}roarZ(){const t=this.boof235;m.ddf1().forEach(i=>{this.buffD(i,t),this.level===3&&(i.breakthrough=!0)})}get fszap(){return this.level+4}fstormC(){this.faction="T",this.rarity="H",this.name="Firestorm",this.text=`Deal ${this.fszap} damage to each creature.`,this.t=this.acT,this.z=this.fstormZ}fstormZ(){const t=this.fszap,i=R.tick();m.qActiveCreats().forEach(r=>{this.smack(r,t,i)})}mealC(){this.faction="N",this.rarity="R",this.name="Group Meal";const t=this.boof234;this.text=`Each enemy creature gets ${y.jr9(-1*t,0)}. Each friendly creature gets ${y.jr9(t,0)}.`,this.t=this.acT,this.z=this.mealZ}mealZ(){const t=this.boof234,i=T.activeA;m.qActiveCreats().forEach(r=>{const n=r.owner===i?t:-1*t;this.buffA(r,n)})}ibfC(){this.faction="T",this.rarity="R",this.name="Iceborn Fortitude",this.text=`Each friendly creature gets ${y.jr9(0,this.boof3510)}.`,this.t=this.fcT,this.z=this.ibfZ}ibfZ(){const t=this.boof3510,i=b.crFriendTarg();m.creatByTarget(i).forEach(r=>{this.buffH(r,t)})}infvC(){this.faction="N",this.rarity="C",this.name="Infernal Visage";const t=this.boof246;this.text=`Each friendly creature in a side lane gets ${y.jr9(t,t,!0)} and Regenerate ${this.level}.`,this.t=this.infvT,this.z=this.infvZ}infvZ(){const t=this.boof246;this.ivt().forEach(i=>{this.buffD(i,t),this.regn(i,this.level)})}infvT(){return this.ivt().length>0}ivt(){const t=b.crFriendTarg();return t.lanes=[1,5],m.creatByTarget(t)}lashC(){this.faction="U",this.rarity="L",this.name="Lash of Demara",this.text=`Each enemy creature gets Poison ${this.level+2}.`,this.t=this.ecT,this.z=this.lashZ}lashZ(){const t=this.level+2;m.qEnemyCreats().forEach(i=>{i.addPoison(t)})}shriekC(){this.faction="N",this.rarity="L",this.name="Nethershriek";const t=O.getCard(this.ndc());this.text=`Spawn a ${y.tokName(t)}.`,this.t=this.foT,this.z=this.shriekZ}shriekZ(){this.spawn(this.ndc(),T.activeA)}ndc(){return "NDR"+this.level}noxC(){this.faction="U",this.rarity="R",this.name="Noxious Cloud",this.text=`Each enemy creature gets Poison ${this.boof246}.`,this.t=this.ecT,this.z=this.noxZ}noxZ(){const t=this.boof246;m.qEnemyCreats().forEach(i=>{i.addPoison(t)})}oforceC(){this.faction="A",this.rarity="H",this.name="Overwhelming Force",this.text="Each friendly creature gets "+(this.level===3?"2x attack.":`${y.jr9(this.boof369,0)}.`),this.t=this.fcT,this.z=this.oforceZ}oforceZ(){if(this.level===3)m.ddf1().forEach(t=>{this.buffA(t,t.attack)});else{const t=this.boof369;m.ddf1().forEach(i=>{this.buffA(i,t)})}}palwC(){this.faction="A",this.rarity="R",this.name="Palladium Wave",this.maxLevel=1,this.text=`Each enemy creature gets ${y.jr9(-1,0).replaceAll("1","X")}, where X is two times your rank.`,this.t=this.ecT,this.z=this.palwZ}palwZ(){const t=-2*T.getActive().rank;m.qEnemyCreats().forEach(i=>{this.buffA(i,t)})}pcallC(){this.faction="T",this.rarity="L",this.name="Phoenix Call";const t=O.getCard(this.cpc());this.text=`Spawn a ${y.tokName(t)}.`,this.t=this.foT,this.z=this.pcallZ}pcallZ(){this.spawn(this.cpc(),T.activeA)}cpc(){return "CYP"+this.level}phyC(){this.faction="U",this.rarity="H",this.name="Phytobomb";const t=O.getCard(X.minionCode(this.level));this.text=`Put a ${y.tokName(t)} into each players available lanes.`,this.t=this.aoT,this.z=this.phyZ}phyZ(){const t=X.minionCode(this.level),i=R.tick();[!0,!1].forEach(r=>{m.emptyLanes(r).forEach(n=>{this.poot(t,r,n,i)})})}pyreC(){this.faction="T",this.rarity="C",this.name="Pyre Song",this.text=`Each friendly creature deals ${this.level} damage to each enemy creature.`,this.t=this.edicT,this.z=this.pyreZ}pyreZ(){const t=this.level,i=R.tick(),r=m.qEnemyCreats();m.ddf1().forEach(n=>{r.forEach(c=>{this.smack(c,t,i)})})}rokC(){this.faction="T",this.rarity="L",this.name="Rage of Kadras",this.overload=!0,this.maxLevel=1,this.text="Each friendly Tempys creature gets +1 attack and deals damage equal to its attack to the creature opposing it.",this.t=this.talinT,this.z=this.rokZ}rokZ(){const t=R.tick();this.tpytar().forEach(i=>{this.buffA(i,1);const r=i.opposed;r&&r.hurtDirect(i.attack,i.code,this.faction,t)})}riteC(){this.faction="N",this.rarity="C",this.name="Rite of Undeath",this.text=`Each friendly creature gets Regenerate ${this.boof468}.`,this.t=this.fcT,this.z=this.riteZ}riteZ(){const t=this.boof468;m.ddf1().forEach(i=>{this.regn(i,t)})}roteC(){this.faction="T",this.rarity="H",this.name="Ritual of the Elements",this.maxLevel=1,this.hints=["ZZ-1"],this.text="Spawn a Lava Golem, Frost Hulk, or Lightning Titan at random.",this.t=this.foT,this.z=this.roteZ}roteZ(){const t=["FRH"+"1","LVG"+"1","LTT"+"1"];this.spawn(t[k.randInt(0,3)],T.activeA)}stsC(){this.faction="U",this.rarity="C",this.name="Scatter the Seeds";const t=O.getCard(X.minionCode(this.level));this.text=`Spawn three ${y.tokName(t)}s.`,this.t=this.foT,this.z=this.stsZ}stsZ(){const t=X.minionCode(this.level),i=R.tick();[1,2,3].forEach(r=>{this.spawn(t,T.activeA,i)})}get spboof(){return(this.level+1)*-2}pulseC(){this.faction="A",this.rarity="H",this.name="Sonic Pulse",this.text=`Each enemy creature gets ${y.jr9(this.spboof,0)}.`,this.t=this.ecT,this.z=this.pulseZ}pulseZ(){const t=this.spboof;m.qEnemyCreats().forEach(i=>{this.buffA(i,t)})}sradC(){this.faction="U",this.rarity="C",this.name="Soothing Radiance",this.text=`Heal ${this.boof61224} damage from each friendly creature.`,this.t=this.fcT,this.z=this.sradZ}sradZ(){const t=this.boof61224;m.ddf1().forEach(i=>{i.heal(t)})}beesC(){this.faction="U",this.rarity="H",this.name="Stinging Invocation";const t=O.getCard(X.bee(this.level));this.text=`Spawn one to three ${y.tokName(t)}s.`,this.t=this.foT,this.z=this.beesZ}beesZ(){const t=X.bee(this.level),i=R.tick(),r=k.randInt(2,5);[1,2,3].every(n=>n<r?(this.spawn(t,T.activeA,i),!0):!1)}talinC(){this.faction="T",this.rarity="C",this.name="Talin Stampede",this.text=`Each friendly Tempys creature gets ${y.jr9(this.boof5814,0)} this turn.`,this.t=this.talinT,this.z=this.talinZ}talinZ(){const t=this.boof5814;this.tpytar().forEach(i=>{this.modA(i,b.modT("AT",t))})}talinT(){return this.tpytar().length>0}turnbC(){this.faction="T",this.rarity="H",this.name="Turnabout",this.free=this.level===3;const t=this.boof235;this.text=`Each creature gets ${y.jr9(t,-1*t)} this turn.`,this.t=this.acT,this.z=this.turnbZ}turnbZ(){const t=this.boof235,i=-1*t;m.qActiveCreats().forEach(r=>{this.modA(r,b.modT("AT",t)),this.modA(r,b.modT("HL",i)),this.modA(r,b.modT("MH",i))})}verdC(){this.faction="U",this.rarity="H",this.name="Verdant Charge";const t=this.verdb;this.text=`Each friendly creature gets ${y.jr9(t,t,!0)} and Regenerate ${t}.`,this.t=this.fcT,this.z=this.verdZ}verdZ(){const t=this.verdb;m.ddf1().forEach(i=>{this.buffD(i,t),this.regn(i,t)})}get verdb(){return this.lValN([1,3,6])}wdenC(){this.faction="U",this.rarity="R",this.name="Whispers of Dendris",this.maxLevel=1,this.text=`Each friendly creature gets ${y.jr9(1,1).replaceAll("1","X")}, where X is your rank.`,this.t=this.fcT,this.z=this.wdenZ}wdenZ(){const t=T.getActive().rank;m.ddf1().forEach(i=>{this.buffD(i,t)})}wipeC(){this.faction="A",this.rarity="H",this.name="Wipe Clean",this.overload=!0,this.maxLevel=1,this.text="Remove all abilities from each creature and player.",this.t=()=>!0,this.z=this.wipeZ}wipeZ(){[!0,!1].forEach(i=>{const r=T.toPlayer(i);r.effects=[],r.mods=[],r.triggers=r.triggers.filter(n=>n.customCode==="AB"||n.type==="NT"),r.poison=0,r.armor=0});const t=m.qActiveCreats();t.forEach(i=>{i.preWipe()}),t.forEach(i=>{i.wipeAll()})}}class Or extends E{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Borean Mystic",this.iAttack=this.boof4814,this.iHealth=this.boof71118,this.tribe.push("WN","AS"),this.text=`Activate: Move another friendly creature to an available lane adjacent to ${this.name}.`,this.bonus=this.bonNug(.5,"TW")}canActivate(t){return this.emptySloots(t).length>0&&this.buddies(t.id).length>0}startActivation(t){const i=this.buddies(t.id);i.push(S.cancelAction()),S.ddf5(i)}handleAction(t){const i=k.deTil(t.param);if(i[0]==="P1"){const r=this.emptySloots(m.jr5(i[1]),m.ddf6(t).id);r.push(S.cancelAction()),S.ddf5(r)}else{const r=m.jr5(i[2]);this.logAct(!0,r),this.lurk(r,t.lane),m.jr5(i[1]).endActivation()}}emptySloots(t,i=""){return S.emptyAdjacents(t,k.enTil("P2",t.id,i))}buddies(t){return D.toActions(b.crFriendNotMeActTarg("CARD",t,this.code,k.enTil("P1",t)))}}class $r extends E{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Bron, Wild Tamer",this.iAttack=this.boof4712,this.iHealth=this.iAttack,this.tribe.push("TK"),this.hints=["RD"];const i=this.boof357;this.text=`Upgrade Dinosaur: Replace Bron with a level ${this.level} Dino Knight.~When this ${y.dbdtap()}, heal ${i} damage from each other friendly creature.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("UP");const n=r.jr4("DM");return n.bonus=this.buffNug(0,this.boof357,"TP"),r}ddf8(t){return t.event.battle&&!t.event.isCreatTarg&&t.event.isCreatSrc&&t.event.srcId===t.creatId}jr8(t){if(t.trigger.type==="UP"){const r=W.toReplaced(t.event).replCreat;r.isTribe("DN")&&this.replc("DNK"+this.level,r.owner,r.lane)}else if(t.trigger.type==="DM"){const i=this.boof357,r=b.crNotMeTarg(t.creatId);r.player=T.toTarget(t.owner),m.creatByTarget(r).forEach(c=>c.heal(i))}H.triggerDone()}}class Ur extends E{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Brightsteel Gargoyle",this.iAttack=this.boof61016,this.iHealth=this.iAttack,this.iMobile=1,this.tribe.push("RB"),this.text=`At the end of your turn, ${this.name} gets Armor ${this.boof2510} and Defender until the end of the next turn.`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("PT"),r}ddf8(t){return t.event.playerA===t.owner}jr8(t){const i=m.creatByTr(t);this.modA(i,b.modT("AR",this.boof2510)),this.modA(i,b.modT("DF",!0)),H.triggerDone()}}class Vr extends kt{constructor(t){super(t),this.faction="A",this.rarity="R",this.name="Bulwark Bash",this.text=`Deal damage equal to ${this.level>1?this.level+"x ":""}the Armor on a friendly creature to an enemy creature.`}firstT(){if(this.enemyTargActions().length>0){const t=b.crFriendActTarg("CARD",this.code,"P1");return t.hasArmor=!0,t}else return}playTargets(){return[this.firstT()]}canPlay(){const t=this.firstT();return t?m.creatByTarget(t).length>0:!1}handleAction(t){const i=k.deTil(t.param);if(i[0]==="P1"){const r=this.enemyTargActions(m.ddf6(t).id);r.push(S.cancelAction()),S.ddf5(r)}else{const r=m.jr5(i[1]);this.logSpell(r),this.smack(m.ddf6(t),r.armor*this.level),S.spellCast()}}enemyTargActions(t=""){const i=b.crEnemyActTarg("CARD",this.code,k.enTil("P2",t));return D.toActions(i)}}class zr extends E{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Byzerak Spitemage",this.iAttack=this.boof369,this.iHealth=this.level,this.iAggro=!0,this.tribe.push("HM"),this.text=`Allied Nekrium: When ${this.name} ${y.dbdtac(this.level)}, destroy it.`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}ddf8(t){const i=W.toDamage(t.event);return i.battle&&i.isCreatSrc&&i.isCreatTarg&&i.srcId===t.creatId&&D.levelTestCommon(i.hurtCreat.level,this.level)}jr8(t){if(t.trigger.type==="FR"&&G.allied("N")){const i=m.creatByTr(t),r=i.jr4("DM");r.bonus=this.avgSpawnNug(),i.changed=!0,i.anim8("N")}else if(t.trigger.type==="DM"){const r=W.toDamage(t.event).hurtCreat;r.status==="A"&&Ft.destroy(r,this.code,"N")}H.triggerDone()}}class Zr extends E{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Cercee, Hand of Varna",this.iAttack=this.lValN([1,3,5,7]),this.iHealth=this.lValN([6,10,20,40]),this.tribe.push("FB"),this.hints=["ZZ-2"],this.iMobile=1,this.maxLevel=4;const i=this.level===4?`When ${this.name} ${y.dbdtap()}, deal damamge to that player equal to their health.~`:"";this.text=i+`When ${this.name} ${y.dbdtac(this.level)}, destroy that creature.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("DM");return this.level===4?n.bonus=this.bonNug(5,"TP"):n.bonus=this.avgSpawnNug(),r}ddf8(t){const i=W.toDamage(t.event);if(i.battle&&i.isCreatSrc&&i.srcId===t.creatId){if(this.level===4)return!0;if(i.isCreatTarg){const r=i.hurtCreat;return D.levelTestCommon(r.level,this.level)}}return!1}jr8(t){const i=W.toDamage(t.event);if(i.isCreatTarg){const r=i.hurtCreat;r.status==="A"&&this.kill(r)}else this.ouch(i.hurtPlayer,i.hurtPlayer.health),this.anim8(i.srcCreat);H.triggerDone()}}class He extends kt{cons(t){({["ABL"]:()=>this.ablC(),["DYB"]:()=>this.drybC(),["FVA"]:()=>this.fervassC(),["ROG"]:()=>this.rotgC(),["SPG"]:()=>this.spgrC(),["TOB"]:()=>this.blightC(),["ULG"]:()=>this.ulegC(),["VOB"]:()=>this.vobC(),["WGE"]:()=>this.weguC()})[t]()}playTarg;xl=!0;constructor(t){super(t),this.playTarg=b.crActTarg("CARD",this.code,""),this.cons(this.cardCode())}z;canPlay(){return m.creatByTarget(this.playTarg).length>0}playTargets(){return[this.playTarg]}handleAction(t){const i=m.ddf6(t);this.logSpell(this.xl?i:void 0),this.z(i),S.spellCast()}ddf8(t){const i=Vt.extractCardCode(t.trigger.logicCode);if(i==="TOB"&&t.trigger.type==="DM"){const r=W.toDamage(t.event);if(r.battle&&r.isCreatTarg&&r.isCreatSrc&&r.srcId===t.creatId)return this.level===3?!0:O.getCard(r.hurtCreat.code).level<=this.level}else if((i==="ABL"||i==="VOB"||i==="WGE")&&t.trigger.type==="DM"){const r=t.event;return r.battle&&!r.isCreatTarg&&r.isCreatSrc&&r.srcId===t.creatId}else if(i==="DYB"&&t.trigger.type==="EF"){const r=W.toEnterField(t.event);return t.trigger.creatId!==r.creature.id&&r.creature.owner===t.owner}else{if(i==="SPG"&&t.trigger.type==="TS")return t.event.playerA===t.owner;if(i==="ROG"&&t.trigger.type==="DS"||i==="WGE"&&t.trigger.type==="PT"||i==="ULG"&&t.trigger.type==="VN"||i==="FVA"&&t.trigger.type==="FK")return!0}return!1}jr8(t){const i=Vt.extractCardCode(t.trigger.logicCode);if(i==="TOB"){const r=t.event,n=m.jr5(r.target);n.status==="A"&&this.kill(n)}else if(i==="FVA"){const r=m.creatByTr(t),n=m.searchByLane(m.oppositeLane(r.lane),!r.owner);n&&n.hurtDirect(this.boof3612,r.code,this.faction)}else if(i==="ROG"||i==="DYB"||i==="ABL"){const r=m.creatByTr(t);r.status==="A"&&(this.logAct(!1,r),r.buff(this.level,this.level,t.draw?this.faction:"X"))}else if(i==="VOB"){const r=W.toDamage(t.event);this.smack(r.srcCreat,r.dmg)}else if(i==="SPG"){const r=m.creatByTr(t);this.logAct(!1,r),this.buffD(r,this.boof246)}else if(i==="WGE"){if(t.trigger.type==="DM")this.balm(t.owner,t.event.dmg);else if(t.trigger.type==="PT"){const r=t.trigger.customCode,n=m.creatByTr(t);n.triggers.filter(f=>f.customCode===r).forEach(f=>n.removeTrigger(f))}}else if(i==="ULG"){const r=this.spawn(m.creatByTr(t).code,t.owner);r&&this.logAct(!1,r)}else super.jr8(t);H.triggerDone()}ablC(){this.faction="T",this.rarity="R",this.name="Asir's Blessing",this.text=`Give a creature "When this creature ${y.dbdtap()}, it gets ${y.jr9(this.level,this.level)}."`,this.playTarg.hint=["BF"],this.z=this.ablZ}ablZ(t){t.changed=!0;const i=t.jr4("DM",this.code);i.bonus=this.buffNug(this.level,this.level,"TP"),this.anim8(t)}drybC(){this.faction="U",this.rarity="R",this.name="Dryad's Boon",this.text=`Give a creature ${y.jr9(this.level,this.level,!0)}, and "When another friendly creature enters play, this gets ${y.jr9(this.level,this.level)}."`,this.playTarg.hint=["BF"],this.z=this.drybZ}drybZ(t){this.buffD(t,this.level),t.changed=!0;const i=t.jr4("EF",this.code);i.bonus=this.buffNug(this.level,this.level,"TS"),i.batch=!0}fervassC(){this.faction="T",this.rarity="H",this.name="Fervent Assault",this.playTarg.player="F",this.text=`Give a friendly creature Mobility ${this.level} and "Flank: Deal ${this.boof3612} damage to the opposing creature.`,this.z=this.fervassZ}fervassZ(t){t.changed=!0,this.wings(t,this.level);const i=t.jr4("FK",this.code);i.bonus=this.buffNug(this.boof3612,0)}rotgC(){this.faction="N",this.rarity="H",this.name="Rite of the Grimgaunt",this.playTarg.hint=["BF"],this.text=`Give a creature "When a creature is destroyed, this gets ${y.jr9(this.level,this.level)}."`,this.z=this.rotgZ}rotgZ(t){t.changed=!0;const i=t.jr4("DS",this.code);i.bonus=this.buffNug(this.level,this.level,"TS"),this.anim8(t)}spgrC(){this.faction="U",this.rarity="R",this.name="Shardplate Graft";const t=this.boof246;this.text=`Give a creature ${y.jr9(t,t,!0)}, and "At the start of your turn, this gets ${y.jr9(t,t)}."`,this.playTarg.hint=["BF"],this.z=this.spgrZ}spgrZ(t){const i=this.boof246;this.buffD(t,i),t.changed=!0;const r=t.jr4("TS",this.code);r.bonus=this.buffNug(i,i,"TS")}blightC(){this.faction="N",this.rarity="R",this.name="Touch Of Blight",this.text=`Give a creature "When this creature ${y.dbdtac(this.level)}, destroy that creature."`,this.playTarg.hint=["BF"],this.level<3&&(this.hints=["LG"]),this.z=this.blightZ}blightZ(t){t.changed=!0;const i=t.jr4("DM",this.code);i.bonus=this.avgSpawnNug(),this.anim8(t)}ulegC(){this.faction="N",this.rarity="H",this.name="Undying Legacy",this.text='Give a friendly creature "Vengeace: Spawn a copy of this."',this.playTarg.player="F",this.maxLevel=1,this.overload=!0,this.z=this.ulegZ}ulegZ(t){t.changed=!0;const i=t.jr4("VN",this.code),r=O.getCard(t.code);t.hints.push("ST"),i.bonus=this.spawnNug(r),this.anim8(t)}vobC(){this.faction="T",this.rarity="R",this.name="Violent Outburst",this.level===3?this.free=!0:this.hints=["LG"],this.text=`Give a ${y.levelGateText(this.level+1)}creature Aggressive and, "When this creature ${y.dbdtap()}, it also deals that much damage to itself."`,this.z=this.vobZ}vobZ(t){t.aggressive=!0;const i=t.jr4("DM",this.code);i.changes=!0,this.anim8(t)}weguC(){this.faction="U",this.rarity="H",this.name="Wegu's Embrace";const t=this.boof3510;this.text=`Give a friendly creature ${y.jr9(t,t)}, and "When this deals ${y.dbdtap()} this turn, you gain that much health."`,this.playTarg.player="F",this.z=this.weguZ}weguZ(t){const i=R.genId(),r=t.jr4("DM",this.code);r.changes=!0,r.customCode=i;const n=t.jr4("PT",this.code);n.customCode=i,this.buffD(t,this.boof3510)}}class At extends E{cons(t){({["ASQ"]:()=>this.asqC(),["BSW"]:()=>this.bswC(),["CCS"]:()=>this.ccsC(),["CGL"]:()=>this.clordC(),["CSH"]:()=>this.cswC(),["FFU"]:()=>this.ffuC(),["FFS"]:()=>this.ffsC(),["FSH"]:()=>this.fssC(),["KOD"]:()=>this.kodC(),["LOD"]:()=>this.lashC(),["MBP"]:()=>this.mbpC(),["MND"]:()=>this.mndC(),["NCS"]:()=>this.ncsC(),["NFF"]:()=>this.nffC(),["OHV"]:()=>this.orghC(),["PPM"]:()=>this.ppmC(),["PSC"]:()=>this.pcoilC(),["SGF"]:()=>this.siggyC(),["SRM"]:()=>this.srmdC(),["SFG"]:()=>this.sfgdC(),["SSA"]:()=>this.ssaC(),["SWM"]:()=>this.swmC(),["UCM"]:()=>this.ucmC(),["UIM"]:()=>this.uimC(),["WMR"]:()=>this.warmC(),["WWR"]:()=>this.wwrC(),["WFS"]:()=>this.wfsC(),["XSH"]:()=>this.shambC(),["ZPM"]:()=>this.zpmC()})[t]()}xl=!0;constructor(t){super(t),this.cons(this.cardCode())}t;a;jr3(t,i){const r=super.jr3(t,i);return this.doubleActivator()&&(r.jr4("TS"),this.addExtraActivate(r)),r}canActivate(t){return D.toActions(this.t(t)).length>0}startActivation(t){const i=D.toActions([this.t(t),D.buttonTarget("CANC")]);S.ddf5(i)}handleAction(t){const i=m.ddf6(t),r=m.jr5(t.param);this.logAct(!0,this.xl?i:void 0),this.a(i,r),r.endActivation()}crTarg(t){return b.crActTarg("CARD",this.code,t.id)}nmCrTarg(t){const i=this.crTarg(t);return i.notMe=t.id,i}doubleActivator(){return this.code==="CGL"+"3"||this.code==="XSH"+"3"}ddf8(t){return Vt.extractCardCode(t.trigger.logicCode)==="KOD"&&(t.trigger.type==="PT"||t.trigger.type==="VN")?!0:t.trigger.type==="TS"&&this.doubleActivator()?t.event.playerA===t.owner:super.ddf8(t)}jr8(t){if(t.trigger.type==="VN")this.spawn(m.jr5(t.event.creatId).code,t.owner),H.triggerDone();else if(t.trigger.type==="PT"){const i=t.trigger.customCode,r=m.creatByTr(t);r.triggers.filter(c=>c.customCode===i).forEach(c=>r.removeTrigger(c)),H.triggerDone()}else t.trigger.type==="TS"&&(this.addExtraActivate(m.creatByTr(t)),H.triggerDone())}asqC(){this.faction="N",this.rarity="L",this.name="Ariadne, Spider Queen",this.iAttack=this.boof3712,this.iHealth=this.boof81219,this.tribe.push("SP"),this.xl=!1,this.text="Activate, destroy a Web: Ariadne gets +attack and +health equal to the destroyed Web.";const t=this.avgCreatureStats();this.bonus=this.multNug(this.buffNug(t[0],t[1],"TS"),.7),this.t=this.asqT,this.a=this.asqA}asqT(t){const i=this.crTarg(t);return i.tribe="WB",i}asqA(t,i){this.buffB(i,t.attack,t.health),this.kill(t)}bswC(){this.faction="T",this.rarity="C",this.name="Borean Stormweaver",this.iAttack=this.boof4816,this.iHealth=this.lValN([6,10,20]),this.tribe.push("GT"),this.xl=!1;const t=this.boof234;this.text=`Activate: Deal ${t} damage to a creature.`,this.bonus=this.buffNug(0,t,"TX"),this.t=this.bswT,this.a=this.bswA}bswT(t){const i=this.crTarg(t);return i.hint=["HR"],i}bswA(t,i){this.smack(t,this.boof234)}ccsC(){this.faction="N",this.rarity="C",this.name="Catacomb Spider",this.iAttack=this.boof4815,this.iHealth=this.boof51016,this.tribe.push("SP");const t=this.boof246;this.text=`Activate:  Give another creature Regenerate ${t}.`,this.bonus=this.regnNug(t,"TW"),this.t=this.ccsT,this.a=this.ccsA}ccsT(t){const i=this.nmCrTarg(t);return i.canRegen=!0,i.hint=["BF"],i}ccsA(t,i){this.regn(t,this.boof246)}clordC(){this.faction="N",this.rarity="H",this.name="Contagion Lord",this.iAttack=this.boof4914,this.iHealth=this.iAttack+3,this.tribe.push("AB"),this.xl=!1,this.text="Activate, destroy a friendly Abomination: You may play an additional card this turn.",this.level===3&&(this.text+="~You may use this ability twice per turn."),this.bonus=this.multNug(this.avgSpawnNug(),.3),this.bonus.threat="TX",this.t=this.clordT,this.a=this.clordA}clordT(t){const i=this.crTarg(t);return i.player="F",i.tribe="AB",i}clordA(t,i){this.kill(t),G.freePlay(),this.anim8(i)}cswC(){this.faction="A",this.rarity="C",this.name="Cypien Shieldwarden",this.iAttack=this.boof4610,this.iHealth=this.boof61016,this.tribe.push("HM");const t=this.boof246;this.text=`Activate: Give a creature Armor ${t} this turn.`,this.bonus=this.regnNug(t,"TW"),this.t=this.cswT,this.a=this.cswA}cswT(t){const i=this.crTarg(t);return i.canArmor=!0,i.hint=["BF"],i}cswA(t,i){this.modA(t,b.modT("AR",this.boof246))}ffuC(){this.faction="T",this.rarity="H",this.name="Firefist Uranti",this.iAttack=this.boof357,this.iHealth=this.boof71116,this.tribe.push("FR","YT"),this.xl=!1,this.text=`Activate: Deal damage equal to ${this.name}'s attack to a creature.`,this.bonus=this.buffNug(0,this.iAttack,"TX"),this.t=this.ffuT,this.a=this.ffuA}ffuT(t){const i=this.crTarg(t);return i.hint=["HR"],t.attack<1&&(i.victims="???"),i}ffuA(t,i){this.smack(t,i.attack)}ffsC(){this.faction="T",this.rarity="R",this.name="Flamefury Shaman",this.iAttack=this.boof369,this.iHealth=this.boof81116,this.tribe.push("HM"),this.text=`Activate: Grant another creature ${y.jr9(this.iAttack,0)} this turn.`,this.bonus=this.buffNug(this.iAttack,0,"TW"),this.t=this.ffsT,this.a=this.ffsA}ffsT(t){const i=this.nmCrTarg(t);return i.hint=["BF"],i}ffsA(t,i){this.modA(t,b.modT("AT",this.iAttack))}fssC(){this.faction="T",this.rarity="R",this.name="Flamestoke Shaman",this.iAttack=this.boof61218,this.iHealth=this.boof3712,this.tribe.push("HM"),this.text=`Activate: Grant an adjacent ${y.levelGateText(this.level)}creature Aggressive.`,this.bonus=this.regnNug(1,"TX"),this.t=this.fssT,this.a=this.fssA}fssT(t){const i=this.crTarg(t);return i.level=D.ddf2(this.level),i.lanes=t.adjacent,i.player="F",i}fssA(t,i){t.aggressive=!0,this.anim8(t)}kodC(){this.faction="N",this.rarity="L",this.name="Keeper of the Damned",this.iAttack=this.boof5815,this.iHealth=this.boof61017,this.tribe.push("ZB"),this.text=`Activate: another friendly ${y.levelGateText(this.level)}creature gets "Vengeance: Spawn this" this turn.`,this.bonus=this.bonNug(.5,"TX"),this.t=this.kodT,this.a=this.kodA}kodT(t){const i=this.nmCrTarg(t);return i.level=D.ddf2(this.level),i.player="F",i}kodA(t,i){const r=t.jr4("VN",this.code);r.customCode=i.id,r.changes=!0;const n=t.jr4("PT",this.code);n.customCode=i.id,this.anim8(t)}lashC(){this.faction="U",this.rarity="L",this.name="Demara, Herald of Affliction",this.iAttack=14,this.iHealth=20,this.tribe.push("NG"),this.text="Activate: Give an enemy creature with Poison Defender.~Forge: Each enemy creature gets Poison 6.",this.bonus=this.bonNug(.1,"TW"),this.t=this.lashT,this.a=this.lashA}lashT(t){const i=this.crTarg(t);return i.player="E",i.hasPoison=!0,i.canDefender=!0,i}lashA(t,i){t.defender=!0,this.anim8(t)}mbpC(){this.faction="U",this.rarity="H",this.name="Mossbeard Patriarch",this.iAttack=this.boof137,this.iHealth=this.boof81220,this.tribe.push("PL");const t=this.boof468;this.text=`Activate: Give another creature ${y.jr9(0,t)}.`,this.bonus=this.buffNug(0,t,"TW"),this.t=this.mbpT,this.a=this.mbpA}mbpT(t){const i=this.nmCrTarg(t);return i.hint=["BF"],i}mbpA(t,i){this.buffH(t,this.boof468)}mndC(){this.faction="A",this.rarity="R",this.name="Munitions Drone",this.iAttack=this.boof137,this.iHealth=this.boof6814,this.tribe.push("RB");const t=this.boof357;this.text=`Activate: Give another creature ${y.jr9(t,0)}.`,this.bonus=this.buffNug(t,0,"TX"),this.t=this.mndT,this.a=this.mndA}mndT(t){const i=this.nmCrTarg(t);return i.hint=["BF"],i}mndA(t,i){this.buffA(t,this.boof357)}ncsC(){this.faction="N",this.rarity="R",this.name="Necroslime",this.iAttack=this.boof4814,this.iHealth=this.iAttack,this.tribe.push("OZ"),this.xl=!1;const t=this.boof248;this.text=`Activate, deal 3 damage to another friendly creature: ${this.name} gets ${y.jr9(t,t)}.`,this.bonus=this.buffNug(t,t-3,"TS"),this.t=this.ncsT,this.a=this.ncsA}ncsT(t){const i=this.nmCrTarg(t);return i.player="F",i}ncsA(t,i){this.smack(t,3),this.buffD(i,this.boof248)}nffC(){this.faction="U",this.rarity="L",this.name="Nuada, Faith's Flourish",this.iAttack=this.boof246,this.iHealth=this.lValN([10,17,25]),this.iDefend=!0,this.tribe.push("TK"),this.xl=!1,this.hints=[this.lValH(["ZZ-1","ZZ-2","ZZ-2"])];const t=O.getCard(X.tffc(this.level));this.text=`Activate: Replace a friendly Plant with a ${y.tokName(t)}.`,this.bonus=this.multNug(this.spawnNug(t,"TX"),.5),this.t=this.nffT,this.a=this.nffA}nffT(t){const i=this.crTarg(t);return i.player="F",i.tribe="PL",i}nffA(t,i){this.replc(X.tffc(this.level),i.owner,t.lane)}orghC(){this.faction="N",this.rarity="R",this.name="Organ Harvester",this.iAttack=this.lValN([2,6,9]),this.iHealth=this.iAttack+1,this.tribe.push("AB"),this.xl=!1,this.text=`Activate, destroy ${this.name}: Destroy a ${y.levelGateText(this.level)}creature.`,this.bonus=this.multNug(this.avgSpawnNug(),.4),this.bonus.threat="TX",this.t=this.orghT,this.a=this.orghA}orghT(t){const i=this.nmCrTarg(t);return i.level=D.ddf2(this.level),i.hint=["KL"],i}orghA(t,i){const r=R.tick();this.kill(t,r),this.kill(i,r)}ppmC(){this.faction="A",this.rarity="R",this.name="Palladium Pulsemage",this.iAttack=this.lValN([2,8,12]),this.iHealth=this.lValN([7,12,15]),this.tribe.push("HM"),this.text=`Activate: give a creature ${y.jr9(this.boof4812n,0)} this turn.`,this.bonus=this.buffNug(this.boof246,0,"TW"),this.t=this.ppmT,this.a=this.ppmA}ppmT(t){const i=this.crTarg(t);return i.hint=["DB","DF"],i}ppmA(t,i){this.modA(t,b.modT("AT",this.boof4812n))}pcoilC(){this.faction="U",this.rarity="R",this.name="Poisoncoil",this.iAttack=this.boof357,this.iHealth=this.boof71013,this.iDefend=!0,this.tribe.push("SN");const t=this.boof135;this.text=`Activate: Give another creature Poison ${t}.`,this.bonus=this.regnNug(t,"TX"),this.t=this.pcoilT,this.a=this.pcoilA}pcoilT(t){const i=this.nmCrTarg(t);return i.hint=["PN","DF"],i}pcoilA(t,i){t.addPoison(this.boof135)}siggyC(){this.faction="N",this.rarity="H",this.name="Sigmund Fraud",this.iAttack=this.boof357,this.iHealth=this.lValN([9,14,19]),this.iDefend=!0,this.tribe.push("AB"),this.xl=!1;const t=this.boof4812;this.text=`Activate, destroy another friendly creature: Deal ${t} damage to the enemy player and you gain ${t} health.`,this.bonus=this.playerNug(t/2,-t/2,"TW"),this.t=this.siggyT,this.a=this.siggyA}siggyT(t){const i=this.nmCrTarg(t);return i.player="F",i}siggyA(t,i){this.kill(t);const r=this.boof4812;this.ouch(!i.owner,r),this.balm(i.owner,r),this.anim8(i)}srmdC(){this.faction="N",this.rarity="H",this.name="Sorrow Maiden",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("HM"),this.xl=!1,this.text=`Activate: Destroy an enemy creature with ${this.iAttack} or less attack.`,this.bonus=this.multNug(this.avgSpawnNug(),.4),this.bonus.threat="TX",this.t=this.srmdT,this.a=this.srmdA}srmdT(t){const i=this.crTarg(t);return i.player="E",i.maxAttack=this.iAttack,i}srmdA(t,i){this.kill(t)}sfgdC(){this.faction="A",this.rarity="L",this.name="Sparky, Forge Guard Dog",this.iAttack=this.lValN([4,10,14]),this.iHealth=this.lValN([5,11,16]),this.tribe.push("RB","GD"),this.xl=!1;const t=this.lValS(["level 2 Sparky","level 3 Sparky","25/25 Forge Guardian Omega"]);this.text=`Activate, destroy Sparky and another friendly ${this.level===3?"level 3 ":""}Sparky: Spawn a ${t}.`,this.bonus=this.bonNug(this.level*.3,"TW"),this.t=this.sfgdT,this.a=this.sfgdA}sfgdT(t){const i=this.nmCrTarg(t);return i.cardCode="SFG",this.level===3&&(i.level="L3"),i}sfgdA(t,i){const r=R.tick();this.kill(t,r),this.kill(i,r);const n=this.lValS(["SFG"+"2","SFG"+"3","FGO"+"1"]);this.spawn(n,i.owner)}ssaC(){this.faction="N",this.rarity="H",this.name="Spitesower Acolyte",this.iAttack=this.boof234,this.iHealth=this.lValN([8,14,22]),this.tribe.push("HM");const t=this.boof246n;this.text=`Activate, deal ${-t} damage to ${this.name}: Give a creature ${y.jr9(t,t)}.`,this.bonus=this.buffNug(-t,0,"TX"),this.t=this.ssaT,this.a=this.ssaA}ssaT(t){const i=this.crTarg(t);return i.hint=["DB","BB"],i}ssaA(t,i){const r=this.boof246n,n=R.tick();this.smack(i,-r,n),this.buffD(t,r,n)}swmC(){this.faction="A",this.rarity="R",this.name="Steelwelder Medic",this.iAttack=this.lValN([3,5,13]),this.iHealth=this.boof61014,this.tribe.push("HM"),this.text=`Activate: Give another creature Armor ${this.level}.`,this.bonus=this.regnNug(this.level,"TW"),this.t=this.swmT,this.a=this.swmA}swmT(t){const i=this.nmCrTarg(t);return i.canArmor=!0,i.hint=["BF","BB"],i}swmA(t,i){t.addArmor(this.level)}ucmC(){this.faction="T",this.rarity="R",this.name="Uranti Cryomancer",this.iAttack=this.boof247,this.iHealth=this.lValN([8,13,17]),this.tribe.push("IC","YT"),this.xl=!1;const t=this.boof135;this.text=`Activate: Deal ${t} damage to a creature.`,this.bonus=this.buffNug(0,t,"TW"),this.t=this.ucmT,this.a=this.ucmA}ucmT(t){const i=this.crTarg(t);return i.hint=["HR"],i}ucmA(t,i){this.smack(t,this.boof135)}uimC(){this.faction="T",this.rarity="C",this.name="Uranti Icemage",this.iAttack=this.boof259,this.iHealth=this.lValN([8,13,20]),this.tribe.push("IC","YT"),this.text="Activate: Negate Defender from a creature this turn.",this.bonus=this.regnNug(1,"TW"),this.t=this.uimT,this.a=this.uimA}uimT(t){const i=this.crTarg(t);return i.hasDefender=!0,i.hint=["BB"],i}uimA(t,i){this.modA(t,b.modT("ND",!0))}warmC(){this.faction="A",this.rarity="H",this.name="War Merchant",this.iAttack=this.boof468,this.iHealth=this.iAttack,this.iDefend=!0,this.tribe.push("HM");const t=this.level===3?this.iAttack:0;this.text=`Activate: Give a creature in a center lane ${y.jr9(this.iAttack,t)}.`,this.bonus=this.multNug(this.buffNug(this.iAttack,t,"TX"),.5),this.t=this.warmT,this.a=this.warmA}warmT(t){const i=this.crTarg(t);return i.lanes=3,i.hint=["BF","BB"],i}warmA(t,i){this.buffB(t,this.iAttack,this.level===3?this.iAttack:0)}wwrC(){this.faction="U",this.rarity="C",this.name="Weirwood Ranger",this.iAttack=this.boof51015,this.iHealth=this.iAttack-1,this.tribe.push("HM"),this.text=`Activate: Give another creature ${y.jr9(this.level,this.level)}.`,this.bonus=this.buffNug(this.level,this.level,"TW"),this.t=this.wwrT,this.a=this.wwrA}wwrT(t){const i=this.nmCrTarg(t);return i.hint=["BF"],i}wwrA(t,i){this.buffD(t,this.level)}wfsC(){this.faction="N",this.rarity="H",this.name="Witherfrost Succubus",this.iAttack=this.boof147,this.iHealth=this.boof61018,this.tribe.push("DM");const t=this.boof357;this.text=`Activate: Give a creature ${y.jr9(-t,-t)} this turn.`,this.bonus=this.buffNug(t,t,"TX"),this.t=this.wfsT,this.a=this.wfsA}wfsT(t){const i=this.crTarg(t);return i.hint=["DB","DF"],i}wfsA(t,i){const r=-this.boof357;this.modA(t,b.modT("AT",r)),this.modA(t,b.modT("HL",r)),this.modA(t,b.modT("MH",r))}shambC(){this.faction="N",this.rarity="L",this.name="Xithian Shambler",this.iAttack=this.boof369,this.iHealth=this.iAttack+1,this.tribe.push("AB"),this.xl=!1;let t="";this.level===3&&(t="~You may use this ability twice per turn."),this.text=`Activate, destroy an adjacent creature: ${this.name} moves into that creature's lane, then gets +attack and +health equal to that creature's attack and health.${t}`,this.bonus=this.bonNug(this.lValN([.6,1.2,2.2]),"TS"),this.t=this.shambT,this.a=this.shambA}shambT(t){const i=b.crFriendActTarg("CARD",this.code,t.id);return i.lanes=t.adjacent,i}shambA(t,i){const r=t.attack,n=t.health;this.kill(t),this.lurk(i,t.lane),this.buffB(i,r,n)}zpmC(){this.faction="T",this.rarity="R",this.name="Zephyr Mage",this.iAttack=this.boof4813,this.iHealth=this.boof61017,this.tribe.push("WN","AS"),this.text=`Activate: Give another ${y.levelGateText(this.level)}creature Mobility ${this.level}.`,this.bonus=this.regnNug(this.level,"TW"),this.t=this.zpmT,this.a=this.zpmA}zpmT(t){const i=this.nmCrTarg(t);return i.level=D.ddf2(this.level),i.canMove=!0,i.hint=["BF","BB"],i}zpmA(t,i){this.wings(t,this.level)}}class Fi extends E{cons(t){({["CMF"]:()=>this.aconC(),["FLH"]:()=>this.flhC(),["TBB"]:()=>this.tbbC()})[t]()}playTarg;optional=!1;ftext="";constructor(t){super(t),this.playTarg=b.crActTarg("CARD",this.code,""),this.cons(this.cardCode()),this.text="Assault: "+this.ftext,this.ftext=""}f;jr3(t,i){const r=super.jr3(t,i),n=r.jr4("AS");return n.interactive=!0,r}handleAction(t){this.f(m.ddf6(t),m.jr5(t.param)),S.actionDone(!0)}jr8(t){const i=D.toActions(this.playTarg);i.length>0?(i.forEach(r=>{r.param=t.creatId}),this.optional&&i.push(S.noneEndTrigger()),S.ddf5(i)):H.triggerDone()}aconC(){this.faction="N",this.rarity="R",this.name="Calamity Fiend",this.iAttack=this.boof4814,this.iHealth=this.boof51016,this.tribe.push("DM");const t=-this.boof234;this.addSp("U",t),this.playTarg.player="E",this.ftext=`Give an enemy creature ${y.jr9(t,t)}.`,this.f=this.aconF}aconF(t,i){this.logAct(!1,t),this.buffD(t,-this.boof234)}flhC(){this.faction="T",this.rarity="C",this.name="Firelight Hunter",this.iAttack=this.boof468,this.iHealth=this.iAttack-2,this.tribe.push("HM"),this.playTarg.player="E",this.addSp("D",this.iAttack),this.ftext=`Deal ${this.iAttack} to an enemy creature.`,this.f=this.flhF}flhF(t,i){this.smack(t,this.iAttack)}tbbC(){this.faction="T",this.rarity="R",this.name="Totembound Berserker",this.iAttack=this.boof81318,this.iHealth=this.boof2410,this.tribe.push("GT"),this.playTarg.player="E",this.playTarg.level=D.ddf2(this.level),this.optional=!0,this.ftext=`You may move an enemy ${y.levelGateText(this.level)}creature to the space opposing ${this.name}.`,this.f=this.tbbF}tbbF(t,i){i.opposed||(this.logAct(!1,t),this.lurk(t,m.oppositeLane(i.lane)))}}class mt extends E{cons(t){({["ABM"]:()=>this.mawC(),["AGC"]:()=>this.aconC(),["BTI"]:()=>this.binvC(),["BSR"]:()=>this.bsrC(),["BAW"]:()=>this.bawC(),["CKB"]:()=>this.cacC(),["CHA"]:()=>this.chaC(),["CCR"]:()=>this.ccC(),["DRS"]:()=>this.drsC(),["DSE"]:()=>this.dseC(),["DSA"]:()=>this.dsaC(),["DGS"]:()=>this.drslC(),["FRI"]:()=>this.friC(),["FRV"]:()=>this.freavC(),["FLC"]:()=>this.flcC(),["GLF"]:()=>this.gfiendC(),["GRW"]:()=>this.grwC(),["GHT"]:()=>this.grhC(),["MMH"]:()=>this.houndC(),["MXW"]:()=>this.mtxC(),["NGB"]:()=>this.ngbC(),["POA"]:()=>this.poaC(),["PHS"]:()=>this.phxsC(),["RWD"]:()=>this.rotC(),["SHY"]:()=>this.schyC(),["STD"]:()=>this.stdC(),["SIX"]:()=>this.sdxC(),["SEV"]:()=>this.surzC(),["VNF"]:()=>this.vnfC(),["WBY"]:()=>this.wbyC(),["WBU"]:()=>this.wbuC(),["XDH"]:()=>this.dogsC()})[t]()}playTarg;optional=!1;notme=!1;ftext="";forges=!0;constructor(t){super(t),this.playTarg=b.crActTarg("CARD",this.code,""),this.cons(this.cardCode()),this.forges&&(this.text="Forge: "+this.ftext),this.ftext=""}f;jr3(t,i){const r=super.jr3(t,i);if(this.forges){const n=r.jr4("FR");n.interactive=!0}return r}ddf8(t){return Vt.extractCardCode(t.trigger.logicCode)==="CKB"}handleAction(t){this.f(m.ddf6(t),m.jr5(t.param)),S.actionDone(!0)}jr8(t){const i=this.cardCode();if(t.trigger.type==="TS"&&i==="CKB"){this.logAct(!1),G.freePlay();const n=t.event,c=T.toPlayer(n.playerA),f=b.trigIdx(c.triggers,t.trigger);f>-1&&c.triggers.splice(f,1),H.triggerDone();return}if(i==="ABM"){const n=b.crFriendNotMeTarg(t.creatId);if(n.tribe="AB",m.creatByTarget(n).length===0){H.triggerDone();return}}if(i==="POA"&&!G.patron("A")){H.triggerDone();return}if((i==="DRS"||i==="DSE"||i==="DSA")&&this.dfbuff(t.creatId)===0){H.triggerDone();return}this.notme&&(this.playTarg.notMe=t.creatId);const r=D.toActions(this.playTarg);r.length>0?(r.forEach(n=>{n.param=t.creatId}),this.optional&&r.push(S.noneEndTrigger()),S.ddf5(r)):H.triggerDone()}dfbuff(t){const i=b.crFriendNotMeTarg(t);return i.tribe="DF",this.boof234*m.creatByTarget(i).length}mawC(){this.faction="N",this.rarity="C",this.name="Abyssal Maw",this.iAttack=this.boof4610,this.iHealth=this.iAttack,this.tribe.push("AB"),this.playTarg.player="E";const t=-this.boof359;this.ftext=`If there is another friendly Abomination, give an enemy creature ${y.jr9(t,t)}.`,this.f=this.mawF}mawF(t,i){this.logAct(!1,t),this.buffD(t,-this.boof359)}aconC(){this.faction="A",this.rarity="C",this.name="Aegis Conscript",this.iAttack=this.boof3612,this.iHealth=this.boof6915,this.tribe.push("HM"),this.playTarg.canArmor=!0,this.playTarg.player="F",this.ftext=`Give a friendly creature Armor ${this.boof124}.`,this.f=this.aconF}aconF(t,i){this.logAct(!1,t),t.addArmor(this.boof124)}binvC(){this.faction="A",this.rarity="C",this.name="Battletech Inventor",this.iAttack=this.boof369,this.iHealth=this.iAttack,this.tribe.push("MM"),this.playTarg.player="E",this.ftext=`Give an enemy creature ${y.jr9(-this.iAttack,0)}.`,this.f=this.binvF}binvF(t,i){this.logAct(!1,t),this.buffA(t,-this.iAttack)}bsrC(){if(this.faction="N",this.rarity="R",this.name="Bonescythe Reaver",this.iAttack=this.boof5813,this.iHealth=this.boof3712,this.tribe.push("AB"),this.forges=this.level>1,this.forges){const t=this.level-1;this.playTarg.level=D.ddf2(t),this.playTarg.player="E",this.ftext=`You may destroy an enemy ${y.levelGateText(t)}creature.`,this.optional=!0}else this.hints=["LG"];this.f=this.bsrF}bsrF(t,i){this.kill(t)}bawC(){this.faction="U",this.rarity="R",this.name="Brambleaxe Warrior",this.iAttack=this.boof61014,this.iHealth=this.iAttack-4,this.tribe.push("HM"),this.playTarg.hint=["BF"],this.ftext="Give a creature Breakthrough this turn.",this.f=this.bawF}bawF(t,i){this.logAct(!1,t),this.modA(t,b.modT("BT",!0))}cacC(){this.faction="N",this.rarity="H",this.name="Cacklebones",this.iAttack=this.boof5915,this.iHealth=this.iAttack-this.level,this.tribe.push("SK"),this.playTarg.level=D.ddf2(this.level),this.playTarg.player="E",this.ftext=`Destroy an enemy ${y.levelGateText(this.level)}creature. If you do, the enemy player may play an additional card next turn.`,this.optional=!0,this.f=this.cacF}cacF(t,i){this.kill(t),T.addTr(t.owner,b.trigger("TS",this.code))}chaC(){this.faction="U",this.rarity="R",this.name="Chistlehearth Archer",this.iAttack=this.boof2510,this.iHealth=this.iAttack+7,this.tribe.push("HM");const t=this.boof4816;this.playTarg.player="E",this.playTarg.hasMobility=!0,this.ftext=`Deal ${t} damage to an enemy creature with Mobility. Negate Mobility from that creature.`,this.f=this.chaF}chaF(t,i){this.smack(t,this.boof4816),t.negateMobility=!0}ccC(){this.faction="N",this.rarity="C",this.name="Corpse Crawler",this.iAttack=this.boof81220,this.iHealth=this.iAttack+1,this.tribe.push("AB"),this.hints=[this.lValH(["ZZ-1","ZZ-2","ZZ-5"])],this.playTarg.player="F",this.ftext="Destroy a friendly creature.",this.f=this.ccF}ccF(t,i){this.kill(t)}drsC(){this.faction="U",this.rarity="C",this.name="Darkroot Shambler",this.iHealth=this.lValN([2,6,7]),this.iAttack=this.iHealth*2,this.tribe.push("DF","PL"),this.level===2&&(this.hints=["LB"]),this.playTarg.player="F";const t=this.boof234;this.ftext=`Give a friendly creature ${y.jr9(0,t)} for each other friendly Darkforged.`,this.f=this.drsF}drsF(t,i){this.logAct(!1,t),this.buffH(t,this.dfbuff(i.id))}dseC(){this.faction="A",this.rarity="C",this.name="Darksteel Enforcer",this.iAttack=this.boof468,this.iHealth=this.iAttack+2,this.tribe.push("DF","RB"),this.playTarg.player="F";const t=this.boof234;this.ftext=`Give a friendly creature ${y.jr9(t,0)} for each other friendly Darkforged.`,this.f=this.dseF}dseF(t,i){this.logAct(!1,t),this.buffA(t,this.dfbuff(i.id))}dsaC(){this.faction="T",this.rarity="C",this.name="Darkstone Asir",this.iAttack=this.boof2410,this.iHealth=this.iAttack*2,this.tribe.push("DF","AS"),this.playTarg.player="E";const t=this.boof234;this.ftext=`Deal ${t} damage to an enemy creature for each other friendly Darkforged.`,this.f=this.dsaF}dsaF(t,i){this.smack(t,this.dfbuff(i.id))}drslC(){this.faction="U",this.rarity="H",this.name="Dragon Slayer",this.iAttack=this.boof81220,this.iHealth=this.boof4610,this.tribe.push("HM"),this.playTarg.player="E",this.playTarg.level=D.ddf2(this.level),this.playTarg.tribe="DG",this.ftext=`Destroy an enemy ${y.levelGateText(this.level)}Dragon.`,this.f=this.drslF}drslF(t,i){this.kill(t)}friC(){this.faction="T",this.rarity="C",this.name="Flamerift Instigator",this.iAttack=this.boof71217,this.iHealth=this.iAttack-5,this.tribe.push("GT"),this.ftext="Negate Defender from a creature.",this.f=this.friF}friF(t,i){this.logAct(!1,t),t.negDefend("T")}freavC(){if(this.faction="N",this.rarity="H",this.name="Fleshreaver",this.iAttack=this.boof6915,this.iHealth=this.boof235,this.tribe.push("AB"),this.forges=this.level>1,this.forges){const t=this.level-1;this.consistent=!0,this.playTarg.level=D.ddf2(t),this.playTarg.player="E",this.ftext=`You may destroy a ${y.levelGateText(t)}enemy creature.`,this.optional=!0}else this.hints=["LG"];this.f=this.freavF}freavF(t,i){this.kill(t)}flcC(){this.faction="A",this.rarity="L",this.name="Frontline Combatant",this.iAttack=this.boof4612,this.iHealth=this.iAttack,this.iArmor=this.iAttack,this.tribe.push("HM"),this.optional=!0,this.playTarg.player="E",this.ftext=`You may have ${this.name} deal damage equal to its Armor to an enemy creature. If you do, that creature deals damage equal to its attack back to ${this.name}.`,this.f=this.flcF}flcF(t,i){const r=R.tick(),n=t.attack;this.smack(t,i.armor,r),i.hurtDirect(n,t.code,this.faction,r)}get fiendBof(){return this.lValN([-1,-2,-5])}gfiendC(){this.faction="N",this.rarity="C",this.name="Gloomfiend",this.iAttack=this.boof4812,this.iHealth=this.iAttack,this.tribe.push("AB"),this.playTarg.player="E";const t=this.fiendBof;this.ftext=`You may give an enemy creature ${y.jr9(t,t)}.`,this.optional=!0,this.f=this.gfiendF}gfiendF(t,i){this.logAct(!1,t),this.buffD(t,this.fiendBof)}grwC(){this.faction="N",this.rarity="C",this.name="Gloomreaper Witch",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.tribe.push("HM");const t=this.boof147;this.playTarg.maxAttack=t,this.playTarg.player="E",this.ftext=`You may destroy an enemy creature with ${t} or less attack.`,this.optional=!0,this.f=this.grwF}grwF(t,i){this.kill(t)}grhC(){this.faction="U",this.rarity="C",this.name="Grove Huntress",this.iAttack=this.boof4711,this.iHealth=this.iAttack-1,this.tribe.push("HM"),this.playTarg.player="F";const t=this.boof135;this.ftext=`Give a friendly creature ${y.jr9(t,t)}.`,this.f=this.grhF}grhF(t,i){this.logAct(!1,t),this.buffD(t,this.boof135)}houndC(){this.faction="T",this.rarity="C",this.name="Magma Hound",this.iAttack=this.boof4813,this.iHealth=this.iAttack-1,this.tribe.push("ER","EL");const t=this.boof246;this.optional=!0,this.playTarg.player="E",this.ftext=`You may deal ${t} damage to an enemy creature.`,this.f=this.houndF}houndF(t,i){this.smack(t,this.boof246)}mtxC(){this.faction="A",this.rarity="C",this.name="Matrix Warden",this.iAttack=this.lValN([3,8,12]),this.iHealth=this.iAttack,this.tribe.push("RB");const t=this.boof3510;this.playTarg.player="F",this.ftext=`Give a friendly creature ${y.jr9(t,0)}.`,this.f=this.mtxF}mtxF(t,i){this.logAct(!1,t),this.buffA(t,this.boof3510)}ngbC(){this.faction="T",this.rarity="C",this.name="Nargath Bruiser",this.iAttack=this.boof5814,this.iHealth=this.iAttack-1,this.tribe.push("ER","AS");const t=this.boof248;this.playTarg.player="F",this.ftext=`Give a friendly creature ${y.jr9(0,t)}.`,this.f=this.ngbF}ngbF(t,i){this.logAct(!1,t),this.buffH(t,this.boof248)}poaC(){this.faction="A",this.rarity="H",this.name="Patron of Anvillon",this.iAttack=this.boof369,this.iHealth=this.boof71117,this.tribe.push("CY"),this.playTarg.level=D.ddf2(this.level),this.playTarg.hint=["BF"],this.ftext=`If you have three or more Alloyin cards in your hand, give a ${y.levelGateText(this.level)}creature 2x attack.`,this.f=this.poaF}poaF(t,i){this.logAct(!1,t),this.buffA(t,t.attack)}phxsC(){this.faction="A",this.rarity="R",this.name="Phalanx Squadron",this.iAttack=this.boof3714,this.iHealth=this.boof61117,this.tribe.push("HM"),this.playTarg.hasArmor=!0,this.playTarg.player="F";const t=this.boof234;this.ftext=`Give a friendly creature with Armor ${y.jr9(t,t)}.`,this.f=this.phxsF}phxsF(t,i){this.logAct(!1,t),this.buffD(t,this.boof234)}rotC(){this.faction="N",this.rarity="C",this.name="Rot Wanderer",this.iAttack=this.boof369,this.iHealth=this.iAttack,this.tribe.push("ZB"),this.playTarg.maxAttack=this.iAttack,this.playTarg.player="E",this.ftext=`Destroy an enemy creature with ${this.iAttack} or less attack.`,this.f=this.rotF}rotF(t,i){this.kill(t)}schyC(){this.faction="N",this.rarity="C",this.name="Scourge Hydra",this.iAttack=this.boof71117,this.iHealth=this.iAttack,this.tribe.push("HY"),this.playTarg.player="F",this.ftext="Deal 3 damage to a friendly creature.",this.f=this.schyF}schyF(t,i){this.smack(t,3)}stdC(){this.faction="A",this.rarity="H",this.name="Shardthief Druid",this.iAttack=this.boof5813,this.iHealth=this.boof81318,this.tribe.push("MM"),this.playTarg.canRegen,this.playTarg.player="E",this.ftext=`Negate and remove all Regenerate from an enemy creature. ${this.name} gets that much Renerate.`,this.f=this.stdF}stdF(t,i){this.logAct(!1,t);const r=t.regen;t.negateRegen=!0,this.regn(i,r)}sdxC(){this.faction="A",this.rarity="R",this.name="Stasis Indexer",this.iAttack=this.boof369,this.iHealth=this.boof71118,this.tribe.push("MM"),this.playTarg.level=D.ddf2(this.level),this.playTarg.canDefender=!0,this.ftext=`Give a ${y.levelGateText(this.level)}creature Defender until the end of the enemy player's next turn.`,this.f=this.sdxF}sdxF(t,i){const r=b.mod("DF",!0);r.expiry="EN",this.modA(t,r)}surzC(){this.faction="N",this.rarity="L",this.name="Suruzal, Emissary of Varna",this.iAttack=this.boof4814,this.iHealth=this.iAttack-1,this.tribe.push("HM"),this.optional=!0,this.playTarg.player="F",this.playTarg.level=D.ddf2(this.level),this.notme=!0,this.ftext=`You may destroy another friendly ${y.levelGateText(this.level)}creature. If you do, spawn a copy of it.`,this.f=this.surzF}surzF(t,i){const r=R.tick();this.kill(t,r),this.spawn(t.code,i.owner,r)}vnfC(){this.faction="U",this.rarity="R",this.name="Venomfang",this.iAttack=this.boof61014,this.iHealth=this.iAttack-2,this.tribe.push("SN");const t=this.boof246;this.playTarg.player="E",this.ftext=`Give an enemy creature Poison ${t}.`,this.f=this.vnfF}vnfF(t,i){this.logAct(!1,t),t.addPoison(this.boof246)}wbyC(){this.faction="T",this.rarity="R",this.name="Wallbreaker Yeti",this.iAttack=this.boof4712,this.iHealth=this.boof71116,this.tribe.push("ER","YT"),this.playTarg.player="E",this.playTarg.level=D.ddf2(this.level),this.playTarg.hasDefender=!0,this.ftext=`You may destroy a ${y.levelGateText(this.level)}enemy creature with Defender.`,this.optional=!0,this.f=this.wbyF}wbyF(t,i){this.kill(t)}wbuC(){this.faction="T",this.rarity="C",this.name="Warbringer Uranti",this.iAttack=this.boof3711,this.iHealth=this.iAttack,this.tribe.push("LT","YT");const t=this.boof4812;this.notme=!0,this.playTarg.player="F",this.addSp("A",t),this.ftext=`Give another friendly creature ${y.jr9(t,0)} this turn.`,this.f=this.wbuF}wbuF(t,i){this.logAct(!1,t),this.modA(t,b.modT("AT",this.boof4812))}dogsC(){this.faction="N",this.rarity="R",this.name="Xithian Direhound",this.iAttack=4,this.iHealth=4,this.tribe.push("AB"),this.overload=!0,this.maxLevel=1,this.optional=!0,this.playTarg.player="E",this.ftext=`You may give an enemy creature ${y.jr9(-4,-4)}.`,this.f=this.dogsF}dogsF(t,i){this.logAct(!1,t),this.buffD(t,-4)}}class $ extends kt{cons(t){({["AGW"]:()=>this.awingC(),["ASG"]:()=>this.asurgeC(),["ATZ"]:()=>this.anatC(),["AVB"]:()=>this.anvbC(),["AQE"]:()=>this.aqatC(),["AOP"]:()=>this.armoC(),["BFT"]:()=>this.bftC(),["BZH"]:()=>this.bzhC(),["BBR"]:()=>this.bbrC(),["BBD"]:()=>this.bbdC(),["BBL"]:()=>this.bblC(),["BBN"]:()=>this.bbnC(),["BTM"]:()=>this.botC(),["BLP"]:()=>this.btpC(),["CHT"]:()=>this.chatC(),["CSU"]:()=>this.csurgeC(),["CNT"]:()=>this.ctmsC(),["CTW"]:()=>this.cullC(),["CTV"]:()=>this.cultC(),["CAG"]:()=>this.cypaC(),["CBS"]:()=>this.cypbC(),["DPO"]:()=>this.dpsC(),["DDF"]:()=>this.dendC(),["DBT"]:()=>this.dreadC(),["DYF"]:()=>this.dyinC(),["ETN"]:()=>this.elnC(),["ENP"]:()=>this.enpC(),["ENR"]:()=>this.rageC(),["EFA"]:()=>this.efauC(),["EXD"]:()=>this.expdmC(),["FIN"]:()=>this.feralC(),["FOR"]:()=>this.fitrC(),["FJT"]:()=>this.fjetC(),["FLN"]:()=>this.flncC(),["FFL"]:()=>this.ffldC(),["FZS"]:()=>this.frozC(),["GTH"]:()=>this.ghastC(),["GCR"]:()=>this.crushC(),["HAR"]:()=>this.hartC(),["IFR"]:()=>this.izftC(),["JPK"]:()=>this.jpC(),["LBR"]:()=>this.lbrandC(),["LYS"]:()=>this.shartC(),["MMY"]:()=>this.maggyC(),["MPH"]:()=>this.morphC(),["MSC"]:()=>this.sculptC(),["NNS"]:()=>this.nanoC(),["NSL"]:()=>this.natselC(),["NCF"]:()=>this.nflayC(),["NCV"]:()=>this.nviveC(),["NDY"]:()=>this.ntdcC(),["OEX"]:()=>this.oexpC(),["OSS"]:()=>this.orssC(),["PTR"]:()=>this.pwtorC(),["PSG"]:()=>this.psurgeC(),["PMS"]:()=>this.pslamC(),["PMP"]:()=>this.pummC(),["RPR"]:()=>this.rpsC(),["SAP"]:()=>this.sapC(),["SVO"]:()=>this.soathC(),["SOC"]:()=>this.scythC(),["SOA"]:()=>this.soaC(),["SOD"]:()=>this.sodC(),["SOT"]:()=>this.sotC(),["SHG"]:()=>this.shgrC(),["SNB"]:()=>this.snbC(),["SHV"]:()=>this.sharvC(),["SRP"]:()=>this.sreapC(),["STR"]:()=>this.sttorC(),["STO"]:()=>this.sptorC(),["SOV"]:()=>this.sovC(),["STN"]:()=>this.stbrnC(),["STP"]:()=>this.ssperC(),["SIN"]:()=>this.sinC(),["TGL"]:()=>this.tanglC(),["TPT"]:()=>this.tpactC(),["TUP"]:()=>this.tugC(),["TOT"]:()=>this.totsC(),["TXB"]:()=>this.txbnC(),["TXS"]:()=>this.sporeC(),["TCG"]:()=>this.tremcC(),["URS"]:()=>this.urstC(),["VSK"]:()=>this.vensC(),["VGR"]:()=>this.vgraC(),["VSP"]:()=>this.vrdsC(),["VTR"]:()=>this.vrshC(),["VGL"]:()=>this.vglchC(),["VYE"]:()=>this.vembC(),["UBL"]:()=>this.uboltC(),["WMM"]:()=>this.warC(),["XRW"]:()=>this.xwillC()})[t]()}playTarg;xl=!0;constructor(t){super(t),this.playTarg=b.crActTarg("CARD",this.code,""),this.cons(this.cardCode())}z;canPlay(){const t=this.cardCode();if(t==="NSL"&&m.ddf1().length<5)return!1;const i=t==="FOR"?this.fitTarg():this.playTarg;return m.creatByTarget(i).length>0}playTargets(){return this.cardCode()==="FOR"?[this.fitTarg()]:[this.playTarg]}handleAction(t){const i=m.ddf6(t);this.logSpell(this.xl?i:void 0),this.z(i),S.spellCast()}ddf8(t){const i=Vt.extractCardCode(t.trigger.logicCode);if(i==="OEX"&&t.trigger.type==="DM"){const r=t.event;return r.battle&&!r.isCreatTarg&&r.isCreatSrc&&r.srcId===t.creatId}else if((i==="FZS"||i==="IFR")&&t.trigger.type==="DM"){const r=t.event;if(r.isCreatTarg&&r.target===t.creatId)return!0}else if(i==="NDY"&&t.trigger.type==="DS"||i==="SHG"&&(t.trigger.type==="PT"||t.trigger.type==="VN")||(i==="IFR"||i==="OEX")&&t.trigger.type==="PT")return!0;return!1}jr8(t){const i=Vt.extractCardCode(t.trigger.logicCode);if(i==="FZS"||i==="IFR"&&t.trigger.type==="DM"){const r=m.creatByTr(t);r.status==="A"&&this.kill(r)}else if(i==="SHG"){if(t.trigger.type==="VN")this.spawn(m.jr5(t.event.creatId).code,t.owner);else if(t.trigger.type==="PT"){const r=t.trigger.customCode,n=m.creatByTr(t);n.triggers.filter(f=>f.customCode===r).forEach(f=>n.removeTrigger(f))}}else if(i==="IFR"&&t.trigger.type==="PT"){const r=k.deTil(t.trigger.customCode),n=r[1],c=m.creatByTr(t);if(r[0]==="P2"){const f=b.trigIdx(c.triggers,t.trigger);c.triggers[f].customCode=k.enTil("P1",n)}else{const f=c.triggers.find(p=>p.customCode===n);f&&c.removeTrigger(f),c.removeTrigger(t.trigger)}}else if(i==="OEX"){if(t.trigger.type==="DM"){const r=t.event,n=m.qEnemyCreats(),c=n.length,f=R.tick();let p;c>0&&(this.level===1?p=[n[k.randInt(0,c)]]:this.level===2?(p=n.splice(k.randInt(0,c),1),n.length>0&&p.push(n[k.randInt(0,c-1)])):p=n,p.forEach(v=>v.hurtDirect(r.dmg,this.code,"T",f)))}else if(t.trigger.type==="PT"){const r=t.trigger.customCode,n=m.creatByTr(t);n.triggers.filter(f=>f.customCode===r).forEach(f=>n.removeTrigger(f))}}else if(i==="NDY"){const r=m.creatByTr(t);r.status==="A"&&(this.logAct(!1,r),this.buffD(r,this.ndcbuf))}else super.jr8(t);H.triggerDone()}rankT(){return`If you are rank ${this.level+1} or higher`}icaf(t){return`. If that creature is ${y.factionText(t)}, `}formFun(t){if(!(t.lane===1||t.lane===5)){const i=b.crTarg();i.player=T.toTarget(t.owner),i.lanes=t.adjacent;const r=m.creatByTarget(i);if(r.length===2)return r}return[]}awingC(){this.faction="A",this.rarity="R",this.name="Aegis Wings",this.text=`Give a creature ${y.jr9(this.boof369,0)}. Then if that creature has the highest attack, it also gets Mobility 1 and Armor ${this.boof246}.`,this.playTarg.hint=["BF"],this.z=this.awingZ}awingZ(t){this.buffA(t,this.boof369);const i=t.attack;m.qActiveCreats().every(r=>r.attack<=i)&&(this.wings(t,1),t.addArmor(this.boof246))}asurgeC(){this.faction="T",this.rarity="R",this.name="Aerial Surge",this.free=this.level>1,this.level===1&&(this.hints=["LG"]),this.playTarg.canMove=!0,this.playTarg.hint=["BF"],this.text=`Give a creature Mobility ${this.level}.`,this.z=this.asurgeZ}asurgeZ(t){this.wings(t,this.level)}anatC(){this.faction="A",this.rarity="C",this.name="Anatomize",this.playTarg.hint=["DB"],this.text=`Give a creature ${y.jr9(-this.boof4816,0)}.~You may play an additional ${this.name} this turn.`,this.z=this.anatZ}anatZ(t){this.buffA(t,-this.boof4816);const i=G.freeCard(this.code);i.condition.cardCode="ATZ"}anvbC(){this.faction="A",this.rarity="T",this.name="Anvilbreaker",this.free=!0,this.maxLevel=1,this.playTarg.player="E",this.text=`Give an enemy creature ${y.jr9(-2,0)}, then move it to another available lane at random.`,this.z=this.anvbZ}anvbZ(t){this.buffA(t,-2),m.fling(t,"A")}aqatC(){this.faction="T",this.rarity="C",this.name="Aquatic Embrace",this.text=`Give a creature ${y.jr9(0,this.boof51015)}.`,this.playTarg.hint=["BF"],this.z=this.aqatZ}aqatZ(t){this.buffH(t,this.boof51015)}armoC(){this.faction="A",this.rarity="R",this.name="Armory Outpost",this.playTarg.player="F";const t=y.jr9(this.boof4610,0);this.text=`Give a friendly creature ${t}. If it is in Formation, give the adjacent creatures ${t} as well.`,this.z=this.armoZ}armoZ(t){const i=this.boof4610;this.formFun(t).concat(t).forEach(r=>this.buffA(r,i))}bftC(){this.faction="N",this.rarity="C",this.name="Bitterfrost Totem";const t=this.boof4812n;this.playTarg.hint=["DB"],this.text=`Give a creature ${y.jr9(t,t)}. ${this.rankT()}, it gets an additional ${y.jr9(-2,-2)}.`,this.z=this.bftZ}bftZ(t){const i=this.boof4812n-(T.getActive().rank>this.level?2:0);this.buffD(t,i)}get bhos(){return this.lValN([6,9,20])}bzhC(){this.faction="T",this.rarity="H",this.name="Blazing Hostility";const t=this.bhos;this.playTarg.player="E",this.text=`Deal ${t} damage to an enemy creature${this.icaf("N")}deal ${t} damage to the enemy player as well.`,this.z=this.bzhZ}bzhZ(t){const i=this.bhos;this.smack(t,i),t.faction==="N"&&this.ouch(t.owner,i)}blod(){return G.deathsA.length>0||G.deathsB.length>0}bbrC(){this.faction="A",this.rarity="C",this.name="Blood Barrier";const t=this.boof234;this.text=`Give a creature Armor ${t}.~If a creature was destroyed this turn, it gets an additional Armor ${t}.`,this.playTarg.hint=["BF"],this.playTarg.canArmor=!0,this.z=this.bbrZ}bbrZ(t){const i=this.boof234;t.addArmor(i),this.blod()&&t.addArmor(i)}bbdC(){this.faction="N",this.rarity="C",this.name="Blood Bindings";const t=this.boof369n,i=y.jr9(t,t);this.text=`Give a creature ${i}.~If a creature was destroyed this turn, it gets an additional ${i}.`,this.playTarg.hint=["DB"],this.z=this.bbdZ}bbdZ(t){const i=this.boof369n;this.buffD(t,i),this.blod()&&this.buffD(t,i)}bblC(){this.faction="T",this.rarity="C",this.name="Blood Boil";const t=this.boof5610;this.text=`Deal ${t} damage to a creature.~If a creature was destroyed this turn, deal an additional ${t} damage to that creature.`,this.playTarg.hint=["HR"],this.z=this.bblZ}bblZ(t){const i=this.boof5610,r=R.tick();this.smack(t,i,r),this.blod()&&this.smack(t,i,r)}bbnC(){this.faction="U",this.rarity="C",this.name="Blood Boon";const t=this.boof347,i=y.jr9(t,t);this.text=`Give a creature ${i}.~If a creature was destroyed this turn, it gets an additional ${i}.`,this.playTarg.hint=["BF"],this.z=this.bbnZ}bbnZ(t){const i=this.boof347;this.buffD(t,i),this.blod()&&this.buffD(t,i)}botC(){this.faction="U",this.rarity="H",this.name="Botanimate",this.xl=!1,this.text=`Replace an enemy ${y.levelGateText(this.level)}creature with a 3/3 Sapling.`,this.playTarg.player="E",this.playTarg.level=D.ddf2(this.level),this.level<3&&(this.hints=["LG"]),this.z=this.botZ}botZ(t){this.replc(`${"BOS"}${this.level}`,t.owner,t.lane)}btpC(){this.faction="U",this.rarity="H",this.name="Bottomless Puncture",this.playTarg.player="E",this.text=`Give an enemy creature Poison ${this.boof369}${this.icaf("T")}give the enemy player Poison ${this.level} as well.`,this.z=this.btpZ}btpZ(t){t.addPoison(this.boof369),t.faction==="T"&&T.addPoison(t.owner,this.level)}chatC(){this.faction="T",this.rarity="R",this.name="Chaos Twister",this.playTarg.player="E";const t=`eal ${this.boof6810} damage to `;this.text=`D${t}an enemy creature. If it is in Formation, d${t}the adjacent creatures as well.`,this.z=this.chatZ}chatZ(t){const i=this.boof6810,r=R.tick();this.formFun(t).concat(t).forEach(n=>this.smack(n,i,r))}csurgeC(){this.faction="N",this.rarity="R",this.name="Contagion Surge",this.free=this.level>1,this.level===1&&(this.hints=["LG"]);const t=this.boof123n;this.text=`Give a creature ${y.jr9(t,t)}.`,this.playTarg.hint=["DB"],this.z=this.csurgeZ}csurgeZ(t){this.buffD(t,this.boof123n)}ctmsC(){this.faction="A",this.rarity="R",this.name="Countermeasure";const t=this.boof4816;this.text=`Give an enemy creature ${y.jr9(-t,0)}, or give a friendly creature ${y.jr9(t,0)}.`,this.z=this.ctmsZ}ctmsZ(t){const i=this.boof4816;t.owner===T.activeA?this.buffA(t,i):this.buffA(t,-i)}cullC(){this.faction="N",this.rarity="C",this.name="Cull the Weak",this.xl=!1;const t=this.boof4814;this.text=`Destroy a creature with ${t} or less attack.`,this.playTarg.maxAttack=t,this.playTarg.hint=["KL"],this.level<3&&(this.hints=["LG"]),this.z=this.cullZ}cullZ(t){this.kill(t)}cultC(){this.faction="U",this.rarity="H",this.name="Cultivate",this.xl=!1;const t=O.getCard(X.tffc(this.level));this.text=`Replace a friendly Plant with a ${y.tokName(t)}.`,this.playTarg.player="F",this.playTarg.tribe="PL",this.level<3&&(this.hints=["LG"]),this.z=this.cultZ}cultZ(t){this.replc(X.tffc(this.level),t.owner,t.lane)}cypaC(){this.faction="A",this.rarity="R",this.name="Cypien Augmentation",this.free=this.level>1,this.level===1&&(this.hints=["LG"]);const t=this.boof246;this.text=`Give a creature in a center lane ${y.jr9(t,t)}.`,this.playTarg.lanes=3,this.playTarg.hint=["BF"],this.z=this.cypaZ}cypaZ(t){this.buffD(t,this.boof246)}cypbC(){this.faction="A",this.rarity="C",this.name="Cypien Battlesuit",this.text=`Give an Alloyin creature ${y.jr9(this.boof51015,0)} and Armor ${this.boof124}.`,this.playTarg.hint=["BF"],this.playTarg.faction="A",this.z=this.cypbZ}cypbZ(t){this.buffA(t,this.boof51015),t.addArmor(this.boof124)}dpsC(){this.faction="N",this.rarity="H",this.name="Death's Possession";const t=this.boof4812;this.playTarg.maxAttack=t,this.text=`Destroy a creature with ${t} or less attack${this.icaf("A")}Spawn a copy of it.`,this.z=this.dpsZ}dpsZ(t){this.kill(t),t.faction==="A"&&this.spawn(t.code,T.activeA)}dendC(){this.faction="U",this.rarity="R",this.name="Dendrify",this.xl=!1,this.level===3&&(this.free=!0,this.overload=!0),this.text=`Replace a ${y.levelGateText(this.level+1)}creature with a 7/7 Treefolk.`,this.playTarg.level=D.ddf2(this.level+1),this.z=this.dendZ}dendZ(t){this.replc(`${"SXT"}${this.level}`,t.owner,t.lane)}dreadC(){this.faction="N",this.rarity="H",this.name="Dreadbolt",this.xl=!1,this.level<3&&(this.hints=["LG"]),this.text=`Destroy a ${y.levelGateText(this.level)}creature.`,this.playTarg.level=D.ddf2(this.level),this.playTarg.hint=["KL"],this.z=this.dreadZ}dreadZ(t){this.kill(t)}dyinC(){this.faction="U",this.rarity="T",this.name="Dysian Infusion",this.playTarg.hint=["BF"];const t=this.boof135,i=this.boof4710;this.text=`Give a creature ${y.jr9(i,i)} and Regenerate ${t}.`,this.z=this.dyinZ}dyinZ(t){this.buffD(t,this.boof4710),this.regn(t,this.boof135)}enpC(){this.faction="A",this.rarity="H",this.name="Energy Prison",this.free=this.level===3,this.text=`Give a ${y.levelGateText(this.level)}creature Defender.`,this.playTarg.canDefender=!0,this.playTarg.level=D.ddf2(this.level),this.level<3&&(this.hints=["LG"]),this.z=this.enpZ}enpZ(t){t.defender=!0,this.anim8(t)}elnC(){this.faction="A",this.rarity="C",this.name="Electro Net",this.text=`Give a creature ${y.jr9(-this.boof51015,0)}.`,this.playTarg.hint=["DB"],this.z=this.elnZ}elnZ(t){this.buffA(t,-this.boof51015)}rageC(){this.faction="U",this.rarity="C",this.name="Enrage";const t=this.boof3612;this.text=`Give a creature ${y.jr9(t,t)}.`,this.playTarg.hint=["BF"],this.z=this.rageZ}rageZ(t){this.buffD(t,this.boof3612)}efauC(){this.faction="T",this.rarity="R",this.name="Everflame Aura",this.text=`Deal ${this.level+6} damage to an enemy creature, or give a friendly creature Mobility ${this.level}.`,this.z=this.efauZ}efauZ(t){t.owner===T.activeA?this.wings(t,this.level):this.smack(t,this.level+6)}expdmC(){this.faction="N",this.rarity="H",this.name="Explosive Demise",this.xl=!1,this.text=`Destroy a friendly ${y.levelGateText(this.level+1)}creature.~Deal damage equal to its attack to the enemy player.${this.level===3?"~You gain that much health.":""}`,this.playTarg.level=D.ddf2(this.level+1),this.playTarg.player="F",this.z=this.expdmZ}expdmZ(t){const i=t.attack;this.kill(t),this.ouch("E",i),this.level===3&&this.balm("F",i)}fitrC(){this.faction="T",this.rarity="C",this.name="Fit of Rage",this.maxLevel=1,this.overload=!0,this.playTarg.player="F",this.text="Give a friendly creature +attack equal to the creature opposing it this turn.",this.z=this.fitrZ}fitrZ(t){this.modA(t,b.modT("AT",t.opposed?.attack||0))}fitTarg(){const t=b.crActTarg("CARD",this.code,"");return t.lanes=m.ddf1().filter(i=>i.opposed).map(i=>i.lane),t}get fiboof(){return this.lValN([1,3,8])}feralC(){this.faction="U",this.rarity="C",this.name="Feral Instinct";const t=this.fiboof;this.text=`Give a creature ${y.jr9(t,t,!0)} and Breakthrough.`,this.playTarg.hint=["BF"],this.z=this.feralZ}feralZ(t){t.breakthrough=!0,this.buffD(t,this.fiboof)}fjetC(){this.faction="T",this.rarity="C",this.name="Flame Jet",this.playTarg.hint=["HR"],this.text=`Deal ${this.boof3915} damage to a creature. ${this.rankT()}, deal an additional 3 damage.`,this.z=this.fjetZ}fjetZ(t){this.smack(t,this.boof3915),T.getActive().rank>this.level&&this.smack(t,3)}flncC(){this.faction="T",this.rarity="R",this.name="Flame Lance",this.xl=!1;const t=this.boof579;this.text=`Deal ${t} damage to an enemy creature and ${t} damage to the enemy player.`,this.playTarg.player="E",this.z=this.flncZ}flncZ(t){const i=this.boof579;this.smack(t,i),this.ouch("E",i)}ffldC(){this.faction="A",this.rarity="C",this.name="Forcefield",this.playTarg.canArmor=!0,this.playTarg.hint=["BF"],this.text=`Give a creature Armor ${this.boof51020} this turn.`,this.z=this.ffldZ}ffldZ(t){this.modA(t,b.modT("AR",this.boof51020))}frozC(){this.faction="T",this.rarity="R",this.name="Frozen Solid",this.playTarg.level=D.ddf2(this.level),this.playTarg.hint=["KL"],this.text=`Give a ${y.levelGateText(this.level)}creature "When this is dealt damage, destroy it".`,this.level<3&&(this.hints=["LG"]),this.z=this.frozZ}frozZ(t){t.changed=!0;const i=t.jr4("DM",this.code);i.bonus=this.avgSpawnNug(),this.anim8(t)}ghastC(){this.faction="N",this.rarity="C",this.name="Ghastly Touch";const t=-this.boof3612;this.text=`Give a creature ${y.jr9(t,t)}.`,this.playTarg.hint=["DB"],this.z=this.ghastZ}ghastZ(t){this.buffD(t,-this.boof3612)}crushC(){this.faction="T",this.rarity="C",this.name="Glacial Crush",this.xl=!1,this.free=this.level>1,this.free||(this.hints=["LG"]),this.playTarg.player="E",this.playTarg.hasDefender=!0,this.text=`Destroy an enemy creature with Defender.${this.level===3?" Deal damage equal to its health to the enemy player.":""}`,this.z=this.crushZ}crushZ(t){const i=t.health;this.kill(t),this.level===3&&this.ouch(t.owner,i)}hartC(){this.faction="A",this.rarity="C",this.name="Heavy Artillery",this.playTarg.hint=["BF"],this.text=`Give a creature ${y.jr9(this.boof51015,0)}.`,this.z=this.hartZ}hartZ(t){this.buffA(t,this.boof51015)}izftC(){this.faction="T",this.rarity="T",this.name="Iztek's Frost",this.free=this.level===3,this.playTarg.level=D.ddf2(this.level+1),this.playTarg.hint=["KL"],this.text=`Until the end of the next turn, give a ${y.levelGateText(this.level+1)}creature "When this is dealt damage, destroy it".`,this.level===1&&(this.hints=["LG"]),this.z=this.izftZ}izftZ(t){const i=R.genId(),r=t.jr4("DM",this.code);r.changes=!0,r.customCode=i,r.bonus=this.avgSpawnNug();const n=t.jr4("PT",this.code);n.customCode=k.enTil("P2",i)}jpC(){this.faction="A",this.rarity="C",this.name="Jet Pack",this.playTarg.hint=["BF"],this.text=`Give a creature ${y.jr9(this.boof369,0)} and Mobility 1.`,this.z=this.jpZ}jpZ(t){this.buffA(t,this.boof369),this.wings(t,1)}lbrandC(){this.faction="T",this.rarity="C",this.name="Lightning Brand",this.playTarg.level=D.ddf2(this.level+1),this.playTarg.hint=["BF"],this.text=`Give a ${y.levelGateText(this.level+1)}creature ${y.jr9(this.boof124,0)} and Aggressive this turn.`,this.level===1&&(this.hints=["LG"]),this.z=this.lbrandZ}lbrandZ(t){this.modA(t,b.modT("AT",this.boof124)),this.modA(t,b.modT("AG",!0))}shartC(){this.faction="U",this.rarity="R",this.name="Lysian Shard",this.overload=!0,this.maxLevel=1,this.hints=["ZZ-1"],this.playTarg.hint=["BF"],this.text=`Give a creature ${y.jr9(6,6)}.`,this.z=this.shartZ}shartZ(t){this.buffD(t,6)}maggyC(){this.faction="T",this.rarity="T",this.name="Magmify",this.maxLevel=2,this.level===1?this.hints=["LG"]:this.free=!0,this.playTarg.player="F",this.text="Set a friendly creatures attack equal to its health.",this.z=this.maggyZ}maggyZ(t){const i=t.health-t.attack;i!==0&&this.buffA(t,i)}morphC(){this.faction="U",this.rarity="H",this.name="Metamorphosis",this.xl=!1,this.text=`Replace a ${y.levelGateText(this.level)}creature with a 0/3 Feywing Chrysalis.`,this.playTarg.level=D.ddf2(this.level),this.level<3&&(this.hints=["LG"]),this.z=this.morphZ}morphZ(t){this.replc(`${"FWC"}1`,t.owner,t.lane)}sculptC(){this.faction="A",this.rarity="H",this.name="Metasculpt",this.level===3?this.free=!0:this.hints=["LG"],this.playTarg.level=D.ddf2(this.level+1),this.text=`Remove all abilities from a ${y.levelGateText(this.level+1)}creature.`,this.playTarg.hint=["DB"],this.z=this.sculptZ}sculptZ(t){t.wipeAll()}nanoC(){this.faction="A",this.rarity="R",this.name="Nanoswarm",this.playTarg.level=D.ddf2(this.level),this.text=`Give a ${y.levelGateText(this.level)}creature ${y.jr9(-this.boof51015,0)} and remove all abilities from it.`,this.playTarg.hint=["DB"],this.level<3&&(this.hints=["LG"]),this.z=this.nanoZ}nanoZ(t){this.buffA(t,-this.boof51015),t.wipeAll()}natselC(){this.faction="U",this.rarity="R",this.name="Natural Selection",this.xl=!1,this.text=`If there is a friendly creature in each lane, destroy a ${y.levelGateText(this.level)}creature.`,this.playTarg.level=D.ddf2(this.level),this.playTarg.hint=["KL"],this.level<3&&(this.hints=["LG"]),this.z=this.natselZ}natselZ(t){this.kill(t)}nflayC(){this.faction="N",this.rarity="C",this.name="Necroflay";const t=-this.boof3711;this.text=`Give a creature ${y.jr9(t,t)}.~You may play an additional ${this.name} this turn.`,this.playTarg.hint=["DB"],this.z=this.nflayZ}nflayZ(t){this.buffD(t,-this.boof3711);const i=G.freeCard(this.code);i.condition.cardCode="NCF"}nviveC(){this.faction="N",this.rarity="C",this.name="Necrovive",this.playTarg.canRegen=!0,this.playTarg.hint=["BF"],this.text=`Give a creature Regenerate ${this.boof3612}.`,this.z=this.nviveZ}nviveZ(t){this.regn(t,this.boof3612)}ntdcC(){this.faction="N",this.rarity="R",this.name="Nether Decay";const t=this.ndcbuf;this.text=`Give a creature "When a creature is destroyed, this gets ${y.jr9(t,t)}."`,this.playTarg.hint=["DB"],this.z=this.ntdcZ}ntdcZ(t){t.changed=!0;const i=t.jr4("DS",this.code),r=this.ndcbuf;i.bonus=this.buffNug(r,r)}get ndcbuf(){return-4-this.level}oexpC(){this.faction="A",this.rarity="H",this.name="Oratek Explosives",this.playTarg.player="F";const t=this.lValS(["an enemy creature at random","up to two enemy creatures at random","each enemy creature"]);this.text=`Give a friendly creature ${y.jr9(5,0)}.~Allied Tempys: This turn, when that creature ${y.dbdtap()}, deal that much damage to ${t}.`,this.z=this.oexpZ}oexpZ(t){if(this.buffA(t,5),G.allied("T")){const i=R.genId(),r=t.jr4("DM",this.code);r.changes=!0,r.customCode=i;const n=t.jr4("PT",this.code);n.customCode=i}}orssC(){this.faction="A",this.rarity="C",this.name="Oreian Steelskin",this.playTarg.canArmor=!0,this.playTarg.hint=["BF"],this.text=`Give a creature Armor ${this.boof246}. ${this.rankT()}, it gets an additional Armor 1.`,this.z=this.orssZ}orssZ(t){const i=T.getActive().rank>this.level?1:0;t.addArmor(this.boof246+i)}pwtorC(){this.faction="A",this.rarity="R",this.name="Power Torrent",this.free=this.level>1,this.level===1&&(this.hints=["LG"]),this.playTarg.hint=["BF"],this.text=`Give a creature ${y.jr9(this.boof234,0)}.`,this.z=this.pwtorZ}pwtorZ(t){this.buffA(t,this.boof234)}psurgeC(){this.faction="U",this.rarity="R",this.name="Primal Surge",this.free=this.level>1,this.level===1&&(this.hints=["LG"]),this.playTarg.hint=["BF"],this.text=`Give a creature ${y.jr9(this.level,this.level)}.`,this.z=this.psurgeZ}psurgeZ(t){this.buffD(t,this.level)}pslamC(){this.faction="T",this.rarity="C",this.name="Primordial Slam",this.playTarg.hint=["BF"],this.text=`Give a creature ${y.jr9(this.boof71116,0)} this turn.`,this.z=this.pslamZ}pslamZ(t){this.modA(t,b.modT("AT",this.boof71116))}pummC(){this.faction="A",this.rarity="R",this.name="Pummel Pack";const t=this.boof236,i=`${y.jr9(t,0)} and Armor ${t}.`;this.text=`Give a friendly creature ${i}~If it is the only friendly creature, it gets an additional ${i}`,this.playTarg.player="F",this.z=this.pummZ}pummZ(t){const i=this.boof236;this.buffA(t,i),t.addArmor(i),m.ddf1().length===1&&(this.buffA(t,i),t.addArmor(i))}get dennis(){return this.lValN([-3,-9,-25])}rpsC(){this.faction="A",this.rarity="H",this.name="Repress",this.playTarg.player="E",this.text=`Give an enemy creature ${y.jr9(this.dennis,0)}.${this.icaf("U")}remove all abilities from it.`,this.z=this.rpsZ}rpsZ(t){this.buffA(t,this.dennis),t.faction==="U"&&t.wipeAll()}sapC(){this.faction="A",this.rarity="C",this.name="Sap",this.playTarg.level=D.ddf2(this.level),this.text=`Reduce a ${y.levelGateText(this.level)}creature's attack to 0.`,this.playTarg.hint=["DB"],this.level<3&&(this.hints=["LG"]),this.z=this.sapZ}sapZ(t){this.buffA(t,-t.attack)}soathC(){this.faction="U",this.rarity="C",this.name="Savage Oath",this.level===1&&(this.hints=["LG"]);const t=this.saboof;this.text=`Give an Uterra creature ${y.jr9(t,t,!0)} and Breakthrough.`,this.playTarg.hint=["BF"],this.playTarg.faction="U",this.z=this.soathZ}soathZ(t){this.buffD(t,this.saboof),t.breakthrough=!0}get saboof(){return this.lValN([2,6,15])}scythC(){this.faction="N",this.rarity="L",this.name="Scythe of Chiron";const t=this.boof246;this.playTarg.player="F",this.text=`Each enemy creature gets ${y.jr9(-t,0)}. Give a friendly creature ${y.jr9(t,0)} for each enemy creature.`,this.z=this.scythZ}scythZ(t){const i=-this.boof246,r=m.qEnemyCreats();r.forEach(n=>{this.buffA(n,i)}),r.length>0&&this.buffA(t,-i*r.length)}soaC(){this.faction="A",this.rarity="C",this.name="Seal of Anvillon",this.level===1?this.hints=["LG"]:this.consistent=!0,this.playTarg.hint=["BF"],this.text=`Give a creature ${y.jr9(this.ubzap,0)}.`,this.z=this.soaZ}soaZ(t){this.buffA(t,this.ubzap)}sodC(){this.faction="U",this.rarity="C",this.name="Seal of Deepwood",this.level===1?this.hints=["LG"]:this.consistent=!0;const t=this.derpboof;this.playTarg.hint=["BF"],this.text=`Give a creature ${y.jr9(t,t)}.`,this.z=this.sodZ}sodZ(t){this.buffD(t,this.derpboof)}get derpboof(){return this.lValN([1,6,12])}sotC(){this.faction="N",this.rarity="C",this.name="Seal of Tarsus",this.level===1?this.hints=["LG"]:this.consistent=!0;const t=this.tars;this.playTarg.hint=["DB"],this.text=`Give a creature ${y.jr9(t,t)}.`,this.z=this.sotZ}sotZ(t){this.buffD(t,this.tars)}get tars(){return this.lValN([-2,-8,-16])}shgrC(){this.faction="N",this.rarity="L",this.name="Shallow Grave",this.free=this.level===3,this.playTarg.level=D.ddf2(this.level+1),this.playTarg.player="F",this.text=`Give a ${y.levelGateText(this.level+1)}friendly creature "Vengeance: Spawn this" this turn.`,this.level===1&&(this.hints=["LG"]),this.z=this.shgrZ}shgrZ(t){const i=R.genId(),r=t.jr4("VN",this.code);r.customCode=i,r.changes=!0;const n=t.jr4("PT",this.code);n.customCode=i}sinC(){this.faction="U",this.rarity="C",this.name="Strength In Numbers",this.playTarg.hint=["BF"],this.text=`Give a creature ${y.jr9(this.level,this.level)} for each friendly creature.`,this.z=this.sinZ}sinZ(t){this.buffD(t,this.level*m.ddf1().length)}get snbboof(){return-1*(this.level+7)}snbC(){this.faction="A",this.rarity="C",this.name="Sonic Burst",this.playTarg.hint=["DB"],this.text=`Give a creature ${y.jr9(this.snbboof,0)}.`,this.level<3&&(this.hints=["LB"]),this.z=this.snbZ}snbZ(t){this.buffA(t,this.snbboof)}sharvC(){this.faction="N",this.rarity="H",this.name="Soul Harvest",this.xl=!1;const t=this.lValS(["an additional level 1 card","an additional card","two additional cards"]);this.text=`Destroy a friendly creature. You may play ${t} this turn.`,this.playTarg.player="F",this.level<3&&(this.hints=["LG"]),this.z=this.sharvZ}sharvZ(t){if(this.kill(t),this.level===1){const i=G.freeCard(this.code);i.condition.level=D.ddf2(1)}else G.freePlay(this.level-1)}sreapC(){this.faction="N",this.rarity="L",this.name="Soulreap",this.xl=!1;const t=this.boof248;this.text=`Destroy an enemy creature with ${t} or less attack. Then Spawn a copy of it.`,this.playTarg.player="E",this.playTarg.maxAttack=t,this.level<3&&(this.hints=["LG"]),this.z=this.sreapZ}sreapZ(t){this.kill(t),this.spawn(t.code,!t.owner)}sttorC(){this.faction="N",this.rarity="R",this.name="Spirit Torrent",this.free=this.level>1,this.level===1&&(this.hints=["LG"]),this.text=`Give a creature Regenerate ${this.boof234}.`,this.playTarg.hint=["BF"],this.playTarg.canRegen=!0,this.z=this.sttorZ}sttorZ(t){this.regn(t,this.boof234)}sptorC(){this.faction="U",this.rarity="R",this.name="Spore Torrent",this.free=this.level>1,this.level===1&&(this.hints=["LG"]),this.text=`Give a creature Poison ${this.boof234}.`,this.playTarg.hint=["PN"],this.z=this.sptorZ}sptorZ(t){t.addPoison(this.boof234)}sovC(){this.faction="T",this.rarity="L",this.name="Staff of Vaerus",this.text=`Give a friendly ${y.levelGateText(this.level+1)}creature Mobility ${this.level}. That creature battles an additional time this turn.`,this.playTarg.level=D.ddf2(this.level+1),this.playTarg.player="F",this.z=this.sovZ}sovZ(t){this.wrang(t),this.wings(t,this.level)}stbrnC(){this.faction="T",this.rarity="R",this.name="Stone Brand";const t=this.boof579;this.text=`Give a creature with Defender ${y.jr9(t,t,!0)} and Negate Defender from it.`,this.playTarg.hint=["BF"],this.playTarg.hasDefender=!0,this.z=this.stbrnZ}stbrnZ(t){this.buffD(t,this.boof579),t.negDefend("T")}ssperC(){this.faction="T",this.rarity="C",this.name="Stormspear",this.xl=!1,this.playTarg.hint=["HR"],this.text=`Deal ${this.sspb} to a creature.~You may play an additional ${this.name} this turn.`,this.z=this.ssperZ}ssperZ(t){this.smack(t,this.sspb);const i=G.freeCard(this.code);i.condition.cardCode="STP"}get sspb(){return this.lValN([3,8,12])}tanglC(){this.faction="U",this.rarity="R",this.name="Tangle",this.xl=!1;let t="";this.level===3?t=" You gain health equal to that creature's attack.":this.playTarg.hint=["KL"],this.text=`Destroy a ${y.levelGateText(this.level+1)}creature with Mobility.${t}`,this.playTarg.level=D.ddf2(this.level+1),this.playTarg.hasMobility=!0,this.level===1&&(this.hints=["LG"]),this.z=this.tanglZ}tanglZ(t){this.kill(t),this.level===3&&this.balm("F",t.attack)}tpactC(){this.faction="N",this.rarity="C",this.name="Tarsian Pact";const t=this.boof235;this.text=`Give a Nekrium creature ${y.jr9(t,t,!0)} and Regenerate ${t}.`,this.playTarg.hint=["BF"],this.playTarg.faction="N",this.z=this.tpactZ}tpactZ(t){const i=this.boof235;this.buffD(t,i),this.regn(t,i)}tugC(){this.faction="A",this.rarity="R",this.name="Tech Upgrade",this.playTarg.tribe="RB",this.playTarg.hint=["BF"],this.text=`Give a Robot ${y.jr9(this.boof4612,0)} and Armor ${this.boof236}.`,this.z=this.tugZ}tugZ(t){t.addArmor(this.boof236),this.buffA(t,this.boof4612)}totsC(){this.faction="N",this.rarity="T",this.name="Tendrils Of Twilight",this.free=!0;const t=-this.boof7911;this.text=`Give an enemy creature ${y.jr9(-1,-1)}.~If that creature is opposing a friendly Duskmaw, give that creature ${y.jr9(t,t)} instead.`,this.playTarg.player="E",this.z=this.totsZ}totsZ(t){const i=t.opposed;let r=!1;i&&(r=Vt.extractCardCode(i.code)==="DTD");const n=r?-this.boof7911:-1;this.buffD(t,n)}txbnC(){this.faction="U",this.rarity="R",this.name="Toxic Boon";const t=this.boof357;this.text=`Give an enemy creature Poison ${t}, or give a friendly creature ${y.jr9(t,t)}.`,this.z=this.txbnZ}txbnZ(t){const i=this.boof357;t.owner===T.activeA?this.buffD(t,i):t.addPoison(i)}get tspois(){return this.lValN([5,7,12])}sporeC(){this.faction="U",this.rarity="C",this.name="Toxic Spores",this.text=`Give a creature Poison ${this.tspois}.`,this.playTarg.hint=["PN"],this.z=this.sporeZ}sporeZ(t){t.addPoison(this.tspois)}tremcC(){this.faction="T",this.rarity="C",this.name="Tremorcharge",this.text=`Give a Tempys creature ${y.jr9(0,this.boof4812)} and Mobility ${this.level}.`,this.playTarg.faction="T",this.playTarg.hint=["BF"],this.z=this.tremcZ}tremcZ(t){this.buffH(t,this.boof4812),this.wings(t,this.level)}uboltC(){this.faction="T",this.rarity="R",this.name="Uranti Bolt",this.xl=!1,this.text=`Deal ${this.ubzap} damage to a creature.~It gets Defender until the end of the next turn.`,this.z=this.uboltZ}uboltZ(t){this.smack(t,this.ubzap);const i=b.mod("DF",!0);i.expiry="EN",this.modA(t,i)}get ubzap(){return this.lValN([3,10,20])}urstC(){this.faction="U",this.rarity="C",this.name="Ursine Strength";const t=this.boof3711;this.playTarg.hint=["BF"],this.text=`Give a creature ${y.jr9(t,t)}. ${this.rankT()}, it gets an additional ${y.jr9(2,2)}.`,this.z=this.urstZ}urstZ(t){const i=this.boof3711+(T.getActive().rank>this.level?2:0);this.buffD(t,i)}vensC(){this.faction="U",this.rarity="C",this.name="Venomstrike",this.playTarg.hint=["PN"],this.text=`Give a creature Poison ${this.boof468}.~You may play an additional ${this.name} this turn.`,this.z=this.vensZ}vensZ(t){t.addPoison(this.boof468);const i=G.freeCard(this.code);i.condition.cardCode="VSK"}vgraC(){this.faction="U",this.rarity="C",this.name="Verdant Grace",this.playTarg.player="F",this.text=`Heal ${this.boof101520} damage from a friendly creature and ${this.boof246} health from each other friendly creature.`,this.z=this.vgraZ}vgraZ(t){t.heal(this.boof101520);const i=this.boof246;m.creatByTarget(b.crFriendNotMeTarg(t.id)).forEach(r=>{r.heal(i)})}vrdsC(){this.faction="U",this.rarity="C",this.name="Verdant Sphere";const t=this.boof5812;this.text=`Give a creature ${y.jr9(0,t)} and you gain ${t} health.`,this.playTarg.hint=["BF"],this.z=this.vrdsZ}vrdsZ(t){const i=this.boof5812;this.buffH(t,i),this.balm(T.getActive(),i)}vrshC(){this.faction="U",this.rarity="R",this.name="Victory Rush";const t=this.level+3,i=y.jr9(t,t);this.text=`Give a friendly creature ${i}. If a Raid occured this turn, give it an additional ${i}.`,this.playTarg.player="F",this.z=this.vrshZ}vrshZ(t){const i=(this.level+3)*(G.ffs>2?2:1);this.buffD(t,i)}vglchC(){this.faction="N",this.rarity="R",this.name="Vigor Leech";const t=this.boof369n;this.text=`Give an enemy creature ${y.jr9(t,t)}, or give a friendly creature Regenerate ${-t}.`,this.z=this.vglchZ}vglchZ(t){const i=this.boof369n;t.owner===T.activeA?this.regn(t,-i):this.buffD(t,i)}vembC(){this.faction="N",this.rarity="C",this.name="Vyric's Embrace",this.playTarg.hint=["DB"];const t=this.boof468,i=-t;this.text=`Give a creature ${y.jr9(i,i)}.~You gain ${t} health.`,this.z=this.vembZ}vembZ(t){const i=this.boof468;this.buffD(t,-i),this.balm(T.getActive(),i)}warC(){this.faction="A",this.rarity="H",this.name="Warmonger Mod";let t=this.level,i=3;this.level===1&&(this.playTarg.level="LN",i=2,t=2),this.playTarg.hint=["BF"],this.text=`Give a ${y.levelGateText(i)}creature ${t}x attack.`,this.z=this.warZ}warZ(t){const i=this.level===3?2:1;this.buffA(t,t.attack*i)}xwillC(){this.faction="N",this.rarity="H",this.name="Xrath's Will",this.xl=!1;const t=this.boof3612;this.text=`Destroy an enemy creature with ${t} or less attack.~You may play an additional Zombie this turn.`,this.playTarg.player="E",this.playTarg.maxAttack=t,this.level<3&&(this.hints=["LG"]),this.z=this.xwillZ}xwillZ(t){this.kill(t);const i=G.freeCard(this.code);i.condition.tribe="ZB"}}class Yr extends E{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Crux, Metamind Rogue",this.iAttack=this.boof71217,this.iHealth=this.boof4812,this.tribe.push("MM"),this.hints=["RD"],this.text=`Forge: If Crux is your only friendly creature, it gets Armor ${this.level+2}.~Upgrade: Give an enemy creature ${y.jr9(-this.iHealth,0)}.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("FR");const n=r.jr4("UP");return n.interactive=!0,r}handleAction(t){const i=m.ddf6(t);this.buffA(i,-this.iHealth),this.logAct(!1,i),S.actionDone(!0)}jr8(t){if(t.trigger.type==="UP"){const i=D.toActions(b.crEnemyActTarg("CARD",this.code,""));i.length===0?H.triggerDone():S.ddf5(i)}else if(t.trigger.type==="FR"){const i=m.creatByTarget(b.crFriendTarg());i.length===1&&i[0].addArmor(this.level+2),H.triggerDone()}}}class Kr extends E{constructor(t){super(t),this.faction="T",this.rarity="T",this.name="Cryophoenix",this.iAttack=this.boof3711,this.iHealth=this.iAttack+3,this.iMobile=this.lValN([0,0,1]),this.tribe.push("PX"),this.text=`When ${this.name} enters play or moves, deal damage equal to its attack to the opposing creature.~If there is no opposing creature, deal that damage to the enemy player instead.`}image(t){return this.rawImage(`${"PHC"}${this.level}`,t)}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FK");return n.bonus=this.playerNug(0,-this.iAttack,"TX"),r.jr4("EF"),r}ddf8(t){return t.event.creatId===t.creatId}jr8(t){const r=W.toCreature(t.event).creature,n=r.opposed;n?this.smack(n,r.attack):(this.ouch(!r.owner,r.attack),this.anim8(r)),H.triggerDone()}}class Ot extends E{cons(t){({["BOF"]:()=>this.bofC(),["CTM"]:()=>this.ctmC(),["DFB"]:()=>this.dfbC(),["GGB"]:()=>this.ggbC(),["GGD"]:()=>this.ggdC(),["GGR"]:()=>this.ggdrC(),["GGP"]:()=>this.ggpC(),["GGW"]:()=>this.ggwC(),["MHR"]:()=>this.mhermC(),["NGT"]:()=>this.ngauntC(),["SRH"]:()=>this.sharvC(),["SPR"]:()=>this.sprC(),["YNS"]:()=>this.yuruC()})[t]()}trigB;bDraw=!1;constructor(t){super(t),this.cons(this.cardCode())}t;d;jr3(t,i){const r=super.jr3(t,i),n=r.jr4("DS");return n.bonus=this.trigB,n.batch=this.bDraw,r}ddf8(t){return this.t(t)}truLive(t){return m.creatByTr(t).status==="A"}jr8(t){this.d(t),H.triggerDone()}friendTribeTest(t,i,r){return i.id===t.id||t.owner===i.owner&&t.isTribe(r)&&Ot.itDiedFirst(t.id,i.id)}bofC(){this.faction="N",this.rarity="C",this.name="Bride of Frankenbaum",this.iAttack=this.boof5813,this.iHealth=this.iAttack+1,this.tribe.push("AB"),this.hints=["ZZ-1"];const t=this.boof234;this.text=`When a friendly Abomination is destroyed, you gain ${t} health.`,this.trigB=this.playerNug(t*2,0,"TW"),this.bDraw=!0,this.t=this.dfbT,this.d=this.bofD}bofD(t){this.balm(t.owner,this.boof234,t.draw),t.draw&&this.anim8(m.creatByTr(t))}ctmC(){this.faction="N",this.rarity="L",this.name="Cyrus, the Merciless",this.iAttack=this.boof359,this.iHealth=this.iAttack+1,this.tribe.push("GG"),this.text=`Formation: Destroy each other creature with ${this.boof579} or less attack.~Whenever a creature is destroyed, Cyrus gets ${y.jr9(1,1)}.`,this.trigB=this.buffNug(2,2,"TS"),this.bDraw=!0,this.t=this.truLive,this.d=this.ctmR}ctmR(t){m.creatByTr(t).buff(1,1,this.bFac(t))}dfbC(){this.faction="N",this.rarity="R",this.name="Dr. Frankenbaum",this.iAttack=this.boof6914,this.iHealth=this.iAttack-1,this.tribe.push("AB");const t=this.boof234;this.text=`When a friendly Abomination is destroyed, deal ${t} damage to the enemy player.`,this.trigB=this.playerNug(0,t*-2,"TX"),this.bDraw=!0,this.t=this.dfbT,this.d=this.dfbD}dfbT(t){const i=W.toCreature(t.event).creature;return this.friendTribeTest(i,m.creatByTr(t),"AB")}dfbD(t){this.ouch(!t.owner,this.boof234,t.draw),t.draw&&this.anim8(m.creatByTr(t))}ggbC(){this.faction="N",this.rarity="H",this.name="Grimgaunt Betrayer",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.tribe.push("DF","GG");const t=-this.level;this.text=`When a friendly Darkforged is destroyed, the creature opposing it gets ${y.jr9(t,t)}.`,this.trigB=this.buffNug(this.level,this.level,"TW"),this.t=this.ggbT,this.d=this.ggbD}ggbT(t){const i=W.toCreature(t.event).creature;return this.friendTribeTest(i,m.creatByTr(t),"DF")?i.opposed:!1}ggbD(t){const i=W.toCreature(t.event).creature.opposed;i&&(this.buffD(i,-this.level),this.logAct(!1,i))}ggdC(){this.faction="N",this.rarity="L",this.name="Grimgaunt Devourer",this.iAttack=this.boof579,this.iHealth=this.iAttack-2,this.tribe.push("GG"),this.text=`When a creature is destroyed, ${this.name} gets ${y.jr9(this.level,this.level)}.`,this.trigB=this.multNug(this.buffNug(this.level,this.level,"TS"),2),this.bDraw=!0,this.t=this.truLive,this.d=this.ggdD}ggdD(t){m.creatByTr(t).buff(this.level,this.level,this.bFac(t))}get doomb(){return this.lValN([1,1,2])}ggdrC(){this.faction="N",this.rarity="L",this.name="Grimgaunt Doomrider",this.iAttack=this.boof4712,this.iHealth=this.iAttack+2,this.tribe.push("GG");const t=this.doomb;this.text=`When a friendly creature is destroyed, ${this.name} moves to that creatures lane and gets ${y.jr9(t,t)}. Then give the opposing creature ${y.jr9(-t,-t)}.`,this.trigB=this.multNug(this.buffNug(t,t,"TS"),2),this.t=this.ggdrT,this.d=this.ggdrD}ggdrT(t){const r=W.toCreature(t.event).creature;return r.owner===t.owner&&r.id!==t.creatId?this.truLive(t)&&Ot.itDiedFirst(r.id,t.creatId):!1}ggdrD(t){const i=W.toCreature(t.event).creature;if(!m.searchByLane(i.lane,i.owner)){const n=m.creatByTr(t),c=this.doomb;this.lurk(n,i.lane),this.buffD(n,c);const f=n.opposed;f&&(this.logAct(!1,f),this.buffD(f,-c))}}ggpC(){this.faction="N",this.rarity="H",this.name="Grimgaunt Predator",this.iAttack=this.boof5914,this.iHealth=this.iAttack,this.iMobile=1,this.tribe.push("GG");const t=this.boof246;this.text=`When the opposing creature is destroyed, ${this.name} gets ${y.jr9(t,t)}.`,this.trigB=this.buffNug(t,t,"TS"),this.t=this.ggpT,this.d=this.ggpD}ggpT(t){const i=W.toCreature(t.event);if(i.creature.owner!==t.owner){const r=m.creatByTr(t);return r.status==="A"&&m.oppositeLane(r.lane)===i.creature.lane}return!1}ggpD(t){this.buffD(m.creatByTr(t),this.boof246),this.logAct(!1)}ggwC(){this.faction="N",this.rarity="H",this.name="Grimgaunt Warrior",this.iAttack=this.boof4710,this.iHealth=this.iAttack+1,this.tribe.push("GG");const t=this.boof234;this.text=`When an adjacent creature is destroyed, ${this.name} gets ${y.jr9(t,t)}.`,this.trigB=this.buffNug(t,t,"TS"),this.bDraw=!0,this.t=this.ggwT,this.d=this.ggwD}ggwT(t){const i=W.toCreature(t.event);if(i.creature.owner===t.owner){const r=m.creatByTr(t);return r.status==="A"&&r.adjacent.includes(i.creature.lane)}return!1}ggwD(t){const i=this.boof234;m.creatByTr(t).buff(i,i,this.bFac(t)),this.logAct(!1)}mhermC(){this.faction="U",this.rarity="L",this.name="Malice Hermit",this.iAttack=this.boof4812,this.iHealth=this.iAttack,this.tribe.push("YT");const t=this.boof124;this.text=`Forge: Each other creature gets Poison ${t}.~When a creature with Poison is destroyed, ${this.name} gets ${y.jr9(t,t)}.`,this.trigB=this.multNug(this.buffNug(t,t,"TS"),2),this.bDraw=!0,this.t=this.mhermT,this.d=this.mhermD}mhermT(t){return W.toCreature(t.event).creature.poison>0&&this.truLive(t)}mhermD(t){const i=W.toCreature(t.event);this.logAct(!1,i.creature);const r=this.boof124;m.creatByTr(t).buff(r,r,this.bFac(t))}ngauntC(){this.faction="N",this.rarity="R",this.name="Nightgaunt",this.iAttack=this.boof4815,this.iHealth=this.iAttack+1,this.tribe.push("GG"),this.text=`When a creature is destroyed, ${this.name} gets Regenerate 1.`,this.trigB=this.regnNug(2,"TS"),this.bDraw=!0,this.t=this.truLive,this.d=this.ngauntD}ngauntD(t){m.creatByTr(t).addRegen(1,this.bFac(t))}sharvC(){this.faction="N",this.rarity="C",this.name="Sorrow Harvester",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("AB"),this.text="When a friendly Abomination is destroyed on your turn, draw a card.",this.trigB=this.bonNug(J.dcWeight),this.bDraw=!0,this.t=this.sharvT,this.d=this.sharvD}sharvT(t){const r=W.toCreature(t.event).creature;return!!(r.owner===t.owner&&r.isTribe("AB")&&T.activeA===t.owner&&Ot.itDiedFirst(r.id,t.creatId))}sharvD(t){this.logAct(!1),T.drawCard(t.owner,1),t.draw&&this.anim8(t.creatId)}sprC(){this.faction="N",this.rarity="R",this.name="Spectral Rider",this.iAttack=this.lValN([6,8,13]),this.iHealth=this.iAttack-1,this.tribe.push("GG"),this.text=`When a friendly creature is destroyed, ${this.name} gets ${y.jr9(1,1)}.`,this.trigB=this.buffNug(2,2,"TS"),this.bDraw=!0,this.t=this.sprT,this.d=this.sprD}sprT(t){const i=W.toCreature(t.event);return t.owner===i.creature.owner&&this.truLive(t)}sprD(t){m.creatByTr(t).buff(1,1,this.bFac(t))}yuruC(){this.faction="N",this.rarity="L",this.name="Yuru, the Necrosage",this.iAttack=3,this.iHealth=this.iAttack,this.iDefend=!0,this.tribe.push("HM"),this.level===1&&(this.hints=["ZZ-1"]);const t=O.getCard(this.syc());this.text=`When an adjacent non-Spirit creature is destroyed, put a ${y.tokName(t)} into that lane.`,this.trigB=this.spawnNug(t,"TX"),this.t=this.yuruT,this.d=this.yuruD}yuruT(t){const i=m.creatByTr(t),n=W.toCreature(t.event).creature;return!!(n.owner===i.owner&&i.adjacent.includes(n.lane)&&!n.isTribe("ST")&&Ot.itDiedFirst(n.id,i.id))}yuruD(t){const i=W.toCreature(t.event);this.poot(this.syc(),t.owner,i.creature.lane)}syc(){return "XYR"+this.level}static itDiedFirst(t,i){if(t===i)return!0;let r=!1;const n=Ft.findDeathTime(i);if(k.isUn(n))r=!0;else{const c=Ft.findDeathTime(t);(k.isUn(c)||c<=n)&&(r=!0)}return r}}class Xr extends Ot{get formation(){return!0}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FM"),r}jr8(t){if(t.trigger.type==="FM"){const i=b.crNotMeTarg(t.creatId);i.maxAttack=this.boof579;const r=m.creatByTarget(i);if(r.length>0){const n=R.tick();r.forEach(c=>this.kill(c,n))}H.triggerDone()}else super.jr8(t)}}class Ve extends E{cons(t){({["ATP"]:()=>this.phagC(),["PLI"]:()=>this.pimpC(),["SSH"]:()=>this.sshmC(),["TPG"]:()=>this.pillC(),["TMG"]:()=>this.grootC(),["VIN"]:()=>this.vintC()})[t]()}forgTargets(){const t=this.t();return R.aiActive?yt.uniqueContent(t):t}ftext="";constructor(t){super(t),this.cons(this.cardCode()),this.text="Forge: "+this.ftext,this.ftext=""}t;f;jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");return n.interactive=!0,r}handleAction(t){const i=m.jr5(t.param);this.f(t.position,i),this.anim8(i),ut.popMode(),S.actionDone(!0)}jr8(t){const i=this.cardCode()==="VIN";if(i&&R.aiActive)H.triggerDone();else{const r=this.forgTargets();if(r.length>0){let n;i?n=[]:n=r.map(f=>{const p=b.deckSelectAction("CARD",f.cardCode,f.sourceIdx);return p.param=t.creatId,p.host=this.code,p});const c=S.noneEndTrigger();c.param="PM",n.push(c),yt.showCustomDeck(r,n)}else H.triggerDone()}}hdiscardF(t,i){const r=T.toPlayer(!i.owner),n=r.hand[t];xt.cardDiscard(r,t),r.discard.push(n)}phagC(){this.faction="U",this.rarity="H",this.name="Aetherphage",this.iAttack=this.lValN([7,10,16]),this.iHealth=this.boof3612,this.tribe.push("IN"),this.ftext=`Look at the ${y.levelGateText(this.level)}spells in the enemy player's hand and choose one. The enemy player discards the chosen spell.`,this.t=this.phagT,this.f=this.hdiscardF}phagT(){const t=T.getInactive(),i=b.target("TH");return i.player=T.toTarget(t),i.level=D.ddf2(this.level),i.card="S",yt.generateContent(t.hand,!1,i)}pimpC(){this.faction="N",this.rarity="R",this.name="Plunder Imp",this.iAttack=this.boof61016,this.iHealth=this.iAttack-1,this.tribe.push("DM");const t=this.boof369;this.ftext=`Look at the creatures with ${t} or less attack in the enemy player's hand and choose one. The enemy player discards the chosen creature.`,this.t=this.pimpT,this.f=this.hdiscardF}pimpT(){const t=T.getInactive(),i=b.target("TH");return i.player=T.toTarget(t),i.maxAttack=this.boof369,i.card="C",yt.generateContent(t.hand,!1,i)}sshmC(){this.faction="U",this.rarity="H",this.name="Soothsayer Hermit",this.iAttack=this.boof61016,this.iHealth=this.iAttack-1,this.tribe.push("LP");let t="";this.level===3?t="level 3 or lower ":t=y.levelGateText(this.level),this.ftext=`You may put a ${t}creature from your discard pile into your hand.`,this.t=this.sshmT,this.f=this.sshmF}sshmT(){const t=T.getActive(),i=b.target("TD");return i.player=T.toTarget(t),i.card="C",this.level===3?i.level="HR":i.level=D.ddf2(this.level),yt.generateContent(t.discard,!1,i)}sshmF(t,i){const r=T.toPlayer(i.owner),n=r.discard.splice(t,1);xt.addCard(r,n[0],!0)}pillC(){this.faction="N",this.rarity="H",this.name="Tomb Pillager",this.iAttack=this.boof5915,this.iHealth=this.iAttack+1,this.tribe.push("ZB"),this.consistent=this.level>1,this.ftext="You may banish a Nekrium card from your discard pile.",this.t=this.pillT,this.f=this.pillF}pillT(){const t=T.getActive(),i=b.target("TD");return i.player=T.toTarget(t),i.faction="N",yt.generateContent(t.discard,!1,i)}pillF(t,i){T.toPlayer(i.owner).discard.splice(t,1)}grootC(){this.faction="U",this.rarity="R",this.name="Toorgmai Guardian",this.iAttack=this.boof4711,this.iHealth=this.iAttack,this.tribe.push("PL");const t=this.boof358;this.ftext=`You may banish a Plant from your discard pile. If you do, ${this.name} gets ${y.jr9(t,t)}.`,this.t=this.grootT,this.f=this.grootF}grootT(){const t=T.getActive(),i=b.target("TD");return i.player=T.toTarget(t),i.tribe="PL",yt.generateContent(t.discard,!1,i)}grootF(t,i){T.toPlayer(i.owner).discard.splice(t,1),this.buffD(i,this.boof358)}vintC(){this.faction="A",this.rarity="C",this.name="Vault Intruder",this.iAttack=this.boof71218,this.iHealth=this.boof5914,this.tribe.push("RB"),this.ftext="Look at the enemy player's hand.",this.t=this.vintT,this.f=(t,i)=>{}}vintT(){const t=T.getInactive(),i=b.target("TH");return i.player=T.toTarget(t),yt.generateContent(t.hand,!1,i)}}class qr extends E{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Darkheart Conjurer",this.iAttack=this.boof4813,this.iHealth=this.boof71116,this.tribe.push("HM"),this.text=`When you play a spell, give a friendly creature Regenerate ${this.boof135}.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("PC");return n.interactive=!0,n.bonus=this.regnNug(this.boof135,"TW"),r}handleAction(t){const i=m.ddf6(t);this.logAct(!1,i),this.regn(i,this.boof135),S.actionDone(!0)}ddf8(t){return t.event.playerA===t.owner&&O.getCard(t.event.cardCode).type==="S"}jr8(t){const i=b.crFriendActTarg("CARD",this.code,"");i.canRegen=!0;const r=D.toActions(i);r.length===0?H.triggerDone():(r.push(S.noneEndTrigger()),S.ddf5(r))}}class jr extends At{jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}jr8(t){m.qEnemyCreats().forEach(i=>{i.addPoison(6)}),H.triggerDone()}}class Jr extends E{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Demara's Pitguard",this.iAttack=this.boof6914,this.iHealth=this.iAttack+2,this.tribe.push("NG"),this.text=`The opposing creature has Poison ${this.boof248}.`}jr3(t,i){const r=super.jr3(t,i),n=r.addEffect("PS",this.code);return n.area="A",r}enforceEffect(t){const i=t.status==="A",r=m.oppositeLane(t.lane);m.qPlayerCreats(!t.owner).forEach(n=>{n.lane===r&&i?n.addModSafe(b.mod("PN",this.boof248,t.id)):n.removeModSafe(t.id)})}}class Qr extends E{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Demonweb Watcher",this.iAttack=this.boof4714,this.iHealth=this.boof71218,this.tribe.push("SP");const i=this.boof246n;this.text=`When an enemy creature with Aggressive deals battle damage, it gets ${y.jr9(i,i)}.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("DM");return n.bonus=this.buffNug(this.level,this.level),r}ddf8(t){const i=W.toDamage(t.event);return i.battle&&i.isCreatSrc&&i.srcCreat.owner!==t.owner&&i.srcCreat.aggressive}jr8(t){const i=W.toDamage(t.event);this.logAct(!1,i.srcCreat),this.buffD(i.srcCreat,this.boof246n),H.triggerDone()}}class _r extends E{constructor(t){super(t),this.faction="U",this.rarity="T",this.name="Dino Knight",this.iAttack=this.boof81218,this.iHealth=this.iAttack,this.tribe.push("DN"),this.iAggro=!0,this.iBT=!0,this.maxLevel=this.level,this.minLevel=this.level;const i=this.boof357;this.text=`When this ${y.dbdtap()}, heal ${i} damage from each other friendly creature.~Vengeance: Put a level ${this.level} Bron, Wild Tamer into this lane.`}image(t){return this.fixedImage(t)}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("VN");n.bonus=this.buffNug(this.iAttack,this.iHealth);const c=r.jr4("DM");return c.bonus=this.buffNug(0,this.boof357,"TP"),r}ddf8(t){return t.event.battle&&!t.event.isCreatTarg&&t.event.isCreatSrc&&t.event.srcId===t.creatId}jr8(t){if(t.trigger.type==="VN"){const i=m.creatByTr(t);this.poot("BWT"+this.level,i.owner,i.lane),H.triggerDone()}else if(t.trigger.type==="DM"){const i=this.boof357,r=b.crNotMeTarg(t.creatId);r.player=T.toTarget(t.owner),m.creatByTarget(r).forEach(c=>c.heal(i)),H.triggerDone()}}}class ts extends kt{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Discordant Strike";const i=-this.boof4610;this.text=`Give an enemy creature ${y.jr9(i,0)}.~Allied Nekrium: Give an enemy creature ${y.jr9(0,i)}.`}playTargets(){return[b.crEnemyActTarg("CARD",this.code,"P1")]}canPlay(){return m.qEnemyCreats().length>0}handleAction(t){const i=k.deTil(t.param),r=-this.boof4610,n=m.ddf6(t);i[0]==="P1"?(this.logSpell(n),this.buffA(n,r),G.allied("N")?S.ddf5(D.toActions(b.crEnemyActTarg("CARD",this.code,"P2"))):S.spellCast()):(this.logSpell(n),n.buff(0,r,"N"),S.spellCast())}}class es extends kt{constructor(t){super(t),this.faction="U",this.rarity="R",this.name="Dissolve",this.free=this.level===3,this.level<3&&(this.hints=["LG"]),this.text=`Double the Poison on ${this.level===1?"an":"each"} enemy creature.`}canPlay(){return m.creatByTarget(this.poisTarg()).length>0}playTargets(){return this.level===1?[this.poisTarg()]:[D.boardTarget("CARD",this.code)]}handleAction(t){if(this.level===1){const i=m.ddf6(t);this.logSpell(i),i.addPoison(i.poison)}else this.logSpell(),m.creatByTarget(this.poisTarg()).forEach(r=>{r.addPoison(r.poison)});S.spellCast()}poisTarg(){const t=b.crEnemyActTarg("CARD",this.code,"");return t.hasPoison=!0,t}}class is extends E{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Doppelbot",this.iAttack=this.boof4812,this.iHealth=this.iAttack,this.tribe.push("RB");let i="";const r=this.lValN([0,5,10]);this.level>1&&(i=`, then give it ${y.jr9(r,0)}`),this.text=`Activate: Look at the creatures in the enemy player's hand and choose one. Replace ${this.name} with the chosen creature${i}.`;const n=this.avgCreatureStats();this.bonus=this.buffNug(r+n[0]-this.iAttack,n[1],"TW")}canActivate(t){return T.toPlayer(!t.owner).hand.some(r=>O.getCard(r).type==="C")}startActivation(t){let i;if(J.simOn)i=[{cardCode:"VND"+this.level,sourceIdx:0,cardCount:0}];else{const n=T.getInactive(),c=b.target("TH");c.player=T.toTarget(n),c.card="C",i=yt.generateContent(n.hand,!1,c),R.aiActive&&(i=yt.uniqueContent(i))}const r=i.map(n=>{const c=b.deckSelectAction("CARD",n.cardCode,n.sourceIdx);return c.param=t.id,c.host=this.code,c});yt.showCustomDeck(i,r)}handleAction(t){this.logAct(!0);const i=m.jr5(t.param),r=this.replc(t.card,i.owner,i.lane);this.level>1&&r&&this.buffA(r,this.level===3?10:5),ut.popMode(),i.endActivation()}}class rs extends kt{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Dragonwake",this.text=`Search your deck for a ${y.levelGateText(this.level+1)}Dragon and Spawn a copy of it. It gets Aggressive${this.level===3?".":' and "At the end of your turn, destroy this."'}`}canPlay(){return this.dragoons(!1).length>0&&m.ddf1().length<5}playTargets(){const t=D.boardTarget("CARD",this.code);return t.param="P1",[t]}dragoons(t){const i=T.getActive(),r=b.target("DK");r.player=T.toTarget(i),r.level=D.ddf2(this.level+1),r.tribe="DG";const n=yt.generateContent(i.deck,!1,r);return t?yt.uniqueContent(n):n}handleAction(t){if(t.param==="P1"){const i=this.dragoons(R.aiActive),r=i.map(c=>{const f=b.deckSelectAction("CARD",c.cardCode,c.sourceIdx);return f.host=this.code,f}),n=S.cancelAction();n.param="PM",r.push(n),yt.showCustomDeck(i,r)}else{const i=this.spawn(t.card,T.activeA);if(i){if(this.logSpell(i),i.aggressive=!0,this.level<3){const r=i.jr4("TE",this.code);r.creatId=i.id,r.changes=!0}}else this.logSpell();ut.popMode(),S.spellCast()}}ddf8(t){return!0}jr8(t){const i=m.creatByTr(t);i.status==="A"&&this.kill(i),H.triggerDone()}}class ss extends E{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Dread",this.iAttack=this.boof6912,this.iHealth=this.boof234,this.tribe.push("AB"),this.text=`When ${this.name} enters play, it has a 50% chance to get the ability "Vengeance: Spawn a level ${this.level} Dread".`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("EF"),r}ddf8(t){return t.event.creatId===t.creatId}jr8(t){if(t.event.code==="ENT"){if(k.randInt(0,2)===0){const i=W.toEnterField(t.event),r=i.creature.jr4("VN");r.changes=!0,r.bonus=this.buffNug(this.iAttack,this.iHealth),this.anim8(i.creature)}}else this.spawn(this,t.owner);H.triggerDone()}}class as extends E{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Dysian Broodqueen",this.iAttack=this.boof248,this.iHealth=this.boof61117,this.tribe.push("NG");const i=O.getCard(this.bfc()),r=`Destroy an enemy ${y.levelGateText(this.level)}creature.`;this.text=`Activate, destroy another friendly creature: ${r}~Allied Uterra: Put a ${y.tokName(i)} into an available lane.`,this.bonus=this.multNug(this.avgSpawnNug(),.5),this.bonus.threat="TX"}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");return n.interactive=!0,r}canActivate(t){return this.enemies(t.id).length>0&&this.friends(t.id).length>0}startActivation(t){const i=this.friends(t.id);i.push(S.cancelAction()),S.ddf5(i)}handleAction(t){const i=k.deTil(t.param);if(i[1]==="P1"){const r=this.enemies(i[0],m.ddf6(t).id);r.push(S.cancelAction()),S.ddf5(r)}else if(i[1]==="P2"){this.logAct(!0);const r=R.tick();this.kill(m.jr5(i[2]),r),this.kill(m.ddf6(t),r),m.jr5(i[0]).endActivation()}else m.birth(this.bfc(),"P",t.playerA,t.lane,"U"),S.actionDone(!0)}jr8(t){if(G.allied("U")){const i=b.emptyPlayerActTarg("F","CARD",this.code,t.trigger.creatId),r=D.toActions(i);r.length>0?S.ddf5(r):H.triggerDone()}else H.triggerDone()}friends(t){const i=b.crFriendNotMeActTarg("CARD",t,this.code,k.enTil(t,"P1"));return D.toActions(i)}enemies(t,i=""){const r=b.crEnemyActTarg("CARD",this.code,k.enTil(t,"P2",i));return r.level=D.ddf2(this.level),D.toActions(r)}bfc(){return "BRF"+this.level}}class ns extends kt{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Dysian Siphon";const i=this.boof357;this.text=`Give an enemy creature ${y.jr9(-i,-i)}.~Allied Uterra: Give a friendly creature ${y.jr9(i,i)}. `}canPlay(){return m.creatByTarget(this.firstT()).length>0}playTargets(){return[this.firstT()]}firstT(){return b.crEnemyActTarg("CARD",this.code,"P1")}handleAction(t){const i=k.deTil(t.param),r=this.boof357,n=m.ddf6(t);if(i[0]==="P1"){const c=b.crFriendActTarg("CARD",this.code,k.enTil("P2",n.id)),f=D.toActions(c);G.allied("U")&&f.length>0?(f.push(S.cancelAction()),S.ddf5(f)):(this.logSpell(n),this.buffD(n,-r),S.spellCast())}else{const c=m.jr5(i[1]);this.logSpell(c,n),this.buffD(c,-r),n.buff(r,r,"U"),S.spellCast()}}}class os extends E{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Dysian Sludge",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("OZ");const i=-this.boof135;this.text=`Forge: If you have health over 120, you may put a copy of ${this.name} into another lane.~When this enters play, if you have a Nekrium card in hand, the opposing creathure gets ${y.jr9(i,i)}.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");return n.interactive=!0,n.customCode=r.id,r.jr4("EF"),r}ddf8(t){return t.event.creatId===t.creatId}jr8(t){const i=W.toEnterField(t.event);if(i.forged&&i.creature.id===t.trigger.customCode)if(T.getActive().health>120){const r=b.actionTarget("TF","CARD",this.code,"");r.player="F",r.hint=["FL"],r.lanes=m.laneIdx.filter(c=>c!==i.creature.lane);const n=D.toActions(r);n.push(S.noneEndTrigger()),S.ddf5(n)}else H.triggerDone();else{const r=i.creature.opposed;if(r&&G.allied("N",i.creature.owner)){const n=-this.boof135;r.buff(n,n,"N")}H.triggerDone()}}handleAction(t){this.replc(this,t.playerA,t.lane),S.actionDone(!0)}}class hs extends E{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Ebonskull Diabolist",this.iAttack=this.boof137,this.iHealth=this.boof4814,this.tribe.push("VP"),this.text=`Forge: At the start of your next turn, if ${this.name} is in play, you may play an additional card.`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}ddf8(t){return t.event.playerA===t.owner}jr8(t){const i=m.creatByTr(t);if(t.trigger.type==="FR"){const r=i.jr4("TS");r.changes=!0,r.bonus=this.avgSpawnNug(),r.bonus.threat="TX",H.triggerDone()}else if(t.event.code==="TRS"){const r=b.trigIdx(i.triggers,t.trigger);r>-1&&i.removeTrigger(i.triggers[r]),G.freePlay(),this.anim8(i),this.logAct(!1),H.triggerDone()}}}class ls extends E{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Echowisp",this.iAttack=this.lValN([7,8,10]),this.iHealth=this.boof135,this.tribe.push("ST"),this.level===3?this.text="Forge: Put a copy of Echowisp into each available lane.":this.text="Forge: You may put a copy of Echowisp into an adjacent lane."}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");return n.interactive=this.level<3,r}jr8(t){if(this.level<3){const i=b.actionTarget("TF","CARD",this.code,"");i.player="F",i.lanes=m.creatByTr(t).adjacent,i.hint=["FL"];const r=D.toActions(i);r.push(S.noneEndTrigger()),S.ddf5(r)}else{const i=b.emptyPlayerActTarg("F","CARD",this.code,t.trigger.creatId);let r=D.toActions(i);if(r.length>0){const n=R.tick();r.forEach(c=>this.poot(this,c.playerA,c.lane,n))}H.triggerDone()}}handleAction(t){this.poot(this,t.playerA,t.lane),S.actionDone(!0)}}class Vi extends E{cons(t){({["BTB"]:()=>this.bbtC(),["TVG"]:()=>this.tvgC()})[t]()}wipe=!1;constructor(t){super(t),this.cons(this.cardCode())}m;jr3(t,i){const r=super.jr3(t,i),n=r.addEffect("AR",this.code);return n.area="A",r}enforceEffect(t){if(t.armor>0){const i=this.m(t);if(this.wipe){const r=t.mods.find(n=>n.granter===t.id);r&&r.value!==t.armor&&t.removeModSafe(t.id)}t.addModSafe(i)}else t.removeModSafe(t.id)}bbtC(){this.faction="A",this.rarity="R",this.name="Batterbot",this.iAttack=this.boof6914,this.iHealth=this.iAttack+2,this.tribe.push("RB","DN"),this.wipe=!0,this.text=`${this.name} gets +Attack equal to its Armor.`,this.m=this.bbtM}bbtM(t){return b.mod("AT",t.armor,t.id)}tvgC(){this.faction="A",this.rarity="R",this.name="Tower Vanguard",this.iAttack=this.lValN([3,6,11]),this.iHealth=this.lValN([7,13,21]),this.tribe.push("RB");const t=this.boof247;this.text=`While ${this.name} has Armor, it gets ${y.jr9(t,0)}.`,this.m=this.tvgM}tvgM(t){return b.mod("AT",this.boof247,t.id)}}class Qe extends E{cons(t){({["CIN"]:()=>this.cyinC(),["HWM"]:()=>this.hlwmC(),["LSP"]:()=>this.lspC(),["SSI"]:()=>this.ssinC(),["WTA"]:()=>this.weguC()})[t]()}attThreshold=0;constructor(t){super(t),this.cons(this.cardCode())}m;jr3(t,i){const r=super.jr3(t,i);return r.addEffect("AT",this.code),r}enforceEffect(t){this.attThreshold<=t.attack?this.m(t).forEach(i=>{t.addModSafe(i)}):t.removeModSafe(t.id)}cyinC(){this.faction="A",this.rarity="R",this.name="Cypien Infiltrator",this.iAttack=this.boof61117,this.iHealth=this.iAttack-1,this.tribe.push("HM"),this.attThreshold=this.lValN([7,14,21]),this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets Breakthrough.`,this.m=this.cyinM}cyinM(t){return[b.mod("BT",!0,t.id)]}hlwmC(){this.faction="A",this.rarity="L",this.name="Hinterland Watchman",this.iAttack=this.lValN([4,7,15]),this.iHealth=this.lValN([7,10,20]),this.tribe.push("MC"),this.attThreshold=this.boof51020;const t=this.lValS(["Mobility 3","Armor 5 and Mobility 3","Armor 5, Breakthrough, Aggressive, Mobility 3, and Regenerate 5"]);this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets ${t}.`,this.m=this.hlwmM}hlwmM(t){const i=[b.mod("MB",3,t.id)];return this.level>1&&i.push(b.mod("AR",5,t.id)),this.level===3&&(i.push(b.mod("BT",!0,t.id)),i.push(b.mod("AG",!0,t.id)),i.push(b.mod("RG",5,t.id))),i}lspC(){this.faction="A",this.rarity="C",this.name="Lightshield Patrol",this.iAttack=this.lValN([4,7,15]),this.iHealth=this.boof51020,this.tribe.push("HM"),this.attThreshold=this.iHealth,this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets Armor ${this.boof234}.`,this.m=this.lspM}lspM(t){return[b.mod("AR",this.boof234,t.id)]}ssinC(){this.faction="A",this.rarity="R",this.name="Spiritsteel Infiltrator",this.iAttack=this.boof4815,this.iHealth=this.iAttack+3,this.tribe.push("EN"),this.attThreshold=this.boof51020,this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets Mobility ${this.level} and Armor ${this.boof246}.`,this.m=this.ssinM}ssinM(t){return[b.mod("MB",this.level,t.id),b.mod("AR",this.boof246,t.id)]}weguC(){this.faction="U",this.rarity="L",this.name="Wegu, the Ancient",this.iAttack=0,this.iHealth=1,this.tribe.push("PL"),this.iDefend=!0,this.attThreshold=this.lValN([10,25,100]);const t=this.boof124,i=this.level===3?"it gets Breakthrough and ":"";this.text=`When you gain health, Wegu gets ${y.jr9(t,t)} for each health you gained.~While Wegu has ${this.attThreshold} or more attack, ${i}Negate Defender from it.`,this.m=this.weguM}weguM(t){const i=[b.mod("ND",!0,t.id)];return this.level===3&&i.push(b.mod("BT",!0,t.id)),i}}class zi extends E{friendNotMe(t){const i=b.crNotMeTarg(t.id);return i.player=T.toTarget(t.owner),i}friendNone(t){const i=b.crTarg();return i.player=T.toTarget(t.owner),i.lanes=[],i}jr3(t,i){const r=super.jr3(t,i),n=r.addEffect("PS",this.code);return n.area="C",r}enforcementActive(t){return t.status==="A"}applyEffect(t,i,r){const n=this.friendNotMe(t),c=m.creatByTarget(n),f=m.creatByTarget(r);c.forEach(p=>{f.includes(p)?p.addModSafe(i):p.removeModSafe(t.id)})}}class Pe extends zi{cons(t){({["BWW"]:()=>this.bwwC(),["HTR"]:()=>this.hrtC(),["KKK"]:()=>this.kkkC(),["LVG"]:()=>this.lvgC(),["LTT"]:()=>this.lntC(),["SFE"]:()=>this.sfeC(),["TCN"]:()=>this.tcanC(),["XDV"]:()=>this.xdvC()})[t]()}constructor(t){super(t),this.cons(this.cardCode())}t;m;enforceEffect(t){const i=this.m(t),r=this.enforcementActive(t)?this.t(t):this.friendNone(t);this.applyEffect(t,i,r)}bwwC(){this.faction="T",this.rarity="H",this.name="Borean Windweaver",this.iAttack=this.boof6914,this.iHealth=this.iAttack-1,this.iMobile=this.level,this.tribe.push("WN","AS"),this.text=`Each other friendly creature gets Mobility ${this.level}.`,this.t=this.friendNotMe,this.m=this.bwwM}bwwM(t){return b.mod("MB",this.level,t.id)}hrtC(){this.faction="U",this.rarity="L",this.name="Heart Tree",this.iAttack=0,this.iHealth=this.lValN([10,15,30]),this.iRegen=this.boof246,this.iDefend=!0,this.tribe.push("PL"),this.text=`Each other friendly creature gets Regenerate ${this.iRegen}.`,this.t=this.friendNotMe,this.m=this.hrtM}hrtM(t){return b.mod("RG",this.iRegen,t.id)}kkkC(){if(this.faction="T",this.rarity="L",this.name="Korok, Khan of Kadras",this.iAttack=this.lValN([4,7,12,18]),this.iHealth=this.lValN([7,12,18,26]),this.iAggro=!0,this.tribe.push("FB"),this.maxLevel=4,this.level>1){const t=this.lValS(["","friendly level 1","friendly level 2 or lower","other friendly"]);this.text=`Each ${t} creature gets Aggressive.`}this.t=this.kkkT,this.m=this.kkkM}kkkM(t){return b.mod("AG",!0,t.id)}kkkT(t){const i=this.friendNotMe(t);return this.level===1?i.lanes=[]:i.level=D.ddf2(this.level-1),i}lvgC(){this.faction="T",this.rarity="T",this.name="Lava Golem",this.iAttack=4,this.iHealth=6,this.maxLevel=1,this.tribe.push("FR","EL"),this.text=`Friendly creature have ${y.jr9(4,0)}.`,this.t=this.friendNotMe,this.m=this.lvgM}lvgM(t){return b.mod("AT",4,t.id)}lntC(){this.faction="T",this.rarity="T",this.name="Lightning Titan",this.iAttack=6,this.iHealth=4,this.maxLevel=1,this.iAggro=!0,this.tribe.push("LT","EL"),this.text="Friendly creature have Aggressive.",this.t=this.friendNotMe,this.m=this.lntM}lntM(t){return b.mod("AG",!0,t.id)}sfeC(){this.faction="T",this.rarity="H",this.name="Shadowflame Elemental",this.iAttack=this.boof4814,this.iHealth=this.iAttack,this.iAggro=!0,this.tribe.push("DF","EL"),this.text="Each other friendly Darkforged gets Aggressive.",this.t=this.sfeT,this.m=this.sfeM}sfeM(t){return b.mod("AG",!0,t.id)}sfeT(t){const i=this.friendNotMe(t);return i.tribe="DF",i}tcanC(){this.faction="A",this.rarity="C",this.name="Tower Cannoneer",this.iAttack=this.lValN([6,12,14]),this.iHealth=this.iAttack-2,this.tribe.push("RB"),this.level===2&&(this.hints=["LB"]),this.text=`Each friendly Defender gets ${y.jr9(this.boof369,0)}`,this.t=this.tcanT,this.m=this.tcanM}tcanM(t){return b.mod("AT",this.boof369,t.id)}tcanT(t){const i=this.friendNotMe(t);return i.hasDefender=!0,i}xdvC(){this.faction="N",this.rarity="H",this.name="Xrath, Dreadnight Of Varna",this.iAttack=this.boof5914,this.iHealth=this.iAttack+1,this.iRegen=this.boof248,this.tribe.push("ZB"),this.text=`Each other friendly Zombie gets Regenerate ${this.iRegen}`,this.t=this.xdvT,this.m=this.xdvM}xdvM(t){return b.mod("RG",this.iRegen,t.id)}xdvT(t){const i=this.friendNotMe(t);return i.tribe="ZB",i}}class Zi extends E{cons(t){({["NXP"]:()=>this.nxpC(),["SKG"]:()=>this.skgC()})[t]()}constructor(t){super(t),this.cons(this.cardCode())}m;jr3(t,i){const r=super.jr3(t,i),n=r.addEffect("PS",this.code);return n.area="C",r}enforceEffect(t){t.lane===3?this.m(t).forEach(i=>{t.addModSafe(i)}):t.removeModSafe(t.id)}nxpC(){this.faction="A",this.rarity="C",this.name="Nexus Pilot",this.iAttack=this.boof358,this.iHealth=this.boof4710,this.tribe.push("HM"),this.text=`While ${this.name} is in the center lane, it gets ${y.jr9(this.iAttack,this.iHealth)}.`,this.m=this.nxpM}nxpM(t){return[b.mod("AT",this.iAttack,t.id),b.mod("HL",this.iHealth,t.id),b.mod("MH",this.iHealth,t.id)]}skgC(){this.faction="A",this.rarity="C",this.name="Skyknight Glider",this.iAttack=this.boof5916,this.iHealth=this.iAttack+1,this.tribe.push("HM"),this.text=`While ${this.name} is in the center lane, it gets Mobility 2.`,this.m=this.skgM}skgM(t){return[b.mod("MB",2,t.id)]}}class li extends E{cons(t){({["CCT"]:()=>this.cctC(),["GHB"]:()=>this.ghbC(),["ISB"]:()=>this.isbC(),["PYG"]:()=>this.pygC()})[t]()}eOpp=!1;constructor(t){super(t),this.cons(this.cardCode())}m;jr3(t,i){const r=super.jr3(t,i),n=r.addEffect("PS",this.code);return n.area="A",r}enforceEffect(t){!!t.opposed===this.eOpp?t.addModSafe(this.m(t)):t.removeModSafe(t.id)}cctC(){this.faction="T",this.rarity="R",this.name="Cloudcleaver Titan",this.iAttack=this.boof4812,this.iHealth=this.lValN([7,10,16]),this.tribe.push("WN","GT"),this.iMobile=this.level;const t=this.boof246;this.text=`While ${this.name} is unopposed, it gets ${y.jr9(t,0)}.`,this.m=this.cctM}cctM(t){return b.mod("AT",this.boof246,t.id)}ghbC(){this.faction="U",this.rarity="R",this.name="Gemhide Basher",this.iAttack=this.boof51016,this.iHealth=this.lValN([3,7,10]),this.tribe.push("DN"),this.eOpp=!0,this.text=`While ${this.name} is opposed, it gets Aggressive.`,this.m=this.ghbM}ghbM(t){return b.mod("AG",!0,t.id)}isbC(){this.faction="T",this.rarity="C",this.name="Iceshard Berserker",this.iAttack=this.boof358,this.iHealth=this.boof61016,this.tribe.push("IC","AS"),this.eOpp=!0,this.text=`While ${this.name} is opposed, it gets ${y.jr9(this.iHealth,0)}.`,this.m=this.isbM}isbM(t){return b.mod("AT",this.iHealth,t.id)}pygC(){this.faction="T",this.rarity="H",this.name="Pyre Giant",this.iAttack=this.boof468,this.iHealth=this.boof234,this.tribe.push("FR","GT"),this.iAggro=!0,this.text=`While ${this.name} is unopposed, it gets ${y.jr9(this.iAttack,0)}.`,this.m=this.pygM}pygM(t){return b.mod("AT",this.iAttack,t.id)}}class Yi extends E{cons(t){({["BRS"]:()=>this.barryC(),["CSR"]:()=>this.cvsC()})[t]()}mPlayer=0;targetPlayer(t){if(this.mPlayer===1)return t.owner;if(this.mPlayer===-1)return!t.owner;throw new Error("didnt write code OBDD")}constructor(t){super(t),this.cons(this.cardCode())}m;jr3(t,i){const r=super.jr3(t,i),n=r.addEffect("PS",this.code);return n.area="C",r}enforceEffect(t){const i=t.status==="A",r=this.targetPlayer(t);i?T.addModSafe(r,this.m(t)):T.removeModSafe(r,t.id)}barryC(){this.faction="A",this.rarity="C",this.name="Barrier Soldier",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("HM"),this.mPlayer=1,this.hints=[this.lValH(["ZZ-1","ZZ-3","ZZ-5"])],this.text=`You get Armor ${this.iHealth}.`,this.m=this.barryM}barryM(t){return b.mod("AR",this.iHealth,t.id)}cvsC(){this.faction="U",this.rarity="C",this.name="Cavern Serpent",this.iAttack=this.boof4914,this.iHealth=this.iAttack,this.tribe.push("SN"),this.mPlayer=-1,this.text=`The enemy player has Poison ${this.boof246}.`,this.m=this.cvsM}cvsM(t){return b.mod("PN",this.boof246,t.id)}}class _e extends zi{cons(t){({["ALG"]:()=>this.algnC(),["ALS"]:()=>this.alstC(),["BTN"]:()=>this.btcC(),["NXA"]:()=>this.aeroC(),["NXT"]:()=>this.ntcC()})[t]()}constructor(t){super(t),this.cons(this.cardCode())}m;nexus=!1;enforcementActive(t){return super.enforcementActive(t)?this.nexus?t.lane===3:!0:!1}enforceEffect(t){const i=this.m(t);let r;this.enforcementActive(t)?(r=this.friendNotMe(t),this.nexus?r.lanes=[1,2,4,5]:r.lanes=t.adjacent):r=this.friendNone(t),this.applyEffect(t,i,r)}algnC(){this.faction="A",this.rarity="R",this.name="Alloyin General",this.iAttack=this.boof246,this.iHealth=this.boof81318,this.tribe.push("HM"),this.text=`Adjacent creatures gets ${y.jr9(this.iAttack,0)}.`,this.m=this.algnM}algnM(t){return b.mod("AT",this.iAttack,t.id)}alstC(){this.faction="A",this.rarity="H",this.name="Alloyin Strategist",this.iAttack=this.boof4814,this.iHealth=this.iAttack+1,this.iMobile=this.level,this.tribe.push("HM");const t=this.boof246;this.text=`Adjacent creatures gets ${y.jr9(t,0)}.`,this.m=this.alstM}alstM(t){return b.mod("AT",this.boof246,t.id)}btcC(){this.faction="A",this.rarity="H",this.name="Battle Techtician",this.iAttack=this.boof3714,this.iHealth=this.boof71117,this.tribe.push("HM"),this.nexus=!0;const t=this.boof248;this.text=`While ${this.name} is in the center lane, each other friendly creature gets ${y.jr9(t,0)}.`,this.m=this.btcM}btcM(t){return b.mod("AT",this.boof248,t.id)}aeroC(){this.faction="A",this.rarity="L",this.name="Nexus Aeronaut",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("HM"),this.iMobile=1;const t=this.boof236;this.nexus=!0,this.text=`While ${this.name} is in the center lane, each other friendly creature gets ${y.jr9(t,0)}. Otherwise this gets Armor ${t}.`,this.m=this.aeroM}aeroM(t){return b.mod("AT",this.boof236,t.id)}ntcC(){this.faction="A",this.rarity="H",this.name="Nexus Techtician",this.iHealth=this.boof6916,this.iAttack=this.iHealth-3,this.tribe.push("HM"),this.nexus=!0;const t=this.boof235;this.text=`While ${this.name} is in the center lane, each other friendly creature gets Armor ${t}.`,this.m=this.ntcM}ntcM(t){return b.mod("AR",this.boof235,t.id)}}class ze extends E{cons(t){({["BWD"]:()=>this.bwdC(),["BTS"]:()=>this.btsC(),["ESC"]:()=>this.escarC(),["EHN"]:()=>this.ethhC(),["POD"]:()=>this.podC(),["RWC"]:()=>this.roamC()})[t]()}targAction(t){this.replc(this.spawnCode,t.playerA,t.lane)}adjacent=!1;optional=!1;needsEmpty=!1;spawnCode="";ftext="";allied="X";constructor(t){super(t),this.cons(this.cardCode());const i=y.forglied(this.allied);this.text=i+": "+this.ftext}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");return n.interactive=!0,r}jr8(t){if(this.cardCode()==="POD"&&!G.patron("U")){H.triggerDone();return}if(this.allied==="X"||G.allied(this.allied)){const i=m.creatByTr(t),r=b.emptyPlayerActTarg("F","CARD",this.code,t.creatId);this.needsEmpty||(r.field="A",r.hint=["FL"],r.lanes=m.laneIdx.filter(c=>c!==i.lane)),this.adjacent&&(r.lanes=i.adjacent);const n=D.toActions(r);n.length>0?(this.optional&&n.push(S.noneEndTrigger()),S.ddf5(n)):H.triggerDone()}else H.triggerDone()}handleAction(t){this.targAction(t),S.actionDone(!0)}bwdC(){this.faction="U",this.rarity="C",this.name="Branchweaver Druid",this.iAttack=1,this.iHealth=1,this.tribe.push("HM"),this.hints=["RT"],this.spawnCode=`${"TFD"}${this.level}`,this.optional=!0;const t=O.getCard(this.spawnCode);this.ftext=`You may put a ${y.tokName(t)} into another lane.`}btsC(){this.faction="U",this.rarity="C",this.name="Brighttusk Sower",this.iAttack=this.boof6810,this.iHealth=this.iAttack,this.tribe.push("TK"),this.level===1&&(this.hints=["ZZ-1"]),this.spawnCode=X.minionCode(this.level),this.optional=!0,this.adjacent=!0;const t=O.getCard(this.spawnCode);this.ftext=`You may put a ${y.tokName(t)} into an adjacent lane.`}escarC(){this.faction="A",this.rarity="H",this.name="Esperian Scarab",this.iAttack=this.boof347,this.iHealth=this.boof5711,this.iArmor=this.boof135,this.tribe.push("RB"),this.allied="U",this.spawnCode=this.code,this.optional=!0,this.ftext=`You may but a copy of ${this.name} into another lane.`}ethhC(){this.faction="U",this.rarity="C",this.name="Ether Hounds",this.iAttack=this.boof369,this.iHealth=this.iAttack,this.tribe.push("ST","WF"),this.needsEmpty=!0,this.spawnCode=this.code,this.ftext="Put a copy of this into an available lane."}podC(){this.faction="U",this.rarity="H",this.name="Patron of Deepwood",this.iHealth=this.boof4713,this.iAttack=this.iHealth+3,this.tribe.push("ST"),this.spawnCode=this.code,this.optional=!0,this.adjacent=!0,this.ftext=`If you have three or more Uterra cards in your hand, you may put a copy of ${this.name} into an adjacent lane.`}roamC(){this.faction="U",this.rarity="C",this.name="Roaming Warclaw",this.iAttack=this.boof61016,this.iHealth=this.iAttack-3,this.tribe.push("DN"),this.spawnCode=`${"RPT"}${this.level}`,this.optional=!0,this.ftext="You may put a 1/1 Raptor into another lane."}}class cs extends E{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Epoch Hawk",this.iAttack=this.boof469,this.iHealth=this.boof71117,this.tribe.push("MC");const i=O.getCard(this.soldier);this.addSp("N",i.iAttack),this.text=`While you have 6 or more cards in hand, this gets "Activate: Put a ${y.tokName(i)} into an available lane."`,this.bonus=this.multNug(this.spawnNug(i,"TX"),.3)}canActivate(t){return T.toPlayer(t.owner).hand.length>5&&m.emptyLanes(t.owner).length>0}startActivation(t){const i=b.emptyPlayerActTarg(t.owner,"CARD",this.code,t.id),r=D.toActions(i);r.push(S.cancelAction()),S.ddf5(r)}handleAction(t){this.logAct(!0),this.poot(this.soldier,t.playerA,t.lane),m.jr5(t.param).endActivation()}ddf8(t){return!0}jr8(t){const i=T.toPlayer(t.owner);T.drawCard(i,1);const r=b.trigIdx(i.triggers,t.trigger);r>-1&&i.triggers.splice(r,1),H.triggerDone()}get soldier(){return "EPS"+this.level}}class ds extends E{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Esperian Sage",this.iAttack=this.boof3510,this.iHealth=this.boof124,this.tribe.push("HM"),this.text=`When ${this.name} enters play, discard and level up a card.~Allied Uterra: You may put a copy of this into another lane.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");n.interactive=!0;const c=r.jr4("EF");return c.interactive=!0,r}handleAction(t){if(t.zone==="H")G.levelAndDiscardA(t),this.anim8(t.param);else{const i=t;m.birth(this.code,"R",i.playerA,i.lane,"U")}S.actionDone(!0)}ddf8(t){return t.event.creatId===t.creatId}jr8(t){if(t.trigger.type==="FR")if(G.allied("U")){const i=m.creatByTr(t),r=b.actionTarget("TF","CARD",this.code,t.creatId);r.player="F",r.lanes=m.laneIdx.filter(c=>c!==i.lane),r.hint=["FL"];const n=D.toActions(r);n.push(S.noneEndTrigger()),S.ddf5(n)}else H.triggerDone();else{const i=b.lvlHandActTarg(this.code,t.creatId),r=D.toActions(i);r.length>0?S.ddf5(r):H.triggerDone()}}}class us extends E{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Esperian Steelplate",this.iAttack=this.boof369,this.iHealth=this.boof6916,this.tribe.push("IN");const i=this.boof358;this.addSp("H",i),this.text=`Activate: Heal ${i} damage from each other friendly creature.~Allied Alloyin: Armor ${this.boof247}.`,this.bonus=this.buffNug(0,i,"TW")}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}canActivate(t){const i=b.crFriendNotMeTarg(t.id);return m.creatByTarget(i).length>0}startActivation(t){const i=D.boardTarget("CARD",this.code);i.param=t.id,S.ddf5(D.toActions([i,D.buttonTarget("CANC")]))}handleAction(t){this.logAct(!0);const i=m.jr5(t.param),r=this.boof358,n=b.crFriendNotMeTarg(i.id);m.creatByTarget(n).forEach(c=>{c.heal(r)}),i.endActivation()}jr8(t){G.allied("A")&&m.creatByTr(t).addArmor(this.boof247),H.triggerDone()}}class fs extends E{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Everflame Phoenix",this.iAttack=this.lValN([7,0,22]),this.iHealth=this.lValN([6,1,15]),this.tribe.push("PX"),this.iMobile=this.lValN([1,0,2]),this.level===2?(this.iDefend=!0,this.text=`When you gain a rank, replace ${this.name} with a level 3 ${this.name}.`,this.hints=["LG"]):this.level===3&&(this.text=`Vengeance: Put a level 2 ${this.name} into this lane.`,this.hints=["ZZ-3"])}jr3(t,i){const r=super.jr3(t,i);if(this.level===2){const n=r.jr4("RU");n.bonus=this.buffNug(10,9,"TH")}else if(this.level===3){const n=r.jr4("VN");n.bonus=this.statSpawnNug(0,1)}return r}ddf8(t){return t.event.playerA===t.owner}jr8(t){if(t.trigger.type==="RU"){const i=m.creatByTr(t);this.replc(`${"EFP"}3`,i.owner,i.lane)}else if(t.trigger.type==="VN"){const r=W.toCreature(t.event).creature;this.replc(`${"EFP"}2`,r.owner,r.lane)}H.triggerDone()}}class gs extends E{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Everflow Eidolon",this.iAttack=this.boof61016,this.iHealth=this.iAttack,this.tribe.push("PL"),this.text=`When ${this.name} gains health, you gain ${this.level===3?"2x ":""}that much health.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("HG");return n.bonus=this.playerNug(this.iHealth/2,0,"TW"),n.batch=!0,r}ddf8(t){return t.event.creatId===t.creatId}jr8(t){const i=this.level===3?2:1;this.balm(t.owner,t.event.healAmt*i,t.draw),t.draw&&this.anim8(t.creatId),H.triggerDone()}}class ms extends E{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Frostmane Dragon",this.iAttack=this.lValN([6,9,13]),this.iHealth=this.iAttack+1,this.tribe.push("IC","DG"),this.hints=["ZZ-1"],this.iMobile=2,this.text=`At the start of your turn, if ${this.name} was Forged last turn, you may put a Level ${this.level} Frostmane egg into an available lane.`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}handleAction(t){this.poot(`${"FME"}${this.level}`,t.playerA,t.lane),S.actionDone(!0)}ddf8(t){return t.event.playerA===t.owner}jr8(t){const i=m.creatByTr(t);if(t.event.code==="ENT"){const r=i.jr4("TS");r.interactive=!0,r.changes=!0,r.bonus=this.rawNug(1,0,6,0,0,0,"TX"),this.anim8(i),H.triggerDone()}else if(t.event.code==="TRS"){const r=b.trigIdx(i.triggers,t.trigger);r>-1&&i.removeTrigger(i.triggers[r]);const n=b.emptyPlayerActTarg("F","CARD",this.code,""),c=D.toActions(n);c.length===0?H.triggerDone():(c.push(S.noneEndTrigger()),S.ddf5(c))}}}class ps extends kt{constructor(t){super(t),this.faction="T",this.rarity="C",this.name="Frostshatter Strike";const i=this.boof4711;this.text=`Deal ${i} damage to an enemy creature.~Give a friendly creature ${y.jr9(i,0)} this turn.`}canPlay(){const t=this.firstT();return t?m.creatByTarget(t).length>0:!1}playTargets(){return[this.firstT()]}firstT(){if(this.friends().length>0)return b.crEnemyActTarg("CARD",this.code,"P1")}handleAction(t){const i=k.deTil(t.param),r=m.ddf6(t);if(i[0]==="P1"){const n=this.friends(r.id);n.push(S.cancelAction()),S.ddf5(n)}else{this.logSpell(r);const n=this.boof4711;this.smack(m.jr5(i[1]),n),this.modA(r,b.modT("AT",n)),S.spellCast()}}friends(t=""){const i=b.crFriendActTarg("CARD",this.code,k.enTil("P2",t));return D.toActions(i)}}class ys extends E{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Frostspeaker Shaman",this.iAttack=this.boof248,this.iHealth=this.boof71116,this.iDefend=!0,this.tribe.push("IC","YT"),this.addSp("D",this.iAttack),this.text=`Activate: Deal ${this.iAttack} damage to an enemy creature or player.`,this.bonus=this.buffNug(this.iAttack,0,"TX")}canActivate(t){return!0}startActivation(t){const i=b.crEnemyActTarg("CARD",this.code,t.id),r=b.playerActTarg("E","CARD",this.code,t.id),n=D.toActions([i,r]);n.push(S.cancelAction()),S.ddf5(n)}handleAction(t){const i=m.jr5(t.param);if(t.zone==="F"){const r=m.ddf6(t);this.logAct(!0,r),this.smack(r,this.iAttack)}else{this.logAct(!0);const r=t;this.ouch(r.playerA,this.iAttack),this.anim8(i)}i.endActivation()}}class bs extends kt{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Gauntlets of Sulgrim";const i=this.boof2510;this.text=`Give a friendly creature Armor ${i}, then deal damage equal to its Armor to an enemy creature.`}firstT(){if(this.baddies().length>0){const t=b.crFriendActTarg("CARD",this.code,"P1");return t.canArmor=!0,t}else return}canPlay(){const t=this.firstT();return t?m.creatByTarget(t).length>0:!1}playTargets(){return[this.firstT()]}handleAction(t){const i=k.deTil(t.param),r=m.ddf6(t);if(i[0]==="P1"){const n=S.cancelAction(),c=this.baddies(r.id);c.push(n),S.ddf5(c)}else{const n=m.jr5(i[1]);this.logSpell(n);const c=this.boof2510;n.addArmor(c),this.smack(r,n.armor),S.spellCast()}}baddies(t=""){return D.toActions(b.crEnemyActTarg("CARD",this.code,k.enTil("P2",t)))}}class As extends E{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Gemhide Ravager",this.iAttack=this.boof5915,this.iHealth=this.iAttack+1,this.tribe.push("DN"),this.text=`When ${this.name} ${y.dbdtap()}, you gain that much health.~Allied Tempys: Mobility ${this.level}.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("FR");const n=r.jr4("DM");return n.bonus=this.playerNug(this.iAttack,0,"TP"),r}ddf8(t){return t.event.battle&&!t.event.isCreatTarg&&t.event.isCreatSrc&&t.event.srcId===t.creatId}jr8(t){if(t.trigger.type==="FR")G.allied("T")&&m.creatByTr(t).addMobility(this.level,"T"),H.triggerDone();else if(t.trigger.type==="DM"){const i=t.event;this.balm(t.owner,i.dmg),this.anim8(t.creatId),H.triggerDone()}}}class ks extends E{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Glaceus, Tundra Tyrant",this.iAttack=this.boof5916,this.iHealth=this.iAttack+2,this.tribe.push("IC","EL");const i=`Gain Rank: each enemy ${y.levelGateText(this.level)}creature gets "When this is dealt damage, destroy it."`,r=this.level===3?"At the start of each turn, deal 1 damage to each enemy creature.~":"";this.text=r+i}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("RU");if(n.bonus=this.statSpawnNug(0,0,"TH"),this.level===3){const c=r.jr4("TS");c.bonus=this.buffNug(3,0,"TW")}return r}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;if(i.isCreatTarg&&i.target===t.creatId)return!0}return t.trigger.type==="RU"?t.event.playerA===t.owner:t.trigger.type==="TS"}jr8(t){if(t.trigger.type==="RU"){const i=b.crEnemyTarg();i.level=D.ddf2(this.level),m.creatByTarget(i).forEach(r=>{const n=r.jr4("DM",this.code);n.bonus=this.bonNug(-.5*this.level),n.changes=!0,this.anim8(r)})}else if(t.trigger.type==="TS"){const i=R.tick();m.qEnemyCreats().forEach(r=>{this.smack(r,1,i)})}else if(t.trigger.type==="DM"){const i=m.creatByTr(t);i.status==="A"&&this.kill(i)}H.triggerDone()}}class Ts extends E{constructor(t){super(t),this.faction="U",this.rarity="C",this.name="Grapplevine",this.iAttack=this.boof357,this.iHealth=this.boof91218,this.tribe.push("PL"),this.text="Negate Mobility from each creature.",this.level===3&&(this.hints=["ZZ+2"])}jr3(t,i){const r=super.jr3(t,i),n=r.addEffect("PS",this.code);return n.area="A",r}enforceEffect(t){const i=m.qActiveCreats();t.status==="A"?i.forEach(r=>{r.addModSafe(b.mod("NM",!0,t.id))}):i.forEach(r=>{r.removeModSafe(t.id)})}}class vs extends kt{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Grave Pact",this.free=this.level===3,this.free||(this.hints=["LG"]),this.text=`Destroy a friendly creature.~Destroy an ${y.levelGateText(this.level+1)}enemy creature.`}canPlay(){const t=this.firstT();return t?m.creatByTarget(t).length>0:!1}playTargets(){return[this.firstT()]}firstT(){if(this.enemyTargActions().length>0)return b.crFriendActTarg("CARD",this.code,"P1")}handleAction(t){const i=k.deTil(t.param),r=m.ddf6(t);if(i[0]==="P1"){const n=this.enemyTargActions(r.id);n.push(S.cancelAction()),S.ddf5(n)}else{this.logSpell();const n=R.tick();this.kill(m.jr5(i[1]),n),this.kill(r,n),S.spellCast()}}enemyTargActions(t=""){const i=b.crEnemyActTarg("CARD",this.code,k.enTil("P2",t));return i.level=D.ddf2(this.level+1),D.toActions(i)}}class Ss extends E{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="G.S.F. Commando",this.iAttack=this.lValN([3,6,11]),this.iHealth=this.boof81219,this.iArmor=this.level,this.tribe.push("MM"),this.text=`Forge: ${this.name} gets Armor 1 for each other friendly Metamind.~Activate: Deal damage equal to ${this.level}x ${this.name}'s Armor to an enemy creature.`,this.bonus=this.buffNug(0,2*this.level,"TX")}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}canActivate(t){return t.armor>0&&m.qEnemyCreats().length>0}startActivation(t){const i=b.crEnemyActTarg("CARD",this.code,t.id);S.ddf5(D.toActions([i,D.buttonTarget("CANC")]))}handleAction(t){const i=m.jr5(t.param);this.smack(m.ddf6(t),i.armor*this.level),i.endActivation()}jr8(t){const i=b.crFriendNotMeTarg(t.creatId);i.tribe="MM";const r=m.creatByTarget(i).length;r>0&&m.creatByTr(t).addArmor(r),H.triggerDone()}}class Cs extends kt{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Guardians Assemble",this.free=this.level===3,this.free||(this.hints=["LG"]);const i=this.level===1?"Put a copy of a random Forge Guardian from your deck":"Search your deck for a Forge Guardian and put a copy";this.text=`${i} into the center lane.`}canPlay(){return this.voltrons(!1).length>0}playTargets(){const t=b.actionTarget("TF","CARD",this.code,"");return t.player="F",t.lanes=3,this.level>1&&(t.param="P1"),[t]}voltrons(t){const i=T.getActive(),r=b.target("DK");r.player=T.toTarget(i),r.tribe="GD";const n=yt.generateContent(i.deck,!1,r);return t?yt.uniqueContent(n):n}tron(t){this.replc(t,T.activeA,3)}handleAction(t){if(this.level===1){const i=this.voltrons(!1),r=i[k.randInt(0,i.length)].cardCode;this.logSpell(),this.tron(r),S.spellCast()}else if(t.param==="P1"){const i=this.voltrons(R.aiActive),r=i.map(c=>{const f=b.deckSelectAction("CARD",c.cardCode,c.sourceIdx);return f.host=this.code,f}),n=S.cancelAction();n.param="PM",r.push(n),yt.showCustomDeck(i,r)}else this.logSpell(),this.tron(t.card),ut.popMode(),S.spellCast()}}class ws extends E{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="H.E.R.M.E.S.",this.iAttack=this.boof6915,this.iHealth=this.iAttack,this.tribe.push("RB"),this.text=`At the end of your turn, each other friendly creature gets Defender and Armor ${this.boof124} until the end of the next turn.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("TE",this.code);n.bonus=this.bonNug(0,"TX");const c=r.addEffect("PS",this.code);return c.area="C",r}ddf8(t){return!0}jr8(t){const i=m.creatByTr(t);this.enforceEffect(i),this.anim8(i),H.triggerDone()}enforceEffect(t){const i=this.boof124,r=b.crNotMeTarg(t.id);r.player=T.toTarget(t.owner);const n=m.creatByTarget(r),c=t.status==="A",f=T.activeA===t.owner,p=ae.phase==="ET"||ae.phase==="PT";c&&(f&&p||!f&&!p)?n.forEach(v=>{v.addModSafe(b.mod("AR",i,t.id)),v.addModSafe(b.mod("DF",!0,t.id))}):n.forEach(v=>{v.removeModSafe(t.id)})}}class Ds extends kt{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Hungering Strike";const i=this.boof359;this.text=`Give a friendly creature +${i} attack.~Give an enemy creature -${i} attack.`}canPlay(){const t=this.firstT();return t?m.creatByTarget(t).length>0:!1}playTargets(){return[this.firstT()]}firstT(){if(this.enemyTargActions().length>0)return b.crFriendActTarg("CARD",this.code,"P1")}handleAction(t){const i=k.deTil(t.param),r=m.ddf6(t);if(i[0]==="P1"){const n=this.enemyTargActions(r.id);n.push(S.cancelAction()),S.ddf5(n)}else{const n=m.jr5(i[1]);this.logSpell(n,r);const c=this.boof359;this.buffA(n,c),this.buffA(r,-c),S.spellCast()}}enemyTargActions(t=""){const i=b.crEnemyActTarg("CARD",this.code,k.enTil("P2",t));return D.toActions(i)}}class xs extends E{constructor(t){super(t),this.faction="U",this.rarity="C",this.name="Hunting Pack",this.iAttack=this.boof3612,this.iHealth=this.boof248,this.tribe.push("WF"),this.text=`When ${this.name} enters play, you have a 50% chance to put a copy of ${this.name} into an available lane.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("EF");return n.interactive=!0,r}handleAction(t){this.poot(this,t.playerA,t.lane),S.actionDone(!0)}ddf8(t){return t.event.creatId===t.creatId}jr8(t){if(k.randInt(0,J.simOn?4:2)===1){const r=b.emptyPlayerActTarg("F","CARD",this.code,""),n=b.actionTarget("TB","NOTR",this.code,""),c=D.toActions([r,n]);c.length===1?H.triggerDone():S.ddf5(c)}else H.triggerDone()}}class Bs extends E{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Iniog, Carrion Demon",this.iAttack=this.lValN([0,12,20]),this.iHealth=this.boof3713,this.tribe.push("DM");let i;this.level===1?(this.iDefend=!0,i=5):(this.iMobile=1,this.iRegen=this.level===2?5:10,i=10,this.hints=["ZZ-5"]);let r;this.level===3?r="When this gains health, deal that much damage to the enemy player.~Vengeance: Put a level 1 Iniog into this lane.":r=`When a creature is destroyed, this gets Regenerate 1.~At the end of your turn, if this has Regenerate ${i} or higher, replace it with a level ${this.level+1} Iniog.`,this.text=r}jr3(t,i){const r=super.jr3(t,i);if(this.level===3){const n=r.jr4("HG");n.bonus=this.playerNug(0,-4,"TX"),n.batch=!0;const c=r.jr4("VN");c.bonus=this.buffNug(0,3)}else{const n=r.jr4("DS");n.bonus=this.regnNug(2),n.batch=!0;const c=r.jr4("TE"),f=O.getCard(this.levelUpCard());c.bonus=this.multNug(this.buffNug(f.iAttack,f.iHealth,"TX"),.4)}return r}ddf8(t){return t.trigger.type==="TE"?t.event.playerA===t.owner:t.trigger.type==="HG"?t.event.creatId===t.creatId:t.trigger.type==="DS"}jr8(t){const i=m.creatByTr(t);if(t.trigger.type==="HG")this.ouch(!t.owner,t.event.healAmt,t.draw),t.draw&&this.anim8(i);else if(t.trigger.type==="VN")this.poot("ICD"+"1",i.owner,i.lane);else if(t.trigger.type==="DS")i.addRegen(1,this.bFac(t));else if(t.trigger.type==="TE"){const r=this.level===1?4:9;i.regen>r&&this.replc(this.levelUpCard(),i.owner,i.lane)}H.triggerDone()}}class Hs extends E{image(t){return super.fixedImage(t)}constructor(t){super(t),this.faction="T",this.rarity="T",this.name="Iztek, Avatar of Flame",this.iAttack=this.boof71220,this.iHealth=this.boof6915,this.tribe.push("FR","EL"),this.iAggro=!0,this.text=`When Iztek ${y.dbdtap()}, deal that much damage to that player again.~When you play Iztek's Frost, replace this with a level ${this.level} Iztek, Avatar of Frost.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("PC");n.bonus=this.buffNug(0,this.iAttack);const c=r.jr4("DM");return c.bonus=this.buffNug(this.iAttack,0,"TP"),r}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcId===t.creatId}else if(t.trigger.type==="PC"){const i=t.event;if(i.playerA===t.owner)return i.cardCode.slice(0,3)==="IFR"}return!1}jr8(t){const i=m.creatByTr(t);t.trigger.type==="DM"?(this.ouch(!t.owner,t.event.dmg),this.anim8(i)):t.trigger.type==="PC"&&this.replc(`${"IZR"}${this.level}`,i.owner,i.lane),H.triggerDone()}}class Fs extends E{image(t){return super.fixedImage(t)}constructor(t){super(t),this.faction="T",this.rarity="T",this.name="Iztek, Avatar of Frost",this.iAttack=this.boof6915,this.iHealth=this.boof71220,this.tribe.push("IC","EL"),this.iAggro=!0;const i=this.boof2510;this.text=`When you play Iztek's Flame, replace this with a level ${this.level} Iztek, Avatar of Flame.~Activate: Deal ${i} damage to a creature.`,this.bonus=this.buffNug(i,0,"TW")}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("PC");return n.bonus=this.buffNug(0,this.iAttack,"TW"),r}canActivate(t){return!0}startActivation(t){const i=b.crActTarg("CARD",this.code,t.id);i.hint=["HR"];const r=D.toActions([i,D.buttonTarget("CANC")]);S.ddf5(r)}handleAction(t){this.logAct(!0),this.smack(m.ddf6(t),this.boof2510),m.jr5(t.param).endActivation()}ddf8(t){return t.event.playerA===t.owner&&t.event.cardCode.slice(0,3)==="IFL"}jr8(t){const i=m.creatByTr(t);this.replc(`${"IZL"}${this.level}`,i.owner,i.lane),H.triggerDone()}}class Ns extends E{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Killer Bee",this.iAttack=this.boof135,this.iHealth=this.iAttack,this.iMobile=1,this.tribe.push("IN"),this.hints=[this.lValH(["ZZ+2","ZZ+2","ZZ+3"])];const i=this.lValS(["Poison 1","Poison 3","that much Poison"]);this.text=`When ${this.name} deals battle damage to a creature or player, they get ${i}.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("DM");return n.bonus=this.regnNug(this.iAttack,"TP"),n.bonus.peLife=-this.iAttack,r}ddf8(t){return t.event.battle&&t.event.isCreatSrc&&t.event.srcId===t.creatId}jr8(t){const i=W.toDamage(t.event),r=this.lValN([1,3,i.dmg]);i.isCreatTarg?i.hurtCreat.addPoison(r):(T.addPoison(i.hurtPlayer,r),this.anim8(i.srcCreat)),H.triggerDone()}}class Ps extends E{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Killion, Infinity Warden",this.maxLevel=4,this.iAttack=this.lValN([6,9,16,22]),this.iHealth=this.lValN([3,7,14,20]),this.tribe.push("FB");let i;this.level<3?i=`a ${y.levelGateText(this.level)}card in your`:this.level===3?i="a card in your hand and":i="each card in your hand, deck, and",this.text=`Forge: Level up ${i} discard pile.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");return n.interactive=this.level<4,r}handleAction(t){const i=T.getActive();if(t.zone==="N"){const r=O.getCard(i.discard[t.position]);i.discard[t.position]=r.levelUpCard(),ut.popMode(),this.anim8(t.param),S.actionDone(!0)}else xt.levelInHand(i,t.position,O.getCard(t.card).levelUpCard()),this.anim8(t.param),this.discardLevel(!0,t.param)}jr8(t){if(this.level<3)this.discardLevel(!1,t.creatId);else if(this.level===3){const i=D.toActions(b.lvlHandActTarg(this.code,t.creatId));i.length>0?S.ddf5(i):this.discardLevel(!1,t.creatId)}else{const i=T.getActive();this.levelDeck(i.deck),this.levelDeck(i.discard),i.hand.forEach((r,n)=>{const c=O.getCard(r).levelUpCard();c!==r&&xt.levelInHand(i,n,c)}),this.anim8(t.creatId),H.triggerDone()}}discardLevel(t,i){const r=T.getActive(),n=b.target("TD");n.player=T.toTarget(r),n.level=D.ddf2(this.level),n.canLevel=!0;let c=yt.generateContent(r.discard,!1,n);if(c.length>0){R.aiActive&&(c=yt.uniqueContent(c));const f=c.map(p=>{const v=b.deckSelectAction("CARD",p.cardCode,p.sourceIdx);return v.param=i,v.host=this.code,v.hint=["CD"],v});yt.showCustomDeck(c,f)}else t?S.actionDone(!0):H.triggerDone()}levelDeck(t){t.map(r=>O.getCard(r).levelUpCard()).forEach((r,n)=>t[n]=r)}}class Ms extends E{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Lavafused Asir",this.iAttack=this.boof369,this.iHealth=this.iAttack*2,this.tribe.push("FR","AS"),this.text=`While a friendly creature is unopposed, gets ${y.jr9(this.iAttack,0)}.`}jr3(t,i){const r=super.jr3(t,i),n=r.addEffect("PS",this.code);return n.area="A",r}enforceEffect(t){const i=t.status!=="A",r=b.mod("AT",this.iAttack,t.id);m.qPlayerCreats(t.owner).forEach(n=>{n.opposed||i?n.removeModSafe(t.id):n.addModSafe(r)})}}class Es extends E{constructor(t){if(super(t),this.faction="U",this.rarity="L",this.name="Leafkin Progenitor",this.iAttack=this.boof3711,this.iHealth=this.iAttack,this.tribe.push("PL"),this.level===3)this.text=`Activate: Put a level 1 ${this.name} into an adjacent available lane.`,this.bonus=this.statSpawnNug(3,3,"TW");else{this.text=`Activate: Replace this with a level ${this.level+1} ${this.name}.`;const i=3*this.level;this.bonus=this.buffNug(i,i,"TX")}}canActivate(t){return this.level===3?S.emptyAdjacents(t,"").length>0:!0}startActivation(t){let i;if(this.level===3)i=S.emptyAdjacents(t,"");else{const r=b.fieldSelectAction("CARD",t.lane,t.owner);r.param=t.id,r.host=this.code,i=[r]}i.push(S.cancelAction()),S.ddf5(i)}handleAction(t){this.logAct(!0);const i=m.jr5(t.param);this.level===3?this.poot(this.leafCode(1),t.playerA,t.lane):this.replc(this.leafCode(this.level+1),i.owner,i.lane),i.endActivation()}leafCode(t){return`${"LKP"}${t}`}}class Le extends E{cons(t){({["AFO"]:()=>this.aetorC(),["CRS"]:()=>this.scootC(),["FOL"]:()=>this.forcC(),["NXO"]:()=>this.nexoC(),["SNK"]:()=>this.tinkC(),["TEX"]:()=>this.texC(),["TSM"]:()=>this.tsmithC()})[t]()}playTarg;optional=!1;constructor(t){super(t),this.playTarg=b.lvlHandActTarg(this.code,""),this.cons(this.cardCode()),this.text="Forge: "+this.text}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");return n.interactive=!0,r}handleAction(t){G.levelAndDiscardA(t),this.anim8(t.param),S.actionDone(!0)}jr8(t){if(this.cardCode()==="NXO"&&m.creatByTr(t).lane!==3){H.triggerDone();return}const i=D.toActions(this.playTarg);i.length>0?(i.forEach(r=>{r.param=t.creatId}),this.optional&&i.push(S.noneEndTrigger()),S.ddf5(i)):H.triggerDone()}aetorC(){this.faction="A",this.rarity="C",this.name="Aetherforge Oracle",this.iAttack=this.boof61218,this.iHealth=this.boof246,this.tribe.push("HM"),this.optional=!0,this.playTarg.card="S",this.text="You may discard and level up a spell."}scootC(){this.faction="A",this.rarity="R",this.name="Cerebral Scout",this.iAttack=this.boof51015,this.iHealth=this.boof3712,this.tribe.push("MM"),this.optional=!0,this.playTarg.tribe="MM",this.text="You may discard and level up a Metamind."}forcC(){this.faction="A",this.rarity="H",this.name="Forge Oracle",this.iAttack=this.lValN([1,10,20]),this.iHealth=this.iAttack,this.tribe.push("ST"),this.playTarg.faction="A",this.optional=!0,this.text="You may discard an Alloyin card and level it.",this.level===1?this.hints=["LG","RT"]:(this.consistent=!0,this.addSp("C",0),this.level===3&&(this.hints=["ZZ-2"]))}nexoC(){this.faction="A",this.rarity="C",this.name="Nexus Overwatch",this.iHealth=this.boof71014,this.iAttack=this.iHealth-1,this.tribe.push("HM"),this.optional=!0,this.text=`If ${this.name} is in the center lane, you may ${y.daluac()}.`}tinkC(){this.faction="A",this.rarity="C",this.name="Steelspark Tinkerer",this.iAttack=this.boof147,this.iHealth=this.lValN([9,12,21]),this.iDefend=!0,this.tribe.push("HM"),this.optional=!0,this.text=`You may ${y.daluac()}.`}texC(){this.faction="A",this.rarity="C",this.name="Tech Explorer",this.iAttack=this.lValN([1,8,18]),this.iHealth=this.iAttack+2,this.tribe.push("GN"),this.level===1&&(this.hints=["LG","RT"]),this.optional=!0,this.playTarg.card="C",this.text="You may discard and level up a creature."}tsmithC(){this.faction="A",this.rarity="C",this.name="Technosmith",this.iAttack=this.boof5915,this.iHealth=this.iAttack-1,this.tribe.push("HM"),this.optional=!0,this.text=`You may ${y.daluac()}.`}}class Rs extends E{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Lightbringer Council",this.iAttack=this.boof4810,this.iHealth=this.boof71116,this.tribe.push("TK"),this.text=`When a friendly Uterra creature ${y.dbdtap()}, you gain ${this.iAttack} health.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("DM");return n.bonus=this.playerNug(this.iAttack,0,"TP"),n.batch=!0,r}ddf8(t){const i=W.toDamage(t.event);return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcCreat.owner===t.owner&&i.srcCreat.faction==="U"}jr8(t){this.balm(t.owner,this.iAttack,t.draw),t.draw&&this.anim8(t.creatId),H.triggerDone()}}class Te extends E{cons(t){({["ASB"]:()=>this.asbC(),["CHR"]:()=>this.crgC(),["DZD"]:()=>this.dozC(),["DTR"]:()=>this.dtrC(),["FWS"]:()=>this.fwsC(),["IMD"]:()=>this.eddieC(),["LVH"]:()=>this.hiveC(),["NCM"]:()=>this.ncmbC(),["S01"]:()=>this.spcC(),["TDS"]:()=>this.tsrC()})[t]()}constructor(t){super(t),this.cons(this.cardCode())}d;cares=!0;trigB;bDraw=!0;deadOk=!1;image(t){return this.cardCode()==="DZD"?this.fixedImage(t):super.image(t)}jr3(t,i){const r=super.jr3(t,i);if(this.cares){const n=r.jr4("DM");n.bonus=this.trigB,n.batch=this.bDraw}return r}ddf8(t){return t.event.isCreatTarg&&t.event.target===t.creatId&&(this.deadOk||m.creatByTr(t).status==="A")}jr8(t){const i=W.toDamage(t.event);this.d(t,i.hurtCreat,i),H.triggerDone()}asbC(){this.faction="A",this.rarity="L",this.name="Alyssa, Strifeborn",this.iAttack=this.boof2410,this.iHealth=this.lValN([12,16,24]),this.tribe.push("HM"),this.hints=["MC"],this.trigB=this.buffNug(this.iAttack,0,"TS"),this.text=`When ${this.name} is dealt non-battle damage and survives, it gets ${y.jr9(this.level,1)} for each damage dealt.`,this.d=this.asbD}asbD(t,i,r){!r.battle&&r.life>0&&i.buff(r.dmg*this.level,r.dmg,this.bFac(t))}crgC(){this.faction="U",this.rarity="L",this.name="Chrogias",this.iAttack=this.lValN([1,0,40]),this.iHealth=this.lValN([1,15,40]),this.tribe.push("PL"),this.deadOk=!0,this.level>1&&(this.hints=["MC"],this.text="When Chrogias is dealt damage, you gain that much health.",this.trigB=this.playerNug(5,0,"TW")),this.level===1?(this.hints=["LG","LM","RT"],this.cares=!1):this.level===2?(this.iRegen=2,this.iDefend=!0,this.hints?.push("LG")):this.level===3&&(this.iBT=!0,this.iRegen=5),this.d=this.crgD}crgD(t,i,r){this.balm(t.owner,r.dmg,t.draw),t.draw&&this.anim8(i)}dozC(){this.faction="U",this.rarity="L",this.name="Dozer, the Dormant",this.iAttack=0,this.iHealth=this.level*3+6,this.tribe.push("BR"),this.iDefend=!0,this.hints=["MC"],this.bDraw=!1,this.level===1&&this.hints.push("ZZ-2"),this.trigB=this.buffNug(this.iHealth,0,"TW"),this.trigB.bonus=.3;const t=O.getCard(this.dz());this.text=`When ${this.name} is dealt damage and survives, replace it with a ${y.tokName(t)}.`,this.d=this.dozD}dozD(t,i,r){if(i.health>0&&i.status==="A"){const n=this.replc(this.dz(),i.owner,i.lane);n&&n.setHealth(i.health)}}dz(){return "DZA"+this.level}dtrC(){this.faction="U",this.rarity="L",this.name="Dream Tree",this.iAttack=0,this.iHealth=this.lValN([7,11,20]),this.iDefend=!0,this.tribe.push("PL"),this.bDraw=!1,this.deadOk=!0,this.level===3&&(this.iRegen=5),this.hints=["MC"],this.trigB=this.avgSpawnNug(),this.trigB.threat="TX",this.text=`When ${this.name} is dealt damage and survives, if it is your turn, you may play an additional card this turn.`,this.d=this.dtrD}dtrD(t,i,r){i.owner===T.activeA&&r.life>0&&(this.logAct(!1),G.freePlay(),this.anim8(i))}fwsC(){this.faction="A",this.rarity="H",this.name="Forgewatch Sentry",this.iAttack=this.boof6912,this.iHealth=this.iAttack,this.iArmor=this.iAttack,this.tribe.push("RB"),this.bDraw=!1,this.trigB=this.bonNug(-1),this.text=`When ${this.name} is dealt damage, destroy it.`,this.d=this.fwsD}fwsD(t,i,r){i.status==="A"&&this.kill(i)}eddieC(){this.faction="A",this.rarity="L",this.name="Iron Maiden",this.iAttack=this.lValN([1,3,30]),this.iHealth=this.iAttack,this.tribe.push("RB"),this.deadOk=!0,this.consistent=this.level>1,this.level===3?(this.iBT=!0,this.hints=["MC"],this.text="When Iron Maiden is dealt damage, deal that much damage to the enemy player.",this.trigB=this.playerNug(0,-16,"TW")):(this.cares=!1,this.hints=["LG","LM","RT"]),this.d=this.eddieD}eddieD(t,i,r){this.ouch(!t.owner,r.dmg,t.draw),t.draw&&this.anim8(i)}hiveC(){this.faction="U",this.rarity="L",this.name="Living Hive",this.iAttack=this.lValN([0,0,10]),this.iHealth=this.lValN([8,12,15]),this.tribe.push("IN","EL"),this.iDefend=this.level<3,this.deadOk=!0,this.bDraw=!1,this.hints=["MC"];const t=O.getCard(X.bee(this.level));this.text=`When ${this.name} is dealt damage, Spawn a level ${y.tokName(t)}.`,this.iDefend||(this.iBT=!0,this.text+=`~Forge: ${this.name} gets +X attack and +X health, where X is the total amount of Poison the enemy player has.`),this.trigB=this.spawnNug(t,"TX"),this.d=this.hiveD}hiveD(t,i,r){this.logAct(!1),this.spawn(X.bee(this.level),t.owner)}ncmbC(){this.faction="N",this.rarity="H",this.name="Necromoeba",this.iAttack=this.boof4710,this.iHealth=this.boof71117,this.tribe.push("OZ"),this.iRegen=3,this.deadOk=!0,this.bDraw=!1,this.hints=["MC"],this.level===1&&this.hints.push("ZZ-1");const t=O.getCard(X.purpOzC(this.level));this.text=`When ${this.name} is dealt damage, Spawn a ${y.tokName(t)}.`,this.trigB=this.spawnNug(t,"TW"),this.d=this.ncmbD}ncmbD(t,i,r){this.logAct(!1),this.spawn(X.purpOzC(this.level),t.owner)}spcC(){this.faction="A",this.rarity="L",this.name="Specimen 001",this.iAttack=this.boof234,this.iHealth=this.lValN([12,16,22]),this.tribe.push("OZ"),this.deadOk=!0,this.bDraw=!1,this.hints=["MC"],this.trigB=this.rawNug(0,St.calcCreatValueFormula(this.iAttack,0,this.level,0,0,!1,0),0,0,0,0,"TX"),this.text=`When ${this.name} is dealt non-battle damage, each other friendly creature gets ${y.jr9(this.iAttack,0)} and Armor ${this.level}.`,this.d=this.spcD}spcD(t,i,r){if(!r.battle){const n=b.crNotMeTarg(i.id);n.player=T.toTarget(i.owner),m.creatByTarget(n).forEach(c=>{this.buffA(c,this.iAttack),c.addArmor(this.level)})}}tsrC(){this.faction="U",this.rarity="L",this.name="Thundersaur",this.iAttack=0,this.iHealth=this.level*12,this.tribe.push("DN"),this.iBT=!0,this.hints=["MC",this.level===2?"ZZ-3":"ZZ-1"],this.trigB=this.buffNug(this.iHealth/2,0,"TS"),this.text=`When ${this.name} is dealt damage, it gets +1 attack for each damage dealt.`,this.d=this.tsrD}tsrD(t,i,r){i.buff(r.dmg,0,this.bFac(t))}}class Ls extends Te{jr3(t,i){const r=super.jr3(t,i);return this.level===3&&r.jr4("FR"),r}jr8(t){if(t.trigger.type==="FR"){const i=T.totalPoison(!t.owner);i>0&&this.buffD(m.creatByTr(t),i),H.triggerDone()}else super.jr8(t)}}class Gs extends Ot{jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}jr8(t){if(t.trigger.type==="FR"){const i=m.creatByTarget(b.crNotMeTarg(t.creatId)),r=this.boof124;i.forEach(n=>n.addPoison(r)),H.triggerDone()}else super.jr8(t)}}class Is extends kt{constructor(t){super(t),this.faction="A",this.rarity="C",this.name="Metatransfer",this.text=`Give a creature ${y.jr9(-this.boof579,0)}.~Discard and level up a card.`}canPlay(){return m.qActiveCreats().length>0}playTargets(){const t=b.crActTarg("CARD",this.code,"P1");return t.hint=["DB"],[t]}handleAction(t){const i=k.deTil(t.param);if(i[0]==="P1"){const r=m.ddf6(t),n=b.lvlHandActTarg(this.code,k.enTil("P2",r.id));n.deckPositionSkip=S.playPosition();const c=D.toActions(n);c.length===0?(this.logSpell(r),this.buffA(r,-this.boof579),S.spellCast()):(c.push(S.cancelAction()),S.ddf5(c))}else{const r=m.jr5(i[1]);this.logSpell(r),this.buffA(r,-this.boof579);const n=t;S.shiftPlayCard(n.position),G.levelAndDiscardA(n),S.spellCast()}}}class Ws extends E{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Mimicleaf",this.iAttack=this.lValN([2,5,11]),this.iHealth=this.iAttack,this.tribe.push("PL"),this.text=`Activate: Put a level ${this.level} ${this.name} into an adjacent available lane.`,this.bonus=this.statSpawnNug(this.iAttack,this.iHealth,"TW")}canActivate(t){return S.emptyAdjacents(t,"").length>0}startActivation(t){const i=S.emptyAdjacents(t,"");i.push(S.cancelAction()),S.ddf5(i)}handleAction(t){this.logAct(!0);const i=m.jr5(t.param);this.poot(this,t.playerA,t.lane),i.endActivation()}}class Os extends E{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Mimicwurm",this.iAttack=7,this.iHealth=this.iAttack,this.tribe.push("WR"),this.text=this.lValS(["","Forge: You may put a level 1 Mimicwurm into another lane.","Forge: You may put a level 2 Mimicwurm into another lane. Then you may put a level 1 Mimicwurm into another lane."])}jr3(t,i){const r=super.jr3(t,i);if(this.level>1){const n=r.jr4("FR");n.interactive=!0}return r}handleAction(t){const i=k.deTil(t.param);if(i[0]==="P1")if(this.level===3){this.wurmsign(2,t);const r=[t.lane,parseInt(i[1])],n=this.fieldActions("P2",r);S.ddf5(n)}else this.wurmsign(1,t),S.actionDone(!0);else this.wurmsign(1,t),S.actionDone(!0)}jr8(t){const i=W.toCreature(t.event);S.ddf5(this.fieldActions("P1",[i.creature.lane]))}fieldActions(t,i){const r=b.actionTarget("TF","CARD",this.code,k.enTil(t,i[0]));r.player="F",r.hint=["FL"],r.lanes=m.laneIdx.filter(c=>!i.includes(c));const n=D.toActions(r);return n.push(S.noneEndTrigger()),n}wurmsign(t,i){this.replc(this.wurmCode(t),i.playerA,i.lane)}wurmCode(t){return`${"MMW"}${t}`}}class Ge extends kt{cons(t){({["BRN"]:()=>this.boutC(),["IFL"]:()=>this.izfmC(),["LSK"]:()=>this.lspkC(),["LYR"]:()=>this.rainC(),["SOK"]:()=>this.sealkC(),["STB"]:()=>this.shatC(),["SHK"]:()=>this.shkC()})[t]()}hurts=!0;burner(t,i){i?this.smack(t,this.crisp):this.ouch(t,this.crisp)}burnText(t){return`Deal ${t} damage to a creature or player.`}constructor(t){super(t),this.cons(this.cardCode())}z;crisp=0;playTargets(){const t=this.hurts?["HR"]:["BF"],i=b.crActTarg("CARD",this.code,"");i.hint=t;const r=b.actionTarget("TP","CARD",this.code,"");return r.hint=t,[i,r]}handleAction(t){let i,r;t.zone==="P"?(this.logSpell(),i=!1,r=t.playerA):(r=m.ddf6(t),this.logSpell(this.hurts?void 0:r),i=!0),this.z(r,i),S.spellCast()}boutC(){this.faction="T",this.rarity="R",this.name="Burnout",this.overload=!0,this.maxLevel=1,this.crisp=8,this.text=this.burnText(8),this.z=this.burner}izfmC(){this.faction="T",this.rarity="T",this.name="Iztek's Flame",this.crisp=this.boof6915,this.text=this.burnText(this.crisp),this.z=this.burner}lspkC(){this.faction="T",this.rarity="C",this.name="Lightning Spark",this.crisp=this.boof6812,this.text=this.burnText(this.crisp),this.z=this.burner}rainC(){this.faction="U",this.rarity="C",this.name="Lysian Rain",this.hurts=!1;const t=this.boof7911;this.text=`Give a creature or player +${t} health.`,this.z=this.rainZ}rainZ(t,i){const r=this.boof7911;i?this.buffH(t,r):this.balm(t,r)}sealkC(){this.faction="T",this.rarity="C",this.name="Seal of Kadras",this.level<3&&(this.hints=["LG"]),this.consistent=this.level>1,this.crisp=this.sealzap,this.text=this.burnText(this.crisp),this.z=this.burner}get sealzap(){return this.lValN([1,2,25])}shatC(){this.faction="T",this.rarity="C",this.name="Shatterbolt",this.crisp=this.boof5914,this.text=`Negate Armor from a creature or player this turn, then deal ${this.crisp} damage to that creature or player.`,this.z=this.shatZ}shatZ(t,i){const r=b.modT("NA",!0);if(i){const n=t;this.modA(n,r),this.smack(n,this.crisp)}else{const n=T.toPlayer(t);T.addMod(n,r),this.ouch(n,this.crisp)}}shkC(){this.faction="T",this.rarity="H",this.name="Static Shock",this.crisp=this.boof124,this.hints=["ZZ+1"],this.text=`${this.burnText(this.crisp)} You may play an additional ${y.levelGateText(this.level)}spell this turn.`,this.z=this.shkZ}shkZ(t,i){this.burner(t,i);const r=G.freeCard(this.code);r.condition.level=D.ddf2(this.level),r.condition.card="S"}}class $s extends E{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Nefrax, the Soulweaver",this.iAttack=this.boof4712,this.iHealth=this.lValN([10,15,25]),this.tribe.push("HM"),this.hints=["ZZ-2"];const i=O.getCard(this.spc());this.text=`Activate: Put a ${y.tokName(i)} into an available lane.~Forge: Destroy a friendly creature.`,this.bonus=this.spawnNug(i,"TX")}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");return n.interactive=!0,r}canActivate(t){return this.empties(t).length>0}startActivation(t){const i=this.empties(t);i.push(S.cancelAction()),S.ddf5(i)}handleAction(t){const i=k.deTil(t.param);i[0]==="P1"?(this.logAct(!0),this.poot(this.spc(),t.playerA,t.lane),m.jr5(i[1]).endActivation()):(this.kill(m.ddf6(t)),S.actionDone(!0))}jr8(t){const i=b.crFriendActTarg("CARD",this.code,""),r=D.toActions(i);S.ddf5(r)}spc(){return "SPN"+this.level}empties(t){const i=b.emptyPlayerActTarg("F","CARD",this.code,k.enTil("P1",t.id));return D.toActions(i)}}class Us extends E{constructor(t){super(t),this.faction="N",this.rarity="T",this.name="Netherdrake",this.iAttack=this.boof4815,this.iHealth=this.iAttack,this.iMobile=this.lValN([0,0,1]),this.tribe.push("DG"),this.text=`When this enters play or moves into a lane, destroy the opposing ${y.levelGateText(this.level)}creature.`}image(t){return this.rawImage(`${"NSH"}${this.level}`,t)}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FK");return n.bonus=this.multNug(this.avgSpawnNug(),.5),n.bonus.threat="TX",r.jr4("EF"),r}ddf8(t){return t.event.creatId===t.creatId}jr8(t){const r=W.toCreature(t.event).creature.opposed;r&&D.levelTestCommon(r.level,this.level)&&this.kill(r),H.triggerDone()}}class Vs extends _e{enforceEffect(t){t.lane===3?t.removeModSafe(t.id):t.addModSafe(b.mod("AR",this.boof236,t.id)),super.enforceEffect(t)}}class zs extends E{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Nexus Gunner",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("HM"),this.text=`Activate: Give a creature ${y.jr9(this.iAttack,0)}. Use this ability only if ${this.name} is in the center lane.`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}canActivate(t){return t.lane===3}startActivation(t){const i=b.crActTarg("CARD",this.code,t.id);i.hint=["BF","BB"];const r=D.toActions(i);r.push(S.cancelAction()),S.ddf5(r)}handleAction(t){const i=m.ddf6(t);this.logAct(!0,i),this.buffA(i,this.iAttack),m.jr5(t.param).endActivation()}jr8(t){const i=m.creatByTr(t);if(i.lane===3){const r=i.jr4("NT");r.bonus=this.buffNug(this.iAttack/2,0,"TW")}H.triggerDone()}}class Zs extends E{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Nova, Grove Queen",this.iAttack=this.lValN([3,5,10,14]),this.iHealth=this.lValN([7,10,15,19]),this.tribe.push("FB"),this.maxLevel=4;const i=this.nbuf,r=this.lValS(["an adjacent","each adjacent","each","each"]);this.text=`Forge: Put a 1/1 Seedling into ${r} available space.~When a friendly creature is replaced, Nova gets ${y.jr9(i,i)}.`}get nbuf(){return this.lValN([1,3,5,10])}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");this.level===1&&(n.interactive=!0);const c=r.jr4("RP"),f=this.nbuf;return c.bonus=this.buffNug(f,f,"TS"),r}ddf8(t){const i=W.toReplaced(t.event);return t.creatId!==i.replCreatId&&t.owner===i.replCreat.owner}jr8(t){const i=m.creatByTr(t);if(t.event.code==="RPL")this.buffD(i,this.nbuf),H.triggerDone();else{const r=m.emptyLanes(t.owner);if(this.level>1){const n=this.level===2?i.adjacent.filter(f=>r.includes(f)):r,c=R.tick();n.forEach(f=>{this.poot(this.seed,i.owner,f,c)}),H.triggerDone()}else{const n=i.adjacent.filter(c=>r.includes(c));if(n.length===0)H.triggerDone();else if(n.length===1)this.poot(this.seed,i.owner,n[0]),H.triggerDone();else{const c=S.emptyAdjacents(i,"");S.ddf5(c)}}}}handleAction(t){this.poot(this.seed,t.playerA,t.lane),S.actionDone(!0)}get seed(){return "NSD"+this.level}}class Ys extends kt{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Omnomnom";const i=this.boof246,r=i*-1;this.text=`Give a friendly Zombie ${y.jr9(i,i,!0)}, and Regenerate ${i}.~Then give an enemy non-Zombie ${y.jr9(r,r)}.`}canPlay(){const t=this.firstT();return t?m.creatByTarget(t).length>0:!1}playTargets(){return[this.firstT()]}firstT(){if(this.nonZombies().length>0){const t=b.crFriendActTarg("CARD",this.code,"P1");return t.tribe="ZB",t}else return}handleAction(t){const i=k.deTil(t.param),r=m.ddf6(t);if(i[0]==="P1"){const n=S.cancelAction(),c=this.nonZombies(r.id);c.push(n),S.ddf5(c)}else{const n=m.jr5(i[1]);this.logSpell(n,r);const c=this.boof246;this.buffD(n,c),this.regn(n,c),this.buffD(r,-c),S.spellCast()}}nonZombies(t=""){return D.toActions(b.crEnemyActTarg("CARD",this.code,k.enTil("P2",t))).filter(i=>!m.ddf6(i).isTribe("ZB"))}}class Ks extends E{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Onyxium Allomancer",this.iAttack=this.boof248,this.iHealth=this.boof61016,this.tribe.push("HM");const i=this.boof358;this.text=`Activate: Discard and level up a card.~Allied Nekrium: Regenerate ${i}.`,this.bonus=this.bonNug(.5,"TW")}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}canActivate(t){return T.toPlayer(t.owner).hand.some(r=>O.getCard(r).canLevel())}startActivation(t){const i=b.lvlHandActTarg(this.code,t.id);i.hint?.push("DF"),S.ddf5(D.toActions([i,D.buttonTarget("CANC")]))}handleAction(t){this.logAct(!0),G.levelAndDiscardA(t);const i=m.jr5(t.param);this.anim8(i),i.endActivation()}jr8(t){G.allied("N")&&m.creatByTr(t).addRegen(this.boof358,"N"),H.triggerDone()}}class Xs extends E{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Onyxium Phantasm",this.iAttack=this.boof246,this.iHealth=this.lValN([9,12,19]),this.iRegen=this.boof124,this.tribe.push("ST");const i=this.boof4812n;this.addSp("A",i),this.text=`Allied Alloyin: Activate: Give a creature ${y.jr9(i,0)}`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}canActivate(t){return t.hasMod(t.id)}startActivation(t){const i=b.crActTarg("CARD",this.code,t.id);i.hint=["DF","DB"];const r=D.toActions(i);r.push(S.cancelAction()),S.ddf5(r)}handleAction(t){const i=m.ddf6(t);this.logAct(!0,i),this.buffA(i,this.boof4812n),m.jr5(t.param).endActivation()}jr8(t){if(G.allied("A")){const i=m.creatByTr(t);i.addMod(b.mod("AL",!0,i.id),"A"),i.changed=!0;const r=i.jr4("NT");r.bonus=this.buffNug(this.boof4812,0,"TX")}H.triggerDone()}}class qs extends kt{constructor(t){super(t),this.faction="T",this.rarity="R",this.name="Oratek Battlebrand";const i=this.boof71013;this.addSp("D",i),this.text=`Deal ${i} damage to a creature.~Allied Alloyin: You may discard a card and level it.`}canPlay(){return m.qActiveCreats().length>0}playTargets(){const t=b.crActTarg("CARD",this.code,"");return t.hint=["HR"],[t]}handleAction(t){if(t.zone==="F")if(this.logSpell(),this.smack(m.ddf6(t),this.boof71013),G.allied("A")){const i=this.levelActs();i.length===1?S.spellCast():S.ddf5(i)}else S.spellCast();else if(t.zone==="H"){const i=t;S.shiftPlayCard(i.position),G.levelAndDiscardA(i),S.spellCast()}else t.zone==="B"&&t.param==="NOTR"?S.spellCast():super.handleAction(t)}levelActs(){const t=b.actionTarget("TB","CARD",this.code,"NOTR"),i=b.lvlHandActTarg(this.code,"");return i.deckPositionSkip=S.playPosition(),D.toActions([i,t])}}class js extends E{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Oratek Warhammer",this.iAttack=this.boof3713,this.iHealth=this.boof81219,this.iMobile=this.level,this.tribe.push("FR","AS"),this.text=`Allied Alloyin: When ${this.name} ${y.dbdtap()} on your turn, you may discard and level up a card.`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}handleAction(t){G.levelAndDiscardA(t),m.jr5(t.param).anim8("A"),S.actionDone(!0)}ddf8(t){const i=W.toDamage(t.event);return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcId===t.creatId&&i.srcCreat.owner===T.activeA}jr8(t){if(t.trigger.type==="FR"){if(G.allied("A")){const i=m.creatByTr(t),r=i.jr4("DM");r.interactive=!0,r.bonus=this.bonNug(.5,"TP"),i.changed=!0,i.anim8("A")}H.triggerDone()}else if(t.trigger.type==="DM"){const i=D.toActions(b.lvlHandActTarg(this.code,t.creatId));i.length>0?(i.push(S.noneEndTrigger()),S.ddf5(i)):H.triggerDone()}}}class Ni extends E{hitCreature;constructor(t,i){super(t),this.hitCreature=i}trigB;jr3(t,i){const r=super.jr3(t,i),n=r.jr4("DM");return n.bonus=this.trigB,r}ddf8(t){return t.event.battle&&t.event.isCreatTarg===this.hitCreature&&t.event.isCreatSrc&&t.event.srcId===t.creatId}}class Js extends Ni{constructor(t){super(t,!1),this.faction="U",this.rarity="L",this.name="Oros, Deepwood's Chosen",this.iAttack=this.lValN([7,11,16,0]),this.iHealth=this.iAttack,this.iBT=!0,this.maxLevel=4,this.tribe.push("FB"),this.hints=["ZZ-2"];const i=`When Oros ${y.dbdtap()}, you gain that much health.`,r=this.level===4?"Oros gets +attack and +health equal to your health.~":"";this.text=r+i,this.trigB=this.playerNug(this.iAttack/2,0,"TP")}jr3(t,i){const r=super.jr3(t,i);return this.level===4&&r.addEffect("PH",this.code),r}jr8(t){const i=t.event;this.balm(t.owner,i.dmg),this.anim8(t.creatId),H.triggerDone()}enforceEffect(t){const i=T.toPlayer(t.owner).health;t.status==="A"&&(t.removeModSafe(t.id,!1),t.addMod(b.mod("HL",i,t.id),"X"),t.addMod(b.mod("MH",i,t.id),"X"),t.addMod(b.mod("AT",i,t.id),"X"))}}class Qs extends E{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Othra, Apex Predator",this.iAttack=this.lValN([8,0,10]),this.iHealth=this.lValN([6,12,50]),this.tribe.push("IN"),this.level===3?(this.iMobile=1,this.text="When Othra deals battle damage to a creature or player, they get Poison 10.",this.hints=["ZZ-5"]):(this.text=`Gain Rank: Replace this with a level ${this.level+1} Othra.`,this.level===2?this.iDefend=!0:this.hints=["ZZ-1"])}jr3(t,i){const r=super.jr3(t,i);if(this.level===3){const n=r.jr4("DM");n.bonus=this.regnNug(10,"TP")}else{const n=r.jr4("RU");n.bonus=this.regnNug(this.level,"TH")}return r}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&i.isCreatSrc&&i.srcId===t.creatId}return t.trigger.type==="RU"?t.event.playerA===t.owner:!1}jr8(t){if(t.trigger.type==="RU"){const i=m.creatByTr(t);this.replc(this.levelUpCard(),i.owner,i.lane)}else if(t.trigger.type==="DM"){const i=W.toDamage(t.event);i.isCreatTarg?i.hurtCreat.addPoison(10):(T.addPoison(i.hurtPlayer,10),this.anim8(i.srcCreat))}H.triggerDone()}}class _s extends E{constructor(t){super(t),this.faction="U",this.rarity="R",this.name="Oxidon Spitter",this.iAttack=this.boof7914,this.iHealth=this.boof3510,this.tribe.push("DN"),this.l3=this.level===3,this.text=`Forge: Negate Armor from ${this.l3?"each":"an"} enemy creature.`}l3;jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");return n.interactive=!this.l3,r}jr8(t){if(this.l3)m.creatByTarget(b.crEnemyTarg()).forEach(i=>{i.negateArmor=!0}),H.triggerDone();else{const i=b.crEnemyActTarg("CARD",this.code,""),r=D.toActions(i);r.length>0?S.ddf5(r):H.triggerDone()}}handleAction(t){const i=m.ddf6(t);this.logAct(!1,i),i.negateArmor=!0,S.actionDone(!0)}}class ve extends E{cons(t){({["AFS"]:()=>this.afsC(),["DMW"]:()=>this.drixC(),["FGG"]:()=>this.fggC(),["GHS"]:()=>this.mvpC(),["MMG"]:()=>this.mmgC(),["OWW"]:()=>this.owwC(),["SST"]:()=>this.sstC(),["UPM"]:()=>this.upakC(),["WFM"]:()=>this.wfmC(),["XTE"]:()=>this.xerxC()})[t]()}constructor(t){super(t),this.cons(this.cardCode())}a;t;preFight=!1;prePlay=!1;canActivate(t){return this.t(t)}startActivation(t){const i=D.boardTarget("CARD",this.code);i.param=t.id,this.preFight&&(i.hint=["BB"]),this.prePlay&&(i.hint=["DF"]),S.ddf5(D.toActions([i,D.buttonTarget("CANC")]))}handleAction(t){this.logAct(!0);const i=m.jr5(t.param);this.a(i),i.endActivation()}afsC(){this.faction="A",this.rarity="L",this.name="Arcflight Squadron",this.iAttack=this.boof4710,this.iHealth=this.iAttack+2,this.tribe.push("RB"),this.hints=[this.level===1?"ZZ-3":"ZZ-2"],this.prePlay=!0,this.text=`Activate: You may play an additional ${y.levelGateText(this.level)}Robot this turn.`,this.bonus=this.avgSpawnNug(),this.bonus.threat="TX",this.t=this.afsT,this.a=this.afsA}afsT(t){return!0}afsA(t){const i=G.freeCard(this.code);i.condition.tribe="RB",i.condition.level=D.ddf2(this.level),this.anim8(t)}drixC(){this.faction="A",this.rarity="L",this.name="Drix, the Mindwelder",this.iAttack=this.boof3612,this.iHealth=this.lValN([6,12,21]),this.tribe.push("MM"),this.preFight=!0,this.addSp("A",this.level),this.text=`Activate, discard your hand: Each friendly Metamind gets ${y.jr9(this.level,0)} for each card discarded this way.`,this.bonus=this.buffNug(3*this.level,0,"TX"),this.t=this.drixT,this.a=this.drixA}drixT(t){return T.getActive().hand.length>0}drixA(t){const i=T.toPlayer(t.owner),r=i.hand.length*this.level;xt.cardDiscardAll(i);const n=b.crFriendTarg();n.tribe="MM",m.creatByTarget(n).forEach(c=>{this.buffA(c,r)})}fggC(){this.faction="A",this.rarity="H",this.name="Forge Guardian Gamma",this.iAttack=this.boof4816,this.iHealth=this.iAttack,this.tribe.push("RB","GD"),this.preFight=!0;const t=O.getCard(X.fgoc(this.level));this.addSp("N",t.iAttack),this.text=`Activate, destroy five friendly Robot Guardians: Put a ${y.tokName(t)} into this lane.`,this.bonus=this.bonNug(1,"TW"),this.t=this.fggT,this.a=this.fggA}fggT(t){return m.creatByTarget(this.fggTarg()).length===5}fggA(t){const i=t.lane,r=t.owner,n=R.tick();m.creatByTarget(this.fggTarg()).forEach(c=>this.kill(c,n)),this.poot(X.fgoc(this.level),r,i)}fggTarg(){const t=b.crFriendTarg();return t.tribe="GD",t}mvpC(){this.faction="U",this.rarity="C",this.name="Gemheart Sprout",this.iAttack=this.boof357,this.iHealth=this.iAttack+this.level,this.iDefend=!0,this.tribe.push("PL"),this.preFight=!0,this.addSp("L",this.level),this.text=`Activate: You gain health equal to ${this.level}x the number of friendly creatures.`,this.bonus=this.playerNug(this.level*3,0,"TW"),this.t=this.mvpT,this.a=this.mvpA}mvpT(t){return!0}mvpA(t){const i=m.ddf1().length;this.balm(t.owner,i*this.level),this.anim8(t)}mmgC(){this.faction="A",this.rarity="L",this.name="Marty McGear",this.iAttack=this.boof3612,this.iHealth=this.boof71117,this.tribe.push("GN"),this.hints=[this.lValH(["ZZ-2","ZZ-2","ZZ-5"])],this.addSp("A",this.level),this.addSp("M",this.level),this.text=`Activate: Spawn a copy of a random ${y.levelGateText(this.level)}Robot from your deck. That Robot gets ${y.jr9(this.level,0)} and Armor ${this.level}.`,this.bonus=this.avgSpawnNug(),this.bonus.threat="TX",this.t=this.mmgT,this.a=this.mmgA}mmgT(t){return m.ddf1().length<5&&this.mmgBots().length>0}mmgA(t){const i=this.mmgBots(),r=i[k.randInt(0,i.length)],n=this.spawn(r,t.owner);n&&(n.addArmor(this.level),this.buffA(n,this.level))}mmgBots(){const t=b.target("DK");return t.player="F",t.tribe="RB",t.level=D.ddf2(this.level),D.deckByTarget(t).map(r=>r[0])}owwC(){this.faction="A",this.rarity="L",this.name="Oreian Warwalker",this.iAttack=this.boof359,this.iHealth=this.boof61018,this.tribe.push("RB"),this.preFight=!0;const t=this.owwbuff+1;this.addSp("A",t),this.text=`Activate: ${this.name} gets ${t}x attack.`,this.bonus=this.buffNug(2*this.iAttack,0,"TX"),this.t=this.owwT,this.a=this.owwA}owwT(t){return!0}owwA(t){this.buffA(t,t.attack*this.owwbuff)}get owwbuff(){return this.lValN([1,1,2])}sstC(){this.faction="U",this.rarity="C",this.name="Scatterspore Tiller",this.iHealth=this.boof61014,this.iAttack=this.iHealth-1,this.tribe.push("PL");const t=O.getCard(X.minionCode(this.level));this.text=`Activate: Spawn a ${y.tokName(t)}`,this.bonus=this.spawnNug(t,"TW"),this.t=this.sstT,this.a=this.sstA}sstT(t){return m.ddf1().length<5}sstA(t){this.spawn(X.minionCode(this.level),t.owner)}upakC(){this.faction="U",this.rarity="L",this.name="Uterra Packmaster",this.iAttack=this.boof6914,this.iHealth=this.iAttack,this.tribe.push("HM"),this.preFight=!0;const t=this.boof124;this.addSp("U",t),this.text=`Activate: Each other friendly Uterra creature gets ${y.jr9(t,t)}.`,this.bonus=this.multNug(this.buffNug(t,t,"TX"),1.5),this.t=this.upakT,this.a=this.upakA}upakT(t){return m.creatByTarget(this.upakTarg(t.id)).length>0}upakA(t){const i=this.boof124;m.creatByTarget(this.upakTarg(t.id)).forEach(r=>{this.buffD(r,i)})}upakTarg(t){const i=b.crFriendNotMeTarg(t);return i.faction="U",i}wfmC(){this.faction="T",this.rarity="H",this.name="Wildfire Maiden",this.iAttack=this.boof4610,this.iHealth=this.boof5814,this.tribe.push("FR","AS"),this.text=`Activate, destroy ${this.name}: Deal damage equal to its attack to each enemy creature.`,this.bonus=this.bonNug(.5,"TW"),this.t=this.wfmT,this.a=this.wfmA}wfmT(t){return!0}wfmA(t){const i=R.tick();m.creatByTarget(b.crEnemyTarg()).forEach(r=>{this.smack(r,t.attack,i)}),this.kill(t)}xerxC(){this.faction="N",this.rarity="L",this.name="Xerxes, the Executioner",this.iAttack=this.boof5915,this.iHealth=this.iAttack+2,this.tribe.push("GG");const t=-this.boof135;this.addSp("U",t),this.text=`Activate: Each non-Nekrium creature gets ${y.jr9(t,t)}.~If any enemy creatures are destroyed this way, Spawn one of them at random.`,this.bonus=this.buffNug(-t,-t,"TX"),this.t=this.xerxT,this.a=this.xerxA}xerxT(t){return this.xerxTargs().length>0}xerxA(t){const i=-this.boof135,r=[],n=R.tick();this.xerxTargs().forEach(f=>{this.buffD(f,i,n),f.owner!==t.owner&&f.health<1&&r.push(f)});const c=r.length;c>0&&this.spawn(r[k.randInt(0,c)].code,t.owner)}xerxTargs(){return m.qActiveCreats().filter(t=>t.faction!=="N")}}class Ki extends E{cons(t){({["MDE"]:()=>this.misdC(),["TAB"]:()=>this.thraC()})[t]()}ftext="";constructor(t){super(t),this.cons(this.cardCode()),this.text="Assault: "+this.ftext,this.ftext=""}f;jr3(t,i){const r=super.jr3(t,i);return r.jr4("AS"),r}jr8(t){this.f(t),H.triggerDone()}misdC(){this.faction="N",this.rarity="C",this.name="Misery Demon",this.iAttack=this.boof5915,this.iHealth=this.boof2510,this.tribe.push("DM");const t=this.level+3;this.ftext=`Deal ${t} damage to the enemy player and gain ${t} health.`,this.f=this.misdF}misdF(t){const i=this.level+3;this.ouch(!t.owner,i),this.balm(t.owner,i),this.anim8(t.creatId)}thraC(){this.faction="T",this.rarity="C",this.name="Thranik Ambusher",this.iAttack=this.boof5813,this.iHealth=this.iAttack,this.tribe.push("DK");const t=this.boof234;this.ftext=`${this.name} gets ${y.jr9(t,t)}.`,this.f=this.thraF}thraF(t){this.buffD(m.creatByTr(t),this.boof234)}}class pt extends E{cons(t){({["ATT"]:()=>this.atorC(),["BRH"]:()=>this.brhrC(),["BWN"]:()=>this.bulbC(),["CDM"]:()=>this.cmyC(),["CYR"]:()=>this.cycrC(),["DHM"]:()=>this.dhamC(),["FGD"]:()=>this.fgdC(),["FSP"]:()=>this.fspC(),["HMF"]:()=>this.hamfC(),["HOS"]:()=>this.hossC(),["HOD"]:()=>this.haroldC(),["IDF"]:()=>this.idfC(),["OJC"]:()=>this.ocarC(),["RLW"]:()=>this.restwandC(),["RHW"]:()=>this.ruthwandC(),["SCZ"]:()=>this.sczC(),["SHA"]:()=>this.smaC(),["SSP"]:()=>this.shspC(),["SDR"]:()=>this.spdryC(),["TDW"]:()=>this.tdwC(),["TNL"]:()=>this.tnlC(),["USY"]:()=>this.usyC(),["UTR"]:()=>this.urexC()})[t]()}iTrigger=!0;trigB;bDraw=!1;constructor(t){super(t),this.cons(this.cardCode())}t;b;jr3(t,i){const r=super.jr3(t,i);if(this.iTrigger){const n=r.jr4("EF");n.bonus=this.trigB,n.batch=this.bDraw}return r}ddf8(t){return this.t(t)}jr8(t){this.b(t),H.triggerDone()}truLive(t){return m.creatByTr(t).status==="A"}efp(t){return W.toEnterField(t.event)}efc(t){return this.efp(t).creature}friendTimeT(t){const i=this.efc(t);return t.creatId!==i.id&&i.owner===t.owner&&pt.itBirthedFirst(i.id,t.creatId)}friendGuts(t,i){return i.creatId!==t.creatId&&t.creature.owner===i.owner&&this.truLive(i)}donkforgeT(t){const i=this.efc(t);return t.creatId!==i.id&&i.owner===t.owner&&i.isTribe("DF")&&this.truLive(t)}donkforgeB(t){this.logAct(!1),m.creatByTr(t).buff(this.level,this.level,this.bFac(t))}dftxt(){this.text=`When another friendly Darkforged enters play, ${this.name} gets ${y.jr9(this.level,this.level)}.`,this.trigB=this.multNug(this.buffNug(this.level,this.level,"TS"),.5),this.bDraw=!0}atorC(){this.faction="T",this.rarity="L",this.name="Ator, Thunder Titan",this.iAttack=this.boof6914,this.iHealth=this.iAttack-1,this.tribe.push("GT"),this.text=`Each other friendly ${y.levelGateText(this.level)}creature gets Assault: Aggressive.`,this.trigB=this.bonNug(.5,"TX"),this.t=this.atorT,this.b=this.atorB}atorT(t){const i=this.efp(t);return i.forged&&this.friendGuts(i,t)&&D.levelTargetTest(D.ddf2(this.level),i.creature.level)&&!i.creature.opposed&&!i.creature.getState().aggressive}atorB(t){const i=this.efc(t);i.aggressive=!0,this.anim8(i)}brhrC(){this.faction="N",this.rarity="R",this.name="Brood Horror",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("AB"),this.text=`When another friendly creature enters play, it gets ${y.jr9(this.level,this.level)}. Then ${this.name} gets ${y.jr9(-this.level,-this.level)}.`,this.t=this.friendTimeT,this.b=this.brhrB}brhrB(t){const i=this.efc(t);this.logAct(!1,i),this.buffD(i,this.level),this.buffD(m.creatByTr(t),-this.level)}bulbC(){this.faction="A",this.rarity="H",this.name="Bulwark Battalion",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("GN");const t=this.boof468;this.text=`When another friendly creature enters play, it gets Armor ${t} until the end of the turn.`,this.trigB=this.regnNug(t,"TW"),this.t=this.friendTimeT,this.b=this.bulbB}bulbB(t){const i=this.efc(t);this.logAct(!1,i),this.modA(i,b.modT("AR",this.boof468))}cmyC(){this.faction="T",this.rarity="H",this.name="Cauldron Mystic",this.iAttack=this.boof357,this.iHealth=this.boof71015,this.tribe.push("YT"),this.text=`When a friendly creature enters play, deal ${this.boof234} damage to an enemy creature or player at random.`,this.trigB=this.buffNug(0,this.iAttack,"TX"),this.t=this.cmyT,this.b=this.cmyB}cmyT(t){const i=this.efc(t);return i.owner===t.owner&&pt.itBirthedFirst(i.id,t.creatId)}cmyB(t){const i=m.qPlayerCreats(!t.owner),r=k.randInt(0,i.length+1);r===i.length?(this.ouch(!t.owner,this.boof234),this.anim8(t.creatId)):this.smack(i[r],this.boof234)}cycrC(){this.faction="T",this.rarity="H",this.name="Cyclone Rider",this.iAttack=this.lValN([8,10,16]),this.iHealth=this.iAttack/2,this.tribe.push("WN","AS"),this.level===1&&(this.hints=["ZZ-2"]),this.text=`When an enemy creature enters play, if it is unopposed, move ${this.name} to the lane opposing that creature.`,this.trigB=this.bonNug(.5),this.t=this.cycrT,this.b=this.cycrB}cycrT(t){const i=this.efc(t);return i.owner!==t.owner&&!i.opposed}cycrB(t){const i=this.efc(t);i.opposed||this.lurk(m.creatByTr(t),m.oppositeLane(i.lane))}dhamC(){this.faction="U",this.rarity="R",this.name="Dusk Hammer",this.iAttack=this.boof51015,this.iHealth=this.boof4812,this.iBT=!0,this.tribe.push("DF","TK"),this.dftxt(),this.t=this.donkforgeT,this.b=this.donkforgeB}fgdC(){this.faction="A",this.rarity="H",this.name="Forge Guardian Delta",this.iAttack=this.boof71117,this.iHealth=this.iAttack,this.tribe.push("RB","GD");const t=O.getCard(X.fgoc(this.level));this.text=`When ${this.name} enters play, if there is a friendly Alpha Beta, and Gamma, put a ${y.tokName(t)} in your discard pile.`,this.t=this.fgdT,this.b=this.fgdB}fgdT(t){return this.efc(t).id===t.creatId}fgdB(t){const i=m.qPlayerCreats(t.owner).map(r=>r.code.slice(0,3));if(i.includes("FGA")&&i.includes("FGB")&&i.includes("FGG")){const r=T.toPlayer(t.owner);r.discard.push(X.fgoc(this.level));const n=b.trigger("NT",this.code);n.bonus=this.bonNug(10),T.addTr(r,n),this.anim8(t.creatId)}}fspC(){if(this.faction="A",this.rarity="L",this.name="Flowsteel Prototype",this.iAttack=this.boof368,this.iHealth=this.lValN([8,15,20]),this.tribe.push("SS"),this.iTrigger=this.level>1,this.iTrigger){this.text=`When you Forge a ${y.levelGateText(this.level-1)}creature, ${this.name} gets +attack equal to that creature's attack.`;const t=this.avgCreatureStats(this.level-1);this.trigB=this.buffNug(t[0],0,"TS")}this.t=this.fspT,this.b=this.fspB}fspT(t){const i=this.efp(t);return i.forged&&i.creature.owner===t.owner&&i.creature.level<this.level}fspB(t){this.buffA(m.creatByTr(t),this.efc(t).attack)}hamfC(){this.faction="T",this.rarity="H",this.name="Hammerfang",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("YT"),this.text=`When an enemy creature enters play opposing ${this.name}, move this to an available lane at random.`,this.trigB=this.bonNug(.5),this.t=this.hamfT,this.b=this.hamfB}hamfT(t){const i=this.efc(t);return i.owner!==t.owner?m.creatByTr(t).lane===m.oppositeLane(i.lane):!1}hamfB(t){const i=m.emptyLanes(t.owner),r=i.length;r>0&&this.lurk(m.creatByTr(t),i[k.randInt(0,r)])}hossC(){this.faction="U",this.rarity="R",this.name="Harbinger of Spring",this.iAttack=this.lValN([5,8,11]),this.iHealth=this.iAttack,this.tribe.push("DY");const t=this.boof234;this.text=`When another friendly creature enters play, if it wasn't Forged, ${this.name} gets ${y.jr9(t,t)}.`,this.trigB=this.multNug(this.buffNug(t,t,"TS"),1.5),this.bDraw=!0,this.t=this.hossT,this.b=this.hossB}hossT(t){const i=this.efp(t);return this.friendGuts(i,t)&&!i.forged}hossB(t){this.logAct(!1,this.efc(t));const i=this.boof234;m.creatByTr(t).buff(i,i,this.bFac(t))}haroldC(){this.faction="T",this.rarity="R",this.name="Herald of Destruction",this.iAttack=this.boof369,this.iHealth=this.boof91218,this.tribe.push("FR","AS"),this.text=`When an enemy creature enters play, if it wasn't Forged, deal damage equal to ${this.name}'s attack to the enemy player.`,this.trigB=this.playerNug(0,this.iAttack*-.5,"TX"),this.bDraw=!0,this.t=this.haroldT,this.b=this.haroldB}haroldT(t){const i=this.efp(t);return i.creature.owner!==t.owner&&!i.forged&&this.truLive(t)}haroldB(t){const i=m.creatByTr(t);this.ouch(!i.owner,i.attack,t.draw),t.draw&&this.anim8(i)}idfC(){this.faction="N",this.rarity="H",this.name="Indomitable Fiend",this.iAttack=2,this.iHealth=2,this.maxLevel=1,this.tribe.push("ZB"),this.hints=["ST","ZZ+1"],this.text=`When ${this.name} enters play, if it wasn't Forged, it gets ${y.jr9(5,5)} for each player rank you are.`,this.t=this.idfT,this.b=this.idfB}idfT(t){const i=this.efp(t);return i.creature.id===t.creatId&&!i.forged}idfB(t){const i=5*T.toPlayer(t.owner).rank;this.buffD(this.efc(t),i)}ocarC(){this.faction="A",this.rarity="H",this.name="Oreian Justicar",this.iAttack=this.boof5814,this.iHealth=this.boof81220,this.tribe.push("HM");const t=this.ocarbuff;this.text=`When an enemy creature enters play, if it wasn't Forged, it gets ${y.jr9(t,0)}.`,this.trigB=this.buffNug(-.5*t,0,"TX"),this.t=this.ocarT,this.b=this.ocarB}ocarT(t){const i=this.efp(t);return i.creature.owner!==t.owner&&!i.forged&&pt.itBirthedFirst(i.creature.id,t.creatId)}ocarB(t){this.buffA(this.efc(t),this.ocarbuff)}get ocarbuff(){return this.lValN([-5,-10,-20])}restwandC(){this.faction="U",this.rarity="H",this.name="Restless Wanderers",this.iAttack=this.boof51014,this.iHealth=this.boof3610,this.tribe.push("ST","WD");const t=this.boof369;this.text=`When another friendly Spirit Wanderer enters play, ${this.name} gets ${y.jr9(t,t)}.`,this.trigB=this.multNug(this.buffNug(t,t,"TS"),.5),this.t=this.restwandT,this.b=this.restwandB}restwandT(t){const i=this.efp(t);return i.creature.isTribe("WD")&&this.friendGuts(i,t)}restwandB(t){this.logAct(!1),this.buffD(m.creatByTr(t),this.boof369)}ruthwandC(){this.faction="N",this.rarity="C",this.name="Ruthless Wanderers",this.iAttack=this.boof3610,this.iHealth=this.boof51014,this.tribe.push("ST","WD");const t=this.boof369,i=-t;this.text=`When another friendly Spirit Wanderer enters play, the creature opposing this gets ${y.jr9(i,i)}.`,this.trigB=this.multNug(this.buffNug(t,t,"TW"),.5),this.t=this.restwandT,this.b=this.ruthwandB}ruthwandB(t){const i=m.creatByTr(t).opposed;i&&(this.logAct(!1,i),this.buffD(i,-this.boof369))}sczC(){this.faction="N",this.rarity="R",this.name="Shadeclaw Zombie",this.iAttack=this.boof4812,this.iHealth=this.iAttack+this.level,this.iRegen=this.level,this.tribe.push("DF","ZB"),this.dftxt(),this.t=this.donkforgeT,this.b=this.donkforgeB}smaC(){this.faction="A",this.rarity="R",this.name="Shadowmist Angel",this.iHealth=this.boof369,this.iAttack=this.iHealth*2,this.iArmor=this.level,this.tribe.push("DF","AG"),this.dftxt(),this.t=this.donkforgeT,this.b=this.donkforgeB}shspC(){this.faction="U",this.rarity="H",this.name="Shroudthorn Splicer",this.iHealth=this.boof3711,this.iAttack=this.iHealth-1,this.tribe.push("DF","PL"),this.text=`When another friendly Darkforged enters play, if it was Forged, Spawn a ${this.iAttack}/${this.iHealth} Darkforged Mimic.`,this.trigB=this.statSpawnNug(this.iAttack,this.iHealth,"TX"),this.t=this.shspT,this.b=this.shspB}shspT(t){const i=this.efp(t);return i.forged&&i.creature.isTribe("DF")&&this.friendGuts(i,t)}shspB(t){this.spawn("DFM"+this.level,t.owner)}spdryC(){this.faction="U",this.rarity="R",this.name="Spring Dryad",this.iAttack=this.boof469,this.iHealth=this.iAttack,this.tribe.push("DY"),this.text=`When another friendly creature enters play, ${this.name} gets ${y.jr9(this.level,this.level)}.`,this.trigB=this.multNug(this.buffNug(this.level,this.level,"TS"),1.5),this.bDraw=!0,this.t=this.spdryT,this.b=this.spdryB}spdryT(t){return this.friendGuts(this.efp(t),t)}spdryB(t){this.logAct(!1,this.efc(t)),m.creatByTr(t).buff(this.level,this.level,this.bFac(t))}tdwC(){this.faction="N",this.rarity="R",this.name="Tarsus Deathweaver",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.tribe.push("HM");const t=this.boof246;this.text=`When a friendly creature enters play, if it wasn't Forged, it gets ${y.jr9(t,t)}.`,this.trigB=this.buffNug(t,t,"TX"),this.t=this.tdwT,this.b=this.tdwB}tdwT(t){const i=this.efp(t);return i.creature.owner===t.owner&&!i.forged&&pt.itBirthedFirst(i.creature.id,t.creatId)}tdwB(t){this.buffD(this.efc(t),this.boof246)}tnlC(){this.faction="N",this.rarity="L",this.name="Tarsus Necrolord",this.iAttack=this.boof4812,this.iHealth=this.iAttack,this.tribe.push("HM");const t=this.boof124,i=O.getCard(X.zomc(this.level));this.text=`Forge: Spawn a ${y.tokName(i)} for each friendly creature that was destroyed this turn.~When a friendly Zombie enters play, ${this.name} gets ${y.jr9(t,t)}.`,this.trigB=this.buffNug(t,t,"TS"),this.bDraw=!0,this.t=this.tnlT,this.b=this.tnlB}tnlT(t){const i=this.efp(t);return i.creature.isTribe("ZB")&&this.friendGuts(i,t)}tnlB(t){const i=this.boof124;m.creatByTr(t).buff(i,i,this.bFac(t))}usyC(){this.faction="T",this.rarity="R",this.name="Umbraskin Yeti",this.iAttack=this.boof369,this.iHealth=this.iAttack*2,this.iMobile=this.level,this.tribe.push("DF","YT"),this.dftxt(),this.t=this.donkforgeT,this.b=this.donkforgeB}urexC(){this.faction="U",this.rarity="H",this.name="Uterradon Rex",this.iAttack=this.boof4813,this.iHealth=this.boof71118,this.tribe.push("DN");const t=this.boof124;this.text=`When another friendly Dinosaur enters play, it gets ${y.jr9(t,t)}.`,this.trigB=this.buffNug(t,t,"TW"),this.t=this.urexT,this.b=this.urexB}urexT(t){const i=this.efc(t);return t.creatId!==i.id&&i.owner===t.owner&&i.isTribe("DN")&&pt.itBirthedFirst(i.id,t.creatId)}urexB(t){this.buffD(this.efc(t),this.boof124)}static itBirthedFirst(t,i){if(t===i)return!0;let r=!1;const n=Ft.findDeathTime(i);if(k.isUn(n))r=!0;else{const c=m.findBirthTime(t);(k.isUn(c)||c<=n)&&(r=!0)}return r}}class Me extends Ni{cons(t){({["AGM"]:()=>this.agamC(),["BWK"]:()=>this.blwalkC(),["BRF"]:()=>this.bfangC(),["CDT"]:()=>this.cadtC(),["FSL"]:()=>this.fslmC(),["GSC"]:()=>this.gcobC(),["IHA"]:()=>this.ibhaC(),["SHS"]:()=>this.shimfC()})[t]()}image(t){return this.rarity==="T"?this.fixedImage(t):this.leveledImage(t)}constructor(t){super(t,!0),this.cons(this.cardCode())}h;jr8(t){const i=W.toDamage(t.event);this.h(t,i,i.srcCreat,i.hurtCreat),H.triggerDone()}poos(t,i){t.status==="A"&&t.addPoison(i)}snek(t,i,r,n){this.poos(n,this.iAttack)}agamC(){this.faction="T",this.rarity="L",this.name="Agamemnon",this.iAttack=this.boof4814,this.iHealth=this.boof81218,this.level>1&&(this.iMobile=1,this.iAggro=this.level===3),this.tribe.push("GT"),this.text=`When ${this.name} ${y.dbdtac()} on your turn, this battles again.`,this.trigB=this.buffNug(this.iAttack/2,0),this.h=this.agamH}agamH(t,i,r,n){t.owner===T.activeA&&r.status==="A"&&this.wrang(r)}blwalkC(){this.faction="N",this.rarity="R",this.name="Blight Walker",this.iAttack=this.boof137,this.iHealth=this.lValN([5,10,17]),this.tribe.push("ZB"),this.text=`When ${this.name} ${y.dbdtac(this.level)}, destroy that creature.`,this.trigB=this.avgSpawnNug(),this.h=this.blwalkH}blwalkH(t,i,r,n){n.status==="A"&&D.levelTestCommon(n.level,this.level)&&this.kill(n)}bfangC(){this.faction="U",this.rarity="T",this.name="Broodfang",this.iAttack=this.level,this.iHealth=this.level,this.maxLevel=this.level,this.minLevel=this.level,this.tribe.push("SN"),this.text=this.poisonText(this.iAttack),this.trigB=this.regnNug(this.iAttack),this.h=this.snek}poisonText(t){return`When ${this.name} ${y.dbdtac()}, give that creature gets Poison ${t}.`}cadtC(){this.faction="U",this.rarity="R",this.name="Cadaverous Thicket",this.iAttack=this.boof135,this.iHealth=this.lValN([7,12,22]),this.tribe.push("PL"),this.text=this.poisonText(this.iAttack),this.trigB=this.regnNug(this.iAttack),this.h=this.snek}fslmC(){this.faction="N",this.rarity="C",this.name="Festering Slime",this.iAttack=this.level,this.iHealth=this.boof61218,this.tribe.push("OZ");const t=this.level+2;this.text=`When ${this.name} ${y.dbdtac()}, that creature gets ${y.jr9(-t,-t)}.`,this.trigB=this.buffNug(t,t),this.h=this.fslmH}fslmH(t,i,r,n){n.status==="A"&&this.buffD(n,this.lValN([-3,-4,-5]))}gcobC(){this.faction="U",this.rarity="C",this.name="Ghostscale Cobra",this.iAttack=this.boof4610,this.iHealth=this.boof135,this.tribe.push("SN"),this.text=this.poisonText(this.iAttack),this.trigB=this.regnNug(this.iAttack),this.h=this.snek}ibhaC(){this.faction="A",this.rarity="L",this.name="Ironbeard, Hammer of Anvillon",this.iAttack=this.lValN([4,7,12,15]),this.iHealth=this.lValN([7,11,17,25]),this.iArmor=this.lValN([1,3,5,20]),this.tribe.push("FB"),this.maxLevel=4;const t=this.level===4?"'s attack gets reduced to 0":` gets ${y.jr9(this.boof246n,0)}`;this.text=`When Ironbeard ${y.dbdtac()}, that creature${t}, and moves to an available enemy lane at random.`,this.trigB=this.buffNug(this.lValN([2,4,6,16]),0),this.h=this.ibhaH}ibhaH(t,i,r,n){if(n.status==="A"){const c=this.level===4?n.attack*-1:this.boof246n;this.buffA(n,c),m.fling(n,"A")}}shimfC(){this.faction="U",this.rarity="R",this.name="Shimmerfang Serpent",this.iAttack=this.boof357,this.iHealth=this.boof61016,this.tribe.push("SN"),this.text=`When ${this.name} ${y.dbdtac()}, that creatures gets that much Poison.`,this.trigB=this.regnNug(this.iAttack),this.h=this.shimfH}shimfH(t,i,r,n){this.poos(n,i.dmg)}}class ge extends Ni{cons(t){({["ABR"]:()=>this.ashbC(),["AMY"]:()=>this.ashmC(),["CFB"]:()=>this.cfbC(),["EPS"]:()=>this.epsdC(),["EFM"]:()=>this.efmC(),["FBC"]:()=>this.fbcC(),["RTS"]:()=>this.rzstC(),["RSE"]:()=>this.rselC(),["SVH"]:()=>this.strhyC(),["URB"]:()=>this.uridC(),["VES"]:()=>this.veskC()})[t]()}bothTurns=!0;constructor(t){super(t,!1),this.cons(this.cardCode())}h;jr8(t){const i=W.toDamage(t.event);i.srcCreat&&(this.bothTurns||i.srcCreat.owner===T.activeA)&&this.h(t,i,i.srcCreat),H.triggerDone()}ashyC(){this.faction="T",this.rarity="C",this.tribe.push("FR","AS");const t=this.boof124;this.text=`When ${this.name} ${y.dbdtap()}, it gets ${y.jr9(t,t)}.`,this.trigB=this.buffNug(t,t,"TP"),this.h=this.ashyH}ashyH(t,i,r){this.buffD(r,this.boof124)}ashbC(){this.name="Ashurian Brawler",this.iAttack=this.boof7911,this.iHealth=this.iAttack,this.ashyC()}ashmC(){this.name="Ashurian Mystic",this.iAttack=this.boof3610,this.iHealth=this.boof5812,this.iAggro=!0,this.ashyC()}cfbC(){this.faction="T",this.rarity="H",this.name="Cinderfist Brawler",this.iAttack=this.boof71014,this.iHealth=this.boof357,this.tribe.push("FR","AS"),this.text=`When ${this.name} ${y.dbdtap()}, deal that much damage to that player again.`,this.trigB=this.playerNug(0,this.iAttack/-2,"TP"),this.h=this.cfbH}cfbH(t,i,r){this.ouch(!r.owner,i.dmg),this.anim8(r)}epsdC(){this.faction="A",this.rarity="T",this.name="Epoch Soldier",this.minLevel=this.level,this.maxLevel=this.level,this.iAttack=this.boof4710,this.iHealth=this.iAttack,this.tribe.push("HM"),this.bothTurns=!1,this.text=`When ${this.name} ${y.dbdtap()} on your turn, draw a card at the end of the turn.`,this.trigB=this.bonNug(.2,"TP"),this.h=this.epsdH}epsdH(t,i,r){const n=b.trigger("TE","EPH"+this.level);n.changes=!0,n.customCode=this.code,n.bonus=this.bonNug(J.dcWeight),T.addTr(t.owner,n),this.anim8(r)}efmC(){this.faction="T",this.rarity="L",this.name="Everflame Mystic",this.iAttack=this.boof5813,this.iHealth=this.iAttack+1,this.tribe.push("FR","AS"),this.bothTurns=!1,this.text=`When ${this.name} ${y.dbdtap()} on your turn, you may play ${this.lValS(["one","two","three"])} spells this turn.`,this.trigB=this.bonNug(this.level*.5,"TP"),this.h=this.efmH}efmH(t,i,r){for(let n=0;n<this.level;n++){const c=G.freeCard(this.code);c.condition.card="S",this.anim8(r)}}fbcC(){this.faction="T",this.rarity="L",this.name="Flameblade Champion",this.iAttack=this.boof4712,this.iHealth=this.boof5916,this.tribe.push("FR","EL"),this.text=`When ${this.name} ${y.dbdtap()}, deal that much damage to each enemy creature.`,this.trigB=this.buffNug(this.iAttack,0,"TP"),this.h=this.fbcH}fbcH(t,i,r){const n=R.tick();m.qPlayerCreats(!r.owner).forEach(c=>this.smack(c,i.dmg,n))}rzstC(){this.faction="T",this.rarity="C",this.name="Razortooth Stalker",this.iAttack=this.boof4812,this.iHealth=this.iAttack+1,this.iMobile=1,this.tribe.push("DN");const t=this.boof235;this.text=`When ${this.name} ${y.dbdtap()}, it gets ${y.jr9(t,t)}.`,this.trigB=this.buffNug(t,t,"TP"),this.h=this.rzstH}rzstH(t,i,r){this.buffD(r,this.boof235)}rselC(){this.faction="T",this.rarity="H",this.name="Rumblestone Elemental",this.iAttack=this.boof246,this.iHealth=this.level,this.iAggro=!0,this.tribe.push("ER","EL"),this.text=`When ${this.name} ${y.dbdtap()}, deal that much damage to itself as well.~Assault: Spawn a copy of ${this.name}. Then repeat this for each copy.`,this.trigB=this.bonNug(-.2),this.h=this.rselH}rselH(t,i,r){this.smack(r,i.dmg)}strhyC(){this.faction="U",this.rarity="C",this.name="Stranglevine Hydra",this.iAttack=this.boof5815,this.iHealth=this.iAttack+1,this.tribe.push("HY"),this.text=`When ${this.name} ${y.dbdtap()}, it gets Regenerate ${this.level}.`,this.trigB=this.regnNug(this.level,"TP"),this.h=this.strhyH}strhyH(t,i,r){this.regn(r,this.level)}uridC(){this.faction="U",this.rarity="L",this.name="Uterradon Ridgeback",this.iAttack=this.boof71117,this.iHealth=this.boof4713,this.iBT=!0,this.tribe.push("DN"),this.bothTurns=!1;const t=this.boof124;this.text=`When ${this.name} ${y.dbdtap()} on your turn, each friendly creature gets ${y.jr9(t,t,this.level===3)}${this.level===3?", and Breakthrough":""}.`,this.trigB=this.buffNug(t,t,"TP"),this.h=this.uridH}uridH(t,i,r){const n=this.boof124,c=this.level===3;m.ddf1().forEach(f=>{this.buffD(f,n),c&&(f.breakthrough=!0)})}veskC(){this.faction="N",this.rarity="L",this.name="Vyric Ebonskull",this.iAttack=this.boof3713,this.iHealth=this.boof71117,this.tribe.push("VP");let t="",i=.5;this.level===3&&(t=" Then Spawn a copy of that creature."),this.text=`When Vyric ${y.dbdtap()}, destroy an enemy ${y.levelGateText(this.level)}creature at random.`+t,this.trigB=this.multNug(this.avgSpawnNug(),i),this.trigB.threat="TP",this.h=this.veskH}veskH(t,i,r){const n=b.crTarg();n.player=T.toTarget(i.hurtPlayer),n.level=D.ddf2(this.level);const c=m.creatByTarget(n);if(c.length>0){const f=R.tick(),p=c[k.randInt(0,c.length)];this.kill(p,f),this.level===3&&this.spawn(p.code,r.owner,f)}}}class K extends E{cons(t){({["AGK"]:()=>this.agknitC(),["AMS"]:()=>this.squadC(),["AFR"]:()=>this.afsC(),["ATI"]:()=>this.atiC(),["BZS"]:()=>this.bzshC(),["BTR"]:()=>this.bwtC(),["BSS"]:()=>this.bssC(),["BZD"]:()=>this.bzdrC(),["BFM"]:()=>this.bfmC(),["CTI"]:()=>this.charnC(),["CHH"]:()=>this.chihC(),["CSW"]:()=>this.chickenC(),["DFR"]:()=>this.dfrC(),["DSW"]:()=>this.dswC(),["DBA"]:()=>this.dbaC(),["DBN"]:()=>this.drbC(),["DDD"]:()=>this.dddC(),["EWT"]:()=>this.espwrC(),["FWT"]:()=>this.fwtC(),["GSW"]:()=>this.gwurmC(),["GSS"]:()=>this.gsC(),["IMA"]:()=>this.iracoC(),["KSB"]:()=>this.ksbC(),["LGT"]:()=>this.legtitC(),["LBD"]:()=>this.lbdC(),["LMV"]:()=>this.lyrC(),["MOE"]:()=>this.moeC(),["MMA"]:()=>this.mmaC(),["MMR"]:()=>this.mmrC(),["MBR"]:()=>this.mbrC(),["MTD"]:()=>this.mossC(),["NSY"]:()=>this.nysymC(),["OXM"]:()=>this.onxmarC(),["OFM"]:()=>this.ofmC(),["OPK"]:()=>this.orpC(),["PHM"]:()=>this.phmC(),["PSM"]:()=>this.palsC(),["POK"]:()=>this.pokC(),["POT"]:()=>this.potC(),["PMI"]:()=>this.prinvC(),["REW"]:()=>this.rewC(),["SMD"]:()=>this.scorchC(),["SOC"]:()=>this.scythC(),["SDN"]:()=>this.souldrC(),["SGG"]:()=>this.ssggC(),["SLG"]:()=>this.splgC(),["SBD"]:()=>this.sbdC(),["SSK"]:()=>this.sssC(),["SYL"]:()=>this.lotusC(),["TGI"]:()=>this.tgiC(),["TRA"]:()=>this.toraC(),["TRS"]:()=>this.torsC(),["TRV"]:()=>this.torvC(),["TRW"]:()=>this.torwC(),["UGL"]:()=>this.umglidC(),["UWL"]:()=>this.uwarC(),["UWS"]:()=>this.ustokeC(),["UIW"]:()=>this.uiwC(),["UTM"]:()=>this.umaulC(),["VIC"]:()=>this.vlfxC(),["VIK"]:()=>this.vikC(),["VND"]:()=>this.vdrkC(),["VNS"]:()=>this.vnsC(),["WMC"]:()=>this.warC(),["WWP"]:()=>this.wwpC(),["WFB"]:()=>this.wfbC(),["XTR"]:()=>this.xtmC(),["ZDK"]:()=>this.zdkC()})[t]()}f;ftext="";forges=!0;flanks;allied="X";constructor(t){super(t),this.cons(this.cardCode());let i="";this.flanks&&(i="Flank"),this.forges&&(i?i="Forge/"+i:i=y.forglied(this.allied)),i&&(this.text=i+": "+this.ftext),this.ftext=""}image(t){return this.rarity==="T"?super.fixedImage(t):super.image(t)}jr3(t,i){const r=super.jr3(t,i);if(this.forges&&r.jr4("FR"),this.flanks){const n=r.jr4("FK");n.bonus=this.flanks}return r}ddf8(t){return Vt.extractCardCode(t.trigger.logicCode)==="MMR"}jr8(t){const i=this.cardCode();if(t.trigger.type==="TE"&&i==="MMR"){this.logAct(!1);const r=t.event,n=T.toPlayer(r.playerA);T.drawCard(n,this.level);const c=b.trigIdx(n.triggers,t.trigger);c>-1&&n.triggers.splice(c,1)}else this.f(t);H.triggerDone()}agknitC(){this.faction="A",this.rarity="L",this.name="Aegis Knight",this.iAttack=this.boof5814,this.iHealth=this.iAttack,this.tribe.push("HM"),this.iArmor=this.lValN([1,2,5]),this.ftext="Each friendly creature deals damage equal to its Armor to the opposing creature",this.f=this.agknitF}agknitF(t){const i=b.crFriendTarg();i.hasArmor=!0;const r=R.tick();m.creatByTarget(i).forEach(n=>{n.opposed&&n.opposed.hurtDirect(n.armor,n.code,this.faction,r)})}squadC(){this.faction="A",this.rarity="H",this.name="Aeromind Squadron",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("MM"),this.iMobile=1,this.ftext="Put a Metamind at random from your deck into your hand.",this.f=this.squadF}squadF(t){const i=T.toPlayer(t.owner),r=b.target("TH");r.player=T.toTarget(i),r.tribe="MM";const n=D.deckByTarget(r),c=n.length;if(c>0){const f=n[k.randInt(0,c)];i.deck.splice(f[1],1),xt.addCard(i,f[0]),this.anim8(t.creatId)}}afsC(){this.faction="T",this.rarity="H",this.name="Ashurian Flamesculptor",this.iAttack=this.boof5915,this.iHealth=this.boof3610,this.tribe.push("FR","AS"),this.forges=this.level>1,this.consistent=this.forges,this.forges&&(this.ftext=`You may play an additional ${y.levelGateText(this.level-1)}Tempys spell this turn.`,this.addSp("C",0)),this.f=this.afsF}afsF(t){const i=G.freeCard(this.code);i.condition.card="S",i.condition.level=D.ddf2(this.level-1),i.condition.faction="T",this.anim8(t.creatId)}atiC(){this.faction="T",this.rarity="L",this.name="Avarice, the Insatiable",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.iMobile=1,this.tribe.push("DG");let t="";this.level<3&&(t="Discard down to one card at random. "),this.ftext=`${t}You may play an additional spell this turn.`,this.f=this.atiF}atiF(t){if(this.level<3){const r=T.toPlayer(t.owner);if(r.hand.length>1){let n=r.hand.slice();const c=k.randInt(0,n.length);for(let f=n.length-1;f>-1;f--)f!==c&&xt.cardDiscard(r,f)}}const i=G.freeCard(this.code);i.condition.card="S",this.anim8(t.creatId)}bzshC(){this.faction="T",this.rarity="C",this.name="Blizzard Shaman",this.iAttack=this.boof61014,this.iHealth=this.iAttack+1,this.tribe.push("WN","AS"),this.ftext="Move another friendly creature at random to another available lane at random.",this.f=this.bzshF}bzshF(t){const i=m.creatByTarget(b.crFriendNotMeTarg(t.creatId)),r=i.length;if(r<4&&r>0){const n=i[k.randInt(0,r)];m.fling(n,"T"),this.logAct(!1,n)}}bwtC(){if(this.faction="U",this.rarity="H",this.name="Bramblewood Tracker",this.iAttack=this.boof3712,this.iHealth=this.iAttack+3,this.tribe.push("HM"),this.forges=this.level>1,this.forges){const t=this.level-1;this.ftext=`You may play an additional ${y.levelGateText(t)}Uterra creature this turn.`,this.consistent=!0,this.addSp("C",0)}else this.hints=["LG"];this.f=this.bwtF}bwtF(t){const i=G.freeCard(this.code);i.condition.card="C",i.condition.faction="U",i.condition.level=D.ddf2(this.level-1),this.anim8(t.creatId)}bssC(){this.faction="A",this.rarity="L",this.name="Brightsteel Sentinal",this.iHealth=this.boof51015,this.iAttack=this.iHealth-1,this.tribe.push("RB"),this.addSp("M",this.iHealth),this.ftext=`Each friendly Robot gets Armor ${this.iHealth} this turn.`,this.f=this.bssF}bssF(t){const i=this.boof51015,r=b.crFriendTarg();r.tribe="RB",r.canArmor=!0,m.creatByTarget(r).forEach(c=>{this.modA(c,b.modT("AR",i))})}bzdrC(){this.faction="N",this.rarity="R",this.name="Byzerak Drake",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.iRegen=this.level,this.allied="T",this.tribe.push("DG"),this.addSp("R",this.level),this.ftext=`Mobility ${this.level}.`,this.f=this.bzdrF}bzdrF(t){G.allied(this.allied)&&m.creatByTr(t).addMobility(this.level,"T")}bfmC(){this.faction="N",this.rarity="H",this.name="Byzerak Frostmaiden",this.iAttack=this.boof135,this.iHealth=this.boof91420,this.tribe.push("HM");const t=this.boof246;this.flanks=this.buffNug(t*2,0,"TS"),this.ftext=`If ${this.name} is opposed, the opposing creature gets ${y.jr9(-1*t,0)} and this gets ${y.jr9(t,0)}.~Allied Tempys: Mobility ${this.level}.`,this.f=this.bfmF}bfmF(t){const r=W.toEnterField(t.event).creature;t.trigger.type==="FR"&&G.allied("T")&&r.addMobility(this.level,"T");const n=r.opposed;if(n){const c=this.boof246;this.buffA(n,-1*c),this.buffA(r,c)}}charnC(){this.faction="N",this.rarity="C",this.name="Charnel Titan",this.iAttack=this.boof359,this.iHealth=this.boof5814,this.tribe.push("AB");const t=this.boof357;this.ftext=`If there is an enemy creature with ${t} or less attack, ${this.name} gets ${y.jr9(t,t)}.`,this.f=this.charnF}charnF(t){const i=this.boof357,r=b.crEnemyTarg();r.maxAttack=i,m.creatByTarget(r).length>0&&this.buffD(m.creatByTr(t),i)}chihC(){this.faction="U",this.rarity="C",this.name="Chistlehearth Hunter",this.iAttack=this.lValN([2,6,11]),this.iHealth=this.boof81217,this.tribe.push("HM"),this.ftext=`${this.name} gets ${y.jr9(1,0)} for each other friendly creature.`,this.f=this.chihF}chihF(t){const i=m.ddf1().length;i>1&&this.buffA(m.creatByTr(t),i-1)}chickenC(){this.faction="T",this.rarity="L",this.name="Cindersmoke Wyvern",this.iAttack=this.boof3610,this.iHealth=this.boof71217,this.tribe.push("DG"),this.iMobile=this.boof124,this.forges=!1,this.flanks=this.buffNug(this.iAttack,0,"TX"),this.ftext="Deal damage equal to its attack to the opposing creature. If unopposed, deal that damage to the enemy player instead.",this.f=this.chickenF}chickenF(t){const i=W.toCreature(t.event),r=i.creature.attack,n=i.creature.opposed;n?this.smack(n,r):(this.ouch(!t.owner,r),this.anim8(i.creature))}dfrC(){this.faction="N",this.rarity="H",this.name="Darkfrost Reaper",this.iAttack=this.boof6916,this.iHealth=this.boof3713,this.tribe.push("SK"),this.ftext="Destroy each creature with 1 or less attack.",this.f=this.dfrF}dfrF(t){const i=b.crTarg();i.maxAttack=1;const r=m.creatByTarget(i);if(r.length>0){const n=R.tick();r.forEach(c=>{this.kill(c,n)})}}dswC(){this.faction="N",this.rarity="C",this.name="Darkshard Witch",this.iAttack=this.boof51015,this.iHealth=this.iAttack-1,this.tribe.push("DF","HM");const t=this.boof234;this.ftext=`Deal ${t} damage to the enemy player and gain ${t} health for each other friendly Darkforged.`,this.f=this.dswF}dswF(t){const i=b.crFriendNotMeTarg(t.creatId);i.tribe="DF";const r=this.boof234*m.creatByTarget(i).length;r>0&&(this.ouch(!t.owner,r),this.balm(t.owner,r),this.anim8(t.creatId))}dbaC(){this.faction="U",this.rarity="H",this.name="Deepbranch Ancient",this.iAttack=this.boof4812,this.iHealth=this.iAttack,this.tribe.push("HY"),this.ftext=`If there is a friendly creature in each lane, ${this.name} gets ${y.jr9(this.iAttack,this.iHealth)}.`,this.f=this.dbaF}dbaF(t){m.ddf1().length===5&&this.buffB(m.creatByTr(t),this.iAttack,this.iHealth)}drbC(){this.faction="N",this.rarity="C",this.name="Dirge Banshee",this.iAttack=this.boof248,this.iHealth=this.boof61016,this.tribe.push("ST");const t=this.boof246;this.flanks=this.buffNug(t*2,0),this.ftext=`If ${this.name} is opposed, the opposing creature gets ${y.jr9(-t,0)} and this gets ${y.jr9(t,0)}.`,this.f=this.drbF}drbF(t){const i=W.toEnterField(t.event),r=i.creature.opposed;if(r){const n=this.boof246;this.buffA(r,-n),this.buffA(i.creature,n)}}dddC(){this.faction="N",this.rarity="L",this.name="Doomwing, Dire Drake",this.iAttack=this.boof61018,this.iHealth=this.lValN([2,6,10]),this.iMobile=this.level,this.tribe.push("DG"),this.level>1&&(this.hints=[this.level===2?"ZZ-2":"ZZ-5"]),this.forges=!1,this.flanks=this.multNug(this.avgSpawnNug(),.5),this.flanks.threat="TX",this.ftext=`Destroy the opposing ${y.levelGateText(this.level)}creature.`,this.f=this.dddF}dddF(t){const r=W.toCreature(t.event).creature.opposed;r&&D.levelTestCommon(r.level,this.level)&&this.kill(r)}espwrC(){this.faction="U",this.rarity="R",this.name="Esperian Wartusk",this.iAttack=this.boof5916,this.iHealth=this.iAttack-1,this.iBT=!0,this.allied="A",this.tribe.push("TK");const t=this.boof124;this.ftext=`Armor ${t}.`,this.f=this.espwrF}espwrF(t){G.allied(this.allied)&&m.creatByTr(t).addArmor(this.boof124)}fwtC(){this.faction="U",this.rarity="H",this.name="Frostwild Tracker",this.iAttack=this.boof4712,this.iHealth=this.boof248,this.tribe.push("TG"),this.forges=this.level>1;const t=this.level-1;this.ftext=`You may play an additional ${y.levelGateText(t)}creature this turn.`,this.level===1&&(this.hints=["LG"]),this.f=this.fwtF}fwtF(t){const i=G.freeCard(this.code);i.condition.card="C",i.condition.level=D.ddf2(this.level-1),this.anim8(t.creatId)}gwurmC(){this.faction="N",this.rarity="C",this.name="Gloomspire Wurm",this.iAttack=this.boof4813,this.iHealth=this.iAttack,this.tribe.push("WR"),this.ftext=`If there are no enemy creatures, ${this.name} gets ${y.jr9(4,4)}.`,this.f=this.gwurmF}gwurmF(t){m.qEnemyCreats().length===0&&this.buffD(m.creatByTr(t),4)}gsC(){this.faction="U",this.rarity="C",this.name="Glowstride Stag",this.iAttack=this.boof5812,this.iHealth=this.iAttack+this.level,this.tribe.push("ST");const t=this.boof51015;this.ftext=`You gain ${t} health.`,this.f=this.gsF}gsF(t){const i=this.boof51015;this.balm(t.owner,i),this.anim8(t.creatId)}iracoC(){this.faction="A",this.rarity="L",this.name="Ironmind Acolyte",this.iAttack=this.boof61015,this.iHealth=this.iAttack-2,this.tribe.push("GN"),this.ftext="If you have five or more cards in your hand, you may play an additional card this turn.",this.f=this.iracoF}iracoF(t){T.toPlayer(t.owner).hand.length>4&&(G.freePlay(),this.anim8(t.creatId))}ksbC(){this.faction="T",this.rarity="C",this.name="Kadrasian Stoneback",this.iAttack=this.boof61016,this.iHealth=this.iAttack,this.tribe.push("DN"),this.iMobile=1,this.iDefend=!0,this.forges=!1,this.flanks=this.regnNug(1),this.ftext=`Negate Defender from ${this.name} this turn.`,this.f=this.ksbF}ksbF(t){const i=W.toCreature(t.event);i.creature.hasMod(t.creatId)||this.modA(i.creature,b.modT("ND",!0,t.creatId))}legtitC(){this.faction="N",this.rarity="R",this.name="Legion Titan",this.iAttack=this.boof4812,this.iHealth=this.iAttack,this.tribe.push("ZB"),this.ftext=`${this.name} gets ${y.jr9(this.level,this.level)} for each enemy creature with ${this.boof357} or less attack.`,this.f=this.legtitF}legtitF(t){const i=b.crEnemyTarg();i.maxAttack=this.boof357;const r=m.creatByTarget(i);r.length>0&&this.buffD(m.creatByTr(t),this.level*r.length)}lbdC(){this.faction="U",this.rarity="H",this.name="Lifeblood Dryad",this.iAttack=this.lValN([4,7,9]),this.iHealth=this.iAttack,this.tribe.push("DY");const t=this.boof236;this.ftext=`If there is a friendly creature in each lane, each other friendly creature gets ${y.jr9(t,t)}.`,this.f=this.lbdF}lbdF(t){const i=m.creatByTarget(b.crFriendNotMeTarg(t.creatId));if(i.length===4){const r=this.boof236;i.forEach(n=>this.buffD(n,r))}}lyrC(){this.faction="N",this.rarity="L",this.name="Lyria, Muse of Varna",this.iAttack=this.boof5815,this.iHealth=this.boof4714,this.tribe.push("HM"),this.forges=this.level>1,this.ftext=this.level===2?"Spawn a random creature that was destroyed this game.":"Put a random creature that was destroyed this game into each of your available lanes.",this.forges||(this.hints=["LG"]),this.f=this.lyrF}lyrF(t){if(this.level===2){const i=Ft.gravedigger();i&&this.spawn(i,t.owner)}else if(this.level===3){const i=m.emptyLanes(t.owner),r=i.map(n=>Ft.gravedigger());if(i.length>0&&r[0]){const n=R.tick();i.forEach((c,f)=>{this.poot(r[f],t.owner,c,n)})}}}moeC(){this.faction="T",this.rarity="H",this.name="Master of Elements",this.iAttack=this.boof5917,this.iHealth=this.iAttack,this.tribe.push("HM"),this.forges=this.level>1,this.ftext=`You may play an additional ${y.levelGateText(this.level-1)}spell this turn.`,this.f=this.moeF}moeF(t){const i=G.freeCard(this.code);i.condition.card="S",i.condition.level=D.ddf2(this.level-1),this.anim8(t.creatId)}mmaC(){this.faction="A",this.rarity="C",this.name="Metamind Adept",this.iAttack=this.boof5915,this.iHealth=this.boof4813,this.tribe.push("MM");const t=this.level===1?"":"s";this.ftext=`Draw ${this.level} card${t}.`,this.f=this.mmaF}mmaF(t){T.drawCard(t.owner,this.level),this.anim8(t.creatId)}mmrC(){this.faction="A",this.rarity="C",this.name="Metamind Archivist",this.iAttack=this.boof3713,this.iHealth=this.iAttack+5,this.tribe.push("MM");const t=this.level===1?"":"s";this.ftext=`If there is another friendly Metamind, draw ${this.level} card${t} at the end of your turn.`,this.f=this.mmrF}mmrF(t){const i=b.crFriendNotMeTarg(t.creatId);if(i.tribe="MM",m.creatByTarget(i).length>0){const r=b.trigger("TE",this.code);r.changes=!0,r.bonus=this.bonNug(this.level*J.dcWeight),T.addTr(t.owner,r),this.anim8(t.creatId)}}mbrC(){this.faction="A",this.rarity="R",this.name="Mind Breaker",this.iAttack=this.boof248,this.iHealth=this.boof81420,this.tribe.push("MM"),this.ftext="Draw a card for each friendly Metamind.",this.f=this.mbrF}mbrF(t){const i=b.crFriendTarg();i.tribe="MM",T.drawCard(t.owner,m.creatByTarget(i).length),this.anim8(t.creatId)}mossC(){this.faction="U",this.rarity="R",this.name="Mosstodon",this.iAttack=this.boof71117,this.iHealth=this.boof4713,this.tribe.push("DN"),this.ftext=`Each other friendly Dinosaur gets ${y.jr9(0,this.boof357)}.`,this.f=this.mossF}mossF(t){const i=b.crFriendNotMeTarg(t.creatId);i.tribe="DN";const r=m.creatByTarget(i);if(r.length>0){const n=this.boof357;r.forEach(c=>this.buffH(c,n))}}nysymC(){this.faction="N",this.rarity="C",this.name="Nyrali Symbiote",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("OZ");const t=this.boof246;this.ftext=`If ${this.name} is opposed, it gets Regenerate ${t}.`,this.f=this.nysymF}nysymF(t){const i=W.toEnterField(t.event);i.creature.opposed&&this.regn(i.creature,this.boof246)}ofmC(){this.faction="A",this.rarity="R",this.name="Oreian Fieldmarshal",this.iAttack=this.boof5914,this.iHealth=this.iAttack-2,this.tribe.push("HM");const t=this.boof135;this.ftext=`Each other friendly creature gets ${y.jr9(t,0)}.`,this.f=this.ofmF}ofmF(t){const i=m.creatByTarget(b.crFriendNotMeTarg(t.creatId));if(i.length>0){const r=this.boof135;i.forEach(n=>{this.buffA(n,r)})}}orpC(){this.faction="A",this.rarity="R",this.name="Oreian Peacekeeper",this.iAttack=this.boof4816,this.iHealth=this.boof248,this.tribe.push("RB"),this.ftext=`${this.name} gets Armor ${this.iAttack} this turn.`,this.f=this.orpF}orpF(t){this.modA(m.creatByTr(t),b.modT("AR",this.iAttack))}onxmarC(){this.faction="A",this.rarity="R",this.name="Onyxium Marauder",this.iAttack=this.boof4714,this.iHealth=this.lValN([6,9,17]),this.iArmor=this.level,this.allied="N",this.tribe.push("HM"),this.ftext=`Regenerate ${this.level}.`,this.f=this.onxmarF}onxmarF(t){G.allied(this.allied)&&m.creatByTr(t).addRegen(this.level,"N")}phmC(){this.faction="A",this.rarity="R",this.name="Palladium Hindermind",this.iAttack=this.boof2612,this.iHealth=this.boof61016,this.tribe.push("HM"),this.ftext=`Each enemy creature gets ${y.jr9(this.boof123n,0)}.`,this.f=this.phmF}phmF(t){const i=m.qEnemyCreats();if(i.length>0){const r=this.boof123n;i.forEach(n=>{this.buffA(n,r)})}}palsC(){this.faction="A",this.rarity="L",this.name="Palladium Simulacrum",this.iAttack=this.boof4816,this.iHealth=this.boof248,this.iMobile=this.level-1,this.tribe.push("SS"),this.flanks=this.multNug(this.statSpawnNug(this.iAttack,this.iHealth,"TW"),.5),this.ftext=`If ${this.name} is in the center lane, Spawn a copy.`,this.f=this.palsF}palsF(t){W.toEnterField(t.event).creature.lane===3&&this.spawn(this,t.owner)}pokC(){this.faction="T",this.rarity="H",this.name="Patron of Kadras",this.iAttack=this.boof4812,this.iHealth=this.iAttack+2,this.tribe.push("ER","EL"),this.ftext=`If you have three or more Tempys cards in your hand, each friendly creature gets ${y.jr9(this.iAttack,0)} this turn.`,this.f=this.pokF}pokF(t){G.patron("T")&&m.ddf1().forEach(i=>{this.modA(i,b.modT("AT",this.iAttack))})}potC(){this.faction="N",this.rarity="H",this.name="Patron of Tarsus",this.iAttack=this.boof5914,this.iHealth=this.boof4712,this.tribe.push("DM");const t=this.potbuf;this.ftext=`If you have three or more Nekrium cards in your hand, each enemy creature gets ${y.jr9(t,t)}.`,this.f=this.potF}potF(t){if(G.patron("N")){const i=m.qEnemyCreats();if(i.length>0){const r=this.potbuf;this.logAct(!1),i.forEach(n=>{this.buffD(n,r)})}}}get potbuf(){return this.lValN([-1,-3,-6])}prinvC(){this.faction="T",this.rarity="H",this.name="Primordial Invoker",this.iAttack=this.boof61016,this.iHealth=this.boof468,this.tribe.push("HM"),this.ftext=`Deal ${this.iHealth} damage divided at random between enemy creatures and the the enemy player.`,this.f=this.prinvF}prinvF(t){const i=m.creatByTarget(b.crEnemyTarg()),r=i.length;if(r===0)this.ouch(!t.owner,this.iHealth),this.anim8(t.creatId);else{const n=R.tick(),c=r+1,f=Array(c).fill(0);for(let p=0;p<this.iHealth;p++)f[k.randInt(0,c)]++;i.forEach((p,v)=>{f[v]>0&&this.smack(p,f[v],n)}),f[r]>0&&(this.ouch(!t.owner,f[r]),this.anim8(t.creatId))}}rewC(){this.faction="U",this.rarity="L",this.name="Ramble, Eternal Witness",this.iAttack=this.boof3712,this.iHealth=this.iAttack+3+this.level,this.tribe.push("HM"),this.level===3?this.ftext="Spawn a random creature from your deck.":this.ftext=`Shuffle the level ${this.level+1} version of this from your discard pile into your deck.`,this.f=this.rewF}rewF(t){if(this.level===3){const i=b.target("DK");i.player="F",i.card="C";const r=D.deckByTarget(i).map(n=>n[0]);r.length>0&&this.spawn(r[k.randInt(0,r.length)],t.owner)}else{const i=T.getActive(),r=this.levelUpCard();i.discard.splice(i.discard.lastIndexOf(r),1),i.deck.push(r),J.simOff&&(Kt.shuffleDeck(i),this.anim8(t.creatId))}}scorchC(){this.faction="T",this.rarity="L",this.name="Scorchmane Dragon",this.iAttack=this.lValN([0,12,24]),this.iHealth=this.boof61224,this.tribe.push("DG"),this.iDefend=this.level===1,this.iMobile=this.level-1,this.forges=this.level>1,this.ftext="Deal 5 damage to "+(this.level===2?"the opposing creature.":"each enemy creature and player."),this.level===1&&(this.hints=["LG","LM"]),this.f=this.scorchF}scorchF(t){const i=W.toEnterField(t.event),r=!t.owner;if(this.level===2){const n=i.creature.opposed;n&&this.smack(n,5)}else if(this.level===3){const n=R.tick();m.qPlayerCreats(r).forEach(c=>this.smack(c,5,n)),this.ouch(r,5),this.anim8(i.creature)}}scythC(){this.faction="N",this.rarity="L",this.name="Chiron, Herald of Torment",this.iAttack=12,this.iHealth=6,this.tribe.push("DM"),this.ftext=`Each enemy creature gets ${y.jr9(-6,0)} and ${this.name} gets ${y.jr9(6,0)} for each enemy creature.`,this.f=this.scythF}scythF(t){const i=m.qEnemyCreats();i.forEach(r=>{this.buffA(r,-6)}),i.length>0&&this.buffA(m.creatByTr(t),6*i.length)}souldrC(){if(this.faction="N",this.rarity="L",this.name="Soul Drinker",this.iAttack=1,this.iHealth=this.boof4814,this.iMobile=this.level===3?1:0,this.tribe.push("VP"),this.level===3){const t=this.avgCreatureStats();this.flanks=this.buffNug(t[0]*2,0,"TS")}this.ftext=`The opposing creature's attack gets reduced to 0 and ${this.name} gains that much attack.`,this.f=this.souldrF}souldrF(t){const i=W.toEnterField(t.event),r=i.creature.opposed;if(r){const n=r.attack;this.buffA(i.creature,n),this.buffA(r,-1*n)}}ssggC(){this.faction="N",this.rarity="H",this.name="Soulscourge Grimgaunt",this.iAttack=this.level+1,this.iHealth=this.iAttack,this.tribe.push("GG"),this.ftext=`${this.name} gets ${y.jr9(this.iAttack,this.iHealth)} for each creature that was destroyed this turn.`,this.f=this.ssggF}ssggF(t){const i=this.iAttack*(G.deathsA.length+G.deathsB.length);i>0&&this.buffD(m.creatByTr(t),i)}splgC(){this.faction="N",this.rarity="T",this.name="Spiderling",this.iAttack=this.boof369,this.iHealth=this.iAttack+1,this.tribe.push("SP"),this.ftext=`Replace the opposing ${y.levelGateText(this.level)}creature with a Web.`,this.f=this.splgF}splgF(t){const i=W.toEnterField(t.event);if(i.creature.opposed){const r=i.creature.opposed;D.levelTestCommon(r.level,this.level)&&this.replc("WEB"+this.level,r.owner,r.lane)}}sbdC(){this.faction="U",this.rarity="C",this.name="Spiritbloom Dryad",this.iAttack=this.boof6812,this.iHealth=this.iAttack+this.level,this.tribe.push("DY"),this.ftext=`Each player gains ${this.boof468} health.`,this.f=this.sbdF}sbdF(t){const i=this.boof468;this.balm(!0,i),this.balm(!1,i),this.anim8(t.creatId)}sssC(){this.faction="A",this.rarity="C",this.name="Steelskin Spelunker",this.iAttack=this.boof5814,this.iHealth=this.boof61018,this.tribe.push("HM"),this.ftext=`If there is another friendly creature in the center lane, that creature gets Armor ${this.boof124}`,this.f=this.sssF}sssF(t){const i=m.searchByLane(3,t.owner);i&&i.id!==t.creatId&&!i.negateArmor&&i.addArmor(this.boof124)}lotusC(){this.faction="U",this.rarity="H",this.name="Stygian Lotus",this.iAttack=this.boof468,this.iHealth=this.iAttack-1,this.tribe.push("PL"),this.hints=["ZZ-1"],this.ftext=`If ${this.name} is opposed, spawn a copy of it. Then repeat this for each copy.`,this.f=this.lotusF}lotusF(t){if(W.toEnterField(t.event).creature.opposed){let r=!0;for(;r;){const n=m.emptyLanes(t.owner),c=n.length;if(c===0)r=!1;else{const f=n[k.randInt(0,c)];this.poot(this,t.owner,f).opposed||(r=!1)}}}}tgiC(){this.faction="T",this.rarity="R",this.name="Thundergale Invoker",this.iAttack=this.boof3711,this.iHealth=this.iAttack,this.tribe.push("WN","GT"),this.ftext=`Each creature adjacent to ${this.name} moves one lane away if possible.`,this.f=this.tgiF}tgiF(t){const i=m.creatByTr(t),r=i.lane,n=i.owner,c=[];if(r>2){const f=m.searchByLane(r-1,n);f&&(m.searchByLane(r-2,n)||(c.push(f),this.lurk(f,r-2)))}if(r<4){const f=m.searchByLane(r+1,n);f&&(m.searchByLane(r+2,n)||(c.push(f),this.lurk(f,r+2)))}c.length>0&&this.logAct(!1,...c)}tortex(t){return`Put a level ${this.level} ${t} into your hand.`}handhoss(t,i){const r=T.toPlayer(i.owner);xt.addCard(r,t+this.level,!0),this.anim8(i.creatId)}toraC(){this.faction="A",this.rarity="R",this.name="Torrent Acolyte",this.iAttack=this.boof71117,this.iHealth=this.iAttack-4,this.tribe.push("MM"),this.forges=this.level>1,this.ftext=this.tortex("Power Torrent"),this.f=this.toraF}toraF(t){this.handhoss("PTR",t)}torsC(){this.faction="U",this.rarity="R",this.name="Torrent Soldier",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("IN"),this.forges=this.level>1,this.ftext=this.tortex("Spore Torrent"),this.f=this.torsF}torsF(t){this.handhoss("STO",t)}torvC(){this.faction="T",this.rarity="R",this.name="Torrent Valkyrie",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("IC","AS"),this.forges=this.level>1,this.ftext=this.tortex("Ice Torrent"),this.f=this.torvF}torvF(t){this.handhoss("ITO",t)}torwC(){this.faction="N",this.rarity="R",this.name="Torrent Witch",this.iAttack=this.boof4814,this.iHealth=this.iAttack+3,this.tribe.push("HM"),this.forges=this.level>1,this.ftext=this.tortex("Spirit Torrent"),this.f=this.torwF}torwF(t){this.handhoss("STR",t)}umglidC(){this.faction="T",this.rarity="R",this.name="Umbruk Glider",this.iAttack=this.boof71117,this.iHealth=this.iAttack-4,this.iMobile=this.level,this.allied="U",this.tribe.push("DN"),this.ftext="Breakthrough.",this.f=this.umglidF}umglidF(t){if(G.allied(this.allied)){const i=m.creatByTr(t);i.breakthrough=!0,i.anim8("U")}}uwarC(){this.faction="T",this.rarity="H",this.name="Uranti Warlord",this.iAttack=this.boof3713,this.iHealth=this.boof71117,this.tribe.push("FR","YT"),this.ftext=`Each friendly Yeti deals ${this.iAttack} damage to the opposing creature.`,this.f=this.uwarF}uwarF(t){const i=b.crFriendTarg();i.tribe="YT";const r=R.tick();m.creatByTarget(i).forEach(n=>{const c=n.opposed;c&&c.hurtDirect(this.iAttack,n.code,this.faction,r)})}ustokeC(){this.faction="T",this.rarity="R",this.name="Uranti Warstoker",this.iAttack=this.boof6812,this.iHealth=this.iAttack-1,this.tribe.push("YT"),this.ftext=`Each other friendly Yeti gets ${y.jr9(this.boof346,0)} this turn.`,this.f=this.ustokeF}ustokeF(t){const i=b.crFriendNotMeTarg(t.creatId);i.tribe="YT";const r=this.boof346;m.creatByTarget(i).forEach(n=>{this.modA(n,b.modT("AT",r))})}uiwC(){this.faction="A",this.rarity="L",this.name="Uriel Ironwing",this.iAttack=this.lValN([6,8,13]),this.iHealth=this.boof81117,this.iMobile=this.level,this.tribe.push("AG"),this.hints=["ZZ-1"];const t=this.boof246n;this.flanks=this.buffNug(-t,0,"TX");let i="";this.level===3&&(i=" If that creature has 0 or less attack, destroy it.",this.flanks.count=1),this.ftext=`The opposing creature gets ${y.jr9(t,0)}.${i}`,this.f=this.uiwF}uiwF(t){const n=W.toEnterField(t.event).creature.opposed;n&&(this.buffA(n,this.boof246n),this.level===3&&n.attack<1&&this.kill(n))}umaulC(){this.faction="U",this.rarity="C",this.name="Uterradon Mauler",this.iAttack=this.boof4712,this.iHealth=this.iAttack,this.tribe.push("DN");const t=this.boof246;this.ftext=`If ${this.name} is opposed, it gets ${y.jr9(t,t)}.`,this.f=this.umaulF}umaulF(t){const i=W.toEnterField(t.event);i.creature.opposed&&this.buffD(i.creature,this.boof246)}vlfxC(){this.faction="T",this.rarity="L",this.name="Valifrax, Iztek's Champion",this.iAttack=this.boof4816,this.iHealth=this.iAttack+4,this.iMobile=1,this.tribe.push("FR","IC","DG"),this.forges=!1,this.flanks=this.bonNug(.5);const t=(i,r)=>`If there is ${r?"an":"no"} opposing creature, put a level ${this.level} Iztek's ${i} into your hand.`;this.ftext=`${t("Frost",!0)} ${t("Flame",!1)}`,this.f=this.vlfxF}vlfxF(t){const i=W.toCreature(t.event);this.handhoss(i.creature.opposed?"IFR":"IFL",t)}vikC(){this.faction="N",this.rarity="L",this.name="Varna, Immortal King",this.maxLevel=4,this.iAttack=this.lValN([4,6,12,18]),this.iHealth=this.lValN([8,13,22,30]),this.tribe.push("FB");let t="";this.level===4&&(t="Destroy each other creature. Then "),this.ftext=t+"Spawn a random friendly creature that was destroyed this turn.",this.f=this.vikF}vikF(t){if(this.level===4){const n=m.creatByTarget(b.crNotMeTarg(t.creatId));if(n.length>0){const c=R.tick();n.forEach(f=>this.kill(f,c))}}const i=t.owner?G.deathsA:G.deathsB,r=i.length;r>0&&this.spawn(i[k.randInt(0,r)],t.owner)}vdrkC(){this.faction="U",this.rarity="R",this.name="Venomdrinker",this.iAttack=this.lValN([5,9,13]),this.iHealth=this.iAttack,this.tribe.push("NG"),this.ftext=`${this.name} gets ${y.jr9(1,1).replaceAll("1","X")}, where X is the total amount of Poison on each enemy creature.`,this.f=this.vdrkF}vdrkF(t){const i=m.qEnemyCreats();let r=0;i.forEach(n=>{r+=n.poison}),r>0&&this.buffD(m.creatByTr(t),r)}vnsC(){this.faction="U",this.rarity="H",this.name="Venomous Netherscale",this.iAttack=this.boof4713,this.iHealth=this.iAttack+4,this.tribe.push("NG"),this.ftext=`Double the Poison on each enemy creature${this.level===3?" and the enemy player":""}.`,this.f=this.vnsF}vnsF(t){const i=b.crEnemyTarg();if(i.hasPoison=!0,m.creatByTarget(i).forEach(n=>{n.addPoison(n.poison)}),this.level===3){const n=T.toPlayer(!t.owner),c=T.totalPoison(n);c>0&&T.addPoison(n,c)}}warC(){this.faction="A",this.rarity="H",this.name="War Machine",this.iAttack=3,this.iHealth=3,this.tribe.push("RB"),this.maxLevel=1,this.overload=!0,this.ftext=`Each other friendly creature gets ${y.jr9(3,0)}.`,this.f=this.warF}warF(t){const i=b.crFriendNotMeTarg(t.creatId);m.creatByTarget(i).forEach(r=>this.buffA(r,3))}wwpC(){this.faction="U",this.rarity="H",this.name="Weirwood Patriarch",this.iAttack=this.boof5714,this.iHealth=this.lValN([7,10,17]),this.tribe.push("HM");const t=this.boof235;this.ftext=`Each friendly creature with ${this.boof357} or less attack gets ${y.jr9(t,t)}.`,this.f=this.wwpF}wwpF(t){const i=this.boof235,r=b.crFriendTarg();r.maxAttack=this.boof357,m.creatByTarget(r).forEach(n=>this.buffD(n,i))}wfbC(){this.faction="N",this.rarity="C",this.name="Witherfrost Banshee",this.iAttack=this.boof3612,this.iHealth=this.iAttack,this.tribe.push("ST");const t=this.boof247n;this.flanks=this.buffNug(-t,-t),this.ftext=`The opposing creature gets ${y.jr9(t,t)}.`,this.f=this.wfbF}wfbF(t){const r=W.toEnterField(t.event).creature.opposed;r&&this.buffD(r,this.boof247n)}xtmC(){this.faction="N",this.rarity="H",this.name="Xithian Tormentor",this.iAttack=this.lValN([6,12,22]),this.iHealth=this.lValN([10,16,28]),this.tribe.push("AB"),this.ftext="Destroy each other friendly creature.",this.f=this.xtmF}xtmF(t){const i=m.creatByTarget(b.crFriendNotMeTarg(t.creatId));if(i.length>0){const r=R.tick();i.forEach(n=>this.kill(n,r))}}zdkC(){this.faction="N",this.rarity="H",this.name="Zombie Dreadknight",this.iAttack=this.boof5814,this.iHealth=this.iAttack-2,this.tribe.push("ZB");const t=this.boof246;this.ftext=`Each friendly creature with Regenerate gets ${y.jr9(t,t)}.`,this.f=this.zdkF}zdkF(t){const i=this.boof246,r=b.crFriendTarg();r.hasRegen=!0,m.creatByTarget(r).forEach(n=>this.buffD(n,i))}}class Ze extends E{cons(t){({["AMP"]:()=>this.aprmC(),["DOV"]:()=>this.dovC(),["LMD"]:()=>this.lmdC(),["MDR"]:()=>this.metaC(),["NCP"]:()=>this.ncplC(),["ORC"]:()=>this.ordcC()})[t]()}get formation(){return!0}ftext="";constructor(t){super(t),this.cons(this.cardCode()),this.text="Formation: "+this.ftext,this.ftext=""}f;jr3(t,i){const r=super.jr3(t,i);return r.jr4("FM"),r}jr8(t){this.f(t,W.toEnterField(t.event)),H.triggerDone()}aprmC(){this.faction="A",this.rarity="H",this.name="Automation Prime",this.iHealth=this.boof468,this.iAttack=this.iHealth+4,this.tribe.push("RB"),this.ftext=`${this.name} gets Armor ${this.iHealth}.`,this.f=this.aprmR}aprmR(t,i){i.creature.addArmor(this.iHealth)}dovC(){this.faction="N",this.rarity="R",this.name="Disciple of Vyric",this.iAttack=this.boof6915,this.iHealth=this.iAttack-2,this.tribe.push("VP");const t=this.boof468;this.ftext=`Deal ${t} damage to the enemy player and gain ${t} health.`,this.f=this.dovR}dovR(t,i){const r=this.boof468;this.ouch(!t.owner,r),this.balm(t.owner,r),this.anim8(i.creature)}lmdC(){this.faction="N",this.rarity="L",this.name="Lichmane Dragon",this.iAttack=this.boof6915,this.iHealth=this.iAttack+1,this.iMobile=1,this.tribe.push("ST","DG"),this.ftext="Spawn an enemy creature that was destroyed this game.",this.f=this.lmdR}lmdR(t,i){const r=Ft.gravedigger(T.toTarget(!t.owner));if(r){const n=this.spawn(r,t.owner);n&&this.logAct(!1,n)}}metaC(){this.faction="A",this.rarity="R",this.name="Metadata Redactor",this.iAttack=this.boof6915,this.iHealth=this.iAttack-1,this.tribe.push("MM"),this.ftext="Remove all abilities from each friendly adjacent creature.",this.f=this.metaR}metaR(t,i){const r=b.crTarg();r.player=T.toTarget(t.owner),r.lanes=i.creature.adjacent,m.creatByTarget(r).forEach(n=>n.wipeAll())}ncplC(){this.faction="N",this.rarity="H",this.name="Necroplasm",this.iAttack=this.lValN([5,8,9]),this.iHealth=this.lValN([7,13,19]),this.tribe.push("OZ"),this.ftext="The enemy player discards a card at random.",this.f=this.ncplR}ncplR(t,i){const r=T.toPlayer(!t.owner);if(r.hand.length>0){xt.cardDiscard(r,k.randInt(0,r.hand.length));const n=b.trigger("NT",this.code);n.bonus=this.bonNug(.5),T.addTr(t.owner,n),this.anim8(t.creatId)}}ordcC(){this.faction="A",this.rarity="C",this.name="Ordnance Captain",this.iAttack=this.boof368,this.iHealth=this.boof61014,this.tribe.push("HM"),this.ftext=`Each friendly creature gets ${y.jr9(this.boof235,0)}.`,this.f=this.ordcR}ordcR(t,i){const r=this.boof235;m.qPlayerCreats(t.owner).forEach(n=>this.buffA(n,r))}}class ci extends E{cons(t){({["PYM"]:()=>this.pymC(),["RBG"]:()=>this.rbgC(),["SRV"]:()=>this.sprvC(),["TGK"]:()=>this.tgkC()})[t]()}hPlayer=0;trigB;bDraw=!0;constructor(t){super(t),this.cons(this.cardCode())}g;jr3(t,i){const r=super.jr3(t,i),n=r.jr4("LG",this.code);return n.bonus=this.trigB,n.batch=this.bDraw,r}ddf8(t){return this.validPlayer(t)&&m.creatByTr(t).status==="A"}jr8(t){this.g(t),H.triggerDone()}validPlayer(t){return this.hPlayer===0?!0:this.hPlayer===1?t.owner===t.event.playerA:t.owner!==t.event.playerA}pymC(){this.faction="T",this.rarity="R",this.name="Pyre Mystic",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.tribe.push("FR","AS"),this.hPlayer=-1;const t=this.lValS(["","2x ","3x "]);this.text=`When an enemy player gains health, deal ${t}that much damage to the enemy player.`,this.trigB=this.playerNug(0,this.boof369n,"TW"),this.g=this.pymG}pymG(t){this.ouch(t.event.playerA,t.event.healAmt*this.level,t.draw),t.draw&&this.anim8(t.creatId)}rbgC(){this.faction="U",this.rarity="H",this.name="Runebark Guardian",this.iAttack=this.boof5916,this.iHealth=this.iAttack,this.tribe.push("HM"),this.hPlayer=1;const t=this.boof135;this.text=`When you gain health, ${this.name} gets ${y.jr9(t,t)}.`,this.trigB=this.buffNug(t,t,"TS"),this.g=this.rbgG}rbgG(t){const i=this.boof135;m.creatByTr(t).buff(i,i,t.draw?"U":"X")}sprvC(){this.faction="N",this.rarity="R",this.name="Spirit Reaver",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("DM"),this.hPlayer=-1;const t=this.boof234;this.text=`When an enemy player gains health, ${this.name} gets ${y.jr9(t,t)}.`,this.trigB=this.buffNug(t,t,"TS"),this.hints=["ZZ-1"],this.g=this.sprvG}sprvG(t){const i=this.boof234;m.creatByTr(t).buff(i,i,t.draw?"N":"X")}tgkC(){this.faction="U",this.rarity="R",this.name="Tuskin Grovekeeper",this.iAttack=this.boof6912,this.iHealth=this.iAttack,this.tribe.push("TK"),this.bDraw=!1,this.hPlayer=1,this.text=`When you gain health, Spawn a 3/3 ${X.minionName(this.level)}.`,this.trigB=this.rawNug(.5,3,3,0,0,0,"TW"),this.g=this.tgkG}tgkG(t){const i=this.lValS(["SXD","SPL","TTF"])+this.level;this.spawn(i,t.owner)}}class ti extends E{cons(t){({["AWU"]:()=>this.awuC(),["EWE"]:()=>this.eweC(),["FFM"]:()=>this.ffmC(),["LUC"]:()=>this.lugC(),["WBH"]:()=>this.wbhC()})[t]()}mPlayer=0;trigB;bDraw=!0;constructor(t){super(t),this.cons(this.cardCode())}m;jr3(t,i){const r=super.jr3(t,i),n=r.jr4("MV");return n.bonus=this.trigB,n.batch=this.bDraw,r}ddf8(t){return this.validPlayer(t)&&m.creatByTr(t).status==="A"}jr8(t){this.m(t),H.triggerDone()}validPlayer(t){if(this.mPlayer===0)return!0;const i=W.toCreature(t.event);return this.mPlayer===1?t.owner===i.creature.owner:t.owner!==i.creature.owner}awuC(){this.faction="T",this.rarity="R",this.name="Arc Wurm",this.iAttack=this.boof4813,this.iHealth=this.iAttack+3,this.tribe.push("LT","EL"),this.iMobile=1,this.mPlayer=1;const t=this.boof234;this.text=`When a friendly creature moves, deal ${t} damage to the enemy player.`,this.trigB=this.playerNug(0,-t,"TW"),this.m=this.awuM}awuM(t){this.ouch(!t.owner,this.boof234,t.draw),t.draw&&this.anim8(t.creatId)}eweC(){this.faction="T",this.rarity="H",this.name="Emberwind Evoker",this.iAttack=this.boof4914,this.iHealth=this.iAttack+2,this.tribe.push("HM"),this.mPlayer=1,this.bDraw=!1;const t=this.boof124;this.text=`When a friendly creature moves, it gets ${y.jr9(t,t)}.`,this.trigB=this.buffNug(t,t,"TX"),this.m=this.eweM}eweM(t){this.buffD(W.toCreature(t.event).creature,this.boof124)}ffmC(){this.faction="T",this.rarity="H",this.name="Frostfang Maiden",this.iAttack=this.boof5814,this.iHealth=this.iAttack+this.level,this.tribe.push("HM"),this.iMobile=this.level,this.bDraw=!1,this.mPlayer=1;const t=this.ffbof;this.text=`When a friendly creature moves, deal ${t} to the creature opposing it.`,this.trigB=this.buffNug(t,0,"TX"),this.m=this.ffmM}ffmM(t){const i=W.toCreature(t.event).creature.opposed;i&&this.smack(i,this.ffbof)}get ffbof(){return this.level+2}lugC(){this.faction="T",this.rarity="L",this.name="Lug, Uranti Charger",this.iAttack=this.boof359,this.iHealth=this.lValN([9,13,19]),this.level===3&&(this.iMobile=1),this.tribe.push("YT"),this.mPlayer=1,this.text="When a friendly creature moves on your turn, Lug battles an additional time.",this.trigB=this.buffNug(this.iAttack,0,"TX"),this.m=this.lugM}lugM(t){if(t.owner===T.activeA){const i=m.creatByTr(t);i.extraBattles+=1,t.draw&&this.anim8(i)}}wbhC(){this.faction="T",this.rarity="R",this.name="Windborn Hellion",this.iAttack=this.boof4812,this.iHealth=this.boof81217,this.tribe.push("WN","EL"),this.mPlayer=1,this.text=`When a friendly creature moves, ${this.name} gets ${y.jr9(this.level,this.level)}.`,this.trigB=this.buffNug(this.level,this.level,"TS"),this.m=this.wbhM}wbhM(t){m.creatByTr(t).buff(this.level,this.level,this.bFac(t))}}class he extends E{cons(t){({["ATG"]:()=>this.agrdC(),["ART"]:()=>this.arootC(),["ATS"]:()=>this.atrapC(),["ARB"]:()=>this.arbysC(),["BLH"]:()=>this.bblhC(),["CYC"]:()=>this.ccC(),["DHW"]:()=>this.dhwC(),["FBI"]:()=>this.fbiC(),["FLS"]:()=>this.flspkC(),["IBA"]:()=>this.beardC(),["IZK"]:()=>this.izzyC(),["KAW"]:()=>this.kasC(),["SWA"]:()=>this.swaC()})[t]()}trigB;constructor(t){super(t),this.cons(this.cardCode())}t;p;jr3(t,i){const r=super.jr3(t,i);if(this.trigB){const n=r.jr4("PC");n.bonus=this.trigB}return r}ddf8(t){return t.event.code==="PLC"?this.t(t,t.event):t.event.code==="TRE"&&this.cardCode()==="BLH"}jr8(t){t.event.code==="PLC"?this.p(t,t.event):this.kill(m.creatByTr(t)),H.triggerDone()}spMyTurn(t,i){return i.playerA===t.owner&&O.getCard(i.cardCode).type==="S"}fSpMyTurn(t,i){if(i.playerA===t.owner){const r=O.getCard(i.cardCode);if(r.type==="S"&&r.faction===this.faction)return!0}return!1}enemyPlay(t,i){return i.playerA!==t.owner}isAct(t){return m.jr5(t).status==="A"}agrdC(){this.faction="A",this.rarity="C",this.name="Aetherguard",this.iAttack=this.boof6814,this.iHealth=this.iAttack-1,this.tribe.push("RB"),this.trigB=this.rawNug(0,St.calcCreatValueFormula(0,0,this.level,0,0,!1,0),0,0,0),this.text=`When you play a spell, ${this.name} gets Armor ${this.level}.`,this.t=this.spMyTurn,this.p=this.agrdP}agrdP(t,i){m.creatByTr(t).addArmor(this.level)}arootC(){this.faction="U",this.rarity="H",this.name="Aether Root",this.iAttack=this.boof3610,this.iHealth=this.iAttack,this.tribe.push("PL"),this.hints=[this.lValH(["ZZ+1","ZZ+2","ZZ+3"])];const t=this.boof234;this.text=`When you play an Uterra spell, ${this.name} gets ${y.jr9(t,t)}.`,this.trigB=this.multNug(this.buffNug(t,t,"TS"),2),this.t=this.fSpMyTurn,this.p=this.arootP}arootP(t,i){this.buffD(m.creatByTr(t),this.boof234)}atrapC(){this.faction="T",this.rarity="C",this.name="Aethertap Shaman",this.iAttack=this.lValN([7,9,16]),this.iHealth=this.iAttack-1,this.tribe.push("HM"),this.trigB=this.regnNug(1),this.text=`When you play a spell, ${this.name} gets Mobility 1 this turn.`,this.t=this.spMyTurn,this.p=this.atrapP}atrapP(t,i){this.modA(m.creatByTr(t),b.modT("MB",1))}arbysC(){this.faction="A",this.rarity="H",this.name="Anvillon Arbiter",this.iAttack=this.boof3714,this.iHealth=this.iAttack+3,this.iArmor=1,this.tribe.push("RB"),this.text="When the enemy player plays their second card in a turn, that player discards their hand.",this.trigB=this.bonNug(1,"TX"),this.t=this.enemyPlay,this.p=this.arbysP}arbysP(t,i){if(G.cardsPlayed>1&&this.isAct(t.creatId)){const r=T.getActive();r.hand.length>0&&(xt.cardDiscardAll(r),this.anim8(t.creatId))}}bblhC(){this.faction="T",this.rarity="L",this.name="Binben, Lightning Herald",this.iAttack=this.boof61017,this.iHealth=this.boof468,this.tribe.push("LT","AS");const t=O.getCard(this.lwy());this.text=`When you play a spell, Spawn a ${y.tokName(t)}. At the end of your turn, destroy it.`,this.trigB=this.spawnNug(t,"TX"),this.t=this.spMyTurn,this.p=this.bblhP}bblhP(t,i){if(this.isAct(t.creatId)){const r=this.spawn(this.lwy(),t.owner);if(r){const n=r.jr4("TE",this.code);n.changes=!0}}}lwy(){return "LWY"+this.level}ccC(){this.faction="N",this.rarity="H",this.name="Crypt Conjurer",this.iAttack=this.boof258,this.iHealth=this.boof81420,this.tribe.push("VP"),this.text=`When you play a Nekrium spell, deal ${this.iAttack} damage to the enemy player and you gain ${this.iAttack} health.`,this.trigB=this.playerNug(this.iAttack,-this.iAttack,"TX"),this.t=this.fSpMyTurn,this.p=this.ccP}ccP(t,i){this.isAct(t.creatId)&&(this.ouch(!t.owner,this.iAttack),this.balm(t.owner,this.iAttack),this.anim8(t.creatId))}dhwC(){this.faction="N",this.rarity="R",this.name="Darkheart Wanderer",this.iAttack=this.boof3612,this.iHealth=this.boof81116,this.tribe.push("HM");const t=this.boof124;this.text=`When you play a spell, ${this.name} gets Regenerate ${t}.`,this.trigB=this.regnNug(t),this.t=this.spMyTurn,this.p=this.dhwP}dhwP(t,i){this.regn(m.creatByTr(t),this.boof124)}fbiC(){this.faction="T",this.rarity="H",this.name="Flamebreak Invoker",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("FR","GT"),this.text=`When you play a Tempys spell, deal ${this.level} damage to each enemy creature.`,this.trigB=this.buffNug(0,this.level*2,"TX"),this.t=this.fSpMyTurn,this.p=this.fbiP}fbiP(t,i){if(this.isAct(t.creatId)){const r=R.tick();m.qEnemyCreats().forEach(n=>{this.smack(n,this.level,r)})}}flspkC(){this.faction="T",this.rarity="C",this.name="Flame Speaker",this.iAttack=this.lValN([2,6,13]),this.iHealth=this.level*6,this.tribe.push("HM");const t=this.boof235;this.text=`When you play a spell, deal ${t} damage to the enemy player.`,this.trigB=this.playerNug(0,-t,"TX"),this.t=this.spMyTurn,this.p=this.flspkP}flspkP(t,i){this.isAct(t.creatId)&&(this.ouch(!t.owner,this.boof235),this.anim8(t.creatId))}beardC(){this.faction="A",this.rarity="L",this.name="Ironbeard, Ascendant",this.iAttack=this.lValN([6,9,14,20]),this.iHealth=this.iAttack,this.iArmor=this.level,this.maxLevel=4,this.tribe.push("FB");let t="";this.level>1&&(t=" and Armor "+(this.level-1));let i=this.lValS([this.name,this.name,this.name+" and adjacent friendly creatures","friendly creatures"]);this.text=`When you play Anvilbreaker, ${i} gets ${y.jr9(this.level+1,0)}${t}.`,this.trigB=this.bonNug(this.level/2,"TX"),this.t=this.beardT,this.p=this.beardP}beardT(t,i){return i.playerA===t.owner&&i.cardCode==="AVB"+"1"}beardP(t,i){const r=this.level+1,n=this.level-1,c=m.creatByTr(t);if(this.buffA(c,r),n>0&&c.addArmor(1),this.level>2){const f=b.crFriendTarg();this.level===3?f.lanes=c.adjacent.concat(c.lane):f.notMe=c.id,m.creatByTarget(f).forEach(p=>{this.buffA(p,r),p.addArmor(n)})}}izzyC(){this.faction="T",this.rarity="L",this.name="Iztek, Khan of Arrachtor",this.iAttack=this.boof6915,this.iHealth=this.iAttack,this.tribe.push("IC","FR","AS"),this.text=`When you play Iztek's Frost, replace this with a level ${this.level} Iztek, Avatar of Frost.~When you play Iztek's Flame, replace this with a level ${this.level} Iztek, Avatar of Flame.`,this.trigB=this.bonNug(.5,"TX"),this.t=this.izzyT,this.p=this.izzyP}izzyT(t,i){if(i.playerA===t.owner){const r=i.cardCode.slice(0,3);return r==="IFL"||r==="IFR"}return!1}izzyP(t,i){const r=m.creatByTr(t),n=i.cardCode.slice(0,3)==="IFL"?"IZL":"IZR";this.replc(`${n}${this.level}`,r.owner,r.lane)}kasC(){this.faction="T",this.rarity="L",this.name="Kas, Arcweaver",this.iAttack=this.boof4814,this.iHealth=this.iAttack,this.tribe.push("LT","AS"),this.text="When you play a spell, Kas battles an additional time this turn.",this.trigB=this.buffNug(this.iAttack,0,"TX"),this.t=this.spMyTurn,this.p=this.kasP}kasP(t,i){this.wrang(m.creatByTr(t))}swaC(){this.faction="T",this.rarity="H",this.name="Sparkweaver Acolyte",this.iAttack=this.boof4610,this.iHealth=this.boof61218,this.tribe.push("LT","AS"),this.text=`When you play a Tempys spell, ${this.name} gets ${y.jr9(this.iAttack,0)} this turn.`,this.trigB=this.multNug(this.buffNug(this.iAttack,0,"TW"),.5),this.t=this.fSpMyTurn,this.p=this.swaP}swaP(t,i){this.modA(m.creatByTr(t),b.modT("AT",this.iAttack))}}class di extends E{cons(t){({["KTS"]:()=>this.kitC(),["RSC"]:()=>this.scootC(),["SCC"]:()=>this.shcrC(),["SND"]:()=>this.ssdC()})[t]()}trigB;constructor(t){super(t),this.cons(this.cardCode())}r;jr3(t,i){const r=super.jr3(t,i),n=r.jr4("RP");return n.bonus=this.trigB,r}ddf8(t){return t.creatId===t.event.replCreatId}jr8(t){this.r(t,W.toReplaced(t.event)),H.triggerDone()}kitC(){this.faction="U",this.rarity="H",this.name="Kitaru Sprite",this.iAttack=this.boof358,this.iHealth=this.boof71117,this.tribe.push("FY"),this.hints=["RT"],this.text=`When this is replaced, Spawn a ${this.name}.`,this.trigB=this.buffNug(0,this.iHealth,"TW"),this.r=this.kitR}kitR(t,i){this.spawn(this,t.owner)}scootC(){this.faction="A",this.rarity="T",this.name="Relic Scout",this.iAttack=this.level,this.iHealth=this.level,this.iArmor=this.level,this.free=!0,this.tribe.push("RB"),this.hints=["RT"],this.text=`When ${this.name} is replaced, the creature that replaces it gets ${y.jr9(this.level,this.level,!0)} and Armor ${this.level}.`,this.trigB=this.buffNug(this.level,St.calcCreatValueFormula(this.level,this.level,this.level,0,0,!1,0)),this.r=this.scootR}scootR(t,i){this.buffD(i.creature,this.level),i.creature.addArmor(this.level)}shcrC(){this.faction="U",this.rarity="C",this.name="Shardclaw Crusher",this.iAttack=this.boof5812,this.iHealth=this.iAttack,this.tribe.push("IN"),this.hints=["RT"],this.text=`When ${this.name} is replaced, the creature that replaces it gets ${y.jr9(this.iAttack,this.iAttack)}.`,this.trigB=this.multNug(this.buffNug(this.iAttack,this.iAttack,"TX"),.5),this.r=this.shcrR}shcrR(t,i){this.buffD(i.creature,this.iAttack)}ssdC(){this.faction="U",this.rarity="R",this.name="Spiritstone Druid",this.iAttack=this.boof4610,this.iHealth=this.boof346,this.tribe.push("TG"),this.hints=["RT"],this.text=`When ${this.name} is replaced, put a ${this.iAttack}/${this.iHealth} Spirit into each adjacent available lane.`,this.trigB=this.buffNug(this.iAttack,this.iHealth,"TW"),this.trigB.count=1,this.r=this.ssdR}ssdR(t,i){const r=i.replCreat.adjacent,n=m.emptyLanes(t.owner),c=R.tick();r.forEach(f=>{n.includes(f)&&this.poot("SPU"+this.level,t.owner,f,c)})}}class Ie extends E{cons(t){({["BST"]:()=>this.brimC(),["OSV"]:()=>this.scavC(),["RHU"]:()=>this.tiaC(),["SKS"]:()=>this.spsoC(),["SWG"]:()=>this.stgrC(),["VTW"]:()=>this.weldC(),["WEB"]:()=>this.webC()})[t]()}constructor(t){super(t),this.cons(this.cardCode())}u;image(t){return this.rarity==="T"?super.fixedImage(t):super.image(t)}jr3(t,i){const r=super.jr3(t,i);return r.jr4("UP"),r}jr8(t){this.u(t,W.toReplaced(t.event)),H.triggerDone()}brimC(){this.faction="T",this.rarity="L",this.name="Brimstone Tyrant",this.iAttack=this.boof6916,this.iHealth=this.iAttack,this.tribe.push("FR","EL"),this.hints=["RD"];const t=this.boof468;this.text=`Upgrade: Deal ${t} damage to each other creature.`,this.u=this.brimR}brimR(t,i){const r=R.tick(),n=this.boof468;m.creatByTarget(b.crNotMeTarg(t.creatId)).forEach(c=>this.smack(c,n,r))}scavC(){this.faction="A",this.rarity="H",this.name="Oreian Scavenger",this.iAttack=this.boof6916,this.iHealth=1,this.tribe.push("RB"),this.hints=["RD"],this.text=`Upgrade: ${this.name} gets Armor ${this.iAttack}.`,this.u=this.scavR}scavR(t,i){i.creature.addArmor(this.iAttack)}tiaC(){this.faction="A",this.rarity="L",this.name="Relic Hunter",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.iBT=!0,this.tribe.push("HM"),this.hints=["RD"],this.text=`Upgrade: ${this.name} gets +attack and +health equal to the creature it replaced.`,this.u=this.tiaR}tiaR(t,i){this.buffB(i.creature,i.replCreat.attack,i.replCreat.health)}spsoC(){this.faction="T",this.rarity="C",this.name="Sparksoul",this.iAttack=this.boof6915,this.iHealth=this.iAttack-1,this.tribe.push("LT","EL"),this.hints=["RD"],this.text=`Upgrade: ${this.name} gets Aggressive.`,this.u=this.spsoR}spsoR(t,i){i.creature.aggressive=!0,this.anim8(i.creature)}stgrC(){this.faction="A",this.rarity="C",this.name="Steelwatch Guard",this.iAttack=this.boof4711,this.iHealth=this.iAttack,this.tribe.push("RB"),this.hints=["RD"],this.text=`Upgrade: ${this.name} gets ${y.jr9(this.iAttack,this.iAttack)}.`,this.u=this.stgrR}stgrR(t,i){this.buffD(i.creature,this.iAttack)}weldC(){this.faction="A",this.rarity="R",this.name="Vault Welder",this.iAttack=this.boof71118,this.iHealth=this.lValN([9,14,22]),this.iDefend=!0,this.tribe.push("RB"),this.hints=["RD"],this.text=`Upgrade: Negate Defender from ${this.name}.`,this.u=this.weldR}weldR(t,i){i.creature.negDefend("A")}webC(){this.faction="N",this.rarity="T",this.name="Web",this.iAttack=0,this.iHealth=1,this.iDefend=!0,this.tribe.push("WB"),this.text=`Upgrade: ${this.name} attack and health become equal to the creature it replaced.`,this.u=this.webR}webR(t,i){this.buffB(i.creature,i.replCreat.attack,i.replCreat.health-1)}}class Nt extends E{cons(t){({["CGG"]:()=>this.cggC(),["CGF"]:()=>this.cfiendC(),["CSB"]:()=>this.corpsC(),["CYS"]:()=>this.cslmC(),["DSK"]:()=>this.dskC(),["FST"]:()=>this.fstrC(),["FWK"]:()=>this.fwlkC(),["FFD"]:()=>this.ffC(),["FSC"]:()=>this.flwcC(),["GVS"]:()=>this.ghsC(),["GBG"]:()=>this.ggC(),["GMR"]:()=>this.gromC(),["MMX"]:()=>this.mmeC(),["NOZ"]:()=>this.nyozC(),["POX"]:()=>this.poxC(),["RSZ"]:()=>this.rszC(),["SFM"]:()=>this.spirmC(),["SNT"]:()=>this.sssC(),["USA"]:()=>this.usaC(),["VGN"]:()=>this.vgfsC(),["XHS"]:()=>this.xhostC(),["ZTU"]:()=>this.zimusC()})[t]()}vtext="";trigB;v;fixedImgCreat=!1;constructor(t){super(t),this.cons(this.cardCode()),this.trigB&&(this.text="Vengeance: "+this.vtext),this.vtext=""}image(t){return this.fixedImgCreat?this.fixedImage(t):super.image(t)}jr3(t,i){const r=super.jr3(t,i);if(this.trigB){const n=r.jr4("VN");n.bonus=this.trigB}return r}jr8(t){this.v(t,W.toCreature(t.event)),H.triggerDone()}cggC(){this.faction="N",this.rarity="H",this.name="Ceaseless Grimgaunt",this.iAttack=this.boof5813,this.iHealth=1,this.tribe.push("GG"),this.vtext=`If there are no friendly creatures in play, Spawn a level ${this.level} ${this.name}.`,this.hints=["ST"],this.trigB=this.bonNug(.5),this.v=this.cggV}cggV(t,i){m.qPlayerCreats(t.owner).length===0&&(this.logAct(!1),this.spawn(this,t.owner))}cfiendC(){this.faction="N",this.rarity="T",this.name="Contagion Fiend",this.iAttack=this.boof234,this.iHealth=this.boof5812,this.tribe.push("AB"),this.hints=["ST"],this.fixedImgCreat=!0;const t=-this.level;this.vtext=`Each enemy creature gets ${y.jr9(t,t)}.`;const i=this.boof246;this.trigB=this.buffNug(i,i),this.v=this.cfiendV}cfiendV(t,i){const r=-this.level,n=R.tick();m.qPlayerCreats(!t.owner).forEach(c=>this.buffD(c,r,n))}corpsC(){this.faction="N",this.rarity="C",this.name="Corpulent Shambler",this.iAttack=this.lValN([5,7,15]),this.iHealth=this.iAttack,this.tribe.push("ZB"),this.vtext="Put a 3/3 Zombie into this lane.",this.trigB=this.buffNug(3,3),this.v=this.corpsV}corpsV(t,i){const r=`${"ZBS"}${this.level}`;this.poot(r,i.creature.owner,i.creature.lane)}cslmC(){this.faction="N",this.rarity="C",this.name="Crypt Slime",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.tribe.push("OZ"),this.vtext="Put a 1/1 Oozeling into this lane.",this.trigB=this.buffNug(1,1),this.v=this.cslmV}cslmV(t,i){const r=`${"COZ"}${this.level}`;this.poot(r,i.creature.owner,i.creature.lane)}dskC(){this.faction="N",this.rarity="C",this.name="Death Seeker",this.iAttack=1,this.iHealth=1,this.tribe.push("HM"),this.fixedImgCreat=!0,this.hints=["ST"];const t=this.boof51015;this.vtext=`Put a ${t}/${t} Spirit into this lane.`,this.trigB=this.buffNug(t,t),this.v=this.dskV}dskV(t,i){const r=`${"SPN"}${this.level}`;this.poot(r,i.creature.owner,i.creature.lane)}fstrC(){this.faction="N",this.rarity="R",this.name="Fell Strider",this.iAttack=this.boof4810,this.iHealth=this.boof369,this.tribe.push("ZB");const t=O.getCard(this.fsz());this.vtext=`Spawn a ${y.tokName(t)}.`,this.trigB=this.multNug(this.buffNug(t.iAttack,t.iHealth),.5),this.v=this.fstrV}fstrV(t,i){this.spawn(this.fsz(),i.creature.owner)}fsz(){return "ZST"+this.level}fwlkC(){this.faction="N",this.rarity="C",this.name="Fell Walker",this.iAttack=this.boof359,this.iHealth=this.iAttack,this.tribe.push("ZB"),this.hints=["ST"];const t=O.getCard(X.zomc(this.level));this.vtext=`Put a ${y.tokName(t)} into this lane.`,this.trigB=this.buffNug(t.iAttack,t.iHealth),this.v=this.fwlkV}fwlkV(t,i){this.poot(X.zomc(this.level),i.creature.owner,i.creature.lane)}ffC(){this.faction="N",this.rarity="H",this.name="Fleshfiend",this.iAttack=this.boof6812,this.iHealth=this.iAttack,this.tribe.push("AB"),this.vtext=`Put a level ${this.level-1} ${this.name} into this lane.`,this.level>1&&(this.trigB=this.buffNug(0,this.lValN([0,6,15]))),this.v=this.ffV}ffV(t,i){const r=`${"FFD"}${this.level-1}`;this.poot(r,i.creature.owner,i.creature.lane)}flwcC(){this.faction="A",this.rarity="C",this.name="Flowsteel Carrier",this.iAttack=this.boof5915,this.iHealth=this.boof358,this.tribe.push("RB"),this.vtext=`Give a friendly Robot at random Armor ${this.iHealth}.`,this.trigB=this.regnNug(this.iHealth),this.v=this.flwcV}flwcV(t,i){const r=b.crTarg();r.player=T.toTarget(t.owner),r.tribe="RB";const n=m.creatByTarget(r);if(n.length>0){const c=n[k.randInt(0,n.length)];c.addArmor(this.iHealth),this.logAct(!1,c)}}ghsC(){this.faction="U",this.rarity="C",this.name="Glowhive Siren",this.iAttack=this.boof3814,this.iHealth=this.boof61117,this.tribe.push("IN"),this.vtext=`You gain ${this.boof124} to ${this.gghigh-1} health.`,this.trigB=this.playerNug(this.boof258,0),this.v=this.ghsV}ghsV(t,i){const r=k.randInt(this.boof124,this.gghigh);this.balm(t.owner,r),this.anim8(i.creature)}get gghigh(){return this.lValN([5,9,13])}ggC(){this.faction="N",this.rarity="C",this.name="Graveborn Glutton",this.iAttack=this.boof61117,this.iHealth=this.boof3814,this.tribe.push("AB"),this.vtext=`Deal ${this.boof124} to ${this.gghigh-1} damage to the enemy player.`,this.trigB=this.playerNug(0,-this.boof258),this.v=this.ggV}ggV(t,i){const r=k.randInt(this.boof124,this.gghigh);this.ouch(!t.owner,r),this.anim8(i.creature)}gromC(){this.faction="U",this.rarity="C",this.name="Grove Matriarch",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("PL");const t=X.minionBuff(this.level),i=X.minionName(this.level);this.vtext=`Put a ${t}/${t} ${i} into this lane.`,this.trigB=this.buffNug(t,t),this.v=this.gromV}gromV(t,i){const r=X.minionCode(this.level);this.poot(r,i.creature.owner,i.creature.lane)}mmeC(){this.faction="A",this.rarity="C",this.name="Metamind Explorer",this.iAttack=this.boof3713,this.iHealth=this.iAttack+2,this.tribe.push("MM"),this.vtext=`Draw ${this.level} cards.`,this.trigB=this.bonNug(this.level*J.dcWeight),this.v=this.mmeV}mmeV(t,i){T.drawCard(t.owner,this.level),this.anim8(i.creature)}nyozC(){this.faction="N",this.rarity="R",this.name="Nyrali Ooze",this.iAttack=this.boof247,this.iHealth=this.iAttack,this.tribe.push("OZ"),this.hints=["ST"];const t=this.level+this.iAttack+1;this.vtext=`Put a ${t}/${t} Oozeling into this lane.`,this.trigB=this.buffNug(t,t),this.v=this.nyozV}nyozV(t,i){const r=`${"OOZ"}${this.level}`;this.poot(r,i.creature.owner,i.creature.lane)}poxC(){if(this.faction="N",this.rarity="H",this.name="Progeny of Xith",this.iAttack=this.boof246,this.iHealth=this.iAttack,this.tribe.push("AB"),this.hints=["LB","ST"],this.vtext=`Spawn a level ${this.level+1} ${this.name}.`,this.level<3){const t=this.lValN([10,6,0]);this.trigB=this.buffNug(t,t)}this.v=this.poxV}poxV(t,i){const r=`${"POX"}${this.level+1}`;this.spawn(r,i.creature.owner)}rszC(){this.faction="N",this.rarity="R",this.name="Runescarred Zombie",this.iAttack=this.lValN([5,8,16]),this.iHealth=this.boof359,this.tribe.push("ZB"),this.vtext=`Put a ${y.levelGateText(this.level)}spell at random from your discard pile into your hand.`,this.trigB=this.bonNug(.5),this.v=this.rszV}rszV(t,i){const r=T.toPlayer(t.owner),n=b.target("TD");n.player=T.toTarget(r),n.card="S",n.level=D.ddf2(this.level);const c=D.deckByTarget(n);if(c.length>0){const f=c[k.randInt(0,c.length)];r.discard.splice(f[1],1),xt.addCard(r,f[0],!0),this.anim8(i.creature)}}spirmC(){this.faction="T",this.rarity="H",this.name="Spiritflame Mystic",this.iAttack=this.boof6912,this.iHealth=this.iAttack-3,this.tribe.push("HM"),this.hints=["ST"],this.vtext=`Deal ${this.boof246} damage to each creature.`,this.trigB=this.bonNug(.3),this.v=this.spirmV}spirmV(t,i){const r=this.boof246,n=R.tick();m.qActiveCreats().forEach(c=>this.smack(c,r,n))}sssC(){this.faction="N",this.rarity="L",this.name="Spiritstone Sentry",this.iAttack=this.boof4610,this.iHealth=this.iAttack,this.tribe.push("ST"),this.vtext=`If ${this.name} was in a side lane, Spawn a ${this.name}.`,this.hints=["ST"],this.trigB=this.buffNug(this.iAttack,this.iAttack),this.v=this.sssV}sssV(t,i){(i.creature.lane===1||i.creature.lane===5)&&this.spawn(i.creature.code,t.owner)}usaC(){this.faction="T",this.rarity="H",this.name="Unstable Asir",this.iAttack=this.boof357,this.iHealth=this.boof61016,this.iDefend=!0,this.tribe.push("FR","AS"),this.hints=["ST"],this.vtext=`Deal damage equal to ${this.name}'s attack to the enemy player.`,this.trigB=this.playerNug(0,-this.iAttack),this.v=this.usaV}usaV(t,i){i.creature.attack>0&&(this.ouch(!t.owner,i.creature.attack),this.anim8(i.creature))}vgfsC(){this.faction="N",this.rarity="C",this.name="Vengeful Spirit",this.iAttack=this.boof357,this.iHealth=this.iAttack-2,this.tribe.push("ST"),this.hints=["ST"];const t=this.boof369n;this.vtext=`Give the opposing creature ${y.jr9(t,t)}.`,this.trigB=this.buffNug(-t,-t),this.v=this.vgfsV}vgfsV(t,i){const r=i.creature.opposed;r&&this.buffD(r,this.boof369n)}xhostC(){this.faction="N",this.rarity="C",this.name="Xithian Host",this.iAttack=this.boof359,this.iHealth=this.boof135,this.tribe.push("AB"),this.hints=["ST"],this.vtext=`Deal ${this.iAttack} damage to the enemy player and you gain ${this.iAttack} health.`,this.trigB=this.playerNug(this.iAttack,-this.iAttack),this.v=this.xhostV}xhostV(t,i){const r=this.iAttack;this.ouch(!t.owner,r),this.balm(t.owner,r),this.anim8(i.creature)}zimusC(){this.faction="N",this.rarity="L",this.name="Zimus, the Undying",this.iAttack=this.boof51014,this.iHealth=this.lValN([2,5,7]),this.tribe.push(this.level===1?"HM":"ZB"),this.vtext=`Spawn a Zimus, the ${this.level===2?"Returned":"Undying"}.`,this.level<3?(this.hints=["LG"],this.level===2?(this.trigB=this.buffNug(this.iAttack,this.iHealth),this.hints.push("ZZ-5")):this.hints.push("ZZ-1")):(this.hints=["ST","ZZ-5"],this.trigB=this.buffNug(this.iAttack,this.iHealth),this.trigB.bonus=1),this.v=this.zimusV}zimusV(t,i){let r;this.level===2?r=`${"ZTR"}2`:r=`${"ZTU"}3`,this.spawn(r,t.owner)}}class Xi extends kt{cons(t){({["IRT"]:()=>this.infrC(),["NXB"]:()=>this.nexbC()})[t]()}constructor(t){super(t),this.overload=!0,this.maxLevel=1,this.cons(this.cardCode())}m;nexus=!1;playTargets(){return[b.playerActTarg("F","CARD",this.code,"")]}handleAction(t){this.logSpell();const i=T.toPlayer(t.playerA),r={effId:R.genId(),logicCode:this.code};i.effects.push(r),this.enforcePlayerEffect(r,i),S.spellCast()}enforcePlayerEffect(t,i){const r=this.m(t.effId),n=this.nexus?[3]:[1,5];m.qPlayerCreats(i.isPlayerA).forEach(c=>{c.faction===this.faction&&n.includes(c.lane)?c.addModSafe(r):c.removeModSafe(t.effId)})}infrC(){this.faction="N",this.rarity="L",this.name="Infernal Ritual",this.text='You get "Each friendly Nekrium creature in the side lanes get Regenerate 2".',this.m=this.infrM}infrM(t){return b.mod("RG",2,t)}nexbC(){this.faction="A",this.rarity="L",this.name="Nexus Bubble",this.nexus=!0,this.text='You get "Friendly Alloyin creatures in the center lane get Armor 3".',this.m=this.nexbM}nexbM(t){return b.mod("AR",3,t)}}class re extends kt{cons(t){({["AEC"]:()=>this.anceC(),["CYW"]:()=>this.wailC(),["DIS"]:()=>this.disnC(),["DRE"]:()=>this.dracC(),["DCH"]:()=>this.dchantC(),["EVT"]:()=>this.endvC(),["ESU"]:()=>this.esrgC(),["HOX"]:()=>this.howlC(),["IGR"]:()=>this.icegC(),["ITO"]:()=>this.itorC(),["IME"]:()=>this.imecC(),["LCE"]:()=>this.lucidC(),["MSP"]:()=>this.mendC(),["NEM"]:()=>this.netherC()})[t]()}playTarg;constructor(t){super(t),this.playTarg="X",this.cons(this.cardCode())}p;playTargets(){return[b.playerActTarg(this.playTarg,"CARD",this.code,"")]}handleAction(t){this.logSpell();const i=T.toPlayer(t.playerA);this.p(i),S.spellCast()}ddf8(t){if(t.trigger.type==="TE")return t.event.playerA===t.owner;if(t.trigger.type==="PC"){const i=t.event,r=O.getCard(i.cardCode);return r.type==="S"&&r.faction==="T"&&i.playerA===t.owner}else if(t.trigger.type==="EF"){const i=W.toEnterField(t.event);return i.creature.faction==="U"&&i.creature.owner===t.owner}else return!1}jr8(t){const i=Vt.extractCardCode(t.trigger.logicCode),r=t.event;let n=!1;if(i==="LCE"){n=!0;const c=T.toPlayer(r.playerA),f=this.level===1?1:2;this.logAct(!1),T.drawCard(c,f)}else if(i==="IME"){n=!0;const c=Ft.gravedigger(T.toTarget(t.owner),D.ddf2(this.level+1));c&&this.spawn(c,r.playerA)}else if(i==="DRE"){n=!0;const c=this.level===1?11:21;this.ouch(!r.playerA,k.randInt(1,c))}else if(i==="IGR")this.ouch(!r.playerA,2);else if(i==="EVT"){const c=W.toEnterField(t.event);this.buffD(c.creature,1),this.logAct(!1,c.creature)}else if(i==="AEC"){n=!0;const c=m.qPlayerCreats(t.owner);if(c.length>0){const f=this.level===1?[1,2]:[2,4];c.forEach(p=>{this.logAct(!1,p),this.buffB(p,f[0],f[1])})}}else super.jr8(t);if(n&&this.level<3){const c=T.toPlayer(r.playerA),f=b.trigIdx(c.triggers,t.trigger);f>-1?t.trigger.customCode==="P2"?c.triggers[f].customCode="P1":c.triggers.splice(f,1):console.error("Wery curious, could not find player trigger ",t.trigger)}H.triggerDone()}echTxt(){return"At the end of "+(this.level===3?"each of your turns":"this turn and your next turn")+", "}echoZ(t){const i=b.trigger("TE",this.code);return this.level<3&&(i.customCode="P2"),i.changes=!0,T.addTr(t,i),i}anceC(){this.faction="U",this.rarity="L",this.name="Ancestral Echoes",this.playTarg="F";const t=this.level===1?[1,2]:[2,4];this.text=`${this.echTxt()}each friendly creature gets ${y.jr9(t[0],t[1])}.`,this.p=this.aeZ}aeZ(t){const i=this.echoZ(t),r=this.boof248;i.bonus=this.buffNug(r,r*2)}wailC(){this.faction="N",this.rarity="R",this.name="Crypt Wail",this.playTarg="E";const t=this.boof579;this.text=`Deal ${t} damage to the enemy player and gain ${t} health. If a Raid occured this turn, deal ${t*2} damage and gain ${t*2} health instead.`,this.p=this.wailZ}wailZ(t){const i=this.boof579*(G.ffs>2?2:1);this.ouch(t,i),this.balm(!t.isPlayerA,i)}disnC(){this.faction="T",this.rarity="R",this.name="Disintigrate",this.playTarg="E",this.text=`Deal 1 to  ${this.dshigh-1} damage to the enemy player.`,this.p=this.disnZ}disnZ(t){this.ouch(t,k.randInt(1,this.dshigh))}get dshigh(){return this.lValN([9,16,26])}dracC(){this.faction="T",this.rarity="L",this.name="Draconic Echoes",this.playTarg="F";const t=this.level===1?"10":"20";this.text=`${this.echTxt()}deal 1 to ${t} damage to the enemy player.`,this.p=this.deZ}deZ(t){const i=this.echoZ(t);i.bonus=this.playerNug(0,this.lValN([-4,-9,-25]))}dchantC(){this.faction="U",this.rarity="C",this.name="Druid's Chant",this.playTarg="F",this.text=`You gain ${this.boof81220} health.`,this.p=this.dchantZ}dchantZ(t){this.balm(t,this.boof81220)}endvC(){this.faction="U",this.rarity="L",this.name="Enduring Vitality",this.overload=!0,this.maxLevel=1,this.playTarg="F",this.text=`You get "When a friendly Uterra creature enters play, it gets ${y.jr9(1,1)}".`,this.p=this.endvZ}endvZ(t){const i=b.trigger("EF",this.code);i.bonus=this.buffNug(4,4),i.changes=!0,T.addTr(t,i)}esrgC(){this.faction="A",this.rarity="R",this.name="Energy Surge",this.overload=this.level===3,this.level===1?this.hints=["LG"]:this.free=!0,this.playTarg="F",this.text=`Draw ${this.level} card${this.free?"s":""}.`,this.p=this.esrgZ}esrgZ(t){T.drawCard(t,this.level)}howlC(){this.faction="N",this.rarity="R",this.name="Howl of Xith",this.maxLevel=1,this.playTarg="E",this.text="Deal X damage to the enemy player and gain X health, where X is three times your rank.",this.p=this.howlZ}howlZ(t){const i=T.getActive(),r=i.rank*3;this.ouch(t,r),this.balm(i,r)}icegC(){this.faction="T",this.rarity="L",this.name="Ice Grasp",this.overload=!0,this.maxLevel=1,this.playTarg="F",this.text='You get "When you play a Tempys spell, deal 2 damage to the enemy player".',this.p=this.icegZ}icegZ(t){const i=b.trigger("PC",this.code);i.bonus=this.playerNug(0,-6),i.changes=!0,T.addTr(t,i)}itorC(){this.faction="T",this.rarity="R",this.name="Ice Torrent",this.free=this.level>1,this.level===1&&(this.hints=["LG"]),this.playTarg="E",this.text=`Deal ${this.boof234} damage to the enemy player.`,this.p=this.itorZ}itorZ(t){this.ouch(t,this.boof234)}imecC(){this.faction="N",this.rarity="L",this.name="Immortal Echoes",this.playTarg="F";const t=`Spawn a random friendly ${y.levelGateText(this.level+1)}creature that was destroyed this game`;this.text=`${this.echTxt()}${t}.`,this.p=this.ieZ}ieZ(t){const i=this.echoZ(t),r=this.lValN([1,1,3]);i.bonus=this.multNug(this.avgSpawnNug(),r)}lucidC(){this.faction="A",this.rarity="L",this.name="Lucid Echoes",this.playTarg="F";const t=this.level===1?"draw 1 card":"draw 2 cards";this.text=`${this.echTxt()}${t}.`,this.p=this.leZ}leZ(t){const i=this.echoZ(t);i.bonus=this.bonNug(this.boof124*J.dcWeight)}mendC(){this.faction="U",this.rarity="R",this.name="Mending Spring",this.playTarg="F",this.text=`You gain 1 to ${this.mendboof} Health.`,this.p=this.mendZ}mendZ(t){J.simOn?this.boof61224:this.mendboof+1,this.balm(t,k.randInt(1,this.mendboof+1))}get mendboof(){return this.lValN([10,20,40])}netherC(){this.faction="N",this.rarity="C",this.name="Nether Embrace",this.playTarg="E";const t=this.boof4712;this.text=`Deal ${t} damage to the enemy player. You gain ${t} heal`,this.p=this.netherZ}netherZ(t){const i=this.boof4712;this.ouch(t,i),this.balm(!t.isPlayerA,i)}}class ta extends E{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Primeval Ancient",this.iAttack=this.boof359,this.iHealth=this.boof71117,this.tribe.push("DN"),this.text=`At the end of your turn, you gain ${this.healy} life.~Forge: If there are no enemy creatures, spawn a copy of this.`}get healy(){return this.level+2}jr3(t,i){const r=super.jr3(t,i);r.jr4("FR");const n=r.jr4("TE");return n.bonus=this.playerNug(this.healy,0,"TW"),r}ddf8(t){return t.event.playerA===t.owner}jr8(t){t.trigger.type==="FR"?m.qEnemyCreats().length===0&&this.spawn(this,t.owner):t.event.code==="TRE"&&(this.balm(t.owner,this.healy),this.anim8(t.creatId)),H.triggerDone()}}class ea extends E{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Rageborn Hellion",this.iAttack=this.boof469,this.iHealth=this.iAttack*2,this.tribe.push("FR","EL"),this.text=`When a friendly creature ${y.dbdtap()}, ${this.name} gets ${y.jr9(this.level,this.level)}.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("DM"),c=this.boof246;return n.bonus=this.buffNug(c,c,"TP"),n.batch=!0,r}ddf8(t){const i=W.toDamage(t.event);return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcCreat.owner===t.owner}jr8(t){m.creatByTr(t).buff(this.level,this.level,t.draw?"T":"X"),H.triggerDone()}}class Ee extends E{cons(t){({["BTD"]:()=>this.btdC(),["DKS"]:()=>this.dksC(),["HMO"]:()=>this.hrdC(),["HVE"]:()=>this.hveC(),["LTU"]:()=>this.ltuC(),["QSW"]:()=>this.qswC(),["RTW"]:()=>this.rlwC(),["SMS"]:()=>this.smsC()})[t]()}trigB;rtext="";constructor(t){super(t),this.cons(this.cardCode()),this.text="Raid: "+this.rtext,this.rtext=""}r;jr3(t,i){const r=super.jr3(t,i),n=r.jr4("RD");return n.bonus=this.trigB,r}jr8(t){this.r(t),H.triggerDone()}btdC(){this.faction="T",this.rarity="L",this.name="Blitzmane, the Destroyer",this.iAttack=this.lValN([5,8,10]),this.iHealth=this.iAttack-1,this.iAggro=!0,this.iMobile=1,this.tribe.push("DG"),this.trigB=this.buffNug(0,this.iAttack,"TX"),this.rtext="Deal damage equal to Blitzmane's attack to the opposing creature. If unopposed, deal the damage to the enemy player instead.",this.r=this.btdR}btdR(t){const i=m.creatByTr(t);if(i.attack>0){const r=i.opposed;r?this.smack(r,i.attack):(this.ouch(!i.owner,i.attack),this.anim8(i))}}dksC(){this.faction="T",this.rarity="R",this.name="Dragonkeeper Shaman",this.iAttack=this.boof61016,this.iHealth=this.boof369,this.tribe.push("HM");const t=this.level+2;this.trigB=this.buffNug(0,t,"TX"),this.rtext=`Deal ${t} damage to each enemy creature.`,this.r=this.dksR}dksR(t){const i=m.qEnemyCreats();if(i.length>0){const r=R.tick(),n=this.level+2;i.forEach(c=>this.smack(c,n,r))}}hrdC(){this.faction="U",this.rarity="C",this.name="Herd Mother",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.tribe.push("DN");const t=this.level+2;this.trigB=this.buffNug(this.level,this.level),"TS",this.rtext=`${this.name} gets ${y.jr9(t,t)}.`,this.r=this.hrdR}hrdR(t){this.logAct(!1),this.buffD(m.creatByTr(t),this.level+2)}hveC(){this.faction="U",this.rarity="R",this.name="Hive Empress",this.iAttack=this.boof234,this.iHealth=this.boof61016,this.tribe.push("IN"),this.hints=[this.lValH(["ZZ+1","ZZ+2","ZZ+4"])],this.trigB=this.playerNug(0,-this.iAttack,"TX"),this.rtext=`Give the enemy player Poison ${this.iAttack}.`,this.r=this.hveR}hveR(t){this.logAct(!1),T.addPoison(!t.owner,this.iAttack),this.anim8(t.creatId)}ltuC(){this.faction="U",this.rarity="L",this.name="Lorus, the Unrivaled",this.iAttack=this.boof2612,this.iHealth=this.boof71117,this.tribe.push("LP"),this.trigB=this.buffNug(3,3,"TX"),this.level===3?this.rtext=`Each other friendly creature gets ${y.jr9(3,3)}.`:this.rtext=`Replace this with a level ${this.level+1} ${this.name}.`,this.r=this.ltuR}ltuR(t){if(this.logAct(!1),this.level===3)m.creatByTarget(b.crFriendNotMeTarg(t.creatId)).forEach(i=>this.buffD(i,3));else{const i=m.creatByTr(t);this.replc(this.levelUpCard(),i.owner,i.lane)}}qswC(){this.faction="T",this.rarity="L",this.name="Quakeasaurus Wrecks",this.iAttack=this.boof5814,this.iHealth=this.iAttack+2,this.tribe.push("DN");const t=this.boof234;this.trigB=this.playerNug(0,-t,"TX"),this.rtext=`Deal damage to a random enemy creature and to the enemy player equal to ${t}x the number of friendly Dinosaurs.`,this.r=this.qswR}qswR(t){const i=b.crFriendTarg();i.tribe="DN";const r=m.creatByTarget(i).length*this.boof234,n=m.qEnemyCreats();n.length>0&&this.smack(n[k.randInt(0,n.length)],r),this.ouch(!t.owner,r),this.anim8(t.creatId)}rlwC(){this.faction="U",this.rarity="H",this.name="Relentless Wanderers",this.iAttack=this.boof51015,this.iHealth=this.iAttack-this.level,this.tribe.push("ST","WD"),this.hints=[this.lValH(["ZZ-1","ZZ-3","ZZ-3"])],this.trigB=this.multNug(this.statSpawnNug(this.iAttack,this.iHealth,"TW"),.5),this.rtext=`Spawn a ${y.tokName(this)}.`,this.r=this.rlwR}rlwR(t){this.spawn(this,t.owner)&&this.logAct(!1)}smsC(){this.faction="T",this.rarity="C",this.name="Stampeding Mongosaur",this.iAttack=this.boof61015,this.iHealth=this.iAttack,this.tribe.push("DN");const t=this.boof6810;this.trigB=this.playerNug(0,t/-2,"TW"),this.rtext=`Deal ${t} damage to the enemy player.`,this.r=this.smsR}smsR(t){this.ouch(!t.owner,this.boof6810),this.anim8(t.creatId)}}class le extends E{cons(t){({["AIV"]:()=>this.avinvC(),["BSP"]:()=>this.bskphC(),["CRC"]:()=>this.crucC(),["ESK"]:()=>this.ebknC(),["FWC"]:()=>this.fwcC(),["FME"]:()=>this.feggC(),["MMV"]:()=>this.mmovC(),["PSH"]:()=>this.porshC(),["RGG"]:()=>this.runegC(),["SSR"]:()=>this.solrevC(),["SSM"]:()=>this.spshamC(),["SSG"]:()=>this.snoutC(),["UGM"]:()=>this.mantisC()})[t]()}rtext="";trigB;constructor(t){super(t),this.cons(this.cardCode()),this.text="Gain Rank: "+this.rtext,this.rtext=""}r;image(t){return this.rarity==="T"?this.cardCode()==="FWC"?this.rawImage("MPH",t):super.fixedImage(t):super.image(t)}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("RU");return n.bonus=this.trigB,r}ddf8(t){return t.event.playerA===t.owner}jr8(t){this.r(t),H.triggerDone()}avinvC(){this.faction="T",this.rarity="H",this.name="Avalanche Invoker",this.iAttack=this.boof6914,this.iHealth=this.iAttack+1,this.tribe.push("ER","AS");const t=this.boof3612;this.trigB=this.buffNug(t,0,"TH"),this.rtext=`Deal ${t} damage to each non-Tempys creature.`,this.r=this.avinvR}avinvR(t){const i=this.boof3612,r=R.tick();m.qActiveCreats().filter(n=>n.faction!=="T").forEach(n=>this.smack(n,i,r))}bskphC(){this.faction="N",this.rarity="C",this.name="Blightskull Phantasm",this.iAttack=this.boof5814,this.iHealth=this.boof61017,this.tribe.push("ST");const t=this.boof369n;this.trigB=this.buffNug(0,-t,"TH"),this.rtext=`The opposing creature gets ${y.jr9(t,t)}.`,this.r=this.bskphR}bskphR(t){const i=m.creatByTr(t).opposed;i&&this.buffD(i,this.boof369n)}crucC(){this.faction="A",this.rarity="R",this.name="Crucible Colossus",this.iAttack=this.boof61016,this.iHealth=this.iAttack+2,this.tribe.push("RB"),this.iDefend=!0,this.trigB=this.bonNug(.2,"TH"),this.rtext=`Negate Defender from ${this.name}.`,this.r=this.crucR}crucR(t){m.creatByTr(t).negDefend("A"),t.trigger.bonus.threat=void 0}ebknC(){this.faction="N",this.rarity="H",this.name="Ebonskull Knight",this.iAttack=this.lValN([9,13,18]),this.iHealth=this.iAttack-2,this.tribe.push("VP"),this.trigB=this.bonNug(-1,"TL"),this.rtext=`Destroy ${this.name}.`,this.r=this.ebknR}ebknR(t){this.kill(m.creatByTr(t))}fwcC(){this.faction="U",this.rarity="T",this.maxLevel=1,this.name="Feywing Chrysalis",this.iAttack=0,this.iHealth=3,this.tribe.push("CR"),this.iDefend=!0,this.trigB=this.buffNug(5,5,"TH"),this.rtext=`Replace ${this.name} with a 9/9 Feywing.`,this.r=this.fwcR}fwcR(t){const i=m.creatByTr(t);this.replc(`${"FWG"}1`,i.owner,i.lane)}feggC(){this.faction="T",this.rarity="T",this.minLevel=this.level,this.maxLevel=this.level,this.name="Frostmane Egg",this.iAttack=0,this.iHealth=6,this.tribe.push("DG"),this.iDefend=!0;const t=this.lValN([6,9,13]);this.trigB=this.buffNug(t,t,"TH"),this.rtext=`Replace ${this.name} with a level ${this.level} Frostmane Dragon.`,this.r=this.feggR}feggR(t){const i=m.creatByTr(t);this.replc(`${"FMD"}${this.level}`,i.owner,i.lane)}mmovC(){this.faction="A",this.rarity="C",this.name="Metamind Overseer",this.iAttack=this.boof5915,this.iHealth=this.iAttack+1,this.tribe.push("MM"),this.trigB=this.bonNug(J.dcWeight*.6,"TH"),this.rtext="Draw 2 cards.",this.r=this.mmovR}mmovR(t){T.drawCard(t.owner,2),this.anim8(t.creatId)}porshC(){this.faction="N",this.rarity="H",this.name="Portal Shade",this.iAttack=this.boof5914,this.iHealth=this.boof71118,this.tribe.push("ST"),this.trigB=this.multNug(this.avgSpawnNug(),.4),this.trigB.threat="TH",this.rtext="Spawn a random creature that was destroyed this game.",this.r=this.porshR}porshR(t){const i=Ft.gravedigger();i&&this.spawn(i,t.owner)}runegC(){this.faction="U",this.rarity="H",this.name="Runegrove Guardian",this.iAttack=this.boof4814,this.iHealth=this.iAttack,this.tribe.push("PL"),this.trigB=this.buffNug(0,this.iAttack,"TH"),this.rtext=`${this.name} gets ${y.jr9(this.iAttack,this.iAttack)}.`,this.r=this.runegR}runegR(t){this.buffD(m.creatByTr(t),this.iAttack)}solrevC(){this.faction="U",this.rarity="L",this.name="Solstice Reveler",this.iAttack=this.boof4816,this.iHealth=this.iAttack,this.tribe.push("HM");const t=this.boof248;this.trigB=this.buffNug(t,t,"TH");const i=this.level===3;let r="";i&&(r=", and Breakthrough"),this.rtext=`Each friendly creature gets ${y.jr9(t,t,i)}${r}.`,this.r=this.solrevR}solrevR(t){const i=this.boof248;m.ddf1().forEach(r=>{this.buffD(r,i),this.level===3&&(r.breakthrough=!0)})}spshamC(){this.faction="T",this.rarity="C",this.name="Spiritfrost Shaman",this.iAttack=this.boof71117,this.iHealth=this.boof4610,this.tribe.push("HM");const t=this.boof579;this.rtext=`Deal ${t} damage to the enemy player.`,this.trigB=this.playerNug(0,-t,"TH"),this.r=this.spshamR}spshamR(t){this.ouch(!t.owner,this.boof579),this.anim8(t.creatId)}snoutC(){this.faction="U",this.rarity="C",this.name="Stouthide Stegadon",this.iAttack=this.boof4714,this.iHealth=this.boof71117,this.tribe.push("DN"),this.rtext=`Heal ${this.snoutbof} damage from ${this.name}.`,this.trigB=this.buffNug(0,this.iHealth),this.r=this.snoutR}snoutR(t){m.creatByTr(t).heal(this.snoutbof)}get snoutbof(){return this.level*10}mantisC(){this.faction="U",this.rarity="C",this.name="Umbraglim Mantis",this.iAttack=this.boof6914,this.iHealth=this.iAttack-1,this.tribe.push("IN");const t=this.mantbof;this.rtext=`You gain ${t} health.`,this.trigB=this.playerNug(t/3,0,"TH"),this.r=this.mantisR}mantisR(t){this.balm(t.owner,this.mantbof),this.anim8(t.creatId)}get mantbof(){return this.lValN([8,10,12])}}class ia extends kt{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Remembrance",this.text=`Banish a ${y.levelGateText(this.level)}creature from your discard pile, then Spawn a copy of it.`}canPlay(){return this.remCrds(!1).length>0}playTargets(){const t=D.boardTarget("CARD",this.code);return t.param="P1",[t]}remCrds(t){const i=T.getActive(),r=b.target("TD");r.player=T.toTarget(i),r.card="C",r.level=D.ddf2(this.level);const n=yt.generateContent(i.discard,!1,r);return t?yt.uniqueContent(n):n}handleAction(t){if(t.param==="P1"){const i=this.remCrds(R.aiActive),r=i.map(c=>{const f=b.deckSelectAction("CARD",c.cardCode,c.sourceIdx);return f.host=this.code,f}),n=S.cancelAction();n.param="PM",r.push(n),yt.showCustomDeck(i,r)}else{const i=t,r=T.getActive();r.discard.splice(i.position,1);const n=this.spawn(i.card,r.isPlayerA);this.logSpell(n),ut.popMode(),S.spellCast()}}}class ra extends E{constructor(t){super(t),this.faction="T",this.rarity="R",this.name="Riftlasher",this.iAttack=this.boof359,this.iHealth=this.boof61016,this.tribe.push("FR","EL"),this.text=`When ${this.name} ${y.dbdtap()} on your turn, you may deal that much damage to an enemy creature.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("DM");return n.interactive=!0,n.bonus=this.buffNug(this.iAttack,0,"TP"),r}ddf8(t){return t.event.battle&&!t.event.isCreatTarg&&t.event.isCreatSrc&&t.event.srcId===t.creatId&&t.owner===T.activeA}jr8(t){const i=D.toActions(b.crEnemyActTarg("CARD",this.code,k.enTil(t.creatId,t.event.dmg)));i.length>0?(i.push(S.noneEndTrigger()),S.ddf5(i)):H.triggerDone()}handleAction(t){const i=k.deTil(t.param);this.smack(m.ddf6(t),parseInt(i[1])),S.actionDone(!0)}}class sa extends ge{jr3(t,i){const r=super.jr3(t,i);return r.jr4("AS"),r}jr8(t){if(t.trigger.type==="AS"){let i=!0;for(;i;){const r=this.spawn(this,t.owner);r?r.opposed&&(i=!1):i=!1}H.triggerDone()}else super.jr8(t)}}class aa extends E{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Scourgeflame Sorcerer",this.iAttack=this.boof358,this.iHealth=this.boof5914,this.tribe.push("ZB");let i=": ",r=1;this.level<3&&(i=", destroy another friendly creature: ",r=.5);const n=`Destroy an enemy ${y.levelGateText(this.level+1)}creature.`;this.text=`Activate${i}${n}`,this.bonus=this.multNug(this.avgSpawnNug(),r),this.bonus.threat="TX"}canActivate(t){return this.enemies(t).length>0?this.level===3?!0:this.friends(t).length>0:!1}startActivation(t){let i;this.level===3?i=this.enemies(t):i=this.friends(t),i.push(S.cancelAction()),S.ddf5(i)}handleAction(t){const i=k.deTil(t.param),r=m.jr5(i[0]),n=m.ddf6(t);if(i[1]==="P1"){const c=this.enemies(r,n.id);c.push(S.cancelAction()),S.ddf5(c)}else{this.logAct(!0);const c=R.tick();this.level<3&&this.kill(m.jr5(i[2]),c),this.kill(n,c),r.endActivation()}}friends(t){const i=b.crFriendNotMeActTarg("CARD",t.id,this.code,k.enTil(t.id,"P1"));return D.toActions(i)}enemies(t,i=""){const r=b.crEnemyActTarg("CARD",this.code,k.enTil(t.id,"P2",i));return r.level=D.ddf2(this.level+1),D.toActions(r)}}class na extends E{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Scourge Knights",this.iAttack=this.boof4814,this.iHealth=this.iAttack,this.tribe.push("ZB");const i=this.boof246n;this.text=`Formation: Give an enemy creature ${y.jr9(i,i)}.`}get formation(){return!0}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FM");return n.interactive=!0,r}jr8(t){if(t.owner!==T.activeA){H.triggerDone();return}const i=b.crEnemyActTarg("CARD",this.code,""),r=D.toActions(i);r.length>0?S.ddf5(r):H.triggerDone()}handleAction(t){const i=m.ddf6(t);this.logAct(!1,i),this.buffD(i,this.boof246n),S.actionDone(!0)}}class oa extends E{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Seismic Adept",this.iAttack=this.boof4712,this.iHealth=this.boof61218,this.tribe.push("HM"),this.text="Activate: Move an enemy creature to another available enemy lane.",this.bonus=this.bonNug(this.level*.5,"TW")}canActivate(t){return this.enemies(t).length>0&&this.empties(t).length>0}startActivation(t){const i=this.enemies(t);i.push(S.cancelAction()),S.ddf5(i)}handleAction(t){const i=k.deTil(t.param),r=m.jr5(i[1]);if(i[0]==="P1"){const n=this.empties(r,m.ddf6(t).id);n.push(S.cancelAction()),S.ddf5(n)}else{const n=m.jr5(i[2]);this.logAct(!0,n),this.lurk(n,t.lane),r.endActivation()}}empties(t,i=""){const r=b.emptyPlayerActTarg("E","CARD",this.code,k.enTil("P2",t.id,i));return D.toActions(r)}enemies(t){const i=b.crEnemyActTarg("CARD",this.code,k.enTil("P1",t.id));return D.toActions(i)}}class ha extends E{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Shadowsmith",this.iAttack=this.boof3612,this.iHealth=this.boof6915,this.tribe.push("DF","HM"),this.text=`When ${this.name} or another friendly Darkforged enters play on your turn, you may discard and level up a card.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("EF");return n.bonus=this.bonNug(.5,"TW"),n.interactive=!0,r}handleAction(t){G.levelAndDiscardA(t),this.anim8(t.param),S.actionDone(!0)}ddf8(t){const i=W.toCreature(t.event);return i.creature.owner===t.owner&&t.owner===T.activeA&&i.creature.isTribe("DF")}jr8(t){const i=b.lvlHandActTarg(this.code,t.creatId),r=D.toActions([i,D.buttonTarget("NOTR")]);r.length>1?S.ddf5(r):H.triggerDone()}}class ui extends E{constructor(t){super(t),this.rarity="R",this.iAttack=this.boof4612,this.iHealth=this.boof61016;const i=this.cardCode();i==="SSS"?this.steel():i==="LSS"?this.life():i==="FSS"?this.flame():i==="DSS"&&this.dark(),this.level>1?this.text=`When you play a ${y.levelGateText(this.level-1)}${y.factionText(this.faction)} card, you may ${this.tuxt}.`:this.hints=["LG"],this.tuxt=""}tuxt="";dark(){this.faction="N",this.name="Darkshaper Savant",this.tribe.push("ZB");const t=-this.boof135;this.tuxt=`give an enemy creature ${y.jr9(t,t)}`}life(){this.faction="U",this.name="Lifeshaper Savant",this.tribe.push("SE");const t=this.boof135;this.tuxt=`give another friendly creature ${y.jr9(t,t)}`}steel(){this.faction="A",this.name="Steelshaper Savant",this.tribe.push("HM"),this.tuxt=`give another friendly creature Armor ${this.boof124}`}flame(){this.faction="T",this.name="Flameshaper Savant",this.tribe.push("HM"),this.tuxt=`deal ${this.boof147} damage to target creature or player`}jr3(t,i){const r=super.jr3(t,i);if(this.level>1){const n=r.jr4("PC");n.interactive=!0,n.bonus=this.bonNug(this.level*.5,"TX")}return r}ddf8(t){if(t.event.playerA===t.owner){const i=O.getCard(t.event.cardCode);if(i.level<this.level&&i.faction===this.faction)return!0}return!1}jr8(t){const i=b.crActTarg("CARD",this.code,""),r=[i,D.buttonTarget("NOTR")];if(this.faction==="N")i.player="E";else if(this.faction==="T"){i.hint=["HR"];const c=b.actionTarget("TP","CARD",this.code,t.creatId);c.hint=["HR"],r.push(c)}else i.notMe=t.creatId,i.player="F",this.faction==="A"&&(i.canArmor=!0);const n=D.toActions(r);n.length===1?H.triggerDone():S.ddf5(n)}handleAction(t){if(this.faction==="T"&&t.zone==="P")this.ouch(t.playerA,this.level===3?7:4),this.anim8(t.param);else{const i=m.ddf6(t);if(this.faction==="A")this.logAct(!1,i),i.addArmor(this.level===3?4:2);else if(this.faction==="T")this.smack(i,this.level===3?7:4);else{this.logAct(!1,i);const r=(this.level===3?5:3)*(this.faction==="N"?-1:1);this.buffD(i,r)}}S.actionDone(!0)}}class la extends E{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Shardplate Behemoth",this.iAttack=0,this.iHealth=this.lValN([11,13,15]),this.tribe.push("IN"),this.level<3&&(this.hints=["LB"]),this.text=`${this.name}'s attack is equal to its health.`}jr3(t,i){const r=super.jr3(t,i);return r.addEffect("CH",this.code),r.addEffect("AT",this.code),r.addModSafe(this.sbm(r)),r}enforceEffect(t){t.status==="A"&&t.attack!==t.health&&(t.removeModSafe(t.id,!1),t.addMod(this.sbm(t),"X"))}sbm(t){return b.mod("AT",t.health-t.attack,t.id)}}class ca extends E{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Shardplate Toxoid",this.iAttack=this.boof4612,this.iHealth=this.boof61018,this.tribe.push("IN"),this.text=`Forge: Give an enemy creature Poison ${this.spit}.~At the end of the enemy player's turn, each enemy creature gets Poison ${this.splat}.`}get spit(){return this.boof2410}get splat(){return this.lValN([1,2,5])}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");n.interactive=!0;const c=r.jr4("TE");return c.bonus=this.regnNug(this.spit,"TX"),r}handleAction(t){const i=m.ddf6(t);i.addPoison(this.spit),this.logAct(!1,i),S.actionDone(!0)}ddf8(t){return t.event.code==="TRE"&&t.owner!==t.event.playerA}jr8(t){if(t.trigger.type==="FR"){const i=b.crEnemyActTarg("CARD",this.code,""),r=D.toActions(i);r.length>0?S.ddf5(r):H.triggerDone()}else{const i=m.qPlayerCreats(!t.owner);if(i.length>0){this.logAct(!1);const r=this.splat;i.forEach(n=>n.addPoison(r))}H.triggerDone()}}}class da extends E{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Slumbering Shrine",this.iAttack=0,this.iHealth=this.lValN([14,20,30]),this.iDefend=!0,this.tribe.push("ER","EL"),this.text="When you play an spell, you may Negate Defender from a friendly creature."}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("PC");return n.bonus=this.bonNug(.5,"TX"),n.interactive=!0,r}handleAction(t){const i=m.ddf6(t);i.negDefend("T"),this.logAct(!1,i),S.actionDone(!0)}ddf8(t){return t.event.playerA===t.owner&&O.getCard(t.event.cardCode).type==="S"}jr8(t){const i=b.crFriendActTarg("CARD",this.code,""),r=D.toActions([i,D.buttonTarget("NOTR")]);r.length>1?S.ddf5(r):H.triggerDone()}}class ua extends E{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Snowdrift Alpha",this.iAttack=this.boof61224,this.iHealth=this.boof4816,this.tribe.push("ST","WF"),this.hints=[this.lValH(["ZZ-2","ZZ-3","ZZ-5"])];const i=O.getCard(this.hc());this.text=`Activate: Put a ${y.tokName(i)} into an available lane.`,this.bonus=this.spawnNug(i,"TX")}hc(){return "HTP"+this.level}canActivate(t){return this.empties(t).length>0}startActivation(t){const i=this.empties(t);i.push(S.cancelAction()),S.ddf5(i)}handleAction(t){this.logAct(!0),this.poot(this.hc(),t.playerA,t.lane),m.jr5(t.param).endActivation()}empties(t){const i=b.emptyPlayerActTarg("F","CARD",this.code,t.id);return D.toActions(i)}}class fa extends E{constructor(t){super(t),this.faction="T",this.rarity="R",this.name="Sparkstone Elemental",this.iAttack=this.boof4815,this.iHealth=this.iAttack+3,this.tribe.push("LT","EL"),this.text="Negate Defender from each creature."}jr3(t,i){const r=super.jr3(t,i),n=r.addEffect("PS",this.code);return n.area="A",r}enforceEffect(t){if(t.status==="A"){const r=b.mod("ND",!0,t.id);m.qActiveCreats().forEach(n=>n.addModSafe(r))}else m.qActiveCreats().forEach(r=>r.removeModSafe(t.id))}}class ga extends kt{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Spiritcleave",this.text=`Destroy a ${y.levelGateText(this.level+1)}creature with the highest health among all creatures.${this.level===3?"~You gain health equal to that creature's health.":""}`}canPlay(){return m.creatByTarget(this.firstT()).length>0}playTargets(){return[this.firstT()]}firstT(){let t=-1;const i=m.qActiveCreats();i.forEach(c=>{c.health>t&&(t=c.health)});const r=i.filter(c=>c.health===t).map(c=>c.id),n=b.crActTarg("CARD",this.code,"");return n.level=D.ddf2(this.level+1),n.victims=k.enTil(...r),this.level<3&&(n.hint=["KL"]),n}handleAction(t){this.logSpell();const i=m.ddf6(t);this.kill(i),this.level===3&&this.balm(T.activeA,i.health),S.spellCast()}}class ma extends kt{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Spiritleash";const i=this.boof5814;this.text=`Destroy a friendly creature.~Give a creature ${y.jr9(i,i)}.`}canPlay(){return m.ddf1().length>0&&m.qActiveCreats().length>1}playTargets(){return[b.crFriendActTarg("CARD",this.code,"P1")]}handleAction(t){const i=k.deTil(t.param),r=m.ddf6(t);if(i[0]==="P1"){const n=b.crNotMeActTarg("CARD",r.id,this.code,k.enTil("P2",r.id));n.hint=["BF"];const c=D.toActions(n);c.push(S.cancelAction()),S.ddf5(c)}else this.logSpell(r),this.kill(m.jr5(i[1])),this.buffD(r,this.boof5814),S.spellCast()}}class pa extends E{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Spite Hydra",this.iAttack=this.boof5914,this.iHealth=this.iAttack,this.tribe.push("HY"),this.text=`When ${this.name} ${y.dbdtac()}, this gets ${y.jr9(this.level,this.level)}.~Allied Tempys: Activate: Deal ${this.level} damage to another creature. This gets ${y.jr9(this.level,this.level)}.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("FR");const n=r.jr4("DM");return n.bonus=this.buffNug(this.level,this.level),r}zapTargs(t){const i=b.crNotMeActTarg("CARD",t,this.code,t);return i.hint=["HR"],D.toActions([i,D.buttonTarget("CANC")])}canActivate(t){return this.zapTargs(t.id).length>1&&t.hasMod(t.id)}startActivation(t){S.ddf5(this.zapTargs(t.id))}ddf8(t){return t.event.battle&&t.event.isCreatTarg&&t.event.isCreatSrc&&t.event.srcId===t.creatId}handleAction(t){const i=m.jr5(t.param);this.logAct(!0),this.smack(m.ddf6(t),this.level),i.buff(this.level,this.level,"T"),i.endActivation()}jr8(t){const i=m.creatByTr(t);if(t.trigger.type==="FR"){if(G.allied("T")){i.addMod(b.mod("AL",!0,i.id),"T"),i.changed=!0;const r=i.jr4("NT");r.bonus=this.buffNug(this.boof246,this.level,"TS")}}else t.trigger.type==="DM"&&this.buffD(i,this.level);H.triggerDone()}}class ya extends E{constructor(t){super(t),this.faction="A",this.rarity="R",this.name="Statis Warden",this.iAttack=this.boof5915,this.iHealth=this.iAttack+1,this.tribe.push("MM"),this.text="When you play a spell, give a friendly creature Defender until the end of the enemy player's next turn."}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("PC");return n.interactive=!0,n.bonus=this.bonNug(.5),r}handleAction(t){const i=m.ddf6(t);this.logAct(!1,i);const r=b.mod("DF",!0);r.expiry="EN",this.modA(i,r),S.actionDone(!0)}ddf8(t){return t.event.playerA===t.owner&&O.getCard(t.event.cardCode).type==="S"}jr8(t){const i=b.crFriendActTarg("CARD",this.code,t.creatId);i.canDefender=!0;const r=D.toActions(i);r.length===0?H.triggerDone():(r.push(S.noneEndTrigger()),S.ddf5(r))}}class ba extends E{constructor(t){super(t),this.faction="A",this.rarity="C",this.name="Steeleye Researcher",this.iAttack=this.boof5915,this.iHealth=this.iAttack+1,this.tribe.push("HM"),this.hints=["RD"],this.text=`Upgrade: You may ${y.daluac()}.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("UP");return n.interactive=!0,r}handleAction(t){G.levelAndDiscardA(t),this.anim8(t.param),S.actionDone(!0)}jr8(t){const i=b.lvlHandActTarg(this.code,t.creatId),r=D.toActions(i);r.length>0?(r.push(S.noneEndTrigger()),S.ddf5(r)):H.triggerDone()}}class Aa extends E{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Steeleye Seer",this.iAttack=0,this.iHealth=this.boof81218,this.iDefend=!0,this.tribe.push("HM"),this.level===3?this.text="Activate: Level up a card in your hand. You may use this ability twice each turn.":this.text="Activate: Level a card in your hand, then discard it if its level is higher than your Rank.",this.bonus=this.bonNug(this.lValN([.8,1.7,3]),"TX")}jr3(t,i){const r=super.jr3(t,i);return this.level===3&&(r.jr4("TS"),this.addExtraActivate(r)),r}ddf8(t){return t.event.playerA===t.owner}jr8(t){this.addExtraActivate(m.creatByTr(t)),H.triggerDone()}canActivate(t){return T.toPlayer(t.owner).hand.some(r=>O.getCard(r).canLevel())}startActivation(t){const i=b.lvlHandActTarg(this.code,t.id);i.hint?.push("DF"),S.ddf5(D.toActions([i,D.buttonTarget("CANC")]))}handleAction(t){this.logAct(!0);const i=m.jr5(t.param),r=T.toPlayer(i.owner);this.level===3||r.rank>parseInt(t.card.slice(3))?xt.levelInHand(r,t.position,O.getCard(t.card).levelUpCard()):G.levelAndDiscardA(t),this.anim8(i),i.endActivation()}}class ka extends E{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Steelscale Dragon",this.iAttack=this.boof4812,this.iHealth=this.iAttack+2,this.tribe.push("RB","DG"),this.iMobile=this.level;const i=this.boof246;this.addSp("M",i),this.text=`While each other friendly creature has Defender, ${this.name} gets ${y.jr9(this.iAttack,0)}, Armor ${i}, and Breakthrough.`}jr3(t,i){const r=super.jr3(t,i),n=r.addEffect("DF",this.code);n.area="C";const c=r.addEffect("PS",this.code);return c.area="C",r}enforceEffect(t){const i=b.crNotMeTarg(t.id);if(i.player=T.toTarget(t.owner),m.creatByTarget(i).some(n=>!n.defender))t.removeModSafe(t.id);else{const n=b.mod("AT",this.iAttack,t.id),c=b.mod("AR",this.boof246,t.id),f=b.mod("BT",!0,t.id);t.addModSafe(n),t.addModSafe(c),t.addModSafe(f)}}}class Ta extends E{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Storm Bringer",this.iAttack=this.boof5814,this.iHealth=this.boof61018,this.tribe.push("WN","EL");const i=this.boof246;this.addSp("D",i),this.text=`At the start of each turn, ${this.name} moves to an available lane at random. Flank: Deal ${i} damage to the opposing creature.`}jr3(t,i){const r=this.boof246,n=super.jr3(t,i),c=n.jr4("TS");c.bonus=this.rawNug(0,0,r,0,0,.2);const f=n.jr4("FK");return f.bonus=this.buffNug(r,0,"TW"),n}ddf8(t){return!0}jr8(t){if(t.trigger.type==="TS")m.fling(m.creatByTr(t),"T"),H.triggerDone();else if(t.trigger.type==="FK"){const r=W.toCreature(t.event).creature.opposed;r&&this.smack(r,this.boof246),H.triggerDone()}else super.jr8(t)}}class va extends E{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Sulgrim, Herald of Force",this.iAttack=15,this.iHealth=15,this.tribe.push("GL"),this.addSp("M",6),this.bonus=this.buffNug(6,0,"TX"),this.text="Activate: Deal damage equal to a friendly creature's Armor to an enemy creature.~Forge: Each friendly creature gets Armor 6."}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}canActivate(t){return this.enemies(t.id).length>0&&this.friends(t.id).length>0}startActivation(t){const i=this.friends(t.id);i.push(S.cancelAction()),S.ddf5(i)}handleAction(t){const i=k.deTil(t.param),r=m.ddf6(t);if(i[1]==="P1"){const n=this.enemies(i[0],r.id);n.push(S.cancelAction()),S.ddf5(n)}else if(i[1]==="P2"){const n=m.jr5(i[2]);this.logAct(!0,n),this.smack(r,n.armor),m.jr5(i[0]).endActivation()}}jr8(t){m.ddf1().forEach(i=>i.addArmor(6)),H.triggerDone()}friends(t){const i=b.crFriendActTarg("CARD",this.code,k.enTil(t,"P1"));return i.hasArmor=!0,D.toActions(i)}enemies(t,i=""){const r=b.crEnemyActTarg("CARD",this.code,k.enTil(t,"P2",i));return D.toActions(r)}}class Sa extends E{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Synapsis Oracle",this.iAttack=this.boof358,this.iHealth=this.lValN([9,15,24]),this.tribe.push("HM");let i;this.level===3?(this.text="Activate: Level up a card in your hand.",i=1):(this.text=`Activate: ${y.daluac(!0)}.`,i=.5),this.bonus=this.bonNug(i,"TX")}canActivate(t){return T.toPlayer(t.owner).hand.some(r=>O.getCard(r).canLevel())}startActivation(t){const i=b.lvlHandActTarg(this.code,t.id);i.hint?.push("DF"),S.ddf5(D.toActions([i,D.buttonTarget("CANC")]))}handleAction(t){this.logAct(!0);const i=m.jr5(t.param),r=T.toPlayer(i.owner);this.level===3?xt.levelInHand(r,t.position,O.getCard(t.card).levelUpCard()):G.levelAndDiscardA(t),this.anim8(i),i.endActivation()}}class Ca extends pt{jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}jr8(t){if(t.trigger.type==="FR"){const i=t.owner?G.deathsA.length:G.deathsB.length;if(i>0){const r=R.tick();for(let n=0;n<i;n++)this.spawn(X.zomc(this.level),t.owner,r)}H.triggerDone()}else super.jr8(t)}}class wa extends kt{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Thunderstomp";const i=this.boof5812;this.text=`Deal ${i} damage to an enemy creature.~Then, if there is a friendly Dinosaur, deal another ${i} damage to an enemy creature.`}canPlay(){return m.qEnemyCreats().length>0}playTargets(){return[b.crEnemyActTarg("CARD",this.code,"P1")]}handleAction(t){const i=k.deTil(t.param),r=this.boof5812,n=m.ddf6(t);i[0]==="P1"?(this.logSpell(),this.smack(n,r),this.dino()?S.ddf5(D.toActions(b.crEnemyActTarg("CARD",this.code,"P2"))):S.spellCast()):(this.smack(n,r),S.spellCast())}dino(){const t=b.crFriendTarg();return t.tribe="DN",m.creatByTarget(t).length>0}}class Da extends E{constructor(t){super(t),this.rarity="C",this.faction="U",this.name="Toorgmai Mender",this.tribe.push("PL"),this.iAttack=this.boof259,this.iHealth=this.iAttack+3,this.text=`Forge: Give a creature or player ${y.jr9(0,this.iHealth)}.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");return n.interactive=!0,r}jr8(t){const i=b.crActTarg("CARD",this.code,"");i.hint=["BF"];const r=b.actionTarget("TP","CARD",this.code,t.creatId);r.hint=["BF"];const n=[i,r,D.buttonTarget("NOTR")],c=D.toActions(n);S.ddf5(c)}handleAction(t){if(t.zone==="P")this.balm(t.playerA,this.iHealth),this.anim8(t.param);else{const i=m.ddf6(t);this.logAct(!1,i),this.buffH(i,this.iHealth)}S.actionDone(!0)}}class xa extends E{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Tremorsaur",this.iAttack=0,this.iHealth=this.lValN([8,16,24]),this.tribe.push("DN"),this.text=`When you are dealt damage, ${this.name} gets +attack equal to ${this.level===3?"2x ":""}the damage dealt.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("DM");return n.bonus=this.buffNug(this.boof3610,0,"TS"),n.batch=!0,r}ddf8(t){return!t.event.isCreatTarg&&t.event.target===t.owner}jr8(t){const i=this.level===3?2:1;m.creatByTr(t).buff(t.event.dmg*i,0,t.draw?"U":"X"),H.triggerDone()}}class Ba extends kt{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Trial by Combat";const i=this.boof369;this.text=`Give a friendly creature ${y.jr9(i,0)} this turn. Then it and an enemy creature deal damage equal to their attacks to each other.`}canPlay(){return m.qEnemyCreats().length>0&&m.ddf1().length>0}playTargets(){return[b.crFriendActTarg("CARD",this.code,"P1")]}handleAction(t){const i=k.deTil(t.param),r=m.ddf6(t);if(i[0]==="P1"){const n=D.toActions(b.crEnemyActTarg("CARD",this.code,k.enTil("P2",r.id)));n.push(S.cancelAction()),S.ddf5(n)}else{const n=m.jr5(i[1]);this.modA(n,b.mod("AT",this.boof369));const c=R.tick();this.smack(r,n.attack,c),this.smack(n,r.attack,c),S.spellCast()}}}class ei extends E{cons(t){({["IKA"]:()=>this.ikaC(),["RSD"]:()=>this.rsdC(),["SSD"]:()=>this.ssdC(),["SOL"]:()=>this.stagC(),["WTK"]:()=>this.tinkC()})[t]()}mPlayer=0;trigB;constructor(t){super(t),this.cons(this.cardCode())}t;jr3(t,i){const r=super.jr3(t,i),n=r.jr4("TE");return n.bonus=this.trigB,r}ddf8(t){return this.validPlayer(t)}jr8(t){this.t(t),H.triggerDone()}validPlayer(t){if(this.mPlayer===0)return!0;const i=t.event;return this.mPlayer===1?i.playerA===t.owner:i.playerA!==t.owner}ikaC(){this.faction="T",this.rarity="L",this.name="Ignir, Khan of Ashur",this.iAttack=this.lValN([4,8,14,24]),this.iHealth=this.iAttack,this.tribe.push("FB"),this.maxLevel=4;let t;this.level<3?(this.hints=["LG","ZZ-2"],t="an enemy creature or player at random."):this.level===3?t="an enemy creature at random and the enemy player.":t="each enemy creature and player.",this.mPlayer=1,this.trigB=this.buffNug(0,this.iAttack,"TX"),this.text=`At the end of your turn, deal ${this.iAttack} damage to `+t,this.t=this.ikaT}ikaT(t){const i=m.qEnemyCreats(),r=i.length>0;let n=this.level>2,c=-1;if(this.level===4&&r){const f=R.tick();i.forEach(p=>this.smack(p,this.iAttack,f))}if(this.level===3&&r&&(c=k.randInt(0,i.length)),this.level<3){const f=k.randInt(0,i.length+1);f===i.length?n=!0:c=f}c>-1&&this.smack(i[c],this.iAttack),n&&(this.ouch("E",this.iAttack),this.anim8(t.creatId))}rsdC(){this.faction="U",this.rarity="L",this.name="Rubyscale Dragon",this.iAttack=this.lValN([2,8,18]),this.iHealth=this.lValN([7,11,24]),this.tribe.push("DG"),this.level===1?(this.iDefend=!0,this.hints=["LG"]):(this.iMobile=1,this.level===3&&(this.hints=["ZZ-5"])),this.mPlayer=1;const t=this.lValN([1,2,5]);this.trigB=this.playerNug(t,0,"TX"),this.text=`At the end of your turn, you and each other friendly creature gets ${y.jr9(0,t)}.`,this.t=this.rsdT}rsdT(t){const i=this.lValN([1,2,5]);m.creatByTarget(b.crFriendNotMeTarg(t.creatId)).forEach(n=>this.buffH(n,i)),this.balm(t.owner,i),this.anim8(t.creatId)}ssdC(){this.faction="T",this.rarity="L",this.name="Smolderscale Dragon",this.iAttack=this.lValN([0,3,15]),this.iHealth=this.lValN([6,13,30]),this.tribe.push("DG"),this.level===3?this.iMobile=2:(this.hints=["LG"],this.iDefend=!0),this.mPlayer=1;const t=this.boof135;this.trigB=this.buffNug(t*2,0,"TX"),this.text=`At the end of your turn, deal ${t} damage to each enemy creature.`,this.t=this.ssdT}ssdT(t){const i=m.qEnemyCreats();if(i.length>0){const r=R.tick(),n=this.boof135;i.forEach(c=>this.smack(c,n,r))}}stagC(){this.faction="U",this.rarity="C",this.name="Stag of Lys",this.iAttack=this.boof5916,this.iHealth=this.iAttack,this.tribe.push("ST"),this.mPlayer=1;const t=this.boof246;this.trigB=this.playerNug(t,0,"TW"),this.text=`At the end of your turn, gain ${t} health.`,this.t=this.stagT}stagT(t){this.balm(t.owner,this.boof246),this.anim8(t.creatId)}tinkC(){this.faction="A",this.rarity="H",this.name="War Tinker",this.iAttack=this.level,this.iHealth=this.boof4812,this.tribe.push("GN"),this.mPlayer=-1,this.trigB=this.avgSpawnNug(),this.trigB.threat="TW",this.text=`At the end of the enemy player's turn, replace ${this.name} with a copy of a random Robot from your deck.`,this.t=this.tinkT}tinkT(t){const i=b.target("DK");i.player=T.toTarget(t.owner),i.tribe="RB";const r=D.deckByTarget(i),n=r.length;if(n>0){const c=r[k.randInt(0,n)][0],f=m.creatByTr(t);this.replc(c,f.owner,f.lane)}}}class se extends E{cons(t){({["DCS"]:()=>this.delphC(),["GMP"]:()=>this.gmpC(),["LBL"]:()=>this.lbcC(),["MNM"]:()=>this.mnmC(),["NUG"]:()=>this.nugC(),["SBF"]:()=>this.sfangC(),["SSE"]:()=>this.sseC(),["SPD"]:()=>this.spdC(),["SPM"]:()=>this.spmC(),["TBA"]:()=>this.tbaC(),["USS"]:()=>this.ussC(),["VCG"]:()=>this.vgC(),["WBG"]:()=>this.woeC(),["ZSH"]:()=>this.zyxC()})[t]()}bothTurns=!1;trigB;constructor(t){super(t),this.cons(this.cardCode())}t;jr3(t,i){const r=super.jr3(t,i),n=r.jr4("TS");n.bonus=this.trigB;const c=Vt.extractCardCode(this.code);return(c==="ZSH"||c==="SBF")&&(r.extraBattles=1),r}ddf8(t){return this.bothTurns||t.event.playerA===t.owner}jr8(t){this.t(t),H.triggerDone()}delphC(){this.faction="A",this.rarity="L",this.name="Delpha, Chronosculptor",this.iAttack=this.boof7914,this.iHealth=this.iAttack,this.tribe.push("HM"),this.level>1&&(this.trigB=this.buffNug(5,4,"TX"),this.text=`At the start of your turn, level a ${this.level===2?"level 1 ":""}card in your hand at random.`),this.t=this.delphT}delphT(t){if(this.level>1){const i=T.toPlayer(t.owner),r=i.hand.map((c,f)=>{const p=O.getCard(c);return{idx:f,lvl:p.level,nxt:p.canLevel()?p.levelUpCard():""}}).filter(c=>c.nxt&&(this.level===3||c.lvl===1)),n=r.length;if(n>0){const c=r[k.randInt(0,n)];xt.levelInHand(i,c.idx,c.nxt),this.anim8(t.creatId)}}}gmpC(){this.faction="A",this.rarity="L",this.name="Ghox, Metamind Paragon",this.iAttack=this.boof4814,this.iHealth=this.boof61218,this.tribe.push("MM");const t=this.level===1?"":"s";this.trigB=this.bonNug(this.level*J.dcWeight,"TX"),this.text=`At the start of your turn, draw ${this.level} card${t}.`,this.t=this.gmpT}gmpT(t){T.drawCard(t.owner,this.level),this.anim8(t.creatId)}lbcC(){this.faction="U",this.rarity="R",this.name="Lightbringer Cleric",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("TK"),this.trigB=this.playerNug(this.boof3610,0,"TW"),this.text=`At the start of your turn, you gain ${this.boof137} to ${this.boof5914-1} health.`,this.t=this.lbcT}lbcT(t){this.balm(t.owner,k.randInt(this.boof137,this.boof5914)),this.anim8(t.creatId)}mnmC(){this.faction="N",this.rarity="L",this.name="Murderous Necromancer",this.iAttack=this.boof61017,this.iHealth=this.iAttack-1,this.tribe.push("HM"),this.trigB=this.avgSpawnNug(),this.trigB.threat="TX";let t;this.level===3?(t=" If that creature is opposed, destroy the creature opposing it.",this.hints=["ZZ-5"]):(t="",this.hints=["ZZ-3"]),this.text=`At the start of your turn, Spawn a random ${y.levelGateText(this.level)}creature that was destroyed this game.${t}`,this.t=this.mnmT}mnmT(t){const i=Ft.gravedigger("X",D.ddf2(this.level));if(i){const r=this.spawn(i,t.owner);if(r&&(this.logAct(!1,r),this.level===3)){const n=r.opposed;n&&this.kill(n)}}}nugC(){this.faction="T",this.rarity="L",this.name="Nug, Fury Fists",this.iAttack=this.boof71015,this.iHealth=this.iAttack-1,this.tribe.push("YT"),this.hints=["ZZ-3"],this.trigB=this.bonNug(1.5,"TX"),this.text="At the start of your turn, each other friendly creature deals battle damage equal to its attack to the creature opposing it.",this.t=this.nugT}nugT(t){const i=m.creatByTarget(b.crFriendNotMeTarg(t.creatId));if(i.length>0){const r=R.tick();i.forEach(n=>{if(n.attack>0){const c=n.opposed;c&&c.hurtDirect(n.attack,n.code,this.faction,r)}})}}sfangC(){this.faction="T",this.rarity="H",this.name="Saberfang",this.iAttack=this.boof246,this.iHealth=1,this.iAggro=!0,this.tribe.push("CT"),this.trigB=this.buffNug(this.iAttack,0),this.text=`${this.name} battles an additional time on your turn.`,this.t=this.sfangT}sfangT(t){this.wrang(m.creatByTr(t))}sseC(){this.faction="U",this.rarity="L",this.name="Scatterspore Eidolon",this.iAttack=8,this.iHealth=this.iAttack,this.tribe.push("PL"),this.level<3&&(this.hints=["LB"]);const t=this.boof357,i=X.minionName(this.level);this.trigB=this.statSpawnNug(t,t,"TW"),this.text=`At the start of your turn, Spawn a ${t}/${t} ${i}.`,this.t=this.sseT}sseT(t){const i=this.lValS(["SXD","SXP","SXT"])+this.level.toString();this.spawn(i,t.owner)}spdC(){this.faction="U",this.rarity="R",this.name="Shardplate Delver",this.iAttack=this.boof4612,this.iHealth=this.iAttack,this.tribe.push("DN");const t=this.boof246;this.trigB=this.buffNug(t,t,"TS"),this.text=`At the start of your turn, ${this.name} gets ${y.jr9(t,t)}.`,this.t=this.spdT}spdT(t){this.buffD(m.creatByTr(t),this.boof246)}spmC(){this.faction="U",this.rarity="L",this.name="Shardplate Mutant",this.iAttack=this.boof91421,this.iHealth=this.iAttack,this.tribe.push("IN"),this.trigB=this.bonNug(this.lValN([-1.5,-2.1,-3])),this.text="At the start of your turn, randomly discard down to two cards in your hand.",this.t=this.spmT}spmT(t){const i=T.toPlayer(t.owner);if(i.hand.length>2){let r=i.hand.slice();const n=k.randInt(0,r.length);let c=-1;for(;c===-1;){const f=k.randInt(0,r.length);f!==n&&(c=f)}for(let f=r.length-1;f>-1;f--)f===n||f===c||xt.cardDiscard(i,f);this.anim8(t.creatId)}}tbaC(){this.faction="U",this.rarity="L",this.name="Talisin, Bard of Abundance",this.iAttack=this.lValN([8,12,16]),this.iHealth=this.lValN([10,14,20]),this.tribe.push("SY"),this.bothTurns=this.lValB([!0,!0,!1]),this.level===3?this.trigB=this.multNug(this.avgSpawnNug(),.5):this.hints=["LG","ZZ-3"],this.text=`At the start of ${this.bothTurns?"each player's":"your"} turn, ${this.bothTurns?"that player":"you"} may play an additional card.`,this.t=this.tbaT}tbaT(t){G.freePlay(),this.anim8(t.creatId)}ussC(){this.faction="T",this.rarity="H",this.name="Uranti Stormshaper",this.iAttack=0,this.iHealth=this.boof91218,this.iDefend=!0,this.tribe.push("YT");const t=O.getCard("LWY"+this.level);this.trigB=this.spawnNug(t,"TX");const i=this.level===3?" into each available lane":"";this.text=`At the start of your turn, Spawn a ${y.tokName(t)}${i}.`,this.t=this.ussT}ussT(t){const i="LWY"+this.level;if(this.level===3){const r=m.emptyLanes(t.owner);if(r.length>0){const n=R.tick();r.forEach(c=>this.poot(i,t.owner,c,n))}}else this.spawn(i,t.owner)}vgC(){this.faction="T",this.rarity="C",this.name="Volcanic Giant",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("ER","GT"),this.trigB=this.playerNug(0,-this.boof3610,"TW"),this.text=`At the start of your turn, deals ${this.boof137} to ${this.boof4813} damage to the enemy player.`,this.t=this.vgT}vgT(t){const i=k.randInt(this.boof137,this.boof5914);this.ouch(!t.owner,i),this.anim8(t.creatId)}woeC(){this.faction="N",this.rarity="L",this.name="Woebringer",this.iAttack=this.lValN([7,10,18]),this.iHealth=this.boof5815,this.tribe.push("AB"),this.trigB=this.bonNug(0,"TW"),this.text=`At the start of your turn, destroy the ${this.level===3?"enemy ":""}creature with the lowest attack. If there is a tie, one is chosen at random.`,this.t=this.woeT}woeT(t){const i=b.crTarg();this.level===3&&(i.player=T.toTarget(!t.owner));const r=m.creatByTarget(i);let n=99999,c=[];r.forEach(p=>{p.attack===n?c.push(p):p.attack<n&&(n=p.attack,c=[p])});const f=c.length;if(f>0){const p=c[k.randInt(0,f)];this.kill(p)}}zyxC(){this.faction="T",this.rarity="L",this.name="Zyx, Storm Herald",this.iAttack=this.boof4712,this.iHealth=this.lValN([6,9,20]),this.iMobile=1,this.tribe.push("LT","AS"),this.text="Zyx battles an additional time on your turn.",this.trigB=this.buffNug(this.iAttack,0,"TX"),this.t=this.zyxT}zyxT(t){this.wrang(m.creatByTr(t))}}class Ha extends E{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Tuskin Sporelord",this.iAttack=this.lValN([2,6,10]),this.iHealth=this.lValN([10,14,18]),this.tribe.push("TK"),this.text=`Activate: Put a copy of friendly ${y.levelGateText(this.level)}Plant into an available lane.`,this.bonus=this.multNug(this.avgSpawnNug(),.5),this.bonus.threat="TX"}canActivate(t){return this.emptySloots(t.id).length>0&&this.buddies(t.id).length>0}startActivation(t){const i=this.buddies(t.id);i.push(S.cancelAction()),S.ddf5(i)}handleAction(t){const i=k.deTil(t.param);if(i[0]==="P1"){const r=this.emptySloots(i[1],m.ddf6(t).code);r.push(S.cancelAction()),S.ddf5(r)}else{const r=m.jr5(i[1]),n=this.poot(i[2],r.owner,t.lane);this.logAct(!0,n),r.endActivation()}}emptySloots(t,i=""){const r=b.emptyPlayerActTarg("F","CARD",this.code,k.enTil("P2",t,i));return D.toActions(r)}buddies(t){const i=b.crFriendActTarg("CARD",this.code,k.enTil("P1",t));return i.tribe="PL",i.level=D.ddf2(this.level),D.toActions(i)}}class qi extends kt{constructor(t){super(t),this.faction="A",t==="PRI"+"1"?(this.rarity="R",this.name="Perilous Insight",this.maxLevel=1,this.overload=!0):(this.rarity="C",this.name="Metasight",this.maxLevel=2,this.free=this.level===2),this.text="Discard and level up two cards."}canPlay(){const t=D.cardByTarget(T.getActive().deck,b.lvlHandActTarg(this.code,"")).length;return this.code==="MTS"+"1"?t>1:t>0}playTargets(){return[this.targParty("P1")]}handleAction(t){if(S.shiftPlayCard(t.position),t.param==="P1"){this.logSpell(),G.levelAndDiscardA(t);const i=this.targParty("P2"),r=D.toActions(i);r.length===0?S.spellCast():S.ddf5(r)}else G.levelAndDiscardA(t),S.spellCast()}targParty(t){const i=b.lvlHandActTarg(this.code,t);return i.deckPositionSkip=S.playPosition(),i}}class fi extends kt{cons(t){({["CFG"]:()=>this.confC(),["CSG"]:()=>this.cystgC(),["GRN"]:()=>this.grenC(),["TWG"]:()=>this.twstrC()})[t]()}cardTarg(t,i){const r=this.t(b.crActTarg("CARD",this.code,""));return r.param=t,r.notMe=i,r}xl=!0;constructor(t){super(t),this.cons(this.cardCode())}t;z;canPlay(){return m.creatByTarget(this.cardTarg("P1","")).length>1}playTargets(){return[this.cardTarg("P1","")]}handleAction(t){const i=k.deTil(t.param),r=m.ddf6(t);if(i[0]==="P1"){const n=k.enTil("P2",r.id),c=D.toActions([this.cardTarg(n,r.id),D.buttonTarget("CANC")]);S.ddf5(c)}else{const n=m.jr5(i[1]);this.xl?this.logSpell(n,r):this.logSpell(),this.z(n,r),S.spellCast()}}confC(){this.faction="T",this.rarity="C",this.name="Conflagrate",this.xl=!1,this.text=`Deal ${this.boof369} to two enemy creatures.`,this.t=this.confT,this.z=this.confZ}confZ(t,i){const r=R.tick(),n=this.boof369;this.smack(t,n,r),this.smack(i,n,r)}confT(t){return t.player="E",t}cystgC(){this.faction="A",this.rarity="C",this.name="Cypien Steelgraft",this.text=`Two friendly creatures get Armor ${this.boof246}.`,this.t=this.cystgT,this.z=this.cystgZ}cystgZ(t,i){const r=this.boof246;t.addArmor(r),i.addArmor(r)}cystgT(t){return t.player="F",t.canArmor=!0,t}grenC(){this.faction="N",this.rarity="C",this.name="Ghastly Renewal",this.text=`Give two friendly creatures Regenerate ${this.boof246}.`,this.t=this.grenT,this.z=this.grenZ}grenZ(t,i){const r=this.boof246;this.regn(t,r),this.regn(i,r)}grenT(t){return t.player="F",t.canRegen=!0,t}get tsboof(){return this.level+2}twstrC(){this.faction="U",this.rarity="C",this.name="Twinstrength";const t=this.tsboof;this.text=`Two friendly creatures get ${y.jr9(t,t)}.`,this.t=this.twstrT,this.z=this.twstrZ}twstrZ(t,i){const r=this.tsboof;this.buffD(t,r),this.buffD(i,r)}twstrT(t){return t.player="F",t}}class Fa extends E{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Umbruk Icecrusher",this.iAttack=this.boof61014,this.iHealth=this.boof246,this.tribe.push("DN"),this.text=`When ${this.name} ${y.dbdtap()}, deal that much damage to that player.~Allied Uterra: This gets ${y.jr9(2,2,!0)}, and Breakthrough.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("FR");const n=r.jr4("DM");return n.bonus=this.playerNug(0,-this.boof357,"TP"),r}ddf8(t){return t.event.battle&&!t.event.isCreatTarg&&t.event.isCreatSrc&&t.event.srcId===t.creatId}jr8(t){if(t.trigger.type==="FR"){if(G.allied("U")){const i=m.creatByTr(t);i.breakthrough=!0,i.buff(2,2,"U")}}else t.trigger.type==="DM"&&(this.ouch(t.event.target,t.event.dmg),this.anim8(t.creatId));H.triggerDone()}}class Na extends E{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Umbruk Lasher",this.iAttack=this.boof71014,this.iHealth=this.iAttack-1,this.iBT=!0,this.tribe.push("DN"),this.text=`Allied Tempys: When ${this.name} ${y.dbdtap()} on your turn, you may deal that much damage to an enemy creature.`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}handleAction(t){m.ddf6(t).hurtDirect(parseInt(t.param),this.code,"T"),S.actionDone(!0)}ddf8(t){const i=W.toDamage(t.event);return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcId===t.creatId&&i.srcCreat.owner===T.activeA}jr8(t){if(t.trigger.type==="FR"){if(G.allied("T")){const i=m.creatByTr(t),r=i.jr4("DM");r.interactive=!0,r.bonus=this.buffNug(this.iAttack,0,"TP"),i.anim8("T"),i.changed=!0}H.triggerDone()}else if(t.trigger.type==="DM"){const i=t.event,r=D.toActions(b.crEnemyActTarg("CARD",this.code,i.dmg.toString()));r.length>0?(r.push(S.noneEndTrigger()),S.ddf5(r)):H.triggerDone()}}}class gi extends E{cons(t){({["CBB"]:()=>this.cindC(),["EBW"]:()=>this.ebwC(),["IBR"]:()=>this.ibrfC(),["SBI"]:()=>this.sbiC()})[t]()}enemy=!1;ftext="";constructor(t){super(t),this.cons(this.cardCode()),this.text=`Forge: If you are rank ${this.level+1} or higher, `+this.ftext,this.ftext=""}f;jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");return n.interactive=!0,r}handleAction(t){this.f(m.ddf6(t)),S.actionDone(!0)}jr8(t){if(m.creatByTr(t).rank>this.level){const r=b.crActTarg("CARD",this.code,t.creatId);this.enemy?r.player="E":r.hint=["BF"];const n=D.toActions(r);n.length>0?S.ddf5(n):H.triggerDone()}else H.triggerDone()}ebwC(){this.faction="N",this.rarity="C",this.name="Ebonbound Warlord",this.iAttack=this.boof3714,this.iHealth=this.iAttack+4,this.tribe.push("VP"),this.enemy=!0;const t=this.boof369n;this.ftext=`give an enemy creature ${y.jr9(t,t)}.`,this.f=this.ebwF}ebwF(t){this.logAct(!1,t),this.buffD(t,this.boof369n)}sbiC(){this.faction="U",this.rarity="C",this.name="Shardbound Invoker",this.iAttack=this.boof4714,this.iHealth=this.iAttack+1,this.tribe.push("TK");const t=this.boof359;this.ftext=`give a creature ${y.jr9(t,t)}.`,this.f=this.sbiF}sbiF(t){this.logAct(!1,t),this.buffD(t,this.boof359)}cindC(){this.faction="T",this.rarity="C",this.name="Cinderbound Barbarian",this.iAttack=this.boof3612,this.iHealth=this.iAttack,this.tribe.push("FR","AS");const t=this.boof6912;this.enemy=!0,this.ftext=`deal ${t} damage to an enemy creature.`,this.f=this.cindF}cindF(t){this.smack(t,this.boof6912)}ibrfC(){this.faction="A",this.rarity="C",this.name="Ironbound Reinforcements",this.iAttack=this.boof368,this.iHealth=this.iAttack*2,this.tribe.push("GN");const t=this.boof5812;this.ftext=`give a creature ${y.jr9(t,0)}.`,this.f=this.ibrfF}ibrfF(t){this.logAct(!1,t),this.buffA(t,this.boof5812)}}class Pa extends E{constructor(t){super(t),this.faction="T",this.rarity="C",this.name="Uranti Elementalist",this.iAttack=this.boof4712,this.iHealth=this.iAttack-1,this.tribe.push("YT"),this.text=`Forge: You may move another friendly creature to an available lane adjacent to ${this.name}.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");return n.interactive=!0,r}jr8(t){const i=m.creatByTr(t);if(this.emptySloots(i).length>0){const r=b.crFriendNotMeActTarg("CARD",i.id,this.code,k.enTil("P1",i.id)),n=D.toActions(r);n.length>0?(n.push(S.noneEndTrigger()),S.ddf5(n)):H.triggerDone()}else H.triggerDone()}handleAction(t){const i=k.deTil(t.param);if(i[0]==="P1"){const r=this.emptySloots(m.jr5(i[1]),m.ddf6(t).id);r.push(S.cancelAction()),S.ddf5(r)}else{const r=m.jr5(i[1]);this.logAct(!1,r),this.lurk(r,t.lane),S.actionDone(!0)}}emptySloots(t,i=""){return S.emptyAdjacents(t,k.enTil("P2",i))}}class Ma extends E{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Uranti Heartseeker",this.iAttack=this.boof4915,this.iHealth=this.iAttack,this.iDefend=!0,this.tribe.push("YT"),this.addSp("D",this.iAttack),this.text=`Activate: Deal ${this.iAttack} damage to an enemy creature or player with exactly ${this.iAttack} health.`,this.bonus=this.buffNug(this.iAttack/2,0,"TW")}canActivate(t){return this.findVictims(t.id).length>0}startActivation(t){const i=this.findVictims(t.id);i.push(S.cancelAction()),S.ddf5(i)}handleAction(t){const i=m.jr5(t.param);if(t.zone==="F"){const r=m.ddf6(t);this.logAct(!0,r),this.smack(r,this.iAttack)}else{this.logAct(!0);const r=t;this.ouch(r.playerA,this.iAttack),this.anim8(i)}i.endActivation()}findVictims(t){const i=this.iAttack,r=b.crEnemyTarg(),c=m.creatByTarget(r).filter(p=>p.health===i).map(p=>b.fieldSelectAction("CARD",p.lane,p.owner)),f=T.toPlayer("E");return f.health===i&&c.push(b.playerSelectAction("CARD",f.isPlayerA)),c.forEach(p=>{p.host=this.code,p.param=t}),c}}class Ea extends E{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Vaerus, Herald of Fury",this.iAttack=15,this.iHealth=12,this.iMobile=2,this.tribe.push("DG"),this.text="Each friendly creature battles an additional time on each of your turns."}jr3(t,i){const r=super.jr3(t,i);r.jr4("EF");const n=r.jr4("TS");return n.bonus=this.buffNug(20,0,"TX"),r}ddf8(t){if(t.event.code==="ENT"){const i=W.toCreature(t.event);return t.owner===i.creature.owner&&t.owner===T.activeA}else if(t.event.code==="TRS")return t.event.playerA===t.owner;return!1}giveXtra(t,i){t.hasMod(i)||(this.wrang(t),t.addMod(b.mod("TK",!0,i),"X"))}jr8(t){if(t.event.code==="ENT"){const i=W.toCreature(t.event);i.creature.id===t.creatId?m.ddf1().forEach(r=>{this.giveXtra(r,t.creatId)}):pt.itBirthedFirst(i.creature.id,t.creatId)&&this.giveXtra(i.creature,t.creatId)}else t.event.code==="TRS"&&m.ddf1().forEach(i=>{this.wrang(i),i.hasMod(t.creatId)||i.addMod(b.mod("TK",!0,t.creatId),"X")});H.triggerDone()}}class z extends E{constructor(t){super(t),this.cons(this.cardCode())}cons(t){({["AEN"]:()=>this.anvenf(),["AGU"]:()=>this.avguard(),["BTH"]:()=>this.batthid(),["BBB"]:()=>this.bart(),["BLW"]:()=>this.blitwi(),["BWG"]:()=>this.brambleguard(),["CHY"]:()=>this.cavernhyd(),["CSL"]:()=>this.cslime(),["CDC"]:()=>this.cindcol(),["CNM"]:()=>this.cindmy(),["CTG"]:()=>this.citg(),["CWK"]:()=>this.crag(),["DBP"]:()=>this.prowler(),["DMR"]:()=>this.raptor(),["DBR"]:()=>this.bearride(),["DTD"]:()=>this.dmaw(),["DSZ"]:()=>this.duskzomb(),["FWB"]:()=>this.fangbear(),["FWR"]:()=>this.ravager(),["FFG"]:()=>this.ffang(),["FMS"]:()=>this.firemane(),["FPR"]:()=>this.flop(),["FGA"]:()=>this.falpha(),["FGB"]:()=>this.fbeta(),["FGO"]:()=>this.fomega(),["FPM"]:()=>this.minot(),["FPS"]:()=>this.forgeplate(),["GGE"]:()=>this.geist(),["GGH"]:()=>this.ghast(),["GGS"]:()=>this.ggs(),["GCL"]:()=>this.glacial(),["IWC"]:()=>this.warcharger(),["LTM"]:()=>this.ltam(),["LWY"]:()=>this.lwyrm(),["LHY"]:()=>this.lyshyd(),["KDC"]:()=>this.kadc(),["MRF"]:()=>this.marrow(),["MMI"]:()=>this.mmin(),["MMO"]:()=>this.mmop(),["NGW"]:()=>this.narg(),["NCW"]:()=>this.necrotic(),["NXC"]:()=>this.nexcore(),["NAM"]:()=>this.nyam(),["OBD"]:()=>this.battledroid(),["OSP"]:()=>this.oss(),["OSL"]:()=>this.ogsl(),["PRG"]:()=>this.perd(),["RHY"]:()=>this.ravh(),["RHC"]:()=>this.rime(),["RSP"]:()=>this.runprim(),["SCS"]:()=>this.scorp(),["SCD"]:()=>this.scout(),["SFT"]:()=>this.scrap(),["SBA"]:()=>this.sparkblade(),["SKB"]:()=>this.sparkbot(),["SBR"]:()=>this.sparkass(),["STM"]:()=>this.sparkman(),["SSN"]:()=>this.sfsent(),["SMN"]:()=>this.steam(),["SGI"]:()=>this.stonefist(),["SCL"]:()=>this.stormcall(),["SMA"]:()=>this.ancient(),["SML"]:()=>this.lurker(),["TGS"]:()=>this.tsprout(),["TGN"]:()=>this.tgnome(),["TNM"]:()=>this.tiggy(),["TWS"]:()=>this.tscout(),["TWT"]:()=>this.tund(),["URD"]:()=>this.unrelenting(),["VBK"]:()=>this.vblock(),["VTC"]:()=>this.vtech(),["WHC"]:()=>this.wardog(),["WTW"]:()=>this.waterwalk(),["WPD"]:()=>this.windprime(),["XCR"]:()=>this.xithcrush(),["XHU"]:()=>this.hulk(),["YWC"]:()=>this.yetiwar(),["ZIN"]:()=>this.zombinf()})[t]()}sist(){this.rarity="R",this.level===1?this.hints=["LG"]:this.consistent=!0}shite(){this.level<3&&(this.hints=["LB"])}ancient(){this.faction="U",this.rarity="C",this.name="Swampmoss Ancient",this.iAttack=this.lValN([7,12]),this.iHealth=this.iAttack,this.tribe.push("DN"),this.hints=[this.level===1?"ZZ-1":"ZZ-2"],this.maxLevel=2}anvenf(){this.faction="A",this.rarity="C",this.name="Anvillon Enforcer",this.iAttack=this.boof5711,this.iHealth=this.iAttack-1,this.iArmor=this.boof246,this.tribe.push("RB")}avguard(){this.faction="T",this.rarity="R",this.name="Avalanche Guardian",this.iAttack=this.boof5915,this.iHealth=this.lValN([8,15,23]),this.iMobile=1,this.iDefend=!0,this.tribe.push("IC","EL")}bart(){this.faction="U",this.rarity="H",this.name="Big Bad Bartok",this.iAttack=this.level+8,this.iHealth=this.iAttack,this.consistent=!0,this.shite(),this.tribe.push("TG")}batthid(){this.faction="U",this.name="Batterhide",this.iAttack=this.boof3814,this.iHealth=this.iAttack+3,this.sist(),this.iBT=!0,this.tribe.push("DN")}battledroid(){this.faction="A",this.rarity="H",this.name="Oreian Battledroid",this.iAttack=this.lValN([5,7,17]),this.iHealth=1,this.iArmor=this.iAttack,this.tribe.push("RB")}bearride(){this.faction="U",this.rarity="C",this.name="Deepwood Bear Rider",this.iAttack=this.lValN([5,16,18]),this.iHealth=this.lValN([2,8,10]),this.tribe.push("LP"),this.level===2&&(this.hints=["LB"])}blitwi(){this.faction="N",this.name="Blight Witch",this.iAttack=this.boof259,this.iHealth=this.boof71117,this.sist(),this.iRegen=this.boof234,this.tribe.push("ZB")}brambleguard(){this.faction="U",this.rarity="C",this.name="Bramblewood Guardian",this.iAttack=this.boof2612,this.iHealth=this.lValN([9,14,24]),this.tribe.push("PL")}cavernhyd(){this.faction="U",this.rarity="C",this.name="Cavern Hydra",this.iAttack=this.boof4711,this.iHealth=this.boof71015,this.iRegen=this.boof135,this.tribe.push("HY")}cslime(){this.faction="N",this.rarity="C",this.name="Cavern Slime",this.iAttack=this.boof61218,this.iHealth=this.boof246,this.iRegen=this.iAttack,this.tribe.push("OZ"),this.hints=[this.lValH(["ZZ-2","ZZ-3","ZZ-5"])]}cindcol(){this.faction="T",this.rarity="C",this.name="Cinder Colossus",this.iAttack=this.lValN([3,13,24]),this.iHealth=this.lValN([4,14,27]),this.iDefend=!0,this.level===1&&(this.hints=["LG"]),this.tribe.push("ER","EL")}cindmy(){this.faction="T",this.rarity="C",this.name="Cinder Mystic",this.iAttack=this.lValN([4,11,21]),this.iHealth=this.boof3714,this.tribe.push("FR","AS")}citg(){this.faction="A",this.rarity="C",this.name="Citadel Guard",this.iAttack=this.lValN([8,12,25]),this.iHealth=this.lValN([9,13,30]),this.iDefend=!0,this.hints=[this.level===3?"ZZ-5":"ZZ-1"],this.tribe.push("RB")}crag(){this.faction="T",this.rarity="C",this.name="Crag Walker",this.iAttack=this.boof71218,this.iHealth=this.boof246,this.iMobile=1,this.tribe.push("DN")}dmaw(){this.faction="N",this.rarity="L",this.name="Duskmaw, Twilight Drake",this.iAttack=this.boof61017,this.iHealth=this.boof5915,this.iMobile=1,this.tribe.push("ST","DG")}duskzomb(){this.faction="N",this.rarity="C",this.name="Duskspire Zombie",this.iAttack=this.lValN([2,5,16]),this.iHealth=this.lValN([5,8,19]),this.iRegen=4,this.tribe.push("ZB")}falpha(){this.faction="A",this.rarity="C",this.name="Forge Guardian Alpha",this.iAttack=this.lValN([4,8,20]),this.iHealth=this.lValN([8,14,26]),this.iDefend=!0,this.tribe.push("RB","GD")}fangbear(){this.faction="U",this.rarity="C",this.name="Fangwood Bear",this.iAttack=this.boof61016,this.iHealth=this.iAttack,this.tribe.push("BR")}fbeta(){this.faction="A",this.rarity="R",this.name="Forge Guardian Beta",this.iAttack=this.lValN([5,8,20]),this.iHealth=this.lValN([3,6,18]),this.iArmor=this.boof124,this.tribe.push("RB","GD"),this.level===3&&(this.hints=["ZZ-3"])}ffang(){this.faction="U",this.rarity="C",this.name="Featherfang",this.iAttack=this.boof61218,this.iHealth=this.boof4812,this.tribe.push("DN")}firemane(){this.faction="T",this.rarity="C",this.name="Firemane Steed",this.iAttack=this.lValN([3,6,16]),this.iHealth=this.lValN([6,9,19]),this.iMobile=2,this.tribe.push("FR","EL")}flop(){this.faction="T",this.rarity="C",this.name="Flowstone Primordial",this.iAttack=this.lValN([6,7,15]),this.iHealth=this.iAttack+1,this.tribe.push("FR","EL")}fomega(){this.faction="A",this.rarity="L",this.name="Forge Guardian Omega",this.iAttack=this.boof255080,this.iHealth=this.iAttack,this.iMobile=this.boof124,this.iArmor=this.iMobile*10,this.iBT=!0,this.iAggro=!0,this.consistent=!0,this.tribe.push("RB","GD")}forgeplate(){this.faction="A",this.rarity="C",this.name="Forgeplate Sentry",this.iAttack=this.boof4915,this.iHealth=this.iAttack,this.iArmor=this.boof135,this.tribe.push("RB")}ggs(){this.faction="N",this.rarity="C",this.name="Grimgaunt Spectre",this.iAttack=this.lValN([3,11,14]),this.iHealth=this.iAttack,this.iMobile=1,this.level===1?this.hints=["LG"]:this.level===2&&(this.hints=["LB"]),this.tribe.push("GG")}geist(){this.faction="N",this.rarity="C",this.name="Grave Geist",this.iAttack=this.boof71118,this.iHealth=this.boof4711,this.tribe.push("ST")}ghast(){this.faction="N",this.rarity="C",this.name="Grave Ghast",this.iHealth=this.boof71013,this.iAttack=this.iHealth-2,this.iRegen=this.boof246,this.tribe.push("ZB")}glacial(){this.faction="T",this.rarity="C",this.name="Glacial Colossus",this.iAttack=this.boof61016,this.iHealth=this.lValN([8,13,19]),this.tribe.push("IC","EL"),this.iDefend=!0}hulk(){this.faction="N",this.rarity="C",this.name="Xithian Hulk",this.iAttack=this.boof4814,this.iHealth=this.iAttack+3,this.tribe.push("AB")}kadc(){this.faction="T",this.rarity="C",this.name="Kadras Colossus",this.iAttack=this.lValN([6,11,13]),this.iHealth=this.iAttack,this.tribe.push("GT"),this.shite(),this.level===1&&this.hints.push("ZZ+1")}ltam(){this.faction="T",this.rarity="C",this.name="Lightning Tamer",this.iAttack=this.boof6810,this.iHealth=1,this.tribe.push("LT","AS"),this.iAggro=!0}lurker(){this.faction="U",this.rarity="C",this.name="Swampmoss Lurker",this.iAttack=this.lValN([8,13,22]),this.iHealth=this.lValN([4,6,15]),this.tribe.push("DN"),this.level===3?this.hints=["ZZ-5"]:this.hints=["ZZ-1"]}lwyrm(){this.faction="T",this.rarity="C",this.name="Lightning Wyrm",this.iAttack=this.boof4711,this.iHealth=this.boof258,this.tribe.push("LT","EL"),this.iAggro=!0}lyshyd(){this.faction="U",this.rarity="C",this.name="Lysian Hydra",this.iAttack=this.boof5914,this.iHealth=this.iAttack+1,this.iRegen=this.level,this.tribe.push("HY")}marrow(){this.faction="N",this.rarity="C",this.name="Marrow Fiend",this.iAttack=this.boof81117,this.iHealth=this.lValN([1,5,13]),this.tribe.push("SK")}minot(){this.faction="A",this.name="Forgeplate Minotaur",this.iAttack=this.lValN([2,8,16]),this.iHealth=this.lValN([4,9,17]),this.sist(),this.iArmor=this.level,this.tribe.push("RB")}mmin(){this.faction="A",this.rarity="C",this.name="Metamind Infiltrator",this.iAttack=this.boof5917,this.iHealth=this.iAttack-1,this.tribe.push("MM")}mmop(){this.faction="A",this.rarity="C",this.name="Metamind Operator",this.iAttack=this.boof4610,this.iHealth=this.lValN([10,14,18]),this.tribe.push("MM")}narg(){this.faction="T",this.rarity="C",this.name="Nargath Warrior",this.iAttack=this.boof51014,this.iHealth=this.iAttack+1,this.tribe.push("ER","AS")}necrotic(){this.faction="N",this.rarity="C",this.name="Necrotic Wurm",this.iAttack=this.lValN([4,7,18]),this.iHealth=this.lValN([5,8,19]),this.tribe.push("WR")}nexcore(){this.faction="A",this.rarity="C",this.name="Nexus Core",this.iAttack=0,this.iHealth=this.lValN([15,25,40]),this.tribe.push("RB"),this.iDefend=!0}nyam(){this.faction="N",this.rarity="C",this.name="Nyrali Ambusher",this.iAttack=this.boof71117,this.iHealth=this.lValN([3,6,13]),this.tribe.push("OZ")}ogsl(){this.faction="U",this.rarity="C",this.name="Overgrown Spineleaf",this.iAttack=this.lValN([6,12,16]),this.iHealth=this.boof4812,this.tribe.push("PL")}oss(){this.faction="N",this.rarity="R",this.name="Ossuary Spirit",this.iAttack=this.lValN([1,3,6]),this.iHealth=this.boof91420,this.iRegen=this.iAttack+2,this.tribe.push("ST")}perd(){this.faction="N",this.rarity="C",this.name="Perdition Guard",this.iAttack=this.lValN([3,12,15]),this.iHealth=this.iAttack-1,this.tribe.push("NG"),this.level===1?this.hints=["LG","ZZ-1"]:this.level===2&&(this.hints=["LB"])}prowler(){this.faction="U",this.rarity="C",this.name="Deepbranch Prowler",this.iAttack=this.lValN([8,9,10]),this.iHealth=this.iAttack,this.tribe.push("CT"),this.shite(),this.iBT=!0}raptor(){this.faction="U",this.rarity="C",this.name="Deepmoss Raptor",this.iAttack=this.lValN([2,13,16]),this.iHealth=this.iAttack,this.level===1?this.hints=["LG","RT"]:this.level===2&&(this.hints=["LB"]),this.tribe.push("DN")}ravager(){this.faction="U",this.rarity="C",this.name="Fangwood Ravager",this.iAttack=this.boof5917,this.iHealth=this.iAttack,this.tribe.push("BE")}ravh(){this.faction="U",this.rarity="C",this.name="Ravenous Hydra",this.iAttack=this.boof5813,this.iHealth=this.iAttack+this.level,this.iRegen=this.level,this.iBT=!0,this.tribe.push("HY")}rime(){this.faction="T",this.rarity="C",this.name="Rimehorn Charger",this.iAttack=this.lValN([5,8,10]),this.iHealth=this.iAttack+3,this.iMobile=1,this.shite(),this.tribe.push("RM")}runprim(){this.faction="T",this.name="Runestorm Primordial",this.iAttack=this.boof3714,this.iHealth=this.iAttack-1,this.sist(),this.iAggro=!0,this.tribe.push("LT","EL")}scorp(){this.faction="N",this.rarity="C",this.name="Scavenger Scorpion",this.iAttack=this.lValN([6,9,11]),this.iHealth=this.iAttack,this.iRegen=this.level,this.shite(),this.tribe.push("AB")}scout(){this.faction="A",this.rarity="H",this.name="Scout Drone",this.iAttack=this.boof246,this.iHealth=this.iAttack,this.free=this.level>1,this.level<3&&(this.hints=[this.level===1?"LG":"LB"]),this.tribe.push("RB")}scrap(){this.faction="A",this.rarity="H",this.name="Scrapforge Titan",this.iAttack=this.lValN([1,5,20]),this.iHealth=this.iAttack,this.iArmor=this.lValN([1,5,10]),this.level===1&&(this.hints=["LG","LM","RT"]),this.tribe.push("RB")}sfsent(){this.faction="A",this.rarity="C",this.name="Spiritforge Sentinel",this.iAttack=this.lValN([3,6,9]),this.iHealth=this.iAttack*2,this.iArmor=this.lValN([1,2,6]),this.tribe.push("RB")}sparkbot(){this.faction="A",this.rarity="C",this.name="Spark Bot",this.iAttack=this.boof5914,this.iHealth=this.lValN([6,11,16]),this.tribe.push("RB")}sparkblade(){this.faction="A",this.rarity="C",this.name="Sparkblade Assassin",this.iAttack=this.lValN([4,12,14]),this.iHealth=this.lValN([5,13,15]),this.tribe.push("HM")}sparkass(){this.faction="T",this.rarity="C",this.name="Sparkbrand Asir",this.iAttack=this.lValN([2,7,9]),this.iHealth=this.lValN([6,11,13]),this.iAggro=!0,this.tribe.push("LT","AS")}sparkman(){this.faction="T",this.rarity="R",this.name="Sparktail Manticore",this.iAttack=this.boof369,this.iHealth=this.boof71116,this.iAggro=!0,this.iMobile=1,this.tribe.push("MT")}steam(){this.faction="T",this.rarity="C",this.name="Steam Sentinel",this.iAttack=this.boof81420,this.iHealth=this.boof61016,this.iDefend=!0,this.tribe.push("WT","EL")}stonefist(){this.faction="T",this.rarity="C",this.name="Stonefist Giant",this.iAttack=this.lValN([3,7,16]),this.iHealth=this.lValN([6,10,24]),this.tribe.push("ER","EL")}stormcall(){this.faction="T",this.rarity="C",this.name="Storm Caller",this.iAttack=this.lValN([8,11,14]),this.iHealth=this.iAttack-2,this.tribe.push("WN","AS")}tgnome(){this.faction="A",this.rarity="C",this.name="Technognome",this.iAttack=this.lValN([3,9,19]),this.iHealth=this.iAttack,this.level===1&&(this.hints=["LG"]),this.tribe.push("GN")}tiggy(){this.faction="U",this.rarity="C",this.name="Tigrin Nomad",this.iAttack=this.lValN([8,10,12]),this.iHealth=this.boof246,this.iBT=!0,this.shite(),this.tribe.push("TG")}tscout(){this.faction="A",this.rarity="C",this.name="Tower Scout",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.iMobile=1,this.tribe.push("HM")}tund(){this.faction="A",this.rarity="C",this.name="Tundra Watcher",this.iAttack=this.lValN([5,10,12]),this.iHealth=this.lValN([8,11,13]),this.shite(),this.tribe.push("RB")}tsprout(){this.faction="U",this.rarity="C",this.name="Tanglesprout",this.iAttack=this.boof7911,this.iHealth=this.iAttack+1,this.shite(),this.tribe.push("PL")}unrelenting(){this.faction="N",this.rarity="H",this.name="Unrelenting Dead",this.iAttack=this.boof4814,this.iHealth=this.iAttack,this.iRegen=this.iAttack,this.tribe.push("ZB")}vblock(){this.faction="A",this.rarity="R",this.name="Vault Blockade",this.iAttack=0,this.iHealth=this.boof135,this.iArmor=this.boof101520,this.iDefend=!0,this.tribe.push("RB")}vtech(){this.faction="A",this.rarity="C",this.name="Vault Technician",this.iAttack=this.boof61218,this.iHealth=this.boof3915,this.tribe.push("HM")}warcharger(){this.faction="A",this.rarity="C",this.name="Ionic Warcharger",this.iAttack=this.boof4915,this.iHealth=this.boof71218,this.iMobile=1,this.tribe.push("RB")}wardog(){this.faction="T",this.rarity="T",this.name="Warhound Courser",this.iAttack=this.level,this.iHealth=this.level,this.iAggro=!0,this.tribe.push("FR","EL"),this.free=!0}waterwalk(){this.faction="T",this.rarity="C",this.name="Water Walker",this.iAttack=this.lValN([5,12,14]),this.iHealth=this.lValN([2,9,11]),this.tribe.push("WT","AS")}windprime(){this.faction="T",this.rarity="C",this.name="Wind Primordial",this.iHealth=this.boof4814,this.iAttack=this.iHealth+2,this.iMobile=this.level,this.tribe.push("WN","EL")}xithcrush(){this.faction="N",this.rarity="C",this.name="Xithian Crusher",this.iAttack=this.lValN([4,10,16]),this.iHealth=this.iAttack+2,this.tribe.push("AB")}yetiwar(){this.faction="T",this.rarity="C",this.name="Yeti Warcaller",this.iAttack=this.boof248,this.iHealth=this.lValN([10,15,23]),this.tribe.push("YT")}zombinf(){this.faction="N",this.rarity="C",this.name="Zombie Infantry",this.iAttack=this.boof61015,this.iHealth=this.iAttack-1,this.tribe.push("ZB")}}class Ra extends kt{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Varna's Pact";const i=this.lValS(["a","two","three"]),r=this.level===1?"":"s",n=this.level===1?"was":"were";this.text=`Put ${i} random creature${r} that ${n} destroyed this game into ${i} lane${r}.`}playTargets(){return[this.fieldTarget("P1",[])]}handleAction(t){const i=k.deTil(t.param);if(i[0]==="P1")if(this.level===1)this.endSpell([t.lane],t.playerA);else{const r=this.fieldTarget("P2",[t.lane]);S.ddf5(D.toActions(r))}else if(i[0]==="P2"){const r=[t.lane,parseInt(i[1])];if(this.level===2)this.endSpell(r,t.playerA);else{const n=this.fieldTarget("P3",r);S.ddf5(D.toActions(n))}}else this.endSpell([t.lane,parseInt(i[1]),parseInt(i[2])],t.playerA)}endSpell(t,i){this.logSpell();const r=R.tick();t.forEach(n=>{const c=Ft.gravedigger();c&&this.replc(c,i,n,r)}),S.spellCast()}fieldTarget(t,i){const r=b.actionTarget("TF","CARD",this.code,k.enTil(t,...i));return r.player="F",r.hint=["FL"],r.lanes=m.laneIdx.filter(n=>!i.includes(n)),r}}class La extends E{constructor(t){super(t),this.faction="U",this.rarity="R",this.name="Vigorwisp",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.tribe.push("ST"),this.text=`When ${this.name} gains health, heal that much damage from each other friendly creature.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("HG");return n.bonus=this.buffNug(0,this.boof369,"TW"),n.batch=!0,r}ddf8(t){return t.event.creatId===t.creatId}jr8(t){const i=b.crNotMeTarg(t.creatId);i.player=T.toTarget(t.owner),m.creatByTarget(i).forEach(r=>r.heal(t.event.healAmt,t.draw)),H.triggerDone()}}class Ga extends E{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Voltaic Prophet",this.iAttack=this.boof61016,this.iHealth=this.iAttack,this.tribe.push("HM");const i="evel up each card in your hand",r=this.lValS(["You may discard and level up a card","Discard and l"+i,"L"+i]);this.text="Formation: "+r+"."}get formation(){return!0}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FM");return n.interactive=this.level===1,r}handleAction(t){G.levelAndDiscardA(t),this.anim8(t.param),S.actionDone(!0)}jr8(t){if(t.owner!==T.activeA){H.triggerDone();return}if(this.level===1){const i=b.lvlHandActTarg(this.code,t.creatId),r=D.toActions([i,D.buttonTarget("NOTR")]);r.length>1?S.ddf5(r):H.triggerDone()}else{const i=T.getActive();this.logAct(!1);const r=i.hand.slice();if(this.level===2)for(let n=r.length-1;n>-1;n--)O.getCard(r[n]).canLevel()?G.levelAndDiscard(r[n],n,!1):xt.cardDiscard(i,n);else r.forEach((n,c)=>{const f=O.getCard(n).levelUpCard();f!==n&&xt.levelInHand(i,c,f)});this.anim8(t.creatId),H.triggerDone()}}}class Ia extends E{constructor(t){super(t),this.faction="T",this.rarity="R",this.name="Warhound Raider",this.iAttack=this.boof5915,this.iHealth=this.iAttack+1,this.tribe.push("FR","AS"),this.text=`If there is a friendly Warhound Courser in play, ${this.name} has Aggressive.`}jr3(t,i){const r=super.jr3(t,i),n=r.addEffect("PS",this.code);return n.area="C",r}enforceEffect(t){const i=b.crNotMeTarg(t.id);i.player=T.toTarget(t.owner),i.cardCode="WHC",m.creatByTarget(i).length===0?t.removeModSafe(t.id):t.addModSafe(b.mod("AG",!0,t.id))}}class Wa extends Qe{jr3(t,i){const r=super.jr3(t,i),n=r.jr4("LG"),c=this.boof124*5;return n.bonus=this.buffNug(c,c,"TS"),n.batch=!0,r}ddf8(t){return t.owner===t.event.playerA}jr8(t){const i=this.boof124*t.event.healAmt;m.creatByTr(t).buff(i,i,t.draw?"U":"X"),H.triggerDone()}}class Oa extends E{constructor(t){super(t),this.faction="U",this.rarity="R",this.name="Wildwood Sower",this.iAttack=this.boof3612,this.iHealth=this.lValN([6,11,18]),this.tribe.push("HM");const i=O.getCard(X.minionCode(this.level));this.text=`When you play a spell, you may put a ${y.tokName(i)} into an available lane.`,this.spB=this.spawnNug(i,"TW")}spB;jr3(t,i){const r=super.jr3(t,i),n=r.jr4("PC");return n.interactive=!0,n.bonus=this.spB,r}handleAction(t){this.poot(X.minionCode(this.level),t.playerA,t.lane),S.actionDone(!0)}ddf8(t){return t.event.playerA===t.owner&&O.getCard(t.event.cardCode).type==="S"}jr8(t){const i=b.emptyPlayerActTarg("F","CARD",this.code,""),r=D.toActions(i);r.length===0?H.triggerDone():(r.push(S.noneEndTrigger()),S.ddf5(r))}}class $a extends E{constructor(t){super(t),this.faction="T",this.rarity="C",this.name="Windcaller Shaman",this.iAttack=this.boof3713,this.iHealth=this.iAttack+4,this.tribe.push("WN","AS"),this.text=`Forge: You may move another friendly ${y.levelGateText(this.level)}creature to an available lane adjacent to ${this.name}.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("FR");return n.interactive=!0,r}jr8(t){const i=m.creatByTr(t);if(this.emptySloots(i).length>0){const r=b.crFriendNotMeActTarg("CARD",i.id,this.code,k.enTil("P1",i.id));r.level=D.ddf2(this.level);const n=D.toActions(r);n.length>0?(n.push(S.noneEndTrigger()),S.ddf5(n)):H.triggerDone()}else H.triggerDone()}handleAction(t){const i=k.deTil(t.param);if(i[0]==="P1"){const r=this.emptySloots(m.jr5(i[1]),m.ddf6(t).id);r.push(S.cancelAction()),S.ddf5(r)}else{const r=m.jr5(i[1]);this.logAct(!1,r),this.lurk(r,t.lane),S.actionDone(!0)}}emptySloots(t,i=""){return S.emptyAdjacents(t,k.enTil("P2",i))}}class Ua extends E{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Windspark Elemental",this.iAttack=this.boof258,this.iHealth=this.lValN([7,14,21]),this.tribe.push("LT","EL"),this.text=`When an enemy creature is delt non-battle damage, deal ${this.boof246} damage to the enemy player.`}jr3(t,i){const r=super.jr3(t,i),n=r.jr4("DM");return n.bonus=this.playerNug(0,-this.boof246,"TX"),n.batch=!0,r}ddf8(t){const i=W.toDamage(t.event);return!i.battle&&i.isCreatTarg&&i.hurtCreat.owner!==t.owner}jr8(t){this.ouch(!t.owner,this.boof246,t.draw),t.draw&&this.anim8(t.creatId),H.triggerDone()}}class Va extends E{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Xithian Rotfiend",this.iAttack=this.boof71220,this.iHealth=this.iAttack+1,this.tribe.push("AB");const i=-this.boof135;this.text=`When ${this.name} becomes opposed, it gets ${y.jr9(i,i)}.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("EF");const n=r.jr4("MV"),c=-this.boof135;return n.bonus=this.buffNug(c,c),r}ddf8(t){const i=W.toCreature(t.event);return t.trigger.creatId===i.creature.id&&t.trigger.type==="MV"||i.creature.owner!==t.owner}jr8(t){let i=!1;const r=m.creatByTr(t),n=W.toCreature(t.event);(r.id===n.creature.id&&r.opposed||n.creature.lane===m.oppositeLane(r.lane))&&(i=!0),i&&this.buffD(r,-this.boof135),H.triggerDone()}}class za extends E{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Zarox, the Raging",this.iAttack=this.boof2410,this.iHealth=this.boof81218,this.tribe.push("FR","EL"),this.text=`When Zaxox ${y.dbdtap()} on your turn, you may deal that much damage to an enemy creature.~Allied Nekrium: When a creature is destroyed, Zarox gets ${y.jr9(this.boof124,0)}.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("FR");const n=r.jr4("DM");return n.interactive=!0,n.bonus=this.buffNug(this.lValN([3,6,14]),0,"TP"),r}handleAction(t){this.smack(m.ddf6(t),parseInt(t.param)),S.actionDone(!0)}ddf8(t){if(t.trigger.type==="DM"){const i=W.toDamage(t.event);return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcId===t.creatId&&i.srcCreat.owner===T.activeA}else return!0}jr8(t){if(t.trigger.type==="FR"){if(G.allied("N")){const i=m.creatByTr(t),r=i.jr4("DS");r.bonus=this.buffNug(this.boof124,0,"TS"),r.batch=!0,i.changed=!0,i.anim8("N")}H.triggerDone()}else if(t.trigger.type==="DM"){const i=t.event,r=D.toActions(b.crEnemyActTarg("CARD",this.code,i.dmg.toString()));r.length>0?(r.push(S.noneEndTrigger()),S.ddf5(r)):H.triggerDone()}else t.trigger.type==="DS"&&(this.logAct(!1),m.creatByTr(t).buff(this.boof124,0,t.draw?"N":"X"),H.triggerDone())}}class Za extends E{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Zombie Titan",this.iAttack=this.boof4712,this.iHealth=this.iAttack,this.tribe.push("ZB");const i=this.boof234;this.text=`While ${this.name} is in a side lane, it gets ${y.jr9(i,i,!0)} and Regenerate ${this.level}.`}jr3(t,i){const r=super.jr3(t,i),n=r.addEffect("PS",this.code);return n.area="C",r}enforceEffect(t){if(t.lane===1||t.lane===5){const i=this.boof234;[b.mod("AT",i,t.id),b.mod("HL",i,t.id),b.mod("MH",i,t.id),b.mod("RG",this.level,t.id)].forEach(n=>{t.addModSafe(n)})}else t.removeModSafe(t.id)}}class Ya{cardCache=new Map;mapper={["AAK"]:Mr,["ABB"]:Er,["ABM"]:mt,["AGC"]:mt,["AGK"]:K,["AGP"]:dt,["AGW"]:$,["ASG"]:$,["AMS"]:K,["AFO"]:Le,["ATG"]:he,["ATP"]:Ve,["ART"]:he,["ATS"]:he,["AGM"]:Me,["ALG"]:_e,["AHL"]:Rr,["ALS"]:_e,["ASB"]:Te,["AAA"]:Lr,["ABE"]:dt,["ATZ"]:$,["AEC"]:re,["AVB"]:$,["ARB"]:he,["AEN"]:z,["APM"]:Gr,["AQE"]:$,["AGD"]:Ir,["AFS"]:ve,["AWU"]:ti,["ASQ"]:At,["AOP"]:$,["AMD"]:Wr,["ABR"]:ge,["AFR"]:K,["AMY"]:ge,["ABL"]:He,["ATT"]:pt,["AMP"]:Ze,["AGU"]:z,["AIV"]:le,["ATI"]:K,["BRS"]:Yi,["BTB"]:Vi,["BTH"]:z,["BTI"]:mt,["BTN"]:_e,["BBB"]:z,["BLH"]:he,["BFT"]:$,["BZH"]:$,["BSP"]:le,["BWK"]:Me,["BLW"]:z,["BTD"]:Ee,["BZS"]:K,["BBR"]:$,["BBD"]:$,["BBL"]:$,["BBN"]:$,["BSR"]:mt,["BMY"]:Or,["BSW"]:At,["BWW"]:Pe,["BTM"]:$,["BLP"]:$,["BOS"]:X,["BAW"]:mt,["BWG"]:z,["BTR"]:K,["BWD"]:ze,["BOF"]:Ot,["BSG"]:Ur,["BSS"]:K,["BTS"]:ze,["BST"]:Ie,["BWT"]:$r,["BRF"]:Me,["BRH"]:pt,["BWH"]:Vr,["BWN"]:pt,["BRN"]:Ge,["BZD"]:K,["BFM"]:K,["BSM"]:zr,["CKB"]:mt,["CDT"]:Me,["CMF"]:Fi,["CTL"]:dt,["CCS"]:At,["CDM"]:pt,["CHY"]:z,["CSR"]:Yi,["CSL"]:z,["CGG"]:Nt,["CHV"]:Zr,["CCC"]:dt,["CRS"]:Le,["COD"]:dt,["CHT"]:$,["CTI"]:K,["CHA"]:mt,["CHH"]:K,["CHR"]:Te,["CBB"]:gi,["CDC"]:z,["CFB"]:ge,["CNM"]:z,["CSW"]:K,["CTG"]:z,["CCT"]:li,["CFG"]:fi,["CGF"]:Nt,["CGL"]:At,["CSU"]:$,["CCR"]:mt,["CSB"]:Nt,["CNT"]:$,["CWK"]:z,["CRC"]:le,["CMR"]:Yr,["CYP"]:Kr,["CYC"]:he,["COZ"]:X,["CYS"]:Nt,["CYW"]:re,["CTW"]:$,["CTV"]:$,["CYR"]:pt,["CAG"]:$,["CBS"]:$,["CEX"]:dt,["CIN"]:Qe,["CSH"]:At,["CSG"]:fi,["CTM"]:Xr,["DFM"]:X,["DFR"]:K,["DHC"]:qr,["DHW"]:he,["DRS"]:mt,["DSS"]:ui,["DSW"]:K,["DSE"]:mt,["DSA"]:mt,["DCR"]:dt,["DSK"]:Nt,["DPO"]:$,["DBA"]:K,["DBP"]:z,["DMR"]:z,["DBR"]:z,["DFS"]:dt,["DCS"]:se,["DPG"]:Jr,["DWW"]:Qr,["DDF"]:$,["DGZ"]:dt,["DNK"]:_r,["DBN"]:K,["DOV"]:Ze,["DDS"]:ts,["DIS"]:re,["DSV"]:es,["DDD"]:K,["DPB"]:is,["DZA"]:X,["DZD"]:Te,["DRE"]:re,["DKS"]:Ee,["DGS"]:mt,["DGW"]:rs,["DRD"]:ss,["DBT"]:$,["DTR"]:Te,["DFB"]:Ot,["DMW"]:ve,["DCH"]:re,["DTD"]:z,["DHM"]:pt,["DSZ"]:z,["DYB"]:He,["DBQ"]:as,["DYF"]:$,["DYS"]:ns,["DYL"]:os,["EBW"]:gi,["ESD"]:hs,["ESK"]:le,["EHW"]:ls,["ETN"]:$,["EWE"]:ti,["EVT"]:re,["ENP"]:$,["ESU"]:re,["ENR"]:$,["EPD"]:dt,["EPH"]:cs,["EPS"]:ge,["ESG"]:ds,["ESC"]:ze,["ESP"]:us,["EWT"]:K,["EHN"]:ze,["EWF"]:X,["EWV"]:dt,["EFA"]:$,["EFM"]:ge,["EFP"]:fs,["EFE"]:gs,["EXD"]:$,["FWB"]:z,["FWR"]:z,["FFG"]:z,["FST"]:Nt,["FWK"]:Nt,["FIN"]:$,["FRR"]:dt,["FVA"]:He,["FSL"]:Me,["FWG"]:X,["FWC"]:le,["FFU"]:At,["FLH"]:Fi,["FMS"]:z,["FSM"]:dt,["FOR"]:$,["FBC"]:ge,["FBI"]:he,["FFS"]:At,["FLN"]:$,["FJT"]:$,["FRI"]:mt,["FSS"]:ui,["FLS"]:he,["FSH"]:At,["FFD"]:Nt,["FRV"]:mt,["FSC"]:Nt,["FSP"]:pt,["FPR"]:z,["FFL"]:$,["FGA"]:z,["FGB"]:z,["FGD"]:pt,["FGG"]:ve,["FGO"]:z,["FOL"]:Le,["FPM"]:z,["FPS"]:z,["FWS"]:Te,["FLC"]:mt,["FFM"]:ti,["FRH"]:X,["FMD"]:ms,["FME"]:le,["FSK"]:ps,["FKS"]:ys,["FWT"]:K,["FZS"]:$,["FUN"]:X,["GOS"]:bs,["GHS"]:ve,["GHB"]:li,["GHR"]:As,["GRN"]:fi,["GTH"]:$,["GSC"]:Me,["GMP"]:se,["GTT"]:ks,["GCL"]:z,["GCR"]:$,["GLF"]:mt,["GRW"]:mt,["GSW"]:K,["GVS"]:Nt,["GSS"]:K,["GPV"]:Ts,["GBG"]:Nt,["GGE"]:z,["GGH"]:z,["GRP"]:vs,["GGB"]:Ot,["GGD"]:Ot,["GGR"]:Ot,["GGP"]:Ot,["GGS"]:z,["GGW"]:Ot,["GRM"]:dt,["GHT"]:mt,["GMR"]:Nt,["GSF"]:Ss,["GAS"]:Cs,["HMF"]:pt,["HOS"]:pt,["HTR"]:Pe,["HAR"]:$,["HFA"]:hi,["HOD"]:pt,["HMO"]:Ee,["HRM"]:ws,["HWM"]:Qe,["HVE"]:Ee,["HOX"]:re,["HGS"]:Ds,["HTP"]:xs,["IBF"]:dt,["IGR"]:re,["ITO"]:re,["ISB"]:li,["IKA"]:ei,["IME"]:re,["IDF"]:pt,["IRT"]:Xi,["IVS"]:dt,["ICD"]:Bs,["IWC"]:z,["IBA"]:he,["IHA"]:Me,["IBR"]:gi,["IMD"]:Te,["IMA"]:K,["IZL"]:Hs,["IZR"]:Fs,["IZK"]:he,["IFL"]:Ge,["IFR"]:$,["JPK"]:$,["KDC"]:z,["KSB"]:K,["KAW"]:he,["KOD"]:At,["KBE"]:Ns,["KIW"]:Ps,["KTS"]:di,["KKK"]:Pe,["LOD"]:dt,["LFA"]:Ms,["LVG"]:Pe,["LKP"]:Es,["LGT"]:K,["LLD"]:Je,["LLG"]:Je,["LLS"]:Je,["LLT"]:Je,["LLV"]:Je,["LMD"]:Ze,["LBD"]:K,["LSS"]:ui,["LBL"]:se,["LBC"]:Rs,["LBR"]:$,["LSK"]:Ge,["LTT"]:Pe,["LTM"]:z,["LWY"]:z,["LSP"]:Qe,["LVH"]:Ls,["LTU"]:Ee,["LCE"]:re,["LUC"]:ti,["LMV"]:K,["LHY"]:z,["LYR"]:Ge,["LYS"]:$,["MMH"]:mt,["MMY"]:$,["MHR"]:Gs,["MRF"]:z,["MMG"]:ve,["MOE"]:K,["MXW"]:mt,["MSP"]:re,["MDR"]:Ze,["MMA"]:K,["MMR"]:K,["MMX"]:Nt,["MMI"]:z,["MMO"]:z,["MMV"]:le,["MPH"]:$,["MSC"]:$,["MTS"]:qi,["MTT"]:Is,["MML"]:Ws,["MMW"]:Os,["MBR"]:K,["MDE"]:Ki,["MBP"]:At,["MTD"]:K,["MND"]:At,["MNM"]:se,["NNS"]:$,["NGB"]:mt,["NGW"]:z,["NSL"]:$,["NCF"]:$,["NCM"]:Te,["POZ"]:X,["NCP"]:Ze,["NCS"]:At,["NCW"]:z,["NCV"]:$,["NSW"]:$s,["NDY"]:$,["NDR"]:Us,["NEM"]:re,["NSH"]:dt,["NXA"]:Vs,["NXB"]:Xi,["NXC"]:z,["NXG"]:zs,["NXO"]:Le,["NXP"]:Zi,["NXT"]:_e,["NGT"]:Ot,["NGQ"]:Zs,["NSD"]:X,["NCL"]:dt,["NFF"]:At,["NUG"]:se,["NAM"]:z,["NOZ"]:Nt,["NSY"]:K,["ONN"]:Ys,["OXA"]:Ks,["OXM"]:K,["OXP"]:Xs,["OOZ"]:X,["OBB"]:qs,["OEX"]:$,["OWH"]:js,["ORC"]:Ze,["OBD"]:z,["OFM"]:K,["OJC"]:pt,["OPK"]:K,["OSV"]:Ie,["OSS"]:$,["OWW"]:ve,["OHV"]:At,["ODC"]:Js,["OSP"]:z,["OAP"]:Qs,["OSL"]:z,["OWF"]:dt,["OXS"]:_s,["PHM"]:K,["PPM"]:At,["PSM"]:K,["PLW"]:dt,["POA"]:mt,["POD"]:ze,["POK"]:K,["POT"]:K,["PRG"]:z,["PRI"]:qi,["PHS"]:mt,["PHC"]:dt,["PTB"]:dt,["PLI"]:Ve,["PSC"]:At,["PSH"]:le,["PTR"]:$,["PSG"]:$,["PVA"]:ta,["PMI"]:K,["PMS"]:$,["POX"]:Nt,["PMP"]:$,["PYG"]:li,["PYM"]:ci,["PYS"]:dt,["QSW"]:Ee,["RBH"]:ea,["ROK"]:dt,["REW"]:K,["RPT"]:X,["RHY"]:z,["RTS"]:ge,["RTW"]:Ee,["RHU"]:Ie,["RSC"]:di,["RMB"]:ia,["RPR"]:$,["RLW"]:pt,["RFL"]:ra,["RHC"]:z,["ROG"]:He,["ROU"]:dt,["ROE"]:dt,["RWC"]:ze,["RFA"]:hi,["RWD"]:mt,["RSD"]:ei,["RSE"]:sa,["RBG"]:ci,["RGG"]:le,["RSZ"]:Nt,["RSP"]:z,["RHW"]:pt,["SBF"]:se,["SAP"]:$,["SPL"]:X,["SVO"]:$,["SSE"]:se,["SXP"]:X,["SXD"]:X,["SST"]:ve,["SXT"]:X,["STS"]:dt,["SCS"]:z,["SMD"]:K,["SFS"]:aa,["SHY"]:mt,["SKN"]:na,["SCD"]:z,["SFT"]:z,["SOC"]:$,["SOA"]:$,["SOD"]:$,["SOK"]:Ge,["SOT"]:$,["SDL"]:X,["SAD"]:oa,["SCZ"]:pt,["SFE"]:Pe,["SWS"]:ha,["SHA"]:pt,["SHG"]:$,["SBI"]:gi,["SCC"]:di,["SPB"]:la,["SPD"]:se,["SPG"]:He,["SPM"]:se,["SPT"]:ca,["STD"]:mt,["STB"]:Ge,["SHS"]:Me,["SSP"]:pt,["SGF"]:At,["SKG"]:Zi,["SLS"]:da,["SSD"]:ei,["SDA"]:ua,["SSR"]:le,["SNB"]:$,["SNP"]:dt,["SRD"]:dt,["SSH"]:Ve,["SRM"]:At,["SRH"]:Ot,["SDN"]:K,["SHV"]:$,["SRP"]:$,["SGG"]:K,["SBA"]:z,["SKB"]:z,["SBR"]:z,["SKS"]:Ie,["SEL"]:fa,["STM"]:z,["SWA"]:he,["SFG"]:At,["S01"]:Te,["SPR"]:Ot,["SLG"]:K,["SBD"]:K,["SCV"]:ga,["SFM"]:Nt,["SSN"]:z,["SSM"]:le,["SLH"]:ma,["SPN"]:X,["SSI"]:Qe,["SND"]:di,["SNT"]:Nt,["SRV"]:ci,["STR"]:$,["SPU"]:X,["XYR"]:X,["SPH"]:pa,["SSA"]:At,["STO"]:$,["SDR"]:pt,["SOL"]:ei,["SOV"]:$,["SMS"]:Ee,["SHK"]:Ge,["SIX"]:mt,["SWR"]:ya,["SMN"]:z,["SER"]:ba,["SES"]:Aa,["SFA"]:hi,["STG"]:ka,["SSS"]:ui,["SSK"]:K,["SNK"]:Le,["SWG"]:Ie,["SWM"]:At,["SIV"]:dt,["STN"]:$,["SGI"]:z,["SBG"]:Ta,["SCL"]:z,["SGA"]:hi,["STP"]:$,["SSG"]:le,["SVH"]:ge,["SIN"]:$,["SYL"]:K,["SEV"]:mt,["SMA"]:z,["SML"]:z,["SYO"]:Sa,["TST"]:dt,["TBA"]:se,["TGL"]:$,["TGS"]:z,["TPT"]:$,["TDW"]:pt,["TNL"]:Ca,["TEX"]:Le,["TGN"]:z,["TSM"]:Le,["TUP"]:$,["TOT"]:$,["TAB"]:Ki,["TGI"]:K,["TDS"]:Te,["TSP"]:wa,["TNM"]:z,["TPG"]:Ve,["TMG"]:Ve,["TMM"]:Da,["TRA"]:K,["TRS"]:K,["TRV"]:K,["TRW"]:K,["TBB"]:Fi,["TOB"]:He,["TCN"]:Pe,["TWS"]:z,["TVG"]:Vi,["TXB"]:$,["TXS"]:$,["TFK"]:X,["TFD"]:X,["TFF"]:X,["TCG"]:$,["TMS"]:xa,["TBC"]:Ba,["TWT"]:z,["TRN"]:dt,["TGK"]:ci,["TSL"]:Ha,["TTF"]:X,["TWG"]:fi,["UGM"]:le,["USY"]:pt,["UGL"]:K,["UIC"]:Fa,["ULR"]:Na,["ULG"]:He,["URD"]:z,["USA"]:Nt,["UBL"]:$,["UCM"]:At,["UEM"]:Pa,["UHS"]:Ma,["UIM"]:At,["USS"]:se,["UWL"]:K,["UWS"]:K,["UIW"]:K,["URS"]:$,["UTM"]:K,["UTR"]:pt,["URB"]:ge,["UPM"]:ve,["VIC"]:K,["VIK"]:K,["VRP"]:Ra,["VBK"]:z,["VIN"]:Ve,["VTC"]:z,["VTW"]:Ie,["VGN"]:Nt,["VND"]:K,["VNF"]:mt,["VNS"]:K,["VSK"]:$,["VCH"]:dt,["VGR"]:$,["VSP"]:$,["VTR"]:$,["VGL"]:$,["VGW"]:La,["VOB"]:He,["VCG"]:se,["VPR"]:Ga,["VES"]:ge,["VYE"]:$,["WBY"]:mt,["WBU"]:mt,["WHC"]:z,["WHR"]:Ia,["WMC"]:K,["WMR"]:At,["WMM"]:$,["WTK"]:ei,["WTW"]:z,["WEB"]:Ie,["WGE"]:He,["WTA"]:Wa,["WWP"]:K,["WWR"]:At,["WOD"]:dt,["WFM"]:ve,["WWS"]:Oa,["WBH"]:ti,["WCS"]:$a,["WPD"]:z,["WSE"]:Ua,["WPC"]:dt,["WFB"]:K,["WFS"]:At,["WBG"]:se,["XTE"]:ve,["XCR"]:z,["XDH"]:mt,["XHS"]:Nt,["XHU"]:z,["XRF"]:Va,["XSH"]:At,["XTR"]:K,["XDV"]:Pe,["XRW"]:$,["YWC"]:z,["YNS"]:Ot,["ZXR"]:za,["ZPM"]:At,["ZTR"]:X,["ZTU"]:Nt,["ZIN"]:z,["ZDK"]:K,["ZBS"]:X,["ZST"]:X,["ZMT"]:Za,["ZMB"]:X,["ZSH"]:se};makeCard(t){try{let i;if(t==="SOV3"?i=new Ea(t):t==="SOC3"?i=new K(t):t==="LOD3"?i=new jr(t):t==="GOS3"?i=new va(t):i=new this.mapper[Vt.extractCardCode(t)](t),i.type==="C"){const r=i;r.spice=[{icon:"A",num:r.iAttack},{icon:"H",num:r.iHealth}].concat(r.spice??[])}return i}catch(i){throw console.error("Make card screwed up on code: "+t),i}}getCard(t){let i=this.cardCache.get(t);return i||(i=this.makeCard(t),this.cardCache.set(t,i)),i}}const O=new Ya;class Ka{registry;constructor(){this.registry=[]}find(t){const i=this.registry.find(r=>r.action===t);if(i)return i;throw console.trace(),new Error("Attempted to find non-existing clicker")}entoggle(t,i){const r=this.find(t);r.enabled=i}add(t){this.registry.push(t)}get(t){return this.find(t)}remove(t){const i=this.registry.findIndex(r=>r.action===t);i>-1&&this.registry.splice(i,1)}removeAll(){this.registry=[]}enable(t){this.entoggle(t,!0)}disable(t){this.entoggle(t,!1)}hitTest(t,i,r){if(Y.active)return;let n,c;this.scaleFactor===1?(n=t,c=i):(n=Math.round(t*this.scaleFactor),c=Math.round(i*this.scaleFactor));let f,p=k.clickMode;return p==="M"?f=r:r===at.ForceRight?f=at.Right:p==="T"?f=at.Left:f=at.Right,vi.arrayHit(this.registry,n,c,f)}updateScale(t){t===1||t===0?this.scaleFactor=1:this.scaleFactor=1/t}scaleFactor=1}const ht=new Ka;class Xa{memLoad=!0;step="O";vsAI=!0;p1=this.dud();p2=this.dud();bucketIdx=-1;initConstructed(){this.step="O",this.memLoad&&(this.memLoad=!1,this.p1.mode=k.getStorS("cMode"+"A","CP"),this.p2.mode=k.getStorS("cMode"+"B","CP"),this.p1.mode==="LK"&&(this.p1.mode="CP"),this.p2.mode==="LK"&&(this.p2.mode="CP"),this.vsAI=k.getStorB("cAI",!0)),bt.drawAll()}handleMenuPick(t,i){let r=!0;if(t==="CI"||t==="CV")this.vsAI=t==="CI",k.putStorB("cAI",this.vsAI);else if(t==="CN")r=!1,this.ezDeck(this.p1)?this.ezDeck(this.p2)?this.launchConstructed():(this.step="B",S.ddf5(this.generateDeckPickerActions())):(this.step="A",S.ddf5(this.generateDeckPickerActions()));else if(t==="VC")this.step="V";else{const n=i==="A"?this.p1:this.p2;t==="LK"?(r=!1,Kt.loadFromFile().then(c=>{typeof c=="string"?ri.iAmError(c):(n.deck=c,n.mode=t,n.bucket="File Upload",k.writeStorage("cMode"+i,t),bt.drawAll())})):(n.mode=t,k.writeStorage("cMode"+i,t))}r&&bt.drawAll()}ezDeck(t){return t.mode==="CP"?!1:(t.mode==="CR"?(t.deck=Kt.randomStockDeck(),t.bucket=Kt.bucketHunter(t.deck.name)):t.mode==="CX"&&(t.deck=Kt.treatsAbound(!0),t.bucket="Scramble"),!0)}handleDeckPick(t){const i=Kt.stockDeckByPram(t);this.step==="A"?(this.dekFun(this.p1,i),this.ezDeck(this.p2)?this.launchConstructed():(this.step="B",S.ddf5(this.generateDeckPickerActions()))):(this.dekFun(this.p2,i),this.launchConstructed())}dekFun(t,i){t.deck=i,t.bucket=Kt.bucketHunter(i.name)}previewDeckPick(t){const i=Kt.stockDeckByPram(t);yt.showDeck(Kt.parseDeck(i.cards))}generateDeckPickerActions(t=-1){this.bucketIdx=t;const i=Ue.map((r,n)=>{const c=b.basicAction("DSET");return c.param=n.toString(),c});if(t>-1){const r=Ue[t],n=r.decks.map(c=>{const f=b.basicAction("DECK");f.param=k.enTil(r.id,c.name);const p=b.basicAction("DPVW");return p.param=f.param,[f,p]});return i.concat(n.flat())}return i}launchConstructed(){R.aiMode=this.vsAI,ut.setMode("G"),R.newGame(this.p1.deck.cards,this.p2.deck.cards)}replay(){R.newGame(this.p1.deck.cards,this.p2.deck.cards)}namenom(t){const i=t?this.p1:this.p2;return T.toPlayer(t).name+"'s deck:   "+i.bucket+" - "+i.deck.name}dud(){return{mode:"CP",deck:{cards:[],name:"",factions:[],rating:"N"},bucket:"???"}}}const Lt=new Xa;class qa{deathOrder=[];graveyard=[];reset(){this.graveyard=[],this.deathOrder=[]}purge(){this.deathOrder=[]}getState(){const t={dO:this.deathOrder,gY:this.graveyard};return JSON.stringify(t)}setState(t){const i=JSON.parse(t);this.deathOrder=i.dO,this.graveyard=i.gY}deathCheck(){const t=R.tick();m.qActiveCreats().forEach(n=>{n.health<1&&(y.lawg(n.code," died."),this.smite(n,t))});const i=T.toPlayer(!0),r=T.toPlayer(!1);(i.health<1||r.health<1)&&(i.health<r.health?R.winFlag=-1:R.winFlag=1),H.deathCheck=!0}deathProdder(t,i=void 0){t.health<1?this.deathOrder.push({creatId:t.id,time:i||R.tick()}):this.deathOrder.some(r=>r.creatId===t.id)&&(this.deathOrder=this.deathOrder.filter(r=>r.creatId!==t.id))}findDeathTime(t){const i=this.deathOrder.filter(r=>r.creatId===t).map(r=>r.time);if(i.length!==0)return Math.min(...i)}destroy(t,i,r,n=void 0){t.status==="A"?(y.lawg(t.code," was destroyed by ",i,"."),Y.addFactBoard(r,t.id,t.lane,t.owner),this.smite(t,n)):(console.warn(`Attempted to destroy creature that was not active. Targ creat ${t.code}; Killer creat ${i}`),console.trace())}gravedigger(t="X",i="LA"){if(t==="X"&&i==="LA"){const r=this.graveyard.length;return r===0?"":this.graveyard[k.randInt(0,r)].cardCode}else{let r;if(t==="X")r=this.graveyard;else{const c=T.toBool(t);r=this.graveyard.filter(f=>f.owner===c)}i!=="LA"&&(r=r.filter(c=>D.levelTargetTest(i,parseInt(c.cardCode.slice(3)))));const n=r.length;return n===0?"":r[k.randInt(0,n)].cardCode}}smite(t,i=void 0){t.status="D",this.deathOrder.push({creatId:t.id,time:i||R.tick()}),this.graveyard.push({cardCode:t.code,owner:t.owner}),H.addEvents(W.creature("DIE",t)),me.positionChange(t.owner),Y.addDeathBoard(t.id,t.lane,t.owner),t.owner?G.deathsA.push(t.code):G.deathsB.push(t.code),m.dirt()}}const Ft=new qa;class ja{get youi(){return R.ui}initDeck(t,i){this.youi.deckContents=t,this.youi.deckScroll=0,this.youi.deckSummary=i,ut.setMode("T"),ut.baseMode==="G"&&Pt.logMash()}get canPageDown(){return this.youi.deckContents.length-this.youi.deckScroll>15}get canPageUp(){return this.youi.deckScroll>0}paginate(t){t?this.youi.deckScroll+=15:this.youi.deckScroll-=15}visibleContent(){const t=this.youi.deckScroll;return this.youi.deckContents.slice(t,t+15)}generateContent(t,i,r){const n=D.cardByTarget(t,r);if(R.aiActive||n.sort((c,f)=>{const p=c[0],v=f[0];return v===p?0:p>v?1:-1}),i){const c=n.length;let f=0,p="",v=0;const w=[];for(;f<c;)p===n[f][0]?v++:(f>0&&w.push({cardCode:p,sourceIdx:-1,cardCount:v}),p=n[f][0],v=1),f++;return c>0&&w.push({cardCode:p,sourceIdx:-1,cardCount:v}),w}else return n.map(c=>({cardCode:c[0],sourceIdx:c[1],cardCount:0}))}uniqueContent(t){const i=new Set;return t.filter(r=>i.has(r.cardCode)?!1:(i.add(r.cardCode),!0))}handleShowDeck(t){let i;const r=k.deTil(t.param);if(r[0]==="VE")i=T.activeCardItems(k.txt2bool(r[1]));else{const n=T.getActive();i=t.param==="VR"?n.deck:n.discard}this.showDeck(i)}handleDeckScroll(t){this.paginate(t.param==="D"),bt.drawAll().then(()=>k.setMouse("default"))}showCustomDeck(t,i){this.initDeck(t,!1);const r=this.rightClickers(),n=i.concat(r);return S.ddf5(n),n}showDeck(t){this.initDeck(this.generateContent(t,!0),!0);const i=S.cancelAction();i.key="CNCL",i.param="PM";const r=this.rightClickers();r.push(i),S.ddf5(r)}rightClickers(){return R.aiActive?[]:this.youi.deckContents.map((t,i)=>{const r=b.deckSelectAction("DEET",t.cardCode,i);return r.param=t.cardCode,r})}}const yt=new ja;class Ja{friends;friendText;get browseStack(){return R.ui.detailStack}n(t,i){return`${t}${i}`}friendo(t,i){const r=Array.isArray(i)?i:[i];[1,2,3].forEach(n=>{this.friends[this.n(t,n)]=r.map(c=>this.n(c,n))})}plont(t){this.friends[this.n(t,1)]=[this.n("SDL",1)],this.friends[this.n(t,2)]=[this.n("SPL",2)],this.friends[this.n(t,3)]=[this.n("TFK",3)]}constructor(){const t=this.n("FWC",1),i=this.n("AVB",1);this.friends={[this.n("ASQ",1)]:[this.n("SLG",1),this.n("WEB",1)],[this.n("ASQ",2)]:[this.n("WEB",2)],[this.n("ASQ",3)]:[this.n("WEB",3)],[this.n("CGL",1)]:[this.n("CGF",1)],[this.n("DHC",1)]:[this.n("DYF",1)],[this.n("DTD",1)]:[this.n("TOT",1)],[this.n("EWV",1)]:[this.n("EWF",1)],[t]:[this.n("FWG",1)],[this.n("IBA",1)]:[i],[this.n("IBA",2)]:[i],[this.n("IBA",3)]:[i],[this.n("IBA",4)]:[i],[this.n("MPH",1)]:[t],[this.n("MPH",2)]:[t],[this.n("MPH",3)]:[t],[this.n("NGQ",4)]:[this.n("NSD",4)],[this.n("RHU",1)]:[this.n("RSC",1)],[this.n("ROE",1)]:[this.n("FRH",1),this.n("LVG",1),this.n("LTT",1)],[this.n("SSE",1)]:[this.n("SXD",1)],[this.n("SSE",2)]:[this.n("SXP",2)],[this.n("SSE",3)]:[this.n("SXT",3)],[this.n("SLS",1)]:[this.n("MMY",1)],[this.n("TRA",2)]:[this.n("PTR",2)],[this.n("TRA",3)]:[this.n("PTR",3)],[this.n("TRS",2)]:[this.n("STO",2)],[this.n("TRS",3)]:[this.n("STO",3)],[this.n("TRV",2)]:[this.n("ITO",2)],[this.n("TRV",3)]:[this.n("ITO",3)],[this.n("TRW",2)]:[this.n("STR",2)],[this.n("TRW",3)]:[this.n("STR",3)],[this.n("TGK",1)]:[this.n("SXD",1)],[this.n("TGK",2)]:[this.n("SPL",2)],[this.n("TGK",3)]:[this.n("TTF",3)],[this.n("TSL",1)]:[this.n("FUN",1)],[this.n("ZTU",2)]:[this.n("ZTR",2)]},this.friendo("BLH","LWY"),this.friendo("BTM","BOS"),this.friendo("BWD","TFD"),this.plont("BTS"),this.friendo("BWT","DNK"),this.friendo("CSB","ZBS"),this.friendo("CYS","COZ"),this.friendo("DSK","SPN"),this.friendo("DDF","SXT"),this.friendo("DNK","BWT"),this.friendo("DZD","DZA"),this.friendo("DBQ","BRF"),this.friendo("EPH","EPS"),this.friendo("FST","ZST"),this.friendo("FWK","ZMB"),this.friendo("FGD",["FGA","FGB","FGG","FGO"]),this.friendo("FGG","FGO"),this.friendo("FMD","FME"),this.friendo("FME","FMD"),this.plont("GMR"),this.friendo("IZL",["IFL","IFR","IZR"]),this.friendo("IZR",["IFL","IFR","IZL"]),this.friendo("IZK",["IFL","IFR","IZL","IZR"]),this.friendo("LVH","KBE"),this.friendo("NCM","POZ"),this.friendo("NSW","SPN"),this.friendo("NSH","NDR"),this.friendo("NGQ","NSD"),this.friendo("NFF","TFF"),this.friendo("NOZ","OOZ"),this.friendo("PHC","CYP"),this.plont("PTB"),this.friendo("RWC","RPT"),this.plont("SST"),this.plont("STS"),this.friendo("SSP","DFM"),this.friendo("SDA","HTP"),this.friendo("SLG","WEB"),this.friendo("SND","SPU"),this.friendo("SIV","KBE"),this.friendo("TNL","ZMB"),this.friendo("USS","LWY"),this.friendo("VIC",["IFL","IFR"]),this.friendo("WHR","WHC"),this.plont("WWS"),this.friendo("YNS","XYR");const r=42,n=31,c=40,f=51,p=38,v=52,w=66;this.friendText={["AVB"]:[42,"Hammer"],["BOS"]:[f,""],["BWT"]:[68,"Bron"],["BRF"]:[18,""],["CGF"]:[65,"Fiend"],["CYP"]:[4,""],["COZ"]:[n,""],["DFM"]:[61,"Mimic"],["DNK"]:[8,""],["DZA"]:[59,"Dozer"],["DYF"]:[38,"Infusion"],["EPS"]:[49,"Soldier"],["EWF"]:[18,""],["FWG"]:[44,""],["FWC"]:[28,"Chrysalis"],["FGA"]:[65,"Alpha"],["FGB"]:[77,"Beta"],["FGG"]:[53,"Gamma"],["FGO"]:[57,"Omega"],["FRH"]:[21,""],["FMD"]:[47,"Dragon"],["FME"]:[78,"Egg"],["FUN"]:[49,""],["HTP"]:[38,"Hunting"],["ITO"]:[r,"Torrent"],["IZL"]:[42,"Av Flame"],["IZR"]:[44,"Av Frost"],["IFL"]:[65,"Flame"],["IFR"]:[67,"Frost"],["KBE"]:[83,"Bee"],["LVG"]:[16,""],["LTT"]:[65,"Titan"],["LWY"]:[65,"Wyrm"],["MMY"]:[40,""],["POZ"]:[n,""],["NDR"]:[3,""],["NSD"]:[c,""],["OOZ"]:[n,""],["PTR"]:[r,"Torrent"],["RPT"]:[51,""],["RSC"]:[60,"Scout"],["SPL"]:[f,""],["SXP"]:[f,""],["SXD"]:[c,""],["SXT"]:[p,""],["SDL"]:[c,""],["SLG"]:[25,""],["SPN"]:[w,""],["STR"]:[r,"Torrent"],["SPU"]:[w,""],["XYR"]:[w,""],["STO"]:[r,"Torrent"],["TOT"]:[40,"Tendrils"],["TFK"]:[p,""],["TFD"]:[p,""],["TFF"]:[p,""],["TTF"]:[p,""],["WHC"]:[41,"Courser"],["WEB"]:[78,""],["ZTR"]:[32,"Returned"],["ZBS"]:[v,""],["ZST"]:[v,""],["ZMB"]:[v,""]}}get currentCard(){const t=this.browseStack;return t[t.length-1]}get friendos(){return this.friends[this.currentCard]??[]}get canGoBack(){return this.browseStack.length>1}init(t){if(R.aiActive)return;const i=ut.baseMode==="G";if(i&&Pt.logMash(),R.ui.detailStack=[t],ut.mode!=="R"){ut.setMode("R");const r=b.basicAction("CNCL");r.zone=i?"B":"N",r.param="PM",S.ddf5([r])}else bt.drawAll()}changeLevel(t){const i=this.browseStack,r=i.length-1,n=i[r];i[r]=this.n(Vt.extractCardCode(n),t)}goBack(){this.browseStack.pop()}goToFriend(t){this.browseStack.push(t)}friendTxt(t){const i=this.friendText[t];return i||[3,"I am error"]}goBackAction(){const t=b.basicAction("DTUP");return t.param="DB",t}levelAction(t){const i=b.basicAction("DTUP");return i.param=k.enTil("DL",t),i}friendAction(t){const i=b.basicAction("DTUP");return i.param=k.enTil("DF",t),i}updateDetails(t){const i=k.deTil(t.param),r=i[0];r==="DB"?this.goBack():r==="DF"?this.goToFriend(i[1]):r==="DL"?this.changeLevel(parseInt(i[1])):console.error("Unknown detail arg",t)}}const Se=new Ja,Pi=[1,2,3,4,5,6,7].map(o=>o.toString());class Qa{rarityCache={["L"]:[],["H"]:[],["R"]:[],["C"]:[],["T"]:[]};faction1="X";faction2="X";factionLock=!1;picks=[];picksAsDeck=[];currentPack=[];scrollIdx=0;memLoad=!0;step="O";stats;vsAI=!0;legDraft=!1;fatPacks=!1;overdraft=!1;pageSize=17;rarityFilters;setFilters;pAdeck=[];pBdeck=[];get aiPicking(){return this.vsAI&&this.step==="B"}packOdds=[];constructor(){this.rarityFilters=new Map($e.map(t=>[t,!0])),this.setFilters=new Map(Pi.map(t=>[t,!0])),this.stats=new Wi}getRarity(t){return this.rarityFilters.get(t)??!0}toggleRarity(t){const i=!this.rarityFilters.get(t);return this.rarityFilters.set(t,i),i}getSet(t){return this.setFilters.get(t.toString())??!0}toggleSet(t){const i=t.toString(),r=!this.setFilters.get(i);return this.setFilters.set(i,r),r}get canPageDown(){return this.picksAsDeck.length-this.scrollIdx>this.pageSize}get canPageUp(){return this.scrollIdx>0}paginate(t){t?this.scrollIdx+=this.pageSize:this.scrollIdx-=this.pageSize}initDraft(){this.step="O",this.memLoad&&(this.memLoad=!1,this.vsAI=k.getStorB("dAI",!0),this.legDraft=k.getStorB("legDraft",!1),this.fatPacks=k.getStorB("fatPacks",!1),this.overdraft=k.getStorB("overD",!1),Pi.forEach(t=>{this.setFilters.set(t,k.getStorB("dSet"+t,!0))}),$e.forEach(t=>{this.rarityFilters.set(t,k.getStorB("dRare"+t,!0))})),bt.drawAll()}setFArr(){let t=Pi.filter(i=>this.setFilters.get(i)).map(i=>parseInt(i));return t.length===7&&(t=[]),t}validRarities(){return $e.filter(t=>this.rarityFilters.get(t))}startDraftPicks(){const t=this.setFArr();$e.forEach(i=>{this.getRarity(i)?this.rarityCache[i]=Kt.getDeckCards([i],[],t):this.rarityCache[i]=[]}),$e.every(i=>this.rarityCache[i].length===0)&&(this.rarityCache["C"]=this.fun()),this.packOdds=this.fatPacks?[9,31,40]:[5,25,40],this.faction1="X",this.faction2="X",this.factionLock=!1,this.picks=[],this.picksAsDeck=[],this.scrollIdx=0,this.stats=new Wi,this.resumeDraft("")}resumeDraft(t){if(t){this.picks.push(t),this.picksAsDeck=this.picksToDeck();const n=this.overdraft?60:30;if(this.picks.length===n){this.step==="A"?(this.pAdeck=this.picksAsDeck.slice(),this.step="B",this.startDraftPicks()):(this.pBdeck=this.picksAsDeck.slice(),this.launchDraft());return}const c=O.getCard(t);if(this.aiPicking||this.stats.addStat(c.type,c.faction),!this.factionLock){const f=c.faction;if(this.faction1==="X")this.faction1=f;else if(f!==this.faction1){this.faction2=f,this.factionLock=!0;const p=this.setFArr();this.validRarities().forEach(v=>{this.rarityCache[v]=Kt.getDeckCards([v],[this.faction1,this.faction2],p)})}}}const i=this.generatePack().slice(-1*(6-this.picks.length%5)),r=this.fillPack(i);if(this.aiPicking)this.resumeDraft(r[r.length-1]);else{this.currentPack=r;const n=r.map((c,f)=>{const p=b.draftSelectAction("DRFT",f,!0);return p.param=c,p});ht.removeAll(),S.ddf5(n)}}replay(){this.vsAI?(this.step="B",this.startDraftPicks()):this.launchDraft()}picksToDeck(){const t=[];return this.picks.forEach(i=>{const r=t.findIndex(n=>n.card===i);r===-1?t.push({card:i,num:1}):t[r].num+=1}),t.sort((i,r)=>{const n=O.getCard(i.card+"1"),c=O.getCard(r.card+"1");return n.name.toLowerCase()<c.name.toLowerCase()?-1:1})}generatePack(){const t=this.validRarities();let i;if(this.picks.length===0&&this.legDraft&&t.includes("L"))return Array(6).fill("L");if(this.picks.length===0&&t.includes("H"))i=Array(6).fill("H"),t.includes("L")&&i.push(...this.boost("L"));else if(this.picks.length===0&&t.includes("R"))i=Array(6).fill("R"),t.includes("L")&&i.push(...this.boost("L"));else{const r=t[0]??"C";i=Array(6).fill(r),t.includes("R")&&(i[5]="R",i.push(...this.boost("R"))),t.includes("H")&&i.push(...this.boost("H")),t.includes("L")&&i.push(...this.boost("L"))}return i.slice(-6).reverse()}boost(t){const i=t==="R"?2:t==="H"?1:0,r=this.packOdds[i],n=[];let c=!0;for(;c;)k.randInt(0,99)<r?n.push(t):c=!1;return n}fillPack(t){const i=[];return t.forEach(r=>{const n=this.rarityCache[r].length;let c=!0,f=0;for(;c&&f<100;){const p=this.rarityCache[r][k.randInt(0,n)];i.includes(p)?f++:(i.push(p),c=!1)}}),i}handleMenuPick(t,i){if(t==="DI"||t==="DV")this.vsAI=t==="DI",k.putStorB("dAI",this.vsAI);else if(t==="DN"){this.step="A",this.startDraftPicks();return}else if(t==="DR"){const r=i;k.putStorB("dRare"+i,this.toggleRarity(r))}else t==="DT"?k.putStorB("dSet"+i,this.toggleSet(i)):t==="LD"?(this.legDraft=!this.legDraft,k.putStorB("legDraft",this.legDraft)):t==="GP"?(this.fatPacks=!this.fatPacks,k.putStorB("fatPacks",this.fatPacks)):t==="VD"?this.step="V":t==="OD"&&(this.overdraft=!this.overdraft,k.putStorB("overD",this.overdraft));bt.drawAll()}launchDraft(){R.aiMode=this.vsAI,ut.setMode("G"),R.newGame(this.pAdeck,this.pBdeck)}fun(){return[["ART","SVO","MPH","VSK","MSP","LYS"],["CAG","ATG","WMM","ESU","BWH","CBS"],["DHW","NCF","ROG","EXD","TPT","HOX"],["FLS","STP","BRN","TCG","AQE","VOB"]][k.randInt(0,4)]}}const gt=new Qa;class _a{dirtyA=!0;pvCC=[];init(){[pe,ue].forEach(t=>t.init())}dirtyAll(){[pe,ue,Ct].forEach(t=>{t.dirty=!0}),this.dirtyA=!0}async drawAll(){if(J.simOn)return;const t=ut.mode;this.clearDetails(),t==="G"?await this.drawGame():(ht.removeAll(),t==="R"?await this.drawDetails(S.activeActions):t==="T"?R.aiActive||await this.drawDeck(S.activeActions):(t==="D"?await this.drawDraft(S.activeActions):t==="C"?await this.drawConstructed():t==="I"?await this.drawInfoMenu():t==="X"?await this.drawExit(S.activeActions):t==="S"?await this.drawSwap():await this.drawMenu(),k.setMouse("default")))}async drawGame(){this.clearDeck(),xt.genAnimations();const t=await Y.prep();if(!R.aiActive&&t>0&&(ft.get("hilite").clear(),await Xe.drawActions([]),this.dirtyA=!0),await Promise.all([this.drawHand(T.getLocal()),this.drawPlayers(),this.drawField()]),Y.start(),await Y.aniProm(),await this.drawActions(S.activeActions),this.pvCC.forEach(i=>ht.add(i)),R.winFlag!==0)await this.drawGameOver(),k.setMouse("default"),setTimeout(()=>{ut.mode==="G"&&R.winFlag!==0&&(pe.dirty=!0,this.drawField().then(()=>{this.drawGameOver(!0)}))},1500);else{await this.drawCommonButtons(!0,!0,!0);const i=b.basicAction("DBUG");i.param="AB";const r=new ct(i,410,0,40,35,at.Right);ht.add(r)}await this.drawLogMenu()}async drawGameOver(t=!1){await Ct.drawGameOver(t),t&&await this.drawLogMenu()}async drawHand(t){ue.dirty&&await ue.drawCards(t)}async drawField(){pe.dirty&&await pe.drawCards()}async drawPlayers(){Ct.dirty&&(this.pvCC=await Ct.drawAllPlayers())}async drawDeck(t){const i=t.find(c=>c.zone==="B"),r=ut.baseMode==="G";r&&await Xe.drawActions(i?[i]:[]);const n=ft.get("decklist");if(n.clear(),Ri.makeHaze(n),!r&&i){await oe.drawFactionButton(n,631,712,"A"),await oe.drawSprite(n,"ui/arrow/x.png",631+28,712+12);const p=oe.makeFactButtonClick(631,712,i);ht.add(p)}await Ri.drawActions(t,n),await Ri.drawCards(n),r&&await this.drawCommonButtons(!0,!0,!1)}async drawActions(t){R.aiActive?await Xe.drawActions([]):this.dirtyA&&(ht.removeAll(),ft.get("hilite").clear(),await Promise.all([ue.drawActions(t),pe.drawActions(t),Xe.drawActions(t),Ct.drawActions(t)]),this.dirtyA=!1)}clearGUI(){const t=ft.get("game-ui");return t.clear(),ht.removeAll(),t}async drawDraft(t){ft.get("hilite").clear();const r=this.clearGUI();gt.step==="O"?await Ai.drawDraftMenu(r):gt.step==="V"?await Li.drawAdvancedMenu(r,!1):(await $t.titleText(320,"Drafting: "+$t.pickerName(gt.step==="A",gt.vsAI),r),await Ai.drawList(t,r),await Ai.drawStats(r),await this.drawCommonButtons(!0,!0,!1),await Ai.drawPack(t,r))}async drawMenu(){await Ln.drawMenu(this.clearGUI())}async drawInfoMenu(){await Li.drawExtrasMenu(this.clearGUI())}async drawConstructed(){const t=this.clearGUI();Lt.step==="O"?await ri.drawConstrMenu(t):Lt.step==="V"?await Li.drawAdvancedMenu(t,!0):await this.drawDeckPick(t,S.activeActions)}async drawDeckPick(t,i){ft.get("decklist").clear(),await $t.titleText(337,"Select Deck: "+$t.pickerName(Lt.step==="A",Lt.vsAI),t),t.context.shadowColor="#000000",await ri.drawSets(i,t),await ri.drawList(i,t),t.context.shadowColor="#00000000"}clearDetails(){ft.get("card").clear()}clearDeck(){ft.get("decklist").clear()}async drawDetails(t){ut.baseMode==="G"&&(this.dirtyA=!0,await this.drawActions(t),await this.drawCommonButtons(!0,!0,!1)),ft.get("card").clear();const r=t.find(n=>n.key==="CNCL");r?await Nn.drawDetails(r):console.error("Attempted to show details view with no cancel action")}async drawCommonButtons(t,i,r){let n=979;const c=723,f=ft.get("game-ui");if(r&&f.clear(),t&&(await oe.makeIconButton(f,n,c,"EX"),n-=50,await oe.makeIconButton(f,n,c,"HL"),n-=50),i){const p=k.clickMode;p!=="M"&&await oe.makeIconButton(f,n,c,p==="I"?"TM":"DM")}}async drawLogMenu(){if(Pt.logPos==="M"&&!R.aiActive){const t=ft.get("game-ui");await oe.makeIconButton(t,2,2,"LG")}}async drawExit(t){const i=ft.get("card");await $t.drawButton(i,151,488,t[1],"Quit Game",24,!1),await $t.drawButton(i,478,488,t[0],"Resume",52,!1)}async drawSwap(){const t=ft.get("decklist");t.clear(),t.context.fillStyle="#000000",t.context.fillRect(0,0,k.gameWidth,k.gameHeight);const i=T.getActive(),r="#AAF0C1",n=b.basicAction("USWP");n.param="PM",await Ct.drawPlayer(i,t,200,300);const c={fontSize:22,colour:r};await Ct.drawText(t,"Player "+(i.isPlayerA?"1":"2"),480,360,c),await Ct.drawText(t,"Click to start turn",480,420,c);const f=new ct(n,0,0,k.gameWidth,k.gameHeight,at.Both);ht.add(f)}clearAll(){Pt.allCanvases.forEach(t=>{ft.get(t).clear()})}}const bt=new _a;class tn{positionChange(t){m.creatByTarget().forEach(i=>{i.enforceEffects("PS",t)}),T.enforceEffects(t)}defenderChange(t){m.qPlayerCreats(t).forEach(r=>{r.effects.filter(n=>n.watch==="DF").forEach(n=>O.getCard(n.logicCode).enforceEffect(r))})}playerHealthChange(){m.qActiveCreats().forEach(t=>{t.enforceEffects("PH")})}enforceAllNonPositionCreatureEffects(){m.qActiveCreats().forEach(i=>{i.enforceEffects("AT"),i.enforceEffects("AR"),i.enforceEffects("CH"),i.enforceEffects("DF",i.owner)})}}const me=new tn;class en{getC(t){return m.jr5(t)}creature(t,i){return{code:t,creatId:i.id}}creatHeal(t,i){return{code:"CHL",creatId:t.id,healAmt:i}}damage(t,i,r,n,c,f,p){let v;return f instanceof ai?v=f.id:v=f,{code:"DMG",battle:t,dmg:i,life:r,isCreatSrc:n,isCreatTarg:c,target:v,srcId:p?.id}}enterField(t){return{code:"ENT",creatId:t.id,forged:!1,formation:!1}}playCard(t,i){return{code:"PLC",playerA:i,cardCode:t}}player(t,i){return{code:t,playerA:i}}playerHeal(t,i){return{code:"PHL",playerA:t,healAmt:i}}replaced(t,i){return{code:"RPL",creatId:t.id,replCreatId:i.id}}toCreature(t){const i=t;return{code:i.code,creatId:i.creatId,creature:this.getC(i.creatId)}}toDamage(t){const i=t;let r,n,c;return i.isCreatTarg?c=this.getC(i.target):n=T.toPlayer(i.target),i.isCreatSrc&&(r=this.getC(i.srcId)),{code:i.code,battle:i.battle,dmg:i.dmg,life:i.life,isCreatSrc:i.isCreatSrc,srcId:i.srcId,target:i.target,isCreatTarg:i.isCreatTarg,srcCreat:r,hurtCreat:c,hurtPlayer:n}}toEnterField(t){const i=t;return{code:i.code,creatId:i.creatId,forged:i.forged,formation:i.formation,creature:this.getC(i.creatId)}}toReplaced(t){const i=t;return{code:i.code,creatId:i.creatId,creature:this.getC(i.creatId),replCreatId:i.replCreatId,replCreat:this.getC(i.replCreatId)}}}const W=new en;class rn{field=[];birthOrder=[];laneIdx=[1,2,3,4,5];reset(){this.field=[],this.birthOrder=[]}purge(){this.field=this.field.filter(t=>t.status==="A"),this.birthOrder=[]}getState(){const t={field:this.field.map(i=>i.getState()),bO:this.birthOrder};return JSON.stringify(t)}dirt(){J.simOff&&(pe.dirty=!0,bt.dirtyA=!0)}setState(t){const i=JSON.parse(t);this.field=i.field.map(r=>new ai(r)),this.birthOrder=i.bO}jr5(t){const i=this.searchById(t);if(i)return i;throw console.error("naughty creature id",t),new Error("Could not find creature by id")}creatByTr(t){return this.jr5(t.creatId)}creatByLane(t,i){const r=this.searchByLane(t,i);if(r)return r;throw console.error("naughty creature lane ",t,i),new Error("Could not find creature by lane")}ddf6(t){const i=this.searchByFSA(t);if(i)return i;throw console.error("naughty FSA",t),new Error("Could not find creature by FSA")}searchById(t){return this.field.find(i=>i.id===t)}searchByLane(t,i){return this.field.find(r=>r.lane===t&&r.owner===i&&r.status==="A")}searchByFSA(t){return this.searchByLane(t.lane,t.playerA)}creatByTarget(t){let i=this.field;if(t){if(t.player!=="X"){const r=T.toBool(t.player);i=i.filter(n=>n.owner===r)}if(t.creatStatus!=="A"){const r=this.creatStatusTargetToCS(t.creatStatus);i=i.filter(n=>n.status===r)}if(!k.isUn(t.lanes)){const r=D.lanesToArr(t.lanes);i=i.filter(n=>r.includes(n.lane))}if(k.isUn(t.maxAttack)||(i=i.filter(r=>r.attack<=t.maxAttack)),t.notMe&&(i=i.filter(r=>r.id!==t.notMe)),t.victims){const r=k.deTil(t.victims);i=i.filter(n=>r.includes(n.id))}if(t.tribe!=="AN"&&(i=i.filter(r=>r.isTribe(t.tribe))),t.canLevel&&(i=i.filter(r=>O.getCard(r.code).canLevel())),t.level!=="LA"){const r=D.levelTargetToLevel(t.level);i=i.filter(n=>r.includes(n.level))}t.cardCode&&(i=i.filter(r=>O.getCard(r.code).cardCode()===t.cardCode)),t.canDefender&&(i=i.filter(r=>!r.negateDefender)),t.hasDefender&&(i=i.filter(r=>r.defender)),t.canArmor&&(i=i.filter(r=>!r.negateArmor)),t.hasArmor&&(i=i.filter(r=>r.armor>0)),t.canMove&&(i=i.filter(r=>!r.negateMobility)),t.hasMobility&&(i=i.filter(r=>r.mobility>0)),t.hasPoison&&(i=i.filter(r=>r.poison>0)),t.canRegen&&(i=i.filter(r=>!r.negateRegen)),t.hasRegen&&(i=i.filter(r=>r.regen>0)),t.faction!=="X"&&(i=i.filter(r=>r.faction===t.faction))}return i}cst2cs={["A"]:()=>{throw new Error("goof passed any to field state target mapper")},["V"]:()=>"A",["D"]:()=>"D",["R"]:()=>"R"};creatStatusTargetToCS(t){return this.cst2cs[t]()}emptyLanes(t){return this.laneIdx.filter(i=>!this.field.find(n=>n.owner===t&&n.lane===i&&n.status==="A"))}oppositeLane(t){return 6-t}adjacentPositions(t){return[[2],[1,3],[2,4],[3,5],[4]][t-1]}canMove(t){return t.mobility>0&&t.mobilityAvailable&&(!t.sleeping||t.aggressive)?this.emptyLanes(t.owner).filter(i=>Math.abs(t.lane-i)<=t.mobility):[]}fling(t,i){const r=this.emptyLanes(t.owner),n=r.length;n>0&&t.move(r[k.randInt(0,n)],i)}birth(t,i,r,n=0,c,f=void 0){if(i==="S"){const L=this.emptyLanes(r);if(L.length===0)return;n=L[k.randInt(0,L.length)]}else if(i==="P"&&!this.emptyLanes(r).includes(n))return;const p=typeof t=="string"?O.getCard(t):t,v=p.jr3(r,n);this.dirt(),r===T.activeA&&G.birthRegistrar(v.id),Y.addFactBoard(c,v.id,v.lane,r);let w;if(i==="F"||i==="R"){if(w=this.searchByLane(n,r),w){if(J.simOff){const L=[w.code," was replaced"];i==="R"&&L.push(" with ",v.code),L.push("."),y.lawg(...L)}w.status="R",H.addEvents(W.replaced(v,w))}if(i==="F"){let L=2;r===T.isLocalA&&(L=S.playPosition()-R.ui.handScrollLeft),Y.addForgeMove(v.id,L,n,r,w)}}this.field.push(v);const x=W.enterField(v);return x.forged=i==="F",p.formation&&v.lane!==1&&v.lane!==5&&(x.formation=v.adjacent.every(L=>!k.isUn(this.searchByLane(L,r)))),this.birthOrder.push({creatId:v.id,time:f||R.tick()}),H.addEvents(x),v.enforceEffects("PH"),me.positionChange(r),v}findBirthTime(t){const i=this.birthOrder.filter(r=>r.creatId===t).map(r=>r.time);if(i.length!==0)return i.length>1&&console.warn("wery curious, more than one birth record for creat "+t),i[0]}qActiveCreats(){return this.creatByTarget(b.crTarg())}qPlayerCreats(t){const i=b.crTarg();return i.player=T.toTarget(t),this.creatByTarget(i)}ddf1(){return this.creatByTarget(b.crFriendTarg())}qEnemyCreats(){return this.creatByTarget(b.crEnemyTarg())}}const m=new rn;class sn{creatFightState(t,i){return t?i===1||t.defender||t.sleeping&&!t.aggressive?1:i===0?2:t.extraBattles>0?(t.extraBattles-=1,2):1:0}dukeItOut(t){if(t.aggState>0){let i=0;if(t.oppState>0){const r=t.aggState===2&&t.aggCreat.breakthrough;i=t.oppCreat.hurtBattle(t.aggAtt,t.aggCreat,r)}else t.aggState===2&&(i=t.aggAtt);i>0&&T.hurtBattle(!t.aggCreat.owner,i,t.aggCreat)}}genNugget(t,i,r,n,c){return{aggState:t,aggCreat:r,oppState:i,oppCreat:n,aggAtt:c,lurch:!1,slash:!1,armHit:!1}}nugPair(t,i,r,n){return[this.genNugget(t,i,r,n,r?.attack||0),this.genNugget(i,t,n,r,n?.attack||0)]}simbaCF(t,i,r,n){if(i.slash=!0,t.lurch&&t.aggCreat.breakthrough){const c=Math.max(0,r-t.oppCreat.health);c>0&&this.simbaP(n,c,!0)}}simbaC(t,i,r){if(t.aggState===0)return;let n=!1;if(t.aggState===2?(t.lurch=!0,n=!0):t.oppState===2&&(n=!0),n&&t.aggAtt>0)if(t.oppState>0){const c=Math.max(t.oppCreat.armor-t.oppCreat.armorDmg,0);if(c>0){i.armHit=!0;const f=t.aggAtt-c;f>0&&this.simbaCF(t,i,f,r)}else this.simbaCF(t,i,t.aggAtt,r)}else this.simbaP(r,t.aggAtt,t.lurch)}simbaP(t,i,r){if(!(i<1||!r||t[1]&&t[2]))if(t[0]>0){t[1]=!0;const n=Math.min(t[0],i);t[0]=t[0]-n,i-n>0&&(t[2]=!0)}else t[2]=!0}fight(t){J.simOff&&y.add("FIGHT!");let i=2,r=1;t&&(G.mainBattle=!1,i=0,r=0);const n=T.activeA,c=!n,f=[],p=T.makeAnim(n),v=T.makeAnim(c);m.laneIdx.forEach(x=>{const L=m.searchByLane(x,n),V=m.searchByLane(6-x,c),Q=this.creatFightState(L,i),I=this.creatFightState(V,r);if(Q===2||I===2){const tt=this.nugPair(Q,I,L,V);this.simbaC(tt[0],tt[1],v),this.simbaC(tt[1],tt[0],p),Q===2&&G.ffs++,f.push(tt[0],tt[1])}});let w;J.simOff&&Y.on&&f.some(x=>x.lurch)?(this.barking&&k.dogBark(),f.forEach(x=>{x.lurch&&Y.addFight(x.aggCreat),x.slash&&Y.addSlash(x.aggCreat),x.armHit&&Y.addArmorC(x.aggCreat)}),p[1]&&Y.addArmorP(n),v[1]&&Y.addArmorP(c),p[2]&&Y.addSwipe(n),v[2]&&Y.addSwipe(c),w=pe.drawFight()):w=Promise.resolve(),w.then(()=>{f.forEach(x=>this.dukeItOut(x)),me.playerHealthChange(),Ft.deathCheck(),H.type="C0",S.actionDone()})}barking=!0}const ji=new sn;class an{aiMode=!1;aiActive=!1;winFlag=0;ui=this.freshUI();idnum=0;clock=0;genId(){return this.idnum++,"@"+this.idnum.toString(36)}tick(){return this.clock++,this.clock}getState(){return{i:this.idnum,t:this.clock}}setState(t,i){this.idnum=t,this.clock=i}newGame(t,i){this.idnum=0,this.clock=0,ji.barking=k.options.bark,T.activeA=k.randInt(0,2)===0,this.aiActive=!T.activeA&&this.aiMode,T.isLocalA=this.aiMode||T.activeA,S.actionHistory=[],this.aiMode&&(J.statPrep(),J.turnSims=0,J.turnTime=0),m.reset(),Ft.reset(),H.reset(),bt.dirtyAll(),this.ui=this.freshUI(),G.firstTurn=!0,this.winFlag=0;const r=T.nameOSaurus();if(T.initPlayer(!0,t,"Forgy McGhee",25),T.initPlayer(!1,i,r[0],r[1]),Pt.changeSize(),y.setup(),Y.on&&!Y.initialzed){y.debug("Loading animations, please wait.");let n=!1;const c=setTimeout(()=>{n=!0,y.debug("Slow load. Animations disabled until finished."),this.go()},5e3);Y.initProm().then(()=>{n||(clearTimeout(c),this.go())})}else this.go()}go(){y.add("Ready...FIGHT!"),xt.startState(T.getLocal()),G.startTurn()}freshUI(){return{handScrollLeft:0,detailStack:[],deckContents:[],deckScroll:0,deckSummary:!1}}}const R=new an;class nn{laneIdx=[1,2,3,4,5];state=[];addCard(t,i,r=!1){const n=t.hand.push(i);if(this.hd(t),this.ok(t)){const c=n-1;this.state.push({status:"A",ccode:i,idx:c,vIdx:r?5:-1})}}cardDiscard(t,i){if(t.discard.push(t.hand.splice(i,1)[0]),this.phd(t),this.ok(t)){const r=this.currHand()[i];r.status="D"}}cardDiscardAll(t){t.discard=t.discard.concat(t.hand),t.hand=[],this.phd(t),this.ok(t)&&this.currHand().forEach(r=>{r.status="D"})}hd(t){this.local(t)&&(ue.dirty=!0)}phd(t){this.local(t)&&(Ct.dirty=!0,ue.dirty=!0)}cardPlayOrLevel(t,i,r,n=!1){if(t.hand.splice(i,1),this.hd(t),this.ok(t)){const c=this.currHand();c[i].status=n?"O":r?"V":"D"}}currHand(){return this.state.filter(t=>t.status==="N"||t.status==="A"||t.status==="L")}genAnimations(){if(!Y.on)return;let t=!1,i=0,r=!1;const n=T.getLocal();this.state.forEach(p=>{this.posInView(p.vIdx)&&((p.status==="D"||p.status==="V"||p.status==="O")&&(Y.addHandDiscard(this.key(!1,p.idx,p.vIdx,-5),p.ccode,p.vIdx),t=!0,r=!0),p.status==="V"||p.status==="L"?(Y.addLevel(this.key(!1,p.idx,p.vIdx,-5),p.vIdx),t=!0):p.status==="O"&&Y.addOverload(this.key(!1,p.idx,p.vIdx,-5),p.vIdx))});let c=this.left();c>0&&n.hand.length-c<5&&(c=Math.max(0,n.hand.length-5),R.ui.handScrollLeft=c),this.currHand().map((p,v)=>({guts:p,newIdx:v,newVIdx:this.viewPos(v,c)})).forEach(p=>{if(p.guts.vIdx!==p.newVIdx){const v=this.key(!0,p.newIdx,p.guts.vIdx,p.newVIdx);p.guts.vIdx<0&&p.newVIdx>4?(Y.addHandFling(v,p.guts.ccode,i),i++,t=!0):(this.posInView(p.guts.vIdx)||this.posInView(p.newVIdx))&&(Y.addHandMove(v,p.guts.ccode,p.guts.vIdx,p.newVIdx,r),t=!0)}}),t&&this.genState(n)}genState(t){if(this.ok(t)){const i=this.left();this.state=t.hand.map((r,n)=>({ccode:r,idx:n,status:"N",vIdx:this.viewPos(n,i)}))}}key(t,i,r,n){return k.enTil(k.bool2txt(t),i,r,n)}left(){return R.ui.handScrollLeft}levelInHand(t,i,r){if(t.hand[i]=r,this.hd(t),this.ok(t)){const n=this.currHand();n[i].status="L"}}local(t){return t.isPlayerA===T.isLocalA}ok(t){return J.simOff&&Y.on&&this.local(t)}posInView(t){return!(t>4||t<0)}startState(t){this.genState(t),this.state.forEach(i=>{i.vIdx=-1})}viewPos(t,i){return t-i}}const xt=new nn;class on{loglist;you=!0;localPlayerKey="";oppPlayerKey="";localPlayerSpan="";oppPlayerSpan="";constructor(){this.loglist=document.getElementById("loglist")}setup(){this.you=T.isLocalA,this.localPlayerKey=this.you?"^pa":"^pb",this.oppPlayerKey=this.you?"^pb":"^pa",this.localPlayerSpan=this.span(T.toPlayer(this.you).name,"green"),this.oppPlayerSpan=this.span(T.toPlayer(!this.you).name,"red")}addLi(t){const i=document.createElement("li");i.innerHTML=t,this.loglist.appendChild(i),this.scrull(i)}scrull(t){t||(t=this.loglist.lastChild),t.scrollIntoView({behavior:"smooth",block:"end"})}span(t,i,r=""){const n=r.length>0?` onclick="sfapi.details('${r}')"`:"";return`<span class="${i}"${n}>${t}</span>`}add(t){this.addLi(t)}debug(t,i=!0){(i||k.options.debug)&&this.addLi(this.span(t,"debug"))}clearAll(){this.loglist.innerHTML=""}crdRgx=/^[A-Z\d]{3}[1234S]$/;lawg(...t){if(J.simOn)return;let i="";t.forEach(r=>{if(typeof r=="string")r.match(this.crdRgx)===null?i+=r:i+="^c"+r;else{const n=T.toBool(r);i+="^p"+(n?"a":"b")}}),this.parse(i)}factMap={["A"]:"all",["N"]:"nek",["T"]:"tem",["U"]:"ute"};parseCards(t){let i=!0;for(;i;){const r=t.indexOf("^c");if(r===-1)i=!1;else{const n=t.slice(r+2,r+6);if(n==="POIS")t=t.replaceAll("^c"+n,this.span("Poison","green"));else{const c=O.getCard(n);t=t.replaceAll("^c"+n,this.span(`${c.name} ${c.level}`,this.factMap[c.faction],n))}}}return t}parse(t){const r=t.replaceAll(this.localPlayerKey,this.localPlayerSpan).replaceAll(this.oppPlayerKey,this.oppPlayerSpan),n=this.parseCards(r);this.add(n)}cardText(t){let i;if(t.type==="C"){const r=t,n=[];r.iRegen>0&&n.push("Regenerate "+r.iRegen),r.iArmor>0&&n.push("Armor "+r.iArmor),r.iMobile>0&&n.push("Mobility "+r.iMobile),r.iBT&&n.push("Breakthrough"),r.iDefend&&n.push("Defender"),r.iAggro&&n.push("Aggressive"),r.consistent&&n.push("Consistent"),n.length>0&&n.push(""),i=n.join(". ")+t.text}else i=t.text;return(t.free?"Free. ":"")+(t.overload?"Overload. ":"")+i}cardTextSplit(t){const i=[];if(t.free&&i.push("Free"),t.consistent&&i.push("Consistent"),t.overload&&i.push("Overload"),t.type==="C"){const r=t;r.iRegen>0&&i.push("Regenerate "+r.iRegen),r.iArmor>0&&i.push("Armor "+r.iArmor),r.iMobile>0&&i.push("Mobility "+r.iMobile),r.iBT&&i.push("Breakthrough"),r.iDefend&&i.push("Defender"),r.iAggro&&i.push("Aggressive")}if(t.text.length>0&&i.push(...t.text.split("~")),t.level===1){const r=t.cardCode(),n=Ii.find(c=>c[0]===r);if(n){let c;const f=n[1];f.length===2&&f[0]===f[1]?c="2x "+O.getCard(`${f[0]}1`).name:c=f.map(p=>O.getCard(`${p}1`).name).join(", "),i.push("Solbind: "+c)}}return i}factionText(t){switch(t){case "A":return"Alloyin";case "N":return"Nekrium";case "T":return"Tempys";case "U":return"Uterra";case "X":return""}}cardTypeText(t){return t==="C"?"Creature":"Spell"}rarityText(t){switch(t){case "C":return"Common";case "R":return"Rare";case "H":return"Heroic";case "L":return"Legendary";case "T":return"Token"}}levelGateText(t){return t===1?"level 1 ":t===2?"level 2 or lower ":""}jr9(t,i,r=!1){return t!==0&&i!==0?`${this.bufferson(t,!0)}${r?",":" and"} ${this.bufferson(i,!1)}`:t!==0?this.bufferson(t,!0):this.bufferson(i,!1)}bufferson(t,i){return`${t>0?"+":""}${t} ${i?"attack":"health"}`}dbdtac(t=-1){return`deals battle damage to a ${t===-1?"":this.levelGateText(t)}creature`}dbdtap(){return"deals battle damage to a player"}daluac(t=!1){return(t?"D":"d")+"iscard and level up a card"}forglied(t){return t==="X"?"Forge":`Allied ${this.factionText(t)}`}fastName(t){t.length===3&&(console.warn("HEY a 3 char card code was passed to fastName, why?: "+t),t=`${t}1`);const i=O.getCard(t);return i.name+" "+i.level}pName(t){return t?"A":"B"}tokName(t){return`${t.iAttack}/${t.iHealth} ${t.name}`}tribeT={["AN"]:"Any",["AB"]:"Abomination",["AG"]:"Angel",["AS"]:"Asir",["BR"]:"Bear",["BE"]:"Beast",["CT"]:"Cat",["CR"]:"Chrysalis",["CY"]:"Cyborg",["DF"]:"Darkforged",["DM"]:"Demon",["DN"]:"Dinosaur",["DG"]:"Dragon",["DK"]:"Drakin",["DY"]:"Dryad",["ER"]:"Earth",["EL"]:"Elemental",["EN"]:"Energeist",["FY"]:"Fairy",["FR"]:"Fire",["FB"]:"Forgeborn",["FT"]:"Frost",["GT"]:"Giant",["GN"]:"Gnome",["GL"]:"Golem",["GG"]:"Grimgaunt",["GD"]:"Guardian",["HM"]:"Human",["HY"]:"Hydra",["IC"]:"Ice",["IN"]:"Insect",["LT"]:"Lightning",["LP"]:"Lupin",["MT"]:"Manticore",["MC"]:"Mech",["MM"]:"Metamind",["NG"]:"Naga",["OZ"]:"Ooze",["PX"]:"Phoenix",["PL"]:"Plant",["RM"]:"Ram",["RB"]:"Robot",["SY"]:"Satyr",["SE"]:"Seraph",["SH"]:"Shaman",["SS"]:"Shapeshifter",["SK"]:"Skeleton",["SN"]:"Snake",["SP"]:"Spider",["ST"]:"Spirit",["TG"]:"Tigrin",["TK"]:"Tuskin",["VP"]:"Vampire",["WD"]:"Wanderer",["WT"]:"Water",["WB"]:"Web",["WN"]:"Wind",["WF"]:"Wolf",["WR"]:"Wurm",["YT"]:"Yeti",["ZB"]:"Zombie"};tribeText(t){return this.tribeT[t]}}const y=new on,Ye=(o,t)=>o.includes(t),Ji="https://github.com/grousewood-games",mi="https://grousewood-games.github.io/solforge/docs/";class hn{sneak(){Pt.playmatSetup(),Y.init()}handleMainMenuButton(t){t.param==="D"?(ut.setMode("D"),k.options.wasDrafting=!0,this.sneak(),gt.initDraft()):t.param==="C"?(ut.setMode("C"),k.options.wasDrafting=!1,this.sneak(),Lt.initConstructed()):t.param==="I"?(ut.setMode("I"),bt.drawAll()):this.url("deckbuilder.html")}handleMenuButton(t){const i=k.deTil(t.param),r=i[0];let n=!0;if(r==="RP")n=!1,y.clearAll(),k.options.wasDrafting?gt.replay():Lt.replay();else if(r==="MM")ut.setMode("M"),y.clearAll();else if(Ye(["CN","CP","CX","CR","CI","CV","VC","LK"],r))n=!1,Lt.handleMenuPick(r,i[1]);else if(Ye(["DN","DR","DI","DV","LD","GP","OD","DT","VD"],r))n=!1,gt.handleMenuPick(r,i[1]);else if(r==="VB")gt.step="O",Lt.step="O";else if(Ye(["alloyin","nekrium","tempys","uterra","vanilla"],r))k.options.playmat=r,k.writeStorage("playmat",r);else if(Ye(["BBM","BBS","BBW"],r)){const c=r.slice(2);J.brain=c,k.writeStorage("brain",c)}else Ye(this.prefs,r)?this.prefUpdater(r,""):Ye(["AN","HH","CH","BB","BC","RF1","RF3","RF5","RFA","RFJ","RFO"],r)?k.togOptViaPram(r):r==="LM"?Pt.cycle():r==="RO"?this.setDefaults(!k.options.wasDrafting):r==="RU"?(n=!1,this.halp()):r==="FQ"?(n=!1,this.url(mi+"faq/development.html")):r==="KF"?(n=!1,this.url(mi+"kaelforge.html")):r==="GW"?(n=!1,this.url(Ji)):r==="SF"?(n=!1,this.url("https://solforgefusion.com/")):r==="VR"?(n=!1,this.url(Ji+"/solforge/releases/tag/"+k.ver)):(n=!1,console.error("missing handler for menu button param "+t.param));n?bt.drawAll():k.setMouse("default")}handleUIButton(t){if(t.param==="DM")k.clickMode="I",bt.dirtyA=!0,bt.drawAll();else if(t.param==="TM")k.clickMode="T",bt.dirtyA=!0,bt.drawAll();else if(t.param==="EX")ut.setMode("X"),Pt.logMash(),S.ddf5(this.generateExitActions());else if(t.param==="LG"){if(Pt.logPos==="M"){const i=!Pt.menuOpen;Pt.logViz(i),i&&y.scrull()}k.setMouse("default")}else t.param==="HL"?this.halp():t.param==="AH"?this.url(mi+"rules/game-interface.html#advanced-options"):console.error("missing handler for common button param "+t.param)}generateExitActions(){const t=b.basicAction("CANC");return t.param="PM",[t,b.menuButtonAction("MM")]}halp(){this.url(mi+"rules/game-overview.html")}url(t){window.open(t),k.setMouse("default")}setDefaults(t){J.brain="S",k.writeStorage("brain","S"),this.prefSteamroll(!1),t&&(["rfG1","rfAv","rfG3","rfG5"].forEach(i=>{k.options[i]||k.toggleOption(i)}),["rfJk","rfOf"].forEach(i=>{k.options[i]&&k.toggleOption(i)}))}notDefault(t){let i=!1;return J.brain==="S"&&this.prefs.map(r=>this.prefKey(r)).every(r=>J.prefs[r]==="2")&&(t?i=["rfG1","rfAv","rfG3","rfG5"].every(r=>k.options[r])&&["rfJk","rfOf"].every(r=>!k.options[r]):i=!0),!i}prefKey(t){let i;switch(t){case "BPK":i="deck";break;case "BPH":i="hand";break;case "BPD":i="lifed";break;case "BPG":i="lifeg";break;case "BPM":i="minion";break;case "BPN":i="menace";break;case "BPP":i="potent";break;default:throw new Error("bomb")}return i}prefUpdater(t,i){const r=this.prefKey(t);let n;if(i)n=i;else{const c=J.prefs[r];c==="1"?n="2":c==="2"?n="3":n="1"}J.prefs[r]=n,k.writeStorage(t,n)}prefSteamroll(t){this.prefs.forEach(i=>{const r=t?k.getStorS(i,"2"):"2";this.prefUpdater(i,r)})}prefs=["BPK","BPH","BPG","BPD","BPM","BPN","BPP"]}const We=new hn;class ln{stack=["M"];setMode(t){this.deetMode(t)||t==="X"||t==="S"?this.stack.push(t):(this.stack=[t],t==="G"?(ft.get("game-ui").clear(),Pt.setBackground("playmat")):t==="D"||t==="C"||t==="I"?(ft.get("game-ui").clear(),Pt.setBackground("blueface")):t==="M"&&(bt.clearAll(),Pt.setBackground("mainmenu")))}popMode(){this.stack.pop()}get mode(){const t=this.stack;return t[t.length-1]}get isDetailMode(){return this.deetMode(this.mode)}get baseMode(){return this.stack[0]}deetMode(t){return t==="R"||t==="T"}}const ut=new ln,Qi="Delta Delta Delta";class cn{constructor(){this.loader=document.getElementById("fileupload"),this.loader.addEventListener("change",t=>this.loadInputHandler(t))}shuffleDeck(t){const i=T.toPlayer(t),r=[],n=[];if(i.deck.forEach(c=>{O.getCard(c).consistent?r.push(c):n.push(c)}),r.length===0)this.shuffle(i.deck);else{this.shuffle(n);const c=20-r.length,f=r.concat(n.slice(0,c));this.shuffle(f),i.deck=n.slice(c).concat(f)}}shuffle(t){const i=t.length,r=(n,c)=>{const f=t[n];t[n]=t[c],t[c]=f};if(i>0){let n,c;const f=i*4;for(let p=0;p<f;p++)n=k.randInt(0,i),c=k.randInt(0,i),r(n,c)}}randomDeck(t,i,r){const n=t===i;let c;return n?c=this.ripper(t,r,30):c=this.ripper(t,r,15).concat(this.ripper(i,r,15)),{cards:c,name:"A Dog's Breakfast",factions:n?[t]:[t,i],rating:"N"}}treatsAbound(t){const i=t?1:k.randInt(1,4);return this.randomDeck(this.randFaction(),this.randFaction(),i)}randFaction(){return si[k.randInt(0,4)]}filteredStock(){const t=(r,n)=>r?n:void 0,i=k.options;return[t(i.rfAv,"A"),t(i.rfG1,"1"),t(i.rfG3,"3"),t(i.rfG5,"5"),t(i.rfJk,"J"),t(i.rfOf,"O")].filter(Boolean)}randomStockDeck(){const t=this.filteredStock();if(t.length===0)return{name:Qi,factions:["A"],rating:"N",cards:[{card:"FGD",num:30}]};let i=Ue.map(n=>n.decks).flat();t.length<6&&(i=i.filter(n=>t.includes(n.rating)));const r=k.randInt(0,i.length);return i[r]}stockDeckByName(t,i){let r;if(Ue.some(n=>n.id===t?n.decks.some(c=>c.name===i?(r=c,!0):!1):!1),r)return r;throw new Error("Stock Deck not found: Set: "+t+"; Name: "+i)}stockDeckByPram(t){const i=k.deTil(t);return this.stockDeckByName(i[0],i[1])}bucketHunter(t){if(t===Qi)return"Secret Stupidity";let i="";return Ue.some(r=>r.decks.some(n=>n.name===t?(i=r.name,!0):!1)),i||"???"}ripper(t,i,r){const n=[[15,8,5],[30,15,10]],c=this.getDeckCards([],[t]),f=[],p=n[r===15?0:1][i-1];for(;f.length<p;){const w=k.randInt(0,c.length),x=c[w];f.find(L=>L===x)||f.push(x)}const v=f.map(w=>({card:w,num:i}));return i===2&&r===15&&(v[0].num=1),v}deckify(t){const i=t.map(r=>{const n=Ii.find(c=>c[0]===r);return n?n[1]:[]}).flat();return t.concat(i).map(r=>`${r}1`)}parseDeck(t){const i=t.map(r=>Array(r.num).fill(r.card)).flat();return this.deckify(i)}validDeck(t){const i={};t.forEach(w=>{i[w.card]?i[w.card]+=w.num:i[w.card]=w.num});const r=Object.entries(i).map(w=>({card:w[0],num:w[1]})),n=r.map(w=>w.num).reduce((w,x)=>w+x,0);if(n!==30)return"Deck must have 30 cards, found "+n;const c=[];let f="";if(r.some(w=>{const x=ce.findIndex(L=>L.c===w.card);return x===-1?(f=w.card,!0):(c.push(ce[x].f),!1)}))return`Invalid card code: '${f}'`;let p=0;if(r.some(w=>w.num>3?(f=w.card,p=w.num,!0):!1))return`${p} copies of '${f}' ${y.fastName(f).slice(0,-2)}`;const v=[...new Set(c)];return v.length>2?"Deck must have two or less factions, found: "+v.join():""}getDeckCards(t=[],i=[],r=[]){return t.length===0&&i.length===0&&r.length===0?ce.map(n=>n.c):t.length>0&&i.length>0&&r.length===0?ce.filter(n=>t.includes(n.r)&&i.includes(n.f)).map(n=>n.c):t.length>0&&i.length===0&&r.length===0?ce.filter(n=>t.includes(n.r)).map(n=>n.c):t.length===0&&i.length>0&&r.length===0?ce.filter(n=>i.includes(n.f)).map(n=>n.c):t.length>0&&i.length>0&&r.length>0?ce.filter(n=>t.includes(n.r)&&i.includes(n.f)&&r.includes(Math.floor(n.s))).map(n=>n.c):t.length>0&&i.length===0&&r.length>0?ce.filter(n=>t.includes(n.r)&&r.includes(Math.floor(n.s))).map(n=>n.c):t.length===0&&i.length>0&&r.length>0?ce.filter(n=>i.includes(n.f)&&r.includes(Math.floor(n.s))).map(n=>n.c):ce.filter(n=>r.includes(Math.floor(n.s))).map(n=>n.c)}getCardFaction(t){const i=ce.find(r=>r.c===t);return i?i.f:"X"}getCardRarity(t){const i=ce.find(r=>r.c===t);return i?i.r:"T"}cardStats(){si.forEach(t=>{const i=`${y.factionText(t)} total: ${this.getDeckCards(void 0,[t]).length}; `,r=$e.map(n=>`${y.rarityText(n)}: ${this.getDeckCards([n],[t]).length}`).join("; ");console.log(i+r)})}loadPromise=new Re;fileguts="";loader;async loadFromFile(){if(this.loadPromise=new Re,this.loader.click(),await this.loadPromise.getPromise(),this.fileguts==="")return"";if(this.fileguts.startsWith("!")){const n=this.fileguts.substring(1);return this.fileguts="",n}const t=JSON.parse(this.fileguts);this.fileguts="";const i=t.cards,r=this.validDeck(i);return r||t}readError(t){this.fileguts="!"+t,this.loadPromise.resolveMe()}loadInputHandler(t){const i=this.loader.files;if(i&&i.length>0){const n=i[0];var r=new FileReader;r.onload=c=>{try{var f=r.result;if(f){var p=JSON.parse(new TextDecoder("utf-8").decode(new Uint8Array(f)));p.cards&&Array.isArray(p.cards)&&!p.cards.some(v=>!(v&&typeof v.card=="string"&&Number.isInteger(v.num)))?(this.fileguts=JSON.stringify(p),this.loadPromise.resolveMe()):this.readError("File format is invalid.")}else this.readError("File read was empty.")}catch(v){console.error(v),this.readError("Error reading file.")}};try{r.readAsArrayBuffer(n)}catch{this.readError("Could not read file.")}}else this.loadPromise.resolveMe()}}const Kt=new cn;class dn{phase="ST";enterMainPhase(){this.phase="MN";const t=T.getActive(),i=this.getMainPhaseActions(t);R.aiActive&&J.hitMainPhase(),S.ddf5(i,!0)}async whatNext(t=!1){if(R.winFlag!==0){J.simOn?(J.simEndpoint(R.winFlag===1?"L":"W"),R.winFlag=0):(S.actionHistory=[],R.aiActive=!1,await bt.drawAll());return}if(await bt.drawAll(),S.actionHistory.length>0)S.ddf5();else if(t)ut.setMode("S"),bt.drawAll();else if(H.getNextTrigger())Mi.resolve(H.getNextTrigger());else if(!H.deathCheck)Ft.deathCheck(),this.whatNext();else if(H.events.length>0)H.startBatch();else switch(m.purge(),Ft.purge(),this.phase){case "MN":this.enterMainPhase();break;case "ET":this.phase="PT",H.addEvents(W.player("PTN",T.activeA)),ae.expireMods(),this.whatNext();break;case "PT":G.passTheTurn();break;case "WT":console.error("Hit unhandled waiting phase"),this.phase="MN",this.whatNext();break;case "ST":if(J.simOn)J.simEndpoint("T");else{const i=T.getInactive();i.triggers=i.triggers.filter(c=>c.type!=="NT"),this.phase="MN";const n=J.cheater()?500:100;k.sleep(n).then(()=>this.whatNext())}break}}expireatron(t,i,r,n){i.mods.forEach(c=>{c.expiry===n?c.expiry=r:c.expiry===r&&t.push([i,c])})}expireMods(){const t=m.creatByTarget(b.crTarg());t.push(T.playerA,T.playerB);let i=[];this.phase==="PT"?t.forEach(r=>{this.expireatron(i,r,"ET","EN")}):this.phase==="ST"&&t.forEach(r=>{this.expireatron(i,r,"ST","SN")}),i.length>0&&(m.dirt(),Ct.dirty=!0,i.forEach(r=>{const n=r[0];n instanceof ai?n.expireMod(r[1]):T.expireMod(n,r[1])}),me.enforceAllNonPositionCreatureEffects())}getMainPhaseActions(t){const i=this.getHandActions(t),r=this.getFieldActions(t);let n=G.mainBattle;if(n||(n=m.ddf1().some(c=>c.extraBattles>0&&c.isActive&&!c.defender)),n)i.push({key:"FITE",zone:"B",param:G.mainBattle?"M":"",host:""});else{const c=i.length===0&&r.length===0?"":"DIO";i.push({key:"ENDT",zone:"B",param:c,host:""})}return i.concat(r)}getHandActions(t){const i=[...new Set(t.hand)],r=[],n=[],c=[],f=[];i.forEach(x=>{const L=O.getCard(x);L.free?r.push(x):n.push(x),L.canLevel()&&c.push(x),L.canPlay()&&f.push(x)});const p=r.map(x=>[x,"FREE"]);G.freeCards.forEach(x=>{D.cardByTarget(n,x.condition).forEach(V=>{p.push([V[0],x.id]),n.splice(n.indexOf(V[0]),1)})}),p.push(...n.map(x=>[x,""]));const v=G.regularPlays>0;let w=t.hand.map((x,L)=>[x,L]);return v||(w=w.filter(x=>!n.includes(x[0]))),w.map(x=>{const L=p.find(tt=>tt[0]===x[0]),V=c.includes(x[0]),Q=f.includes(x[0]);if(L[1]&&!Q&&!v||!Q&&!V)return;const I=b.handSelectAction("HPLY",x[0],L[1],x[1]);return I.canPlay=Q,I.lvlOnly=V&&!Q,I}).filter(Boolean)}getFieldActions(t){const i=m.qPlayerCreats(t.isPlayerA),r=i.filter(c=>m.canMove(c).length>0).map(c=>{const f=b.fieldSelectAction("MOVE",c.lane,c.owner);return f.host=c.code,f}),n=i.filter(c=>c.isActive&&c.activationAvailable?O.getCard(c.code).canActivate(c):!1).map(c=>{const f=b.fieldSelectAction("ACTV",c.lane,c.owner);return f.host=c.code,f.param=c.id,f});return r.forEach(c=>{const f=n.findIndex(p=>p.lane===c.lane);f>-1&&(n.splice(f,1),c.param="ACTV")}),r.concat(n)}}const ae=new dn;class un{playerA;playerB;activeA;isLocalA;constructor(){this.playerA=this.newPlayer(!0),this.playerB=this.newPlayer(!1),this.activeA=!0,this.isLocalA=!0}getPlayerState(t){return{deck:t.deck,discard:t.discard,hand:t.hand,health:t.health,triggers:t.triggers,turn:t.turn,rank:t.rank,poison:t.poison,armor:t.armor,armorDmg:t.armorDmg,mods:t.mods,effects:t.effects}}setPlayerState(t,i){i.deck=t.deck,i.discard=t.discard,i.hand=t.hand,i.health=t.health,i.triggers=t.triggers,i.turn=t.turn,i.rank=t.rank,i.poison=t.poison,i.mods=t.mods,i.effects=t.effects,i.armor=t.armor,i.armorDmg=t.armorDmg}getState(){const t={pA:this.getPlayerState(this.playerA),pB:this.getPlayerState(this.playerB),actP:this.activeA};return JSON.stringify(t)}setState(t){const i=JSON.parse(t);this.setPlayerState(i.pA,this.playerA),this.setPlayerState(i.pB,this.playerB),this.activeA=i.actP}pt2pb={["X"]:()=>{throw new Error("goof passed any to player target boolean-o-fier")},["A"]:()=>!0,["B"]:()=>!1,["F"]:()=>this.activeA,["E"]:()=>!this.activeA};b2p(t){return t?this.playerA:this.playerB}toPlayer(t){return typeof t=="boolean"?this.b2p(t):typeof t=="string"?this.b2p(this.pt2pb[t]()):t}toBool(t){return typeof t=="boolean"?t:typeof t=="string"?this.pt2pb[t]():t.isPlayerA}toTarget(t){return typeof t=="string"?t:(typeof t=="boolean"?t:t.isPlayerA)?"A":"B"}getActive(){return this.b2p(this.activeA)}getInactive(){return this.b2p(!this.activeA)}getLocal(){return this.b2p(this.isLocalA)}makeAnim(t){const i=this.toPlayer(t),r=this.totalArmor(i);return[Math.max(r-i.armorDmg,0),!1,!1]}hurtPlayer(t,i){if(i<1)return 0;const r=this.totalArmor(t),n=Math.max(Math.min(i,r-t.armorDmg),0);let c=i-n;return t.armorDmg+=n,t.health-=c,c}hurtDirect(t,i,r){const n=this.toPlayer(t),c=this.hurtPlayer(n,i);return c>0&&(Ct.dirty=!0,y.lawg(r,` dealt ${c} dmg to `,n,"."),H.addEvents(W.damage(!1,c,n.health,!1,!1,n.isPlayerA,void 0)),me.playerHealthChange()),c}hurtBattle(t,i,r){const n=this.toPlayer(t),c=this.hurtPlayer(n,i);c>0&&(Ct.dirty=!0,y.lawg(r.code,` dealt ${c} battle dmg to `,n,"."),H.addEvents(W.damage(!0,c,n.health,!0,!1,n.isPlayerA,r)))}heal(t,i,r){const n=this.toPlayer(t);n.health+=i,Ct.dirty=!0,y.lawg(n,` gained ${i} health from `,r,"."),H.addEvents(W.playerHeal(n.isPlayerA,i)),me.playerHealthChange()}drawCard(t,i){const r=this.toPlayer(t);let n=!0;for(let c=0;c<i;c++){const f=r.deck.pop();if(f)xt.addCard(r,f);else if(n){n=!1;const p=[],v=[];r.discard.forEach(w=>{parseInt(w.slice(3,4))>r.rank?v.push(w):p.push(w)}),p.length>0&&(r.deck=p,r.discard=v,Kt.shuffle(r.deck),xt.addCard(r,r.deck.pop()))}}r.isPlayerA===this.isLocalA&&(Ct.dirty=!0)}addPoison(t,i){const r=this.toPlayer(t);r.poison+=i,Ct.dirty=!0}totalArmor(t){const i=this.toPlayer(t);return this.modBool(i,"NA")?0:i.armor+this.modSum(i,"AR")}totalPoison(t){const i=this.toPlayer(t);return i.poison+this.modSum(i,"PN")}modSum(t,i){const r=this.toPlayer(t);return b.modSum(r.mods,i)}modBool(t,i){const r=this.toPlayer(t);return b.modBool(r.mods,i)}hasMod(t,i){const r=this.toPlayer(t);return b.hasModG(r.mods,i)}addMod(t,i){this.toPlayer(t).mods.push(i),Ct.dirty=!0}addModSafe(t,i){const r=this.toPlayer(t);b.hasMod(r.mods,i)||this.addMod(r,i)}removeMod(t,i){const r=this.toPlayer(t);r.mods=r.mods.filter(n=>n.granter===i?(n.type==="AR"&&(r.armorDmg=Math.max(0,r.armorDmg-n.value)),Ct.dirty=!0,!1):!0)}removeModSafe(t,i){const r=this.toPlayer(t);this.hasMod(r,i)&&this.removeMod(r,i)}expireMod(t,i){const r=this.toPlayer(t);r.mods.splice(b.modIdx(r.mods,i),1),Ct.dirty=!0}addTr(t,i){this.toPlayer(t).triggers.push(i),Ct.dirty=!0}enforceEffects(t){const i=this.toPlayer(t);i.effects.forEach(r=>O.getCard(r.logicCode).enforcePlayerEffect(r,i))}activeCardItems(t){const i=this.toPlayer(t),r=i.triggers.filter(c=>!(c.customCode==="AB"||c.type==="NT")).map(c=>c.logicCode.startsWith("EPH")?c.customCode:c.logicCode),n=i.effects.map(c=>c.logicCode);return r.concat(n)}newPlayer(t){return{hand:[],deck:[],discard:[],effects:[],isPlayerA:t,health:120,mods:[],name:"",nameOffset:0,triggers:[],turn:1,rank:1,armor:0,armorDmg:0,poison:0,avatar:Math.floor(Math.random()*17)}}initPlayer(t,i,r,n){const c=this.toPlayer(t);c.name=r,c.nameOffset=n,c.turn=1,c.rank=1,c.health=k.options.highHealth?360:120,c.discard=[],c.deck=Kt.parseDeck(i),c.mods=[],c.triggers=[],c.effects=[],c.poison=0,c.armor=0,c.armorDmg=0,this.ambushScan(c),Kt.shuffleDeck(c),c.hand=c.deck.splice(-5,5)}ambushScan(t){this.boosh(t,"LLD","PC"),this.boosh(t,"LLG","MV"),this.boosh(t,"LLS","EF"),this.boosh(t,"LLT","LG"),this.boosh(t,"LLV","DS")}boosh(t,i,r){const n=i+"1";if(t.deck.includes(n)){const c=b.trigger(r,n);c.customCode="AB",t.triggers.push(c)}}nameOSaurus(){const t=[["The Garmgunt",5],["Dr. Lucksack",15],["Sgt. Misplay",22],["Salty O'Teary",12],["M.V.P. Sprout",19],["Uncle Punchy",7],["Yesetherian",20],["Rubbish Asir",20],["Hogwash Druid",0],["Offal Savant",15],["Filth Knight",17],["Dirty Mystic",16],["Ether Buffoon",6],["Nexus Dimwit",12],["Hairy Poppins",11],["Al E. Gator",26],["Anita Bath",28],["Bennie Factor",9],["Chris P. Bacon",9],["Don Keigh",29],["Earl E. Bird",25],["Hugh Jass",34],["Jay Walker",28],["Barb Dwyer",22],["Robyn Banks",18],["Anna Graham",9],["Holly Graham",6],["Justin Case",26],["Sir Loins",39]],i=t[k.randInt(0,t.length)];return[i[0],i[1]+18]}}const T=new un,pi=1024,yi=768;class fn{allBackgrounds=["playmat","blueface","mainmenu"];allCanvases=["game-ui","field","player","hand","hilite","effects","decklist","card"];boardWidth;boardHeight;evtWait=!1;logMode="A";logPos="R";menuOpen=!1;scale=1;constructor(){this.boardWidth=this.npx(pi),this.boardHeight=this.npx(yi)}cycle(){const t=this.logMode;let i;t==="A"?i="R":t==="B"?i="M":t==="M"?i="A":i="B",this.logMode=i,k.writeStorage("log",i)}styletron(t,i){t.style.height=this.boardHeight,t.style.width=this.boardWidth,i&&(t.style.minWidth=this.boardWidth)}changeSize(t=!1){const i=window.innerWidth,r=window.innerHeight,n=pi-i,c=yi-r;let f;n<1&&c<1?f=1:f=Math.floor(1e3*Math.min(i/pi,r/yi))/1e3;let p=!0;const v=Math.round(pi*f),w=Math.round(yi*f);!t&&this.scale===f?p=!1:(this.scale=f,this.boardWidth=this.npx(v),this.boardHeight=this.npx(w),this.allCanvases.forEach(_=>{this.styletron(ft.get(_).dom,!1)}),this.allBackgrounds.forEach(_=>{const q=this.gImg(_);q&&this.styletron(q,!1)}),this.styletron(this.gDiv("solforge"),!0),ht.updateScale(f));const x=this.gDiv("flex"),L=this.gDiv("log"),V=i-v,Q=r-w;let I;this.logMode==="A"?V>225?I="R":Q>260?I="B":I="M":I=this.logMode;const tt=t||!(this.logPos==="M"&&I==="M"||this.logPos!=="M"&&I!=="M");if(this.logPos=I,I==="M"){if(tt){x.style.display="block",L.style.position="fixed";const q=this.npx(50);L.style.left=q,L.style.top=q,L.style.borderStyle="solid",this.logViz(!1,L)}(tt||p)&&(L.style.width=this.npx(v-100),L.style.height=this.npx(w-100))}else tt&&(L.style.position="static",L.style.left="",L.style.top="",L.style.width="",L.style.borderStyle="none",this.logViz(!0,L)),I==="R"?(x.style.display="flex",L.style.height=this.npx(r-2)):(x.style.display="block",L.style.height=this.npx(Q-2));tt&&ut.mode==="G"&&I==="M"&&bt.drawLogMenu()}logViz(t,i){i||(i=this.gDiv("log")),this.menuOpen=t,i.style.display=t?"block":"none"}logMash(){this.logPos==="M"&&this.menuOpen&&this.logViz(!1)}setBackground(t){const i="hide";this.allBackgrounds.forEach(r=>{const n=document.getElementById(r);n&&(t===r?n.classList.remove(i):n.classList.add(i))})}playmatSetup(){let t=!1;const i=k.options.playmat,r=document.getElementById("playmat");if(r?r.dataset.pic!==i&&(t=!0,r.remove()):t=!0,t){const n=new Image(k.gameWidth,k.gameHeight);n.id="playmat",this.styletron(n,!1),n.classList.add("hide"),n.dataset.pic=i,n.src=k.imgRoot+`background/playfield-${i}.jpg`,this.gImg("mainmenu").before(n)}}npx(t){return t.toString()+"px"}gImg(t){return this.gX(t)}gDiv(t){return this.gX(t)}gX(t){return document.getElementById(t)}}const Pt=new fn;class gn{stateStack=[];popCheck(){if(this.stateStack.length===0)throw new Error("Attempted to manipulate empty stack")}saveState(){const t={action:S.getState(),aiInPhase:J.inPhase,batch:H.getState(),death:Ft.getState(),field:m.getState(),game:R.getState(),mode:JSON.stringify(ut.stack),phase:ae.phase,player:T.getState(),turn:G.getState()};this.stateStack.push(t)}restoreState(){this.popCheck();const t=this.stateStack[this.stateStack.length-1];S.setState(t.action),J.inPhase=t.aiInPhase,H.setState(t.batch),Ft.setState(t.death),m.setState(t.field),R.setState(t.game.i,t.game.t),ut.stack=JSON.parse(t.mode),ae.phase=t.phase,T.setState(t.player),G.setState(t.turn)}popState(){this.popCheck(),this.stateStack.pop()}}const Ke=new gn;class mn{toActions(t){return(Array.isArray(t)?t:[t]).map(r=>{const n=this.actionTargGuts(r);return n.forEach(c=>{c.host=r.host,c.param=r.param,c.hint=r.hint}),n}).flat()}actionTargGuts(t){if(t.target==="TH")return this.deckByTarget(t).map(i=>b.handSelectAction(t.key,i[0],"",i[1]));if(t.target==="TF"){if(t.field==="O")return m.creatByTarget(t).map(i=>b.fieldSelectAction(t.key,i.lane,i.owner));{const i=t.player==="X"?[!0,!1]:[T.toBool(t.player)],r=k.isUn(t.lanes)?m.laneIdx:this.lanesToArr(t.lanes);if(t.field==="A")return i.map(n=>r.map(c=>b.fieldSelectAction(t.key,c,n))).flat();if(t.field==="E")return i.map(n=>m.emptyLanes(n).filter(c=>r.includes(c)).map(c=>b.fieldSelectAction(t.key,c,n))).flat()}}if(t.target==="TP")return t.player==="X"?[b.playerSelectAction(t.key,!0),b.playerSelectAction(t.key,!1)]:[b.playerSelectAction(t.key,T.toBool(t.player))];if(t.target==="TB")return[{key:t.key,zone:"B",host:t.host,param:""}];if(t.target==="TR")return[{key:t.key,zone:"R",host:t.host,param:""}];if(t.target==="TD")return[];throw new Error("Target encountered that doesnt have mappings to actions: "+t.target)}cardByTarget(t,i){let r=t.map((n,c)=>[n,c]);if(i){if(k.isUn(i.deckPositionSkip)||(r=r.filter(n=>n[1]!==i.deckPositionSkip)),i.faction!=="X"&&(r=r.filter(n=>O.getCard(n[0]).faction===i.faction)),i.tribe!=="AN"&&(r=r.filter(n=>{const c=O.getCard(n[0]);return c.type==="C"?c.isTribe(i.tribe):!1})),i.canLevel&&(r=r.filter(n=>O.getCard(n[0]).canLevel())),i.level!=="LA"){const n=D.levelTargetToLevel(i.level);r=r.filter(c=>{const f=parseInt(c[0].substring(3,4));return n.includes(f)})}if(i.card!=="A"){const n=i.card==="C"?"C":"S";r=r.filter(c=>O.getCard(c[0]).type===n),i.card==="C"&&!k.isUn(i.maxAttack)&&(r=r.filter(c=>O.getCard(c[0]).iAttack<=i.maxAttack))}i.cardCode&&(r=r.filter(n=>O.getCard(n[0]).cardCode()===i.cardCode))}return r}deckByTarget(t){const i=T.toPlayer(t.player);let r;if(t.target==="TH")r=i.hand;else if(t.target==="TD")r=i.discard;else if(t.target==="DK")r=i.deck;else throw new Error("bad target passed to deckByTarget: "+t.target);return this.cardByTarget(r,t)}buttonTarget(t,i="",r=""){return b.actionTarget("TB",t,i,r)}boardTarget(t,i){return b.actionTarget("TR",t,i,"")}ddf2(t){return t===1?"L1":t===2?"LN":"LA"}lt2l={["LA"]:()=>[1,2,3,4],["HR"]:()=>[1,2,3],["L1"]:()=>[1],["L2"]:()=>[2],["L3"]:()=>[3],["LN"]:()=>[1,2]};levelTargetToLevel(t){return this.lt2l[t]()}levelTargetTest(t,i){return this.levelTargetToLevel(t).includes(i)}levelTestCommon(t,i){return this.levelTargetTest(this.ddf2(i),t)}lanesToArr(t){return Array.isArray(t)?t:[t]}}const D=new mn;class pn{ddf8(t){return t.trigger.type==="FR"?this.forgeTriggerTest(t,!1):t.trigger.type==="VN"?this.vengeanceTriggerTest(t):t.trigger.type==="FK"?this.flankTriggerTest(t):t.trigger.type==="AS"?this.forgeTriggerTest(t,!0):t.trigger.type==="UP"?this.upgradeTriggerTest(t):t.trigger.type==="FM"?this.formationTriggerTest(t):t.trigger.type==="RD"?this.raidTriggerTest(t):t.trigger.type==="DM"&&t.event.code==="DMG"||t.trigger.type==="HG"&&t.event.code==="CHL"||t.trigger.type==="EF"&&t.event.code==="ENT"||t.trigger.type==="DS"&&t.event.code==="DIE"||t.trigger.type==="PC"&&t.event.code==="PLC"||t.trigger.type==="MV"&&t.event.code==="MOV"||t.trigger.type==="RP"&&t.event.code==="RPL"||t.trigger.type==="LG"&&t.event.code==="PHL"||t.trigger.type==="TS"&&t.event.code==="TRS"||t.trigger.type==="TE"&&t.event.code==="TRE"||t.trigger.type==="PT"&&t.event.code==="PTN"||t.trigger.type==="RU"&&t.event.code==="RKU"?this.generalTriggerTest(t):!1}resolve(t){t.trigger.interactive&&(t.host==="P"?console.error("Encountered player hosted trigger that is interactive!!"):H.iaTrigLane=m.creatByTr(t).lane),O.getCard(t.trigger.logicCode).jr8(t)}forgeTriggerTest(t,i){if(t.event.code==="ENT"&&t.event.forged){const r=m.creatByTr(t),n=r.id===t.event.creatId&&r.status==="A";return i&&n?!r.opposed:n}return!1}formationTriggerTest(t){if(t.event.code==="ENT"&&t.event.formation){const i=m.creatByTr(t);return i.id===t.event.creatId&&i.status==="A"}return!1}raidTriggerTest(t){if(t.event.code==="TRE"&&G.ffs>2){const i=m.creatByTr(t);return i.owner===t.event.playerA&&i.status==="A"}return!1}upgradeTriggerTest(t){if(t.event.code==="RPL"){const i=m.searchById(t.creatId);if(i)return i.id===t.event.creatId;console.warn("Upgrade trigger test could not find its creature",t)}return!1}vengeanceTriggerTest(t){if(t.event.code==="DIE"){const i=t.event,r=m.searchById(t.creatId);if(r)return r.status==="D"&&r.id===i.creatId;console.warn("Venegeance trigger test could not find its creature",t)}return!1}flankTriggerTest(t){if(t.event.code==="MOV"){const i=t.event,r=m.creatByTr(t);return r.status==="A"&&r.id===i.creatId}return!1}generalTriggerTest(t){return O.getCard(t.trigger.logicCode).ddf8(t)}}const Mi=new pn;class yn{firstTurn=!0;mainBattle=!0;deathsA=[];deathsB=[];ffs=0;regularPlays=2;cardsPlayed=0;freeCards=[];newPre=[];newPost=[];getState(){const t={mB:this.mainBattle,dA:this.deathsA,dB:this.deathsB,cP:this.cardsPlayed,ffs:this.ffs,fC:this.freeCards,rP:this.regularPlays,n1:this.newPre,n2:this.newPost};return JSON.stringify(t)}setState(t){const i=JSON.parse(t);this.mainBattle=i.mB,this.deathsA=i.dA,this.deathsB=i.dB,this.cardsPlayed=i.cP,this.ffs=i.ffs,this.freeCards=i.fC,this.regularPlays=i.rP,this.newPre=i.n1,this.newPost=i.n2}resetTurnData(){this.mainBattle=!0,this.deathsA=[],this.deathsB=[],this.ffs=0,this.regularPlays=2,this.cardsPlayed=0,this.freeCards=[],this.newPre=[],this.newPost=[],this.firstTurn&&(this.firstTurn=!1,this.regularPlays=1)}forgeCard(t,i,r,n){const c=this.cardPlayed(i,r,n),f=T.getActive();y.lawg("Forged ",c.code,"."),m.birth(c,"F",f.isPlayerA,t.lane,"X"),S.actionDone()}levelAndDiscardA(t){return this.levelAndDiscard(t.card,t.position)}levelAndDiscard(t,i,r=!0,n="F"){const c=O.getCard(t),f=T.toPlayer(n);let p=!1;if(!c.overload){const v=c.levelUpCard();f.discard.push(v),v!==t&&(p=!0)}return i>-1?xt.cardPlayOrLevel(f,i,p,c.overload):y.debug("Bad play index: "+i+" ("+t+")"),f.isPlayerA===T.isLocalA&&(Ct.dirty=!0),r&&p&&y.lawg(f," leveled a card."),c}cardPlayed(t,i,r,n=!1){const c=this.levelAndDiscard(t,r,n),f=T.getActive();if(i==="")this.regularPlays-=1;else if(i!=="FREE"){const p=this.freeCards.findIndex(v=>v.id===i);p>-1?this.freeCards.splice(p,1):console.error("Could not find free card rule!")}if(this.cardsPlayed+=1,!n){const p=W.playCard(t,f.isPlayerA);H.addEvents(p)}return c}passTheTurn(){if(T.activeA=!T.activeA,ae.phase="WT",R.aiMode){if(J.simOff)if(R.aiActive=!R.aiActive,R.aiActive)J.turnSims=0,J.turnTime=0;else{const t=`: ${this.calma(J.turnSims)} pontifications in ${(J.turnTime/1e3).toFixed(1)} seconds.`;y.lawg(t)}}else T.isLocalA=T.activeA,xt.genState(T.getLocal()),ue.dirty=!0;this.startTurn()}calma(t){let i=t.toString();return i.length<4?i:i.length>6?i.slice(0,-6)+","+i.slice(-6,-3)+","+i.slice(-3):i.slice(0,-3)+","+i.slice(-3)}startTurn(){const t="------";J.log&&R.aiActive&&R.aiMode&&console.log(t+" AI Turn Start "+t),J.simOff&&(y.lawg(t),y.lawg(T.activeA," starts turn.")),this.resetTurnData(),ae.phase="ST",H.addEvents(W.player("TRS",T.activeA)),ae.expireMods(),Ct.dirty=!0,ae.whatNext(!R.aiMode)}endTurn(){const t=T.getActive();xt.cardDiscardAll(t),t.turn++;const i=t.turn>4;H.addEvents(W.player("TRE",t.isPlayerA)),i&&(t.turn=1,t.rank++,y.lawg(t," hits Rank "+t.rank+"."),Y.addRankup(t.isPlayerA),H.addEvents(W.player("RKU",t.isPlayerA)),t.deck=t.deck.concat(t.discard),t.discard=[],Kt.shuffleDeck(t)),m.qActiveCreats().forEach(r=>{r.extraBattles=0}),T.drawCard(t,5),ae.phase="ET",Ct.dirty=!0,S.actionDone()}mobility(t){const i=m.jr5(t.param);y.lawg(i.code," moved."),i.mobilityAvailable=!1,i.move(t.lane,"X"),S.actionDone()}allied(t,i){const r=i??T.getActive(),n=b.target("TH");return n.player=T.toTarget(r),n.faction=t,D.deckByTarget(n).length>0}patron(t){const i=b.target("TH");return i.player=T.toTarget(T.getActive()),i.faction=t,D.deckByTarget(i).length>2}freeCard(t){const i=b.freeCard(t);return this.freeCards.push(i),this.lpd(),i}freePlay(t=1){this.regularPlays+=t,this.lpd()}birthRegistrar(t){this.mainBattle?this.newPre.push(t):this.newPost.push(t)}lpd(){T.activeA===T.isLocalA&&(Ct.dirty=!0)}}const G=new yn;class Ei{id;dom;context;width;height;constructor(){this.id="",this.width=0,this.height=0}show(){}hide(){}get visible(){return!1}clear(){this.context.clearRect(0,0,this.width,this.height)}sprite(t,i,r){this.context.drawImage(t,i,r)}updateScale(t){this.context.scale(t,t)}writeHC(t,i,r){this.context.drawImage(t.dom,i,r)}}class bn extends Ei{constructor(t){if(super(),this.id=t,this.dom=document.getElementById(t),!this.dom)throw new Error(`Could not find canvas id ${t}`);this.context=this.dom.getContext("2d"),this.width=this.dom.width,this.height=this.dom.height,this.context.textBaseline="top",this.context.shadowOffsetX=1,this.context.shadowOffsetY=1}show(){this.dom.hidden=!1}hide(){this.dom.hidden=!0}get visible(){return!this.dom.hidden}}class _i extends Ei{constructor(t,i){super(),this.dom=new OffscreenCanvas(t,i),this.context=this.dom.getContext("2d"),this.width=t,this.height=i}}class ne{getCanv(t){return t instanceof Ei?t:ft.get(t)}init(){}dirty=!0;async drawSprite(t,i,r,n,c={}){const f=this.getCanv(t).context,p=await k.getSprite(k.imgRoot+i);let v=1;c&&(v=c.alpha??1),v<1&&(f.globalAlpha=v),f.drawImage(p,r,n),v<1&&(f.globalAlpha=1)}drawHC(t,i,r,n){t.context.drawImage(i.dom,r,n)}async drawText(t,i,r,n,c={}){const f=this.getCanv(t).context,p=c.fontSize??24;k.pxRatio===2&&(n=this.retinaTextY(n,p)),f.fillStyle=c.colour||"#000000",f.font=`${p}px ${c.fontName||"cinzel"}`,f.fillText(i,r,n)}async spriteNumber(t,i,r,n,c,f){let p=r-this.numOffset(i,c);const v=[];i.toString().split("").forEach(w=>{v.push(this.drawSprite(t,this.numSpriteUrl(w,c,f),p,n)),p+=this.numSize(w,c)}),await Promise.all(v)}glowColour(t){const i=t.key;return i==="MOVE"||i==="ACTV"?"green":i==="CANC"?"red":i==="CARD"?"yellow":"blue"}drawRarity(t,i,r,n){return this.drawSprite(t,`icons/rarity/new/${y.rarityText(i).toLowerCase()}.png`,r,n)}drawFaction(t,i,r,n){const c=i==="T"?2:0;return this.drawSprite(t,`icons/faction/${y.factionText(i).toLowerCase()}.png`,r+c,n+3)}makeHaze(t,i=!0){t.context.fillStyle="#222222d8",t.context.fillRect(0,0,i?849:k.gameWidth,k.gameHeight)}cBlu="#03fcfc";cYella="#f5f242";retinaTextY(t,i){let r;return i<21?r=6:i<27?r=7:r=8,t-r}smallNumSize={"-":7,0:10,1:9,2:10,3:8,4:10,5:9,6:10,7:9,8:8,9:9};bigNumSize={"-":8,0:13,1:9,2:13,3:11,4:14,5:12,6:12,7:12,8:12,9:12};numSize(t,i){return i==="S"?this.smallNumSize[t]:this.bigNumSize[t]}numOffset(t,i){const r=t.toString().split("").reduce((n,c)=>n+this.numSize(c,i),0)-(i==="B"?2:1);return Math.floor(r/2)}numSpriteUrl(t,i,r){return`text/nums/${i}/${r}/${t}.png`}}const An=80;class bi{guts=[[],[],[]];colX=[50,401,757];gnu(t){return{type:t,text:"",offset:0,pram:"VR",on:!1,xtra:""}}poosh(t,i){this.guts[t-1].push(i)}addBlank(t,i=1){const r=this.gnu("B");for(let n=0;n<i;n++)this.poosh(t,r)}addHeading(t,i,r){const n=this.gnu("H");n.text=i,n.offset=r,this.poosh(t,n)}addBasic(t,i,r,n){const c=this.gnu("N");return c.text=i,c.offset=r,c.pram=n,this.poosh(t,c),c}addToggle(t,i,r,n,c,f=!1){const p=this.addBasic(t,i,r,n);p.type=f?"R":"T",p.on=c}addLevel(t,i,r,n,c){const f=this.addBasic(t,i,r,n);f.type="L",f.xtra=c}async draw(t){const i=[0,1,2].map(r=>{let n=this.colX[r],c=76;const f=this.guts[r].map(p=>{let v;if(p.type==="B")v=Promise.resolve();else if(p.type==="H")v=$t.headerText(n+p.offset,c+34,p.text,t);else{const w=n,x=c;v=$t.buttonMaker(t,n,c,p.pram,p.text,p.offset,p.on,p.type!=="R").then(()=>{if(p.type==="L")return $t.drawSprite(t,"icons/frame/lvl"+p.xtra+".png",w+179,x+10)})}return c+=An,v});return Promise.all(f)});await Promise.all(i)}}class kn extends ne{async drawButton(t,i,r,n,c,f=7,p=!1,v=!0){let w,x;p?(w="ui/button/menu_on.png",x="#d7fc03"):(w="ui/button/menu_off.png",x="#00DEF7");const L=this.buttonBounds(i,r);await this.drawSprite(t,w,L[0],L[1]),await this.drawText(t,c,L[0]+7+f,L[1]+24,{colour:x,fontSize:30}),(!p||v)&&ht.add(ct.fromArr(n,L,at.Both))}async buttonMaker(t,i,r,n,c,f=7,p=!1,v=!0){const w=b.basicAction("MNBT");w.param=n,await this.drawButton(t,i,r,w,c,f,p,v)}buttonBounds(t,i){return[t-7,i-7,232,69]}async headerText(t,i,r,n){await this.yellaText(t,i,r,n,30)}async titleText(t,i,r){await this.yellaText(t,25,i,r,40)}pickerName(t,i){let r;return t?r="Player 1":i?r="Dumb Bot":r="Player 2",r}async yellaText(t,i,r,n,c){await this.drawText(n,r,t,i,{colour:this.cYella,fontSize:c})}}const $t=new kn;class Tn extends ne{async makeIconButton(t,i,r,n,c){let p;p=`ui/button/ui_${n}.png`,await this.drawSprite(t,p,i,r);const v=b.basicAction("UIBT");c?v.param=c:v.param=n;const w=new ct(v,i,r,40,40,at.Both);ht.add(w)}async makeVScroller(t,i,r,n,c){const f={zone:"N",key:c,host:"",param:n?"U":"D"};await this.makeScroller(t,i,r,n?"up":"down",f)}async makeScroller(t,i,r,n,c){await this.drawFactionButton(t,i,r,"A"),await this.drawSprite(t,`ui/arrow/${n}.png`,i+30,r+14);const f=this.makeFactButtonClick(i,r,c);ht.add(f)}makeFactButtonClick(t,i,r){return new ct(r,t,i,...this.factionButtonBounds(),at.Both)}async drawFactionButton(t,i,r,n){await this.drawSprite(t,`ui/button/faction_${n}.png`,i,r)}factionButtonBounds(){return[77,44]}}const oe=new Tn;class vn extends ne{async drawActions(t){if(ut.baseMode==="G"){const i=ft.get("hilite"),r=t.filter(n=>n.zone==="B");if(r.length>1&&console.error("Two button actions encountered in one batch",r),r.length===0||R.aiActive||k.clickMode==="I"&&!ut.isDetailMode){const n=this.buttonBounds();await this.drawSprite(i,"ui/button/off.png",n[0],n[1])}else{const n=r[0],c=this.buttonBounds(),f=n.key==="CARD"?n.param:n.key,p=this.buttonHilite(f,n.param);await this.drawSprite(i,`ui/button/on_${p}.png`,c[0]-5,c[1]-5),await this.drawSprite(i,"ui/button/on.png",c[0],c[1]),await this.drawSprite(i,`text/butt/${f}.png`,c[0]+23,c[1]+18);const v=this.highlightBounds(),w=ct.fromArr(n,v);n.key==="CNCL"&&(w.mouse=at.Both),ht.add(w)}}}buttonBounds(){return[856,406,160,63]}buttonHilite(t,i){return t==="FITE"||t==="ENDT"&&i===""?"blue":t==="ENDT"&&i==="DIO"||t==="CANC"||t==="CNCL"?"red":"yellow"}highlightBounds(){return[851,401,170,73]}}const Xe=new vn;class Sn extends ne{async drawCard(t,i,r,n){const c=this.getCanv(i),f=this.extractStats(t),p=f.cardClass;if(await this.drawSprite(c,p.image(!1),r+14,n+35),await this.drawSprite(c,this.frameImg(p.level,p.faction,p.type,!1),r,n),await this.drawSprite(c,`text/card/${p.cardCode()}.png`,r+12,n+16),f.isCreature){const v=n+178;await this.spriteNumber(c,f.att,r+24,v,"S","Y"),await this.spriteNumber(c,f.hlt,r+127,v,"S","Y")}if(f.sleeping&&await this.drawSprite(c,"icons/effects/defensive.png",r+5,n+40,{alpha:.7}),f.iconList.length>0){const v=r+57-17*(f.iconList.length-1);await Promise.all(f.iconList.map(async(w,x)=>this.drawIcon(c,v+x*35,n+140,w[0],w[1])))}}async drawBigCard(t,i,r,n){const c=this.extractStats(i);if(await this.drawSprite(t,i.image(!0),r+(c.isCreature?38:35),n+117),await this.drawSprite(t,this.frameImg(i.level,i.faction,i.type,!0),r,n),i.rarity!=="T"&&await this.drawRarity(t,i.rarity,r+309,n+394),c.isCreature){const f=n+555;await this.spriteNumber(t,c.att,r+44,f,"B","Y"),await this.spriteNumber(t,c.hlt,r+325,f,"B","Y")}}async drawIcon(t,i,r,n,c=0){const f=this.getCanv(t);if(await this.drawSprite(f,`icons/effects/${n}.png`,i,r),c>0){const p=n==="poison"?12:9;await this.spriteNumber(f,c,i+17,r+p,"S","B")}}extractStats(t){let i,r=!1,n=0,c=0,f=!1,p=0,v=!1,w=!1,x=!1,L=!1,V=0,Q=0,I=0,tt=!1,_=!1;if(!(t instanceof Vt))r=!0,n=t.attack,c=t.health,f=t.sleeping&&!t.aggressive,p=t.regen,v=t.breakthrough,w=t.defender,x=t.aggressive,V=t.armor,Q=t.poison,I=t.mobility,L=t.changed,i=O.getCard(t.code);else{if(t.type==="C"){r=!0;const wt=t;n=wt.iAttack,c=wt.iHealth,p=wt.iRegen,v=wt.iBT,w=wt.iDefend,x=wt.iAggro,V=wt.iArmor,I=wt.iMobile}tt=t.overload,_=t.consistent,i=t}const q=[];return tt&&q.push(["overload",0]),_&&q.push(["consistent",0]),p>0&&q.push(["regenerate",p]),v&&q.push(["breakthrough",0]),w&&q.push(["defender",0]),x&&q.push(["aggressive",0]),V>0&&q.push(["armor",V]),Q>0&&q.push(["poison",Q]),I>0&&q.push(["mobility",I]),L&&q.push(["changed",0]),{cardClass:i,isCreature:r,iconList:q,hlt:c,att:n,sleeping:f}}async drawHilight(t,i,r,n){await this.drawSprite(t,`frames/glow_${n}.png`,i-22,r-36)}cardBounds(t,i){return[t,i,150,205]}cardSize(){return[150,205]}highlightBounds(t){return[t[0]-5,t[1]-5,160,215]}frameImg(t,i,r,n){return`frames/${n?"big":"small"}/lvl${t}_${i}${r}.png`}levelImg(t){return`icons/frame/lvl${t}.png`}oldFrameImg(t){return`icons/frame/frame${t}.png`}factionImg(t){return`icons/faction/orb${t}.png`}}const Tt=new Sn,tr=22,ii=540,Cn=6;class wn extends ne{handCan;highCan;xOffset=0;xCache=new Array(15);init(){this.handCan=ft.get("hand"),this.highCan=ft.get("hilite"),this.xOffset=Tt.highlightBounds([0,0])[2]+Cn;for(let t=-5;t<10;t++)this.xCache[t+5]=tr+t*this.xOffset}async drawCards(t){const i=this.handCan;i.clear();let r=tr;const n=this.paginatron(t);for(let c=n[0];c<=n[1];c++){if(!Y.active||!Y.movingHand.includes(c)){const f=O.getCard(t.hand[c]);await Tt.drawCard(f,i,r,ii)}r+=this.xOffset}this.dirty=!1}fastCoord(t){return[this.xCache[t+5],ii]}async drawActions(t){const i=k.clickMode!=="I",r=this.highCan,n=new ie(0,520,1e3,250),c=new ie(0,520,1e3,250,at.Right),f=this.paginatron(T.getActive());await Promise.all(t.filter(p=>p.zone==="H").map(async p=>{const v=p;if(v.position>=f[0]&&v.position<=f[1]){const w=this.xCache[v.position-f[0]+5];if(p.key==="DEET")c.addChild(ct.fromArr(p,Tt.highlightBounds([w,ii]),at.Right));else if(i){n.addChild(ct.fromArr(p,Tt.highlightBounds([w,ii])));let x;v.key==="HPLY"?v.cost&&v.canPlay?x="green":v.lvlOnly?x="purple":x="blue":x=this.glowColour(v),await Tt.drawHilight(r,w,ii,x)}}})),i&&ht.add(n),ht.add(c),f[0]>0&&await this.makeScroller(r,!1),f[1]<f[2]&&await this.makeScroller(r,!0)}drawCacheCard(t,i,r){this.drawHC(this.handCan,t,i,r)}paginatron(t){const i=R.ui.handScrollLeft;return[i,Math.min(i+4,t.hand.length-1),t.hand.length-1]}async makeScroller(t,i){let r,n,c,f;i?(r=850,n=935,c="R",f="right"):(r=0,n=858,c="L",f="left");const w={zone:"N",key:"SCRH",host:"",param:c};await oe.makeScroller(t,n,235,f,w),await this.drawSprite(t,"icons/rewards/gold.png",r,726),await this.drawSprite(t,"icons/rewards/gold.png",r,726-24)}}const ue=new wn;class Dn extends ne{fieldBoundary=[17,62,821,443];fieldCan;highCan;fieldGap=166;xCache=new Array(5);init(){this.fieldCan=ft.get("field"),this.highCan=ft.get("hilite");for(let t=0;t<5;t++)this.xCache[t]=22+t*this.fieldGap}coordCalc(t,i){let r,n;return T.isLocalA===i?(n=t-1,r=290):(n=5-t,r=66),[this.xCache[n],r]}async drawCards(){const t=this.fieldCan;t.clear();let i=m.qActiveCreats();Y.active&&Y.movingBoard.length>0&&(i=i.filter(n=>!Y.movingBoard.includes(n.id)));const r=i.map(n=>{const c=this.coordCalc(n.lane,n.owner);return Tt.drawCard(n,t,c[0],c[1])});await Promise.all(r),this.dirty=!1}async drawActions(t){const i=k.clickMode!=="I",r=this.highCan,n=ie.fromBox(this.fieldBoundary),c=ie.fromBox(this.fieldBoundary,at.Right);if(await Promise.all(t.filter(f=>f.zone==="F"||f.zone==="R").map(async f=>{if(f.zone==="R"&&i)ht.add(ct.fromArr(f,this.fieldBoundary)),await this.drawSprite(r,"background/field-glow.png",this.fieldBoundary[0]-6,this.fieldBoundary[1]-9);else{const p=f,v=this.coordCalc(p.lane,p.playerA);f.key==="DEET"?c.addChild(ct.fromArr(f,Tt.highlightBounds(v),at.Right)):i&&(n.addChild(ct.fromArr(f,Tt.highlightBounds(v))),await Tt.drawHilight(r,v[0],v[1],this.glowColour(p)))}})),i&&n.childs.length>0&&ht.add(n),c.childs.length>0&&ht.add(c),H.iaTrigLane>0){const f=this.coordCalc(H.iaTrigLane,T.activeA),p=Tt.cardBounds(f[0],f[1]),v=p[1]+p[3]+11,w=p[0]+p[2]/2;await this.drawSprite(r,"icons/rewards/gold.png",w-10,v),await this.drawSprite(r,"icons/rewards/gold.png",w-35,v),await this.drawSprite(r,"icons/rewards/gold.png",w-60,v),await this.drawSprite(r,"icons/rewards/gold.png",w+15,v),await this.drawSprite(r,"icons/rewards/gold.png",w+40,v)}}drawCacheCard(t,i,r){this.drawHC(this.fieldCan,t,i,r)}async drawFight(){ft.get("hilite").clear(),await Xe.drawActions([]),await Y.prep(),Y.movingBoard.length>0&&(await this.drawCards(),Y.start(),await Y.aniProm())}}const pe=new Dn;class xn extends ne{avatars=["barf","beee","behold","boof","crowley","darko","deert","eyebs","fine","furiousgeorge","ghoost","judge","kenta","nom","pupsky","skelly","stache"];async drawPlayer(t,i,r,n){const c=this.getCanv(i);await this.drawSprite(c,`avatar/${this.avatars[t.avatar]}.jpg`,r+46,n+48),await this.drawSprite(c,"ui/player_frame.png",r,n),await this.drawSprite(c,"ui/player_health.png",r+10,n+102),await this.spriteNumber(c,t.health,r+45,n+149,"B","G"),await this.drawSprite(c,`ui/turn${t.turn}.png`,r+117,n+25),await this.drawSprite(c,"ui/rank.png",r+90,n+4),await this.spriteNumber(c,t.rank,r+121,n+28,"B","G"),t.isPlayerA===T.activeA&&await this.drawSprite(c,"icons/rarity/drop/common.png",r+84,n+153),await this.drawText(c,t.name,r+t.nameOffset,n+189,{colour:this.cBlu,fontSize:20});const f=T.totalPoison(t),p=T.totalArmor(t),v=T.activeCardItems(t);if(f>0||p>0||v.length>0){const w=n+9;if(f>0&&await Tt.drawIcon(c,r+15,w,"poison",f),p>0&&await Tt.drawIcon(c,r+150,w,"armor",p),v.length>0){await Tt.drawIcon(c,r+156,n+147,"changed");const x=b.basicAction("VWDK");return x.param=k.enTil("VE",k.bool2txt(t.isPlayerA)),new ct(x,r+155,n+147,36,36,at.Both)}}}async drawAllPlayers(){const t=ft.get("player");t.clear();const i=[],r=!R.aiActive,n=T.getLocal(),c=T.toPlayer(!n.isPlayerA),f=await this.drawPlayer(n,t,...this.playerOrigin(!0)),p=await this.drawPlayer(c,t,...this.playerOrigin(!1));let v,w;if(n.isPlayerA===T.activeA){let x=862;const L=295,V=Array(G.regularPlays).fill("blue").concat(G.freeCards.map(I=>I.sourceCard)),Q=[];V.forEach(I=>{let tt;if(I==="blue")tt=I;else if(tt="green",r){const _={key:"DEET",zone:"N",host:"",param:I};i.push(new ct(_,x-1,L-1,28,41,at.Both))}Q.push(this.drawSprite(t,`ui/${tt}card.png`,x,L)),x+=30}),await Promise.all(Q),v=await this.drawDeckButton(t,n,!0,r),w=await this.drawDeckButton(t,n,!1,r)}return this.dirty=!1,i.concat([f,p,v,w]).filter(Boolean)}async drawDeckButton(t,i,r,n){let c,f,p;if(r?(c=i.discard.length,f=935,p="T"):(c=i.deck.length,f=858,p="U"),await oe.drawFactionButton(t,f,350,p),await this.spriteNumber(t,c,f+38,350+14,"S","Y"),c>0&&n){const w=b.basicAction("VWDK");return w.param=r?"VD":"VR",oe.makeFactButtonClick(f,350,w)}}async drawActions(t){if(k.clickMode==="I")return;const i=ft.get("hilite"),r=T.isLocalA;await Promise.all(t.filter(n=>n.zone==="P").map(n=>{const c=n,f=this.playerOrigin(c.playerA===r),p=this.playerBounds(...f);return ht.add(ct.fromArr(n,p)),this.drawSprite(i,"ui/player_glow.png",f[0]+1,f[1]-1)}))}playerOrigin(t){return[832,t?485:0]}playerBounds(t,i){return[t+18,i+18,170,170]}async drawGameOver(t=!1){const i=ft.get("field"),r=94,n=T.isLocalA,c=R.winFlag,f=n&&c===1||!n&&c===-1;await this.drawSprite(i,`ui/you-${f?"win":"lose"}.png`,r,89,{alpha:t?.65:1}),ht.removeAll();const p=ft.get("hand");if(await $t.drawButton(p,r+62,488,b.menuButtonAction("MM"),"Main Menu",20,!1),await $t.drawButton(p,r+389,488,b.menuButtonAction("RP"),"Replay",55,!1),t&&!k.options.wasDrafting){p.context.fillStyle="#222222d8",p.context.fillRect(46,0,803,50);const w={colour:this.cBlu,fontSize:20};await this.drawText(p,Lt.namenom(!n),46,2,w),await this.drawText(p,Lt.namenom(n),46,29,w)}}async drawAiGear(t,i){const c=t%6,f=Math.floor(t/6),p=ft.get("hilite"),v=`icons/rewards/${i?"gold":"silver"}.png`;await this.drawSprite(p,v,862+c*24,255+f*24)}hwhipe(){ft.get("hilite").clear()}}const Ct=new xn,er=15,ir=15,Bn=5;class Hn extends ne{constructor(){super();const t=Tt.highlightBounds([0,0]);this.xOffset=t[2]+Bn,this.yOffset=t[3]+25}xOffset;yOffset;async drawCards(t){const r=yt.visibleContent().map((n,c)=>{const f=O.getCard(n.cardCode),p=this.listXY(c);return Tt.drawCard(f,t,...p).then(()=>{if(n.cardCount>0)return this.drawCount(t,p[0]+61,p[1]+166,n.cardCount)})});await Promise.all(r)}async drawActions(t,i){const r=k.clickMode!=="I",n=yt.visibleContent(),c=R.ui,f=c.deckScroll,p=f+15,w=c.deckSummary?at.Both:at.Right,x=ie.fromBox(this.deckBoundary()),L=ie.fromBox(this.deckBoundary(),w),V=[];t.forEach(Q=>{if(Q.key==="DEET"){const I=Q;I.position>=f&&I.position<p&&L.addChild(ct.fromArr(Q,Tt.highlightBounds(this.listXY(I.position-f)),w))}else if(Q.key==="CARD"&&r){const I=Q,tt=n.findIndex(_=>_.sourceIdx===I.position);if(tt>-1){const _=this.listXY(tt);x.addChild(ct.fromArr(Q,Tt.highlightBounds(_))),V.push(Tt.drawHilight(i,_[0],_[1],"blue"))}}}),r&&x.childs.length>0&&ht.add(x),L.childs.length>0&&ht.add(L),yt.canPageDown&&V.push(oe.makeVScroller(i,299,712,!1,"SCRK")),yt.canPageUp&&V.push(oe.makeVScroller(i,465,712,!0,"SCRK")),await Promise.all(V)}async drawCount(t,i,r,n){await this.drawSprite(t,"ui/dullcard.png",i,r),await this.spriteNumber(t,n,i+13,r+12,"S","Y")}listXY(t){return[er+t%5*this.xOffset,ir+Math.floor(t/5)*this.yOffset]}deckBoundary(){return[er,ir,this.xOffset*5,this.yOffset*3]}}const Ri=new Hn;class Fn extends ne{async drawDetails(t){const i=[],r=ft.get("card");r.clear(),this.makeHaze(r);const n=30,c=30,f=O.getCard(Se.currentCard);k.options.bigCards?i.push(Tt.drawBigCard(r,f,n,c)):i.push(Tt.drawCard(f,r,134,280));const p=435;let v=30;const w=33,x=23,L=28;let V=f.name;for(;V.length>0;){v+=36;let Dt;if(V.length<x)Dt=V,V="";else{const Xt=V.lastIndexOf(" ",x);Dt=V.substring(0,Xt),V=V.substring(Xt+1)}i.push(this.drawText(r,Dt,p,v,{colour:this.cBlu,fontSize:28}))}v+=36,i.push(this.drawText(r,this.cardSummary(f),p,v,{colour:this.cBlu,fontSize:20})),f.type==="C"&&(v+=30,i.push(this.drawText(r,this.tribeSummary(f),p,v,{colour:this.cBlu,fontSize:20})));let Q=y.cardTextSplit(f);v+=40,Q.forEach(Dt=>{for(;Dt.length>0;){let Xt;if(Dt.length<w)Xt=Dt,Dt="";else{const Jt=Dt.lastIndexOf(" ",w);Xt=Dt.substring(0,Jt),Dt=Dt.substring(Jt+1)}i.push(this.drawText(r,Xt,p,v,{colour:this.cYella,fontSize:20})),v+=L}});const I=this.levelFun(f),tt=I.length;if(I.length>1){const Dt=f.cardCode(),Xt=tt===3?[19,147,270]:tt===2?[78,216]:[-15,91,197,302];I.forEach((Jt,ye)=>{i.push(this.drawLevelButton(r,Dt,Jt,27+Xt[ye],639,Jt===f.level))})}let _=0;const q=513,wt=697,we=74;ut.baseMode!=="G"&&(i.push($t.drawButton(r,q,wt,t,"Close",62,!1)),_++);const vt=new ct(t,n,c,377,603,at.Both);if(ht.add(vt),Se.canGoBack){const Dt=Se.goBackAction();i.push($t.drawButton(r,q,this.buttonY(wt,_,we),Dt,"Back",72,!1)),_++}Se.friendos.forEach(Dt=>{const Xt=O.getCard(Dt),Jt=Se.friendAction(Dt),ye=Se.friendTxt(Xt.cardCode());i.push($t.drawButton(r,q,this.buttonY(wt,_,we),Jt,ye[1]||Xt.name,ye[0],!1)),_++}),await Promise.all(i)}buttonY(t,i,r){return t-i*r}cardSummary(t){const i=y.factionText(t.faction),r=y.rarityText(t.rarity),n=y.cardTypeText(t.type);return`${i}, ${r} ${n}`}tribeSummary(t){return t.tribe.map(i=>y.tribeText(i)).join(" ")}async drawLevelButton(t,i,r,n,c,f){if(await this.drawSprite(t,`icons/frame/l${r}.png`,n,c),!f){const x=Se.levelAction(r),L=new ct(x,n-7,c-5,103,112,at.Both);ht.add(L)}const v=O.getCard(`${i}${r}`).levelSpice(),w=[[-7,84],[60,84],[11,79]];await Promise.all(v.map((x,L)=>{const V=n+w[L][0],Q=c+w[L][1];if(x.icon==="A"||x.icon==="H"){let I,tt;return x.icon==="A"?(I="icons/frame/attack.png",tt=V+17):(I="icons/frame/health.png",tt=V+16),this.drawSprite(t,I,V-1,Q-1).then(()=>this.spriteNumber(t,x.num,tt,Q+10,"S","Y"))}else{let I=this.spiceIcon(x.icon);if(x.icon==="U"||x.icon==="D"||x.icon==="L"||x.icon==="N"){const tt=`icons/effects/${I}.png`;return this.drawSprite(t,tt,V-1,Q-1).then(()=>this.spriteNumber(t,x.num,V+16,Q+10,"S","B"))}else return Tt.drawIcon(t,V,Q,I,x.num)}}))}spiceIcon(t){return t==="N"?"new":t==="D"?"damage":t==="U"?"buff":t==="V"?"mobility":t==="P"?"poison":t==="M"?"armor":t==="G"?"aggressive":t==="F"?"defender":t==="B"?"breakthrough":t==="R"?"regenerate":t==="L"?"life":t==="C"?"consistent":t==="O"?"overload":"whoops"}levelFun(t){return t.maxLevel===3?t.minLevel===1?[1,2,3]:[3]:t.maxLevel===t.minLevel?[t.minLevel]:t.maxLevel===4?[1,2,3,4]:[1,2]}}const Nn=new Fn;class Pn extends ne{packLeft=22;packTop=120;packBoundary=[this.packLeft-5,this.packTop-10,537,480];async drawPack(t,i){const r=k.clickMode!=="I",n=[],c=ie.fromBox(this.packBoundary),f=ie.fromBox(this.packBoundary,at.Right);t.filter(v=>v.pack).forEach(v=>{const w=this.coordCalcPack(v.index);if(v.key==="DRFT"){const x=O.getCard(v.param+"1");n.push(Tt.drawCard(x,i,...w).then(()=>this.drawRarity(i,x.rarity,w[0]+112,w[1]+4))),r&&c.addChild(ct.fromArr(v,Tt.highlightBounds(w)))}else f.addChild(ct.fromArr(v,Tt.highlightBounds(w),at.Right))}),await Promise.all(n),r&&c.childs.length>0&&ht.add(c),f.childs.length>0&&ht.add(f)}async drawList(t,i){let r=116;const n=570,c=[],f=gt.picksAsDeck,p=new ie(n,r,600,600,at.Both),v=t,w=gt.scrollIdx;gt.canPageDown&&await this.makeScroller(i,!1),gt.canPageUp&&await this.makeScroller(i,!0),v.filter(x=>!x.pack).forEach(x=>{if(x.index>=w&&x.index<w+gt.pageSize){const L=O.getCard(x.param);c.push(this.drawFaction(i,L.faction,n,r),this.drawRarity(i,L.rarity,n+28,r),this.drawText(i,`${f[x.index].num}x ${L.name}`,n+65,r+7,{colour:this.cYella}));const V=new ct(x,n,r-2,600,35,at.Both);p.addChild(V),r+=35}}),await Promise.all(c),ht.add(p)}coordCalcPack(t){const n=t%3,c=Math.floor(t/3);return[this.packLeft+n*176,this.packTop+c*235]}async makeScroller(t,i){const n=718-(i?47:0);await oe.makeVScroller(t,462,n,i,"SCRD")}async drawStats(t){const i=gt.stats;let r=this.packBoundary[0]+10;const n=this.packBoundary[1]+this.packBoundary[3]+80;await this.threeLine(t,r,n,["Creat:","Spell:","Total:"]),r+=75,await this.threeLine(t,r,n,i.getTotal()),await Promise.all(si.map(c=>{const f=i.getFactTotal(c);if(f[2]===0)return[Promise.resolve()];{r+=75;const p=this.threeLine(t,r,n,f),v=this.drawFaction(t,c,r-8,n-39);return[p,v]}}).flat())}async threeLine(t,i,r,n){const c={colour:"#ffd865",fontSize:18,fontName:"serif"},f=30;await Promise.all(n.map((p,v)=>this.drawText(t,p.toString(),i,r+f*v,c)))}async drawDraftMenu(t){await $t.titleText(383,"Draft Setup",t);const i=new bi;i.addHeading(1,"Opponent",28),i.addToggle(1,"DUMB BOT",27,"DI",gt.vsAI,!0),i.addToggle(1,"HUMAN",47,"DV",!gt.vsAI,!0),i.addHeading(1,"Rarity Filter",7);let r=391,n=i.colX[0]+20,c=i.colX[0]+122;await this.rarityButton(t,n,r,"L",gt.getRarity("L")),await this.rarityButton(t,c,r,"H",gt.getRarity("H")),r+=80,await this.rarityButton(t,n,r,"R",gt.getRarity("R")),await this.rarityButton(t,c,r,"C",gt.getRarity("C")),i.addBlank(1,3),i.addBasic(1,"MAIN MENU",16,"MM"),i.addHeading(2,"Draft Modes",5),i.addToggle(2,"GOOD PACKS",9,"GP",gt.fatPacks),i.addToggle(2,"LEGENDARY",17,"LD",gt.legDraft),i.addToggle(2,"OVERDRAFT",17,"OD",gt.overdraft),i.addBlank(2,3),i.addToggle(2,"ADVANCED",22,"VD",We.notDefault(!1));const f=i.colX[2]+3,p=i.colX[2]+124;let v=155;i.addHeading(3,"Sets",76),await this.chestButton(t,f,v,1,gt.getSet(1)),await this.chestButton(t,p,v,2,gt.getSet(2)),v+=88,await this.chestButton(t,f,v,3,gt.getSet(3)),await this.chestButton(t,p,v,4,gt.getSet(4)),v+=88,await this.chestButton(t,f,v,5,gt.getSet(5)),await this.chestButton(t,p,v,6,gt.getSet(6)),v+=88,await this.chestButton(t,f,v,7,gt.getSet(7)),i.addBlank(3,6),i.addBasic(3,"NEXT",68,"DN"),await i.draw(t)}async rarityButton(t,i,r,n,c){const f={key:"MNBT",zone:"N",host:"",param:k.enTil("DR",n)},p=`ui/button/rarity_${n}${c?"y":"n"}.png`;await this.drawSprite(t,p,i,r);const v=new ct(f,i,r,75,65,at.Both);ht.add(v)}async chestButton(t,i,r,n,c){const f={key:"MNBT",zone:"N",host:"",param:k.enTil("DT",n)};c&&await this.drawSprite(t,"icons/sets/chest-hl.png",i,r);const p=`icons/sets/Chest_Set${n}${c?"y":"n"}.png`;await this.drawSprite(t,p,i,r);const v=new ct(f,i,r,90,74,at.Both);ht.add(v)}}const Ai=new Pn;class Mn extends ne{async drawSets(t,i){let r=110;const n=100,c=[],f=new ie(n-50,r,450,600);t.filter(p=>p.key==="DSET").forEach(p=>{const v=parseInt(p.param),w=Ue[v],x=v===Lt.bucketIdx?"_h":"";c.push(this.drawText(i,w.name,n,r,{colour:this.cYella}),this.drawSprite(i,`icons/chest_small${x}.png`,n-48,r-5));const L=new ct(p,n-50,r-2,450,35,at.Both);f.addChild(L),r+=45}),ht.add(f),await Promise.all(c)}async drawList(t,i){let r=100;const n=570,c=42,f=33,p=[],v=new ie(n,r,460,600),w=new ie(n-c,r,f,600),x=t.filter(V=>V.key==="DPVW");t.filter(V=>V.key==="DECK").map(V=>{const Q=x.find(I=>I.param===V.param);return[V,Q]}).forEach(V=>{const Q=Kt.stockDeckByPram(V[0].param);p.push(this.drawFaction(i,Q.factions[0],n,r),this.drawText(i,Q.name,n+65,r+7,{colour:this.cYella})),Q.factions.length===2&&p.push(this.drawFaction(i,Q.factions[1],n+28,r));const I=new ct(V[0],n,r-2,460,35,at.Both);v.addChild(I),p.push(this.drawSprite(i,"icons/rarity/eye/legendary.png",n-c,r));const tt=new ct(V[1],n-c,r-2,f,35,at.Both);w.addChild(tt),r+=35}),await Promise.all(p),ht.add(v),ht.add(w)}packBoundary=[17,190,537,480];coordCalcPack(t){const n=t%3,c=Math.floor(t/3);return[22+n*176,200+c*235]}iAmError(t){const i=ft.get("game-ui");this.drawText(i,t,50,575,{colour:"#f5142e",fontSize:30})}async drawConstrMenu(t){const i=new bi,r=395;await $t.titleText(305,"Constructed Setup",t),i.addHeading(1,"Opponent",28),i.addToggle(1,"DUMB BOT",27,"CI",Lt.vsAI,!0),i.addToggle(1,"HUMAN",47,"CV",!Lt.vsAI,!0),i.addBlank(1,4),i.addBasic(1,"MAIN MENU",16,"MM"),i.addHeading(2,"Player 1",46);const n=Lt.p1.mode;i.addToggle(2,"PRE-CON",39,k.enTil("CP","A"),n==="CP",!0),i.addToggle(2,"RANDOM",36,k.enTil("CR","A"),n==="CR",!0),i.addToggle(2,"SCRAMBLE",30,k.enTil("CX","A"),n==="CX",!0),i.addToggle(2,"LOAD FILE",32,k.enTil("LK","A"),n==="LK"),n==="LK"&&await this.drawFileDeck(t,i.colX[1],r,Lt.p1.deck),i.addBlank(2,2),i.addToggle(2,"ADVANCED",22,"VC",We.notDefault(!0)),i.addHeading(3,"Player 2",44);const c=Lt.p2.mode;i.addToggle(3,"PRE-CON",39,k.enTil("CP","B"),c==="CP",!0),i.addToggle(3,"RANDOM",36,k.enTil("CR","B"),c==="CR",!0),i.addToggle(3,"SCRAMBLE",30,k.enTil("CX","B"),c==="CX",!0),i.addToggle(3,"LOAD FILE",32,k.enTil("LK","B"),c==="LK"),c==="LK"&&await this.drawFileDeck(t,i.colX[2],r,Lt.p2.deck),i.addBlank(3,2),i.addBasic(3,"NEXT",68,"CN"),await i.draw(t)}async drawFileDeck(t,i,r,n){const c=r+89;await this.drawText(t,n.name.slice(0,20),i,r+70,{colour:this.cYella,fontSize:18}),n.factions.length===1?await this.drawFaction(t,n.factions[0],i+96,c):(await this.drawFaction(t,n.factions[0],i+78,c),await this.drawFaction(t,n.factions[1],i+113,c))}}const ri=new Mn;class En extends ne{async drawExtrasMenu(t){await $t.titleText(269,"Game Options & Extras",t);const i=new bi,r=k.options;i.addHeading(1,"More Info",28),i.addBasic(1,"RULES",66,"RU"),i.addBasic(1,"INFO & FAQ",20,"FQ"),i.addHeading(1,"Online Play",13),i.addBasic(1,"KAELFORGE",22,"KF"),i.addBasic(1,"SF FUSION",33,"SF"),i.addBlank(1),i.addBasic(1,"MAIN MENU",16,"MM"),i.addHeading(2,"UI Modes",37);const n=this.logTxt(Pt.logMode);i.addBasic(2,n[0],n[1],"LM"),i.addToggle(2,"BIG CARDS",29,"BC",r.bigCards),i.addToggle(2,"ANIMATIONS",10,"AN",r.anim8),i.addHeading(2,"Game Modes",12),i.addToggle(2,"BIG HEALTH",20,"HH",r.highHealth),i.addToggle(2,"CHEATER",39,"CH",r.cheater),i.addToggle(2,"BATTLE BARK",13,"BB",r.bark),i.addHeading(3,"Playmat",43),i.addToggle(3,"VANILLA",43,"vanilla",r.playmat==="vanilla",!0),i.addToggle(3,"ALLOYIN",43,"alloyin",r.playmat==="alloyin",!0),i.addToggle(3,"NEKRIUM",38,"nekrium",r.playmat==="nekrium",!0),i.addToggle(3,"TEMPYS",51,"tempys",r.playmat==="tempys",!0),i.addToggle(3,"UTERRA",52,"uterra",r.playmat==="uterra",!0),await i.draw(t);const c=862,f=711;await this.drawText(t,k.ver,c,f+2,{fontSize:18,colour:"#7b68ee"}),await this.drawText(t,"18-Sep-2024",c,f+24,{fontSize:14,colour:"#7b68ee"});const p=b.basicAction("MNBT");p.param="VR",ht.add(new ct(p,c,f,90,44,at.Both));const v=958,w=697;await this.drawSprite(t,"gwg/gwg_red.png",v,w);const x=b.basicAction("MNBT");x.param="GW",ht.add(new ct(x,v,w,50,50,at.Both))}async drawAdvancedMenu(t,i){const r=new bi,n=k.options;await $t.titleText(311,"Advanced Options",t),r.addHeading(1,"Bot Brains",24),r.addToggle(1,"METAMIND",26,"BBM",J.brain==="M",!0),r.addToggle(1,"SAVANT",50,"BBS",J.brain==="S",!0),r.addToggle(1,"WURM",55,"BBW",J.brain==="W",!0),We.notDefault(i)?(r.addBlank(1),r.addBasic(1,"RESET ALL",34,"RO"),r.addBlank(1)):r.addBlank(1,3),r.addBasic(1,"BACK",69,"VB"),r.addHeading(2,"Bot Priorities",-1);const c=J.prefs;r.addLevel(2,"MINIONS",24,"BPM",c.minion),r.addLevel(2,"POTENCY",19,"BPP",c.potent),r.addLevel(2,"MENACE",28,"BPN",c.menace),r.addLevel(2,"LIFE GAIN",18,"BPG",c.lifeg),r.addLevel(2,"LIFE DRAIN",9,"BPD",c.lifed),r.addLevel(2,"DECK",52,"BPK",c.deck),r.addLevel(2,"HAND",47,"BPH",c.hand),i&&(r.addHeading(3,"Random Filter",-7),r.addToggle(3,"GOOD 1 & 2",26,"RF1",n.rfG1),r.addToggle(3,"GOOD 3 & 4",22,"RF3",n.rfG3),r.addToggle(3,"GOOD 5, 6 & 7",8,"RF5",n.rfG5),r.addToggle(3,"AVERAGE",40,"RFA",n.rfAv),r.addToggle(3,"JANK",70,"RFJ",n.rfJk),r.addToggle(3,"OFFICIAL",40,"RFO",n.rfOf)),await r.draw(t),await oe.makeIconButton(t,979,723,"HL","AH")}logTxt(t){const i="LOG: ";return t==="A"?[i+"AUTO",26]:t==="R"?[i+"RIGHT",21]:t==="B"?[i+"BELOW",18]:[i+"MENU",24]}}const Li=new En;class Rn extends ne{async drawMenu(t){let r=22;await this.drawSprite(t,"ui/button/constructed.png",778,r),ht.add(ct.fromArr(this.makeAction("C"),this.buttHLBounds(778,r),at.Both)),r=148,await this.drawSprite(t,"ui/button/draft.png",778,r),ht.add(ct.fromArr(this.makeAction("D"),this.buttHLBounds(778,r),at.Both)),r=508,await this.drawSprite(t,"ui/button/deck.png",778,r),ht.add(ct.fromArr(this.makeAction("B"),this.buttHLBounds(778,r),at.Both)),r=634,await this.drawSprite(t,"ui/button/info.png",778,r),ht.add(ct.fromArr(this.makeAction("I"),this.buttHLBounds(778,r),at.Both));const n=b.basicAction("DBUG");ht.add(new ct(n,757,349,74,70,at.Right))}buttBounds(t,i){return[t,i,242,113]}buttHLBounds(t,i){const n=[-3,-3,6,6];return this.buttBounds(t,i).map((c,f)=>c+n[f])}makeAction(t){return{zone:"N",key:"MENU",host:"",param:t}}}const Ln=new Rn;class Gi{active=!0;aId;moveX=[];moveY=[];dOrd=1;steps=0;target;targId;type;x=0;y=0;constructor(t,i,r,n){this.aId=t,this.type=i,this.target=r,this.targId=n}async draw(t){console.log("Draw not overridden")}async onEnd(){}extend(t,i,r){if(this.steps+=t,i||r){const n=new Array(t).fill(0);i&&(this.moveX=n.concat(this.moveX)),r&&(this.moveY=n.concat(this.moveY))}}setHand(t){const i=ue.fastCoord(t);this.x=i[0],this.y=i[1]}setField(t,i){const r=pe.coordCalc(t,i);this.x=r[0],this.y=r[1]}nudge(t,i){this.x+=t,this.y+=i}}class Ce extends Gi{constructor(t,i,r,n,c){super(t,i,r,n),this.drawId=c,this.steps=Y.speedCache.get(t)??0}drawId;async draw(t){Y.hcFrame.writeHC(Y.getCC(this.drawId),this.x,this.y)}static fader(t,i,r){return new Ce("D","F",t,i,r)}static fixed(t,i,r){return new Ce("C","X",t,i,r)}}class ki extends Gi{imgProm;constructor(t,i,r,n,c){super(t,i,r,n),this.steps=c}async draw(t){const i=await this.imgProm;Y.hcFrame.context.drawImage(i,this.x,this.y)}preLoad(t){this.imgProm=k.getSprite(k.imgRoot+t)}}class Ti extends Ce{endWrite=!1;constructor(t,i,r,n){super(t,"C",i,r,n)}async onEnd(){this.endWrite&&(this.target==="F"?pe.drawCacheCard(Y.getCC(this.drawId),this.x,this.y):this.target==="H"&&ue.drawCacheCard(Y.getCC(this.drawId),this.x,this.y))}}class Oe extends Gi{holf=1;img;schema;constructor(t,i,r){super(t,"S",i,r),this.img=Y.getSS(t),this.schema=Y.getSSS(t)??{count:0},this.steps=this.schema.count}async draw(t){this.holf>1&&(t=(t-t%this.holf)/this.holf);const i=this.schema.origins[t];Y.hcFrame.context.drawImage(this.img,i[0],i[1],this.schema.width,this.schema.height,this.x,this.y,this.schema.width,this.schema.height)}slow(t){this.holf=t,this.steps=this.schema.count*t}}class Gn extends Oe{offset;constructor(t,i,r){super(t,i,r),t==="U"?this.offset=[-1,0]:t==="N"?this.offset=[-2,-1]:t==="T"?this.offset=[-1,-1]:this.offset=[0,0]}budge(){this.x+=this.offset[0],this.y+=this.offset[1]}}class rr extends Oe{delay=0;setDelay(t){this.delay=t,this.steps+=t}async draw(t){t>=this.delay&&await super.draw(t-this.delay)}}class In extends ki{delay=0;setDelay(t){this.delay=t,this.steps+=t}async draw(t){t>=this.delay&&await super.draw(t)}}class Wn{ver="v0.10.8";gameWidth;gameHeight;spriteCache;dogAudio;clickMode;pxRatio=1;options;imgRoot;gameDiv;mx=1;my=1;mw=!1;mb=!1;constructor(){this.spriteCache=new Map,this.imgRoot="./img/",this.gameWidth=1024,this.gameHeight=768,this.gameDiv=document.getElementById("solforge"),this.dogAudio=document.getElementById("dogbark"),this.clickMode="M",this.options={anim8:!0,bark:!0,bigCards:!0,highHealth:!1,cheater:!1,playmat:"uterra",wasDrafting:!1,debug:!1,rfG1:!0,rfG3:!0,rfG5:!0,rfAv:!0,rfJk:!1,rfOf:!1}}randInt(t,i){return Math.floor(Math.random()*(i-t))+t}isUn(t){return typeof t>"u"}async sleep(t){return new Promise(i=>{setTimeout(()=>{i()},t)})}async getSprite(t){let i=this.spriteCache.get(t);return i||(i=this.imageLoader(t),this.spriteCache.set(t,i)),i}async bulkLoadP(t){await Promise.all(t.map(i=>this.getSprite(this.imgRoot+i)))}async bulkLoadS(t){for(let i=0;i<t.length;i++)await this.getSprite(this.imgRoot+t[i])}dogBark(){this.dogAudio.volume=.2,this.dogAudio.play()}toggleDebug(){const t=!this.options.debug;this.options.debug=t;const i="Debug mode "+(t?"ON":"OFF");ut.baseMode==="G"?y.debug(i):ri.iAmError(i)}enTil(...t){return t.join("~")}deTil(t){return t.split("~")}imageLoader(t){return new Promise(i=>{const r=new Image;r.onload=()=>{i(r)},r.src=t})}writeStorage(t,i){localStorage.setItem(t,i)}readStorage(t){return localStorage.getItem(t)}getStorS(t,i){const r=this.readStorage(t);return r===null?i:r}getStorB(t,i){const r=this.readStorage(t);return r===null?i:this.txt2bool(r)}putStorB(t,i){this.writeStorage(t,this.bool2txt(i))}bool2txt(t){return t?"Y":"N"}txt2bool(t){return t==="Y"}restoreOptions(){const t=this.options;t.anim8=this.getStorB("anim8",!0),t.bark=this.getStorB("bark",!1),t.bigCards=this.getStorB("bigCards",!0),t.cheater=this.getStorB("cheater",!1),t.highHealth=this.getStorB("highHealth",!1),t.playmat=this.getStorS("playmat","uterra"),Pt.logMode=this.getStorS("log","A"),t.rfG1=this.getStorB("rfG1",!0),t.rfG3=this.getStorB("rfG3",!0),t.rfG5=this.getStorB("rfG5",!0),t.rfAv=this.getStorB("rfAv",!0),t.rfJk=this.getStorB("rfJk",!1),t.rfOf=this.getStorB("rfOf",!1),J.brain=this.getStorS("brain","S"),We.prefSteamroll(!0)}toggleOption(t){k.options[t]=!k.options[t],this.putStorB(t,k.options[t])}togOptViaPram(t){const i=new Map([["HH","highHealth"],["CH","cheater"],["BB","bark"],["BC","bigCards"],["AN","anim8"],["RF1","rfG1"],["RF3","rfG3"],["RF5","rfG5"],["RFA","rfAv"],["RFJ","rfJk"],["RFO","rfOf"]]);this.toggleOption(i.get(t))}setMouse(t){this.clickMode==="M"&&(this.gameDiv.style.cursor=t,this.mb=t==="wait")}}const k=new Wn;window.onload=async()=>{await document.fonts.ready;let o=[];document.fonts.forEach(I=>{I.load(),o.push(I.loaded)}),await Promise.all(o),Pt.allCanvases.forEach(I=>{ft.register(I)}),k.pxRatio=window.devicePixelRatio;let t;(I=>{I.Neutral="N",I.Cancel="C",I.Down="D"})(t||(t={}));let i=!0,r=800,n="N",c;try{document.createEvent("TouchEvent"),k.clickMode="T",i=!1}catch{}const f=()=>{c&&(clearTimeout(c),c=void 0)},p=(I,tt,_)=>{const q=ht.hitTest(I,tt,_);q&&(k.setMouse("wait"),S.handleAction(q))},v=I=>{p(I.pageX,I.pageY,I.button)},w=I=>{I.touches.length>1?(n="C",f()):n==="N"&&(n="D",c=setTimeout(()=>{n="C";const tt=I.touches[0];p(tt.pageX,tt.pageY,at.ForceRight),c=void 0},r))},x=I=>{if(n==="D"){if(f(),n="N",I.changedTouches.length>0){const tt=I.changedTouches[0];p(tt.pageX,tt.pageY,at.Left)}}else I.touches.length===0&&(n="N")},L=I=>{ut.mode==="G"&&k.mb||(k.mx=I.pageX,k.my=I.pageY,k.mw||(k.mw=!0,k.sleep(120).then(()=>{k.mw=!1,ht.hitTest(k.mx,k.my,at.Left)?k.setMouse("pointer"):k.setMouse("default")})))},V=()=>{Pt.evtWait||(Pt.evtWait=!0,setTimeout(()=>{Pt.evtWait=!1,Pt.changeSize()},120))};window.onresize=V;let Q=k.gameDiv;i?(Q.addEventListener("click",v),Q.addEventListener("mousemove",L),Q.addEventListener("contextmenu",I=>(I.preventDefault(),v(I),!1))):(Q.addEventListener("touchstart",w),Q.addEventListener("touchend",x)),window.sfapi={details:I=>{Se.init(I)},setLog:I=>{J.setLog(I)},peekAll:()=>{J.peekAllCards()},peekDeck:()=>{J.peekDecks()},peekField:()=>{console.log(m.field)},dumb:()=>{console.log("Am I dumb? "+J.dumb)},debug:()=>{k.toggleDebug()}},k.restoreOptions(),Pt.changeSize(!0),bt.init(),bt.drawAll().then(()=>{const I=["ui/player_frame.png","ui/button/on.png","ui/button/off.png"];[1,2,3].forEach(_=>["C","S"].forEach(q=>["A","N","T","U"].forEach(wt=>{I.push("frames/small/lvl"+_+"_"+wt+q+".png")}))),["poison","regenerate","armor","aggressive","breakthrough","changed","consistent","defender","defensive","mobility","overload"].forEach((_,q)=>{I.push("icons/effects/"+_+".png"),q<3&&I.push("icons/effects/big/"+_+".png")}),["common","heroic","legendary","rare"].forEach(_=>{I.push("icons/rarity/new/"+_+".png")}),[1,2,3,4].forEach(_=>{I.push("ui/turn"+_+".png")}),["blue","green","purple","red","yellow"].forEach(_=>{I.push("frames/glow_"+_+".png")});const tt=new ne;for(let _=0;_<10;_++)["B","S"].forEach(q=>{(q==="B"?["G","Y"]:["B","Y"]).forEach(we=>{I.push(tt.numSpriteUrl(_,q,we))})});k.bulkLoadS(I)})}})();

(function(){"use strict";const Fe=["A","N","T","U"];const pe=["C","R","H","L"];const It=[{c:"AAK",f:"T",r:"L",s:1,t:"C",ds:["AH"]},{c:"ABB",f:"N",r:"R",s:4,t:"C",dp:["SL"],ds:["RG","ZB"]},{c:"ABM",f:"N",r:"C",s:5,t:"C",dp:["AB"]},{c:"AGC",f:"A",r:"C",s:1,t:"C",ds:["AR"]},{c:"AGK",f:"A",r:"L",s:2.1,t:"C",dp:["AR"]},{c:"AGP",f:"A",r:"C",s:1.1,t:"S",ds:["AR"]},{c:"AGW",f:"A",r:"R",s:4,t:"S",dp:["AH"],ds:["AR","MV"]},{c:"ASG",f:"T",r:"R",s:1,t:"S",ds:["MV","SP","LV"]},{c:"AMS",f:"A",r:"H",s:5,t:"C",dp:["MM"],ds:["MV"]},{c:"AFO",f:"A",r:"C",s:2.1,t:"C",dp:["LV"],ds:["SP"]},{c:"ATG",f:"A",r:"C",s:2,t:"C",dp:["SP"],ds:["AR","RB"]},{c:"ATP",f:"U",r:"H",s:3,t:"C",dn:["SP","CD"]},{c:"ART",f:"U",r:"H",s:2.1,t:"C",dp:["MU","SP","PL"]},{c:"ATS",f:"T",r:"C",s:6,t:"C",ds:["SP","MV"]},{c:"AGM",f:"T",r:"L",s:2.2,t:"C",dp:["XA"],ds:["RG","AR","MV"]},{c:"ALG",f:"A",r:"R",s:1,t:"C",ds:["AH"]},{c:"AHL",f:"A",r:"H",s:1,t:"C",dp:["HL"],ds:["RB"]},{c:"ALS",f:"A",r:"H",s:2,t:"C",ds:["AH","MV"]},{c:"ASB",f:"A",r:"L",s:6,t:"C",dp:["MS","SB"]},{c:"AAA",f:"A",r:"L",s:5.1,t:"C",dp:["HL"],dn:["FC","AG","BN"]},{c:"ABE",f:"A",r:"H",s:5.1,t:"S",ds:["HL","TD"],dn:["GW"]},{c:"ATZ",f:"A",r:"C",s:4,t:"S",ds:["FR","AL","SP"]},{c:"AEC",f:"U",r:"L",s:5,t:"S",ds:["GW"]},{c:"ARB",f:"A",r:"H",s:4,t:"C",ds:["AR","RB"],dn:["TK","LZ"]},{c:"AEN",f:"A",r:"C",s:2,t:"C",dp:[],ds:["RB","AR"],dn:[]},{c:"APM",f:"A",r:"H",s:2,t:"C",dp:["MA","LV"],ds:["SP"]},{c:"AQE",f:"T",r:"C",s:1,t:"S",ds:["HR"]},{c:"AGD",f:"U",r:"L",s:1,t:"C",dp:["LG"],ds:["DR"]},{c:"AFS",f:"A",r:"L",s:1,t:"C",dp:["RB"],ds:["FR","VT"]},{c:"AWU",f:"T",r:"R",s:6,t:"C",dp:["MV"],ds:["BN"]},{c:"ASQ",f:"N",r:"L",s:6,t:"C",ds:["RV"]},{c:"AOP",f:"A",r:"R",s:7,t:"S",ds:["AH"]},{c:"AMD",f:"T",r:"H",s:5,t:"C",dp:["FC"],ds:["AG"]},{c:"ABR",f:"T",r:"C",s:2,t:"C",dp:["FC"]},{c:"AFR",f:"T",r:"H",s:3.1,t:"C",dp:["MT","SP"],ds:["CS"]},{c:"AMY",f:"T",r:"C",s:1,t:"C",dp:["FC"]},{c:"ABL",f:"T",r:"R",s:1,t:"S",ds:["FC"]},{c:"ATT",f:"T",r:"L",s:4.1,t:"C",ds:["FC","AG","AS"]},{c:"AMP",f:"A",r:"H",s:7,t:"C",ds:["RB","AR"]},{c:"AGU",f:"T",r:"R",s:2.1,t:"C",ds:["WL","MV"]},{c:"AIV",f:"T",r:"H",s:1,t:"C",dp:["MT"],ds:["RK"]},{c:"ATI",f:"N",r:"L",s:7.2,t:"C",dp:["SP"],ds:["FR","MV","DR"]},{c:"BRS",f:"A",r:"C",s:5,t:"C",dn:["FC","AG","BN"]},{c:"BTB",f:"A",r:"R",s:5,t:"C",dp:["AR"],ds:["RB","DI"]},{c:"BTH",f:"U",r:"R",s:3,t:"C",ds:["DI","CS"]},{c:"BTI",f:"A",r:"C",s:4,t:"C",ds:["MM","AL"]},{c:"BTN",f:"A",r:"H",s:1,t:"C",ds:["NX","AH"]},{c:"BBB",f:"U",r:"H",s:4,t:"C",ds:["CS","UD"]},{c:"BLH",f:"T",r:"L",s:2,t:"C",dp:["SP"],ds:["AG","TK","GW","SF"]},{c:"BFT",f:"N",r:"C",s:5,t:"S",dp:["UD"]},{c:"BZH",f:"T",r:"H",s:7.2,t:"S",ds:["BN"],dn:["MN"]},{c:"BSP",f:"N",r:"C",s:2.2,t:"C",ds:["RK"]},{c:"BWK",f:"N",r:"R",s:1,t:"C",ds:["RV","ZB"]},{c:"BLW",f:"N",r:"R",s:3,t:"C",ds:["ZB","CS"]},{c:"BTD",f:"T",r:"L",s:7,t:"C",ds:["MV","AG","DR","BN"]},{c:"BZS",f:"T",r:"C",s:5,t:"C",ds:["MV","FC"]},{c:"BBR",f:"A",r:"C",s:6,t:"S",ds:["AR","SV"]},{c:"BBD",f:"N",r:"C",s:6,t:"S",ds:["SV"]},{c:"BBL",f:"T",r:"C",s:6,t:"S",ds:["SV"]},{c:"BBN",f:"U",r:"C",s:6,t:"S",ds:["SV"]},{c:"BSR",f:"N",r:"R",s:1,t:"C",ds:["AB","RV"]},{c:"BMY",f:"T",r:"H",s:2.1,t:"C",ds:["MV"]},{c:"BSW",f:"T",r:"C",s:3,t:"C",ds:["MS"]},{c:"BWW",f:"T",r:"H",s:4,t:"C",ds:["MV"]},{c:"BTM",f:"U",r:"H",s:1,t:"S",ds:["PL","RV","RP"]},{c:"BLP",f:"U",r:"H",s:7.2,t:"S",ds:["PS"],dn:["MT"]},{c:"BAW",f:"U",r:"R",s:2,t:"C",ds:["FC"]},{c:"BWG",f:"U",r:"C",s:1,t:"C",ds:["PL"]},{c:"BTR",f:"U",r:"H",s:3.1,t:"C",dp:["MU"],ds:["CS","FR"]},{c:"BWD",f:"U",r:"C",s:2,t:"C",ds:["PL","GW","SF","TK"]},{c:"BOF",f:"N",r:"C",s:7,t:"C",dp:["AB"],ds:["LG","SV"]},{c:"BSG",f:"A",r:"L",s:1,t:"C",ds:["RB","MV","AR"]},{c:"BSS",f:"A",r:"L",s:1,t:"C",dp:["RB"],ds:["AR"]},{c:"BTS",f:"U",r:"C",s:1.1,t:"C",ds:["PL","TK","GW"]},{c:"BST",f:"T",r:"L",s:4,t:"C",dp:["RP"],ds:["MS"]},{c:"BWT",f:"U",r:"L",s:4.2,t:"C",dp:["DI"],ds:["RP","HR"]},{c:"BRH",f:"N",r:"R",s:5,t:"C",ds:["AB"]},{c:"BWH",f:"A",r:"R",s:1,t:"S",dp:["AR"]},{c:"BWN",f:"A",r:"H",s:7,t:"C",ds:["AR"]},{c:"BRN",f:"T",r:"R",s:3,t:"S",ds:["BN","TD"]},{c:"BZD",f:"N",r:"R",s:2,t:"C",dp:["QT"],ds:["DR","RG","MV"]},{c:"BFM",f:"N",r:"H",s:2.3,t:"C",dp:["QT"],ds:["MV","AL"]},{c:"BSM",f:"T",r:"H",s:2,t:"C",dp:["QN"],ds:["RV","AG"]},{c:"CKB",f:"N",r:"H",s:5,t:"C",ds:["RV"]},{c:"CDT",f:"U",r:"R",s:1,t:"C",ds:["PL","PS"]},{c:"CMF",f:"N",r:"R",s:4,t:"C",ds:["AS"]},{c:"CTL",f:"T",r:"L",s:1,t:"S",ds:["XA"]},{c:"CCS",f:"N",r:"C",s:3,t:"C",ds:["RG"]},{c:"CDM",f:"T",r:"H",s:7,t:"C",ds:["YT","BN"]},{c:"CHY",f:"U",r:"C",s:1,t:"C",ds:["RG"]},{c:"CSR",f:"U",r:"C",s:5,t:"C",ds:["PS"]},{c:"CSL",f:"N",r:"C",s:6,t:"C",ds:["RG"]},{c:"CGG",f:"N",r:"H",s:7.1,t:"C",dp:["HL"],ds:["TK","LZ"]},{c:"CHV",f:"N",r:"L",s:2,t:"C",dp:["FB"],ds:["MV","RV"]},{c:"CCC",f:"N",r:"H",s:7.3,t:"S",dp:["ZB"],ds:["SV","TK","FR"]},{c:"CRS",f:"A",r:"R",s:3,t:"C",dp:["MM"],ds:["LV"],dn:[]},{c:"COD",f:"T",r:"R",s:4,t:"S",dp:["UD"],dn:["GW"]},{c:"CHT",f:"T",r:"R",s:7,t:"S",dn:["GW"]},{c:"CTI",f:"N",r:"C",s:1.1,t:"C",dp:["AL"],ds:["AB"]},{c:"CHA",f:"U",r:"R",s:2.1,t:"C",dn:["MV"]},{c:"CHH",f:"U",r:"C",s:2,t:"C",dp:["GW"]},{c:"CHR",f:"U",r:"L",s:1,t:"C",ds:["PL","MS","LV","RG"]},{c:"CBB",f:"T",r:"C",s:3,t:"C",dp:["UD"]},{c:"CDC",f:"T",r:"C",s:2,t:"C",ds:["WL"]},{c:"CFB",f:"T",r:"H",s:1,t:"C",ds:["FC"]},{c:"CNM",f:"T",r:"C",s:2,t:"C"},{c:"CSW",f:"T",r:"L",s:2.3,t:"C",ds:["DR","MV"]},{c:"CTG",f:"A",r:"C",s:3,t:"C",ds:["RB","WL"]},{c:"CCT",f:"T",r:"R",s:2,t:"C",ds:["MV","FC"]},{c:"CFG",f:"T",r:"C",s:2,t:"S"},{c:"CGL",f:"N",r:"H",s:3,t:"C",dp:["AB"],ds:["FR"]},{c:"CSU",f:"N",r:"R",s:1,t:"S",ds:["FR"]},{c:"CCR",f:"N",r:"C",s:1,t:"C",dp:["SF"],ds:["AB","LZ"]},{c:"CSB",f:"N",r:"C",s:2,t:"C",ds:["ZB","TK","VG"]},{c:"CNT",f:"A",r:"R",s:5,t:"S",ds:["AL","AH"]},{c:"CWK",f:"T",r:"C",s:3,t:"C",ds:["DI","MV"]},{c:"CRC",f:"A",r:"R",s:2,t:"C",ds:["RB","RK","WL"]},{c:"CMR",f:"A",r:"L",s:7.1,t:"C",dp:["RP"],ds:["MM","AR","AL"]},{c:"CYC",f:"N",r:"H",s:2,t:"C",dp:["MN","SP"],ds:["BN","LG"]},{c:"CYS",f:"N",r:"C",s:4,t:"C",ds:["TK","VG"]},{c:"CYW",f:"N",r:"R",s:7,t:"S",ds:["LG","BN"]},{c:"CTW",f:"N",r:"C",s:1,t:"S",dp:["AL"],ds:["RV"]},{c:"CTV",f:"U",r:"H",s:1,t:"S",dp:["PL"],ds:["RP"]},{c:"CYR",f:"T",r:"H",s:7.1,t:"C",dn:["FC"],ds:["MV"]},{c:"CAG",f:"A",r:"R",s:1,t:"S",ds:["NX","FR","LV"]},{c:"CBS",f:"A",r:"C",s:2.1,t:"S",dp:["MA"],ds:["AH","AR"]},{c:"CEX",f:"A",r:"H",s:7.1,t:"S",ds:["AH","AR","HL"]},{c:"CIN",f:"A",r:"R",s:1.1,t:"C",dp:["AH"]},{c:"CSH",f:"A",r:"C",s:3,t:"C",ds:["AR"]},{c:"CSG",f:"A",r:"C",s:2,t:"S",ds:["AR"]},{c:"CTM",f:"N",r:"L",s:7.3,t:"C",dp:["AL"],ds:["SV"]},{c:"DFR",f:"N",r:"H",s:2,t:"C",dp:["AL"]},{c:"DHC",f:"N",r:"H",s:6,t:"C",ds:["SP","RG"]},{c:"DHW",f:"N",r:"R",s:1,t:"C",dp:["SP"],ds:["RG"]},{c:"DRS",f:"U",r:"C",s:6,t:"C",dp:["DF"],ds:["PL"]},{c:"DSS",f:"N",r:"R",s:1,t:"C",dp:["MN"],ds:["ZB"]},{c:"DSW",f:"N",r:"C",s:6,t:"C",dp:["DF"],ds:["LG","BN"]},{c:"DSE",f:"A",r:"C",s:6,t:"C",dp:["DF"],ds:["RB","AH"]},{c:"DSA",f:"T",r:"C",s:6,t:"C",dp:["DF"]},{c:"DCR",f:"N",r:"R",s:2,t:"S",ds:["RV"]},{c:"DSK",f:"N",r:"C",s:1,t:"C",ds:["TK","SF","VG"]},{c:"DPO",f:"N",r:"H",s:7.2,t:"S",dp:["AL"],ds:["TK","RV"],dn:["MA"]},{c:"DBA",f:"U",r:"H",s:1,t:"C",dp:["GW"]},{c:"DBP",f:"U",r:"C",s:1,t:"C",ds:["UD"]},{c:"DMR",f:"U",r:"C",s:2,t:"C",ds:["DI"]},{c:"DBR",f:"U",r:"C",s:1,t:"C"},{c:"DFS",f:"A",r:"C",s:7,t:"S",ds:["AR","TD"]},{c:"DCS",f:"A",r:"L",s:2,t:"C",ds:["LV"]},{c:"DPG",f:"U",r:"H",s:7,t:"C",ds:["PS"]},{c:"DWW",f:"N",r:"C",s:6,t:"C",dn:["AG"]},{c:"DDF",f:"U",r:"R",s:5,t:"S",ds:["RP","UD","TD"]},{c:"DGZ",f:"A",r:"R",s:2,t:"S",ds:["AL"],dn:["GW"]},{c:"DBN",f:"N",r:"C",s:4,t:"C",ds:["AL"]},{c:"DOV",f:"N",r:"R",s:7,t:"C",ds:["LG","BN"]},{c:"DDS",f:"A",r:"H",s:4.2,t:"S",dp:["QN"],ds:["AL"]},{c:"DIS",f:"T",r:"R",s:1,t:"S",ds:["BN"]},{c:"DSV",f:"U",r:"R",s:2,t:"S",dp:["PS"],ds:["FR"]},{c:"DDD",f:"N",r:"L",s:1,t:"C",ds:["MV","RV","DR"]},{c:"DPB",f:"A",r:"L",s:5.2,t:"C",ds:["RB","RP"]},{c:"DZD",f:"U",r:"L",s:3,t:"C",dp:["MS"],ds:["AG"]},{c:"DRE",f:"T",r:"L",s:5,t:"S",ds:["BN"]},{c:"DKS",f:"T",r:"R",s:7,t:"C",dn:["GW"]},{c:"DGS",f:"U",r:"H",s:6,t:"C",ds:["RV"],dn:["DR"]},{c:"DGW",f:"T",r:"L",s:5.2,t:"S",dp:["DR"],ds:["AG","TK"]},{c:"DRD",f:"N",r:"L",s:7,t:"C",dp:["LZ"],ds:["TK","AB"]},{c:"DBT",f:"N",r:"H",s:1,t:"S",ds:["RV"]},{c:"DTR",f:"U",r:"L",s:6,t:"C",dp:["MS","SQ"],ds:["FR","RG","PL"]},{c:"DFB",f:"N",r:"R",s:1,t:"C",dp:["AB"],ds:["BN","SF","LZ","SV"]},{c:"DMW",f:"A",r:"L",s:1.1,t:"C",dp:["MM","CD"],ds:["AH"]},{c:"DCH",f:"U",r:"C",s:1,t:"S",ds:["LG"]},{c:"DTD",f:"N",r:"L",s:4.2,t:"C",dp:["DR"],ds:["MV"]},{c:"DHM",f:"U",r:"R",s:6,t:"C",dp:["DF"],ds:["SB"]},{c:"DSZ",f:"N",r:"C",s:2,t:"C",ds:["ZB","RG"]},{c:"DYB",f:"U",r:"R",s:2,t:"S",dp:["GW","TK"]},{c:"DBQ",f:"N",r:"H",s:3,t:"C",dp:["QU"],ds:["TK","RV","PS"]},{c:"DYS",f:"N",r:"R",s:3,t:"S",dp:["QU"]},{c:"DYL",f:"U",r:"L",s:3,t:"C",dp:["QN","LG"],ds:["TK"]},{c:"EBW",f:"N",r:"C",s:3,t:"C",dp:["UD"]},{c:"ESD",f:"N",r:"L",s:7,t:"C",ds:["FR"]},{c:"ESK",f:"N",r:"H",s:2,t:"C",dp:["RK"],ds:["UD"]},{c:"EHW",f:"U",r:"L",s:1,t:"C",ds:["GW","TK"]},{c:"ETN",f:"A",r:"C",s:1,t:"S",ds:["AL"]},{c:"EWE",f:"T",r:"H",s:2,t:"C",dp:["MV"]},{c:"EVT",f:"U",r:"L",s:6.1,t:"S",dp:["MU"],ds:["TD"]},{c:"ENP",f:"A",r:"H",s:1,t:"S",ds:["FR","WL"]},{c:"ESU",f:"A",r:"R",s:1,t:"S",ds:["CD","TD","FR"]},{c:"ENR",f:"U",r:"C",s:1,t:"S"},{c:"EPD",f:"N",r:"H",s:1,t:"S",dn:["GW"]},{c:"EPH",f:"A",r:"L",s:4.2,t:"C",dp:["CD"],ds:["TK"]},{c:"ESG",f:"A",r:"H",s:4.1,t:"C",dp:["QU","LV"],ds:["TK","GW"]},{c:"ESC",f:"A",r:"H",s:2,t:"C",dp:["QU"],ds:["RB","TK","GW","AR"]},{c:"ESP",f:"U",r:"H",s:2.3,t:"C",dp:["QA"],ds:["AR","HR"]},{c:"EWT",f:"U",r:"R",s:2,t:"C",dp:["QA"],ds:["AR"]},{c:"EHN",f:"U",r:"C",s:1,t:"C",ds:["TK","GW"]},{c:"EWV",f:"U",r:"C",s:7,t:"S",ds:["TD","TK"]},{c:"EFA",f:"T",r:"R",s:5,t:"S",ds:["MV"]},{c:"EFM",f:"T",r:"L",s:2.1,t:"C",dp:["FC","SP"],ds:["FR"]},{c:"EFP",f:"T",r:"L",s:1,t:"C",dp:["RK"],ds:["MV","TK","VG"]},{c:"EFE",f:"U",r:"L",s:5.2,t:"C",ds:["PL","TK","GW","UD"]},{c:"EXD",f:"N",r:"H",s:1,t:"S",ds:["LG","BN","SF"]},{c:"FWB",f:"U",r:"C",s:2.3,t:"C"},{c:"FWR",f:"U",r:"C",s:1,t:"C"},{c:"FFG",f:"U",r:"C",s:4,t:"C",ds:["DI"]},{c:"FST",f:"N",r:"R",s:4,t:"C",ds:["ZB","TK","VG"]},{c:"FWK",f:"N",r:"C",s:1,t:"C",ds:["ZB","TK","VG"]},{c:"FIN",f:"U",r:"C",s:1,t:"S",ds:["FC"]},{c:"FRR",f:"U",r:"H",s:1,t:"S",dp:["GW"]},{c:"FVA",f:"T",r:"H",s:1,t:"S",ds:["MV"]},{c:"FSL",f:"N",r:"C",s:7,t:"C"},{c:"FFU",f:"T",r:"H",s:1,t:"C",ds:["YT"]},{c:"FLH",f:"T",r:"C",s:4,t:"C",ds:["AS"]},{c:"FMS",f:"T",r:"C",s:2,t:"C",ds:["MV"]},{c:"FSM",f:"T",r:"H",s:1,t:"S",ds:["MS"],dn:["GW"]},{c:"FOR",f:"T",r:"C",s:7,t:"S",ds:["TD","AH"]},{c:"FBC",f:"T",r:"L",s:1,t:"C",dp:["FC"],dn:["GW"]},{c:"FBI",f:"T",r:"H",s:2.2,t:"C",dp:["MT","SP"]},{c:"FFS",f:"T",r:"R",s:2,t:"C",ds:["AH"]},{c:"FJT",f:"T",r:"C",s:5,t:"S",dp:["UD"]},{c:"FLN",f:"T",r:"R",s:2,t:"S",ds:["BN"]},{c:"FRI",f:"T",r:"C",s:3,t:"C",dp:["WL"]},{c:"FSS",f:"T",r:"R",s:1,t:"C",dp:["MT"],ds:["BN"]},{c:"FLS",f:"T",r:"C",s:1,t:"C",dp:["SP"],ds:["BN"]},{c:"FSH",f:"T",r:"R",s:1,t:"C",ds:["AG","FC"]},{c:"FFD",f:"N",r:"H",s:1,t:"C",ds:["AB","TK","VG"]},{c:"FRV",f:"N",r:"H",s:3,t:"C",ds:["AB","RV","CS"]},{c:"FSC",f:"A",r:"C",s:6,t:"C",dp:["RB"],ds:["VG","AR"]},{c:"FSP",f:"A",r:"L",s:1,t:"C",ds:["UD"]},{c:"FPR",f:"T",r:"C",s:2.1,t:"C"},{c:"FFL",f:"A",r:"C",s:1,t:"S",ds:["AR"]},{c:"FGA",f:"A",r:"C",s:1,t:"C",ds:["RB","WL","VT"]},{c:"FGB",f:"A",r:"R",s:1,t:"C",ds:["RB","VT"]},{c:"FGD",f:"A",r:"H",s:3,t:"C",dp:["VT"],ds:["RB"]},{c:"FGG",f:"A",r:"H",s:1,t:"C",dp:["VT"],ds:["RB","TK"]},{c:"FOL",f:"A",r:"H",s:3.1,t:"C",dp:["MA"],ds:["CS"]},{c:"FPM",f:"A",r:"R",s:3,t:"C",ds:["RB","AR","CS"]},{c:"FPS",f:"A",r:"C",s:1,t:"C",ds:["RB","AR"]},{c:"FWS",f:"A",r:"H",s:6,t:"C",ds:["RB","AR"]},{c:"FLC",f:"A",r:"L",s:7.2,t:"C",ds:["AR"],dn:["SQ"]},{c:"FFM",f:"T",r:"H",s:3,t:"C",dp:["MV"]},{c:"FMD",f:"T",r:"L",s:3,t:"C",dp:["RK"],ds:["TK","GW","MV","DR"]},{c:"FSK",f:"T",r:"C",s:2.3,t:"S",ds:["AH"]},{c:"FKS",f:"T",r:"H",s:6,t:"C",dp:["SQ"],ds:["YT","BN"]},{c:"FWT",f:"U",r:"H",s:1,t:"C",ds:["UD","FR","GW"]},{c:"FZS",f:"T",r:"R",s:1,t:"S",ds:["RV"]},{c:"GOS",f:"A",r:"L",s:4,t:"S",dp:["AR"]},{c:"GHS",f:"U",r:"C",s:2.2,t:"C",dp:["GW"],ds:["PL","SQ","LG"]},{c:"GHB",f:"U",r:"R",s:1,t:"C",ds:["DI","RV"]},{c:"GHR",f:"U",r:"H",s:4.2,t:"C",dp:["QT"],ds:["FC","LG","MV","DI"]},{c:"GRN",f:"N",r:"C",s:2,t:"S",ds:["RG"]},{c:"GTH",f:"N",r:"C",s:1,t:"S"},{c:"GSC",f:"U",r:"C",s:1,t:"C",ds:["PS"]},{c:"GMP",f:"A",r:"L",s:1,t:"C",ds:["MM","CD"]},{c:"GTT",f:"T",r:"L",s:2,t:"C",dp:["RK"],ds:["RV"]},{c:"GCL",f:"T",r:"C",s:1,t:"C",ds:["WL"]},{c:"GCR",f:"T",r:"C",s:2,t:"S",ds:["FR","BN"],dn:["WL","SQ"]},{c:"GLF",f:"N",r:"C",s:2,t:"C",ds:["AB"]},{c:"GRW",f:"N",r:"C",s:1,t:"C",dp:["AL"],ds:["RV"]},{c:"GSW",f:"N",r:"C",s:2,t:"C"},{c:"GVS",f:"U",r:"C",s:2,t:"C",ds:["VG","LG"]},{c:"GSS",f:"U",r:"C",s:1,t:"C",ds:["LG"]},{c:"GPV",f:"U",r:"C",s:6,t:"C",ds:["PL"],dn:["MV"]},{c:"GBG",f:"N",r:"C",s:1,t:"C",ds:["AB","VG","BN"]},{c:"GGE",f:"N",r:"C",s:2,t:"C"},{c:"GGH",f:"N",r:"C",s:1,t:"C",ds:["ZB","RG"]},{c:"GRP",f:"N",r:"R",s:1,t:"S",dp:["SF"],ds:["RV","FR"]},{c:"GGB",f:"N",r:"H",s:6,t:"C",dp:["DF"]},{c:"GGD",f:"N",r:"L",s:1,t:"C",dp:["SV","SB"]},{c:"GGR",f:"N",r:"L",s:3,t:"C",ds:["SF","MV","SV"]},{c:"GGP",f:"N",r:"H",s:1,t:"C",dp:["RV"],ds:["MV","SV"]},{c:"GGS",f:"N",r:"C",s:1,t:"C",ds:["MV"]},{c:"GGW",f:"N",r:"H",s:6.1,t:"C",dp:["SV"]},{c:"GRM",f:"N",r:"R",s:2,t:"S",ds:["GW"],dn:["GW"]},{c:"GHT",f:"U",r:"C",s:1,t:"C"},{c:"GMR",f:"U",r:"C",s:1,t:"C",ds:["TK","VG","PL"]},{c:"GSF",f:"A",r:"H",s:7.3,t:"C",dp:["MM"],ds:["AR"]},{c:"GAS",f:"A",r:"H",s:7,t:"S",dp:["VT"],ds:["FR","TK","NX"]},{c:"HMF",f:"T",r:"H",s:3,t:"C",ds:["YT","MV"]},{c:"HOS",f:"U",r:"R",s:7,t:"C",dp:["TK","SB"]},{c:"HTR",f:"U",r:"L",s:1,t:"C",ds:["RG","SQ","PL"]},{c:"HAR",f:"A",r:"C",s:1,t:"C",ds:["AH"]},{c:"HFA",f:"N",r:"H",s:1,t:"C",dp:["MN"],ds:["AB","RG"]},{c:"HOD",f:"T",r:"R",s:3,t:"C",ds:["BN"],dn:["TK","LZ"]},{c:"HMO",f:"U",r:"C",s:7,t:"C",ds:["DI"]},{c:"HRM",f:"A",r:"H",s:6,t:"C",ds:["RB","AR"]},{c:"HWM",f:"A",r:"L",s:1,t:"C",dp:["AH"],ds:["MV","RG","AR"]},{c:"HVE",f:"U",r:"R",s:7,t:"C",ds:["PS"]},{c:"HOX",f:"N",r:"R",s:4,t:"S",dp:["UD"],ds:["BN","LG"]},{c:"HGS",f:"N",r:"R",s:1,t:"S",ds:["AH","AL"]},{c:"HTP",f:"U",r:"C",s:1,t:"C",ds:["TK","GW"]},{c:"IBF",f:"T",r:"R",s:1,t:"S",ds:["HR","GW"]},{c:"IGR",f:"T",r:"L",s:6.1,t:"S",ds:["TD","BN"]},{c:"ITO",f:"T",r:"R",s:2,t:"S",dp:["MT","SP"],ds:["FR","BN"]},{c:"ISB",f:"T",r:"C",s:7,t:"C"},{c:"IKA",f:"T",r:"L",s:6,t:"C",dp:["FB"],ds:["BN"]},{c:"IME",f:"N",r:"L",s:5,t:"S",ds:["TK","GW"]},{c:"IDF",f:"N",r:"H",s:7,t:"C",dp:["UD","LZ"],ds:["TK","ZB"]},{c:"IRT",f:"N",r:"L",s:6.1,t:"S",dp:["MN"],ds:["TD","RG","SL"]},{c:"IVS",f:"N",r:"C",s:4,t:"S",ds:["RG","SL"]},{c:"ICD",f:"N",r:"L",s:5,t:"C",dp:["RG"],ds:["VG","SV","MV"]},{c:"IWC",f:"A",r:"C",s:1,t:"C",ds:["RB","MV"]},{c:"IBA",f:"A",r:"L",s:7,t:"C",dp:["FB"],ds:["AR","AL"],dn:["TD"]},{c:"IHA",f:"A",r:"L",s:2,t:"C",dp:["FB"],ds:["AR","AL"]},{c:"IBR",f:"A",r:"C",s:3,t:"C",dp:["UD"],ds:["AH"]},{c:"IMD",f:"A",r:"L",s:3,t:"C",ds:["RB","BN","MS"]},{c:"IMA",f:"A",r:"L",s:2.3,t:"C",dp:["CD"],ds:["FR"]},{c:"IZK",f:"T",r:"L",s:3,t:"C",ds:["FC","RP","BN"]},{c:"JPK",f:"A",r:"C",s:1,t:"S",dp:["UD"],ds:["AH","MV","FC"]},{c:"KDC",f:"T",r:"C",s:3,t:"C"},{c:"KSB",f:"T",r:"C",s:6,t:"C",ds:["DI"]},{c:"KAW",f:"T",r:"L",s:1.1,t:"C",dp:["SP"],ds:["XA"]},{c:"KOD",f:"N",r:"L",s:1,t:"C",dp:["LZ"],ds:["ZB"]},{c:"KBE",f:"U",r:"H",s:5,t:"C",ds:["PS","MV"]},{c:"KIW",f:"A",r:"L",s:3,t:"C",dp:["LV","FB"]},{c:"KTS",f:"U",r:"H",s:4,t:"C",dp:["RP"],ds:["TK"]},{c:"KKK",f:"T",r:"L",s:2,t:"C",dp:["FB"],ds:["AG","FC"]},{c:"LOD",f:"U",r:"L",s:4,t:"S",ds:["PS"]},{c:"LFA",f:"T",r:"H",s:4,t:"C",ds:["FC","AH"]},{c:"LKP",f:"U",r:"L",s:1,t:"C",ds:["PL","TK"]},{c:"LGT",f:"N",r:"R",s:2.3,t:"C",dp:["SL"],ds:["ZB","RG"]},{c:"LLD",f:"N",r:"H",s:5,t:"C",ds:["TK"],dn:["FR"]},{c:"LLG",f:"U",r:"H",s:5,t:"C",ds:["TK"],dn:["MV"]},{c:"LLS",f:"A",r:"H",s:5,t:"C",ds:["RB","TK"],dn:["TK","LZ"]},{c:"LLT",f:"T",r:"H",s:5,t:"C",ds:["TK"],dn:["LG"]},{c:"LLV",f:"U",r:"H",s:7.1,t:"C",dp:["PS"],ds:["TK"]},{c:"LMD",f:"N",r:"L",s:7.1,t:"C",ds:["DR","TK","MV"]},{c:"LBD",f:"U",r:"H",s:1,t:"C",dp:["GW"]},{c:"LSS",f:"U",r:"R",s:1,t:"C",dp:["MU"],ds:["UD"]},{c:"LBL",f:"U",r:"R",s:1,t:"C",ds:["LG"]},{c:"LBC",f:"U",r:"H",s:7,t:"C",dp:["FC","MU"],ds:["LG"]},{c:"LBR",f:"T",r:"C",s:1,t:"S",dp:["FC"],ds:["AG"]},{c:"LSK",f:"T",r:"C",s:1,t:"S",ds:["BN"]},{c:"LTM",f:"T",r:"C",s:7,t:"C",ds:["AG"]},{c:"LWY",f:"T",r:"C",s:1,t:"C",ds:["AG"]},{c:"LSP",f:"A",r:"C",s:1,t:"C",dp:["AH"],ds:["AR"]},{c:"LVH",f:"U",r:"L",s:7,t:"C",dp:["MS","PS","SQ"],ds:["TK","GW"]},{c:"LTU",f:"U",r:"L",s:7,t:"C",ds:["TK","GW"]},{c:"LCE",f:"A",r:"L",s:5,t:"S",ds:["CD"]},{c:"LUC",f:"T",r:"L",s:4.2,t:"C",dp:["MV"],ds:["XA","YT"]},{c:"LMV",f:"N",r:"L",s:1,t:"C",ds:["TK","LZ","GW"]},{c:"LHY",f:"U",r:"C",s:2,t:"C",ds:["RG"]},{c:"LYR",f:"U",r:"C",s:4,t:"S",ds:["LG","HR"]},{c:"LYS",f:"U",r:"R",s:3,t:"S",ds:["TD"]},{c:"MMH",f:"T",r:"C",s:1,t:"C"},{c:"MHR",f:"U",r:"L",s:5.1,t:"C",dp:["PS"],ds:["YT"]},{c:"MRF",f:"N",r:"C",s:1,t:"C"},{c:"MMG",f:"A",r:"L",s:6,t:"C",dp:["RB"],ds:["TK","AR"]},{c:"MOE",f:"T",r:"H",s:1,t:"C",dp:["SP"],ds:["FR"]},{c:"MXW",f:"A",r:"C",s:1,t:"C",ds:["RB","AH"]},{c:"MSP",f:"U",r:"R",s:2,t:"S",ds:["LG"]},{c:"MDR",f:"A",r:"R",s:7,t:"C",ds:["NT","MM"]},{c:"MMA",f:"A",r:"C",s:1,t:"C",ds:["CD","MM"]},{c:"MMR",f:"A",r:"C",s:5,t:"C",dp:["MM"],ds:["CD"]},{c:"MMX",f:"A",r:"C",s:2,t:"C",ds:["MM","CD","VG"]},{c:"MMI",f:"A",r:"C",s:4,t:"C",ds:["MM"]},{c:"MMO",f:"A",r:"C",s:2,t:"C",ds:["MM"]},{c:"MMV",f:"A",r:"C",s:2.2,t:"C",ds:["MM","CD","RK"]},{c:"MPH",f:"U",r:"H",s:3,t:"S",ds:["RK","DR","RV","RP","TK","MV"]},{c:"MSC",f:"A",r:"H",s:1,t:"S",ds:["NT","FR"]},{c:"MTS",f:"A",r:"C",s:1.1,t:"S",ds:["LV","FR"]},{c:"MTT",f:"A",r:"C",s:2,t:"S",ds:["LV","AL"]},{c:"MML",f:"U",r:"H",s:2,t:"C",ds:["TK","GW","PL"]},{c:"MMW",f:"U",r:"L",s:2.2,t:"C",ds:["TK","GW"]},{c:"MBR",f:"A",r:"R",s:6,t:"C",dp:["MM"],ds:["CD"]},{c:"MDE",f:"N",r:"C",s:4,t:"C",ds:["AS","LG","BN"]},{c:"MBP",f:"U",r:"H",s:1,t:"C",ds:["HR","PL"]},{c:"MTD",f:"U",r:"R",s:6,t:"C",dp:["DI"]},{c:"MND",f:"A",r:"R",s:1,t:"C",ds:["RB","SQ","AH"]},{c:"MNM",f:"N",r:"L",s:7.2,t:"C",ds:["TK","GW"]},{c:"NNS",f:"A",r:"R",s:3,t:"S",ds:["NT","AL"]},{c:"NGB",f:"T",r:"C",s:1,t:"C",ds:["HR"]},{c:"NGW",f:"T",r:"C",s:4,t:"C"},{c:"NSL",f:"U",r:"R",s:1,t:"S",dp:["GW"],ds:["RV"]},{c:"NCF",f:"N",r:"C",s:4,t:"S",ds:["FR"]},{c:"NCM",f:"N",r:"H",s:5,t:"C",ds:["MS","TK","RG","GW"]},{c:"NCP",f:"N",r:"H",s:7,t:"C",dn:["CD"]},{c:"NCS",f:"N",r:"R",s:1,t:"C"},{c:"NCW",f:"N",r:"C",s:1,t:"C"},{c:"NCV",f:"N",r:"C",s:1,t:"S",ds:["RG"]},{c:"NSW",f:"N",r:"L",s:3,t:"C",dp:["SF"],ds:["SQ","TK","GW"]},{c:"NDY",f:"N",r:"R",s:6,t:"S",dn:["SV"]},{c:"NEM",f:"N",r:"C",s:1,t:"S",ds:["LG","BN"]},{c:"NSH",f:"N",r:"L",s:2.3,t:"S",ds:["DR","RV","MV"],dn:["GW"]},{c:"NXA",f:"A",r:"L",s:3.1,t:"C",ds:["NX","AH","AR","MV"]},{c:"NXB",f:"A",r:"L",s:6.1,t:"S",dp:["MA"],ds:["NX","AR","TD"]},{c:"NXC",f:"A",r:"C",s:1,t:"C",ds:["RB","WL"]},{c:"NXG",f:"A",r:"H",s:3,t:"C",dp:["NX"],ds:["AH"]},{c:"NXO",f:"A",r:"C",s:5,t:"C",dp:["NX"],ds:["LV"]},{c:"NXP",f:"A",r:"C",s:1,t:"C",dp:["NX"]},{c:"NXT",f:"A",r:"H",s:2,t:"C",dp:["NX"],ds:["AR"]},{c:"NGT",f:"N",r:"R",s:2,t:"C",ds:["RG","SV"]},{c:"NGQ",f:"U",r:"L",s:4.1,t:"C",dp:["RP","FB"],ds:["TK","GW","PL"]},{c:"NCL",f:"U",r:"R",s:1.1,t:"S",ds:["PS"],dn:["GW"]},{c:"NFF",f:"U",r:"L",s:2,t:"C",dp:["PL"],ds:["RP","SQ","TK"]},{c:"NUG",f:"T",r:"L",s:7.1,t:"C",ds:["YT"]},{c:"NAM",f:"N",r:"C",s:3,t:"C"},{c:"NOZ",f:"N",r:"R",s:2,t:"C",ds:["TK","VG"]},{c:"NSY",f:"N",r:"C",s:2.1,t:"C",ds:["RG"]},{c:"ONN",f:"N",r:"H",s:1.1,t:"S",dp:["ZB"]},{c:"OXA",f:"A",r:"H",s:2.3,t:"C",dp:["QN"],ds:["LV","SQ","RG"]},{c:"OXM",f:"A",r:"R",s:2,t:"C",dp:["QN"],ds:["RG","AR"]},{c:"OXP",f:"N",r:"H",s:2,t:"C",dp:["QA"],ds:["RG","AL","SQ"]},{c:"OBB",f:"T",r:"R",s:3,t:"S",dp:["QA"],ds:["LV"]},{c:"OEX",f:"A",r:"H",s:3,t:"S",dp:["QT"],ds:["FC","AH"],dn:["GW"]},{c:"OWH",f:"T",r:"H",s:3,t:"C",dp:["QA"],ds:["FC","MV","LV"]},{c:"ORC",f:"A",r:"C",s:7,t:"C",ds:["AH"]},{c:"OBD",f:"A",r:"H",s:1,t:"C",ds:["AR","RB"]},{c:"OFM",f:"A",r:"R",s:2.1,t:"C",ds:["AH"]},{c:"OJC",f:"A",r:"H",s:1.1,t:"C",ds:["AL"],dn:["TK","LZ"]},{c:"OPK",f:"A",r:"R",s:2,t:"C",ds:["RB","AR"]},{c:"OSV",f:"A",r:"H",s:4,t:"C",dp:["RP"],ds:["AR","RB"]},{c:"OSS",f:"A",r:"C",s:5,t:"S",dp:["UD"],ds:["AR"]},{c:"OWW",f:"A",r:"L",s:1,t:"C",ds:["RB"]},{c:"OHV",f:"N",r:"R",s:2,t:"C",ds:["AB","RV"]},{c:"ODC",f:"U",r:"L",s:2,t:"C",dp:["FB"],ds:["LG"]},{c:"OSP",f:"N",r:"R",s:2,t:"C",ds:["RG"]},{c:"OAP",f:"U",r:"L",s:6,t:"C",dp:["RK"],ds:["PS"]},{c:"OSL",f:"U",r:"C",s:3,t:"C",ds:["PL"]},{c:"OWF",f:"A",r:"H",s:2,t:"S",ds:["AH","GW"]},{c:"OXS",f:"U",r:"R",s:1,t:"C",ds:["DI"],dn:["AR"]},{c:"PHM",f:"A",r:"R",s:2,t:"C",ds:["AL"],dn:["GW"]},{c:"PPM",f:"A",r:"R",s:1,t:"C",ds:["AL","SQ"]},{c:"PSM",f:"A",r:"L",s:2.2,t:"C",dp:["NX"],ds:["MV","TK"]},{c:"PLW",f:"A",r:"R",s:4,t:"S",dp:["UD"],ds:["AL"],dn:["GW"]},{c:"POA",f:"A",r:"H",s:6.1,t:"C",dp:["MA"],ds:["AH"]},{c:"POD",f:"U",r:"H",s:6.1,t:"C",dp:["MU"],ds:["GW","TK"]},{c:"POK",f:"T",r:"H",s:6.1,t:"C",dp:["MT"],ds:["AH"]},{c:"POT",f:"N",r:"H",s:6.1,t:"C",dp:["MN"],dn:["GW"]},{c:"PRG",f:"N",r:"C",s:4,t:"C"},{c:"PRI",f:"A",r:"R",s:3,t:"S",dp:["LV"],ds:["TD"]},{c:"PHS",f:"A",r:"R",s:2.2,t:"C",dp:["AR"]},{c:"PHC",f:"T",r:"L",s:6.2,t:"S",ds:["MV","TK","BN"]},{c:"PTB",f:"U",r:"H",s:1,t:"S",ds:["PL","TK","GW"]},{c:"PLI",f:"N",r:"R",s:6,t:"C"},{c:"PSC",f:"U",r:"R",s:2,t:"C",ds:["PS","SQ"]},{c:"PSH",f:"N",r:"H",s:4,t:"C",ds:["RK","LZ","TK"]},{c:"PTR",f:"A",r:"R",s:2,t:"S",ds:["AH","FR"]},{c:"PSG",f:"U",r:"R",s:1,t:"S",ds:["FR"]},{c:"PVA",f:"U",r:"L",s:7.2,t:"C",ds:["TK","GW","LG","DI"]},{c:"PMI",f:"T",r:"H",s:5.1,t:"C",ds:["BN"]},{c:"PMS",f:"T",r:"C",s:1,t:"S",ds:["AH"]},{c:"POX",f:"N",r:"H",s:4.2,t:"C",dp:["UD"],ds:["TK","VG","AB"]},{c:"PMP",f:"A",r:"R",s:6,t:"S",dp:["HL"],ds:["AR","AH"]},{c:"PYG",f:"T",r:"H",s:1,t:"C",dp:["FC"],ds:["AG"]},{c:"PYM",f:"T",r:"R",s:6,t:"C",dn:["LG"],ds:["BN"]},{c:"PYS",f:"T",r:"C",s:1.1,t:"S",dp:["GW"],dn:["GW"]},{c:"QSW",f:"T",r:"L",s:7.3,t:"C",dp:["DI"],ds:["BN"]},{c:"RBH",f:"T",r:"L",s:1,t:"C",dp:["FC"]},{c:"ROK",f:"T",r:"L",s:3.1,t:"S",dp:["MT"],ds:["TD"]},{c:"REW",f:"U",r:"L",s:7.3,t:"C",ds:["TK","GW"]},{c:"RHY",f:"U",r:"C",s:3,t:"C",ds:["RG"]},{c:"RTS",f:"T",r:"C",s:2.2,t:"C",ds:["MV","FC","DI"]},{c:"RTW",f:"U",r:"H",s:7,t:"C",ds:["WD","TK"]},{c:"RHU",f:"A",r:"L",s:4.1,t:"C",ds:["RP","WL"]},{c:"RMB",f:"N",r:"L",s:6.2,t:"S",dp:["TD"],ds:["TK"]},{c:"RPR",f:"A",r:"H",s:7.2,t:"S",ds:["AL","NT"],dn:["MU"]},{c:"RLW",f:"U",r:"H",s:1,t:"C",dp:["WD"]},{c:"RFL",f:"T",r:"R",s:1,t:"C",dp:["FC"]},{c:"RHC",f:"T",r:"C",s:1,t:"C",ds:["MV"]},{c:"ROG",f:"N",r:"H",s:1,t:"S",ds:["SV"]},{c:"ROU",f:"N",r:"C",s:7,t:"S",ds:["RG","GW"]},{c:"ROE",f:"T",r:"H",s:7.3,t:"S",ds:["TK","AG","AH"]},{c:"RWC",f:"U",r:"C",s:4,t:"C",ds:["DI","TK","GW"]},{c:"RFA",f:"U",r:"H",s:1,t:"C",dp:["MU"]},{c:"RWD",f:"N",r:"C",s:5,t:"C",dp:["AL"],ds:["ZB"]},{c:"RSD",f:"U",r:"L",s:6.2,t:"C",ds:["SQ","GW","LG","DR"]},{c:"RSE",f:"T",r:"H",s:4.1,t:"C",dp:["FC"],ds:["AG"]},{c:"RBG",f:"U",r:"H",s:2,t:"C",dp:["LG"]},{c:"RGG",f:"U",r:"H",s:1,t:"C",dp:["RK"],ds:["PL"]},{c:"RSZ",f:"N",r:"R",s:1.1,t:"C",ds:["ZB","VG","SP"]},{c:"RSP",f:"T",r:"R",s:3,t:"C",ds:["CS","AG"]},{c:"RHW",f:"N",r:"C",s:3,t:"C",dp:["WD"]},{c:"SBF",f:"T",r:"H",s:4,t:"C",ds:["AG","XA"]},{c:"SAP",f:"A",r:"C",s:2,t:"S",ds:["AL"]},{c:"SVO",f:"U",r:"C",s:2.1,t:"S",dp:["MU"]},{c:"SSE",f:"U",r:"L",s:2.1,t:"C",ds:["PL","TK","GW"]},{c:"SST",f:"U",r:"C",s:7,t:"C",ds:["PL","TK","GW"]},{c:"STS",f:"U",r:"C",s:3,t:"S",ds:["PL","TK","GW"]},{c:"SCS",f:"N",r:"C",s:1,t:"C",ds:["AB","RG"]},{c:"SMD",f:"T",r:"L",s:1,t:"C",ds:["DR","MV"]},{c:"SFS",f:"N",r:"L",s:1,t:"C",ds:["ZB","SF","RV"]},{c:"SHY",f:"N",r:"C",s:5,t:"C",ds:["MS"]},{c:"SKN",f:"N",r:"C",s:7,t:"C",ds:["ZB"]},{c:"SCD",f:"A",r:"H",s:1,t:"C",ds:["RB","FR"]},{c:"SFT",f:"A",r:"H",s:1,t:"C",ds:["AR","RB"]},{c:"SOC",f:"N",r:"L",s:4,t:"S",ds:["AL"]},{c:"SOA",f:"A",r:"C",s:3,t:"S",dp:["CS"],ds:["AH"]},{c:"SOD",f:"U",r:"C",s:3,t:"S",dp:["CS"]},{c:"SOK",f:"T",r:"C",s:3,t:"S",dp:["CS"]},{c:"SOT",f:"N",r:"C",s:3,t:"S",dp:["CS"],ds:["BN"]},{c:"SAD",f:"T",r:"H",s:1,t:"C",ds:["FC"]},{c:"SCZ",f:"N",r:"R",s:6,t:"C",dp:["DF"],ds:["RG","ZB"]},{c:"SFE",f:"T",r:"H",s:6,t:"C",dp:["DF"],ds:["AG"]},{c:"SWS",f:"A",r:"H",s:6,t:"C",dp:["DF"],ds:["LV"]},{c:"SHA",f:"A",r:"R",s:6,t:"C",dp:["DF"],ds:["AR"]},{c:"SHG",f:"N",r:"L",s:2,t:"S",dp:["LZ"]},{c:"SBI",f:"U",r:"C",s:3,t:"C",dp:["UD"]},{c:"SCC",f:"U",r:"C",s:4,t:"C",dp:["RP"]},{c:"SPB",f:"U",r:"L",s:5,t:"C",dp:["HR"]},{c:"SPD",f:"U",r:"R",s:1,t:"C",dp:["SB"],ds:["DI"]},{c:"SPG",f:"U",r:"R",s:6.2,t:"S",ds:["SB"]},{c:"SPM",f:"U",r:"L",s:1,t:"C",dp:["UD"]},{c:"SPT",f:"U",r:"L",s:7.1,t:"C",ds:["PS"]},{c:"STD",f:"A",r:"H",s:2.2,t:"C",ds:["MM"],dn:["RG"]},{c:"STB",f:"T",r:"C",s:5,t:"S",ds:["BN"],dn:["AR"]},{c:"SHS",f:"U",r:"R",s:2.2,t:"C",dp:["AH"],ds:["PS"]},{c:"SSP",f:"U",r:"H",s:6,t:"C",dp:["DF"],ds:["PL","TK","GW"]},{c:"SGF",f:"N",r:"H",s:2.2,t:"C",dp:["SQ","SF"],ds:["AB","LG","BN"]},{c:"SKG",f:"A",r:"C",s:2,t:"C",ds:["NX","MV"]},{c:"SLS",f:"T",r:"L",s:7,t:"C",dp:["SQ"],ds:["SP","WL"],dn:["TD"]},{c:"SSD",f:"T",r:"L",s:5,t:"C",dp:["SQ"],ds:["DR"],dn:["GW"]},{c:"SDA",f:"U",r:"H",s:5,t:"C",ds:["TK","GW"]},{c:"SSR",f:"U",r:"L",s:2,t:"C",dp:["RK"],ds:["GW","FC"]},{c:"SNB",f:"A",r:"C",s:2.3,t:"S",ds:["AL"]},{c:"SNP",f:"A",r:"H",s:1,t:"S",ds:["AL"],dn:["GW"]},{c:"SRD",f:"U",r:"C",s:1,t:"S",ds:["HR","GW"]},{c:"SSH",f:"U",r:"H",s:4,t:"C"},{c:"SRM",f:"N",r:"H",s:4,t:"C",dp:["AL"],ds:["RV"]},{c:"SRH",f:"N",r:"C",s:2.3,t:"C",dp:["AB"],ds:["CD"]},{c:"SDN",f:"N",r:"L",s:1,t:"C",ds:["AL","MV"]},{c:"SHV",f:"N",r:"H",s:1,t:"S",dp:["SF"],ds:["FR"]},{c:"SRP",f:"N",r:"L",s:4,t:"S",dp:["AL"],ds:["RV","TK"]},{c:"SGG",f:"N",r:"H",s:4,t:"C",dp:["SV"]},{c:"SBA",f:"A",r:"C",s:1,t:"C"},{c:"SKB",f:"A",r:"C",s:1,t:"C",ds:["RB"]},{c:"SBR",f:"T",r:"C",s:2,t:"C",ds:["AG"]},{c:"SKS",f:"T",r:"C",s:4,t:"C",ds:["RP","AG"]},{c:"SEL",f:"T",r:"R",s:5,t:"C",ds:["WL"],dn:["SQ"]},{c:"STM",f:"T",r:"R",s:4,t:"C",ds:["MV","AG"]},{c:"SWA",f:"T",r:"H",s:6,t:"C",dp:["SP","MT"],ds:["MV","AH"]},{c:"SFG",f:"A",r:"L",s:6.2,t:"C",dp:["VT"],ds:["TK","RB"]},{c:"S01",f:"A",r:"L",s:7.3,t:"C",dp:["MS"],ds:["AR","AH"]},{c:"SPR",f:"N",r:"R",s:7,t:"C",ds:["SV","SB"]},{c:"SBD",f:"U",r:"C",s:2.1,t:"C",ds:["LG"]},{c:"SCV",f:"N",r:"R",s:3,t:"S",ds:["RV"]},{c:"SFM",f:"T",r:"H",s:1,t:"C",ds:["VG","MS"]},{c:"SSN",f:"A",r:"C",s:2.2,t:"C",ds:["AR","RB"]},{c:"SSM",f:"T",r:"C",s:2.2,t:"C",ds:["RK","BN"]},{c:"SLH",f:"N",r:"C",s:2,t:"S",dp:["SF"]},{c:"SRV",f:"N",r:"R",s:2.2,t:"C",dp:[],ds:[],dn:[]},{c:"SSI",f:"A",r:"R",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"SND",f:"U",r:"R",s:4,t:"C",dp:["RP"],ds:["TK","GW"]},{c:"SNT",f:"N",r:"L",s:5.1,t:"C",dp:[],ds:[],dn:[]},{c:"STR",f:"N",r:"R",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"SPH",f:"N",r:"H",s:4.1,t:"C",dp:[],ds:[],dn:[]},{c:"SSA",f:"N",r:"H",s:2.1,t:"C",dp:[],ds:[],dn:[]},{c:"STO",f:"U",r:"R",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"SDR",f:"U",r:"R",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"SOL",f:"U",r:"C",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"SOV",f:"T",r:"L",s:4,t:"S",dp:["XA"],ds:["DR","MV"]},{c:"SMS",f:"T",r:"C",s:7,t:"C",ds:["DI","BN"]},{c:"SHK",f:"T",r:"H",s:1,t:"S",dp:[],ds:[],dn:[]},{c:"SIX",f:"A",r:"R",s:7,t:"C",ds:["MM","SP","WL"]},{c:"SWR",f:"A",r:"R",s:1,t:"C",ds:["MM","SP","WL"]},{c:"SMN",f:"T",r:"C",s:5,t:"C",dp:[],ds:[],dn:[]},{c:"SER",f:"A",r:"C",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"SES",f:"A",r:"L",s:5,t:"C",dp:[],ds:[],dn:[]},{c:"SFA",f:"A",r:"H",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"STG",f:"A",r:"L",s:2,t:"C",dp:[],ds:["DR","RB"],dn:[]},{c:"SSS",f:"A",r:"R",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"SSK",f:"A",r:"C",s:3,t:"C",dp:[],ds:[],dn:[]},{c:"SNK",f:"A",r:"C",s:7,t:"C",dp:["LV"],ds:["WL"]},{c:"SWG",f:"A",r:"C",s:4,t:"C",dp:[],ds:["RB"],dn:[]},{c:"SWM",f:"A",r:"R",s:2,t:"C",dp:[],ds:[],dn:[]},{c:"SIV",f:"U",r:"H",s:5.1,t:"S",dp:[],ds:[],dn:[]},{c:"STN",f:"T",r:"R",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"SGI",f:"T",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"SBG",f:"T",r:"L",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"SCL",f:"T",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"SGA",f:"T",r:"H",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"STP",f:"T",r:"C",s:4,t:"S",dp:[],ds:[],dn:[]},{c:"SSG",f:"U",r:"C",s:2,t:"C",dp:[],ds:["DI"],dn:[]},{c:"SVH",f:"U",r:"C",s:2.3,t:"C",dp:[],ds:[],dn:[]},{c:"SIN",f:"U",r:"C",s:1.1,t:"S",dp:[],ds:[],dn:[]},{c:"SYL",f:"U",r:"H",s:2.2,t:"C",dp:[],ds:["PL"],dn:[]},{c:"SEV",f:"N",r:"L",s:3.1,t:"C",dp:[],ds:[],dn:[]},{c:"SMA",f:"U",r:"C",s:5,t:"C",dp:[],ds:["DI"],dn:[]},{c:"SML",f:"U",r:"C",s:1,t:"C",dp:[],ds:["DI"],dn:[]},{c:"SYO",f:"A",r:"L",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"TST",f:"T",r:"C",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"TBA",f:"U",r:"L",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"TGL",f:"U",r:"R",s:3,t:"S",dp:[],ds:[],dn:[]},{c:"TGS",f:"U",r:"C",s:2,t:"C",dp:[],ds:["PL"],dn:[]},{c:"TPT",f:"N",r:"C",s:2.1,t:"S",dp:[],ds:[],dn:[]},{c:"TDW",f:"N",r:"R",s:1.1,t:"C",dp:[],ds:[],dn:[]},{c:"TNL",f:"N",r:"L",s:4.1,t:"C",dp:[],ds:[],dn:[]},{c:"TEX",f:"A",r:"C",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"TGN",f:"A",r:"C",s:2,t:"C",dp:[],ds:[],dn:[]},{c:"TSM",f:"A",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"TUP",f:"A",r:"R",s:1,t:"S",dp:[],ds:[],dn:[]},{c:"TAB",f:"T",r:"C",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"TGI",f:"T",r:"R",s:2,t:"C",dp:[],ds:[],dn:[]},{c:"TDS",f:"U",r:"L",s:1.1,t:"C",dp:[],ds:["DI"],dn:[]},{c:"TSP",f:"T",r:"H",s:4.2,t:"S",dp:["DI"],ds:[],dn:[]},{c:"TNM",f:"U",r:"C",s:7,t:"C"},{c:"TPG",f:"N",r:"H",s:3.1,t:"C",dp:[],ds:["ZB"],dn:[]},{c:"TMG",f:"U",r:"R",s:3,t:"C",dp:[],ds:["PL"],dn:[]},{c:"TMM",f:"U",r:"C",s:5,t:"C",dp:[],ds:["PL"],dn:[]},{c:"TRA",f:"A",r:"R",s:5,t:"C",dp:[],ds:["MM"],dn:[]},{c:"TRS",f:"U",r:"R",s:5,t:"C",dp:[],ds:[],dn:[]},{c:"TRV",f:"T",r:"R",s:5,t:"C",dp:[],ds:[],dn:[]},{c:"TRW",f:"N",r:"R",s:5,t:"C",dp:[],ds:[],dn:[]},{c:"TBB",f:"T",r:"R",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"TOB",f:"N",r:"R",s:1,t:"S",dp:[],ds:[],dn:[]},{c:"TCN",f:"A",r:"C",s:7,t:"C",dp:["WL"],ds:["RB"]},{c:"TWS",f:"A",r:"C",s:2,t:"C",dp:[],ds:[],dn:[]},{c:"TVG",f:"A",r:"R",s:1.1,t:"C",dp:[],ds:["RB"],dn:[]},{c:"TXB",f:"U",r:"R",s:5,t:"S",dp:[],ds:[],dn:[]},{c:"TXS",f:"U",r:"C",s:1,t:"S",dp:[],ds:[],dn:[]},{c:"TCG",f:"T",r:"C",s:2.1,t:"S",dp:[],ds:[],dn:[]},{c:"TMS",f:"U",r:"H",s:6,t:"C",dp:["SB"],dn:["BN"]},{c:"TBC",f:"T",r:"H",s:6.2,t:"S",ds:["AH","MS"]},{c:"TWT",f:"A",r:"C",s:3,t:"C",dp:[],ds:["RB"],dn:[]},{c:"TRN",f:"T",r:"H",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"TGK",f:"U",r:"R",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"TSL",f:"U",r:"H",s:3,t:"C",dp:["PL"],ds:["TK","GW"]},{c:"TWG",f:"U",r:"C",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"UGM",f:"U",r:"C",s:2.2,t:"C",dp:[],ds:[],dn:[]},{c:"USY",f:"T",r:"R",s:6,t:"C",dp:["DF"],ds:["YT","MV"]},{c:"UGL",f:"T",r:"R",s:2,t:"C",dp:[],ds:["DI"],dn:[]},{c:"UIC",f:"T",r:"H",s:2.3,t:"C",dp:[],ds:["DI"],dn:[]},{c:"ULR",f:"U",r:"H",s:2,t:"C",dp:[],ds:["DI"],dn:[]},{c:"ULG",f:"N",r:"H",s:7,t:"S",dp:["LZ"],ds:["TK","TD"]},{c:"URD",f:"N",r:"H",s:1,t:"C",dp:[],ds:["ZB"],dn:[]},{c:"USA",f:"T",r:"H",s:7,t:"C",ds:["WL","VG","FC"]},{c:"UBL",f:"T",r:"R",s:1,t:"S",dp:[],ds:[],dn:[]},{c:"UCM",f:"T",r:"R",s:1,t:"C",dp:[],ds:["YT"],dn:[]},{c:"UEM",f:"T",r:"C",s:4,t:"C",dp:[],ds:["YT"],dn:[]},{c:"UHS",f:"T",r:"H",s:2,t:"C",dp:[],ds:["YT"],dn:[]},{c:"UIM",f:"T",r:"C",s:2,t:"C",dp:[],ds:["YT"],dn:[]},{c:"USS",f:"T",r:"H",s:7,t:"C",dp:["SQ"],ds:["TK","YT"]},{c:"UWL",f:"T",r:"H",s:2,t:"C",dp:["YT"]},{c:"UWS",f:"T",r:"R",s:2.3,t:"C",dp:["YT"],ds:[],dn:[]},{c:"UIW",f:"A",r:"L",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"URS",f:"U",r:"C",s:5,t:"S",dp:[],ds:[],dn:[]},{c:"UTM",f:"U",r:"C",s:2,t:"C",dp:[],ds:["DI"],dn:[]},{c:"UTR",f:"U",r:"H",s:2,t:"C",dp:["DI"],ds:[],dn:[]},{c:"URB",f:"U",r:"L",s:2.3,t:"C",dp:[],ds:["DI"],dn:[]},{c:"UPM",f:"U",r:"L",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"VIC",f:"T",r:"L",s:6,t:"C",ds:["MV","FR"],dn:["TD"]},{c:"VIK",f:"N",r:"L",s:5.2,t:"C",dp:["FB"],ds:["TK","SV"]},{c:"VRP",f:"N",r:"L",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"VBK",f:"A",r:"R",s:2,t:"C",dp:[],ds:["RB"],dn:[]},{c:"VIN",f:"A",r:"C",s:6,t:"C",ds:["RB"]},{c:"VTC",f:"A",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"VTW",f:"A",r:"R",s:4,t:"C",dp:[],ds:["RB"],dn:[]},{c:"VGN",f:"N",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"VND",f:"U",r:"R",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"VNF",f:"U",r:"R",s:1.1,t:"C",dp:[],ds:[],dn:[]},{c:"VNS",f:"U",r:"H",s:2,t:"C",dp:[],ds:[],dn:[]},{c:"VSK",f:"U",r:"C",s:4,t:"S",dp:[],ds:[],dn:[]},{c:"VCH",f:"U",r:"H",s:4.1,t:"S",dp:[],ds:[],dn:[]},{c:"VGR",f:"U",r:"C",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"VSP",f:"U",r:"C",s:6,t:"S",ds:["LG"]},{c:"VTR",f:"U",r:"R",s:7,t:"S"},{c:"VGL",f:"N",r:"R",s:5,t:"S",dp:[],ds:[],dn:[]},{c:"VGW",f:"U",r:"R",s:6,t:"C",dp:["HR"],ds:["GW"]},{c:"VOB",f:"T",r:"R",s:4,t:"S",dp:[],ds:[],dn:[]},{c:"VCG",f:"T",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"VPR",f:"A",r:"L",s:7,t:"C",ds:["LV"]},{c:"VES",f:"N",r:"L",s:2.1,t:"C",dp:[],ds:[],dn:[]},{c:"VYE",f:"N",r:"C",s:2,t:"S",dp:[],ds:[],dn:[]},{c:"WBY",f:"T",r:"R",s:2,t:"C",dp:[],ds:["YT"],dn:[]},{c:"WBU",f:"T",r:"C",s:1.1,t:"C",dp:[],ds:["YT"],dn:[]},{c:"WHR",f:"T",r:"R",s:7,t:"C",ds:["AG"],dn:["TD"]},{c:"WMC",f:"A",r:"H",s:5,t:"C",dp:[],ds:["RB"],dn:[]},{c:"WMR",f:"A",r:"H",s:2.1,t:"C",dp:[],ds:[],dn:[]},{c:"WTK",f:"A",r:"H",s:4,t:"C",dp:[],ds:[],dn:[]},{c:"WMM",f:"A",r:"H",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"WTW",f:"T",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"WGE",f:"U",r:"H",s:7.3,t:"S",ds:["FC","LG"]},{c:"WTA",f:"U",r:"L",s:4,t:"C",dp:["LG","SB"],ds:["PL"]},{c:"WWP",f:"U",r:"H",s:1.1,t:"C",dp:[],ds:[],dn:[]},{c:"WWR",f:"U",r:"C",s:3,t:"C",dp:[],ds:[],dn:[]},{c:"WOD",f:"U",r:"R",s:4,t:"S",dp:[],ds:[],dn:[]},{c:"WFM",f:"T",r:"H",s:1.1,t:"C",dp:[],ds:[],dn:[]},{c:"WWS",f:"U",r:"R",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"WBH",f:"T",r:"R",s:1.1,t:"C",dp:[],ds:[],dn:[]},{c:"WCS",f:"T",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"WPD",f:"T",r:"C",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"WSE",f:"T",r:"L",s:5.1,t:"C",dp:[],ds:[],dn:[]},{c:"WPC",f:"A",r:"H",s:6.2,t:"S",ds:["TD"],dp:["NT"]},{c:"WFB",f:"N",r:"C",s:1.1,t:"C",dp:[],ds:[],dn:[]},{c:"WFS",f:"N",r:"H",s:1,t:"C",dp:[],ds:[],dn:[]},{c:"WBG",f:"N",r:"L",s:1.1,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XTE",f:"N",r:"L",s:6,t:"C",dp:["MN"],ds:["TK","LZ"]},{c:"XCR",f:"N",r:"C",s:2,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XDH",f:"N",r:"R",s:3,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XHS",f:"N",r:"C",s:2.2,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XHU",f:"N",r:"C",s:1,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XRF",f:"N",r:"C",s:2,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XSH",f:"N",r:"L",s:1,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XTR",f:"N",r:"H",s:5.1,t:"C",dp:[],ds:["AB"],dn:[]},{c:"XDV",f:"N",r:"H",s:1,t:"C",dp:["ZB"],ds:[],dn:[]},{c:"XRW",f:"N",r:"H",s:2,t:"S",dp:["ZB"],ds:[],dn:[]},{c:"YWC",f:"T",r:"C",s:2,t:"C",dp:[],ds:["YT"],dn:[]},{c:"YNS",f:"N",r:"L",s:2.2,t:"C",dp:[],ds:[],dn:[]},{c:"ZXR",f:"T",r:"H",s:5,t:"C",dp:[],ds:[],dn:[]},{c:"ZPM",f:"T",r:"R",s:1.1,t:"C",dp:[],ds:[],dn:[]},{c:"ZTU",f:"N",r:"L",s:1,t:"C",dp:[],ds:["ZB"],dn:[]},{c:"ZDK",f:"N",r:"H",s:6,t:"C",dp:["RG"],ds:["ZB"]},{c:"ZIN",f:"N",r:"C",s:1,t:"C",dp:[],ds:["ZB"],dn:[]},{c:"ZMT",f:"N",r:"C",s:3,t:"C",dp:[],ds:["ZB"],dn:[]},{c:"ZSH",f:"T",r:"L",s:1,t:"C",dp:[],ds:[],dn:[]}],ri=[["ASQ",["SLG","SLG"]],["CGL",["CGF"]],["DHC",["DYF"]],["DTD",["TOT"]],["FGD",["FGA","FGB","FGG"]],["IBA",["AVB"]],["IZK",["IFL","IFR"]],["RHU",["RSC"]],["SLS",["MMY"]],["TSL",["FUN"]],["WHR",["WHC"]]];class si{raw={["C"]:{["A"]:0,["N"]:0,["T"]:0,["U"]:0},["S"]:{["A"]:0,["N"]:0,["T"]:0,["U"]:0}};addStat(t,i){this.raw[t][i]++}g(t,i){return this.raw[t][i]}typeSum(t){return Fe.map(i=>this.g(t,i)).reduce((i,r)=>i+r,0)}getTotal(){const t=this.typeSum("C"),i=this.typeSum("S");return[t,i,t+i]}getFactTotal(t){const i=this.g("C",t),r=this.g("S",t);return[i,r,i+r]}}const h=(n,t)=>({card:n,num:t}),vi={name:"Official 2 - 3",id:"SBE1",decks:[{name:"Cruel Corrosion",factions:["A","N"],cards:[h("IHA",1),h("WBG",1),h("OXP",1),h("DFR",1),h("APM",1),h("SNP",1),h("GRM",2),h("ETN",2),h("DHW",2),h("OXM",2),h("AEN",2),h("ATG",2),h("CTI",2),h("CTW",2),h("FPS",2),h("GRW",2),h("MTT",2),h("SAP",2)]},{name:"Death March",factions:["N","T"],cards:[h("ZTU",1),h("VRP",1),h("GGP",1),h("EPD",1),h("DBT",1),h("BSM",1),h("TDW",2),h("NGT",2),h("UBL",2),h("FWK",2),h("BZD",2),h("CSB",2),h("SLH",2),h("MMH",2),h("LSK",2),h("GBG",2),h("CFG",2),h("DSK",2)]},{name:"Dinosaurs!",factions:["T","U"],cards:[h("TDS",1),h("SSR",1),h("FRR",1),h("ULR",1),h("UTR",1),h("BTM",1),h("UGL",2),h("EHN",2),h("SPD",2),h("GHB",2),h("FLN",2),h("SML",2),h("RFL",2),h("OXS",2),h("UTM",2),h("TWG",2),h("ENR",2),h("DBP",2)]},{name:"Wyvern's Wrath",factions:["T","U"],cards:[h("CSW",1),h("SMD",1),h("FRR",1),h("UIC",1),h("CFB",1),h("UGL",2),h("FSH",2),h("FLN",2),h("WPD",1),h("TWG",2),h("TCG",2),h("TGS",2),h("SML",2),h("SVH",1),h("SCL",2),h("RTS",1),h("FWB",2),h("ENR",2),h("ABR",2)]},{name:"Ironmind Intuition",factions:["A","N"],cards:[h("IMA",1),h("GMP",1),h("OXA",1),h("EPD",1),h("OJC",1),h("ESU",2),h("OXM",2),h("MMA",2),h("SAP",1),h("AFO",2),h("GBG",2),h("CTW",2),h("SRH",1),h("TSM",2),h("SLH",1),h("MTT",1),h("DCR",1),h("DFB",1),h("BSR",1),h("LGT",1),h("XRF",2),h("MMX",1)]},{name:"Nethershriek Negation",factions:["N","T"],cards:[h("SBG",1),h("NSH",1),h("FFU",1),h("EWE",1),h("BFM",1),h("WBH",1),h("UWS",1),h("TGI",2),h("RFL",2),h("GRM",1),h("ASG",1),h("YWC",2),h("XRF",2),h("WPD",2),h("WCS",2),h("WBU",2),h("TCG",1),h("FSK",1),h("SLH",2),h("CFG",1),h("RTS",2)]},{name:"Ridgeback's Rage",factions:["A","U"],cards:[h("URB",1),h("AGK",1),h("ESP",1),h("FRR",1),h("NXT",1),h("ALG",1),h("FGB",1),h("PHS",2),h("TUP",1),h("EWT",2),h("PTR",1),h("VBK",1),h("AGC",1),h("AEN",2),h("ETN",1),h("FPS",2),h("MXW",2),h("GHT",1),h("TWG",2),h("SNB",1),h("SML",1),h("JPK",1),h("ENR",1),h("IWC",1)]},{name:"Spare Parts",factions:["N"],cards:[h("SEV",1),h("SHG",1),h("TPG",1),h("CGL",1),h("FRV",1),h("HFA",2),h("XDH",1),h("GRM",1),h("SCV",1),h("DFB",2),h("EBW",2),h("GBG",2),h("GLF",2),h("XHS",2),h("SOT",1),h("XRF",2),h("SCS",1),h("ZMT",1),h("SLH",1),h("VYE",1),h("XCR",2),h("XHU",1)]},{name:"Future Forged",factions:["A"],cards:[h("NXA",1),h("IMD",1),h("FOL",1),h("SFA",2),h("SFT",1),h("SCD",1),h("CAG",1),h("ESU",1),h("NNS",1),h("FPM",1),h("PRI",1),h("SSS",1),h("CTG",1),h("TSM",2),h("IWC",1),h("MMA",2),h("TGN",2),h("MTT",1),h("SKG",1),h("AFO",1),h("MMV",1),h("TWS",1),h("SBA",2),h("SSK",1),h("JPK",1)]},{name:"Burning Rage",factions:["T"],cards:[h("ROK",1),h("KKK",1),h("MOE",1),h("AFR",1),h("FBI",1),h("FSS",2),h("FLN",2),h("CCT",2),h("BRN",2),h("WPD",2),h("SSM",2),h("SOK",1),h("RTS",2),h("FSK",2),h("CWK",2),h("CFG",2),h("BSW",2),h("FMS",2)]},{name:"Awakened Fury",factions:["U"],cards:[h("DZD",1),h("SSE",1),h("BTR",1),h("TSL",1),h("MPH",1),h("CDT",1),h("DYB",1),h("BTH",2),h("TMG",2),h("BWD",2),h("RHY",2),h("SBD",2),h("GMR",2),h("STS",1),h("OSL",2),h("SBI",2),h("LYS",2),h("TGS",2),h("SOD",2)]},{name:"Titan's Assault",factions:["N","T"],cards:[h("ATT",1),h("TNL",1),h("RSE",1),h("SPH",1),h("SCV",2),h("ABB",2),h("TBB",2),h("BRN",2),h("FLN",2),h("CMF",2),h("XDH",2),h("FST",2),h("TAB",2),h("MDE",2),h("FSK",2),h("FLH",2),h("CBB",2)]},{name:"Verdant Fortress",factions:["A","U"],cards:[h("NGQ",1),h("RHU",1),h("VCH",1),h("ESG",1),h("PLW",2),h("NNS",2),h("SND",2),h("WOD",2),h("IBR",2),h("BWD",2),h("SBI",2),h("RWC",2),h("TEX",2),h("SER",2),h("SWG",2),h("SCC",2),h("DYB",2)]},{name:"Umbruk Uprising",factions:["T","U"],cards:[h("LUC",1),h("BWT",1),h("GHR",1),h("TSP",1),h("WBH",1),h("COD",1),h("SDR",1),h("ZPM",1),h("OXS",1),h("WOD",1),h("RWC",2),h("SSG",2),h("VGR",2),h("CFG",2),h("UEM",2),h("FFG",2),h("UGL",2),h("DMR",2),h("RTS",2),h("CWK",2)]},{name:"Onyxium Twilight",factions:["A","N"],cards:[h("EPH",1),h("DTD",1),h("POX",1),h("DDS",1),h("OHV",1),h("PHS",1),h("DFB",1),h("TDW",1),h("CAG",1),h("ALG",1),h("TUP",2),h("CTW",2),h("XCR",2),h("SSK",2),h("SRH",2),h("ATG",2),h("MTT",2),h("SLH",2),h("GLF",2),h("AFO",2)]}]},Ti={name:"Official 5 - 7",id:"SBE2",decks:[{name:"Blistering Chaos",factions:["T","U"],cards:[h("WSE",1),h("MHR",1),h("PMI",1),h("SIV",1),h("BRN",1),h("HOD",1),h("CHA",1),h("LYS",1),h("TRS",2),h("PSC",2),h("FLN",2),h("EFA",2),h("SHS",2),h("TXB",2),h("VNF",2),h("CFG",2),h("FSK",2),h("CBB",2),h("VND",2)]},{name:"Dark Retribution",factions:["A","N"],cards:[h("AAA",1),h("SNT",1),h("ABE",1),h("XTR",1),h("CNT",1),h("HOX",1),h("PLW",1),h("AGW",1),h("OHV",2),h("OXM",2),h("XDH",2),h("VGL",2),h("ETN",2),h("MTT",2),h("VYE",2),h("DSK",2),h("BFT",2),h("ATZ",2),h("IBR",2)]},{name:"Iron Tide",factions:["A","U"],cards:[h("EFE",1),h("DPB",1),h("HWM",1),h("HTR",1),h("OJC",1),h("RBG",1),h("EWT",1),h("CIN",1),h("TGK",2),h("CAG",2),h("TGN",3),h("SCC",3),h("URS",3),h("LSP",3),h("TSM",3),h("TMM",3)]},{name:"Dragon Forge",factions:["N","T"],cards:[h("DGW",1),h("VIK",1),h("DDD",1),h("SMD",1),h("FFM",1),h("SHV",1),h("GRP",1),h("TGI",1),h("SLH",1),h("WBH",2),h("BZD",2),h("EFA",2),h("WFB",3),h("BZS",3),h("CCR",3),h("DSK",3),h("RHC",3)]},{name:"Call of Deepwood",factions:["U"],cards:[h("EVT",1),h("POD",1),h("RFA",1),h("TMS",1),h("LSS",1),h("DYB",1),h("TRS",1),h("VGW",1),h("UTM",2),h("RHY",2),h("SMA",2),h("TMM",2),h("BBN",2),h("GHS",2),h("SBI",2),h("BTS",2),h("STS",2),h("SVO",2),h("GMR",2)]},{name:"Kadras' Fury",factions:["T"],cards:[h("IGR",1),h("POK",1),h("SWA",1),h("SGA",1),h("FLN",1),h("TRV",1),h("FSS",1),h("AWU",1),h("STB",2),h("CFG",2),h("BBL",2),h("KSB",2),h("NGW",2),h("ATS",2),h("ABR",2),h("BSW",2),h("TCG",2),h("CBB",2),h("WPD",2)]},{name:"Tarsus Unleashed",factions:["N"],cards:[h("IRT",1),h("POT",1),h("ZDK",1),h("HFA",1),h("GRM",1),h("DSS",1),h("TRW",1),h("ABB",1),h("XCR",2),h("CSB",2),h("SHY",2),h("BBD",2),h("EBW",2),h("NSY",2),h("TPT",2),h("XRF",2),h("GGS",2),h("ZMT",2),h("IVS",2)]},{name:"Might of Anvillon",factions:["A"],cards:[h("NXB",1),h("FWS",1),h("POA",1),h("SFA",1),h("SSS",1),h("TRA",1),h("BTB",1),h("BWH",1),h("TWT",2),h("TEX",2),h("IBR",2),h("VIN",2),h("BBR",2),h("NXP",2),h("CBS",2),h("FPS",2),h("ATG",2),h("SNB",2),h("SSK",2)]},{name:"Nature's Defenses",factions:["T","U"],cards:[h("RSD",1),h("PHC",1),h("SPG",1),h("TBC",1),h("GHR",1),h("NGB",1),h("DDF",1),h("VGW",3),h("UEM",3),h("FSK",2),h("TMM",2),h("VSP",2),h("BZS",2),h("SPD",3),h("RTS",3),h("TGK",3)]},{name:"Unlikely Alliance",factions:["A","N"],cards:[h("RMB",1),h("SFG",1),h("GGW",1),h("WPC",1),h("SBA",2),h("IBR",1),h("BSR",1),h("MMV",1),h("CRC",1),h("BSP",1),h("NNS",1),h("XDH",2),h("EBW",2),h("SLH",2),h("CTG",3),h("XRF",3),h("OHV",3),h("TSM",3)]},{name:"Toxic Shards",factions:["U"],cards:[h("SPT",1),h("MHR",1),h("KBE",1),h("DPG",1),h("LLV",1),h("HVE",2),h("PSC",2),h("VND",2),h("DSV",2),h("TXB",2),h("CSR",3),h("GSC",3),h("GVS",3),h("LHY",3),h("TGS",3)]},{name:"Winds of Fury",factions:["T"],cards:[h("NUG",1),h("FMD",1),h("CYR",1),h("FFM",1),h("AIV",1),h("WBH",2),h("UBL",2),h("FZS",2),h("EFA",2),h("WBY",2),h("KSB",3),h("SCL",3),h("TCG",3),h("CWK",3),h("ISB",3)]},{name:"Ghastly Echoes",factions:["N"],cards:[h("LMD",1),h("XTE",1),h("CGG",1),h("EPD",1),h("NCP",1),h("NOZ",2),h("OSP",2),h("PLI",2),h("GRP",2),h("DOV",2),h("CYS",3),h("IVS",3),h("MRF",3),h("GRW",3),h("FSL",3)]},{name:"Cypien Technology",factions:["A"],cards:[h("CMR",1),h("RHU",1),h("CEX",1),h("FOL",1),h("AHL",1),h("SSI",2),h("CAG",2),h("CIN",2),h("CNT",2),h("PHS",2),h("MXW",3),h("LSP",3),h("SSN",3),h("TWT",3),h("CSH",3)]}]},Si={name:"Starters & Early Tournies",id:"T1309",decks:[{name:"Alloyin Starter",factions:["A"],cards:[h("SYO",1),h("BSS",1),h("SFT",2),h("SNP",2),h("TSM",2),h("SSS",2),h("ALG",2),h("MXW",3),h("TUP",3),h("FPS",3),h("MND",3),h("IWC",3),h("SKB",3)]},{name:"Nekrium Starter",factions:["N"],cards:[h("SFS",1),h("GGD",1),h("FFD",3),h("EPD",2),h("CCR",2),h("HGS",2),h("DSS",2),h("BWK",2),h("GBG",3),h("DSK",3),h("GRP",3),h("VGN",3),h("XHU",3)]},{name:"Tempys Starter",factions:["T"],cards:[h("FBC",1),h("RBH",1),h("CFB",3),h("FSM",2),h("FSH",2),h("FSS",2),h("PMS",2),h("RFL",2),h("UBL",3),h("WPD",3),h("SGI",3),h("AMY",3),h("WCS",3)]},{name:"Uterra Starter",factions:["U"],cards:[h("UPM",1),h("EHW",1),h("FRR",3),h("SPD",2),h("HTP",2),h("LSS",2),h("SDR",2),h("SRD",2),h("FWR",3),h("DBP",3),h("GHT",3),h("GSS",3),h("TXS",3)]},{name:"Axel: Lifegain",factions:["T","U"],cards:[h("AGD",3),h("EHW",3),h("FRR",3),h("FIN",1),h("UPM",1),h("LKP",2),h("BTM",2),h("LBL",3),h("GSS",3),h("RFA",3),h("GHB",3),h("EFP",3)]},{name:"Derk: Metaminds",factions:["A"],cards:[h("OJC",3),h("DMW",3),h("MMV",3),h("JPK",3),h("MMO",3),h("GMP",3),h("ALS",3),h("MMA",3),h("SFA",3),h("BTN",3)]},{name:"Foxhull: Grow Wide",factions:["U"],cards:[h("DBP",3),h("EHW",2),h("FRR",3),h("FWT",3),h("UPM",3),h("LKP",2),h("BTM",3),h("HTR",2),h("LBD",2),h("RFA",3),h("GHB",2),h("SDR",2)]},{name:"Hectares: Dino Attack",factions:["A","U"],cards:[h("ALS",3),h("TDS",3),h("FRR",3),h("WWP",3),h("SML",2),h("BSG",3),h("JPK",2),h("ODC",3),h("NXT",2),h("WMM",3),h("GHB",3)]},{name:"Klaven: Mono-N",factions:["N"],cards:[h("SCS",3),h("ROG",1),h("GGP",1),h("GGD",3),h("WFS",1),h("DSS",3),h("ZTU",1),h("GBG",3),h("HFA",3),h("EXD",1),h("EPD",1),h("BSR",1),h("MRF",2),h("HGS",3),h("GTH",3)]},{name:"Phoenyx: Free Spell Dmg",factions:["T","U"],cards:[h("SHK",3),h("MOE",3),h("FRR",3),h("LSK",3),h("FFU",3),h("UBL",3),h("WWS",3),h("FSS",3),h("ENR",3),h("MMH",3)]},{name:"Technogeek5000: Grow Wide",factions:["N","U"],cards:[h("DBP",2),h("EHW",2),h("FRR",3),h("HTP",2),h("UPM",3),h("LKP",2),h("GHT",3),h("GGP",2),h("LBD",1),h("EPD",2),h("DBT",2),h("SPD",3),h("SDR",3)]},{name:"Thematik: Level Up",factions:["A","T"],cards:[h("IWC",3),h("FSS",3),h("ETN",1),h("WPD",2),h("FSM",1),h("AHL",1),h("UBL",3),h("SMD",2),h("BTN",3),h("LSK",1),h("MMH",3),h("FFU",1),h("TSM",3),h("ALG",3)]},{name:"TinyGrimes: NT Shapers",factions:["N","T"],cards:[h("DSS",3),h("FSS",3),h("EPD",2),h("GTH",3),h("FSM",1),h("MOE",1),h("UBL",3),h("GGP",3),h("GBG",1),h("LSK",3),h("HGS",1),h("CTW",1),h("SHK",3),h("GGD",1),h("DBT",1)]}]},Ci={name:"The Forge",id:"TG10",decks:[{name:"DarkSoulSP: Grim Debuff",factions:["N","U"],cards:[h("BWK",3),h("TDS",2),h("FRR",3),h("WWP",3),h("GGP",3),h("GGD",3),h("DBT",1),h("WFS",3),h("CTW",3),h("EPD",3),h("GHB",3)]},{name:"ErrorAsh: Burn",factions:["N","T"],cards:[h("UBL",2),h("EFM",2),h("FBI",3),h("ESK",3),h("FLN",3),h("EFP",3),h("MOE",3),h("FSS",3),h("SHK",3),h("EPD",3),h("CHV",2)]},{name:"ErrorAsh: Farmer Tarsus",factions:["N","U"],cards:[h("WWS",3),h("DYB",3),h("FRR",3),h("SYL",3),h("EPD",3),h("SSE",2),h("NSH",2),h("TDW",3),h("NFF",2),h("CHR",2),h("LKP",2),h("EXD",2)]},{name:"ErrorAsh: Necro Mobiltiy",factions:["N","T"],cards:[h("NSH",2),h("SMD",2),h("DDD",3),h("TDW",3),h("VRP",3),h("WCS",3),h("BSM",3),h("SHG",2),h("TGI",2),h("EPD",3),h("FVA",2),h("DBT",1),h("TRN",1)]},{name:"Hans: Yetis",factions:["T","U"],cards:[h("UWL",3),h("FFU",3),h("WBY",3),h("UIM",3),h("WBU",3),h("SSR",1),h("TRN",1),h("GTT",1),h("GCR",3),h("FRR",3),h("UBL",3),h("WWP",3)]},{name:"MingisTheKing: Mobility",factions:["N","T"],cards:[h("DDD",3),h("DBT",3),h("EPD",3),h("EFP",3),h("GGP",3),h("LSK",3),h("SHK",3),h("UBL",3),h("WCS",3),h("ZTU",3)]},{name:"Noetherian: Shambler",factions:["N","U"],cards:[h("XSH",3),h("SPM",3),h("FRR",3),h("ODC",3),h("SSE",3),h("ESK",3),h("TGS",3),h("XRF",3),h("VRP",3),h("URB",3)]},{name:"Noetherian: Tempo",factions:["T","U"],cards:[h("RBH",3),h("TDS",3),h("FRR",3),h("WWP",3),h("EFP",3),h("AMY",2),h("FVA",2),h("ENR",3),h("ZSH",3),h("EHW",3),h("GHB",2)]},{name:"Piquadore: Zombies",factions:["N","T"],cards:[h("BWK",2),h("KOD",2),h("CYC",3),h("GRM",3),h("VYE",3),h("XRW",3),h("MOE",2),h("ZTU",3),h("BSM",3),h("EPD",3),h("DSS",3)]},{name:"Stautmeister: Yeti Mobility",factions:["T","U"],cards:[h("AGM",3),h("TDS",2),h("FRR",3),h("WWP",3),h("CSW",3),h("FLN",3),h("EFP",2),h("UWL",3),h("WBY",2),h("WCS",2),h("EHW",2),h("SHS",2)]},{name:"Technonaut: Steelscale",factions:["A","T"],cards:[h("UHS",2),h("FLN",3),h("STG",3),h("CRC",3),h("SHK",3),h("EFP",2),h("WMR",2),h("WMM",3),h("JPK",3),h("SMD",3),h("FVA",3)]},{name:"Technonaut: Woebringer",factions:["N","T"],cards:[h("LSK",2),h("WBG",3),h("EPD",3),h("DDD",3),h("SHK",3),h("EFP",3),h("ZTU",2),h("GGD",2),h("GGP",3),h("CTW",3),h("DBT",3)]},{name:"Zrandles: Metaminds",factions:["A","N"],cards:[h("DMW",3),h("GMP",3),h("MMA",3),h("MMV",2),h("TDW",3),h("VRP",3),h("EPD",3),h("SHG",2),h("OJC",2),h("ESK",2),h("CHV",2),h("CTW",2)]},{name:"Zrandles: Tempo",factions:["N","T"],cards:[h("CTW",1),h("GCR",1),h("CFG",1),h("FZS",1),h("FBI",3),h("MOE",3),h("EFP",3),h("LSK",3),h("FLN",3),h("SHK",3),h("RTS",3),h("GGP",3),h("UBL",2)]}]},wi={name:"Team A1",id:"A1FU",decks:[{name:"Phytogaunt",factions:["N","U"],cards:[h("DTD",3),h("EPD",2),h("XTE",3),h("GGD",3),h("GGP",3),h("GGR",3),h("ROG",1),h("ESK",3),h("GGW",3),h("POT",3),h("PTB",3)]},{name:"ANfinity",factions:["A","N"],cards:[h("IMA",3),h("AAA",2),h("MMA",3),h("KIW",3),h("ESU",3),h("ABE",3),h("AFO",1),h("XDH",2),h("GBG",1),h("SHV",2),h("SCV",2),h("LCE",2),h("MTS",1),h("PRI",1),h("WPC",1)]},{name:"Icefinity",factions:["A","T"],cards:[h("IMA",3),h("AAA",1),h("MMA",2),h("MOE",3),h("ESU",3),h("ABE",3),h("NNS",1),h("IGR",2),h("SHK",1),h("OBB",2),h("LCE",2),h("ITO",1),h("PRI",3),h("BRN",3)]},{name:"Drain Tank",factions:["A","N"],cards:[h("DTD",3),h("SRP",2),h("LLS",3),h("ESK",3),h("CYC",3),h("BRS",3),h("PLI",1),h("SOC",2),h("EPD",2),h("ABE",2),h("HOX",2),h("DCR",2),h("VYE",2)]},{name:"Big Animals",factions:["N","U"],cards:[h("DTD",3),h("MHR",2),h("DZD",3),h("SPB",3),h("SHY",3),h("URB",3),h("VIK",1),h("ESK",3),h("DYS",3),h("LYS",3),h("IME",3)]},{name:"Explosive Dragon Rage",factions:["A","T"],cards:[h("FMD",3),h("SGA",2),h("AFR",3),h("FBI",3),h("POK",3),h("SHK",3),h("ROK",3),h("IGR",1),h("OEX",3),h("BWW",2),h("STB",2),h("BRN",2)]},{name:"Angry Tree",factions:["N","U"],cards:[h("DTD",3),h("EPD",2),h("CYC",3),h("SPB",3),h("IME",3),h("SOC",3),h("ODC",2),h("ESK",2),h("WTA",3),h("VYE",3),h("HOX",3)]}]},Di={name:"Fandom Wiki",id:"FDWK",decks:[{name:"Castles",factions:["A","U"],cards:[h("TDS",3),h("TMS",3),h("DTR",3),h("HTR",3),h("RSD",3),h("SPB",3),h("MHR",3),h("RHU",3),h("AEC",3),h("FRR",3)]},{name:"Runebark's Revenge",factions:["U"],cards:[h("RBG",3),h("EVT",3),h("EFE",3),h("SBI",3),h("RSD",3),h("SPB",3),h("ODC",3),h("GSS",3),h("BTR",3),h("POD",3)]},{name:"Don't Wake Boris",factions:["T","U"],cards:[h("AGD",3),h("EVT",3),h("EFE",3),h("DGW",3),h("LYS",3),h("SBD",3),h("ODC",3),h("GSS",3),h("BRN",3),h("POD",3)]},{name:"Shrink n Squat",factions:["A","N"],cards:[h("DDS",3),h("ESK",3),h("EPD",3),h("GRW",3),h("GGP",3),h("HRM",3),h("PPM",3),h("SRM",3),h("MMG",3),h("WFS",3)]},{name:"Healthy Mystic",factions:["T","U"],cards:[h("LYR",3),h("PYM",3),h("EFE",3),h("TGS",3),h("LYS",3),h("SBD",3),h("TMG",3),h("TMM",3),h("SSH",3),h("SSE",3)]},{name:"Varna Control",factions:["A","N"],cards:[h("VIK",3),h("KIW",3),h("LCE",3),h("ABE",3),h("ZTU",3),h("SES",3),h("DCR",3),h("SCV",3),h("ESU",3),h("BRS",2),h("HOX",1)]},{name:"Barry's Buddies",factions:["A","T"],cards:[h("AAA",3),h("BRS",3),h("SMD",3),h("GOS",3),h("PMP",3),h("AGW",3),h("NNS",3),h("PLW",3),h("OBB",3),h("ABE",3)]},{name:"Heraldbomb",factions:["T","U"],cards:[h("UWL",3),h("HOD",3),h("PTB",3),h("BTM",3),h("LYS",3),h("DDF",3),h("MHR",3),h("WSE",3),h("SPB",3),h("WWP",3)]},{name:"Heartseeker",factions:["A","T"],cards:[h("UWL",3),h("FFU",3),h("FKS",3),h("OEX",3),h("POK",3),h("ROK",3),h("UHS",3),h("WBU",3),h("UCM",2),h("WSE",2),h("KKK",2)]},{name:"Punchy",factions:["A","U"],cards:[h("ODC",3),h("DBP",3),h("URB",3),h("RHU",3),h("CEX",3),h("GOS",3),h("LYS",3),h("PMP",3),h("WMM",3),h("ABE",3)]},{name:"Sea of Sludge",factions:["N","U"],cards:[h("ODC",3),h("WTA",3),h("GSS",3),h("DYL",3),h("AGD",3),h("GGW",3),h("CYC",3),h("VYE",3),h("DCR",3),h("SCV",3)]},{name:"Poison Control",factions:["A","U"],cards:[h("MHR",3),h("LOD",3),h("VNS",3),h("ESG",3),h("LCE",3),h("ESU",3),h("IMA",3),h("DSV",3),h("GSS",2),h("CSR",1),h("ABE",3)]},{name:"Original Fangsters",factions:["A","N"],cards:[h("VES",3),h("XTE",3),h("GGP",3),h("RHU",3),h("WBG",3),h("ABE",3),h("DDS",3),h("SOC",3),h("JPK",3),h("EPD",3)]},{name:"Hatorade",factions:["A","U"],cards:[h("MHR",3),h("ARB",3),h("DDF",3),h("IHA",3),h("LLG",3),h("NXA",3),h("OJC",3),h("RHU",3),h("SPB",3),h("LYS",3)]},{name:"Wegu Control",factions:["A","U"],cards:[h("MHR",3),h("CHR",3),h("KIW",3),h("ESG",3),h("WTA",3),h("ODC",3),h("GSS",3),h("OAP",2),h("NGQ",1),h("DDF",2),h("WPC",1),h("ABE",3)]}]},xi={name:"Battlebranded",id:"BTLB",decks:[{name:"Bucket of Spite",factions:["N","T"],cards:[h("SMD",2),h("SPH",3),h("BSM",3),h("EBW",3),h("UWL",3),h("BSW",2),h("BWW",1),h("FMD",3),h("BST",3),h("EPD",3),h("GGD",2),h("HOX",1),h("SOC",1)]},{name:"Overoverloaded",factions:["A","N"],cards:[h("XDH",3),h("RMB",3),h("ABE",3),h("IMA",3),h("EPD",3),h("TPG",3),h("ESU",3),h("KIW",2),h("LCE",2),h("ESK",2),h("STR",1),h("CYC",1),h("PRI",1)]},{name:"Dysian Forest",factions:["N","U"],cards:[h("POX",3),h("DBQ",3),h("TDS",3),h("NGQ",3),h("WWP",3),h("DTD",3),h("LBD",3),h("SSH",2),h("LYS",3),h("DYS",2),h("FRR",1),h("HOX",1)]},{name:"Statis Shenanigans",factions:["A","T"],cards:[h("OBB",3),h("SHK",3),h("ABE",3),h("IMA",3),h("SWR",3),h("GCR",2),h("ESU",3),h("NNS",2),h("LCE",3),h("OJC",2),h("BRS",1),h("VIC",1),h("PRI",1)]},{name:"Masochist Zoo",factions:["N","U"],cards:[h("DZD",3),h("TDW",3),h("LLD",3),h("LLG",3),h("RWC",3),h("BWT",3),h("DYS",2),h("SPB",3),h("SHY",3),h("IME",2),h("TDS",2)]},{name:"Pummelled by Gauntlets",factions:["A","N"],cards:[h("AGK",3),h("FWS",3),h("LLD",3),h("LLS",3),h("NXA",3),h("RHU",3),h("ARB",2),h("GOS",2),h("OJC",2),h("ESK",2),h("PMP",2),h("SOC",2)]},{name:"Nuada's Greenhouse",factions:["T","U"],cards:[h("NFF",3),h("NGQ",3),h("LKP",3),h("SYL",3),h("ATT",3),h("BWW",3),h("GMR",2),h("FRR",2),h("SSH",1),h("URB",2),h("BRN",2),h("SSE",3)]},{name:"Abominable Slaughter",factions:["N","T"],cards:[h("CGL",3),h("XDH",3),h("LLD",3),h("POX",3),h("ABM",3),h("ZXR",3),h("BWW",3),h("FMD",3),h("BST",2),h("ROK",3),h("HOX",1)]},{name:"Outraged Ingir",factions:["A","T"],cards:[h("OBB",3),h("FMD",3),h("IKA",3),h("BST",3),h("NXA",3),h("KKK",2),h("RHU",3),h("ROK",3),h("BWW",3),h("WSE",1),h("OEX",3)]},{name:"Lord of the Necros",factions:["N","T"],cards:[h("TPG",3),h("BSM",3),h("EBW",3),h("FST",3),h("TNL",3),h("BWW",3),h("XRW",3),h("CSB",3),h("GGD",3),h("SOC",3)]},{name:"Thar' Be Omegas",factions:["A","U"],cards:[h("AFS",3),h("BSS",3),h("ARB",3),h("FGA",3),h("FGB",3),h("FGG",3),h("FGD",3),h("TBA",3),h("SSH",3),h("NNS",3)]},{name:"Skillshriek",factions:["N","U"],cards:[h("POX",3),h("SEV",3),h("LLD",3),h("SPB",3),h("NSH",3),h("TDW",3),h("XDH",2),h("SBI",2),h("ATP",2),h("FRR",2),h("AEC",2),h("IME",2)]},{name:"Kitfinity",factions:["A","N"],cards:[h("XDH",3),h("MMX",3),h("GMP",2),h("IMA",3),h("VRP",3),h("SEV",3),h("ESU",3),h("KIW",3),h("SHG",2),h("SHV",2),h("SCV",1),h("CYC",1),h("AFO",1)]},{name:"There Can Be Only One",factions:["A","U"],cards:[h("AHL",3),h("WMM",3),h("ESU",3),h("PRI",3),h("JPK",3),h("MPH",3),h("LYS",3),h("BTM",2),h("FIN",1),h("SOD",3),h("VGR",3)]}]},Hi={name:"Fundecks",id:"FUN1",decks:[{name:"Frankenbomb",factions:["N"],cards:[h("DFB",3),h("BSR",3),h("HGS",3),h("HFA",3),h("FFD",3),h("XSH",3),h("XHU",3),h("WBG",3),h("GBG",3),h("CTI",3)]},{name:"Hangry Beasts",factions:["T","U"],cards:[h("TBA",3),h("SVH",3),h("MBP",2),h("FSH",3),h("RBH",3),h("FBC",3),h("LBR",2),h("CFB",3),h("AAK",3),h("KKK",2),h("FRR",1),h("FIN",1),h("IBF",1)]},{name:"Metamind Zapper",factions:["A","T"],cards:[h("MMA",3),h("DMW",3),h("GMP",3),h("SYO",3),h("KAW",3),h("SHK",3),h("CTL",2),h("CAG",2),h("MSC",2),h("MTS",2),h("ASG",2),h("ESU",2)]},{name:"Plant Party",factions:["N","U"],cards:[h("CTV",3),h("TDW",3),h("BTS",3),h("CHR",3),h("GMR",3),h("KOD",2),h("LKP",2),h("SHV",2),h("DBA",2),h("CCR",2),h("PTB",2),h("FIN",1),h("DBT",2)]},{name:"Voltron",factions:["A"],cards:[h("FGA",3),h("FGB",3),h("FGD",3),h("FGG",3),h("AFS",3),h("BSS",3),h("PRI",3),h("TUP",2),h("JPK",2),h("BWH",2),h("SFT",3)]},{name:"Do Fear The Reaper",factions:["A","N"],cards:[h("CTI",3),h("DFR",3),h("GRW",3),h("LGT",3),h("OXM",3),h("OXP",3),h("PHM",3),h("CTW",2),h("NNS",2),h("OXA",2),h("SDN",3)]},{name:"Muadib",factions:["N","U"],cards:[h("DBA",3),h("DYL",3),h("GSW",3),h("LBD",3),h("MMW",3),h("NCW",3),h("SRV",3),h("LBL",2),h("MSP",2),h("VYE",2),h("SBD",3)]},{name:"Triassic Park",factions:["T","U"],cards:[h("URB",3),h("UTR",3),h("UTM",3),h("ULR",3),h("UIC",3),h("UGL",3),h("RTS",3),h("BRN",2),h("LBR",2),h("IBF",2),h("GHB",3)]},{name:"Whacky Whinds",factions:["N","T"],cards:[h("DDD",3),h("WBH",3),h("HMF",3),h("WCS",3),h("GGP",3),h("SAD",3),h("SDN",3),h("EWE",3),h("SBG",3),h("ZSH",3)]},{name:"WWP 4 Victory",factions:["A","U"],cards:[h("WWP",3),h("EHN",2),h("SDR",2),h("HTR",2),h("MML",2),h("HTP",2),h("SHS",3),h("MND",2),h("NXC",2),h("CDT",2),h("PTB",2),h("SVO",2),h("MPH",2),h("SYO",2)]},{name:"Braaiins",factions:["N"],cards:[h("XDV",3),h("XRW",3),h("ONN",2),h("SLH",2),h("FWK",2),h("BWK",2),h("URD",2),h("TPG",2),h("DSS",2),h("KOD",2),h("ZMT",2),h("RSZ",2),h("BLW",2),h("CSB",2)]},{name:"Wanderin",factions:["N","U"],cards:[h("LYS",3),h("STR",2),h("MBP",2),h("OSL",2),h("RLW",3),h("SSR",1),h("SVO",2),h("SSE",2),h("RHW",3),h("SYL",2),h("TGS",2),h("TMG",3),h("XDH",3)]},{name:"Walls",factions:["A","T"],cards:[h("CDC",3),h("CTG",3),h("CRC",3),h("DCS",3),h("FRI",3),h("FGA",2),h("OBB",3),h("FVA",2),h("TGN",2),h("OWH",3),h("STN",3)]},{name:"Snakes In A Lane",factions:["A","U"],cards:[h("AFO",3),h("DSV",3),h("PSC",3),h("SHS",3),h("STO",3),h("NCL",2),h("VNF",3),h("LYS",2),h("SVO",1),h("VNS",3),h("TXS",2),h("ART",2)]},{name:"Benny & Izzy",factions:["A","T"],cards:[h("BRN",3),h("EFM",2),h("IZK",3),h("JPK",1),h("MTT",1),h("NNS",1),h("OBB",2),h("OWF",2),h("OEX",3),h("PRI",2),h("PTR",1),h("TST",1),h("FLS",2),h("BLH",3),h("SHK",3)]}]},ye=[vi,Ti,Si,Ci,wi,xi,Di,Hi];ye.forEach(n=>{n.decks.forEach(t=>{t.cards.map(i=>i.num).reduce((i,r)=>i+r,0)!==30&&console.warn("Pre-con deck with not 30 cards: "+n.name+" -- "+t.name)})});class Pe{state;constructor(t){this.state=t}getState(){return this.state}get adjacent(){return g.adjacentPositions(this.lane)}get attack(){return this.state.attack+this.modSum("AT")}get activationAvailable(){return this.state.negateActivate?!1:this.state.activationAvailable}set activationAvailable(t){this.state.activationAvailable=t}get aggressive(){return this.state.aggressive||this.modBool("AG")}set aggressive(t){this.state.aggressive=t}get armor(){return this.negateArmor?0:this.state.armor+this.modSum("AR")}get armorDmg(){return this.state.armorDmg}set armorDmg(t){this.state.armorDmg=t}get breakthrough(){return this.state.breakthrough||this.modBool("BT")}set breakthrough(t){this.state.breakthrough=t}get changed(){return this.state.changed||this.negateDefender||this.negateArmor||this.negateActivate||this.negateMobility||this.negateRegen||this.state.triggers.some(t=>t.changes)}set changed(t){this.state.changed=t}get code(){return this.state.code}get defender(){return this.negateDefender?!1:this.state.defender||this.modBool("DF")}set defender(t){this.negateDefender||(this.state.defender=t,this.enforceEffects("DF"))}get effects(){return this.state.effects}get extraBattles(){return this.state.extraBattles}set extraBattles(t){this.state.extraBattles=t}get faction(){return L.getCard(this.code).faction}get health(){return this.state.health+this.modSum("HL")}get id(){return this.state.id}get isActive(){return!this.sleeping||this.aggressive}isTribe(t){return L.getCard(this.code).isTribe(t)}get lane(){return this.state.lane}get level(){return L.getCard(this.code).level}get maxHealth(){return this.state.maxHealth+this.modSum("MH")}get mobility(){return this.negateMobility?0:this.state.mobility+this.modSum("MB")}get mobilityAvailable(){return this.state.mobilityAvailable}set mobilityAvailable(t){this.state.mobilityAvailable=t}get mods(){return this.state.mods}get negateActivate(){return this.state.negateActivate}set negateActivate(t){this.state.negateActivate=t}get negateArmor(){return this.state.negateArmor||this.modBool("NA")}set negateArmor(t){this.state.negateArmor=t,this.enforceEffects("AR")}get negateDefender(){return this.state.negateDefender||this.modBool("ND")}set negateDefender(t){this.state.negateDefender=t,this.enforceEffects("DF")}get negateMobility(){return this.state.negateMobility||this.modBool("NM")}set negateMobility(t){this.state.negateMobility=t}get negateRegen(){return this.state.negateRegen}set negateRegen(t){this.state.negateRegen=t}get opposed(){return g.searchByLane(g.oppositeLane(this.lane),!this.owner)}get owner(){return this.state.owner}get poison(){return this.state.poison+this.modSum("PN")}get rank(){return k.toPlayer(this.owner).rank}get regen(){return this.negateRegen?0:this.state.regen+this.modSum("RG")}get sleeping(){return this.state.sleeping}set sleeping(t){this.state.sleeping=t}get status(){return this.state.status}set status(t){this.state.status=t}get triggers(){return this.state.triggers}buff(t,i,r=void 0){t!==0&&(this.state.attack+=t,this.enforceEffects("AT")),i!==0&&(this.state.health+=i,this.state.maxHealth+=i,this.enforceEffects("CH"),W.deathProdder(this,r),i>0&&x.addEvents($.creatHeal(this,i)))}addArmor(t){if(!this.negateArmor){const i=this.state.armor+t;this.state.armor=Math.max(0,i),this.enforceEffects("AR")}}addMobility(t){if(!this.negateMobility){const i=this.state.mobility+t;this.state.mobility=Math.max(0,i)}}addPoison(t){const i=this.state.poison+t;this.state.poison=Math.max(0,i)}addRegen(t){if(!this.negateRegen){const i=this.state.regen+t;this.state.regen=Math.max(0,i)}}heal(t){if(t===0)return 0;const i=Math.min(this.health+t,this.maxHealth)-this.health;return this.state.health+=i,this.enforceEffects("CH"),x.addEvents($.creatHeal(this,i)),i}setHealth(t){this.state.health=t}hurt(t,i=!1){if(t<1)return[0,0];const r=Math.max(Math.min(t,this.armor-this.armorDmg),0);let s=t-r,c=this.health-s;this.state.armorDmg+=r;let f=0;return i&&c<0&&(f=s-this.health,s=this.health),s>0&&(this.state.health-=s,this.enforceEffects("CH")),[s,f]}hurtBattle(t,i,r=!1){const s=this.hurt(t,r);return s[0]>0&&x.addEvents($.damage(!0,s[0],this.health,!0,!0,this,i)),s[1]}hurtDirect(t,i,r=void 0){const s=this.hurt(t,!1);return s[0]>0&&(p.new().crd(i).txt(` dealt ${t} dmg to `).crd(this.code).txt(".").go(),x.addEvents($.damage(!1,s[0],this.health,!1,!0,this,void 0)),W.deathProdder(this,r)),s[0]}modEffectPropagator(t){t.type==="AT"?this.enforceEffects("AT"):t.type==="HL"?(this.enforceEffects("CH"),W.deathProdder(this)):t.type==="AR"||t.type==="NA"?this.enforceEffects("AR"):(t.type==="DF"||t.type==="ND")&&this.enforceEffects("DF")}modSum(t){return y.modSum(this.mods,t)}modBool(t){return y.modBool(this.mods,t)}hasMod(t){return y.hasModG(this.mods,t)}addMod(t){this.mods.push(t),this.modEffectPropagator(t)}addModSafe(t){y.hasMod(this.mods,t)||this.addMod(t)}removeMod(t,i=!0){const r=this.state.mods.filter(s=>s.granter===t);this.state.mods=this.state.mods.filter(s=>s.granter!==t),r.forEach(s=>{i&&this.modEffectPropagator(s),s.type==="AR"&&(this.state.armorDmg=Math.max(0,this.state.armorDmg-s.value))})}removeModSafe(t,i=!0){this.hasMod(t)&&this.removeMod(t,i)}expireMod(t){this.state.mods.splice(y.modIdx(this.state.mods,t),1)}bonusTotal(){let t=lt.sumNuggets(this.triggers);return this.state.actvBonus&&(t=lt.addNuggets(t,this.state.actvBonus)),t}endActivation(){this.modBool("EA")?this.removeMod(this.id):this.state.activationAvailable=!1,W.deathCheck(),T.actionDone()}move(t){this.state.lane=t,ce.positionChange(this.owner),x.addEvents($.creature("MOV",this))}addEffect(t,i){const r=y.effect(t,i);return this.effects.push(r),r}enforceEffects(t,i=!1){this.effects.filter(r=>r.watch===t).filter(r=>r.area==="A"||r.area==="C"&&this.owner===i).forEach(r=>L.getCard(r.logicCode).enforceEffect(this))}jr4(t,i=""){i===""&&(i=this.code);const r=y.trigger(t,i);return r.cardCode=this.code,r.creatId=this.id,this.triggers.push(r),r}removeTrigger(t){const i=y.trigIdx(this.triggers,t);i>-1?this.triggers.splice(i,1):console.error("Wery curious, could not find trigger to remove",t)}wipeAll(){this.preWipe(),this.state.hints=[],this.state.armor=0,this.state.mobility=0,this.state.poison=0,this.state.regen=0,this.state.aggressive=!1,this.state.defender=!1,this.state.breakthrough=!1,this.state.defender=!1,this.state.negateDefender=!1,this.state.negateArmor=!1,this.state.actvBonus=void 0,this.state.changed=!0,this.state.negateActivate=!0,g.creatByTarget(y.crTarg()).forEach(t=>{t.removeMod(this.id),t.enforceEffects("PS",this.owner)}),this.enforceEffects("AT"),this.enforceEffects("AR"),this.enforceEffects("CH"),ce.defenderChange(this.owner)}preWipe(){this.state.mods=[],this.state.triggers=[],this.state.effects=[]}get hints(){return this.state.hints}aiHints(){return this.hints}}class y{static creatureState(t,i){return{activationAvailable:!0,aggressive:!1,armor:0,armorDmg:0,attack:0,actvBonus:void 0,breakthrough:!1,changed:!1,code:"",defender:!1,effects:[],extraBattles:0,health:0,hints:[],id:"",lane:i,maxHealth:0,mobility:0,mobilityAvailable:!0,mods:[],negateActivate:!1,negateArmor:!1,negateDefender:!1,negateMobility:!1,negateRegen:!1,owner:t,poison:0,regen:0,sleeping:!0,status:"A",triggers:[]}}static effect(t,i){return{area:"A",watch:t,logicCode:i}}static freeCard(t){return{id:M.genId(),condition:y.target("TH"),sourceCard:t}}static mod(t,i,r=""){return{type:t,value:typeof i=="boolean"?i?1:0:i,granter:r,expiry:"NN"}}static modT(t,i,r=""){const s=y.mod(t,i,r);return s.expiry="ET",s}static trigger(t,i){return{id:M.genId(),type:t,logicCode:i,cardCode:"",creatId:"",customCode:"",interactive:!1,changes:!1,bonus:void 0}}static triggerReaction(t,i,r,s){return{event:t,owner:r,creatId:"",cardCode:"",trigger:i,host:s}}static basicAction(t){return{zone:"N",key:t,host:"",param:""}}static fieldSelectAction(t,i=-1,r=!0){return{zone:"F",key:t,playerA:r,lane:i,host:"",param:""}}static deckSelectAction(t,i,r){return{zone:"N",key:t,card:i,position:r,host:"",param:""}}static handSelectAction(t,i="",r="",s=-1){return{zone:"H",key:t,card:i,cost:r,position:s,host:"",param:""}}static playerSelectAction(t,i){return{zone:"P",key:t,playerA:i,host:"",param:""}}static draftSelectAction(t,i,r){return{zone:"N",key:t,index:i,pack:r,host:"",param:""}}static menuButtonAction(t){return{zone:"N",key:"MNBT",host:"",param:t}}static actionifier(t,i,r,s){const c=t;return c.key=i,c.host=r,c.param=s,c}static target(t){return{target:t,level:"LA",canLevel:!1,faction:"X",player:"X",card:"A",field:"A",creatStatus:"A",tribe:"AN",notMe:"",hasArmor:!1,canArmor:!1,hasDefender:!1,canDefender:!1,hasMobility:!1,canMove:!1,hasPoison:!1,hasRegen:!1,canRegen:!1,cardCode:"",victims:""}}static actionTarget(t,i,r,s){return y.actionifier(y.target(t),i,r,s)}static crTarg(){const t=y.target("TF");return t.field="O",t.creatStatus="V",t}static crActTarg(t,i,r){return y.actionifier(y.crTarg(),t,i,r)}static crNotMeTarg(t){const i=y.target("TF");return i.field="O",i.creatStatus="V",i.notMe=t,i}static crNotMeActTarg(t,i,r,s){return y.actionifier(y.crNotMeTarg(i),t,r,s)}static crFriendTarg(){const t=y.crTarg();return t.player="F",t}static crFriendActTarg(t,i,r){return y.actionifier(y.crFriendTarg(),t,i,r)}static crFriendNotMeTarg(t){const i=y.crNotMeTarg(t);return i.player="F",i}static crFriendNotMeActTarg(t,i,r,s){return y.actionifier(y.crFriendNotMeTarg(i),t,r,s)}static crEnemyTarg(){const t=y.crTarg();return t.player="E",t}static crEnemyActTarg(t,i,r){return y.actionifier(y.crEnemyTarg(),t,i,r)}static playerTarg(t){const i=y.target("TP");return i.player=k.toTarget(t),i}static playerActTarg(t,i,r,s){return y.actionifier(y.playerTarg(t),i,r,s)}static lvlHandActTarg(t,i){const r=this.actionTarget("TH","CARD",t,i);return r.player="F",r.canLevel=!0,r.hint=["CD"],r}static emptyTarg(){const t=y.target("TF");return t.field="E",t}static emptyActTarg(t,i,r){return y.actionifier(y.emptyTarg(),t,i,r)}static emptyPlayerTarg(t){const i=y.emptyTarg();return i.player=k.toTarget(t),i}static emptyPlayerActTarg(t,i,r,s){return y.actionifier(y.emptyPlayerTarg(t),i,r,s)}static modSum(t,i){return t.filter(r=>r.type===i).map(r=>r.value).reduce((r,s)=>r+s,0)}static modBool(t,i){return t.some(r=>r.type===i&&r.value===1)}static hasModG(t,i){return t.findIndex(r=>r.granter===i)>-1}static hasMod(t,i){return y.modIdx(t,i)>-1}static modIdx(t,i){return t.findIndex(r=>r.granter===i.granter&&r.type===i.type)}static trigIdx(t,i){return t.findIndex(r=>r.id===i.id)}}class Dt{constructor(t){this.code=t,this.level=parseInt(t.substring(3))}code;consistent=!1;faction="X";cardCode(){return Dt.extractCardCode(this.code)}image(t){return this.type==="S"?this.fixedImage(t):this.leveledImage(t)}leveledImage(t){return this.rawImage(this.code,t)}fixedImage(t){return this.rawImage(this.cardCode(),t)}rawImage(t,i){return`card/${i?"b":"s"}/${this.faction}/${t}.jpg`}free=!1;level;maxLevel=3;minLevel=1;name="";overload=!1;rarity="T";spice;text="";get type(){return "C"}hints;addSp(t,i){}aiHints(){return this.hints??[]}canLevel(){return this.level<this.maxLevel}enforceEffect(t){console.error("Effect without an enforcement routine",t.code)}enforcePlayerEffect(t,i){console.error("Effect without an enforcement routine",t)}handleAction(t){console.error("Custom card action did not have handler written for it.",t.key)}levelSpice(){return this.spice??[]}levelUpCard(){return this.canLevel()?`${this.cardCode()}${this.level+1}`:this.code}lValB(t){return t[this.level-1]}lValN(t){return t[this.level-1]}lValS(t){return t[this.level-1]}lValH(t){return t[this.level-1]}playTargets(){return[]}ddf8(t){return!1}jr8(t){throw new Error(`Unhandled trigger resolve in card ${this.code}, trigger ${t.trigger.type}`)}logAct(t,i=void 0,r=void 0){const s=t?" activated":" triggered";let c=p.new().crd(this.code).txt(s);i&&(c=c.txt(" on ").crd(i.code),r&&(c=c.txt(" and ").crd(r.code))),c.txt(".").go()}bonus;bonusPlay(){return this?.bonus?.play??0}ddp9(t,i,r,s,c=0){return lt.ddp9(t,i,r,s,c)}ddp6(t=0){const i=this.avgCreatureStats(t);return this.ddp9(1,i[0]+i[1],i[0],0,0)}avgCreatureStats(t=0){const i=t===0?this.level:t,r=[[4,8,14],[7,11,17]];let s;i===1?s=[1,0,0]:i===2?s=[.5,.5,0]:s=[.2,.4,.4];let c=0,f=0;return[0,1,2].forEach(m=>{c+=s[m]*r[0][m],f+=s[m]*r[1][m]}),[c,f]}rawNug(t,i,r,s,c=0){return lt.rawNugget(t,i,r,s,c)}buffNug(t,i){return this.rawNug(0,i+t,t,0,0)}playerNug(t){return this.rawNug(0,0,0,t,0)}spawnNug(t){const i=lt.cardCreatValueFormula(t);return this.rawNug(1,i,t.iAttack,0,0)}statSpawnNug(t,i){const r=this.buffNug(t,i);return r.count=1,r}avgSpawnNug(t){const i=this.avgCreatureStats(t);return this.statSpawnNug(i[0],i[1])}regnNug(t){return this.rawNug(0,lt.calcCreatValueFormula(0,0,0,0,t,!1,0),0,0,0)}multNug(t,i){return t.attack*=i,t.value*=i,t.count*=i,t.pHealth*=i,t}static extractCardCode(t){return t.substring(0,3)}get boof123n(){return this.level*-1}get boof124(){return this.lValN([1,2,4])}get boof135(){return this.lValN([1,3,5])}get boof137(){return this.lValN([1,3,7])}get boof147(){return this.lValN([1,4,7])}get boof234(){return this.level+1}get boof235(){return this.lValN([2,3,5])}get boof236(){return this.lValN([2,3,6])}get boof246(){return this.level*2}get boof246n(){return this.level*-2}get boof247(){return this.lValN([2,4,7])}get boof247n(){return this.lValN([-2,-4,-7])}get boof248(){return this.lValN([2,4,8])}get boof258(){return this.lValN([2,5,8])}get boof2510(){return this.lValN([2,5,10])}get boof2612(){return this.lValN([2,6,12])}get boof357(){return this.lValN([3,5,7])}get boof358(){return this.lValN([3,5,8])}get boof359(){return this.lValN([3,5,9])}get boof3510(){return this.lValN([3,5,10])}get boof3612(){return this.lValN([3,6,12])}get boof369(){return this.level*3}get boof369n(){return this.level*-3}get boof3610(){return this.lValN([3,6,10])}get boof3711(){return this.lValN([3,7,11])}get boof3712(){return this.lValN([3,7,12])}get boof3713(){return this.lValN([3,7,13])}get boof3714(){return this.lValN([3,7,14])}get boof3814(){return this.lValN([3,8,14])}get boof3915(){return this.lValN([3,9,15])}get boof468(){return this.lValN([4,6,8])}get boof469(){return this.lValN([4,6,9])}get boof4610(){return this.lValN([4,6,10])}get boof4612(){return this.lValN([4,6,12])}get boof4710(){return this.lValN([4,7,10])}get boof4711(){return this.lValN([4,7,11])}get boof4712(){return this.lValN([4,7,12])}get boof4713(){return this.lValN([4,7,13])}get boof4714(){return this.lValN([4,7,14])}get boof4812(){return this.level*4}get boof4812n(){return this.level*-4}get boof4813(){return this.lValN([4,8,13])}get boof4814(){return this.lValN([4,8,14])}get boof4815(){return this.lValN([4,8,15])}get boof4816(){return this.lValN([4,8,16])}get boof4914(){return this.lValN([4,9,14])}get boof4915(){return this.lValN([4,9,15])}get boof579(){return this.lValN([5,7,9])}get boof5711(){return this.lValN([5,7,11])}get boof5714(){return this.lValN([5,7,14])}get boof5812(){return this.lValN([5,8,12])}get boof5813(){return this.lValN([5,8,13])}get boof5814(){return this.lValN([5,8,14])}get boof5815(){return this.lValN([5,8,15])}get boof5914(){return this.lValN([5,9,14])}get boof5915(){return this.lValN([5,9,15])}get boof5916(){return this.lValN([5,9,16])}get boof5917(){return this.lValN([5,9,17])}get boof51014(){return this.lValN([5,10,14])}get boof51015(){return this.level*5}get boof51020(){return this.lValN([5,10,20])}get boof6812(){return this.lValN([6,8,12])}get boof6814(){return this.lValN([6,8,14])}get boof6912(){return this.lValN([6,9,12])}get boof6914(){return this.lValN([6,9,14])}get boof6915(){return this.lValN([6,9,15])}get boof6916(){return this.lValN([6,9,16])}get boof61014(){return this.lValN([6,10,14])}get boof61015(){return this.lValN([6,10,15])}get boof61016(){return this.lValN([6,10,16])}get boof61017(){return this.lValN([6,10,17])}get boof61018(){return this.lValN([6,10,18])}get boof61117(){return this.lValN([6,11,17])}get boof61218(){return this.lValN([6,12,18])}get boof61224(){return this.lValN([6,12,24])}get boof7911(){return this.lValN([7,9,11])}get boof7914(){return this.lValN([7,9,14])}get boof71013(){return this.lValN([7,10,13])}get boof71014(){return this.lValN([7,10,14])}get boof71015(){return this.lValN([7,10,15])}get boof71116(){return this.lValN([7,11,16])}get boof71117(){return this.lValN([7,11,17])}get boof71118(){return this.lValN([7,11,18])}get boof81116(){return this.lValN([8,11,16])}get boof81117(){return this.lValN([8,11,17])}get boof81217(){return this.lValN([8,12,17])}get boof81220(){return this.lValN([8,12,20])}get boof81318(){return this.lValN([8,13,18])}get boof91420(){return this.lValN([9,14,20])}get boof91421(){return this.lValN([9,14,21])}get boof101520(){return this.lValN([10,15,20])}get boof255080(){return this.lValN([25,50,80])}}class N extends Dt{constructor(t){super(t)}iHealth=0;iAttack=0;iAggro=!1;iArmor=0;iBT=!1;iDefend=!1;iMobile=0;iRegen=0;tribe=[];isTribe(t){return(Array.isArray(t)?t:[t]).every(r=>this.tribe.includes(r))}jr3(t,i){const r=y.creatureState(t,i);return r.id=M.genId(),r.code=this.code,r.health=this.iHealth,r.attack=this.iAttack,r.maxHealth=r.health,r.regen=this.iRegen,r.breakthrough=this.iBT,r.defender=this.iDefend,r.aggressive=this.iAggro,r.armor=this.iArmor,r.mobility=this.iMobile,r.hints=this.aiHints(),r.actvBonus=this.bonus?.activ8,new Pe(r)}playTargets(){const t=super.playTargets(),i=y.actionTarget("TF","FORG",this.code,"");return i.player="F",t.push(i),t}canActivate(t){return!1}startActivation(t){console.error("encountered activation request for creature with no activate",t)}get formation(){return!1}addExtraActivate(t){t.addMod(y.modT("EA",!0,t.id))}}class At extends Dt{constructor(t){super(t)}get type(){return "S"}logSpell(t=void 0,i=void 0){let r=p.new().txt("Casted ").crd(this.code);t&&(r=r.txt(" on ").crd(t.code),i&&(r=r.txt(" and ").crd(i.code))),r.txt(".").go()}}class ie{paStats;pbStats;constructor(t,i){this.paStats=t,this.pbStats=i}allStats(){return[this.paStats,this.pbStats]}playerStats(t){return t?this.paStats:this.pbStats}deltaStats(t){const i=this.playerStats(t),r=this.playerStats(!t);return ie.deltafier(i,r)}static deltafier(t,i){const r=ie.blankStats(!0);return r.creatCount=t.creatCount-i.creatCount,r.creatValue=t.creatValue-i.creatValue,r.threatValue=t.threatValue-i.threatValue,r.playerHealth=t.playerHealth-i.playerHealth,r.bonus=t.bonus-i.bonus,r}static blankStats(t){return{side:t,creatCount:0,creatValue:0,threatValue:0,playerHealth:0,bonus:0}}}class lt{static dcWeight=.4;fromState(){const t=g.qActiveCreats(),r=[!0,!1].map(s=>{const c=ie.blankStats(s),f=k.toPlayer(s);c.playerHealth=lt.playerFormula(f.health,k.totalArmor(f),k.totalPoison(f),f.effects.length);const m=lt.sumNuggets(f.triggers);return c.playerHealth+=m.pHealth,c.creatCount=m.count,c.creatValue=m.value,c.threatValue=m.attack,c.bonus=m.bonus,t.filter(A=>A.owner===s).forEach(A=>{const w=A.bonusTotal();c.playerHealth+=w.pHealth,c.bonus+=w.bonus,c.creatCount+=1+w.count,c.creatValue+=lt.creatValueFormula(A)+w.value,c.threatValue+=lt.threatFormula(A,t)+w.attack}),c});return new ie(r[0],r[1])}static ddp9(t,i,r,s,c=0){return lt.ddp9Nugget(t,i,r,s,c)[0]}static ddp9Nugget(t,i,r,s,c=0){const f=t/4,m=i/10,A=r/12,w=s/8;return[f+m+A+w+c,f,m,A,w,c]}static creatValueFormula(t){return lt.calcCreatValueFormula(t.attack,t.health,t.armor,t.mobility,t.regen,t.breakthrough,t.poison)}static cardCreatValueFormula(t){return lt.calcCreatValueFormula(t.iAttack,t.iHealth,t.iArmor,t.iMobile,t.iRegen,t.iBT,0)}static calcCreatValueFormula(t,i,r,s,c,f,m){const A=f?1:0;return i+Math.max(0,t)+(r+Math.min(s,3)+A+c-m)*1.5}static playerFormula(t,i,r,s){return t+(i-r)*2+s*4}static threatFormula(t,i){let r=0,s=0;if(t.defender)r=t.attack;else{const c=i.find(f=>f.owner!==t.owner&&f.lane===6-t.lane);c?(t.breakthrough&&(s=Math.max(t.attack-c.health,0)),r=t.attack-s):s=t.attack,s>0&&(s+=lt.scalingBonus(s))}return Math.max(r,0)+Math.max(s,0)}static rawNugget(t,i,r,s,c=0){return{count:t,value:i,attack:r,pHealth:s,bonus:c}}static addNuggets(t,i){return lt.rawNugget(t.count+i.count,t.value+i.value,t.attack+i.attack,t.pHealth+i.pHealth,t.bonus+i.bonus)}static sumNuggets(t){let i=lt.rawNugget(0,0,0,0,0);return t.forEach(r=>{r.bonus&&(i=lt.addNuggets(i,r.bonus))}),i}static scalingBonus(t){let i=7;if(t<=i)return 0;let r=!0,s=0,c=1;const f=7;for(;r;)t>i+f?(s+=c*f,i+=f,c++):(s+=c*(t-i),r=!1);return s}weighState(t,i,r){const s=t.deltaStats(r),c=i.deltaStats(r),f=ie.deltafier(c,s),m=f.playerHealth<0?-1:1,A=lt.scalingBonus(f.playerHealth*m)*m+f.playerHealth;return lt.ddp9Nugget(f.creatCount,f.creatValue,f.threatValue,A,f.bonus)[0]}}class Bi{aiPlayer;constructor(t){this.aiPlayer=t}jr7(t,i=3){return`${t}${i}`}jr6(t,i){const r=S.randInt(0,i.length),s=i[r];return i.splice(r,1),g.birth(t,"F",this.aiPlayer,s)}cheatin(){const t=k.toPlayer(this.aiPlayer),i=k.toPlayer(!this.aiPlayer),r=i.health-t.health;let s=0;r>85?s=3:r>65?s=2:r>45&&(s=1);const c=g.emptyLanes(this.aiPlayer);if(s===0||c.length===0)return!1;p.new().plr(this.aiPlayer).txt(" is a cheaty cheaterton.").go();let f=0;if(s===1){if(I.regularPlays-=1,f=S.randInt(0,13),f===0)this.jr6(this.jr7("HTR"),c);else if(f===1)this.jr6(this.jr7("AGM"),c).addRegen(8);else if(f===2){const m=this.jr6(this.jr7("YNS"),c);m.buff(0,15),m.addRegen(4)}else if(f===3)this.jr6(this.jr7("TBA"),c);else if(f===4)this.jr6(this.jr7("DCS"),c);else if(f===5)this.jr6(this.jr7("GGP"),c).addRegen(8);else if(f===6){const m=this.jr6(this.jr7("WFM"),c);m.aggressive=!0}else if(f===7){const m=this.jr6(this.jr7("FFU"),c);m.aggressive=!0}else if(f===8){const m=this.jr6(this.jr7("URB"),c);m.aggressive=!0}else if(f===9){const m=this.jr6(this.jr7("KOD"),c);m.aggressive=!0,m.addRegen(6)}else if(f===10)this.jr6(this.jr7("AGK"),c).addArmor(3);else if(f===11){const m=this.jr6(this.jr7("PSC"),c);m.aggressive=!0}else if(f===12){const m=this.jr6(this.jr7("SAD"),c);m.aggressive=!0}}else if(s===2)if(I.regularPlays-=1,f=S.randInt(0,17),f===0){const m=this.jr6(this.jr7("NDR"),c);m.aggressive=!0}else if(f===1){const m=this.jr6(this.jr7("CSW"),c);m.aggressive=!0}else if(f===2)this.jr6(this.jr7("GGD"),c).addRegen(6);else if(f===3)this.jr6(this.jr7("EFP"),c);else if(f===4)this.jr6(this.jr7("ZTU"),c);else if(f===5){const m=this.jr6(this.jr7("DDD"),c);m.aggressive=!0}else if(f===6)this.jr6(this.jr7("RBH"),c).addRegen(8);else if(f===7)this.jr6(this.jr7("SFT"),c);else if(f===8)this.jr6(this.jr7("GTT"),c);else if(f===9)this.jr6(this.jr7("SMD"),c);else if(c.length===5)this.jr6(this.jr7("DFB"),c),[1,2,3,4].forEach(m=>this.jr6(this.jr7("XHS"),c));else if(c.length===4)this.jr6(this.jr7("LMV"),c);else if(c.length===3)this.jr6(this.jr7("LHY"),c),this.jr6(this.jr7("SVH"),c),this.jr6(this.jr7("DBA"),c);else if(c.length===2)this.jr6(this.jr7("UTR"),c),this.jr6(this.jr7("TDS"),c);else if(t.turn===4)this.jr6(this.jr7("SSR"),c);else if(t.turn===1)this.jr6(this.jr7("ESK"),c);else{const m=this.jr6(this.jr7("XSH"),c);m.aggressive=!0}else if(s===3)if(f=S.randInt(0,20),f===0){const m=this.jr6(this.jr7("IHA",4),c);m.aggressive=!0}else if(f===1)this.jr6(this.jr7("CHR"),c);else if(f===2)this.jr6(this.jr7("FGO",1),c);else if(f===3)this.jr6(this.jr7("CHV",4),c);else if(f===4)this.jr6(this.jr7("KKK",4),c);else if(t.health<20){const m=this.jr6(this.jr7("ODC",4),c);m.aggressive=!0}else if(c.length===5){const m=S.randInt(0,4);if(m===0)[1,2,3,4,5].forEach(A=>this.jr6(this.jr7("UWL",2),c));else if(m===1)[1,2].forEach(A=>this.jr6(this.jr7("DFB"),c)),[1,2,3].forEach(A=>this.jr6(this.jr7("FFD"),c));else if(m===2)[1,2,3,4,5].forEach(A=>this.jr6(this.jr7("BWK"),c));else if(m===3){this.jr6(this.jr7("SBG"),c),this.jr6(this.jr7("EWE"),c);const A=this.jr6(this.jr7("BMY"),c);A.defender=!0,A.aggressive=!0}}else if(i.health>350)t.health<180&&k.heal(t,180-t.health,"POZ1"),this.jr6(this.jr7("AGD"),c);else if(i.health>250)this.jr6(this.jr7("FGO"),c);else if(c.length===4){const m=S.randInt(0,3);m===0?(this.jr6(this.jr7("AGK"),c),[1,2,3].forEach(A=>this.jr6(this.jr7("VBK"),c))):m===1?(this.jr6(this.jr7("TDS"),c),this.jr6(this.jr7("TDS"),c),this.jr6(this.jr7("UTR"),c)):m===2&&[1,2,3,4].forEach(A=>this.jr6(this.jr7("CDC"),c))}else if(c.length===3)if(S.randInt(0,2)){this.jr6(this.jr7("SDR"),c),this.jr6(this.jr7("SDR"),c);const m=this.jr6(this.jr7("UPM"),c);m.aggressive=!0}else{this.jr6(this.jr7("SDL"),c);const m=this.jr6(this.jr7("NFF"),c);m.aggressive=!0}else if(c.length===2)this.jr6(this.jr7("SPM"),c),this.jr6(this.jr7("SPM"),c);else{const m=this.jr6(this.jr7("NXC"),c);m.buff(10,0),m.aggressive=!0,m.addMobility(2),m.addRegen(5)}return t.health<30&&k.heal(t,50-t.health,"POZ1"),!0}}var rt=(n=>(n[n.Left=0]="Left",n[n.Both=1]="Both",n[n.Right=2]="Right",n[n.ForceRight=3]="ForceRight",n))(rt||{});class Ye{action;hitTest(t,i,r){}enabled=!0;mouse=0;validButton(t){return this.mouse===1||this.mouse===t}static arrayHit(t,i,r,s){let c,f=0;const m=t.length;for(;c===void 0&&f<m;)c=t[f].hitTest(i,r,s),f++;return c}}class ut extends Ye{originX;originY;endX;endY;constructor(t,i,r,s,c,f=0){super(),this.action=t,this.originX=i,this.originY=r,this.endX=i+s,this.endY=r+c,this.mouse=f}hitTest(t,i,r){if(!(!this.enabled||!this.validButton(r)))return this.originX<=t&&this.endX>=t&&this.originY<=i&&this.endY>=i?this.action:void 0}}class Vt extends ut{constructor(t,i,r,s,c=0){super({zone:"N",key:"BNDL",host:"",param:""},t,i,r,s,c)}childs=[];addChild(t){this.childs.push(t)}clear(){this.childs=[]}hitTest(t,i,r){if(super.hitTest(t,i,r))return Ye.arrayHit(this.childs,t,i,r)}}class Ni{guts="";txt(t){return ot.simOn||(this.guts+=t),this}plr(t){if(!ot.simOn){const i=k.toBool(t);this.guts+="^p"+(i?"a":"b")}return this}crd(t){return ot.simOn||(this.guts+="^c"+t),this}go(){ot.simOn||p.parse(this)}}class Re{realPromise;resolveMe(t){}rejectMe(){}getPromise(){return this.realPromise}constructor(){this.realPromise=new Promise((t,i)=>{this.resolveMe=t,this.rejectMe=i})}}const Ke=25,ai=9999,Fi=-9999,Pi=-999999,Mi=["CANC","DEET","SCRH"],Ri=["HPLY","ACTV","MOVE"];class Ei{log=!1;simOn=!1;dumb=!1;inPhase=!0;promStack=[];peekStack=[];peeking=!1;slowpoke=0;endCount=0;aiPlayer=!1;brdEval;rootBoardStats;turnSims=0;turnTime=0;kickOut=!1;kickTimer=0;constructor(){this.brdEval=new lt,this.rootBoardStats=new ie(ie.blankStats(!0),ie.blankStats(!1))}setLog(t){this.log=t}lNum(t){return t<-899999?"NUNS":t<-8999?"LOSS":t>8888?"KILL":t.toFixed(1)}popProm(t){this.promStack.pop().resolveMe(t)}popPeeker(t){this.peekStack.pop().resolveMe(t)}hitMainPhase(){this.dumb&&this.simOn&&this.inPhase&&I.mainBattle&&(this.inPhase=!1)}simEndpoint(t){if(this.endCount++,this.promStack.length===0)p.debug("Tried to end a sim, but no promise to unlock."),console.trace();else{let i;if(t==="T"){const r=this.brdEval.fromState();i=this.brdEval.weighState(this.rootBoardStats,r,this.aiPlayer)}else t==="W"?i=ai:t==="L"?i=Fi:i=Pi;this.popProm(i)}}async processAction(t,i,r=!1){const s=!this.simOn;let c=0,f,m=this.actionPruner(t);if(m=this.noHandDoubles(m),this.peeking){this.popPeeker(m);return}if(s&&this.dumb&&i&&(this.dumb=!1,p.debug("Smart Again.",!1)),this.dumb&&!this.inPhase){let U=m.filter(z=>z.key==="FITE"||z.key==="ENDT");U.length>0&&(m=U)}if(s){f=new He,f.hwhipe();const U=m.map((nt,se)=>f.drawAiGear(se,!1));await Promise.all(U),await new Ve().drawActions([]),await S.sleep(Ke),this.kickOut=!1,this.simOn=!0,this.slowpoke=Date.now(),this.rootBoardStats=this.brdEval.fromState(),this.endCount=0;const Q=await this.peeker(m),ct=[];let Y=0,kt=0,tt=[];Q.forEach(nt=>{Y+=nt.peek.length,nt.free&&(nt.free==="FREE"?kt++:tt.includes(nt.free)||(kt++,tt.push(nt.free))),nt.wasPeek&&nt.peek.some(se=>this.hasHint(se,"DF"))&&ct.push(nt.root)}),ct.length>0?(m=ct,this.dumb=!0,p.debug("Do firsts; dumb mode. Action count "+m.length,!1)):r?(this.dumb=!0,p.debug("Forced dumb mode.",!1)):I.regularPlays+kt>3?(this.dumb=!0,p.debug("4+ plays; dumb mode. Peek was "+Y,!1)):k.getActive().hand.length>7?(this.dumb=!0,p.debug("8+ in hand; dumb mode. Peek was "+Y,!1)):Y>29&&S.options.debug&&this.peekerReport(Q)}if(m.length===0){s&&(console.error("Root eval set consisted of 0 valid actions"),p.debug("!! Zero Action Root !!")),this.simEndpoint("D");return}let A=-99999;const w=[];let R=!0;if(s)if(m.length===1)w.push({a:m[0],weight:99}),R=!1;else{const U=m.findIndex(z=>z.key==="HPLY"&&z.card==="ESU2"||z.card==="ESU3");U>-1&&(w.push({a:m[U],weight:99}),R=!1)}if(R){ve.saveState();for(let U=0;U<m.length&&!this.kickOut;U++){const z=m[U];s&&(this.kickTimer=Date.now(),this.dumb&&z.key==="FITE"&&this.inPhase&&I.mainBattle&&(this.inPhase=!1));const Q=new Re;this.promStack.push(Q),T.handleAction(z);let ct=await Q.getPromise();Date.now()-this.kickTimer>4e4&&(this.kickOut=!0),ct+=this.hintWeight(z),ct>A&&(A=ct),ve.restoreState(),s&&(w.push({a:z,weight:ct}),await f.drawAiGear(U,!0),c++,await S.sleep(Ke))}ve.popState()}if(s)if(this.simOn=!1,this.kickOut){const U="🤖: High complexity encountered. Recombobulating.";p.new().txt(U).go(),this.processAction(t,i,!0)}else{const U=A-.4;let z=w.filter(tt=>tt.weight>U);z.length>1&&z.findIndex(tt=>tt.a.key==="ENDT")>-1&&(z=z.filter(tt=>tt.a.key!=="ENDT"));let Q;if(U>ai-100){const tt=z.find(nt=>nt.a.key==="FITE");tt?Q=tt.a:Q=z[S.randInt(0,z.length)].a}else Q=z[S.randInt(0,z.length)].a;const ct=Date.now()-this.slowpoke,Y=Math.max(1,350-ct),kt=ct-Ke*c;this.turnSims+=this.endCount,this.turnTime+=kt,S.options.debug&&Q.key==="HPLY"&&(p.debug("▪"),p.debug("🧠 Hand Choices 🧠"),w.filter(tt=>tt.a.key==="HPLY").sort((tt,nt)=>nt.weight-tt.weight).forEach(tt=>{let nt="";tt.a===Q?nt=" 🏆":tt.weight>U&&(nt=" 🌻"),p.new().crd(tt.a.card).txt(" : "+this.lNum(tt.weight)+nt).go()}),p.debug("🧠 ~~~~~~~~~~~~ 🧠"),p.debug("▪")),S.sleep(Y).then(()=>{T.handleAction(Q)})}else this.popProm(A)}actionPruner(t){let i=t.filter(r=>Mi.indexOf(r.key)===-1);return I.mainBattle?i=i.filter(r=>r.key!=="HDSC"):i=i.filter(r=>!this.hasHint(r,"BB")),i=i.filter(r=>{if(this.hasHint(r,"HR")){if(r.zone==="P")return r.playerA!==this.aiPlayer;{const s=r,c=g.ddf6(s);return c.owner===this.aiPlayer?c.aiHints().includes("MC"):!0}}else return!0}),i=i.filter(r=>{if(this.hasHint(r,"KL")){const s=r,c=g.ddf6(s);return c.owner===this.aiPlayer?c.aiHints().includes("ST"):!0}else return!0}),i=i.filter(r=>this.hasHint(r,"BF")?r.playerA===this.aiPlayer:!0),i=i.filter(r=>this.hasHint(r,"DB")?r.playerA!==this.aiPlayer:!0),i=i.filter(r=>{if(this.hasHint(r,"PN")){if(r.zone==="P")return r.playerA!==this.aiPlayer;{const s=r,c=g.ddf6(s);return c.owner===this.aiPlayer?c.aiHints().includes("MC"):!0}}else return!0}),i=i.filter(r=>{const s=r.key==="FORG";if(s||this.hasHint(r,"FL")){const c=r,f=g.searchByFSA(c);return f&&(I.mainBattle?I.newPre:I.newPost).includes(f.id)?f.aiHints().includes("RT")?!0:s?L.getCard(c.host).aiHints().includes("RD"):!1:!0}else return!0}),i}noHandDoubles(t){const i=[],r=[],s=[];return t.forEach(c=>{c.key==="HPLY"?i.push(c):r.push(c)}),i.forEach(c=>{const f=c.card;s.includes(f)||(s.push(f),r.push(c))}),r}async peeker(t){this.peeking=!0;const i=[],r=[];t.forEach(s=>{Ri.includes(s.key)?r.push(s):i.push({root:s,peek:[s],wasPeek:!1,free:""})}),ve.saveState();for(let s=0;s<r.length;s++){const c=r[s],f=new Re;this.peekStack.push(f),T.handleAction(c);const m=await f.getPromise();if(m.length>0){let A="";if(c.key==="HPLY"){const w=c;w.cost!==""&&(A=w.cost)}i.push({root:c,peek:m,wasPeek:!0,free:A})}ve.restoreState()}return ve.popState(),this.peeking=!1,i}peekerReport(t){let i=0,r=0,s=0,c=[],f=[];t.forEach(m=>{const A=m.peek.length;if(A>0){const w=m.root.key;if(w==="HPLY")if(m.peek[0].key==="FORG")r+=A;else{const R=p.fastName(m.root.card)+": "+A;c.push(R)}else if(w==="MOVE")s+=A;else if(w==="ACTV"){const R=p.fastName(m.root.host)+": "+A;f.push(R)}else i+=A}}),p.debug("High complexity hit: Root: "+t.length),r>0&&p.debug("Forges: "+r),s>0&&p.debug("Mobility: "+s),c.forEach(m=>p.debug(m)),f.forEach(m=>p.debug(m)),i>0&&p.debug("Other: "+i)}hintWeight(t){let i=!1,r=!1,s="",c=0;if(t.key==="HPLY"?s=t.card:t.key==="HDSC"?(r=!0,s=t.host):this.hasHint(t,"CD")&&(s=t.card,i=!0),s){const f=L.getCard(s);if(f.level<f.maxLevel&&!r&&(c+=this.levelBonusFormula(f,i)),!i){const m=this.hintAdjuster(f);m>0&&(r?c-=m:c+=m)}}return c}levelBonusFormula(t,i){let r=0;const s=t.aiHints();return s.includes("LG")?(r+=1,s.includes("LM")&&(r+=.8)):s.includes("LB")?r-=1.3:i&&(r+=.4),r}hintAdjuster(t){let i=0;const s=t.aiHints().find(c=>c.startsWith("ZZ"));return s&&(i=.5*parseInt(s.slice(2))),i}hasHint(t,i){return!t.hint||t.hint.length===0?!1:t.hint.includes(i)}logStats(t,i){const s=["Crt Cnt","Crt Val","Threat","P Health"].map((c,f)=>`${c}: ${this.numNum(i[f])}`).join(", ");console.log(t+s)}numNum(t){return t.length>6?t.charAt(0)==="-"?"NUNS":"KILL":t.padEnd(4)}cheater(){return M.aiMode&&M.aiActive&&S.options.cheater?new Bi(this.aiPlayer).cheatin():!1}peekAllCards(){const t=k.toPlayer(this.aiPlayer),i=t.deck.concat(t.hand,t.discard).sort();console.log(i.map(r=>p.fastName(r)).join(`
`))}peekDecks(){const t=k.toPlayer(!1),i=t.deck.map(f=>p.fastName(f)).sort(),r=t.hand.map(f=>p.fastName(f)).sort(),s=t.discard.map(f=>p.fastName(f)).sort(),c=["-- Deck --"].concat(i,"-- Hand --",r,"-- Discard --",s);console.log(c.join(`
`))}}const ot=new Ei;class Ii{getState(){const t={cCrd:this.currPlayCard,cCst:this.currPlayCost,cPos:this.currPlayPos,aa:this.actionHistory};return JSON.stringify(t)}setState(t){const i=JSON.parse(t);this.currPlayCard=i.cCrd,this.currPlayCost=i.cCst,this.currPlayPos=i.cPos,this.actionHistory=i.aa}handleAction(t){if(t.key==="DEET"){_t.init(t.param);return}if(t.key==="HPLY"){this.playCardSelect(t);return}if(t.key==="FORG"){I.forgeCard(t,this.currPlayCard,this.currPlayCost,this.currPlayPos);return}if(t.key==="FITE"){fi.fight(t.param==="M");return}if(t.key==="ENDT"){I.endTurn();return}if(t.key==="MOVE"){this.mobilitySelect(t);return}if(t.key==="MEND"){I.mobility(t);return}if(t.key==="HDSC"){this.currPlayCost="",I.cardPlayed(this.currPlayCard,this.currPlayCost,this.currPlayPos,!0),this.actionDone();return}if(t.key==="ACTV"){const i=g.jr5(t.param);L.getCard(i.code).startActivation(i);return}if(t.key==="NOTR"){t.param==="PM"&&bt.popMode(),this.actionDone(!0);return}if(t.key==="CARD"){L.getCard(t.host).handleAction(t);return}if(t.key==="CANC"||t.key==="CNCL"){t.param==="PM"&&bt.popMode(),this.actionHistory.pop(),this.ddf5();return}if(t.key==="USWP"){bt.popMode(),Et.whatNext();return}if(t.key==="DTUP"){_t.updateDetails(t),yt.drawAll();return}if(t.key==="VWDK"){St.handleShowDeck(t);return}if(t.key==="SCRK"){St.handleDeckScroll(t);return}if(t.key==="SCRH"){t.param==="R"?M.ui.handScrollLeft+=1:M.ui.handScrollLeft-=1,yt.drawAll();return}if(t.key==="DRFT"){pt.resumeDraft(t.param);return}if(t.key==="SCRD"){pt.paginate(t.param==="D"),yt.drawAll();return}if(t.key==="UIBT"){Je.handleUIButton(t);return}if(t.key==="MENU"){Je.handleMainMenuButton(t);return}if(t.key==="MNBT"){Je.handleMenuButton(t);return}if(t.key==="DSET"){this.ddf5(Rt.generateDeckPickerActions(parseInt(t.param)));return}if(t.key==="DECK"){Rt.handleDeckPick(t);return}if(t.key==="DBUG"){S.toggleDebug();return}}ddf5(t,i=!1){let r;if(t){const s=this.generateDetailActions();r=t.concat(s),this.actionHistory.push(r)}else r=this.actionHistory[this.actionHistory.length-1];M.aiActive?ot.processAction(r,i):yt.drawAll()}currPlayCard="";currPlayCost="";currPlayPos=-1;shiftPlayCard(t){t<this.currPlayPos&&this.currPlayPos--}playPosition(){return this.currPlayPos}actionHistory=[];get activeActions(){const t=this.actionHistory.length;return t===0?[]:this.actionHistory[t-1]}actionDone(t=!1){this.currPlayCard="",this.currPlayCost="",this.currPlayPos=-1,this.actionHistory=[],et.removeAll(),yt.drawActions([]),t?x.triggerDone():Et.whatNext()}spellCast(){I.cardPlayed(this.currPlayCard,this.currPlayCost,this.currPlayPos),this.actionDone()}playCardSelect(t){this.currPlayCard=t.card,this.currPlayCost=t.cost,this.currPlayPos=t.position;const i=this.getPlayCardActions(t);this.ddf5(i)}getPlayCardActions(t){const i=L.getCard(t.card),r=i.playTargets();I.regularPlays>0&&i.canLevel()&&r.push(D.buttonTarget("HDSC",t.card));const s=D.toActions(r);return s.push(y.handSelectAction("CANC",t.card,"",t.position)),s}mobilitySelect(t){const i=this.getMoveCardActions(t);this.ddf5(i)}getMoveCardActions(t){if(t.key!=="MOVE")throw new Error("Unexpected action passed to getMoveCardActions: "+t.key);const i=g.ddf6(t);let r=[];if(t.param==="ACTV"){const s=y.actionTarget("TB","ACTV",i.code,i.id);r=D.toActions(s)}return r.push(y.fieldSelectAction("CANC",t.lane,t.playerA)),g.canMove(i).map(s=>{const c=y.fieldSelectAction("MEND",s,t.playerA);return c.param=i.id,c}).concat(r)}noneEndTrigger(){return D.toActions(D.buttonTarget("NOTR"))[0]}cancelAction(){return D.toActions(D.buttonTarget("CANC"))[0]}emptyAdjacents(t,i){const r=i||t.id,s=y.emptyPlayerActTarg("F","CARD",t.code,r);return s.lanes=t.adjacent,D.toActions(s)}generateDetailActions(){const t=bt.mode;if(M.aiActive)return[];if(t==="G"){const i=k.getLocal().hand.map((s,c)=>{const f=y.handSelectAction("DEET",s,"",c);return f.param=s,f}),r=g.qActiveCreats().map(s=>{const c=y.fieldSelectAction("DEET",s.lane,s.owner);return c.param=s.code,c});return i.concat(r)}else if(t==="D"){const i=pt.currentPack.map((s,c)=>{const f=y.draftSelectAction("DEET",c,!0);return f.param=`${s}1`,f}),r=pt.picksAsDeck.map((s,c)=>{const f=y.draftSelectAction("DEET",c,!1);return f.param=`${s.card}1`,f});return i.concat(r)}return[]}}const T=new Ii;class Li{type="N0";events=[];triggerActions=[];deathCheck=!0;iaTrigLane=0;getState(){const t={type:this.type,events:this.events,tA:this.triggerActions,dC:this.deathCheck,tL:this.iaTrigLane};return JSON.stringify(t)}setState(t){const i=JSON.parse(t);this.type=i.type,this.events=i.events,this.triggerActions=i.tA,this.deathCheck=i.dC,this.iaTrigLane=i.tL}reset(){this.type="N0",this.events=[],this.triggerActions=[],this.deathCheck=!0}startBatch(){this.deathCheck=!1,this.type==="C0"?this.type="C1":this.type==="C1"?this.type="C2":this.type==="C2"&&(this.type="N0");const t=this.type;let i;if(t==="N0")i=this.events.slice(),this.events=[];else{const s=this.events.filter(f=>f.code==="DIE"),c=this.events.filter(f=>f.code!=="DIE");t==="C1"?(i=c,this.events=s):(i=s,this.events=c)}const r=this.generateTriggers(i);this.triggerActions=this.sortTriggers(r),Et.whatNext()}generateTriggers(t){let i;const r=t.map(s=>{s.code==="TRS"&&(i=s);const c=g.field.map(m=>m.triggers.map(A=>{const w=y.triggerReaction(s,A,m.owner,"C");return w.creatId=m.id,w.cardCode=m.code,w}).filter(A=>Qe.ddf8(A))).flat(),f=[!0,!1].map(m=>k.toPlayer(m).triggers.map(w=>y.triggerReaction(s,w,m,"P")).filter(w=>Qe.ddf8(w))).flat();return c.concat(f)}).flat();return i&&this.handleTurnStart(i),r}sortTriggers(t){const i=k.getActiveB(),r=t.filter(f=>!f.trigger.interactive&&f.owner===i),s=t.filter(f=>!f.trigger.interactive&&f.owner!==i);return t.filter(f=>f.trigger.interactive&&f.owner===i).concat(s,r)}handleTurnStart(t){const i=k.getActiveB();g.qPlayerCreats(i).filter(s=>s.sleeping).forEach(s=>{s.sleeping=!1});const r=M.tick();g.qActiveCreats().forEach(s=>{s.owner===t.playerA&&(s.activationAvailable=!0,s.mobilityAvailable=!0,s.sleeping=!1),s.armorDmg=0,s.poison>0&&s.hurtDirect(s.poison,"POIS",r),s.regen>0&&s.heal(s.regen),W.deathProdder(s,r)}),[k.playerA,k.playerB].forEach(s=>{s.armorDmg=0;const c=k.totalPoison(s);c>0&&k.hurtDirect(s,c,"POIS")})}getNextTrigger(){const t=this.triggerActions;if(t.length!==0)return t[t.length-1]}triggerDone(){this.triggerActions.length===0?console.error("batch.triggerDone() was called when there is no trigger actions"):(this.triggerActions.pop(),this.iaTrigLane=0),Et.whatNext()}addEvents(...t){this.events.push(...t)}}const x=new Li;class Gi{registry;constructor(){this.registry={}}register(t){if(this.registry[t])throw new Error(`Double registration of canvas ${t}`);this.registry[t]=new gi(t)}get(t){return this.registry[t]}}const st=new Gi;class $i extends N{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Abraxas, Avatar of Kadras",this.iAttack=this.boof4712,this.iHealth=this.lValN([7,11,21]),this.tribe.push("HY");const i=this.lValS(["Give an adjacent creature","Each adjacent creature gets","Each other friendly creature gets"]);this.text=`Activate: ${i} 2x attack this turn.`,this.bonus={activ8:this.buffNug(this.iAttack,0)}}targ(t){const i=y.crFriendNotMeActTarg("CARD",t.id,this.code,t.id);return this.level<3&&(i.lanes=t.adjacent),i}canActivate(t){return g.creatByTarget(this.targ(t)).length>0}startActivation(t){let i;this.level===1?i=this.targ(t):(i=D.boardTarget("CARD",this.code),i.param=t.id),i.hint=["BB"],T.ddf5(D.toActions([i,D.buttonTarget("CANC")]))}handleAction(t){const i=g.jr5(t.param);if(t.zone==="F"){const r=g.ddf6(t);this.logAct(!0,r),this.applyMod(r)}else{this.logAct(!0);const r=this.targ(i);g.creatByTarget(r).forEach(s=>{this.applyMod(s)})}i.endActivation()}applyMod(t){t.addMod(y.modT("AT",t.attack))}}class Wi extends N{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Abyssal Brute",this.iAttack=this.boof4712,this.iHealth=this.iAttack,this.tribe.push("ZB"),this.text=`When ${this.name} or another friendly creature enters a side lane, that creature gets ${p.jr9(this.level,this.level,!0)} and Regenerate ${this.level}.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("EF");s.bonus=this.buffNug(this.level,this.level);const c=r.jr4("MV");return c.bonus=this.regnNug(this.level),r}ddf8(t){const i=$.toCreature(t.event);return(i.creature.lane===1||i.creature.lane===5)&&i.creature.owner===t.owner}jr8(t){const i=$.toCreature(t.event);i.creature.buff(this.level,this.level),i.creature.addRegen(this.level),x.triggerDone()}}class Ui extends N{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Alloyin Highlander",this.iAttack=this.lValN([5,7,10]),this.iHealth=this.boof6914,this.tribe.push("HM"),this.text=`While ${this.name} is your only friendly creature, it gets ${p.jr9(this.boof4812,0)} and Armor ${this.boof248}.`}jr3(t,i){const r=super.jr3(t,i),s=r.addEffect("PS",this.code);return s.area="C",r}enforceEffect(t){const i=y.crNotMeTarg(t.id);i.player=k.toTarget(t.owner),g.creatByTarget(i).length===0?[y.mod("AT",this.boof4812,t.id),y.mod("AR",this.boof248,t.id)].forEach(s=>{t.addModSafe(s)}):t.removeModSafe(t.id)}}class Vi extends N{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Ambriel Archangel",this.iAttack=this.lValN([5,10,16]),this.iHealth=this.iAttack+1,this.tribe.push("AG");const i=this.boof101520;this.text=`While ${this.name} is your only friendly creature, you get Armor ${i}, and this gets Armor ${this.level+1} and Mobility 1.`}jr3(t,i){const r=super.jr3(t,i),s=r.addEffect("PS",this.code);return s.area="C",r}enforceEffect(t){const i=t.status==="A",r=y.crNotMeTarg(t.id);r.player=k.toTarget(t.owner);const s=g.creatByTarget(r);if(i&&s.length===0){const c=y.mod("AR",this.boof101520,t.id);k.addModSafe(t.owner,c);const f=y.mod("AR",this.level+1,t.id),m=y.mod("MB",1,t.id);t.addModSafe(f),t.addModSafe(m)}else k.removeModSafe(t.owner,t.id),t.removeModSafe(t.id)}}class Se extends N{lookup(t){return{["LLD"]:{c:()=>this.demC(),t:r=>this.demT(r)},["LLG"]:{c:()=>this.golC(),t:r=>this.golT(r)},["LLS"]:{c:()=>this.senC(),t:r=>this.senT(r)},["LLT"]:{c:()=>this.tyrC(),t:r=>this.tyrT(r)},["LLV"]:{c:()=>this.verC(),t:r=>this.verT(r)}}[t]}testAmbush(t,i){return this.lookup(t).t(i)}constructor(t){super(t),this.lookup(this.cardCode()).c()}ddf8(t){return!ot.simOn&&this.testAmbush(this.cardCode(),t)}jr8(t){const i=this.cardCode(),r=k.toPlayer(t.owner),s=r.hand.length;for(let c=s-1;c>-1;c--){const f=r.hand[c];f.startsWith(i)&&(p.new().crd(f).txt(" Ambushed.").go(),g.birth(f,"S",r.isPlayerA),I.levelAndDiscard(f,c,!1,"E"))}x.triggerDone()}ambT(){return`Spawn a ${this.name}. Then discard ${this.level===3?"":"and level up "} ${this.name}.`}demC(){this.faction="N",this.rarity="H",this.name="Leyline Demon",this.iAttack=this.lValN([3,9,14]),this.iHealth=this.iAttack+2,this.tribe.push("DM"),this.text="Ambush: When the enemy player plays a card, if it is their third card played that turn, "+this.ambT()}demT(t){return t.event.code==="PLC"?t.owner!==t.event.playerA&&I.cardsPlayed===3:!1}golC(){this.faction="U",this.rarity="H",this.name="Leyline Golem",this.iAttack=this.lValN([5,12,18]),this.iHealth=this.iAttack-(this.level+1),this.tribe.push("GL"),this.text="Ambush: When an enemy creature moves on the enemy player's turn, "+this.ambT()}golT(t){if(t.event.code==="MOV"){const i=$.toCreature(t.event);return t.owner!==i.creature.owner&&k.getActiveB()===i.creature.owner}else return!1}senC(){this.faction="A",this.rarity="H",this.name="Leyline Sentry",this.iAttack=this.lValN([2,7,9]),this.iHealth=this.iAttack+this.level+5,this.tribe.push("RB"),this.text="Ambush: When an enemy creature enters play on the enemy player's turn, if it wasn't Forged, "+this.ambT()}senT(t){if(t.event.code==="ENT"){const i=$.toEnterField(t.event);return t.owner!==i.creature.owner&&k.getActiveB()===i.creature.owner&&!i.forged}else return!1}tyrC(){this.faction="T",this.rarity="H",this.name="Leyline Tyrant",this.iAttack=this.lValN([6,12,17]),this.iHealth=this.iAttack-2,this.tribe.push("GT"),this.text="Ambush: When an enemy player gains health on their turn, "+this.ambT()}tyrT(t){return t.event.code==="PHL"?t.owner!==t.event.playerA&&k.getActiveB()===t.event.playerA:!1}verC(){this.faction="U",this.rarity="H",this.name="Leyline Vermin",this.iAttack=this.boof61218,this.iHealth=this.boof358,this.tribe.push("IN"),this.text="Ambush: When an enemy creature with Poison is destroyed on the enemy player's turn, "+this.ambT()}verT(t){if(t.event.code==="DIE"){const i=$.toCreature(t.event);return t.owner!==i.creature.owner&&k.getActiveB()===i.creature.owner&&i.creature.poison>0}else return!1}}class Oi extends N{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Apocrymancer",this.iAttack=this.boof3713,this.iHealth=this.iAttack+3,this.tribe.push("HM"),this.text="When you play an Alloyin spell, you may discard and level up a card."}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("PC");return s.bonus=this.rawNug(0,0,0,0,.5),s.interactive=!0,r}handleAction(t){I.levelAndDiscardA(t),T.actionDone(!0)}ddf8(t){if(t.event.playerA===t.owner){const i=L.getCard(t.event.cardCode);if(i.type==="S"&&i.faction==="A")return!0}return!1}jr8(t){const i=y.lvlHandActTarg(this.code,t.creatId),r=D.toActions([i,D.buttonTarget("NOTR")]);r.length>1?T.ddf5(r):x.triggerDone()}}class zi extends N{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Arboris, Grove Dragon",this.iAttack=this.lValN([5,9,20]),this.iHealth=this.iAttack,this.tribe.push("DG");const i=this.boof;this.text=`While you have over 120 health, Arboris gets ${p.jr9(i,i)}.`}jr3(t,i){const r=super.jr3(t,i);return r.addEffect("PH",this.code),r}enforceEffect(t){if(k.toPlayer(t.owner).health>120&&t.status==="A"){const r=this.boof;t.addModSafe(y.mod("HL",r,t.id)),t.addModSafe(y.mod("MH",r,t.id)),t.addModSafe(y.mod("AT",r,t.id))}else t.removeModSafe(t.id)}get boof(){return this.lValN([4,8,80])}}class Zi extends N{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Ash Maiden",this.iAttack=this.lValN([3,6,8]),this.iHealth=this.iAttack*2,this.tribe.push("HM"),this.text=`When a friendly creature ${p.dbdtap()}, it gets ${p.jr9(this.level,this.level)}.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("DM");return s.bonus=this.buffNug(this.level,this.level),r}ddf8(t){const i=$.toDamage(t.event);return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcCreat.owner===t.owner}jr8(t){const i=$.toDamage(t.event);this.logAct(!1,i.srcCreat),i.srcCreat.buff(this.level,this.level),x.triggerDone()}}class Ee extends N{constructor(t){super(t),this.rarity="H",this.iAttack=this.level+2,this.iHealth=this.iAttack;const i=this.cardCode();i==="SFA"?this.steel():i==="RFA"?this.root():i==="HFA"?this.hell():i==="SGA"&&this.storm(),this.text=`Forge: ${this.name} gets ${p.jr9(this.level,this.level)} for each ${p.factionText(this.faction)} card in your hand.`}hell(){this.faction="N",this.name="Hellforged Avatar",this.iRegen=this.level,this.tribe.push("AB")}root(){this.faction="U",this.name="Rootforged Avatar",this.iBT=!0,this.tribe.push("HM")}steel(){this.faction="A",this.name="Steelforged Avatar",this.iArmor=this.level,this.tribe.push("CY")}storm(){this.faction="T",this.name="Stormforged Avatar",this.iMobile=this.level,this.tribe.push("MT")}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}jr8(t){const i=$.toEnterField(t.event),r=k.toPlayer(t.owner).hand.filter(s=>L.getCard(s).faction===this.faction).length;if(r>0){const s=r*this.level;i.creature.buff(s,s)}x.triggerDone()}}class Z extends N{imgKey="";lookup(t){return{["BOS"]:()=>this.fixedSapling(3),["COZ"]:()=>this.cooze(),["DFM"]:()=>this.dfmimic(),["DZA"]:()=>this.dozer(),["EWF"]:()=>this.woof(),["FWG"]:()=>this.feywing(),["FRH"]:()=>this.hulk(),["FUN"]:()=>this.funguy(),["POZ"]:()=>this.purpz(),["NSD"]:()=>this.fixedSeedling(1),["OOZ"]:()=>this.nooze(),["RPT"]:()=>this.raptor(),["SPL"]:()=>this.minion(),["SXP"]:()=>this.fixedSapling(5),["SXD"]:()=>this.fixedSeedling(3),["SXT"]:()=>this.fixedTreefolk(7),["SDL"]:()=>this.minion(),["SPN"]:()=>this.nekSpirit(),["SPU"]:()=>this.uspirit(),["XYR"]:()=>this.yuruSpirit(),["TFK"]:()=>this.minion(),["TFD"]:()=>this.fixedTreefolk(this.boof5714),["TFF"]:()=>this.tfFight(),["TTF"]:()=>this.fixedTreefolk(3),["ZTR"]:()=>this.zimus(),["ZBS"]:()=>this.threeZomb(),["ZST"]:()=>this.strideZomb(),["ZMB"]:()=>this.commonZomb()}[t]}constructor(t){super(t),this.rarity="T";const i=this.cardCode();this.imgKey=i,this.minLevel=this.level,this.maxLevel=this.level,this.lookup(i)()}image(t){return this.rawImage(this.imgKey,t)}static fgoc(t){return "FGO"+t}fixedNekSpirit(t){this.faction="N",this.name="Spirit",this.tribe.push("ST"),this.iAttack=t,this.iHealth=t,this.imgKey=`${"SPN"}${this.level}`}nekSpirit(){this.fixedNekSpirit(this.boof51015)}yuruSpirit(){this.fixedNekSpirit(this.boof5814)}static purpOzC(t){return "POZ"+t}oozer(t){this.faction="N",this.name="Oozeling",this.tribe.push("OZ"),this.iHealth=this.iAttack,this.imgKey=t?"POZ":"OOZ"}purpz(){this.iAttack=this.boof135,this.oozer(!0)}nooze(){this.iAttack=this.boof4711,this.oozer(!1)}cooze(){this.iAttack=1,this.oozer(!1),this.hints=["RT"]}minion(){this.iAttack=Z.minionBuff(this.level),this.plont(),this.name=Z.minionName(this.level),this.hints=["RT"]}static tffc(t){return "TFF"+t}static minionCode(t){return(t===1?"SDL":t===2?"SPL":"TFK")+t}static minionName(t){return t===1?"Seedling":t===2?"Sapling":"Treefolk"}static minionBuff(t){return t===1?1:t===2?3:5}plont(){this.faction="U",this.iHealth=this.iAttack,this.tribe.push("PL")}fixedSapling(t){this.iAttack=t,this.plont(),this.name=Z.minionName(2),this.imgKey="SPL"}fixedSeedling(t){this.iAttack=t,this.plont(),this.name=Z.minionName(1),this.imgKey="SDL",this.hints=["RT"]}fixedTreefolk(t){this.iAttack=t,this.plont(),this.name=Z.minionName(3),this.imgKey="TFK"}tfFight(){this.iAttack=this.boof91421,this.plont(),this.name=Z.minionName(3),this.imgKey="TFK"}static bee(t){return "KBE"+t}dfmimic(){this.faction="U",this.name="Darkforged Mimic",this.tribe.push("DF","PL"),this.iHealth=this.boof3711,this.iAttack=this.iHealth-1,this.imgKey="SSP"+this.level}dozer(){this.faction="U",this.name="Dozer, the Awakened",this.iAttack=this.level*3+6,this.iHealth=this.iAttack,this.iAggro=!0,this.iBT=!0,this.tribe.push("BR"),this.imgKey=this.code,this.text=`${this.name} enters play with health equal to the Dozer, the Dormant it replaced.`}feywing(){this.faction="U",this.name="Feywing",this.iAttack=9,this.iHealth=9,this.iMobile=1,this.tribe.push("DG")}funguy(){this.name="Funguy",this.iAttack=this.lValN([6,12,14]),this.plont(),this.minLevel=1,this.maxLevel=3,this.level===1?this.hints=["ZZ-1"]:this.level===2&&(this.hints=["LB"])}raptor(){this.faction="U",this.name="Raptor",this.iAttack=1,this.iHealth=1,this.tribe.push("DN"),this.hints=["RT"]}uspirit(){this.faction="U",this.name="Spirit",this.iAttack=this.boof4610,this.iHealth=this.lValN([3,4,6]),this.tribe.push("ST")}woof(){this.faction="U",this.name="Ether Wolf",this.tribe.push("ST","WF"),this.iHealth=5,this.iAttack=6,this.imgKey="EWV"}static zomc(t){return "ZMB"+t}zimus(){this.faction="N",this.name="Zimus, the Returned",this.tribe.push("ZB"),this.iAttack=10,this.iHealth=5,this.imgKey=`${"ZTU"}2`}zomb(t,i){this.faction="N",this.name="Zombie",this.tribe.push("ZB"),this.iAttack=t,this.iHealth=i,this.imgKey="ZMB"}commonZomb(){const t=this.boof359;this.zomb(t,t)}threeZomb(){this.zomb(3,3)}strideZomb(){this.zomb(this.lValN([4,8,10]),this.boof369)}hulk(){this.faction="T",this.name="Frost Hulk",this.iAttack=9,this.iHealth=9,this.tribe.push("IC","EL")}}class at extends At{lookup(t){return{["AGP"]:{c:()=>this.apulseC(),z:()=>this.apulseZ()},["ABE"]:{c:()=>this.edicC(),z:()=>this.edicZ()},["CTL"]:{c:()=>this.ctlC(),z:()=>this.ctlZ()},["CCC"]:{c:()=>this.ccalC(),z:()=>this.ccalZ()},["COD"]:{c:()=>this.chontC(),z:()=>this.chontZ()},["CEX"]:{c:()=>this.cypeC(),z:()=>this.cypeZ()},["DCR"]:{c:()=>this.dcurC(),z:()=>this.dcurZ()},["DFS"]:{c:()=>this.defsC(),z:()=>this.defsZ()},["DGZ"]:{c:()=>this.digiC(),z:()=>this.digiZ()},["DGW"]:{c:()=>this.drwkC(),z:()=>this.drwkZ()},["EPD"]:{c:()=>this.epiC(),z:()=>this.epiZ()},["EWV"]:{c:()=>this.ewolC(),z:()=>this.ewolZ()},["FRR"]:{c:()=>this.roarC(),z:()=>this.roarZ()},["FSM"]:{c:()=>this.fstormC(),z:()=>this.fstormZ()},["GRM"]:{c:()=>this.mealC(),z:()=>this.mealZ()},["IBF"]:{c:()=>this.ibfC(),z:()=>this.ibfZ()},["IVS"]:{c:()=>this.infvC(),z:()=>this.infvZ()},["LOD"]:{c:()=>this.lashC(),z:()=>this.lashZ()},["NSH"]:{c:()=>this.shriekC(),z:()=>this.shriekZ()},["NCL"]:{c:()=>this.noxC(),z:()=>this.noxZ()},["OWF"]:{c:()=>this.oforceC(),z:()=>this.oforceZ()},["PLW"]:{c:()=>this.palwC(),z:()=>this.palwZ()},["PHC"]:{c:()=>this.pcallC(),z:()=>this.pcallZ()},["PTB"]:{c:()=>this.phyC(),z:()=>this.phyZ()},["PYS"]:{c:()=>this.pyreC(),z:()=>this.pyreZ()},["ROK"]:{c:()=>this.rokC(),z:()=>this.rokZ()},["ROU"]:{c:()=>this.riteC(),z:()=>this.riteZ()},["ROE"]:{c:()=>this.roteC(),z:()=>this.roteZ()},["STS"]:{c:()=>this.stsC(),z:()=>this.stsZ()},["SNP"]:{c:()=>this.pulseC(),z:()=>this.pulseZ()},["SRD"]:{c:()=>this.sradC(),z:()=>this.sradZ()},["SIV"]:{c:()=>this.beesC(),z:()=>this.beesZ()},["TST"]:{c:()=>this.talinC(),z:()=>this.talinZ()},["TRN"]:{c:()=>this.turnbC(),z:()=>this.turnbZ()},["VCH"]:{c:()=>this.verdC(),z:()=>this.verdZ()},["WOD"]:{c:()=>this.wdenC(),z:()=>this.wdenZ()},["WPC"]:{c:()=>this.wipeC(),z:()=>this.wipeZ()}}[t]}constructor(t){super(t),this.lookup(this.cardCode()).c()}image(t){const i=this.cardCode();return i==="NSH"||i==="PHC"?this.leveledImage(t):this.fixedImage(t)}playTargets(){const t=super.playTargets();if(this.cardCode()==="ABE"&&this.aeSides().some(r=>r.length===0))return t;const i=D.boardTarget("CARD",this.code);return t.push(i),t}handleAction(t){this.logSpell(),this.lookup(this.cardCode()).z(),T.spellCast()}ddf8(t){return Dt.extractCardCode(t.trigger.logicCode)==="DGW"}jr8(t){if(Dt.extractCardCode(t.trigger.logicCode)==="DGW"){const r=g.jr5(t.trigger.creatId);r.status==="A"&&W.destroy(r,this.code)}x.triggerDone()}apulseC(){this.faction="A",this.rarity="C",this.name="Aegis Pulse",this.text=`Each friendly creature gets Armor ${this.boof234}.`}apulseZ(){const t=this.boof234;g.ddf1().forEach(i=>{i.addArmor(t)})}aeSides(){return[g.qPlayerCreats(!0),g.qPlayerCreats(!1)]}edicC(){this.faction="A",this.rarity="H",this.name="Ambriel's Edict",this.maxLevel=1,this.overload=!0,this.text="If each player has at least one creature in play, destroy all but the highest attack creature that each player controls.~Then discard you hand."}edicZ(){const t=this.aeSides(),i=M.tick();let r=[];t.forEach(m=>{if(m.length>1){let A=[],w=-999999;m.forEach(R=>{R.attack>w?(w=R.attack,r.push(...A),A=[R]):R.attack===w?A.push(R):r.push(R)}),A.length>1&&(A.splice(S.randInt(0,A.length),1),r.push(...A))}}),r.forEach(m=>W.destroy(m,this.code,i));const s=k.getActive(),c=T.playPosition(),f=s.hand.length;for(let m=f-1;m>-1;m--)m!==c&&(s.discard.push(s.hand[m]),s.hand.splice(m,1),T.shiftPlayCard(m))}get ctlboof(){return(this.level-1)*2}ctlC(){this.faction="T",this.rarity="L",this.name="Call the Lightning";const t=this.level>1?` gets ${p.jr9(this.ctlboof,0)} this turn. Those creatures`:"";this.text=`Each friendly creature${t} battles an additional time this turn.`}ctlZ(){const t=this.ctlboof;g.ddf1().forEach(i=>{i.addMod(y.modT("AT",t)),i.extraBattles+=1})}ccalC(){this.faction="N",this.rarity="H",this.name="Cercee's Call",this.maxLevel=2,this.free=this.level===2,this.text="Spawn a copy of a friendly Zombie that was destroyed this turn."}ccalZ(){const t=k.getActiveB(),r=(t?I.deathsA:I.deathsB).filter(c=>{const f=L.getCard(c);return f.type==="C"&&f.isTribe("ZB")}),s=r.length;s>0&&g.birth(r[S.randInt(0,s)],"S",t)}chontC(){this.faction="T",this.rarity="R",this.name="Chant of Dragonwatch",this.maxLevel=1,this.text="Deal X damaage to each enemy creature, where X is your rank."}chontZ(){const t=k.getActive().rank,i=M.tick();g.qEnemyCreats().forEach(r=>{r.hurtDirect(t,this.code,i)})}get cyb(){return this.lValN([5,6,10])}cypeC(){this.faction="A",this.rarity="H",this.name="Cypien Experimentation";const t=this.cyb;this.text=`Give a random friendly creature ${p.jr9(t,0)}. Give a random friendly creature Armor ${t}`}cypeZ(){const t=g.ddf1(),i=t.length;if(i>0){const r=this.cyb,s=t[S.randInt(0,i)],c=t[S.randInt(0,i)];this.logAct(!1,s,c),s.buff(r,0),c.addArmor(r)}}dcurC(){this.faction="N",this.rarity="R",this.name="Death Current";const t=this.lValS(["a level 2 or lower","an","two"]);this.text=`Destroy ${t} enemy creature at random.`}dcurZ(){const t=y.crEnemyTarg();t.level=D.ddf2(this.level+1);const i=g.creatByTarget(t),r=i.length;if(r>0){const s=S.randInt(0,r),c=M.tick();W.destroy(i[s],this.code,c),this.level===3&&r>1&&(i.splice(s,1),W.destroy(i[S.randInt(0,r-1)],this.code,c))}}defsC(){this.faction="A",this.rarity="C",this.name="Defense Spire",this.overload=!0,this.maxLevel=1,this.text="Each friendly creature gets Armor 6 this turn."}defsZ(){g.ddf1().forEach(t=>{t.addMod(y.modT("AR",6))})}digiC(){this.faction="A",this.rarity="R",this.name="Digitize",this.text=`Each enemy creature gets ${p.jr9(this.boof4812n,0)}.`}digiZ(){const t=this.boof4812n;g.qEnemyCreats().forEach(i=>{i.buff(t,0)})}drwkC(){this.faction="T",this.rarity="L",this.name="Dragonwake",this.text=`Search your deck for a ${p.levelGateText(this.level+1)}Dragon and Spawn a copy of it. It gets Aggressive${this.level===3?".":' and "At the end of your turn, destroy this.'}`}drwkZ(){const t=y.target("DK");t.tribe="DG",t.level=D.ddf2(this.level+1),t.player="F";const i=D.deckByTarget(t),r=i.length;if(r>0){const s=g.birth(i[S.randInt(0,r)][0],"S",k.getActiveB());if(s&&(s.aggressive=!0,this.level<3)){const c=s.jr4("TE",this.code);c.creatId=s.id,c.changes=!0}}}epiC(){this.faction="N",this.rarity="H",this.name="Epidemic";const t=this.boof246n;this.text=`Each enemy creature gets ${p.jr9(t,t)}.`}epiZ(){const t=this.boof246n,i=y.crEnemyTarg();g.creatByTarget(i).forEach(r=>{r.buff(t,t)})}ewolC(){this.faction="U",this.rarity="C",this.name="Ether Wolves",this.maxLevel=1,this.overload=!0,this.hints=["ZZ-3"],this.text="Spawn two Ether Wolves."}ewolZ(){const t=M.tick(),i="EWF"+"1",r=k.getActiveB();g.birth(i,"S",r,void 0,t),g.birth(i,"S",r,void 0,t)}roarC(){this.faction="U",this.rarity="H",this.name="Ferocious Roar";const t=this.boof235;this.text=`Each friendly creature gets ${p.jr9(t,t,this.level===3)}${this.level===3?", and Breakthrough":""}.`}roarZ(){const t=this.boof235;g.ddf1().forEach(i=>{i.buff(t,t),this.level===3&&(i.breakthrough=!0)})}get fszap(){return this.level+4}fstormC(){this.faction="T",this.rarity="H",this.name="Firestorm",this.text=`Deal ${this.fszap} damage to each creature.`}fstormZ(){const t=this.fszap,i=M.tick();g.qActiveCreats().forEach(r=>{r.hurtDirect(t,this.code,i)})}mealC(){this.faction="N",this.rarity="R",this.name="Group Meal";const t=this.boof234;this.text=`Each enemy creature gets ${p.jr9(-1*t,0)}. Each friendly creature gets ${p.jr9(t,0)}.`}mealZ(){const t=this.boof234,i=k.getActiveB();g.qActiveCreats().forEach(r=>{const s=r.owner===i?t:-1*t;r.buff(s,0)})}ibfC(){this.faction="T",this.rarity="R",this.name="Iceborn Fortitude",this.text=`Each friendly creature gets ${p.jr9(0,this.boof3510)}.`}ibfZ(){const t=this.boof3510,i=y.crFriendTarg();g.creatByTarget(i).forEach(r=>{r.buff(0,t)})}infvC(){this.faction="N",this.rarity="C",this.name="Infernal Visage";const t=this.boof246;this.text=`Each friendly creature in a side lane gets ${p.jr9(t,t,!0)} and Regenerate ${this.level}.`}infvZ(){const t=this.boof246,i=y.crFriendTarg();i.lanes=[1,5],g.creatByTarget(i).forEach(r=>{r.buff(t,t),r.addRegen(this.level)})}lashC(){this.faction="U",this.rarity="L",this.name="Lash of Demara",this.text=`Each enemy creature gets Poison ${this.level+2}.`}lashZ(){const t=this.level+2;g.qEnemyCreats().forEach(i=>{i.addPoison(t)})}shriekC(){this.faction="N",this.rarity="L",this.name="Nethershriek";const t=L.getCard(this.ndc());this.text=`Spawn a ${p.tokName(t)}.`}shriekZ(){g.birth(this.ndc(),"S",k.getActiveB())}ndc(){return "NDR"+this.level}noxC(){this.faction="U",this.rarity="R",this.name="Noxious Cloud",this.text=`Each enemy creature gets Poison ${this.boof246}.`}noxZ(){const t=this.boof246;g.qEnemyCreats().forEach(i=>{i.addPoison(t)})}oforceC(){this.faction="A",this.rarity="H",this.name="Overwhelming Force",this.text="Each friendly creature gets "+(this.level===3?"2x attack.":`${p.jr9(this.boof369,0)}.`)}oforceZ(){if(this.level===3)g.ddf1().forEach(t=>{t.buff(t.attack,0)});else{const t=this.boof369;g.ddf1().forEach(i=>{i.buff(t,0)})}}palwC(){this.faction="A",this.rarity="R",this.name="Palladium Wave",this.maxLevel=1,this.text=`Each enemy creature gets ${p.jr9(-1,0).replaceAll("1","X")}, where X is two times your rank.`}palwZ(){const t=-2*k.getActive().rank;g.qEnemyCreats().forEach(i=>{i.buff(t,0)})}pcallC(){this.faction="T",this.rarity="L",this.name="Phoenix Call";const t=L.getCard(this.cpc());this.text=`Spawn a ${p.tokName(t)}.`}pcallZ(){g.birth(this.cpc(),"S",k.getActiveB())}cpc(){return "CYP"+this.level}phyC(){this.faction="U",this.rarity="H",this.name="Phytobomb";const t=L.getCard(Z.minionCode(this.level));this.text=`Put a ${p.tokName(t)} into each players available lanes.`}phyZ(){const t=Z.minionCode(this.level),i=M.tick();[!0,!1].forEach(r=>{g.emptyLanes(r).forEach(s=>{g.birth(t,"P",r,s,i)})})}pyreC(){this.faction="T",this.rarity="C",this.name="Pyre Song",this.text=`Each friendly creature deals ${this.level} damage to each enemy creature.`}pyreZ(){const t=this.level,i=M.tick(),r=g.qEnemyCreats();g.ddf1().forEach(s=>{r.forEach(c=>{c.hurtDirect(t,s.code,i)})})}rokC(){this.faction="T",this.rarity="L",this.name="Rage of Kadras",this.overload=!0,this.maxLevel=1,this.text="Each friendly Tempys creature gets +1 attack and deals damage equal to its attack to the creature opposing it."}rokZ(){const t=M.tick(),i=y.crFriendTarg();i.faction="T",g.creatByTarget(i).forEach(r=>{r.buff(1,0);const s=r.opposed;s&&s.hurtDirect(r.attack,r.code,t)})}riteC(){this.faction="N",this.rarity="C",this.name="Rite of Undeath",this.text=`Each friendly creature gets Regenerate ${this.boof468}.`}riteZ(){const t=this.boof468;g.ddf1().forEach(i=>{i.addRegen(t)})}roteC(){this.faction="T",this.rarity="H",this.name="Ritual of the Elements",this.maxLevel=1,this.hints=["ZZ-1"],this.text="Spawn a Lava Golem, Frost Hulk, or Lightning Titan at random."}roteZ(){const t=["FRH"+"1","LVG"+"1","LTT"+"1"];g.birth(t[S.randInt(0,3)],"S",k.getActiveB())}stsC(){this.faction="U",this.rarity="C",this.name="Scatter the Seeds";const t=L.getCard(Z.minionCode(this.level));this.text=`Spawn three ${p.tokName(t)}s.`}stsZ(){const t=Z.minionCode(this.level),i=M.tick();[1,2,3].forEach(r=>{g.birth(t,"S",k.getActiveB(),void 0,i)})}get spboof(){return(this.level+1)*-2}pulseC(){this.faction="A",this.rarity="H",this.name="Sonic Pulse",this.text=`Each enemy creature gets ${p.jr9(this.spboof,0)}.`}pulseZ(){const t=this.spboof;g.qEnemyCreats().forEach(i=>{i.buff(t,0)})}sradC(){this.faction="U",this.rarity="C",this.name="Soothing Radiance",this.text=`Heal ${this.boof61224} damage from each friendly creature.`}sradZ(){const t=this.boof61224;g.ddf1().forEach(i=>{i.heal(t)})}beesC(){this.faction="U",this.rarity="H",this.name="Stinging Invocation";const t=L.getCard(Z.bee(this.level));this.text=`Spawn one to three ${p.tokName(t)}s.`}beesZ(){const t=Z.bee(this.level),i=M.tick(),r=S.randInt(2,5);[1,2,3].every(s=>s<r?(g.birth(t,"S",k.getActiveB(),void 0,i),!0):!1)}talinC(){this.faction="T",this.rarity="C",this.name="Talin Stampede",this.text=`Each friendly Tempys creature gets ${p.jr9(this.boof5814,0)} this turn.`}talinZ(){const t=this.boof5814,i=y.crFriendTarg();i.faction="T",g.creatByTarget(i).forEach(r=>{r.addMod(y.modT("AT",t))})}turnbC(){this.faction="T",this.rarity="H",this.name="Turnabout",this.free=this.level===3;const t=this.boof235;this.text=`Each creature gets ${p.jr9(t,-1*t)} this turn.`}turnbZ(){const t=this.boof235,i=-1*t;g.qActiveCreats().forEach(r=>{r.addMod(y.modT("AT",t)),r.addMod(y.modT("HL",i)),r.addMod(y.modT("MH",i))})}verdC(){this.faction="U",this.rarity="H",this.name="Verdant Charge";const t=this.verdb;this.text=`Each friendly creature gets ${p.jr9(t,t,!0)} and Regenerate ${t}.`}verdZ(){const t=this.verdb;g.ddf1().forEach(i=>{i.buff(t,t),i.addRegen(t)})}get verdb(){return this.lValN([1,3,6])}wdenC(){this.faction="U",this.rarity="R",this.name="Whispers of Dendris",this.maxLevel=1,this.text=`Each friendly creature gets ${p.jr9(1,1).replaceAll("1","X")}, where X is your rank.`}wdenZ(){const t=k.getActive().rank;g.ddf1().forEach(i=>{i.buff(t,t)})}wipeC(){this.faction="A",this.rarity="H",this.name="Wipe Clean",this.overload=!0,this.maxLevel=1,this.text="Remove all abilities from each creature and player."}wipeZ(){[!0,!1].forEach(i=>{const r=k.toPlayer(i);r.effects=[],r.mods=[],r.triggers=r.triggers.filter(s=>s.customCode==="AB"),r.poison=0,r.armor=0});const t=g.qActiveCreats();t.forEach(i=>{i.preWipe()}),t.forEach(i=>{i.wipeAll()})}}class Yi extends N{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Borean Mystic",this.iAttack=this.boof4814,this.iHealth=this.boof71118,this.tribe.push("WN","AS"),this.text=`Activate: Move another friendly creature to an available lane adjacent to ${this.name}.`,this.bonus={activ8:this.rawNug(0,0,0,0,.5)}}canActivate(t){return this.emptySloots(t).length>0&&this.buddies(t.id).length>0}startActivation(t){const i=this.buddies(t.id);i.push(T.cancelAction()),T.ddf5(i)}handleAction(t){const i=S.deTil(t.param);if(i[0]==="P1"){const r=g.ddf6(t),s=g.jr5(i[1]),c=this.emptySloots(s,r.id);c.push(T.cancelAction()),T.ddf5(c)}else{const r=g.jr5(i[1]),s=g.jr5(i[2]);this.logAct(!0,s),s.move(t.lane),r.endActivation()}}emptySloots(t,i=""){return T.emptyAdjacents(t,S.enTil("P2",t.id,i))}buddies(t){return D.toActions(y.crFriendNotMeActTarg("CARD",t,this.code,S.enTil("P1",t)))}}class Ki extends N{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Bron, Wild Tamer",this.iAttack=this.boof4712,this.iHealth=this.iAttack,this.tribe.push("TK"),this.hints=["RD"];const i=this.boof357;this.text=`Upgrade Dinosaur: Replace Bron with a level ${this.level} Dino Knight.~When this ${p.dbdtap()}, heal ${i} damage from each other friendly creature.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("UP");const s=r.jr4("DM");return s.bonus=this.buffNug(0,this.boof357),r}ddf8(t){return t.event.battle&&!t.event.isCreatTarg&&t.event.isCreatSrc&&t.event.srcId===t.creatId}jr8(t){if(t.trigger.type==="UP"){const r=$.toReplaced(t.event).replCreat;r.isTribe("DN")&&g.birth("DNK"+this.level,"R",r.owner,r.lane)}else if(t.trigger.type==="DM"){const i=this.boof357,r=y.crNotMeTarg(t.creatId);r.player=k.toTarget(t.owner),g.creatByTarget(r).forEach(c=>c.heal(i))}x.triggerDone()}}class qi extends N{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Brightsteel Gargoyle",this.iAttack=this.boof61016,this.iHealth=this.iAttack,this.iMobile=1,this.tribe.push("RB"),this.text=`At the end of your turn, ${this.name} gets Armor ${this.boof2510} and Defender until the end of the next turn.`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("PT"),r}ddf8(t){return t.event.playerA===t.owner}jr8(t){const i=g.jr5(t.creatId);i.addMod(y.modT("AR",this.boof2510)),i.addMod(y.modT("DF",!0)),x.triggerDone()}}class Xi extends At{constructor(t){super(t),this.faction="A",this.rarity="R",this.name="Bulwark Bash",this.text=`Deal damage equal to ${this.level>1?this.level+"x ":""}the Armor on a friendly creature to an enemy creature.`}playTargets(){const t=super.playTargets();if(this.enemyTargActions().length>0){const i=y.crFriendActTarg("CARD",this.code,"P1");i.hasArmor=!0,t.push(i)}return t}handleAction(t){const i=S.deTil(t.param);if(i[0]==="P1"){const r=g.ddf6(t),s=this.enemyTargActions(r.id);s.push(T.cancelAction()),T.ddf5(s)}else{const r=g.ddf6(t),s=g.jr5(i[1]);this.logSpell(s),r.hurtDirect(s.armor*this.level,this.code),T.spellCast()}}enemyTargActions(t=""){const i=y.crEnemyActTarg("CARD",this.code,S.enTil("P2",t));return D.toActions(i)}}class ji extends N{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Byzerak Spitemage",this.iAttack=this.boof369,this.iHealth=this.level,this.iAggro=!0,this.tribe.push("HM"),this.text=`Allied Nekrium: When ${this.name} ${p.dbdtac(this.level)}, destroy it.`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}ddf8(t){const i=$.toDamage(t.event);return i.battle&&i.isCreatSrc&&i.isCreatTarg&&i.srcId===t.creatId&&D.levelTestCommon(i.hurtCreat.level,this.level)}jr8(t){if(t.trigger.type==="FR"&&I.allied("N")){const i=g.jr5(t.creatId),r=i.jr4("DM");r.bonus=this.avgSpawnNug(),i.changed=!0}else if(t.trigger.type==="DM"){const r=$.toDamage(t.event).hurtCreat;r.status==="A"&&W.destroy(r,this.code)}x.triggerDone()}}class Ji extends N{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Cercee, Hand of Varna",this.iAttack=this.lValN([1,3,5,7]),this.iHealth=this.lValN([6,10,20,40]),this.tribe.push("FB"),this.hints=["ZZ-2"],this.iMobile=1,this.maxLevel=4;const i=this.level===4?`When ${this.name} ${p.dbdtap()}, deal damamge to that player equal to their health.~`:"";this.text=i+`When ${this.name} ${p.dbdtac(this.level)}, destroy that creature.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("DM");return this.level===4?s.bonus=this.rawNug(0,0,0,0,10):s.bonus=this.avgSpawnNug(),r}ddf8(t){const i=$.toDamage(t.event);if(i.battle&&i.isCreatSrc&&i.srcId===t.creatId){if(this.level===4)return!0;if(i.isCreatTarg){const r=i.hurtCreat;return D.levelTestCommon(r.level,this.level)}}return!1}jr8(t){const i=$.toDamage(t.event);if(i.isCreatTarg){const r=i.hurtCreat;r.status==="A"&&W.destroy(r,this.code)}else k.hurtDirect(i.hurtPlayer,i.hurtPlayer.health,this.code);x.triggerDone()}}class re extends At{lookup(t){return{["ABL"]:{c:()=>this.ablC(),z:r=>this.ablZ(r)},["DYB"]:{c:()=>this.drybC(),z:r=>this.drybZ(r)},["FVA"]:{c:()=>this.fervassC(),z:r=>this.fervassZ(r)},["ROG"]:{c:()=>this.rotgC(),z:r=>this.rotgZ(r)},["SPG"]:{c:()=>this.spgrC(),z:r=>this.spgrZ(r)},["TOB"]:{c:()=>this.blightC(),z:r=>this.blightZ(r)},["ULG"]:{c:()=>this.ulegC(),z:r=>this.ulegZ(r)},["VOB"]:{c:()=>this.vobC(),z:r=>this.vobZ(r)},["WGE"]:{c:()=>this.weguC(),z:r=>this.weguZ(r)}}[t]}cardCast(t,i){this.lookup(t).z(i)}playTarg;xl=!0;constructor(t){super(t),this.playTarg=y.crActTarg("CARD",this.code,""),this.lookup(this.cardCode()).c()}playTargets(){const t=super.playTargets();return t.push(this.playTarg),t}handleAction(t){const i=g.ddf6(t);this.logSpell(this.xl?i:void 0),this.cardCast(this.cardCode(),i),T.spellCast()}ddf8(t){const i=Dt.extractCardCode(t.trigger.logicCode);if(i==="TOB"&&t.trigger.type==="DM"){const r=$.toDamage(t.event);if(r.battle&&r.isCreatTarg&&r.isCreatSrc&&r.srcId===t.creatId)return this.level===3?!0:L.getCard(r.hurtCreat.code).level<=this.level}else if((i==="ABL"||i==="VOB"||i==="WGE")&&t.trigger.type==="DM"){const r=t.event;return r.battle&&!r.isCreatTarg&&r.isCreatSrc&&r.srcId===t.creatId}else if(i==="DYB"&&t.trigger.type==="EF"){const r=$.toEnterField(t.event);return t.trigger.creatId!==r.creature.id&&r.creature.owner===t.owner}else{if(i==="SPG"&&t.trigger.type==="TS")return t.event.playerA===t.owner;if(i==="ROG"&&t.trigger.type==="DS"||i==="WGE"&&t.trigger.type==="PT"||i==="ULG"&&t.trigger.type==="VN"||i==="FVA"&&t.trigger.type==="FK")return!0}return!1}jr8(t){const i=Dt.extractCardCode(t.trigger.logicCode);if(i==="TOB"){const r=t.event,s=g.jr5(r.target);s.status==="A"&&W.destroy(s,this.code)}else if(i==="FVA"){const r=g.jr5(t.creatId),s=g.searchByLane(g.oppositeLane(r.lane),!r.owner);s&&s.hurtDirect(this.boof3612,r.code)}else if(i==="ROG"||i==="DYB"||i==="ABL"){const r=g.jr5(t.creatId);r.status==="A"&&(this.logAct(!1,r),r.buff(this.level,this.level))}else if(i==="VOB"){const r=$.toDamage(t.event);r.srcCreat.hurtDirect(r.dmg,this.code)}else if(i==="SPG"){const r=g.jr5(t.creatId),s=this.boof246;this.logAct(!1,r),r.buff(s,s)}else if(i==="WGE"){if(t.trigger.type==="DM")k.heal(t.owner,t.event.dmg,this.code);else if(t.trigger.type==="PT"){const r=t.trigger.customCode,s=g.jr5(t.creatId);s.triggers.filter(f=>f.customCode===r).forEach(f=>s.removeTrigger(f))}}else if(i==="ULG"){const r=g.jr5(t.creatId).code,s=g.birth(r,"S",t.owner);s&&this.logAct(!1,s)}else super.jr8(t);x.triggerDone()}ablC(){this.faction="T",this.rarity="R",this.name="Asir's Blessing",this.text=`Give a creature "When this creature ${p.dbdtap()}, it gets ${p.jr9(this.level,this.level)}."`,this.playTarg.hint=["BF"]}ablZ(t){t.changed=!0;const i=t.jr4("DM",this.code);i.bonus=this.buffNug(this.level,this.level)}drybC(){this.faction="U",this.rarity="R",this.name="Dryad's Boon",this.text=`Give a creature ${p.jr9(this.level,this.level,!0)}, and "When another friendly creature enters play, this gets ${p.jr9(this.level,this.level)}."`,this.playTarg.hint=["BF"]}drybZ(t){t.buff(this.level,this.level),t.changed=!0;const i=t.jr4("EF",this.code);i.bonus=this.buffNug(this.level,this.level)}fervassC(){this.faction="T",this.rarity="H",this.name="Fervent Assault",this.playTarg.player="F",this.text=`Give a friendly creature Mobility ${this.level} and "Flank: Deal ${this.boof3612} damage to the opposing creature.`}fervassZ(t){t.changed=!0,t.addMobility(this.level);const i=t.jr4("FK",this.code);i.bonus=this.buffNug(this.boof3612,0)}rotgC(){this.faction="N",this.rarity="H",this.name="Rite of the Grimgaunt",this.playTarg.hint=["BF"],this.text=`Give a creature "When a creature is destroyed, this gets ${p.jr9(this.level,this.level)}."`}rotgZ(t){t.changed=!0;const i=t.jr4("DS",this.code);i.bonus=this.buffNug(this.level,this.level)}spgrC(){this.faction="U",this.rarity="R",this.name="Shardplate Graft";const t=this.boof246;this.text=`Give a creature ${p.jr9(t,t,!0)}, and "At the start of your turn, this gets ${p.jr9(t,t)}."`,this.playTarg.hint=["BF"]}spgrZ(t){const i=this.boof246;t.buff(i,i),t.changed=!0;const r=t.jr4("TS",this.code);r.bonus=this.buffNug(i,i)}blightC(){this.faction="N",this.rarity="R",this.name="Touch Of Blight",this.text=`Give a creature "When this creature ${p.dbdtac(this.level)}, destroy that creature."`,this.playTarg.hint=["BF"]}blightZ(t){t.changed=!0;const i=t.jr4("DM",this.code);i.bonus=this.avgSpawnNug()}ulegC(){this.faction="N",this.rarity="H",this.name="Undying Legacy",this.text='Give a friendly creature "Vengeace: Spawn a copy of this."',this.playTarg.player="F",this.maxLevel=1,this.overload=!0}ulegZ(t){t.changed=!0;const i=t.jr4("VN",this.code),r=L.getCard(t.code);t.hints.push("ST"),i.bonus=this.spawnNug(r)}vobC(){this.faction="T",this.rarity="R",this.name="Violent Outburst",this.level===3?this.free=!0:this.hints=["LG"],this.text=`Give a ${p.levelGateText(this.level+1)}creature Aggressive and, "When this creature ${p.dbdtap()}, it also deals that much damage to itself."`}vobZ(t){t.aggressive=!0,t.changed=!0,t.jr4("DM",this.code)}weguC(){this.faction="U",this.rarity="H",this.name="Wegu's Embrace";const t=this.boof3510;this.text=`Give a friendly creature ${p.jr9(t,t)}, and "When this deals ${p.dbdtap()} this turn, you gain that much health."`,this.playTarg.player="F"}weguZ(t){const i=M.genId(),r=t.jr4("DM",this.code);r.changes=!0,r.customCode=i;const s=t.jr4("PT",this.code);s.customCode=i;const c=this.boof3510;t.buff(c,c)}}class mt extends N{lookup(t){return{["ASQ"]:{c:()=>this.asqC(),a:(r,s)=>this.asqA(r,s),t:r=>this.asqT(r)},["BSW"]:{c:()=>this.bswC(),a:(r,s)=>this.bswA(r,s),t:r=>this.bswT(r)},["CCS"]:{c:()=>this.ccsC(),a:(r,s)=>this.ccsA(r,s),t:r=>this.ccsT(r)},["CGL"]:{c:()=>this.clordC(),a:(r,s)=>this.clordA(r,s),t:r=>this.clordT(r)},["CSH"]:{c:()=>this.cswC(),a:(r,s)=>this.cswA(r,s),t:r=>this.cswT(r)},["FFU"]:{c:()=>this.ffuC(),a:(r,s)=>this.ffuA(r,s),t:r=>this.ffuT(r)},["FFS"]:{c:()=>this.ffsC(),a:(r,s)=>this.ffsA(r,s),t:r=>this.ffsT(r)},["FSH"]:{c:()=>this.fssC(),a:(r,s)=>this.fssA(r,s),t:r=>this.fssT(r)},["KOD"]:{c:()=>this.kodC(),a:(r,s)=>this.kodA(r,s),t:r=>this.kodT(r)},["LOD"]:{c:()=>this.lashC(),a:(r,s)=>this.lashA(r,s),t:r=>this.lashT(r)},["MBP"]:{c:()=>this.mbpC(),a:(r,s)=>this.mbpA(r,s),t:r=>this.mbpT(r)},["MND"]:{c:()=>this.mndC(),a:(r,s)=>this.mndA(r,s),t:r=>this.mndT(r)},["NCS"]:{c:()=>this.ncsC(),a:(r,s)=>this.ncsA(r,s),t:r=>this.ncsT(r)},["NXG"]:{c:()=>this.nxgC(),a:(r,s)=>this.nxgA(r,s),t:r=>this.nxgT(r)},["NFF"]:{c:()=>this.nffC(),a:(r,s)=>this.nffA(r,s),t:r=>this.nffT(r)},["OHV"]:{c:()=>this.orghC(),a:(r,s)=>this.orghA(r,s),t:r=>this.orghT(r)},["PPM"]:{c:()=>this.ppmC(),a:(r,s)=>this.ppmA(r,s),t:r=>this.ppmT(r)},["PSC"]:{c:()=>this.pcoilC(),a:(r,s)=>this.pcoilA(r,s),t:r=>this.pcoilT(r)},["SGF"]:{c:()=>this.siggyC(),a:(r,s)=>this.siggyA(r,s),t:r=>this.siggyT(r)},["SRM"]:{c:()=>this.srmdC(),a:(r,s)=>this.srmdA(r,s),t:r=>this.srmdT(r)},["SFG"]:{c:()=>this.sfgdC(),a:(r,s)=>this.sfgdA(r,s),t:r=>this.sfgdT(r)},["SSA"]:{c:()=>this.ssaC(),a:(r,s)=>this.ssaA(r,s),t:r=>this.ssaT(r)},["SWM"]:{c:()=>this.swmC(),a:(r,s)=>this.swmA(r,s),t:r=>this.swmT(r)},["UCM"]:{c:()=>this.ucmC(),a:(r,s)=>this.ucmA(r,s),t:r=>this.ucmT(r)},["UIM"]:{c:()=>this.uimC(),a:(r,s)=>this.uimA(r,s),t:r=>this.uimT(r)},["WMR"]:{c:()=>this.warmC(),a:(r,s)=>this.warmA(r,s),t:r=>this.warmT(r)},["WWR"]:{c:()=>this.wwrC(),a:(r,s)=>this.wwrA(r,s),t:r=>this.wwrT(r)},["WFS"]:{c:()=>this.wfsC(),a:(r,s)=>this.wfsA(r,s),t:r=>this.wfsT(r)},["XSH"]:{c:()=>this.shambC(),a:(r,s)=>this.shambA(r,s),t:r=>this.shambT(r)},["ZPM"]:{c:()=>this.zpmC(),a:(r,s)=>this.zpmA(r,s),t:r=>this.zpmT(r)}}[t]}targAction(t,i,r){this.lookup(t).a(i,r)}actTargets(t,i){return this.lookup(t).t(i)}xl=!0;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const r=super.jr3(t,i);return this.doubleActivator()&&(r.jr4("TS"),this.addExtraActivate(r)),r}canActivate(t){return D.toActions(this.actTargets(this.cardCode(),t)).length>0}startActivation(t){const i=D.toActions([this.actTargets(this.cardCode(),t),D.buttonTarget("CANC")]);T.ddf5(i)}handleAction(t){const i=g.ddf6(t),r=g.jr5(t.param);this.logAct(!0,this.xl?i:void 0),this.targAction(this.cardCode(),i,r),r.endActivation()}makeCreatTarg(t){return y.crActTarg("CARD",this.code,t.id)}makeOtherCreatTarg(t){const i=this.makeCreatTarg(t);return i.notMe=t.id,i}doubleActivator(){return this.code==="CGL"+"3"||this.code==="XSH"+"3"}ddf8(t){return Dt.extractCardCode(t.trigger.logicCode)==="KOD"&&(t.trigger.type==="PT"||t.trigger.type==="VN")?!0:t.trigger.type==="TS"&&this.doubleActivator()?t.event.playerA===t.owner:super.ddf8(t)}jr8(t){if(t.trigger.type==="VN"){const i=t.event,r=g.jr5(i.creatId);g.birth(r.code,"S",t.owner),x.triggerDone()}else if(t.trigger.type==="PT"){const i=t.trigger.customCode,r=g.jr5(t.creatId);r.triggers.filter(c=>c.customCode===i).forEach(c=>r.removeTrigger(c)),x.triggerDone()}else if(t.trigger.type==="TS"){const i=g.jr5(t.creatId);this.addExtraActivate(i),x.triggerDone()}}asqC(){this.faction="N",this.rarity="L",this.name="Ariadne, Spider Queen",this.iAttack=this.boof3712,this.iHealth=this.lValN([8,12,19]),this.tribe.push("SP"),this.xl=!1,this.text="Activate, destroy a Web: Ariadne gets +attack and +health equal to the destroyed Web.";const t=this.avgCreatureStats();this.bonus={activ8:this.multNug(this.buffNug(t[0],t[1]),.7)}}asqT(t){const i=this.makeCreatTarg(t);return i.tribe="WB",i}asqA(t,i){i.buff(t.attack,t.health),W.destroy(t,this.code)}bswC(){this.faction="T",this.rarity="C",this.name="Borean Stormweaver",this.iAttack=this.boof4816,this.iHealth=this.lValN([6,10,20]),this.tribe.push("GT"),this.xl=!1;const t=this.boof234;this.text=`Activate: Deal ${t} damage to a creature.`,this.bonus={activ8:this.buffNug(0,t)}}bswT(t){const i=this.makeCreatTarg(t);return i.hint=["HR"],i}bswA(t,i){t.hurtDirect(this.boof234,this.code)}ccsC(){this.faction="N",this.rarity="C",this.name="Catacomb Spider",this.iAttack=this.boof4815,this.iHealth=this.lValN([5,10,16]),this.tribe.push("SP");const t=this.boof246;this.text=`Activate:  Give another creature Regenerate ${t}.`,this.bonus={activ8:this.regnNug(t)}}ccsT(t){const i=this.makeOtherCreatTarg(t);return i.canRegen=!0,i.hint=["BF"],i}ccsA(t,i){t.addRegen(this.boof246)}clordC(){this.faction="N",this.rarity="H",this.name="Contagion Lord",this.iAttack=this.boof4914,this.iHealth=this.iAttack+3,this.tribe.push("AB"),this.xl=!1,this.text="Activate, destroy a friendly Abomination: You may play an additional card this turn.",this.level===3&&(this.text+="~You may use this ability twice per turn."),this.bonus={activ8:this.multNug(this.avgSpawnNug(),.3)}}clordT(t){const i=this.makeCreatTarg(t);return i.player="F",i.tribe="AB",i}clordA(t,i){W.destroy(t,this.code),I.regularPlays+=1}cswC(){this.faction="A",this.rarity="C",this.name="Cypien Shieldwarden",this.iAttack=this.boof4610,this.iHealth=this.boof61016,this.tribe.push("HM");const t=this.boof246;this.text=`Activate: Give a creature Armor ${t} this turn.`,this.bonus={activ8:this.regnNug(t)}}cswT(t){const i=this.makeCreatTarg(t);return i.canArmor=!0,i.hint=["BF"],i}cswA(t,i){t.addMod(y.modT("AR",this.boof246))}ffuC(){this.faction="T",this.rarity="H",this.name="Firefist Uranti",this.iAttack=this.boof357,this.iHealth=this.boof71116,this.tribe.push("FR","YT"),this.xl=!1,this.text=`Activate: Deal damage equal to ${this.name}'s attack to a creature.`,this.bonus={activ8:this.buffNug(0,this.iAttack)}}ffuT(t){const i=this.makeCreatTarg(t);return i.hint=["HR"],t.attack<1&&(i.victims="???"),i}ffuA(t,i){t.hurtDirect(i.attack,this.code)}ffsC(){this.faction="T",this.rarity="R",this.name="Flamefury Shaman",this.iAttack=this.boof369,this.iHealth=this.boof81116,this.tribe.push("HM"),this.text=`Activate: Grant another creature ${p.jr9(this.iAttack,0)} this turn.`,this.bonus={activ8:this.buffNug(this.iAttack,0)}}ffsT(t){const i=this.makeOtherCreatTarg(t);return i.hint=["BF"],i}ffsA(t,i){t.addMod(y.modT("AT",this.iAttack))}fssC(){this.faction="T",this.rarity="R",this.name="Flamestoke Shaman",this.iAttack=this.boof61218,this.iHealth=this.boof3712,this.tribe.push("HM"),this.text=`Activate: Grant an adjacent ${p.levelGateText(this.level)}creature Aggressive.`,this.bonus={activ8:this.regnNug(1)}}fssT(t){const i=this.makeCreatTarg(t);return i.level=D.ddf2(this.level),i.lanes=t.adjacent,i.player="F",i}fssA(t,i){t.aggressive=!0}kodC(){this.faction="N",this.rarity="L",this.name="Keeper of the Damned",this.iAttack=this.boof5815,this.iHealth=this.boof61017,this.tribe.push("ZB"),this.text=`Activate: another friendly ${p.levelGateText(this.level)}creature gets "Vengeance: Spawn this" this turn.`,this.bonus={activ8:this.rawNug(0,0,0,0,.5)}}kodT(t){const i=this.makeOtherCreatTarg(t);return i.level=D.ddf2(this.level),i.player="F",i}kodA(t,i){const r=t.jr4("VN",this.code);r.customCode=i.id,r.changes=!0;const s=t.jr4("PT",this.code);s.customCode=i.id}lashC(){this.faction="U",this.rarity="L",this.name="Demara, Herald of Affliction",this.iAttack=14,this.iHealth=20,this.tribe.push("NG"),this.text="Activate: Give an enemy creature with Poison Defender.~Forge: Each enemy creature gets Poison 6.",this.bonus={activ8:this.rawNug(0,0,0,0,.1)}}lashT(t){const i=this.makeCreatTarg(t);return i.player="E",i.hasPoison=!0,i.canDefender=!0,i}lashA(t,i){t.defender=!0}mbpC(){this.faction="U",this.rarity="H",this.name="Mossbeard Patriarch",this.iAttack=this.boof137,this.iHealth=this.boof81220,this.tribe.push("PL");const t=this.boof468;this.text=`Activate: Give another creature ${p.jr9(0,t)}.`,this.bonus={activ8:this.buffNug(0,t)}}mbpT(t){const i=this.makeOtherCreatTarg(t);return i.hint=["BF"],i}mbpA(t,i){t.buff(0,this.boof468)}mndC(){this.faction="A",this.rarity="R",this.name="Munitions Drone",this.iAttack=this.boof137,this.iHealth=this.boof6814,this.tribe.push("RB");const t=this.boof357;this.text=`Activate: Give another creature ${p.jr9(t,0)}.`,this.bonus={activ8:this.buffNug(t,0)}}mndT(t){const i=this.makeOtherCreatTarg(t);return i.hint=["BF"],i}mndA(t,i){t.buff(this.boof357,0)}ncsC(){this.faction="N",this.rarity="R",this.name="Necroslime",this.iAttack=this.boof4814,this.iHealth=this.iAttack,this.tribe.push("OZ"),this.xl=!1;const t=this.boof248;this.text=`Activate, deal 3 damage to another friendly creature: ${this.name} gets ${p.jr9(t,t)}.`,this.bonus={activ8:this.buffNug(t,t-3)}}ncsT(t){const i=this.makeOtherCreatTarg(t);return i.player="F",i}ncsA(t,i){const r=this.boof248;t.hurtDirect(3,this.code),i.buff(r,r)}nxgC(){this.faction="A",this.rarity="H",this.name="Nexus Gunner",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("HM"),this.text=`Activate: Give a creature ${p.jr9(this.iAttack,0)}. Use this ability only if ${this.name} is in the center lane.`,this.bonus={activ8:this.buffNug(this.iAttack/2,0)}}nxgT(t){const i=this.makeCreatTarg(t);return t.lane!==3?i.victims="???":i.hint=["BF","BB"],i}nxgA(t,i){t.buff(this.iAttack,0)}nffC(){this.faction="U",this.rarity="L",this.name="Nuada, Faith's Flourish",this.iAttack=this.boof246,this.iHealth=this.lValN([10,17,25]),this.iDefend=!0,this.tribe.push("TK"),this.xl=!1,this.hints=[this.lValH(["ZZ-1","ZZ-2","ZZ-2"])];const t=L.getCard(Z.tffc(this.level));this.text=`Activate: Replace a friendly Plant with a ${p.tokName(t)}.`,this.bonus={activ8:this.multNug(this.spawnNug(t),.5)}}nffT(t){const i=this.makeCreatTarg(t);return i.player="F",i.tribe="PL",i}nffA(t,i){g.birth(Z.tffc(this.level),"R",i.owner,t.lane)}orghC(){this.faction="N",this.rarity="R",this.name="Organ Harvester",this.iAttack=this.lValN([2,6,9]),this.iHealth=this.iAttack+1,this.tribe.push("AB"),this.xl=!1,this.text=`Activate, destroy ${this.name}: Destroy a ${p.levelGateText(this.level)}creature.`,this.bonus={activ8:this.multNug(this.avgSpawnNug(),.4)}}orghT(t){const i=this.makeOtherCreatTarg(t);return i.level=D.ddf2(this.level),i.hint=["KL"],i}orghA(t,i){const r=M.tick();W.destroy(t,this.code,r),W.destroy(i,this.code,r)}ppmC(){this.faction="A",this.rarity="R",this.name="Palladium Pulsemage",this.iAttack=this.lValN([2,8,12]),this.iHealth=this.lValN([7,12,15]),this.tribe.push("HM"),this.text=`Activate: give a creature ${p.jr9(this.boof4812n,0)} this turn.`,this.bonus={activ8:this.buffNug(this.boof246,0)}}ppmT(t){const i=this.makeCreatTarg(t);return i.hint=["DB","DF"],i}ppmA(t,i){t.addMod(y.modT("AT",this.boof4812n))}pcoilC(){this.faction="U",this.rarity="R",this.name="Poisoncoil",this.iAttack=this.boof357,this.iHealth=this.boof71013,this.iDefend=!0,this.tribe.push("SN");const t=this.boof135;this.text=`Activate: Give another creature Poison ${t}.`,this.bonus={activ8:this.regnNug(t)}}pcoilT(t){const i=this.makeOtherCreatTarg(t);return i.hint=["PN","DF"],i}pcoilA(t,i){t.addPoison(this.boof135)}siggyC(){this.faction="N",this.rarity="H",this.name="Sigmund Fraud",this.iAttack=this.boof357,this.iHealth=this.lValN([9,14,19]),this.iDefend=!0,this.tribe.push("AB"),this.xl=!1;const t=this.boof4812;this.text=`Activate, destroy another friendly creature: Deal ${t} damage to the enemy player and you gain ${t} health.`,this.bonus={activ8:this.playerNug(t)}}siggyT(t){const i=this.makeOtherCreatTarg(t);return i.player="F",i}siggyA(t,i){W.destroy(t,this.code);const r=this.boof4812;k.hurtDirect(!i.owner,r,this.code),k.heal(i.owner,r,this.code)}srmdC(){this.faction="N",this.rarity="H",this.name="Sorrow Maiden",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("HM"),this.xl=!1,this.text=`Activate: Destroy an enemy creature with ${this.iAttack} or less attack.`,this.bonus={activ8:this.multNug(this.avgSpawnNug(),.4)}}srmdT(t){const i=this.makeCreatTarg(t);return i.player="E",i.maxAttack=this.iAttack,i}srmdA(t,i){W.destroy(t,this.code)}sfgdC(){this.faction="A",this.rarity="L",this.name="Sparky, Forge Guard Dog",this.iAttack=this.lValN([4,10,14]),this.iHealth=this.lValN([5,11,16]),this.tribe.push("RB","GD"),this.xl=!1;const t=this.lValS(["level 2 Sparky","level 3 Sparky","25/25 Forge Guardian Omega"]);this.text=`Activate, destroy Sparky and another friendly ${this.level===3?"level 3 ":""}Sparky: Spawn a ${t}.`,this.bonus={activ8:this.playerNug(5)}}sfgdT(t){const i=this.makeOtherCreatTarg(t);return i.cardCode="SFG",this.level===3&&(i.level="L3"),i}sfgdA(t,i){const r=M.tick();W.destroy(t,this.code,r),W.destroy(i,this.code,r);const s=this.lValS(["SFG"+"2","SFG"+"3","FGO"+"1"]);g.birth(s,"S",i.owner)}ssaC(){this.faction="N",this.rarity="H",this.name="Spitesower Acolyte",this.iAttack=this.boof234,this.iHealth=this.lValN([8,14,22]),this.tribe.push("HM");const t=this.boof246n;this.text=`Activate, deal ${-t} damage to ${this.name}: Give a creature ${p.jr9(t,t)}.`,this.bonus={activ8:this.buffNug(-t,0)}}ssaT(t){const i=this.makeCreatTarg(t);return i.hint=["DB","BB"],i}ssaA(t,i){const r=this.boof246n,s=M.tick();i.hurtDirect(-r,this.code,s),t.buff(r,r,s)}swmC(){this.faction="A",this.rarity="R",this.name="Steelwelder Medic",this.iAttack=this.lValN([3,5,13]),this.iHealth=this.boof61014,this.tribe.push("HM"),this.text=`Activate: Give another creature Armor ${this.level}.`,this.bonus={activ8:this.regnNug(this.level)}}swmT(t){const i=this.makeOtherCreatTarg(t);return i.canArmor=!0,i.hint=["BF","BB"],i}swmA(t,i){t.addArmor(this.level)}ucmC(){this.faction="T",this.rarity="R",this.name="Uranti Cryomancer",this.iAttack=this.boof247,this.iHealth=this.lValN([8,13,17]),this.tribe.push("IC","YT"),this.xl=!1;const t=this.boof135;this.text=`Activate: Deal ${t} damage to a creature.`,this.bonus={activ8:this.buffNug(0,t)}}ucmT(t){const i=this.makeCreatTarg(t);return i.hint=["HR"],i}ucmA(t,i){t.hurtDirect(this.boof135,this.code)}uimC(){this.faction="T",this.rarity="C",this.name="Uranti Icemage",this.iAttack=this.lValN([2,5,9]),this.iHealth=this.lValN([8,13,20]),this.tribe.push("IC","YT"),this.text="Activate: Negate Defender this turn.",this.bonus={activ8:this.regnNug(1)}}uimT(t){const i=this.makeCreatTarg(t);return i.hint=["BB"],i}uimA(t,i){t.addMod(y.modT("ND",!0))}warmC(){this.faction="A",this.rarity="H",this.name="War Merchant",this.iAttack=this.boof468,this.iHealth=this.iAttack,this.iDefend=!0,this.tribe.push("HM");const t=this.level===3?this.iAttack:0;this.text=`Activate: Give a creature in a center lane ${p.jr9(this.iAttack,t)}.`,this.bonus={activ8:this.multNug(this.buffNug(this.iAttack,t),.5)}}warmT(t){const i=this.makeCreatTarg(t);return i.lanes=3,i.hint=["BF","BB"],i}warmA(t,i){t.buff(this.iAttack,this.level===3?this.iAttack:0)}wwrC(){this.faction="U",this.rarity="C",this.name="Weirwood Ranger",this.iAttack=this.boof51015,this.iHealth=this.iAttack-1,this.tribe.push("HM"),this.text=`Activate: Give another creature ${p.jr9(this.level,this.level)}.`,this.bonus={activ8:this.buffNug(this.level,this.level)}}wwrT(t){const i=this.makeOtherCreatTarg(t);return i.hint=["BF"],i}wwrA(t,i){t.buff(this.level,this.level)}wfsC(){this.faction="N",this.rarity="H",this.name="Witherfrost Succubus",this.iAttack=this.boof147,this.iHealth=this.boof61018,this.tribe.push("DM");const t=this.boof357;this.text=`Activate: Give a creature ${p.jr9(-t,-t)} this turn.`,this.bonus={activ8:this.buffNug(t,t)}}wfsT(t){const i=this.makeCreatTarg(t);return i.hint=["DB","DF"],i}wfsA(t,i){const r=-this.boof357;t.addMod(y.modT("AT",r)),t.addMod(y.modT("HL",r)),t.addMod(y.modT("MH",r))}shambC(){this.faction="N",this.rarity="L",this.name="Xithian Shambler",this.iAttack=this.boof369,this.iHealth=this.iAttack+1,this.tribe.push("AB"),this.xl=!1;let t="";this.level===3&&(t="~You may use this ability twice per turn."),this.text=`Activate, destroy an adjacent creature: ${this.name} moves into that creature's lane, then gets +attack and +health equal to that creature's attack and health.${t}`,this.bonus={activ8:this.rawNug(0,0,0,0,this.lValN([.6,1.2,2.2]))}}shambT(t){const i=y.crFriendActTarg("CARD",this.code,t.id);return i.lanes=t.adjacent,i}shambA(t,i){const r=t.attack,s=t.health;W.destroy(t,this.code),i.move(t.lane),i.buff(r,s)}zpmC(){this.faction="T",this.rarity="R",this.name="Zephyr Mage",this.iAttack=this.boof4813,this.iHealth=this.boof61017,this.tribe.push("WN","AS"),this.text=`Activate: Give another ${p.levelGateText(this.level)}creature Mobility ${this.level}.`,this.bonus={activ8:this.regnNug(this.level)}}zpmT(t){const i=this.makeOtherCreatTarg(t);return i.level=D.ddf2(this.level),i.canMove=!0,i.hint=["BF","BB"],i}zpmA(t,i){t.addMobility(this.level)}}class qe extends N{lookup(t){return{["CMF"]:{c:()=>this.aconC(),f:(r,s)=>this.aconF(r,s)},["FLH"]:{c:()=>this.flhC(),f:(r,s)=>this.flhF(r,s)},["TBB"]:{c:()=>this.tbbC(),f:(r,s)=>this.tbbF(r,s)}}[t]}targAction(t,i,r){this.lookup(t).f(i,r)}playTarg;optional=!1;notme=!1;ftext="";constructor(t){super(t),this.playTarg=y.crActTarg("CARD",this.code,""),this.lookup(this.cardCode()).c(),this.text="Assault: "+this.ftext,this.ftext=""}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("AS");return s.interactive=!0,r}handleAction(t){const i=g.ddf6(t),r=g.jr5(t.param);this.targAction(this.cardCode(),i,r),T.actionDone(!0)}jr8(t){this.notme&&(this.playTarg.notMe=t.creatId);const i=D.toActions(this.playTarg);i.length>0?(i.forEach(r=>{r.param=t.creatId}),this.optional&&i.push(T.noneEndTrigger()),T.ddf5(i)):x.triggerDone()}aconC(){this.faction="N",this.rarity="R",this.name="Calamity Fiend",this.iAttack=this.boof4814,this.iHealth=this.lValN([5,10,16]),this.tribe.push("DM");const t=-this.boof234;this.addSp("U",t),this.playTarg.player="E",this.ftext=`Give an enemy creature ${p.jr9(t,t)}.`}aconF(t,i){this.logAct(!1,t);const r=-this.boof234;t.buff(r,r)}flhC(){this.faction="T",this.rarity="C",this.name="Firelight Hunter",this.iAttack=this.boof468,this.iHealth=this.iAttack-2,this.tribe.push("HM"),this.playTarg.player="E",this.addSp("D",this.iAttack),this.ftext=`Deal ${this.iAttack} to an enemy creature.`}flhF(t,i){t.hurtDirect(this.iAttack,this.code)}tbbC(){this.faction="T",this.rarity="R",this.name="Totembound Berserker",this.iAttack=this.boof81318,this.iHealth=this.lValN([2,4,10]),this.tribe.push("GT"),this.playTarg.player="E",this.playTarg.level=D.ddf2(this.level),this.optional=!0,this.ftext=`You may move an enemy ${p.levelGateText(this.level)}creature to the space opposing ${this.name}.`}tbbF(t,i){i.opposed||(this.logAct(!1,t),t.move(g.oppositeLane(i.lane)))}}class ft extends N{lookup(t){return{["ABM"]:{c:()=>this.mawC(),f:(r,s)=>this.mawF(r,s)},["AGC"]:{c:()=>this.aconC(),f:(r,s)=>this.aconF(r,s)},["BTI"]:{c:()=>this.binvC(),f:(r,s)=>this.binvF(r,s)},["BSR"]:{c:()=>this.bsrC(),f:(r,s)=>this.bsrF(r,s)},["BAW"]:{c:()=>this.bawC(),f:(r,s)=>this.bawF(r,s)},["CKB"]:{c:()=>this.cacC(),f:(r,s)=>this.cacF(r,s)},["CHA"]:{c:()=>this.chaC(),f:(r,s)=>this.chaF(r,s)},["CCR"]:{c:()=>this.ccC(),f:(r,s)=>this.ccF(r,s)},["DRS"]:{c:()=>this.drsC(),f:(r,s)=>this.drsF(r,s)},["DSE"]:{c:()=>this.dseC(),f:(r,s)=>this.dseF(r,s)},["DSA"]:{c:()=>this.dsaC(),f:(r,s)=>this.dsaF(r,s)},["DGS"]:{c:()=>this.drslC(),f:(r,s)=>this.drslF(r,s)},["FRI"]:{c:()=>this.friC(),f:(r,s)=>this.friF(r,s)},["FRV"]:{c:()=>this.freavC(),f:(r,s)=>this.freavF(r,s)},["FLC"]:{c:()=>this.flcC(),f:(r,s)=>this.flcF(r,s)},["GLF"]:{c:()=>this.gfiendC(),f:(r,s)=>this.gfiendF(r,s)},["GRW"]:{c:()=>this.grwC(),f:(r,s)=>this.grwF(r,s)},["GHT"]:{c:()=>this.grhC(),f:(r,s)=>this.grhF(r,s)},["MMH"]:{c:()=>this.houndC(),f:(r,s)=>this.houndF(r,s)},["MXW"]:{c:()=>this.mtxC(),f:(r,s)=>this.mtxF(r,s)},["NGB"]:{c:()=>this.ngbC(),f:(r,s)=>this.ngbF(r,s)},["POA"]:{c:()=>this.poaC(),f:(r,s)=>this.poaF(r,s)},["PHS"]:{c:()=>this.phxsC(),f:(r,s)=>this.phxsF(r,s)},["RWD"]:{c:()=>this.rotC(),f:(r,s)=>this.rotF(r,s)},["SHY"]:{c:()=>this.schyC(),f:(r,s)=>this.schyF(r,s)},["STD"]:{c:()=>this.stdC(),f:(r,s)=>this.stdF(r,s)},["SIX"]:{c:()=>this.sdxC(),f:(r,s)=>this.sdxF(r,s)},["SEV"]:{c:()=>this.surzC(),f:(r,s)=>this.surzF(r,s)},["VNF"]:{c:()=>this.vnfC(),f:(r,s)=>this.vnfF(r,s)},["WBY"]:{c:()=>this.wbyC(),f:(r,s)=>this.wbyF(r,s)},["WBU"]:{c:()=>this.wbuC(),f:(r,s)=>this.wbuF(r,s)},["XDH"]:{c:()=>this.dogsC(),f:(r,s)=>this.dogsF(r,s)}}[t]}targAction(t,i,r){this.lookup(t).f(i,r)}playTarg;optional=!1;notme=!1;ftext="";forges=!0;constructor(t){super(t),this.playTarg=y.crActTarg("CARD",this.code,""),this.lookup(this.cardCode()).c(),this.forges&&(this.text="Forge: "+this.ftext),this.ftext=""}jr3(t,i){const r=super.jr3(t,i);if(this.forges){const s=r.jr4("FR");s.interactive=!0}return r}ddf8(t){return Dt.extractCardCode(t.trigger.logicCode)==="CKB"}handleAction(t){const i=g.ddf6(t),r=g.jr5(t.param);this.targAction(this.cardCode(),i,r),T.actionDone(!0)}jr8(t){const i=this.cardCode();if(t.trigger.type==="TS"&&i==="CKB"){this.logAct(!1),I.regularPlays+=1;const s=t.event,c=k.toPlayer(s.playerA),f=y.trigIdx(c.triggers,t.trigger);f>-1&&c.triggers.splice(f,1),x.triggerDone();return}if(i==="ABM"){const s=y.crFriendNotMeTarg(t.creatId);if(s.tribe="AB",g.creatByTarget(s).length===0){x.triggerDone();return}}if(i==="POA"&&!I.patron("A")){x.triggerDone();return}if((i==="DRS"||i==="DSE"||i==="DSA")&&this.dfbuff(t.creatId)===0){x.triggerDone();return}this.notme&&(this.playTarg.notMe=t.creatId);const r=D.toActions(this.playTarg);r.length>0?(r.forEach(s=>{s.param=t.creatId}),this.optional&&r.push(T.noneEndTrigger()),T.ddf5(r)):x.triggerDone()}dfbuff(t){const i=y.crFriendNotMeTarg(t);return i.tribe="DF",this.boof234*g.creatByTarget(i).length}mawC(){this.faction="N",this.rarity="C",this.name="Abyssal Maw",this.iAttack=this.boof4610,this.iHealth=this.iAttack,this.tribe.push("AB"),this.playTarg.player="E";const t=-this.boof359;this.ftext=`If there is another friendly Abomination, give an enemy creature ${p.jr9(t,t)}.`}mawF(t,i){this.logAct(!1,t);const r=-this.boof359;t.buff(r,r)}aconC(){this.faction="A",this.rarity="C",this.name="Aegis Conscript",this.iAttack=this.boof3612,this.iHealth=this.boof6915,this.tribe.push("HM"),this.playTarg.canArmor=!0,this.playTarg.player="F",this.ftext=`Give a friendly creature Armor ${this.boof124}.`}aconF(t,i){this.logAct(!1,t),t.addArmor(this.boof124)}binvC(){this.faction="A",this.rarity="C",this.name="Battletech Inventor",this.iAttack=this.boof369,this.iHealth=this.iAttack,this.tribe.push("MM"),this.playTarg.player="E",this.ftext=`Give an enemy creature ${p.jr9(-this.iAttack,0)}.`}binvF(t,i){this.logAct(!1,t),t.buff(-this.iAttack,0)}bsrC(){if(this.faction="N",this.rarity="R",this.name="Bonescythe Reaver",this.iAttack=this.boof5813,this.iHealth=this.boof3712,this.tribe.push("AB"),this.forges=this.level>1,this.forges){const t=this.level-1;this.playTarg.level=D.ddf2(t),this.playTarg.player="E",this.ftext=`You may destroy an enemy ${p.levelGateText(t)}creature.`,this.optional=!0}else this.hints=["LG"]}bsrF(t,i){W.destroy(t,this.code)}bawC(){this.faction="U",this.rarity="R",this.name="Brambleaxe Warrior",this.iAttack=this.boof61014,this.iHealth=this.iAttack-4,this.tribe.push("HM"),this.playTarg.hint=["BF"],this.ftext="Give a creature Breakthrough this turn."}bawF(t,i){this.logAct(!1,t),t.addMod(y.modT("BT",!0))}cacC(){this.faction="N",this.rarity="H",this.name="Cacklebones",this.iAttack=this.boof5915,this.iHealth=this.iAttack-this.level,this.tribe.push("SK"),this.playTarg.level=D.ddf2(this.level),this.playTarg.player="E",this.ftext=`Destroy an enemy ${p.levelGateText(this.level)}creature. If you do, the enemy player may play an additional card next turn.`,this.optional=!0}cacF(t,i){W.destroy(t,this.code);const r=k.toPlayer(t.owner),s=y.trigger("TS",this.code);s.bonus=this.avgSpawnNug(),r.triggers.push(s)}chaC(){this.faction="U",this.rarity="R",this.name="Chistlehearth Archer",this.iAttack=this.boof2510,this.iHealth=this.iAttack+7,this.tribe.push("HM");const t=this.boof4816;this.playTarg.player="E",this.playTarg.hasMobility=!0,this.ftext=`Deal ${t} damage to an enemy creature with Mobility. Negate Mobility from that creature.`}chaF(t,i){t.hurtDirect(this.boof4816,this.code),t.negateMobility=!0}ccC(){this.faction="N",this.rarity="C",this.name="Corpse Crawler",this.iAttack=this.boof81220,this.iHealth=this.iAttack+1,this.tribe.push("AB"),this.hints=[this.lValH(["ZZ-1","ZZ-2","ZZ-5"])],this.playTarg.player="F",this.ftext="Destroy a friendly creature."}ccF(t,i){W.destroy(t,this.code)}drsC(){this.faction="U",this.rarity="C",this.name="Darkroot Shambler",this.iHealth=this.lValN([2,6,7]),this.iAttack=this.iHealth*2,this.tribe.push("DF","PL"),this.level===2&&(this.hints=["LB"]),this.playTarg.player="F";const t=this.boof234;this.ftext=`Give a friendly creature ${p.jr9(0,t)} for each other friendly Darkforged.`}drsF(t,i){this.logAct(!1,t),t.buff(0,this.dfbuff(i.id))}dseC(){this.faction="A",this.rarity="C",this.name="Darksteel Enforcer",this.iAttack=this.boof468,this.iHealth=this.iAttack+2,this.tribe.push("DF","RB"),this.playTarg.player="F";const t=this.boof234;this.ftext=`Give a friendly creature ${p.jr9(t,0)} for each other friendly Darkforged.`}dseF(t,i){this.logAct(!1,t),t.buff(this.dfbuff(i.id),0)}dsaC(){this.faction="T",this.rarity="C",this.name="Darkstone Asir",this.iAttack=this.lValN([2,4,10]),this.iHealth=this.iAttack*2,this.tribe.push("DF","AS"),this.playTarg.player="E";const t=this.boof234;this.ftext=`Deal ${t} damage to an enemy creature for each other friendly Darkforged.`}dsaF(t,i){t.hurtDirect(this.dfbuff(i.id),this.code)}drslC(){this.faction="U",this.rarity="H",this.name="Dragon Slayer",this.iAttack=this.boof81220,this.iHealth=this.boof4610,this.tribe.push("HM"),this.playTarg.player="E",this.playTarg.level=D.ddf2(this.level),this.playTarg.tribe="DG",this.ftext=`Destroy an enemy ${p.levelGateText(this.level)}Dragon.`}drslF(t,i){W.destroy(t,this.code)}friC(){this.faction="T",this.rarity="C",this.name="Flamerift Instigator",this.iAttack=this.lValN([7,12,17]),this.iHealth=this.iAttack-5,this.tribe.push("GT"),this.ftext="Negate Defender from a creature."}friF(t,i){this.logAct(!1,t),t.negateDefender=!0}freavC(){if(this.faction="N",this.rarity="H",this.name="Fleshreaver",this.iAttack=this.boof6915,this.iHealth=this.boof235,this.tribe.push("AB"),this.forges=this.level>1,this.forges){const t=this.level-1;this.consistent=!0,this.playTarg.level=D.ddf2(t),this.playTarg.player="E",this.ftext=`You may destroy a ${p.levelGateText(t)}enemy creature.`,this.optional=!0}else this.hints=["LG"]}freavF(t,i){W.destroy(t,this.code)}flcC(){this.faction="A",this.rarity="L",this.name="Frontline Combatant",this.iAttack=this.boof4612,this.iHealth=this.iAttack,this.iArmor=this.iAttack,this.tribe.push("HM"),this.optional=!0,this.playTarg.player="E",this.ftext=`You may have ${this.name} deal damage equal to its Armor to an enemy creature. If you do, that creature deals damage equal to its attack back to ${this.name}.`}flcF(t,i){const r=M.tick(),s=t.attack;t.hurtDirect(i.armor,this.code,r),i.hurtDirect(s,t.code,r)}get fiendBof(){return this.lValN([-1,-2,-5])}gfiendC(){this.faction="N",this.rarity="C",this.name="Gloomfiend",this.iAttack=this.boof4812,this.iHealth=this.iAttack,this.tribe.push("AB"),this.playTarg.player="E";const t=this.fiendBof;this.ftext=`You may give an enemy creature ${p.jr9(t,t)}.`,this.optional=!0}gfiendF(t,i){this.logAct(!1,t);const r=this.fiendBof;t.buff(r,r)}grwC(){this.faction="N",this.rarity="C",this.name="Gloomreaper Witch",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.tribe.push("HM");const t=this.boof147;this.playTarg.maxAttack=t,this.playTarg.player="E",this.ftext=`You may destroy an enemy creature with ${t} or less attack.`,this.optional=!0}grwF(t,i){W.destroy(t,this.code)}grhC(){this.faction="U",this.rarity="C",this.name="Grove Huntress",this.iAttack=this.boof4711,this.iHealth=this.iAttack-1,this.tribe.push("HM"),this.playTarg.player="F";const t=this.boof135;this.ftext=`Give a friendly creature ${p.jr9(t,t)}.`}grhF(t,i){this.logAct(!1,t);const r=this.boof135;t.buff(r,r)}houndC(){this.faction="T",this.rarity="C",this.name="Magma Hound",this.iAttack=this.boof4813,this.iHealth=this.iAttack-1,this.tribe.push("ER","EL");const t=this.boof246;this.optional=!0,this.playTarg.player="E",this.ftext=`You may deal ${t} damage to an enemy creature.`}houndF(t,i){t.hurtDirect(this.boof246,this.code)}mtxC(){this.faction="A",this.rarity="C",this.name="Matrix Warden",this.iAttack=this.lValN([3,8,12]),this.iHealth=this.iAttack,this.tribe.push("RB");const t=this.boof3510;this.playTarg.player="F",this.ftext=`Give a friendly creature ${p.jr9(t,0)}.`}mtxF(t,i){this.logAct(!1,t),t.buff(this.boof3510,0)}ngbC(){this.faction="T",this.rarity="C",this.name="Nargath Bruiser",this.iAttack=this.boof5814,this.iHealth=this.iAttack-1,this.tribe.push("ER","AS");const t=this.boof248;this.playTarg.player="F",this.ftext=`Give a friendly creature ${p.jr9(0,t)}.`}ngbF(t,i){this.logAct(!1,t),t.buff(0,this.boof248)}poaC(){this.faction="A",this.rarity="H",this.name="Patron of Anvillon",this.iAttack=this.boof369,this.iHealth=this.boof71117,this.tribe.push("CY"),this.playTarg.level=D.ddf2(this.level),this.playTarg.hint=["BF"],this.ftext=`If you have three or more Alloyin cards in your hand, give a ${p.levelGateText(this.level)}creature 2x attack.`}poaF(t,i){this.logAct(!1,t),t.buff(t.attack,0)}phxsC(){this.faction="A",this.rarity="R",this.name="Phalanx Squadron",this.iAttack=this.boof3714,this.iHealth=this.boof61117,this.tribe.push("HM"),this.playTarg.hasArmor=!0,this.playTarg.player="F";const t=this.boof234;this.ftext=`Give a friendly creature with Armor ${p.jr9(t,t)}.`}phxsF(t,i){this.logAct(!1,t);const r=this.boof234;t.buff(r,r)}rotC(){this.faction="N",this.rarity="C",this.name="Rot Wanderer",this.iAttack=this.boof369,this.iHealth=this.iAttack,this.tribe.push("ZB"),this.playTarg.maxAttack=this.iAttack,this.playTarg.player="E",this.ftext=`Destroy an enemy creature with ${this.iAttack} or less attack.`}rotF(t,i){W.destroy(t,this.code)}schyC(){this.faction="N",this.rarity="C",this.name="Scourge Hydra",this.iAttack=this.boof71117,this.iHealth=this.iAttack,this.tribe.push("HY"),this.playTarg.player="F",this.ftext="Deal 3 damage to a friendly creature."}schyF(t,i){t.hurtDirect(3,this.code)}stdC(){this.faction="A",this.rarity="H",this.name="Shardthief Druid",this.iAttack=this.boof5813,this.iHealth=this.boof81318,this.tribe.push("MM"),this.playTarg.canRegen,this.playTarg.player="E",this.ftext=`Negate and remove all Regenerate from an enemy creature. ${this.name} gets that much Renerate.`}stdF(t,i){this.logAct(!1,t);const r=t.regen;t.negateRegen=!0,i.addRegen(r)}sdxC(){this.faction="A",this.rarity="R",this.name="Stasis Indexer",this.iAttack=this.boof369,this.iHealth=this.boof71118,this.tribe.push("MM"),this.playTarg.level=D.ddf2(this.level),this.playTarg.canDefender=!0,this.ftext=`Give a ${p.levelGateText(this.level)}creature Defender until the end of the enemy player's next turn.`}sdxF(t,i){const r=y.mod("DF",!0);r.expiry="EN",t.addMod(r)}surzC(){this.faction="N",this.rarity="L",this.name="Suruzal, Emissary of Varna",this.iAttack=this.boof4814,this.iHealth=this.iAttack-1,this.tribe.push("HM"),this.optional=!0,this.playTarg.player="F",this.playTarg.level=D.ddf2(this.level),this.notme=!0,this.ftext=`You may destroy another friendly ${p.levelGateText(this.level)}creature. If you do, spawn a copy of it.`}surzF(t,i){const r=M.tick();W.destroy(t,this.code,r),g.birth(t.code,"S",i.owner,void 0,r)}vnfC(){this.faction="U",this.rarity="R",this.name="Venomfang",this.iAttack=this.boof61014,this.iHealth=this.iAttack-2,this.tribe.push("SN");const t=this.boof246;this.playTarg.player="E",this.ftext=`Give an enemy creature Poison ${t}.`}vnfF(t,i){this.logAct(!1,t),t.addPoison(this.boof246)}wbyC(){this.faction="T",this.rarity="R",this.name="Wallbreaker Yeti",this.iAttack=this.boof4712,this.iHealth=this.boof71116,this.tribe.push("ER","YT"),this.playTarg.player="E",this.playTarg.level=D.ddf2(this.level),this.playTarg.hasDefender=!0,this.ftext=`You may destroy a ${p.levelGateText(this.level)}enemy creature with Defender.`,this.optional=!0}wbyF(t,i){W.destroy(t,this.code)}wbuC(){this.faction="T",this.rarity="C",this.name="Warbringer Uranti",this.iAttack=this.boof3711,this.iHealth=this.iAttack,this.tribe.push("LT","YT");const t=this.boof4812;this.notme=!0,this.playTarg.player="F",this.addSp("A",t),this.ftext=`Give another friendly creature ${p.jr9(t,0)} this turn.`}wbuF(t,i){this.logAct(!1,t),t.addMod(y.modT("AT",this.boof4812))}dogsC(){this.faction="N",this.rarity="R",this.name="Xithian Direhound",this.iAttack=4,this.iHealth=4,this.tribe.push("AB"),this.overload=!0,this.maxLevel=1,this.optional=!0,this.playTarg.player="E",this.ftext=`You may give an enemy creature ${p.jr9(-4,-4)}.`}dogsF(t,i){this.logAct(!1,t),t.buff(-4,-4)}}class G extends At{lookup(t){return{["AGW"]:{c:()=>this.awingC(),z:r=>this.awingZ(r)},["ASG"]:{c:()=>this.asurgeC(),z:r=>this.asurgeZ(r)},["ATZ"]:{c:()=>this.anatC(),z:r=>this.anatZ(r)},["AVB"]:{c:()=>this.anvbC(),z:r=>this.anvbZ(r)},["AQE"]:{c:()=>this.aqatC(),z:r=>this.aqatZ(r)},["AOP"]:{c:()=>this.armoC(),z:r=>this.armoZ(r)},["BFT"]:{c:()=>this.bftC(),z:r=>this.bftZ(r)},["BZH"]:{c:()=>this.bzhC(),z:r=>this.bzhZ(r)},["BBR"]:{c:()=>this.bbrC(),z:r=>this.bbrZ(r)},["BBD"]:{c:()=>this.bbdC(),z:r=>this.bbdZ(r)},["BBL"]:{c:()=>this.bblC(),z:r=>this.bblZ(r)},["BBN"]:{c:()=>this.bbnC(),z:r=>this.bbnZ(r)},["BTM"]:{c:()=>this.botC(),z:r=>this.botZ(r)},["BLP"]:{c:()=>this.btpC(),z:r=>this.btpZ(r)},["CHT"]:{c:()=>this.chatC(),z:r=>this.chatZ(r)},["CSU"]:{c:()=>this.csurgeC(),z:r=>this.csurgeZ(r)},["CNT"]:{c:()=>this.ctmsC(),z:r=>this.ctmsZ(r)},["CTW"]:{c:()=>this.cullC(),z:r=>this.cullZ(r)},["CTV"]:{c:()=>this.cultC(),z:r=>this.cultZ(r)},["CAG"]:{c:()=>this.cypaC(),z:r=>this.cypaZ(r)},["CBS"]:{c:()=>this.cypbC(),z:r=>this.cypbZ(r)},["DPO"]:{c:()=>this.dpsC(),z:r=>this.dpsZ(r)},["DDF"]:{c:()=>this.dendC(),z:r=>this.dendZ(r)},["DBT"]:{c:()=>this.dreadC(),z:r=>this.dreadZ(r)},["DYF"]:{c:()=>this.dyinC(),z:r=>this.dyinZ(r)},["ETN"]:{c:()=>this.elnC(),z:r=>this.elnZ(r)},["ENP"]:{c:()=>this.enpC(),z:r=>this.enpZ(r)},["ENR"]:{c:()=>this.rageC(),z:r=>this.rageZ(r)},["EFA"]:{c:()=>this.efauC(),z:r=>this.efauZ(r)},["EXD"]:{c:()=>this.expdmC(),z:r=>this.expdmZ(r)},["FIN"]:{c:()=>this.feralC(),z:r=>this.feralZ(r)},["FOR"]:{c:()=>this.fitrC(),z:r=>this.fitrZ(r)},["FJT"]:{c:()=>this.fjetC(),z:r=>this.fjetZ(r)},["FLN"]:{c:()=>this.flncC(),z:r=>this.flncZ(r)},["FFL"]:{c:()=>this.ffldC(),z:r=>this.ffldZ(r)},["FZS"]:{c:()=>this.frozC(),z:r=>this.frozZ(r)},["GTH"]:{c:()=>this.ghastC(),z:r=>this.ghastZ(r)},["GCR"]:{c:()=>this.crushC(),z:r=>this.crushZ(r)},["HAR"]:{c:()=>this.hartC(),z:r=>this.hartZ(r)},["IFR"]:{c:()=>this.izftC(),z:r=>this.izftZ(r)},["JPK"]:{c:()=>this.jpC(),z:r=>this.jpZ(r)},["LBR"]:{c:()=>this.lbrandC(),z:r=>this.lbrandZ(r)},["LYS"]:{c:()=>this.shartC(),z:r=>this.shartZ(r)},["MMY"]:{c:()=>this.maggyC(),z:r=>this.maggyZ(r)},["MPH"]:{c:()=>this.morphC(),z:r=>this.morphZ(r)},["MSC"]:{c:()=>this.sculptC(),z:r=>this.sculptZ(r)},["NNS"]:{c:()=>this.nanoC(),z:r=>this.nanoZ(r)},["NSL"]:{c:()=>this.natselC(),z:r=>this.natselZ(r)},["NCF"]:{c:()=>this.nflayC(),z:r=>this.nflayZ(r)},["NCV"]:{c:()=>this.nviveC(),z:r=>this.nviveZ(r)},["NDY"]:{c:()=>this.ntdcC(),z:r=>this.ntdcZ(r)},["OEX"]:{c:()=>this.oexpC(),z:r=>this.oexpZ(r)},["OSS"]:{c:()=>this.orssC(),z:r=>this.orssZ(r)},["PTR"]:{c:()=>this.pwtorC(),z:r=>this.pwtorZ(r)},["PSG"]:{c:()=>this.psurgeC(),z:r=>this.psurgeZ(r)},["PMS"]:{c:()=>this.pslamC(),z:r=>this.pslamZ(r)},["PMP"]:{c:()=>this.pummC(),z:r=>this.pummZ(r)},["RPR"]:{c:()=>this.rpsC(),z:r=>this.rpsZ(r)},["SAP"]:{c:()=>this.sapC(),z:r=>this.sapZ(r)},["SVO"]:{c:()=>this.soathC(),z:r=>this.soathZ(r)},["SOC"]:{c:()=>this.scythC(),z:r=>this.scythZ(r)},["SOA"]:{c:()=>this.soaC(),z:r=>this.soaZ(r)},["SOD"]:{c:()=>this.sodC(),z:r=>this.sodZ(r)},["SOT"]:{c:()=>this.sotC(),z:r=>this.sotZ(r)},["SHG"]:{c:()=>this.shgrC(),z:r=>this.shgrZ(r)},["SNB"]:{c:()=>this.snbC(),z:r=>this.snbZ(r)},["SHV"]:{c:()=>this.sharvC(),z:r=>this.sharvZ(r)},["SRP"]:{c:()=>this.sreapC(),z:r=>this.sreapZ(r)},["STR"]:{c:()=>this.sttorC(),z:r=>this.sttorZ(r)},["STO"]:{c:()=>this.sptorC(),z:r=>this.sptorZ(r)},["SOV"]:{c:()=>this.sovC(),z:r=>this.sovZ(r)},["STN"]:{c:()=>this.stbrnC(),z:r=>this.stbrnZ(r)},["STP"]:{c:()=>this.ssperC(),z:r=>this.ssperZ(r)},["SIN"]:{c:()=>this.sinC(),z:r=>this.sinZ(r)},["TGL"]:{c:()=>this.tanglC(),z:r=>this.tanglZ(r)},["TPT"]:{c:()=>this.tpactC(),z:r=>this.tpactZ(r)},["TUP"]:{c:()=>this.tugC(),z:r=>this.tugZ(r)},["TOT"]:{c:()=>this.totsC(),z:r=>this.totsZ(r)},["TXB"]:{c:()=>this.txbnC(),z:r=>this.txbnZ(r)},["TXS"]:{c:()=>this.sporeC(),z:r=>this.sporeZ(r)},["TCG"]:{c:()=>this.tremcC(),z:r=>this.tremcZ(r)},["URS"]:{c:()=>this.urstC(),z:r=>this.urstZ(r)},["VSK"]:{c:()=>this.vensC(),z:r=>this.vensZ(r)},["VGR"]:{c:()=>this.vgraC(),z:r=>this.vgraZ(r)},["VSP"]:{c:()=>this.vrdsC(),z:r=>this.vrdsZ(r)},["VTR"]:{c:()=>this.vrshC(),z:r=>this.vrshZ(r)},["VGL"]:{c:()=>this.vglchC(),z:r=>this.vglchZ(r)},["VYE"]:{c:()=>this.vembC(),z:r=>this.vembZ(r)},["UBL"]:{c:()=>this.uboltC(),z:r=>this.uboltZ(r)},["WMM"]:{c:()=>this.warC(),z:r=>this.warZ(r)},["XRW"]:{c:()=>this.xwillC(),z:r=>this.xwillZ(r)}}[t]}cardCast(t,i){this.lookup(t).z(i)}playTarg;xl=!0;constructor(t){super(t),this.playTarg=y.crActTarg("CARD",this.code,""),this.lookup(this.cardCode()).c()}playTargets(){const t=super.playTargets(),i=this.cardCode();return i==="NSL"&&g.ddf1().length<5||(i==="FOR"&&(this.playTarg.lanes=g.ddf1().filter(r=>r.opposed).map(r=>r.lane)),t.push(this.playTarg)),t}handleAction(t){const i=g.ddf6(t);this.logSpell(this.xl?i:void 0),this.cardCast(this.cardCode(),i),T.spellCast()}ddf8(t){const i=Dt.extractCardCode(t.trigger.logicCode);if(i==="OEX"&&t.trigger.type==="DM"){const r=t.event;return r.battle&&!r.isCreatTarg&&r.isCreatSrc&&r.srcId===t.creatId}else if((i==="FZS"||i==="IFR")&&t.trigger.type==="DM"){const r=t.event;if(r.isCreatTarg&&r.target===t.creatId)return!0}else if(i==="NDY"&&t.trigger.type==="DS"||i==="SHG"&&(t.trigger.type==="PT"||t.trigger.type==="VN")||(i==="IFR"||i==="OEX")&&t.trigger.type==="PT")return!0;return!1}jr8(t){const i=Dt.extractCardCode(t.trigger.logicCode);if(i==="FZS"||i==="IFR"&&t.trigger.type==="DM"){const r=g.jr5(t.creatId);r.status==="A"&&W.destroy(r,this.code)}else if(i==="SHG"){if(t.trigger.type==="VN"){const r=t.event,s=g.jr5(r.creatId);g.birth(s.code,"S",t.owner)}else if(t.trigger.type==="PT"){const r=t.trigger.customCode,s=g.jr5(t.creatId);s.triggers.filter(f=>f.customCode===r).forEach(f=>s.removeTrigger(f))}}else if(i==="IFR"&&t.trigger.type==="PT"){const r=S.deTil(t.trigger.customCode),s=r[1],c=g.jr5(t.creatId);if(r[0]==="P2"){const f=y.trigIdx(c.triggers,t.trigger);c.triggers[f].customCode=S.enTil("P1",s)}else{const f=c.triggers.find(m=>m.customCode===s);f&&c.removeTrigger(f),c.removeTrigger(t.trigger)}}else if(i==="OEX"){if(t.trigger.type==="DM"){const r=t.event,s=g.qEnemyCreats(),c=s.length,f=M.tick();let m;c>0&&(this.level===1?m=[s[S.randInt(0,c)]]:this.level===2?(m=s.splice(S.randInt(0,c),1),s.length>0&&m.push(s[S.randInt(0,c-1)])):m=s,m.forEach(A=>A.hurtDirect(r.dmg,this.code,f)))}else if(t.trigger.type==="PT"){const r=t.trigger.customCode,s=g.jr5(t.creatId);s.triggers.filter(f=>f.customCode===r).forEach(f=>s.removeTrigger(f))}}else if(i==="NDY"){const r=g.jr5(t.creatId);if(r.status==="A"){const s=this.ndcbuf;this.logAct(!1,r),r.buff(s,s)}}else super.jr8(t);x.triggerDone()}rankT(){return`If you are rank ${this.level+1} or higher`}icaf(t){return`. If that creature is ${p.factionText(t)}, `}formFun(t){if(!(t.lane===1||t.lane===5)){const i=y.crTarg();i.player=k.toTarget(t.owner),i.lanes=t.adjacent;const r=g.creatByTarget(i);if(r.length===2)return r}return[]}awingC(){this.faction="A",this.rarity="R",this.name="Aegis Wings",this.text=`Give a creature ${p.jr9(this.boof369,0)}. Then if that creature has the highest attack, it also gets Mobility 1 and Armor ${this.boof246}.`,this.playTarg.hint=["BF"]}awingZ(t){t.buff(this.boof369,0);const i=t.attack;g.qActiveCreats().every(r=>r.attack<=i)&&(t.addMobility(1),t.addArmor(this.boof246))}asurgeC(){this.faction="T",this.rarity="R",this.name="Aerial Surge",this.free=this.level>1,this.level===1&&(this.hints=["LG"]),this.playTarg.canMove=!0,this.playTarg.hint=["BF"],this.text=`Give a creature Mobility ${this.level}.`}asurgeZ(t){t.addMobility(this.level)}anatC(){this.faction="A",this.rarity="C",this.name="Anatomize",this.playTarg.hint=["DB"],this.text=`Give a creature ${p.jr9(-this.boof4816,0)}.~You may play an additional ${this.name} this turn.`}anatZ(t){t.buff(-this.boof4816,0);const i=I.freeCard(this.code);i.condition.cardCode="ATZ"}anvbC(){this.faction="A",this.rarity="T",this.name="Anvilbreaker",this.free=!0,this.maxLevel=1,this.playTarg.player="E",this.text=`Give an enemy creature ${p.jr9(-2,0)}, then move it to another available lane at random.`}anvbZ(t){t.buff(-2,0),g.fling(t)}aqatC(){this.faction="T",this.rarity="C",this.name="Aquatic Embrace",this.text=`Give a creature ${p.jr9(0,this.boof51015)}.`,this.playTarg.hint=["BF"]}aqatZ(t){t.buff(0,this.boof51015)}armoC(){this.faction="A",this.rarity="R",this.name="Armory Outpost",this.playTarg.player="F";const t=p.jr9(this.boof4610,0);this.text=`Give a friendly creature ${t}. If it is in Formation, give the adjacent creatures ${t} as well.`}armoZ(t){const i=this.boof4610;this.formFun(t).concat(t).forEach(r=>r.buff(i,0))}bftC(){this.faction="N",this.rarity="C",this.name="Bitterfrost Totem";const t=this.boof4812n;this.playTarg.hint=["DB"],this.text=`Give a creature ${p.jr9(t,t)}. ${this.rankT()}, it gets an additional ${p.jr9(-2,-2)}.`}bftZ(t){const i=this.boof4812n-(k.getActive().rank>this.level?2:0);t.buff(i,i)}get bhos(){return this.lValN([6,9,20])}bzhC(){this.faction="T",this.rarity="H",this.name="Blazing Hostility";const t=this.bhos;this.playTarg.player="E",this.text=`Deal ${t} damage to an enemy creature${this.icaf("N")}deal ${t} damage to the enemy player as well.`}bzhZ(t){const i=this.bhos;t.hurtDirect(i,this.code),t.faction==="N"&&k.hurtDirect(t.owner,i,this.code)}blod(){return I.deathsA.length>0||I.deathsB.length>0}bbrC(){this.faction="A",this.rarity="C",this.name="Blood Barrier";const t=this.boof234;this.text=`Give a creature Armor ${t}.~If a creature was destroyed this turn, it gets an additional Armor ${t}.`,this.playTarg.hint=["BF"],this.playTarg.canArmor=!0}bbrZ(t){const i=this.boof234;t.addArmor(i),this.blod()&&t.addArmor(i)}bbdC(){this.faction="N",this.rarity="C",this.name="Blood Bindings";const t=this.boof369n,i=p.jr9(t,t);this.text=`Give a creature ${i}.~If a creature was destroyed this turn, it gets an additional ${i}.`,this.playTarg.hint=["DB"]}bbdZ(t){const i=this.boof369n;t.buff(i,i),this.blod()&&t.buff(i,i)}bblC(){this.faction="T",this.rarity="C",this.name="Blood Boil";const t=this.lValN([5,6,10]);this.text=`Deal ${t} damage to a creature.~If a creature was destroyed this turn, deal an additional ${t} damage to that creature.`,this.playTarg.hint=["HR"]}bblZ(t){const i=this.lValN([5,6,10]),r=M.tick();t.hurtDirect(i,this.code,r),this.blod()&&t.hurtDirect(i,this.code,r)}bbnC(){this.faction="U",this.rarity="C",this.name="Blood Boon";const t=this.lValN([3,4,7]),i=p.jr9(t,t);this.text=`Give a creature ${i}.~If a creature was destroyed this turn, it gets an additional ${i}.`,this.playTarg.hint=["BF"]}bbnZ(t){const i=this.lValN([3,4,7]);t.buff(i,i),this.blod()&&t.buff(i,i)}botC(){this.faction="U",this.rarity="H",this.name="Botanimate",this.xl=!1,this.text=`Replace an enemy ${p.levelGateText(this.level)}creature with a 3/3 Sapling.`,this.playTarg.player="E",this.playTarg.level=D.ddf2(this.level),this.level<3&&(this.hints=["LG"])}botZ(t){g.birth(`${"BOS"}${this.level}`,"R",t.owner,t.lane)}btpC(){this.faction="U",this.rarity="H",this.name="Bottomless Puncture",this.playTarg.player="E",this.text=`Give an enemy creature Poison ${this.boof369}${this.icaf("T")}give the enemy player Poison ${this.level} as well.`}btpZ(t){t.addPoison(this.boof369),t.faction==="T"&&(k.toPlayer(t.owner).poison+=this.level)}chatC(){this.faction="T",this.rarity="R",this.name="Chaos Twister",this.playTarg.player="E";const t=`eal ${this.twist} damage to `;this.text=`D${t}an enemy creature. If it is in Formation, d${t}the adjacent creatures as well.`}chatZ(t){const i=this.twist,r=M.tick();this.formFun(t).concat(t).forEach(s=>s.hurtDirect(i,this.code,r))}get twist(){return this.lValN([6,8,10])}csurgeC(){this.faction="N",this.rarity="R",this.name="Contagion Surge",this.free=this.level>1,this.level===1&&(this.hints=["LG"]);const t=this.boof123n;this.text=`Give a creature ${p.jr9(t,t)}.`,this.playTarg.hint=["DB"]}csurgeZ(t){const i=this.boof123n;t.buff(i,i)}ctmsC(){this.faction="A",this.rarity="R",this.name="Countermeasure";const t=this.boof4816;this.text=`Give an enemy creature ${p.jr9(-t,0)}, or give a friendly creature ${p.jr9(t,0)}.`}ctmsZ(t){const i=this.boof4816;t.owner===k.getActiveB()?t.buff(i,0):t.buff(-i,0)}cullC(){this.faction="N",this.rarity="C",this.name="Cull the Weak",this.xl=!1;const t=this.boof4814;this.text=`Destroy a creature with ${t} or less attack.`,this.playTarg.maxAttack=t,this.playTarg.hint=["KL"],this.level<3&&(this.hints=["LG"])}cullZ(t){W.destroy(t,this.code)}cultC(){this.faction="U",this.rarity="H",this.name="Cultivate",this.xl=!1;const t=L.getCard(Z.tffc(this.level));this.text=`Replace a friendly Plant with a ${p.tokName(t)}.`,this.playTarg.player="F",this.playTarg.tribe="PL",this.level<3&&(this.hints=["LG"])}cultZ(t){g.birth(Z.tffc(this.level),"R",t.owner,t.lane)}cypaC(){this.faction="A",this.rarity="R",this.name="Cypien Augmentation",this.free=this.level>1,this.level===1&&(this.hints=["LG"]);const t=this.boof246;this.text=`Give a creature in a center lane ${p.jr9(t,t)}.`,this.playTarg.lanes=3,this.playTarg.hint=["BF"]}cypaZ(t){const i=this.boof246;t.buff(i,i)}cypbC(){this.faction="A",this.rarity="C",this.name="Cypien Battlesuit",this.text=`Give an Alloyin creature ${p.jr9(this.boof51015,0)} and Armor ${this.boof124}.`,this.playTarg.hint=["BF"],this.playTarg.faction="A"}cypbZ(t){t.buff(this.boof51015,0),t.addArmor(this.boof124)}dpsC(){this.faction="N",this.rarity="H",this.name="Death's Possession";const t=this.boof4812;this.playTarg.maxAttack=t,this.text=`Destroy a creature with ${t} or less attack${this.icaf("A")}Spawn a copy of it.`}dpsZ(t){W.destroy(t,this.code),t.faction==="A"&&g.birth(t.code,"S",k.getActiveB())}dendC(){this.faction="U",this.rarity="R",this.name="Dendrify",this.xl=!1,this.level===3&&(this.free=!0,this.overload=!0),this.text=`Replace a ${p.levelGateText(this.level+1)}creature with a 7/7 Treefolk.`,this.playTarg.level=D.ddf2(this.level+1)}dendZ(t){g.birth(`${"SXT"}${this.level}`,"R",t.owner,t.lane)}dreadC(){this.faction="N",this.rarity="H",this.name="Dreadbolt",this.xl=!1,this.level<3&&(this.hints=["LG"]),this.text=`Destroy a ${p.levelGateText(this.level)}creature.`,this.playTarg.level=D.ddf2(this.level),this.playTarg.hint=["KL"]}dreadZ(t){W.destroy(t,this.code)}dyinC(){this.faction="U",this.rarity="T",this.name="Dysian Infusion",this.playTarg.hint=["BF"];const t=this.boof135,i=this.boof4710;this.text=`Give a creature ${p.jr9(i,i)} and Regenerate ${t}.`}dyinZ(t){const i=this.boof4710;t.buff(i,i),t.addRegen(this.boof135)}enpC(){this.faction="A",this.rarity="H",this.name="Energy Prison",this.free=this.level===3,this.text=`Give a ${p.levelGateText(this.level)}creature Defender.`,this.playTarg.canDefender=!0,this.playTarg.level=D.ddf2(this.level),this.level<3&&(this.hints=["LG"])}enpZ(t){t.defender=!0}elnC(){this.faction="A",this.rarity="C",this.name="Electro Net",this.text=`Give a creature ${p.jr9(-this.boof51015,0)}.`,this.playTarg.hint=["DB"]}elnZ(t){t.buff(-this.boof51015,0)}rageC(){this.faction="U",this.rarity="C",this.name="Enrage";const t=this.boof3612;this.text=`Give a creature ${p.jr9(t,t)}.`,this.playTarg.hint=["BF"]}rageZ(t){const i=this.boof3612;t.buff(i,i)}efauC(){this.faction="T",this.rarity="R",this.name="Everflame Aura",this.text=`Deal ${this.level+6} damage to an enemy creature, or give a friendly creature Mobility ${this.level}.`}efauZ(t){t.owner===k.getActiveB()?t.addMobility(this.level):t.hurtDirect(this.level+6,this.code)}expdmC(){this.faction="N",this.rarity="H",this.name="Explosive Demise",this.xl=!1,this.text=`Destroy a friendly ${p.levelGateText(this.level+1)}creature.~Deal damage equal to its attack to the enemy player.${this.level===3?"~You gain that much health.":""}`,this.playTarg.level=D.ddf2(this.level+1),this.playTarg.player="F"}expdmZ(t){const i=t.attack;W.destroy(t,this.code),k.hurtDirect("E",i,this.code),this.level===3&&k.heal("F",i,this.code)}fitrC(){this.faction="T",this.rarity="C",this.name="Fit of Rage",this.maxLevel=1,this.overload=!0,this.playTarg.player="F",this.text="Give a friendly creature +attack equal to the creature opposing it this turn."}fitrZ(t){t.addMod(y.modT("AT",t.opposed?.attack||0))}get fiboof(){return this.lValN([1,3,8])}feralC(){this.faction="U",this.rarity="C",this.name="Feral Instinct";const t=this.fiboof;this.text=`Give a creature ${p.jr9(t,t,!0)} and Breakthrough.`,this.playTarg.hint=["BF"]}feralZ(t){const i=this.fiboof;t.breakthrough=!0,t.buff(i,i)}fjetC(){this.faction="T",this.rarity="C",this.name="Flame Jet",this.playTarg.hint=["HR"],this.text=`Deal ${this.boof3915} damage to a creature. ${this.rankT()}, deal an additional 3 damage.`}fjetZ(t){t.hurtDirect(this.boof3915,this.code),k.getActive().rank>this.level&&t.hurtDirect(3,this.code)}flncC(){this.faction="T",this.rarity="R",this.name="Flame Lance",this.xl=!1;const t=this.boof579;this.text=`Deal ${t} damage to an enemy creature and ${t} damage to the enemy player.`,this.playTarg.player="E"}flncZ(t){const i=this.boof579;t.hurtDirect(i,this.code),k.hurtDirect("E",i,this.code)}ffldC(){this.faction="A",this.rarity="C",this.name="Forcefield",this.playTarg.canArmor=!0,this.playTarg.hint=["BF"],this.text=`Give a creature Armor ${this.boof51020} this turn.`}ffldZ(t){t.addMod(y.modT("AR",this.boof51020))}frozC(){this.faction="T",this.rarity="R",this.name="Frozen Solid",this.playTarg.level=D.ddf2(this.level),this.playTarg.hint=["KL"],this.text=`Give a ${p.levelGateText(this.level)}creature "When this is dealt damage, destroy it".`,this.level<3&&(this.hints=["LG"])}frozZ(t){t.changed=!0;const i=t.jr4("DM",this.code);i.bonus=this.avgSpawnNug()}ghastC(){this.faction="N",this.rarity="C",this.name="Ghastly Touch";const t=-this.boof3612;this.text=`Give a creature ${p.jr9(t,t)}.`,this.playTarg.hint=["DB"]}ghastZ(t){const i=-this.boof3612;t.buff(i,i)}crushC(){this.faction="T",this.rarity="C",this.name="Glacial Crush",this.xl=!1,this.free=this.level>1,this.free||(this.hints=["LG"]),this.playTarg.player="E",this.playTarg.hasDefender=!0,this.text=`Destroy an enemy creature with Defender.${this.level===3?" Deal damage equal to its health to the enemy player.":""}`}crushZ(t){const i=t.health;W.destroy(t,this.code),this.level===3&&k.hurtDirect(t.owner,i,this.code)}hartC(){this.faction="A",this.rarity="C",this.name="Heavy Artillery",this.playTarg.hint=["BF"],this.text=`Give a creature ${p.jr9(this.boof51015,0)}.`}hartZ(t){t.buff(this.boof51015,0)}izftC(){this.faction="T",this.rarity="T",this.name="Iztek's Frost",this.free=this.level===3,this.playTarg.level=D.ddf2(this.level+1),this.playTarg.hint=["KL"],this.text=`Until the end of the next turn, give a ${p.levelGateText(this.level+1)}creature "When this is dealt damage, destroy it".`,this.level===1&&(this.hints=["LG"])}izftZ(t){const i=M.genId(),r=t.jr4("DM",this.code);r.changes=!0,r.customCode=i,r.bonus=this.avgSpawnNug();const s=t.jr4("PT",this.code);s.customCode=S.enTil("P2",i)}jpC(){this.faction="A",this.rarity="C",this.name="Jet Pack",this.playTarg.hint=["BF"],this.text=`Give a creature ${p.jr9(this.boof369,0)} and Mobility 1.`}jpZ(t){t.buff(this.boof369,0),t.addMobility(1)}lbrandC(){this.faction="T",this.rarity="C",this.name="Lightning Brand",this.playTarg.level=D.ddf2(this.level+1),this.playTarg.hint=["BF"],this.text=`Give a ${p.levelGateText(this.level+1)}creature ${p.jr9(this.boof124,0)} and Aggressive this turn.`,this.level===1&&(this.hints=["LG"])}lbrandZ(t){t.addMod(y.modT("AT",this.boof124)),t.addMod(y.modT("AG",!0))}shartC(){this.faction="U",this.rarity="R",this.name="Lysian Shard",this.overload=!0,this.maxLevel=1,this.hints=["ZZ-1"],this.playTarg.hint=["BF"],this.text=`Give a creature ${p.jr9(6,6)}.`}shartZ(t){t.buff(6,6)}maggyC(){this.faction="T",this.rarity="T",this.name="Magmify",this.maxLevel=2,this.level===1?this.hints=["LG"]:this.free=!0,this.playTarg.player="F",this.text="Set a friendly creatures attack equal to its health."}maggyZ(t){const i=t.health-t.attack;i!==0&&t.buff(i,0)}morphC(){this.faction="U",this.rarity="H",this.name="Metamorphosis",this.xl=!1,this.text=`Replace a ${p.levelGateText(this.level)}creature with a 0/3 Feywing Chrysalis.`,this.playTarg.level=D.ddf2(this.level),this.level<3&&(this.hints=["LG"])}morphZ(t){g.birth(`${"FWC"}1`,"R",t.owner,t.lane)}sculptC(){this.faction="A",this.rarity="H",this.name="Metasculpt",this.level===3?this.free=!0:this.hints=["LG"],this.playTarg.level=D.ddf2(this.level+1),this.text=`Remove all abilities from a ${p.levelGateText(this.level+1)}creature.`,this.playTarg.hint=["DB"]}sculptZ(t){t.wipeAll()}nanoC(){this.faction="A",this.rarity="R",this.name="Nanoswarm",this.playTarg.level=D.ddf2(this.level),this.text=`Give a ${p.levelGateText(this.level)}creature ${p.jr9(-this.boof51015,0)} and remove all abilities from it.`,this.playTarg.hint=["DB"],this.level<3&&(this.hints=["LG"])}nanoZ(t){t.buff(-this.boof51015,0),t.wipeAll()}natselC(){this.faction="U",this.rarity="R",this.name="Natural Selection",this.xl=!1,this.text=`If there is a friendly creature in each lane, destroy a ${p.levelGateText(this.level)}creature.`,this.playTarg.level=D.ddf2(this.level),this.playTarg.hint=["KL"],this.level<3&&(this.hints=["LG"])}natselZ(t){W.destroy(t,this.code)}nflayC(){this.faction="N",this.rarity="C",this.name="Necroflay";const t=-this.boof3711;this.text=`Give a creature ${p.jr9(t,t)}.~You may play an additional ${this.name} this turn.`,this.playTarg.hint=["DB"]}nflayZ(t){const i=-this.boof3711;t.buff(i,i);const r=I.freeCard(this.code);r.condition.cardCode="NCF"}nviveC(){this.faction="N",this.rarity="C",this.name="Necrovive",this.playTarg.canRegen=!0,this.playTarg.hint=["BF"],this.text=`Give a creature Regenerate ${this.boof3612}.`}nviveZ(t){t.addRegen(this.boof3612)}ntdcC(){this.faction="N",this.rarity="R",this.name="Nether Decay";const t=this.ndcbuf;this.text=`Give a creature "When a creature is destroyed, this gets ${p.jr9(t,t)}."`,this.playTarg.hint=["DB"]}ntdcZ(t){t.changed=!0;const i=t.jr4("DS",this.code),r=this.ndcbuf;i.bonus=this.buffNug(r,r)}get ndcbuf(){return-4-this.level}oexpC(){this.faction="A",this.rarity="H",this.name="Oratek Explosives",this.playTarg.player="F";const t=this.lValS(["an enemy creature at random","up to two enemy creatures at random","each enemy creature"]);this.text=`Give a friendly creature ${p.jr9(5,0)}.~Allied Tempys: This turn, when that creature ${p.dbdtap()}, deal that much damage to ${t}.`}oexpZ(t){if(t.buff(5,0),I.allied("T")){const i=M.genId(),r=t.jr4("DM",this.code);r.changes=!0,r.customCode=i;const s=t.jr4("PT",this.code);s.customCode=i}}orssC(){this.faction="A",this.rarity="C",this.name="Oreian Steelskin",this.playTarg.canArmor=!0,this.playTarg.hint=["BF"],this.text=`Give a creature Armor ${this.boof246}. ${this.rankT()}, it gets an additional Armor 1.`}orssZ(t){const i=k.getActive().rank>this.level?1:0;t.addArmor(this.boof246+i)}pwtorC(){this.faction="A",this.rarity="R",this.name="Power Torrent",this.free=this.level>1,this.level===1&&(this.hints=["LG"]),this.playTarg.hint=["BF"],this.text=`Give a creature ${p.jr9(this.boof234,0)}.`}pwtorZ(t){t.buff(this.boof234,0)}psurgeC(){this.faction="U",this.rarity="R",this.name="Primal Surge",this.free=this.level>1,this.level===1&&(this.hints=["LG"]),this.playTarg.hint=["BF"],this.text=`Give a creature ${p.jr9(this.level,this.level)}.`}psurgeZ(t){t.buff(this.level,this.level)}pslamC(){this.faction="T",this.rarity="C",this.name="Primordial Slam",this.playTarg.hint=["BF"],this.text=`Give a creature ${p.jr9(this.boof71116,0)} this turn.`}pslamZ(t){t.addMod(y.modT("AT",this.boof71116))}pummC(){this.faction="A",this.rarity="R",this.name="Pummel Pack";const t=this.boof236,i=`${p.jr9(t,0)} and Armor ${t}.`;this.text=`Give a friendly creature ${i}~If it is the only friendly creature, it gets an additional ${i}`,this.playTarg.player="F"}pummZ(t){const i=this.boof236;t.buff(i,0),t.addArmor(i),g.ddf1().length===1&&(t.buff(i,0),t.addArmor(i))}get dennis(){return this.lValN([-3,-9,-25])}rpsC(){this.faction="A",this.rarity="H",this.name="Repress",this.playTarg.player="E",this.text=`Give an enemy creature ${p.jr9(this.dennis,0)}.${this.icaf("U")}remove all abilities from it.`}rpsZ(t){t.buff(this.dennis,0),t.faction==="U"&&t.wipeAll()}sapC(){this.faction="A",this.rarity="C",this.name="Sap",this.playTarg.level=D.ddf2(this.level),this.text=`Reduce a ${p.levelGateText(this.level)}creature's attack to 0.`,this.playTarg.hint=["DB"],this.level<3&&(this.hints=["LG"])}sapZ(t){t.buff(-t.attack,0)}soathC(){this.faction="U",this.rarity="C",this.name="Savage Oath",this.level===1&&(this.hints=["LG"]);const t=this.saboof;this.text=`Give an Uterra creature ${p.jr9(t,t,!0)} and Breakthrough.`,this.playTarg.hint=["BF"],this.playTarg.faction="U"}soathZ(t){const i=this.saboof;t.buff(i,i),t.breakthrough=!0}get saboof(){return this.lValN([2,6,15])}scythC(){this.faction="N",this.rarity="L",this.name="Scythe of Chiron";const t=this.boof246;this.playTarg.player="F",this.text=`Each enemy creature gets ${p.jr9(-t,0)}. Give a friendly creature ${p.jr9(t,0)} for each enemy creature.`}scythZ(t){const i=-this.boof246,r=g.qEnemyCreats();r.forEach(s=>{s.buff(i,0)}),r.length>0&&t.buff(-i*r.length,0)}soaC(){this.faction="A",this.rarity="C",this.name="Seal of Anvillon",this.level===1?this.hints=["LG"]:this.consistent=!0,this.playTarg.hint=["BF"],this.text=`Give a creature ${p.jr9(this.ubzap,0)}.`}soaZ(t){t.buff(this.ubzap,0)}sodC(){this.faction="U",this.rarity="C",this.name="Seal of Deepwood",this.level===1?this.hints=["LG"]:this.consistent=!0;const t=this.derpboof;this.playTarg.hint=["BF"],this.text=`Give a creature ${p.jr9(t,t)}.`}sodZ(t){const i=this.derpboof;t.buff(i,i)}get derpboof(){return this.lValN([1,6,12])}sotC(){this.faction="N",this.rarity="C",this.name="Seal of Tarsus",this.level===1?this.hints=["LG"]:this.consistent=!0;const t=this.tars;this.playTarg.hint=["DB"],this.text=`Give a creature ${p.jr9(t,t)}.`}sotZ(t){const i=this.tars;t.buff(i,i)}get tars(){return this.lValN([-2,-8,-16])}shgrC(){this.faction="N",this.rarity="L",this.name="Shallow Grave",this.free=this.level===3,this.playTarg.level=D.ddf2(this.level+1),this.playTarg.player="F",this.text=`Give a ${p.levelGateText(this.level+1)}friendly creature "Vengeance: Spawn this" this turn.`,this.level===1&&(this.hints=["LG"])}shgrZ(t){const i=M.genId(),r=t.jr4("VN",this.code);r.customCode=i,r.changes=!0;const s=t.jr4("PT",this.code);s.customCode=i}sinC(){this.faction="U",this.rarity="C",this.name="Strength In Numbers",this.playTarg.hint=["BF"],this.text=`Give a creature ${p.jr9(this.level,this.level)} for each friendly creature.`}sinZ(t){const i=this.level*g.ddf1().length;t.buff(i,i)}get snbboof(){return-1*(this.level+7)}snbC(){this.faction="A",this.rarity="C",this.name="Sonic Burst",this.playTarg.hint=["DB"],this.text=`Give a creature ${p.jr9(this.snbboof,0)}.`,this.level<3&&(this.hints=["LB"])}snbZ(t){t.buff(this.snbboof,0)}sharvC(){this.faction="N",this.rarity="H",this.name="Soul Harvest",this.xl=!1;const t=this.lValS(["an additional level 1 card","an additional card","two additional cards"]);this.text=`Destroy a friendly creature. You may play ${t} this turn.`,this.playTarg.player="F",this.level<3&&(this.hints=["LG"])}sharvZ(t){if(W.destroy(t,this.code),this.level===1){const i=I.freeCard(this.code);i.condition.level=D.ddf2(1)}else I.regularPlays+=this.level-1}sreapC(){this.faction="N",this.rarity="L",this.name="Soulreap",this.xl=!1;const t=this.boof248;this.text=`Destroy an enemy creature with ${t} or less attack. Then Spawn a copy of it.`,this.playTarg.player="E",this.playTarg.maxAttack=t,this.level<3&&(this.hints=["LG"])}sreapZ(t){W.destroy(t,this.code),g.birth(t.code,"S",!t.owner)}sttorC(){this.faction="N",this.rarity="R",this.name="Spirit Torrent",this.free=this.level>1,this.level===1&&(this.hints=["LG"]),this.text=`Give a creature Regenerate ${this.boof234}.`,this.playTarg.hint=["BF"],this.playTarg.canRegen=!0}sttorZ(t){t.addRegen(this.boof234)}sptorC(){this.faction="U",this.rarity="R",this.name="Spore Torrent",this.free=this.level>1,this.level===1&&(this.hints=["LG"]),this.text=`Give a creature Poison ${this.boof234}.`,this.playTarg.hint=["PN"]}sptorZ(t){t.addPoison(this.boof234)}sovC(){this.faction="T",this.rarity="L",this.name="Staff of Vaerus",this.text=`Give a friendly ${p.levelGateText(this.level+1)}creature Mobility ${this.level}. That creature battles an additional time this turn.`,this.playTarg.level=D.ddf2(this.level+1),this.playTarg.player="F"}sovZ(t){t.extraBattles+=1,t.addMobility(this.level)}stbrnC(){this.faction="T",this.rarity="R",this.name="Stone Brand";const t=this.boof579;this.text=`Give a creature with Defender ${p.jr9(t,t,!0)} and Negate Defender from it.`,this.playTarg.hint=["BF"],this.playTarg.hasDefender=!0}stbrnZ(t){const i=this.boof579;t.buff(i,i),t.negateDefender=!0}ssperC(){this.faction="T",this.rarity="C",this.name="Stormspear",this.xl=!1,this.playTarg.hint=["HR"],this.text=`Deal ${this.sspb} to a creature.~You may play an additional ${this.name} this turn.`}ssperZ(t){t.hurtDirect(this.sspb,this.code);const i=I.freeCard(this.code);i.condition.cardCode="STP"}get sspb(){return this.lValN([3,8,12])}tanglC(){this.faction="U",this.rarity="R",this.name="Tangle",this.xl=!1;let t="";this.level===3?t=" You gain health equal to that creature's attack.":this.playTarg.hint=["KL"],this.text=`Destroy a ${p.levelGateText(this.level+1)}creature with Mobility.${t}`,this.playTarg.level=D.ddf2(this.level+1),this.playTarg.hasMobility=!0,this.level===1&&(this.hints=["LG"])}tanglZ(t){W.destroy(t,this.code),this.level===3&&k.heal("F",t.attack,this.code)}tpactC(){this.faction="N",this.rarity="C",this.name="Tarsian Pact";const t=this.boof235;this.text=`Give a Nekrium creature ${p.jr9(t,t,!0)} and Regenerate ${t}.`,this.playTarg.hint=["BF"],this.playTarg.faction="N"}tpactZ(t){const i=this.boof235;t.buff(i,i),t.addRegen(i)}tugC(){this.faction="A",this.rarity="R",this.name="Tech Upgrade",this.playTarg.tribe="RB",this.playTarg.hint=["BF"],this.text=`Give a Robot ${p.jr9(this.boof4612,0)} and Armor ${this.boof236}.`}tugZ(t){t.addArmor(this.boof236),t.buff(this.boof4612,0)}totsC(){this.faction="N",this.rarity="T",this.name="Tendrils Of Twilight",this.free=!0;const t=-this.boof7911;this.text=`Give an enemy creature ${p.jr9(-1,-1)}.~If that creature is opposing a friendly Duskmaw, give that creature ${p.jr9(t,t)} instead.`,this.playTarg.player="E"}totsZ(t){const i=this.duskBof(t);t.buff(i,i)}duskBof(t){const i=t.opposed;let r=!1;return i&&(r=Dt.extractCardCode(i.code)==="DTD"),r?-this.boof7911:-1}txbnC(){this.faction="U",this.rarity="R",this.name="Toxic Boon";const t=this.boof357;this.text=`Give an enemy creature Poison ${t}, or give a friendly creature ${p.jr9(t,t)}.`}txbnZ(t){const i=this.boof357;t.owner===k.getActiveB()?t.buff(i,i):t.addPoison(i)}get tspois(){return this.lValN([5,7,12])}sporeC(){this.faction="U",this.rarity="C",this.name="Toxic Spores",this.text=`Give a creature Poison ${this.tspois}.`,this.playTarg.hint=["PN"]}sporeZ(t){t.addPoison(this.tspois)}tremcC(){this.faction="T",this.rarity="C",this.name="Tremorcharge",this.text=`Give a Tempys creature ${p.jr9(0,this.boof4812)} and Mobility ${this.level}.`,this.playTarg.faction="T",this.playTarg.hint=["BF"]}tremcZ(t){t.buff(0,this.boof4812),t.addMobility(this.level)}uboltC(){this.faction="T",this.rarity="R",this.name="Uranti Bolt",this.xl=!1,this.text=`Deal ${this.ubzap} damage to a creature.~It gets Defender until the end of the next turn.`}uboltZ(t){t.hurtDirect(this.ubzap,this.code);const i=y.mod("DF",!0);i.expiry="EN",t.addMod(i)}get ubzap(){return this.lValN([3,10,20])}urstC(){this.faction="U",this.rarity="C",this.name="Ursine Strength";const t=this.boof3711;this.playTarg.hint=["BF"],this.text=`Give a creature ${p.jr9(t,t)}. ${this.rankT()}, it gets an additional ${p.jr9(2,2)}.`}urstZ(t){const i=this.boof3711+(k.getActive().rank>this.level?2:0);t.buff(i,i)}vensC(){this.faction="U",this.rarity="C",this.name="Venomstrike",this.playTarg.hint=["PN"],this.text=`Give a creature Poison ${this.boof468}.~You may play an additional ${this.name} this turn.`}vensZ(t){t.addPoison(this.boof468);const i=I.freeCard(this.code);i.condition.cardCode="VSK"}vgraC(){this.faction="U",this.rarity="C",this.name="Verdant Grace",this.playTarg.player="F",this.text=`Heal ${this.boof101520} damage from a friendly creature and ${this.boof246} health from each other friendly creature.`}vgraZ(t){t.heal(this.boof101520);const i=this.boof246;g.creatByTarget(y.crFriendNotMeTarg(t.id)).forEach(r=>{r.heal(i)})}vrdsC(){this.faction="U",this.rarity="C",this.name="Verdant Sphere";const t=this.boof5812;this.text=`Give a creature ${p.jr9(0,t)} and you gain ${t} health.`,this.playTarg.hint=["BF"]}vrdsZ(t){const i=this.boof5812;t.buff(0,i),k.heal(k.getActive(),i,this.code)}vrshC(){this.faction="U",this.rarity="R",this.name="Victory Rush";const t=this.level+3,i=p.jr9(t,t);this.text=`Give a friendly creature ${i}. If a Raid occured this turn, give it an additional ${i}.`,this.playTarg.player="F"}vrshZ(t){const i=(this.level+3)*(I.ffs>2?2:1);t.buff(i,i)}vglchC(){this.faction="N",this.rarity="R",this.name="Vigor Leech";const t=this.boof369n;this.text=`Give an enemy creature ${p.jr9(t,t)}, or give a friendly creature Regenerate ${-t}.`}vglchZ(t){const i=this.boof369n;t.owner===k.getActiveB()?t.addRegen(-i):t.buff(i,i)}vembC(){this.faction="N",this.rarity="C",this.name="Vyric's Embrace",this.playTarg.hint=["DB"];const t=this.boof468,i=-t;this.text=`Give a creature ${p.jr9(i,i)}.~You gain ${t} health.`}vembZ(t){const i=this.boof468,r=-i;t.buff(r,r),k.heal(k.getActive(),i,this.code)}warC(){this.faction="A",this.rarity="H",this.name="Warmonger Mod";let t=this.level,i=3;this.level===1&&(this.playTarg.level="LN",i=2,t=2),this.playTarg.hint=["BF"],this.text=`Give a ${p.levelGateText(i)}creature ${t}x attack.`}warZ(t){const i=this.level===3?2:1;t.buff(t.attack*i,0)}xwillC(){this.faction="N",this.rarity="H",this.name="Xrath's Will",this.xl=!1;const t=this.boof3612;this.text=`Destroy an enemy creature with ${t} or less attack.~You may play an additional Zombie this turn.`,this.playTarg.player="E",this.playTarg.maxAttack=t,this.level<3&&(this.hints=["LG"])}xwillZ(t){W.destroy(t,this.code);const i=I.freeCard(this.code);i.condition.tribe="ZB"}}class Qi extends N{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Crux, Metamind Rogue",this.iAttack=this.lValN([7,12,17]),this.iHealth=this.boof4812,this.tribe.push("MM"),this.hints=["RD"],this.text=`Forge: If Crux is your only friendly creature, it gets Armor ${this.level+2}.~Upgrade: Give an enemy creature ${p.jr9(-this.iHealth,0)}.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("FR");const s=r.jr4("UP");return s.interactive=!0,r}handleAction(t){const i=g.ddf6(t);i.buff(-this.iHealth,0),this.logAct(!1,i),T.actionDone(!0)}jr8(t){if(t.trigger.type==="UP"){const i=D.toActions(y.crEnemyActTarg("CARD",this.code,""));i.length===0?x.triggerDone():T.ddf5(i)}else if(t.trigger.type==="FR"){const i=g.creatByTarget(y.crFriendTarg());i.length===1&&i[0].addArmor(this.level+2),x.triggerDone()}}}class _i extends N{constructor(t){super(t),this.faction="T",this.rarity="T",this.name="Cryophoenix",this.iAttack=this.boof3711,this.iHealth=this.iAttack+3,this.iMobile=this.lValN([0,0,1]),this.tribe.push("PX"),this.text=`When ${this.name} enters play or moves, deal damage equal to its attack to the opposing creature.~If there is no opposing creature, deal that damage to the enemy player instead.`}image(t){return this.rawImage(`${"PHC"}${this.level}`,t)}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FK");return s.bonus=this.playerNug(this.iAttack),r.jr4("EF"),r}ddf8(t){return t.event.creatId===t.creatId}jr8(t){const r=$.toCreature(t.event).creature,s=r.opposed;s?s.hurtDirect(r.attack,this.code):k.hurtDirect(!r.owner,r.attack,this.code),x.triggerDone()}}class Bt extends N{lookup(t){return{["BOF"]:{c:()=>this.bofC(),d:(r,s)=>this.bofD(r,s)},["CTM"]:{c:()=>this.ctmC(),d:(r,s)=>this.ctmR(r,s)},["DFB"]:{c:()=>this.dfbC(),d:(r,s)=>this.dfbD(r,s)},["GGB"]:{c:()=>this.ggbC(),d:(r,s)=>this.ggbD(r,s)},["GGD"]:{c:()=>this.ggdC(),d:(r,s)=>this.ggdD(r,s)},["GGR"]:{c:()=>this.ggdrC(),d:(r,s)=>this.ggdrD(r,s)},["GGP"]:{c:()=>this.ggpC(),d:(r,s)=>this.ggpD(r,s)},["GGW"]:{c:()=>this.ggwC(),d:(r,s)=>this.ggwD(r,s)},["MHR"]:{c:()=>this.mhermC(),d:(r,s)=>this.mhermD(r,s)},["NGT"]:{c:()=>this.ngauntC(),d:(r,s)=>this.ngauntD(r,s)},["SRH"]:{c:()=>this.sharvC(),d:(r,s)=>this.sharvD(r,s)},["SPR"]:{c:()=>this.sprC(),d:(r,s)=>this.sprD(r,s)},["YNS"]:{c:()=>this.yuruC(),d:(r,s)=>this.yuruD(r,s)}}[t]}trigB;creatDied(t,i){this.lookup(t).d(i,$.toCreature(i.event))}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("DS");return s.bonus=this.trigB,r}ddf8(t){return!0}jr8(t){this.creatDied(this.cardCode(),t),x.triggerDone()}friendTribeTest(t,i,r){return i.id===t.id||t.owner===i.owner&&t.isTribe(r)&&Bt.itDiedFirst(t.id,i.id)}bofC(){this.faction="N",this.rarity="C",this.name="Bride of Frankenbaum",this.iAttack=this.boof5813,this.iHealth=this.iAttack+1,this.tribe.push("AB"),this.hints=["ZZ-1"];const t=this.boof234;this.text=`When a friendly Abomination is destroyed, you gain ${t} health.`,this.trigB=this.playerNug(t*2)}bofD(t,i){const r=g.jr5(t.creatId),s=i.creature;this.friendTribeTest(s,r,"AB")&&(this.logAct(!1,s),k.heal(r.owner,this.boof234,this.code))}ctmC(){this.faction="N",this.rarity="L",this.name="Cyrus, the Merciless",this.iAttack=this.boof359,this.iHealth=this.iAttack+1,this.tribe.push("GG"),this.text=`Formation: Destroy each other creature with ${this.boof579} or less attack.~Whenever a creature is destroyed, Cyrus gets ${p.jr9(1,1)}.`,this.trigB=this.buffNug(2,2)}ctmR(t,i){g.jr5(t.creatId).buff(1,1)}dfbC(){this.faction="N",this.rarity="R",this.name="Dr. Frankenbaum",this.iAttack=this.boof6914,this.iHealth=this.iAttack-1,this.tribe.push("AB");const t=this.boof234;this.text=`When a friendly Abomination is destroyed, deal ${t} damage to the enemy player.`,this.trigB=this.playerNug(t*2)}dfbD(t,i){const r=g.jr5(t.creatId),s=i.creature;this.friendTribeTest(s,r,"AB")&&k.hurtDirect(!r.owner,this.boof234,this.code)}ggbC(){this.faction="N",this.rarity="H",this.name="Grimgaunt Betrayer",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.tribe.push("DF","GG");const t=-this.level;this.text=`When a friendly Darkforged is destroyed, the creature opposing it gets ${p.jr9(t,t)}.`,this.trigB=this.buffNug(this.level,this.level)}ggbD(t,i){const r=g.jr5(t.creatId),s=i.creature;if(this.friendTribeTest(s,r,"DF")){const c=s.opposed;if(c){const f=-this.level;c.buff(f,f),this.logAct(!1,c)}}}ggdC(){this.faction="N",this.rarity="L",this.name="Grimgaunt Devourer",this.iAttack=this.boof579,this.iHealth=this.iAttack-2,this.tribe.push("GG"),this.hints=["OL"],this.text=`When a creature is destroyed, ${this.name} gets ${p.jr9(this.level,this.level)}.`,this.trigB=this.multNug(this.buffNug(this.level,this.level),2)}ggdD(t,i){g.jr5(t.creatId).buff(this.level,this.level)}get doomb(){return this.lValN([1,1,2])}ggdrC(){this.faction="N",this.rarity="L",this.name="Grimgaunt Doomrider",this.iAttack=this.boof4712,this.iHealth=this.iAttack+2,this.tribe.push("GG");const t=this.doomb;this.text=`When a friendly creature is destroyed, ${this.name} moves to that creatures lane and gets ${p.jr9(t,t)}. Then give the opposing creature ${p.jr9(-t,-t)}.`,this.trigB=this.multNug(this.buffNug(t,t),2)}ggdrD(t,i){const r=g.jr5(t.creatId),s=i.creature;if(s.owner===r.owner&&r.id!==s.id&&Bt.itDiedFirst(s.id,r.id)&&!g.searchByLane(s.lane,s.owner)){const f=this.doomb;r.move(s.lane),r.buff(f,f);const m=r.opposed;m&&(this.logAct(!1,m),m.buff(-f,-f))}}ggpC(){this.faction="N",this.rarity="H",this.name="Grimgaunt Predator",this.iAttack=this.boof5914,this.iHealth=this.iAttack,this.iMobile=1,this.tribe.push("GG"),this.hints=["OP"];const t=this.boof246;this.text=`When the opposing creature is destroyed, ${this.name} gets ${p.jr9(t,t)}.`,this.trigB=this.buffNug(t,t)}ggpD(t,i){if(i.creature.owner!==t.owner){const r=g.jr5(t.creatId),s=g.oppositeLane(r.lane);if(i.creature.lane===s){const c=this.boof246;r.buff(c,c),this.logAct(!1)}}}ggwC(){this.faction="N",this.rarity="H",this.name="Grimgaunt Warrior",this.iAttack=this.boof4710,this.iHealth=this.iAttack+1,this.tribe.push("GG");const t=this.boof234;this.text=`When an adjacent creature is destroyed, ${this.name} gets ${p.jr9(t,t)}.`,this.trigB=this.buffNug(t,t)}ggwD(t,i){if(i.creature.owner===t.owner){const r=g.jr5(t.creatId);if(r.adjacent.includes(i.creature.lane)){const s=this.boof234;r.buff(s,s),this.logAct(!1)}}}mhermC(){this.faction="U",this.rarity="L",this.name="Malice Hermit",this.iAttack=this.boof4812,this.iHealth=this.iAttack,this.tribe.push("YT");const t=this.boof124;this.text=`Forge: Each other creature gets Poison ${t}.~When a creature with Poison is destroyed, ${this.name} gets ${p.jr9(t,t)}.`,this.trigB=this.multNug(this.buffNug(t,t),2)}mhermD(t,i){if(i.creature.poison>0){const r=g.jr5(t.creatId);if(r.status==="A"){const s=this.boof124;this.logAct(!1,i.creature),r.buff(s,s)}}}ngauntC(){this.faction="N",this.rarity="R",this.name="Nightgaunt",this.iAttack=this.boof4815,this.iHealth=this.iAttack+1,this.tribe.push("GG"),this.text=`When a creature is destroyed, ${this.name} gets Regenerate 1.`,this.trigB=this.regnNug(2)}ngauntD(t,i){g.jr5(t.creatId).addRegen(1)}sharvC(){this.faction="N",this.rarity="C",this.name="Sorrow Harvester",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("AB"),this.text="When a friendly Abomination is destroyed on your turn, draw a card.",this.trigB=this.rawNug(0,0,0,0,lt.dcWeight)}sharvD(t,i){const r=i.creature;r.owner===t.owner&&r.isTribe("AB")&&k.getActiveB()===t.owner&&Bt.itDiedFirst(r.id,t.creatId)&&(this.logAct(!1),k.drawCard(t.owner,1))}sprC(){this.faction="N",this.rarity="R",this.name="Spectral Rider",this.iAttack=this.lValN([6,8,13]),this.iHealth=this.iAttack-1,this.tribe.push("GG"),this.text=`When a friendly creature is destroyed, ${this.name} gets ${p.jr9(1,1)}.`,this.trigB=this.buffNug(2,2)}sprD(t,i){t.owner===i.creature.owner&&g.jr5(t.creatId).buff(1,1)}yuruC(){this.faction="N",this.rarity="L",this.name="Yuru, the Necrosage",this.iAttack=3,this.iHealth=this.iAttack,this.iDefend=!0,this.tribe.push("HM"),this.level===1&&(this.hints=["ZZ-1"]);const t=L.getCard(this.syc());this.text=`When an adjacent non-Spirit creature is destroyed, put a ${p.tokName(t)} into that lane.`,this.trigB=this.spawnNug(t)}yuruD(t,i){const r=g.jr5(t.creatId),s=i.creature;s.owner===r.owner&&r.adjacent.includes(s.lane)&&!s.isTribe("ST")&&Bt.itDiedFirst(s.id,r.id)&&g.birth(this.syc(),"P",r.owner,s.lane)}syc(){return "XYR"+this.level}static itDiedFirst(t,i){if(t===i)return!0;let r=!1;const s=W.findDeathTime(i);if(S.isUn(s))r=!0;else{const c=W.findDeathTime(t);(S.isUn(c)||c<=s)&&(r=!0)}return r}}class tr extends Bt{get formation(){return!0}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FM"),r}jr8(t){if(t.trigger.type==="FM"){const i=y.crNotMeTarg(t.creatId);i.maxAttack=this.boof579;const r=g.creatByTarget(i);if(r.length>0){const s=M.tick();r.forEach(c=>W.destroy(c,this.code,s))}x.triggerDone()}else super.jr8(t)}}class be extends N{lookup(t){return{["ATP"]:{c:()=>this.phagC(),t:()=>this.phagT(),f:(r,s)=>this.hdiscardF(r,s)},["PLI"]:{c:()=>this.pimpC(),t:()=>this.pimpT(),f:(r,s)=>this.hdiscardF(r,s)},["SSH"]:{c:()=>this.sshmC(),t:()=>this.sshmT(),f:(r,s)=>this.sshmF(r,s)},["TPG"]:{c:()=>this.pillC(),t:()=>this.pillT(),f:(r,s)=>this.pillF(r,s)},["TMG"]:{c:()=>this.grootC(),t:()=>this.grootT(),f:(r,s)=>this.grootF(r,s)},["VIN"]:{c:()=>this.vintC(),t:()=>this.vintT(),f:(r,s)=>{}}}[t]}forgTargets(t){return this.lookup(t).t()}forgAction(t,i,r){this.lookup(t).f(i,r)}optional=!0;ftext="";constructor(t){super(t),this.lookup(this.cardCode()).c(),this.text="Forge: "+this.ftext,this.ftext=""}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");return s.interactive=!0,r}handleAction(t){const i=g.jr5(t.param);this.forgAction(this.cardCode(),t.position,i),bt.popMode(),T.actionDone(!0)}jr8(t){const i=this.cardCode()==="VIN";if(i&&M.aiActive)x.triggerDone();else{const r=this.forgTargets(this.cardCode());if(r.length>0){let s;if(i?s=[]:s=r.map(c=>{const f=y.deckSelectAction("CARD",c.cardCode,c.sourceIdx);return f.param=t.creatId,f.host=this.code,f}),this.optional){const c=T.noneEndTrigger();c.param="PM",s.push(c)}St.showCustomDeck(r,s)}else x.triggerDone()}}hdiscardF(t,i){const r=k.toPlayer(!i.owner),s=r.hand[t];r.hand.splice(t,1),r.discard.push(s)}phagC(){this.faction="U",this.rarity="H",this.name="Aetherphage",this.iAttack=this.lValN([7,10,16]),this.iHealth=this.boof3612,this.tribe.push("IN"),this.ftext=`Look at the ${p.levelGateText(this.level)}spells in the enemy player's hand and choose one. The enemy player discards the chosen spell.`}phagT(){const t=k.toPlayer(!k.getActiveB()),i=y.target("TH");return i.player=k.toTarget(t),i.level=D.ddf2(this.level),i.card="S",St.generateContent(t.hand,!1,i)}pimpC(){this.faction="N",this.rarity="R",this.name="Plunder Imp",this.iAttack=this.boof61016,this.iHealth=this.iAttack-1,this.tribe.push("DM");const t=this.boof369;this.ftext=`Look at the creatures with ${t} or less attack in the enemy player's hand and choose one. The enemy player discards the chosen creature.`}pimpT(){const t=k.toPlayer(!k.getActiveB()),i=y.target("TH");return i.player=k.toTarget(t),i.maxAttack=this.boof369,i.card="C",St.generateContent(t.hand,!1,i)}sshmC(){this.faction="U",this.rarity="H",this.name="Soothsayer Hermit",this.iAttack=this.boof61016,this.iHealth=this.iAttack-1,this.tribe.push("LP");let t="";this.level===3?t="level 3 or lower ":t=p.levelGateText(this.level),this.ftext=`You may put a ${t}creature from your discard pile into your hand.`}sshmT(){const t=k.getActive(),i=y.target("TD");return i.player=k.toTarget(t),i.card="C",this.level===3?i.level="HR":i.level=D.ddf2(this.level),St.generateContent(t.discard,!1,i)}sshmF(t,i){const r=k.toPlayer(i.owner),s=r.discard.splice(t,1);r.hand.push(s[0])}pillC(){this.faction="N",this.rarity="H",this.name="Tomb Pillager",this.iAttack=this.boof5915,this.iHealth=this.iAttack+1,this.tribe.push("ZB"),this.consistent=this.level>1,this.ftext="You may banish a Nekrium card from your discard pile."}pillT(){const t=k.getActive(),i=y.target("TD");return i.player=k.toTarget(t),i.faction="N",St.generateContent(t.discard,!1,i)}pillF(t,i){k.toPlayer(i.owner).discard.splice(t,1)}grootC(){this.faction="U",this.rarity="R",this.name="Toorgmai Guardian",this.iAttack=this.boof4711,this.iHealth=this.iAttack,this.tribe.push("PL");const t=this.boof358;this.ftext=`You may banish a Plant from your discard pile. If you do, ${this.name} gets ${p.jr9(t,t)}.`}grootT(){const t=k.getActive(),i=y.target("TD");return i.player=k.toTarget(t),i.tribe="PL",St.generateContent(t.discard,!1,i)}grootF(t,i){k.toPlayer(i.owner).discard.splice(t,1);const s=this.boof358;i.buff(s,s)}vintC(){this.faction="A",this.rarity="C",this.name="Vault Intruder",this.iAttack=this.lValN([7,12,18]),this.iHealth=this.boof5914,this.tribe.push("RB"),this.ftext="Look at the enemy player's hand."}vintT(){const t=k.toPlayer(!k.getActiveB()),i=y.target("TH");return i.player=k.toTarget(t),St.generateContent(t.hand,!1,i)}}class er extends N{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Darkheart Conjurer",this.iAttack=this.boof4813,this.iHealth=this.boof71116,this.tribe.push("HM"),this.text=`When you play a spell, give a friendly creature Regenerate ${this.boof135}.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("PC");return s.interactive=!0,s.bonus=this.regnNug(this.boof135),r}handleAction(t){const i=g.ddf6(t);this.logAct(!1,i),i.addRegen(this.boof135),T.actionDone(!0)}ddf8(t){return t.event.playerA===t.owner&&L.getCard(t.event.cardCode).type==="S"}jr8(t){const i=y.crFriendActTarg("CARD",this.code,"");i.canRegen=!0;const r=D.toActions(i);r.length===0?x.triggerDone():(r.push(T.noneEndTrigger()),T.ddf5(r))}}class ir extends mt{jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}jr8(t){g.qEnemyCreats().forEach(i=>{i.addPoison(6)}),x.triggerDone()}}class rr extends N{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Demara's Pitguard",this.iAttack=this.boof6914,this.iHealth=this.iAttack+2,this.tribe.push("NG"),this.text=`The opposing creature has Poison ${this.boof248}.`}jr3(t,i){const r=super.jr3(t,i),s=r.addEffect("PS",this.code);return s.area="A",r}enforceEffect(t){const i=t.status==="A",r=g.oppositeLane(t.lane);g.qPlayerCreats(!t.owner).forEach(s=>{s.lane===r&&i?s.addModSafe(y.mod("PN",this.boof248,t.id)):s.removeModSafe(t.id)})}}class sr extends N{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Demonweb Watcher",this.iAttack=this.boof4714,this.iHealth=this.lValN([7,12,18]),this.tribe.push("SP");const i=this.boof246n;this.text=`When an enemy creature with Aggressive deals battle damage, it gets ${p.jr9(i,i)}.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("DM");return s.bonus=this.buffNug(this.level,this.level),r}ddf8(t){const i=$.toDamage(t.event);return i.battle&&i.isCreatSrc&&i.srcCreat.owner!==t.owner&&i.srcCreat.aggressive}jr8(t){const i=$.toDamage(t.event);this.logAct(!1,i.srcCreat);const r=this.boof246n;i.srcCreat.buff(r,r),x.triggerDone()}}class ar extends N{constructor(t){super(t),this.faction="U",this.rarity="T",this.name="Dino Knight",this.iAttack=this.lValN([8,12,18]),this.iHealth=this.iAttack,this.tribe.push("DN"),this.iAggro=!0,this.iBT=!0,this.maxLevel=this.level,this.minLevel=this.level;const i=this.boof357;this.text=`When this ${p.dbdtap()}, heal ${i} damage from each other friendly creature.~Vengeance: Put a level ${this.level} Bron, Wild Tamer into this lane.`}image(t){return this.fixedImage(t)}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("VN");s.bonus=this.buffNug(this.iAttack,this.iHealth);const c=r.jr4("DM");return c.bonus=this.buffNug(0,this.boof357),r}ddf8(t){return t.event.battle&&!t.event.isCreatTarg&&t.event.isCreatSrc&&t.event.srcId===t.creatId}jr8(t){if(t.trigger.type==="VN"){const i=g.jr5(t.creatId);g.birth("BWT"+this.level,"P",i.owner,i.lane),x.triggerDone()}else if(t.trigger.type==="DM"){const i=this.boof357,r=y.crNotMeTarg(t.creatId);r.player=k.toTarget(t.owner),g.creatByTarget(r).forEach(c=>c.heal(i)),x.triggerDone()}}}class nr extends At{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Discordant Strike";const i=-this.boof4610;this.text=`Give an enemy creature ${p.jr9(i,0)}.~Allied Nekrium: Give an enemy creature ${p.jr9(0,i)}.`}playTargets(){const t=super.playTargets(),i=y.crEnemyActTarg("CARD",this.code,"P1");return t.push(i),t}handleAction(t){const i=S.deTil(t.param),r=-this.boof4610,s=g.ddf6(t);i[0]==="P1"?(this.logSpell(s),s.buff(r,0),I.allied("N")?T.ddf5(D.toActions(y.crEnemyActTarg("CARD",this.code,"P2"))):T.spellCast()):(this.logSpell(s),s.buff(0,r),T.spellCast())}}class or extends At{constructor(t){super(t),this.faction="U",this.rarity="R",this.name="Dissolve",this.free=this.level===3,this.level<3&&(this.hints=["LG"]),this.text=`Double the Poison on ${this.level===1?"an":"each"} enemy creature.`}playTargets(){const t=super.playTargets(),i=this.poisTarg();return this.level===1?t.push(i):g.creatByTarget(i).length>0&&t.push(D.boardTarget("CARD",this.code)),t}handleAction(t){if(this.level===1){const i=g.ddf6(t);this.logSpell(i),i.addPoison(i.poison)}else this.logSpell(),g.creatByTarget(this.poisTarg()).forEach(r=>{r.addPoison(r.poison)});T.spellCast()}poisTarg(){const t=y.crEnemyActTarg("CARD",this.code,"");return t.hasPoison=!0,t}}class hr extends N{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Doppelbot",this.iAttack=this.boof4812,this.iHealth=this.iAttack,this.tribe.push("RB");let i="";const r=this.lValN([0,5,10]);this.level>1&&(i=`, then give it ${p.jr9(r,0)}`),this.text=`Activate: Look at the creatures in the enemy player's hand and choose one. Replace ${this.name} with the chosen creature${i}.`;const s=this.avgCreatureStats();this.bonus={activ8:this.buffNug(r+s[0]-this.iAttack,s[1])}}canActivate(t){return k.toPlayer(!t.owner).hand.some(r=>L.getCard(r).type==="C")}startActivation(t){let i;if(ot.simOn)i=[{cardCode:"VND"+this.level,sourceIdx:0,cardCount:0}];else{const s=k.toPlayer(!k.getActiveB()),c=y.target("TH");c.player=k.toTarget(s),c.card="C",i=St.generateContent(s.hand,!1,c)}const r=i.map(s=>{const c=y.deckSelectAction("CARD",s.cardCode,s.sourceIdx);return c.param=t.id,c.host=this.code,c});St.showCustomDeck(i,r)}handleAction(t){this.logAct(!0);const i=g.jr5(t.param),r=g.birth(t.card,"R",i.owner,i.lane);this.level>1&&r?.buff(this.level===3?10:5,0),bt.popMode(),i.endActivation()}}class lr extends N{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Dread",this.iAttack=this.boof6912,this.iHealth=this.boof234,this.tribe.push("AB"),this.text=`When ${this.name} enters play, it has a 50% chance to get the ability "Vengeance: Spawn a level ${this.level} Dread".`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("EF"),r}ddf8(t){return t.event.creatId===t.creatId}jr8(t){if(t.event.code==="ENT"){if(S.randInt(0,2)===0){const r=$.toEnterField(t.event).creature.jr4("VN");r.changes=!0,r.bonus=this.buffNug(this.iAttack,this.iHealth)}}else g.birth(this.code,"S",t.owner);x.triggerDone()}}class cr extends N{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Dysian Broodqueen",this.iAttack=this.boof248,this.iHealth=this.boof61117,this.tribe.push("NG");const i=L.getCard(this.bfc()),r=`Destroy an enemy ${p.levelGateText(this.level)}creature.`;this.text=`Activate, destroy another friendly creature: ${r}~Allied Uterra: Put a ${p.tokName(i)} into an available lane.`,this.bonus={activ8:this.multNug(this.avgSpawnNug(),.5)}}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");return s.interactive=!0,r}canActivate(t){return this.enemies(t.id).length>0&&this.friends(t.id).length>0}startActivation(t){const i=this.friends(t.id);i.push(T.cancelAction()),T.ddf5(i)}handleAction(t){const i=S.deTil(t.param);if(i[1]==="P1"){const r=g.ddf6(t),s=this.enemies(i[0],r.id);s.push(T.cancelAction()),T.ddf5(s)}else if(i[1]==="P2"){this.logAct(!0);const r=g.jr5(i[0]),s=M.tick(),c=g.jr5(i[2]),f=g.ddf6(t);W.destroy(c,this.code,s),W.destroy(f,this.code,s),r.endActivation()}else g.birth(this.bfc(),"P",t.playerA,t.lane),T.actionDone(!0)}jr8(t){if(I.allied("U")){const i=y.emptyPlayerActTarg("F","CARD",this.code,t.trigger.creatId),r=D.toActions(i);r.length>0?T.ddf5(r):x.triggerDone()}else x.triggerDone()}friends(t){const i=y.crFriendNotMeActTarg("CARD",t,this.code,S.enTil(t,"P1"));return D.toActions(i)}enemies(t,i=""){const r=y.crEnemyActTarg("CARD",this.code,S.enTil(t,"P2",i));return r.level=D.ddf2(this.level),D.toActions(r)}bfc(){return "BRF"+this.level}}class dr extends At{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Dysian Siphon";const i=this.boof357;this.text=`Give an enemy creature ${p.jr9(-i,-i)}.~Allied Uterra: Give a friendly creature ${p.jr9(i,i)}. `}playTargets(){const t=super.playTargets(),i=y.crEnemyActTarg("CARD",this.code,"P1");return t.push(i),t}handleAction(t){const i=S.deTil(t.param),r=this.boof357,s=g.ddf6(t);if(i[0]==="P1"){const c=y.crFriendActTarg("CARD",this.code,S.enTil("P2",s.id)),f=D.toActions(c);I.allied("U")&&f.length>0?(f.push(T.cancelAction()),T.ddf5(f)):(this.logSpell(s),s.buff(-r,-r),T.spellCast())}else{const c=g.jr5(i[1]);this.logSpell(c,s),c.buff(-r,-r),s.buff(r,r),T.spellCast()}}}class ur extends N{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Dysian Sludge",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("OZ");const i=-this.boof135;this.text=`Forge: If you have health over 120, you may put a copy of ${this.name} into another lane.~When this enters play, if you have a Nekrium card in hand, the opposing creathure gets ${p.jr9(i,i)}.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");return s.interactive=!0,s.customCode=r.id,r.jr4("EF"),r}ddf8(t){return t.event.creatId===t.creatId}jr8(t){const i=$.toEnterField(t.event);if(i.forged&&i.creature.id===t.trigger.customCode)if(k.getActive().health>120){const r=y.actionTarget("TF","CARD",this.code,"");r.player="F",r.hint=["FL"],r.lanes=g.laneIdx.filter(c=>c!==i.creature.lane);const s=D.toActions(r);s.push(T.noneEndTrigger()),T.ddf5(s)}else x.triggerDone();else{const r=i.creature.opposed;if(r&&I.allied("N",i.creature.owner)){const s=-this.boof135;r.buff(s,s)}x.triggerDone()}}handleAction(t){g.birth(this.code,"R",t.playerA,t.lane),T.actionDone(!0)}}class fr extends N{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Ebonskull Diabolist",this.iAttack=this.boof137,this.iHealth=this.boof4814,this.tribe.push("VP"),this.text=`Forge: At the start of your next turn, if ${this.name} is in play, you may play an additional card.`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}ddf8(t){return t.event.playerA===t.owner}jr8(t){const i=g.jr5(t.creatId);if(t.trigger.type==="FR"){const r=i.jr4("TS");r.changes=!0,r.bonus=this.avgSpawnNug(),x.triggerDone()}else if(t.event.code==="TRS"){const r=y.trigIdx(i.triggers,t.trigger);r>-1&&i.removeTrigger(i.triggers[r]),I.regularPlays+=1,this.logAct(!1),x.triggerDone()}}}class gr extends N{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Echowisp",this.iAttack=this.lValN([7,8,10]),this.iHealth=this.boof135,this.tribe.push("ST"),this.level===3?this.text="Forge: Put a copy of Echowisp into each available lane.":this.text="Forge: You may put a copy of Echowisp into an adjacent lane."}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");return s.interactive=this.level<3,r}jr8(t){if(this.level<3){const i=g.jr5(t.trigger.creatId),r=y.actionTarget("TF","CARD",this.code,"");r.player="F",r.lanes=i.adjacent,r.hint=["FL"];const s=D.toActions(r);s.push(T.noneEndTrigger()),T.ddf5(s)}else{const i=y.emptyPlayerActTarg("F","CARD",this.code,t.trigger.creatId);let r=D.toActions(i);if(r.length>0){const s=M.tick();r.forEach(c=>g.birth(this.code,"P",c.playerA,c.lane,s))}x.triggerDone()}}handleAction(t){g.birth(this.code,"P",t.playerA,t.lane),T.actionDone(!0)}}class ni extends N{lookup(t){return{["BTB"]:{c:()=>this.bbtC(),m:r=>this.bbtM(r)},["TVG"]:{c:()=>this.tvgC(),m:r=>this.tvgM(r)}}[t]}createMods(t,i){return this.lookup(t).m(i)}armThreshold=1;wipe=!1;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const r=super.jr3(t,i),s=r.addEffect("AR",this.code);return s.area="A",r}enforceEffect(t){this.armThreshold<=t.armor?this.createMods(this.cardCode(),t).forEach(i=>{this.wipe&&t.removeModSafe(t.id),t.addModSafe(i)}):t.removeModSafe(t.id)}bbtC(){this.faction="A",this.rarity="R",this.name="Batterbot",this.iAttack=this.boof6914,this.iHealth=this.iAttack+2,this.tribe.push("RB","DN"),this.wipe=!0,this.text=`${this.name} gets +Attack equal to its Armor.`}bbtM(t){return[y.mod("AT",t.armor,t.id)]}tvgC(){this.faction="A",this.rarity="R",this.name="Tower Vanguard",this.iAttack=this.lValN([3,6,11]),this.iHealth=this.lValN([7,13,21]),this.tribe.push("RB");const t=this.boof247;this.text=`While ${this.name} has Armor, it gets ${p.jr9(t,0)}.`}tvgM(t){return[y.mod("AT",this.boof247,t.id)]}}class Ce extends N{lookup(t){return{["CIN"]:{c:()=>this.cyinC(),m:r=>this.cyinM(r)},["HWM"]:{c:()=>this.hlwmC(),m:r=>this.hlwmM(r)},["LSP"]:{c:()=>this.lspC(),m:r=>this.lspM(r)},["SSI"]:{c:()=>this.ssinC(),m:r=>this.ssinM(r)},["WTA"]:{c:()=>this.weguC(),m:r=>this.weguM(r)}}[t]}createMods(t,i){return this.lookup(t).m(i)}attThreshold=0;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const r=super.jr3(t,i);return r.addEffect("AT",this.code),r}enforceEffect(t){this.attThreshold<=t.attack?this.createMods(this.cardCode(),t).forEach(i=>{t.addModSafe(i)}):t.removeModSafe(t.id)}cyinC(){this.faction="A",this.rarity="R",this.name="Cypien Infiltrator",this.iAttack=this.boof61117,this.iHealth=this.iAttack-1,this.tribe.push("HM"),this.attThreshold=this.lValN([7,14,21]),this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets Breakthrough.`}cyinM(t){return[y.mod("BT",!0,t.id)]}hlwmC(){this.faction="A",this.rarity="L",this.name="Hinterland Watchman",this.iAttack=this.lValN([4,7,15]),this.iHealth=this.lValN([7,10,20]),this.tribe.push("MC"),this.attThreshold=this.boof51020;const t=this.lValS(["Mobility 3","Armor 5 and Mobility 3","Armor 5, Breakthrough, Aggressive, Mobility 3, and Regenerate 5"]);this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets ${t}.`}hlwmM(t){const i=[y.mod("MB",3,t.id)];return this.level>1&&i.push(y.mod("AR",5,t.id)),this.level===3&&(i.push(y.mod("BT",!0,t.id)),i.push(y.mod("AG",!0,t.id)),i.push(y.mod("RG",5,t.id))),i}lspC(){this.faction="A",this.rarity="C",this.name="Lightshield Patrol",this.iAttack=this.lValN([4,7,15]),this.iHealth=this.boof51020,this.tribe.push("HM"),this.attThreshold=this.iHealth,this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets Armor ${this.boof234}.`}lspM(t){return[y.mod("AR",this.boof234,t.id)]}ssinC(){this.faction="A",this.rarity="R",this.name="Spiritsteel Infiltrator",this.iAttack=this.boof4815,this.iHealth=this.iAttack+3,this.tribe.push("EN"),this.attThreshold=this.boof51020,this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets Mobility ${this.level} and Armor ${this.boof246}.`}ssinM(t){return[y.mod("MB",this.level,t.id),y.mod("AR",this.boof246,t.id)]}weguC(){this.faction="U",this.rarity="L",this.name="Wegu, the Ancient",this.iAttack=0,this.iHealth=1,this.tribe.push("PL"),this.iDefend=!0,this.attThreshold=this.lValN([10,25,100]);const t=this.boof124,i=this.level===3?"it gets Breakthrough and ":"";this.text=`When you gain health, Wegu gets ${p.jr9(t,t)} for each health you gained.~While Wegu has ${this.attThreshold} or more attack, ${i}Negate Defender from it.`}weguM(t){const i=[y.mod("ND",!0,t.id)];return this.level===3&&i.push(y.mod("BT",!0,t.id)),i}}class oi extends N{friendNotMe(t){const i=y.crNotMeTarg(t.id);return i.player=k.toTarget(t.owner),i}friendNone(t){const i=y.crTarg();return i.player=k.toTarget(t.owner),i.lanes=[],i}jr3(t,i){const r=super.jr3(t,i),s=r.addEffect("PS",this.code);return s.area="C",r}enforcementActive(t){return t.status==="A"}applyEffect(t,i,r){const s=this.friendNotMe(t),c=g.creatByTarget(s),f=g.creatByTarget(r);c.forEach(m=>{f.includes(m)?m.addModSafe(i):m.removeModSafe(t.id)})}}class oe extends oi{lookup(t){return{["BWW"]:{c:()=>this.bwwC(),m:r=>this.bwwM(r),t:r=>this.friendNotMe(r)},["HTR"]:{c:()=>this.hrtC(),m:r=>this.hrtM(r),t:r=>this.friendNotMe(r)},["KKK"]:{c:()=>this.kkkC(),m:r=>this.kkkM(r),t:r=>this.kkkT(r)},["LVG"]:{c:()=>this.lvgC(),m:r=>this.lvgM(r),t:r=>this.friendNotMe(r)},["LTT"]:{c:()=>this.lntC(),m:r=>this.lntM(r),t:r=>this.friendNotMe(r)},["SFE"]:{c:()=>this.sfeC(),m:r=>this.sfeM(r),t:r=>this.sfeT(r)},["TCN"]:{c:()=>this.tcanC(),m:r=>this.tcanM(r),t:r=>this.tcanT(r)},["XDV"]:{c:()=>this.xdvC(),m:r=>this.xdvM(r),t:r=>this.xdvT(r)}}[t]}createMod(t,i){return this.lookup(t).m(i)}effTargs(t,i){return this.lookup(t).t(i)}constructor(t){super(t),this.lookup(this.cardCode()).c()}enforceEffect(t){const i=this.cardCode(),r=this.createMod(i,t),s=this.enforcementActive(t)?this.effTargs(i,t):this.friendNone(t);this.applyEffect(t,r,s)}bwwC(){this.faction="T",this.rarity="H",this.name="Borean Windweaver",this.iAttack=this.boof6914,this.iHealth=this.iAttack-1,this.iMobile=this.level,this.tribe.push("WN","AS"),this.text=`Each other friendly creature gets Mobility ${this.level}.`}bwwM(t){return y.mod("MB",this.level,t.id)}hrtC(){this.faction="U",this.rarity="L",this.name="Heart Tree",this.iAttack=0,this.iHealth=this.lValN([10,15,30]),this.iRegen=this.boof246,this.iDefend=!0,this.tribe.push("PL"),this.text=`Each other friendly creature gets Regenerate ${this.iRegen}.`}hrtM(t){return y.mod("RG",this.iRegen,t.id)}kkkC(){if(this.faction="T",this.rarity="L",this.name="Korok, Khan of Kadras",this.iAttack=this.lValN([4,7,12,18]),this.iHealth=this.lValN([7,12,18,26]),this.iAggro=!0,this.tribe.push("FB"),this.maxLevel=4,this.level>1){const t=this.lValS(["","friendly level 1","friendly level 2 or lower","other friendly"]);this.text=`Each ${t} creature gets Aggressive.`}}kkkM(t){return y.mod("AG",!0,t.id)}kkkT(t){const i=this.friendNotMe(t);return this.level===1?i.lanes=[]:i.level=D.ddf2(this.level-1),i}lvgC(){this.faction="T",this.rarity="T",this.name="Lava Golem",this.iAttack=4,this.iHealth=6,this.maxLevel=1,this.tribe.push("FR","EL"),this.text=`Friendly creature have ${p.jr9(4,0)}.`}lvgM(t){return y.mod("AT",4,t.id)}lntC(){this.faction="T",this.rarity="T",this.name="Lightning Titan",this.iAttack=6,this.iHealth=4,this.maxLevel=1,this.tribe.push("LT","EL"),this.text="Friendly creature have Aggressive."}lntM(t){return y.mod("AG",!0,t.id)}sfeC(){this.faction="T",this.rarity="H",this.name="Shadowflame Elemental",this.iAttack=this.boof4814,this.iHealth=this.iAttack,this.iAggro=!0,this.tribe.push("DF","EL"),this.text="Each other friendly Darkforged gets Aggressive."}sfeM(t){return y.mod("AG",!0,t.id)}sfeT(t){const i=this.friendNotMe(t);return i.tribe="DF",i}tcanC(){this.faction="A",this.rarity="C",this.name="Tower Cannoneer",this.iAttack=this.lValN([6,12,14]),this.iHealth=this.iAttack-2,this.tribe.push("RB"),this.level===2&&(this.hints=["LB"]),this.text=`Each friendly Defender gets ${p.jr9(this.boof369,0)}`}tcanM(t){return y.mod("AT",this.boof369,t.id)}tcanT(t){const i=this.friendNotMe(t);return i.hasDefender=!0,i}xdvC(){this.faction="N",this.rarity="H",this.name="Xrath, Dreadnight Of Varna",this.iAttack=this.boof5914,this.iHealth=this.iAttack+1,this.iRegen=this.boof248,this.tribe.push("ZB"),this.text=`Each other friendly Zombie gets Regenerate ${this.iRegen}`}xdvM(t){return y.mod("RG",this.iRegen,t.id)}xdvT(t){const i=this.friendNotMe(t);return i.tribe="ZB",i}}class hi extends N{lookup(t){return{["NXP"]:{c:()=>this.nxpC(),m:r=>this.nxpM(r)},["SKG"]:{c:()=>this.skgC(),m:r=>this.skgM(r)}}[t]}createMods(t,i){return this.lookup(t).m(i)}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const r=super.jr3(t,i),s=r.addEffect("PS",this.code);return s.area="C",r}enforceEffect(t){t.lane===3?this.createMods(this.cardCode(),t).forEach(i=>{t.addModSafe(i)}):t.removeModSafe(t.id)}nxpC(){this.faction="A",this.rarity="C",this.name="Nexus Pilot",this.iAttack=this.boof358,this.iHealth=this.boof4710,this.tribe.push("HM"),this.text=`While ${this.name} is in the center lane, it gets ${p.jr9(this.iAttack,this.iHealth)}.`}nxpM(t){return[y.mod("AT",this.iAttack,t.id),y.mod("HL",this.iHealth,t.id),y.mod("MH",this.iHealth,t.id)]}skgC(){this.faction="A",this.rarity="C",this.name="Skyknight Glider",this.iAttack=this.boof5916,this.iHealth=this.iAttack+1,this.tribe.push("HM"),this.text=`While ${this.name} is in the center lane, it gets Mobility 2.`}skgM(t){return[y.mod("MB",2,t.id)]}}class Ie extends N{lookup(t){return{["CCT"]:{c:()=>this.cctC(),m:r=>this.cctM(r)},["GHB"]:{c:()=>this.ghbC(),m:r=>this.ghbM(r)},["ISB"]:{c:()=>this.isbC(),m:r=>this.isbM(r)},["PYG"]:{c:()=>this.pygC(),m:r=>this.pygM(r)}}[t]}createMods(t,i){return this.lookup(t).m(i)}eOpp=!1;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const r=super.jr3(t,i),s=r.addEffect("PS",this.code);return s.area="A",r}enforceEffect(t){!!t.opposed===this.eOpp?this.createMods(this.cardCode(),t).forEach(i=>{t.addModSafe(i)}):t.removeModSafe(t.id)}cctC(){this.faction="T",this.rarity="R",this.name="Cloudcleaver Titan",this.iAttack=this.boof4812,this.iHealth=this.lValN([7,10,16]),this.tribe.push("WN","GT"),this.iMobile=this.level;const t=this.boof246;this.text=`While ${this.name} is unopposed, it gets ${p.jr9(t,0)}.`}cctM(t){return[y.mod("AT",this.boof246,t.id)]}ghbC(){this.faction="U",this.rarity="R",this.name="Gemhide Basher",this.iAttack=this.lValN([5,10,16]),this.iHealth=this.lValN([3,7,10]),this.tribe.push("DN"),this.eOpp=!0,this.text=`While ${this.name} is opposed, it gets Aggressive.`}ghbM(t){return[y.mod("AG",!0,t.id)]}isbC(){this.faction="T",this.rarity="C",this.name="Iceshard Berserker",this.iAttack=this.boof358,this.iHealth=this.boof61016,this.tribe.push("IC","AS"),this.eOpp=!0,this.text=`While ${this.name} is opposed, it gets ${p.jr9(this.iHealth,0)}.`}isbM(t){return[y.mod("AT",this.iHealth,t.id)]}pygC(){this.faction="T",this.rarity="H",this.name="Pyre Giant",this.iAttack=this.boof468,this.iHealth=this.boof234,this.tribe.push("FR","GT"),this.iAggro=!0,this.text=`While ${this.name} is unopposed, it gets ${p.jr9(this.iAttack,0)}.`}pygM(t){return[y.mod("AT",this.iAttack,t.id)]}}class li extends N{lookup(t){return{["BRS"]:{c:()=>this.barryC(),m:r=>this.barryM(r)},["CSR"]:{c:()=>this.cvsC(),m:r=>this.cvsM(r)}}[t]}mPlayer=0;targetPlayer(t){if(this.mPlayer===1)return t.owner;if(this.mPlayer===-1)return!t.owner;throw new Error("didnt write code OBDD")}createMod(t,i){return this.lookup(t).m(i)}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const r=super.jr3(t,i),s=r.addEffect("PS",this.code);return s.area="C",r}enforceEffect(t){const i=t.status==="A",r=this.targetPlayer(t);if(i){const s=this.createMod(this.cardCode(),t);k.addModSafe(r,s)}else k.removeModSafe(r,t.id)}barryC(){this.faction="A",this.rarity="C",this.name="Barrier Soldier",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("HM"),this.mPlayer=1,this.hints=[this.lValH(["ZZ-1","ZZ-3","ZZ-5"])],this.text=`You get Armor ${this.iHealth}.`}barryM(t){return y.mod("AR",this.iHealth,t.id)}cvsC(){this.faction="U",this.rarity="C",this.name="Cavern Serpent",this.iAttack=this.boof4914,this.iHealth=this.iAttack,this.tribe.push("SN"),this.mPlayer=-1,this.text=`The enemy player has Poison ${this.boof246}.`}cvsM(t){return y.mod("PN",this.boof246,t.id)}}class we extends oi{lookup(t){return{["ALG"]:{c:()=>this.algnC(),m:r=>this.algnM(r)},["ALS"]:{c:()=>this.alstC(),m:r=>this.alstM(r)},["BTN"]:{c:()=>this.btcC(),m:r=>this.btcM(r)},["NXA"]:{c:()=>this.aeroC(),m:r=>this.aeroM(r)},["NXT"]:{c:()=>this.ntcC(),m:r=>this.ntcM(r)}}[t]}createMod(t,i){return this.lookup(t).m(i)}constructor(t){super(t),this.lookup(this.cardCode()).c()}nexus=!1;enforcementActive(t){return super.enforcementActive(t)?this.nexus?t.lane===3:!0:!1}enforceEffect(t){const i=this.cardCode(),r=this.createMod(i,t);let s;this.enforcementActive(t)?(s=this.friendNotMe(t),this.nexus?s.lanes=[1,2,4,5]:s.lanes=t.adjacent):s=this.friendNone(t),this.applyEffect(t,r,s)}algnC(){this.faction="A",this.rarity="R",this.name="Alloyin General",this.iAttack=this.boof246,this.iHealth=this.boof81318,this.tribe.push("HM"),this.text=`Adjacent creatures gets ${p.jr9(this.iAttack,0)}.`}algnM(t){return y.mod("AT",this.iAttack,t.id)}alstC(){this.faction="A",this.rarity="H",this.name="Alloyin Strategist",this.iAttack=this.boof4814,this.iHealth=this.iAttack+1,this.iMobile=this.level,this.tribe.push("HM");const t=this.boof246;this.text=`Adjacent creatures gets ${p.jr9(t,0)}.`}alstM(t){return y.mod("AT",this.boof246,t.id)}btcC(){this.faction="A",this.rarity="H",this.name="Battle Techtician",this.iAttack=this.boof3714,this.iHealth=this.boof71117,this.tribe.push("HM"),this.nexus=!0;const t=this.boof248;this.text=`While ${this.name} is in the center lane, each other friendly creature gets ${p.jr9(t,0)}.`}btcM(t){return y.mod("AT",this.boof248,t.id)}aeroC(){this.faction="A",this.rarity="L",this.name="Nexus Aeronaut",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("HM"),this.iMobile=1;const t=this.boof236;this.nexus=!0,this.text=`While ${this.name} is in the center lane, each other friendly creature gets ${p.jr9(t,0)}. Otherwise this gets Armor ${t}.`}aeroM(t){return y.mod("AT",this.boof236,t.id)}ntcC(){this.faction="A",this.rarity="H",this.name="Nexus Techtician",this.iHealth=this.boof6916,this.iAttack=this.iHealth-3,this.tribe.push("HM"),this.nexus=!0;const t=this.boof235;this.text=`While ${this.name} is in the center lane, each other friendly creature gets Armor ${t}.`}ntcM(t){return y.mod("AR",this.boof235,t.id)}}class Ae extends N{cardConstruct(t){({["BWD"]:()=>this.bwdC(),["BTS"]:()=>this.btsC(),["ESC"]:()=>this.escarC(),["EHN"]:()=>this.ethhC(),["POD"]:()=>this.podC(),["RWC"]:()=>this.roamC()})[t]()}targAction(t){g.birth(this.spawnCode,"R",t.playerA,t.lane)}adjacent=!1;optional=!1;needsEmpty=!1;spawnCode="";ftext="";allied="X";constructor(t){super(t),this.cardConstruct(this.cardCode());const i=p.forglied(this.allied);this.text=i+": "+this.ftext}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");return s.interactive=!0,r}jr8(t){if(this.cardCode()==="POD"&&!I.patron("U")){x.triggerDone();return}if(this.allied==="X"||I.allied(this.allied)){const i=g.jr5(t.creatId),r=y.emptyPlayerActTarg("F","CARD",this.code,t.creatId);this.needsEmpty||(r.field="A",r.hint=["FL"],r.lanes=g.laneIdx.filter(c=>c!==i.lane)),this.adjacent&&(r.lanes=i.adjacent);const s=D.toActions(r);s.length>0?(this.optional&&s.push(T.noneEndTrigger()),T.ddf5(s)):x.triggerDone()}else x.triggerDone()}handleAction(t){this.targAction(t),T.actionDone(!0)}bwdC(){this.faction="U",this.rarity="C",this.name="Branchweaver Druid",this.iAttack=1,this.iHealth=1,this.tribe.push("HM"),this.hints=["RT"],this.spawnCode=`${"TFD"}${this.level}`,this.optional=!0;const t=L.getCard(this.spawnCode);this.ftext=`You may put a ${p.tokName(t)} into another lane.`}btsC(){this.faction="U",this.rarity="C",this.name="Brighttusk Sower",this.iAttack=this.lValN([6,8,10]),this.iHealth=this.iAttack,this.tribe.push("TK"),this.level===1&&(this.hints=["ZZ-1"]),this.spawnCode=Z.minionCode(this.level),this.optional=!0,this.adjacent=!0;const t=L.getCard(this.spawnCode);this.ftext=`You may put a ${p.tokName(t)} into an adjacent lane.`}escarC(){this.faction="A",this.rarity="H",this.name="Esperian Scarab",this.iAttack=this.lValN([3,4,7]),this.iHealth=this.boof5711,this.iArmor=this.boof135,this.tribe.push("RB"),this.allied="U",this.spawnCode=this.code,this.optional=!0,this.ftext=`You may but a copy of ${this.name} into another lane.`}ethhC(){this.faction="U",this.rarity="C",this.name="Ether Hounds",this.iAttack=this.boof369,this.iHealth=this.iAttack,this.tribe.push("ST"),this.needsEmpty=!0,this.spawnCode=this.code,this.ftext="Put a copy of this into an available lane."}podC(){this.faction="U",this.rarity="H",this.name="Patron of Deepwood",this.iHealth=this.boof4713,this.iAttack=this.iHealth+3,this.tribe.push("ST"),this.spawnCode=this.code,this.optional=!0,this.adjacent=!0,this.ftext=`If you have three or more Uterra cards in your hand, you may put a copy of ${this.name} into an adjacent lane.`}roamC(){this.faction="U",this.rarity="C",this.name="Roaming Warclaw",this.iAttack=this.boof61016,this.iHealth=this.iAttack-3,this.tribe.push("DN"),this.spawnCode=`${"RPT"}${this.level}`,this.optional=!0,this.ftext="You may put a 1/1 Raptor into another lane."}}class mr extends N{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Epoch Hawk",this.iAttack=this.boof469,this.iHealth=this.boof71117,this.tribe.push("MC");const i=L.getCard(this.soldier);this.addSp("N",i.iAttack),this.text=`While you have 6 or more cards in hand, this gets "Activate: Put a ${p.tokName(i)} into an available lane."`,this.bonus={activ8:this.multNug(this.spawnNug(i),.3)}}canActivate(t){return k.toPlayer(t.owner).hand.length>5&&g.emptyLanes(t.owner).length>0}startActivation(t){const i=y.emptyPlayerActTarg(t.owner,"CARD",this.code,t.id),r=D.toActions(i);r.push(T.cancelAction()),T.ddf5(r)}handleAction(t){const i=g.jr5(t.param);this.logAct(!0),g.birth(this.soldier,"P",t.playerA,t.lane),i.endActivation()}ddf8(t){return!0}jr8(t){const i=k.toPlayer(t.owner);k.drawCard(i,1);const r=y.trigIdx(i.triggers,t.trigger);r>-1&&i.triggers.splice(r,1),x.triggerDone()}get soldier(){return "EPS"+this.level}}class pr extends N{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Esperian Sage",this.iAttack=this.boof3510,this.iHealth=this.boof124,this.tribe.push("HM"),this.text=`When ${this.name} enters play, discard and level up a card.~Allied Uterra: You may put a copy of this into another lane.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");s.interactive=!0;const c=r.jr4("EF");return c.interactive=!0,r}handleAction(t){if(t.zone==="H")I.levelAndDiscardA(t);else{const i=t;g.birth(this.code,"R",i.playerA,i.lane)}T.actionDone(!0)}ddf8(t){return t.event.creatId===t.creatId}jr8(t){if(t.trigger.type==="FR")if(I.allied("U")){const i=g.jr5(t.creatId),r=y.actionTarget("TF","CARD",this.code,t.creatId);r.player="F",r.lanes=g.laneIdx.filter(c=>c!==i.lane),r.hint=["FL"];const s=D.toActions(r);s.push(T.noneEndTrigger()),T.ddf5(s)}else x.triggerDone();else{const i=y.lvlHandActTarg(this.code,t.creatId),r=D.toActions(i);r.length>0?T.ddf5(r):x.triggerDone()}}}class yr extends N{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Esperian Steelplate",this.iAttack=this.boof369,this.iHealth=this.boof6916,this.tribe.push("IN");const i=this.boof358;this.addSp("H",i),this.text=`Activate: Heal ${i} damage from each other friendly creature.~Allied Alloyin: Armor ${this.boof247}.`,this.bonus={activ8:this.buffNug(0,i)}}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}canActivate(t){const i=y.crFriendNotMeTarg(t.id);return g.creatByTarget(i).length>0}startActivation(t){const i=D.boardTarget("CARD",this.code);i.param=t.id,T.ddf5(D.toActions([i,D.buttonTarget("CANC")]))}handleAction(t){this.logAct(!0);const i=g.jr5(t.param),r=this.boof358,s=y.crFriendNotMeTarg(i.id);g.creatByTarget(s).forEach(c=>{c.heal(r)}),i.endActivation()}jr8(t){I.allied("A")&&g.jr5(t.creatId).addArmor(this.boof247),x.triggerDone()}}class br extends N{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Everflame Phoenix",this.iAttack=this.lValN([7,0,22]),this.iHealth=this.lValN([6,1,15]),this.tribe.push("PX"),this.iMobile=this.lValN([1,0,2]),this.level===2?(this.iDefend=!0,this.text=`When you gain a rank, replace ${this.name} with a level 3 ${this.name}.`,this.hints=["RH","LG"]):this.level===3&&(this.text=`Vengeance: Put a level 2 ${this.name} into this lane.`,this.hints=["ZZ-3"])}jr3(t,i){const r=super.jr3(t,i);if(this.level===2){const s=r.jr4("RU");s.bonus=this.buffNug(10,9)}else if(this.level===3){const s=r.jr4("VN");s.bonus=this.statSpawnNug(0,1)}return r}ddf8(t){return t.event.playerA===t.owner}jr8(t){if(t.trigger.type==="RU"){const i=g.jr5(t.creatId);g.birth(`${"EFP"}3`,"R",i.owner,i.lane)}else if(t.trigger.type==="VN"){const r=$.toCreature(t.event).creature;g.birth(`${"EFP"}2`,"P",r.owner,r.lane)}x.triggerDone()}}class Ar extends N{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Everflow Eidolon",this.iAttack=this.boof61016,this.iHealth=this.iAttack,this.tribe.push("PL"),this.text=`When ${this.name} gains health, you gain ${this.level===3?"2x ":""}that much health.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("HG");return s.bonus=this.playerNug(this.iHealth/2),r}ddf8(t){return t.event.creatId===t.creatId}jr8(t){const i=this.level===3?2:1;k.heal(t.owner,t.event.healAmt*i,this.code),x.triggerDone()}}class kr extends N{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Frostmane Dragon",this.iAttack=this.lValN([6,9,13]),this.iHealth=this.iAttack+1,this.tribe.push("IC","DG"),this.iMobile=2,this.text=`At the start of your turn, if ${this.name} was Forged last turn, you may put a Level ${this.level} Frostmane egg into an available lane.`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}handleAction(t){g.birth(`${"FME"}${this.level}`,"P",t.playerA,t.lane),T.actionDone(!0)}ddf8(t){return t.event.playerA===t.owner}jr8(t){const i=g.jr5(t.creatId);if(t.event.code==="ENT"){const r=i.jr4("TS");r.interactive=!0,r.changes=!0,r.bonus=this.rawNug(1,0,6,0),x.triggerDone()}else if(t.event.code==="TRS"){const r=y.trigIdx(i.triggers,t.trigger);r>-1&&i.removeTrigger(i.triggers[r]);const s=y.emptyPlayerActTarg("F","CARD",this.code,""),c=D.toActions(s);c.length===0?x.triggerDone():(c.push(T.noneEndTrigger()),T.ddf5(c))}}}class vr extends At{constructor(t){super(t),this.faction="T",this.rarity="C",this.name="Frostshatter Strike";const i=this.boof4711;this.text=`Deal ${i} damage to an enemy creature.~Give a friendly creature ${p.jr9(i,0)} this turn.`}playTargets(){const t=super.playTargets();return this.friends().length>0&&t.push(y.crEnemyActTarg("CARD",this.code,"P1")),t}handleAction(t){const i=S.deTil(t.param),r=g.ddf6(t);if(i[0]==="P1"){const s=this.friends(r.id);s.push(T.cancelAction()),T.ddf5(s)}else{this.logSpell(r);const s=g.jr5(i[1]),c=this.boof4711;s.hurtDirect(c,this.code),r.addMod(y.modT("AT",c)),T.spellCast()}}friends(t=""){const i=y.crFriendActTarg("CARD",this.code,S.enTil("P2",t));return D.toActions(i)}}class Tr extends N{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Frostspeaker Shaman",this.iAttack=this.boof248,this.iHealth=this.boof71116,this.iDefend=!0,this.tribe.push("IC","YT"),this.addSp("D",this.iAttack),this.text=`Activate: Deal ${this.iAttack} damage to an enemy creature or player.`,this.bonus={activ8:this.buffNug(this.iAttack,0)}}canActivate(t){return!0}startActivation(t){const i=y.crEnemyActTarg("CARD",this.code,t.id),r=y.playerActTarg("E","CARD",this.code,t.id),s=D.toActions([i,r]);s.push(T.cancelAction()),T.ddf5(s)}handleAction(t){if(t.zone==="F"){const r=g.ddf6(t);this.logAct(!0,r),r.hurtDirect(this.iAttack,this.code)}else{this.logAct(!0);const r=t;k.hurtDirect(r.playerA,this.iAttack,this.code)}g.jr5(t.param).endActivation()}}class Sr extends At{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Gauntlets of Sulgrim";const i=this.boof2510;this.text=`Give a friendly creature Armor ${i}, then deal damage equal to its Armor to an enemy creature.`}playTargets(){const t=super.playTargets();if(this.baddies().length>0){const i=y.crFriendActTarg("CARD",this.code,"P1");i.canArmor=!0,t.push(i)}return t}handleAction(t){const i=S.deTil(t.param),r=g.ddf6(t);if(i[0]==="P1"){const s=T.cancelAction(),c=this.baddies(r.id);c.push(s),T.ddf5(c)}else{const s=g.jr5(i[1]);this.logSpell(s);const c=this.boof2510;s.addArmor(c),r.hurtDirect(s.armor,this.code),T.spellCast()}}baddies(t=""){return D.toActions(y.crEnemyActTarg("CARD",this.code,S.enTil("P2",t)))}}class Cr extends N{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Gemhide Ravager",this.iAttack=this.boof5915,this.iHealth=this.iAttack+1,this.tribe.push("DN"),this.text=`When ${this.name} ${p.dbdtap()}, you gain that much health.~Allied Tempys: Mobility ${this.level}.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("FR");const s=r.jr4("DM");return s.bonus=this.playerNug(this.iAttack),r}ddf8(t){return t.event.battle&&!t.event.isCreatTarg&&t.event.isCreatSrc&&t.event.srcId===t.creatId}jr8(t){if(t.trigger.type==="FR")I.allied("T")&&g.jr5(t.creatId).addMobility(this.level),x.triggerDone();else if(t.trigger.type==="DM"){const i=t.event;k.heal(t.owner,i.dmg,this.code),x.triggerDone()}}}class wr extends N{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Glaceus, Tundra Tyrant",this.iAttack=this.boof5916,this.iHealth=this.iAttack+2,this.tribe.push("IC","EL"),this.hints=["TL"];const i=`Gain Rank: each enemy ${p.levelGateText(this.level)}creature gets "When this is dealt damage, destroy it."`,r=this.level===3?"At the start of each turn, deal 1 damage to each enemy creature.~":"";this.text=r+i}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("RU");if(s.bonus=this.statSpawnNug(0,0),this.level===3){const c=r.jr4("TS");c.bonus=this.buffNug(3,0)}return r}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;if(i.isCreatTarg&&i.target===t.creatId)return!0}return t.trigger.type==="RU"?t.event.playerA===t.owner:t.trigger.type==="TS"}jr8(t){if(t.trigger.type==="RU"){const i=y.crEnemyTarg();i.level=D.ddf2(this.level),g.creatByTarget(i).forEach(r=>{const s=r.jr4("DM");s.bonus=this.rawNug(0,0,0,0,-2),s.changes=!0})}else if(t.trigger.type==="TS"){const i=M.tick();g.qEnemyCreats().forEach(r=>{r.hurtDirect(1,this.code,i)})}else if(t.trigger.type==="DM"){const i=g.jr5(t.creatId);i.status==="A"&&W.destroy(i,this.code)}x.triggerDone()}}class Dr extends N{constructor(t){super(t),this.faction="U",this.rarity="C",this.name="Grapplevine",this.iAttack=this.boof357,this.iHealth=this.lValN([9,12,18]),this.tribe.push("PL"),this.text="Negate Mobility from each creature.",this.level===3&&(this.hints=["ZZ+2"])}jr3(t,i){const r=super.jr3(t,i),s=r.addEffect("PS",this.code);return s.area="A",r}enforceEffect(t){const i=g.qActiveCreats();t.status==="A"?i.forEach(r=>{r.addModSafe(y.mod("NM",!0,t.id))}):i.forEach(r=>{r.removeModSafe(t.id)})}}class xr extends At{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Grave Pact",this.free=this.level===3,this.text=`Destroy a friendly creature.~Destroy an ${p.levelGateText(this.level+1)}enemy creature.`}playTargets(){const t=super.playTargets();if(this.enemyTargActions().length>0){const i=y.crFriendActTarg("CARD",this.code,"P1");t.push(i)}return t}handleAction(t){const i=S.deTil(t.param),r=g.ddf6(t);if(i[0]==="P1"){const s=this.enemyTargActions(r.id);s.push(T.cancelAction()),T.ddf5(s)}else{this.logSpell();const s=g.jr5(i[1]),c=M.tick();W.destroy(s,this.code,c),W.destroy(r,this.code,c),T.spellCast()}}enemyTargActions(t=""){const i=y.crEnemyActTarg("CARD",this.code,S.enTil("P2",t));return i.level=D.ddf2(this.level+1),D.toActions(i)}}class Hr extends N{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="G.S.F. Commando",this.iAttack=this.lValN([3,6,11]),this.iHealth=this.lValN([8,12,19]),this.iArmor=this.level,this.tribe.push("MM"),this.text=`Forge: ${this.name} gets Armor 1 for each other friendly Metamind.~Activate: Deal damage equal to ${this.level}x ${this.name}'s Armor to an enemy creature.`,this.bonus={activ8:this.buffNug(0,2*this.level)}}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}canActivate(t){return t.armor>0&&g.qEnemyCreats().length>0}startActivation(t){const i=y.crEnemyActTarg("CARD",this.code,t.id);T.ddf5(D.toActions([i,D.buttonTarget("CANC")]))}handleAction(t){const i=g.jr5(t.param);g.ddf6(t).hurtDirect(i.armor*this.level,this.code),i.endActivation()}jr8(t){const i=y.crFriendNotMeTarg(t.creatId);i.tribe="MM";const r=g.creatByTarget(i).length;r>0&&g.jr5(t.creatId).addArmor(r),x.triggerDone()}}class Br extends At{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Guardians Assemble",this.free=this.level===3;const i=this.level===1?"Put a copy of a random Forge Guardian from your deck":"Search your deck for a Forge Guardian and put a copy";this.text=`${i} into the center lane.`}playTargets(){const t=super.playTargets();if(this.voltrons().length===0)return t;let i;return i=y.actionTarget("TF","CARD",this.code,""),i.player="F",i.lanes=3,this.level>1&&(i.param="P1"),t.push(i),t}voltrons(){const t=k.getActive(),i=y.target("DK");return i.player=k.toTarget(t),i.tribe="GD",St.generateContent(t.deck,!1,i)}tron(t){g.birth(t,"R",k.getActiveB(),3)}handleAction(t){if(this.level===1){const i=this.voltrons(),r=i[S.randInt(0,i.length)].cardCode;this.logSpell(),this.tron(r),T.spellCast()}else if(t.param==="P1"){const i=this.voltrons(),r=i.map(c=>{const f=y.deckSelectAction("CARD",c.cardCode,c.sourceIdx);return f.host=this.code,f}),s=T.cancelAction();s.param="PM",r.push(s),St.showCustomDeck(i,r)}else this.logSpell(),this.tron(t.card),bt.popMode(),T.spellCast()}}class Nr extends N{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="H.E.R.M.E.S.",this.iAttack=this.boof6915,this.iHealth=this.iAttack,this.tribe.push("RB"),this.text=`At the end of your turn, each other friendly creature gets Defender and Armor ${this.boof124} until the end of the next turn.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("TE",this.code);const s=r.addEffect("PS",this.code);return s.area="C",r}ddf8(t){return!0}jr8(t){const i=g.jr5(t.creatId);this.enforceEffect(i),x.triggerDone()}enforceEffect(t){const i=this.boof124,r=y.crNotMeTarg(t.id);r.player=k.toTarget(t.owner);const s=g.creatByTarget(r),c=t.status==="A",f=k.activePlayer===t.owner,m=Et.phase==="ET"||Et.phase==="PT";c&&(f&&m||!f&&!m)?s.forEach(A=>{A.addModSafe(y.mod("AR",i,t.id)),A.addModSafe(y.mod("DF",!0,t.id))}):s.forEach(A=>{A.removeModSafe(t.id)})}}class Fr extends At{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Hungering Strike";const i=this.boof359;this.text=`Give a friendly creature +${i} attack.~Give an enemy creature -${i} attack.`}playTargets(){const t=super.playTargets();if(this.enemyTargActions().length>0){const i=y.crFriendActTarg("CARD",this.code,"P1");t.push(i)}return t}handleAction(t){const i=S.deTil(t.param),r=g.ddf6(t);if(i[0]==="P1"){const s=this.enemyTargActions(r.id);s.push(T.cancelAction()),T.ddf5(s)}else{const s=g.jr5(i[1]);this.logSpell(s,r);const c=this.boof359;s.buff(c,0),r.buff(-c,0),T.spellCast()}}enemyTargActions(t=""){const i=y.crEnemyActTarg("CARD",this.code,S.enTil("P2",t));return D.toActions(i)}}class Pr extends N{constructor(t){super(t),this.faction="U",this.rarity="C",this.name="Hunting Pack",this.iAttack=this.boof3612,this.iHealth=this.boof248,this.tribe.push("WF"),this.text=`When ${this.name} enters play, you have a 50% chance to put a copy of ${this.name} into an available lane.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("EF");return s.interactive=!0,r}handleAction(t){g.birth(this.code,"P",t.playerA,t.lane),T.actionDone(!0)}ddf8(t){return t.event.creatId===t.creatId}jr8(t){if(S.randInt(0,ot.simOn?4:2)===1){const r=y.emptyPlayerActTarg("F","CARD",this.code,""),s=y.actionTarget("TB","NOTR",this.code,""),c=D.toActions([r,s]);c.length===1?x.triggerDone():T.ddf5(c)}else x.triggerDone()}}class Mr extends N{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Iniog, Carrion Demon",this.iAttack=this.lValN([0,12,20]),this.iHealth=this.boof3713,this.tribe.push("DM");let i;this.level===1?(this.iDefend=!0,i=5):(this.iMobile=1,this.iRegen=this.level===2?5:10,i=10,this.hints=["ZZ-5"]);let r;this.level===3?r="When this gains health, deal that much damage to the enemy player.~Vengeance: Put a level 1 Iniog into this lane.":r=`When a creature is destroyed, this gets Regenerate 1.~At the end of your turn, if this has Regenerate ${i} or higher, replace it with a level ${this.level+1} Iniog.`,this.text=r}jr3(t,i){const r=super.jr3(t,i);if(this.level===3){const s=r.jr4("HG");s.bonus=this.playerNug(4);const c=r.jr4("VN");c.bonus=this.buffNug(0,3)}else{const s=r.jr4("DS");s.bonus=this.regnNug(2);const c=r.jr4("TE"),f=L.getCard(this.levelUpCard());c.bonus=this.multNug(this.buffNug(f.iAttack,f.iHealth),.4)}return r}ddf8(t){return t.trigger.type==="TE"?t.event.playerA===t.owner:t.trigger.type==="HG"?t.event.creatId===t.creatId:t.trigger.type==="DS"}jr8(t){const i=g.jr5(t.creatId);if(t.trigger.type==="HG"){const r=t.event;k.hurtDirect(!t.owner,r.healAmt,this.code)}else if(t.trigger.type==="VN")g.birth("ICD"+"1","P",i.owner,i.lane);else if(t.trigger.type==="DS")i.addRegen(1);else if(t.trigger.type==="TE"){const r=this.level===1?4:9;i.regen>r&&g.birth(this.levelUpCard(),"R",i.owner,i.lane)}x.triggerDone()}}class Rr extends N{image(t){return super.fixedImage(t)}constructor(t){super(t),this.faction="T",this.rarity="T",this.name="Iztek, Avatar of Flame",this.iAttack=this.lValN([7,12,20]),this.iHealth=this.boof6915,this.tribe.push("FR","EL"),this.iAggro=!0,this.text=`When Iztek ${p.dbdtap()}, deal that much damage to that player again.~When you play Iztek's Frost, replace this with a level ${this.level} Iztek, Avatar of Frost.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("PC");s.bonus=this.buffNug(0,this.iAttack);const c=r.jr4("DM");return c.bonus=this.buffNug(this.iAttack,0),r}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcId===t.creatId}else if(t.trigger.type==="PC"){const i=t.event;if(i.playerA===t.owner)return L.getCard(i.cardCode).cardCode()==="IFR"}return!1}jr8(t){if(t.trigger.type==="DM"){const i=t.event;k.hurtDirect(!t.owner,i.dmg,this.code)}else if(t.trigger.type==="PC"){const i=g.jr5(t.trigger.creatId);g.birth(`${"IZR"}${this.level}`,"R",i.owner,i.lane)}x.triggerDone()}}class Er extends N{image(t){return super.fixedImage(t)}constructor(t){super(t),this.faction="T",this.rarity="T",this.name="Iztek, Avatar of Frost",this.iAttack=this.boof6915,this.iHealth=this.lValN([7,12,20]),this.tribe.push("IC","EL"),this.iAggro=!0;const i=this.boof2510;this.text=`When you play Iztek's Flame, replace this with a level ${this.level} Iztek, Avatar of Flame.~Activate: Deal ${i} damage to a creature.`,this.bonus={activ8:this.buffNug(i,0)}}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("PC");return s.bonus=this.buffNug(0,this.iAttack),r}canActivate(t){return!0}startActivation(t){const i=y.crActTarg("CARD",this.code,t.id);i.hint=["HR"];const r=D.toActions([i,D.buttonTarget("CANC")]);T.ddf5(r)}handleAction(t){const i=g.ddf6(t),r=g.jr5(t.param);this.logAct(!0),i.hurtDirect(this.boof2510,this.code),r.endActivation()}ddf8(t){return t.event.playerA===t.owner&&t.event.cardCode.slice(0,3)==="IFL"}jr8(t){const i=g.jr5(t.trigger.creatId);g.birth(`${"IZL"}${this.level}`,"R",i.owner,i.lane),x.triggerDone()}}class Ir extends N{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Killer Bee",this.iAttack=this.boof135,this.iHealth=this.iAttack,this.iMobile=1,this.tribe.push("IN"),this.hints=["OL",this.lValH(["ZZ+2","ZZ+2","ZZ+3"])];const i=this.lValS(["Poison 1","Poison 3","that much Poison"]);this.text=`When ${this.name} deals battle damage to a creature or player, they get ${i}.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("DM");return s.bonus=this.regnNug(this.iAttack),s.bonus.pHealth=this.iAttack,r}ddf8(t){return t.event.battle&&t.event.isCreatSrc&&t.event.srcId===t.creatId}jr8(t){const i=$.toDamage(t.event),r=this.lValN([1,3,i.dmg]);i.isCreatTarg?i.hurtCreat.addPoison(r):i.hurtPlayer.poison+=r,x.triggerDone()}}class Lr extends N{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Killion, Infinity Warden",this.maxLevel=4,this.iAttack=this.lValN([6,9,16,22]),this.iHealth=this.lValN([3,7,14,20]),this.tribe.push("FB");let i;this.level<3?i=`a ${p.levelGateText(this.level)}card in your`:this.level===3?i="a card in your hand and":i="each card in your hand, deck, and",this.text=`Forge: Level up ${i} discard pile.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");return s.interactive=this.level<4,r}handleAction(t){const i=k.getActive();if(t.zone==="N"){const r=L.getCard(i.discard[t.position]);i.discard[t.position]=r.levelUpCard(),bt.popMode(),T.actionDone(!0)}else{const r=L.getCard(i.hand[t.position]);i.hand[t.position]=r.levelUpCard(),this.discardLevel(!0)}}jr8(t){if(this.level<3)this.discardLevel(!1);else if(this.level===3){const i=D.toActions(y.lvlHandActTarg(this.code,""));i.length>0?T.ddf5(i):this.discardLevel(!1)}else{const i=k.getActive();this.levelDeck(i.deck),this.levelDeck(i.hand),this.levelDeck(i.discard),x.triggerDone()}}discardLevel(t){const i=k.getActive(),r=y.target("TD");r.player=k.toTarget(i),r.level=D.ddf2(this.level),r.canLevel=!0;const s=St.generateContent(i.discard,!1,r);if(s.length>0){const c=s.map(f=>{const m=y.deckSelectAction("CARD",f.cardCode,f.sourceIdx);return m.host=this.code,m.hint=["CD"],m});St.showCustomDeck(s,c)}else t?T.actionDone(!0):x.triggerDone()}levelDeck(t){t.map(r=>L.getCard(r).levelUpCard()).forEach((r,s)=>t[s]=r)}}class Gr extends N{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Lavafused Asir",this.iAttack=this.boof369,this.iHealth=this.iAttack*2,this.tribe.push("FR","AS"),this.text=`While a friendly creature is unopposed, gets ${p.jr9(this.iAttack,0)}.`}jr3(t,i){const r=super.jr3(t,i),s=r.addEffect("PS",this.code);return s.area="A",r}enforceEffect(t){const i=t.status!=="A",r=y.mod("AT",this.iAttack,t.id);g.qPlayerCreats(t.owner).forEach(s=>{s.opposed||i?s.removeModSafe(t.id):s.addModSafe(r)})}}class $r extends N{constructor(t){if(super(t),this.faction="U",this.rarity="L",this.name="Leafkin Progenitor",this.iAttack=this.boof3711,this.iHealth=this.iAttack,this.tribe.push("PL"),this.level===3)this.text=`Activate: Put a level 1 ${this.name} into an adjacent available lane.`,this.bonus={activ8:this.statSpawnNug(3,3)};else{this.text=`Activate: Replace this with a level ${this.level+1} ${this.name}.`;const i=3*this.level;this.bonus={activ8:this.buffNug(i,i)}}}canActivate(t){return this.level===3?T.emptyAdjacents(t,"").length>0:!0}startActivation(t){let i;if(this.level===3)i=T.emptyAdjacents(t,"");else{const r=y.fieldSelectAction("CARD",t.lane,t.owner);r.param=t.id,r.host=this.code,i=[r]}i.push(T.cancelAction()),T.ddf5(i)}handleAction(t){this.logAct(!0);const i=g.jr5(t.param);this.level===3?g.birth(this.leafCode(1),"P",t.playerA,t.lane):g.birth(this.leafCode(this.level+1),"R",i.owner,i.lane),i.endActivation()}leafCode(t){return`${"LKP"}${t}`}}class ue extends N{cardConstruct(t){({["AFO"]:()=>this.aetorC(),["CRS"]:()=>this.scootC(),["FOL"]:()=>this.forcC(),["NXO"]:()=>this.nexoC(),["SNK"]:()=>this.tinkC(),["TEX"]:()=>this.texC(),["TSM"]:()=>this.tsmithC()})[t]()}playTarg;optional=!1;constructor(t){super(t),this.playTarg=y.lvlHandActTarg(this.code,""),this.cardConstruct(this.cardCode()),this.text="Forge: "+this.text}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");return s.interactive=!0,r}handleAction(t){I.levelAndDiscardA(t),g.jr5(t.param),T.actionDone(!0)}jr8(t){if(this.cardCode()==="NXO"&&g.jr5(t.creatId).lane!==3){x.triggerDone();return}const i=D.toActions(this.playTarg);i.length>0?(i.forEach(r=>{r.param=t.creatId}),this.optional&&i.push(T.noneEndTrigger()),T.ddf5(i)):x.triggerDone()}aetorC(){this.faction="A",this.rarity="C",this.name="Aetherforge Oracle",this.iAttack=this.boof61218,this.iHealth=this.boof246,this.tribe.push("HM"),this.optional=!0,this.playTarg.card="S",this.text="You may discard and level up a spell."}scootC(){this.faction="A",this.rarity="R",this.name="Cerebral Scout",this.iAttack=this.boof51015,this.iHealth=this.boof3712,this.tribe.push("MM"),this.optional=!0,this.playTarg.tribe="MM",this.text="You may discard and level up a Metamind."}forcC(){this.faction="A",this.rarity="H",this.name="Forge Oracle",this.iAttack=this.lValN([1,10,20]),this.iHealth=this.iAttack,this.tribe.push("ST"),this.playTarg.faction="A",this.optional=!0,this.text="You may discard an Alloyin card and level it.",this.level===1?this.hints=["LG","RT"]:(this.consistent=!0,this.addSp("C",0),this.level===3&&(this.hints=["ZZ-2"]))}nexoC(){this.faction="A",this.rarity="C",this.name="Nexus Overwatch",this.iHealth=this.boof71014,this.iAttack=this.iHealth-1,this.tribe.push("HM"),this.optional=!0,this.text=`If ${this.name} is in the center lane, you may ${p.daluac()}.`}tinkC(){this.faction="A",this.rarity="C",this.name="Steelspark Tinkerer",this.iAttack=this.boof147,this.iHealth=this.lValN([9,12,21]),this.iDefend=!0,this.tribe.push("HM"),this.optional=!0,this.text=`You may ${p.daluac()}.`}texC(){this.faction="A",this.rarity="C",this.name="Tech Explorer",this.iAttack=this.lValN([1,8,18]),this.iHealth=this.iAttack+2,this.tribe.push("GN"),this.level===1&&(this.hints=["LG","RT"]),this.optional=!0,this.playTarg.card="C",this.text="You may discard and level up a creature."}tsmithC(){this.faction="A",this.rarity="C",this.name="Technosmith",this.iAttack=this.boof5915,this.iHealth=this.iAttack-1,this.tribe.push("HM"),this.optional=!0,this.text=`You may ${p.daluac()}.`}}class Wr extends N{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Lightbringer Council",this.iAttack=this.lValN([4,8,10]),this.iHealth=this.boof71116,this.tribe.push("TK"),this.text=`When a friendly Uterra creature ${p.dbdtap()}, you gain ${this.iAttack} health.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("DM");return s.bonus=this.playerNug(this.iAttack),r}ddf8(t){const i=$.toDamage(t.event);return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcCreat.owner===t.owner&&i.srcCreat.faction==="U"}jr8(t){k.heal(t.owner,this.iAttack,this.code),x.triggerDone()}}class Jt extends N{lookup(t){return{["ASB"]:{c:()=>this.asbC(),d:(r,s,c)=>this.asbD(r,s,c)},["CHR"]:{c:()=>this.crgC(),d:(r,s,c)=>this.crgD(r,s,c)},["DZD"]:{c:()=>this.dozC(),d:(r,s,c)=>this.dozD(r,s,c)},["DTR"]:{c:()=>this.dtrC(),d:(r,s,c)=>this.dtrD(r,s,c)},["FWS"]:{c:()=>this.fwsC(),d:(r,s,c)=>this.fwsD(r,s,c)},["IMD"]:{c:()=>this.eddieC(),d:(r,s,c)=>this.eddieD(r,s,c)},["LVH"]:{c:()=>this.hiveC(),d:(r,s,c)=>this.hiveD(r,s,c)},["NCM"]:{c:()=>this.ncmbC(),d:(r,s,c)=>this.ncmbD(r,s,c)},["S01"]:{c:()=>this.spcC(),d:(r,s,c)=>this.spcD(r,s,c)},["TDS"]:{c:()=>this.tsrC(),d:(r,s,c)=>this.tsrD(r,s,c)}}[t]}constructor(t){super(t),this.lookup(this.cardCode()).c()}cares=!0;trigB;cardDamaged(t,i){const r=$.toDamage(i.event);this.lookup(t).d(i,r.hurtCreat,r)}image(t){return this.cardCode()==="DZD"?this.fixedImage(t):super.image(t)}jr3(t,i){const r=super.jr3(t,i);if(this.cares){const s=r.jr4("DM");s.bonus=this.trigB}return r}ddf8(t){return t.event.isCreatTarg&&t.event.target===t.creatId}jr8(t){this.cardDamaged(this.cardCode(),t),x.triggerDone()}asbC(){this.faction="A",this.rarity="L",this.name="Alyssa, Strifeborn",this.iAttack=this.lValN([2,4,10]),this.iHealth=this.lValN([12,16,24]),this.tribe.push("HM"),this.hints=["MC"],this.trigB=this.buffNug(this.iAttack,0),this.text=`When ${this.name} is dealt non-battle damage and survives, it gets ${p.jr9(this.level,1)} for each damage dealt.`}asbD(t,i,r){!r.battle&&r.life>0&&i.buff(r.dmg*this.level,r.dmg)}crgC(){this.faction="U",this.rarity="L",this.name="Chrogias",this.iAttack=this.lValN([1,0,40]),this.iHealth=this.lValN([1,15,40]),this.tribe.push("PL"),this.level>1&&(this.hints=["MC"],this.text="When Chrogias is dealt damage, you gain that much health."),this.level===1?(this.hints=["LG","LM","RT"],this.cares=!1):this.level===2?(this.iRegen=2,this.iDefend=!0,this.trigB=this.playerNug(10),this.hints?.push("LG")):this.level===3&&(this.iBT=!0,this.iRegen=5,this.trigB=this.playerNug(20))}crgD(t,i,r){k.heal(t.owner,r.dmg,this.code)}dozC(){this.faction="U",this.rarity="L",this.name="Dozer, the Dormant",this.iAttack=0,this.iHealth=this.level*3+6,this.tribe.push("BR"),this.iDefend=!0,this.hints=["MC"],this.level===1&&this.hints.push("ZZ-2"),this.trigB=this.buffNug(this.iHealth,0),this.trigB.bonus=.3;const t=L.getCard(this.dz());this.text=`When ${this.name} is dealt damage and survives, replace it with a ${p.tokName(t)}.`}dozD(t,i,r){if(i.health>0&&i.status==="A"){const s=g.birth(this.dz(),"R",i.owner,i.lane);s&&s.setHealth(i.health)}}dz(){return "DZA"+this.level}dtrC(){this.faction="U",this.rarity="L",this.name="Dream Tree",this.iAttack=0,this.iHealth=this.lValN([7,11,20]),this.iDefend=!0,this.tribe.push("PL"),this.level===3&&(this.iRegen=5),this.hints=["MC"],this.trigB=this.avgSpawnNug(),this.text=`When ${this.name} is dealt damage and survives, if it is your turn, you may play an additional card this turn.`}dtrD(t,i,r){i.owner===k.activePlayer&&r.life>0&&(this.logAct(!1),I.regularPlays++)}fwsC(){this.faction="A",this.rarity="H",this.name="Forgewatch Sentry",this.iAttack=this.boof6912,this.iHealth=this.iAttack,this.iArmor=this.iAttack,this.tribe.push("RB"),this.trigB=this.rawNug(0,0,0,0,-1),this.text=`When ${this.name} is dealt damage, destroy it.`}fwsD(t,i,r){W.destroy(i,this.code)}eddieC(){this.faction="A",this.rarity="L",this.name="Iron Maiden",this.iAttack=this.lValN([1,3,30]),this.iHealth=this.iAttack,this.tribe.push("RB"),this.consistent=this.level>1,this.level===3?(this.iBT=!0,this.hints=["MC"],this.text="When Iron Maiden is dealt damage, deal that much damage to the enemy player.",this.trigB=this.playerNug(16)):(this.cares=!1,this.hints=["LG","LM","RT"])}eddieD(t,i,r){k.hurtDirect(!t.owner,r.dmg,this.code)}hiveC(){this.faction="U",this.rarity="L",this.name="Living Hive",this.iAttack=this.lValN([0,0,10]),this.iHealth=this.lValN([8,12,15]),this.tribe.push("IN","EL"),this.iDefend=this.level<3,this.hints=["MC"];const t=L.getCard(Z.bee(this.level));this.text=`When ${this.name} is dealt damage, Spawn a level ${p.tokName(t)}.`,this.iDefend||(this.iBT=!0,this.text+=`~Forge: ${this.name} gets +X attack and +X health, where X is the total amount of Poison the enemy player has.`),this.trigB=this.spawnNug(t)}hiveD(t,i,r){this.logAct(!1),g.birth(Z.bee(this.level),"S",t.owner)}ncmbC(){this.faction="N",this.rarity="H",this.name="Necromoeba",this.iAttack=this.boof4710,this.iHealth=this.boof71117,this.tribe.push("OZ"),this.iRegen=3,this.hints=["MC"],this.level===1&&this.hints.push("ZZ-1");const t=L.getCard(Z.purpOzC(this.level));this.text=`When ${this.name} is dealt damage, Spawn a ${p.tokName(t)}.`,this.trigB=this.spawnNug(t)}ncmbD(t,i,r){this.logAct(!1),g.birth(Z.purpOzC(this.level),"S",t.owner)}spcC(){this.faction="A",this.rarity="L",this.name="Specimen 001",this.iAttack=this.boof234,this.iHealth=this.lValN([12,16,22]),this.tribe.push("OZ"),this.hints=["MC"],this.trigB=this.rawNug(0,lt.calcCreatValueFormula(this.iAttack,0,this.level,0,0,!1,0),0,0,0),this.text=`When ${this.name} is dealt non-battle damage, each other friendly creature gets ${p.jr9(this.iAttack,0)} and Armor ${this.level}.`}spcD(t,i,r){if(!r.battle){const s=y.crNotMeTarg(i.id);s.player=k.toTarget(i.owner),g.creatByTarget(s).forEach(c=>{c.buff(this.iAttack,0),c.addArmor(this.level)})}}tsrC(){this.faction="U",this.rarity="L",this.name="Thundersaur",this.iAttack=0,this.iHealth=this.level*12,this.tribe.push("DN"),this.iBT=!0,this.hints=["MC",this.level===2?"ZZ-3":"ZZ-1"],this.trigB=this.buffNug(this.iHealth/2,0),this.text=`When ${this.name} is dealt damage, it gets +1 attack for each damage dealt.`}tsrD(t,i,r){i.buff(r.dmg,0)}}class Ur extends Jt{jr3(t,i){const r=super.jr3(t,i);return this.level===3&&r.jr4("FR"),r}jr8(t){if(t.trigger.type==="FR"){const i=k.totalPoison(!t.owner);i>0&&g.jr5(t.creatId).buff(i,i),x.triggerDone()}else super.jr8(t)}}class Vr extends Bt{jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}jr8(t){if(t.trigger.type==="FR"){const i=g.creatByTarget(y.crNotMeTarg(t.creatId)),r=this.boof124;i.forEach(s=>s.addPoison(r)),x.triggerDone()}else super.jr8(t)}}class Or extends At{constructor(t){super(t),this.faction="A",this.rarity="C",this.name="Metatransfer",this.text=`Give a creature ${p.jr9(-this.boof579,0)}.~Discard and level up a card.`}playTargets(){const t=super.playTargets(),i=y.crActTarg("CARD",this.code,"P1");return i.hint=["DB"],t.push(i),t}handleAction(t){const i=S.deTil(t.param);if(i[0]==="P1"){const r=g.ddf6(t),s=y.lvlHandActTarg(this.code,S.enTil("P2",r.id));s.deckPositionSkip=T.playPosition();const c=D.toActions(s);c.length===0?(this.logSpell(r),r.buff(-this.boof579,0),T.spellCast()):(c.push(T.cancelAction()),T.ddf5(c))}else{const r=g.jr5(i[1]);this.logSpell(r),r.buff(-this.boof579,0);const s=t;T.shiftPlayCard(s.position),I.levelAndDiscardA(s),T.spellCast()}}}class zr extends N{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Mimicleaf",this.iAttack=this.lValN([2,5,11]),this.iHealth=this.iAttack,this.tribe.push("PL"),this.text=`Activate: Put a level ${this.level} ${this.name} into an adjacent available lane.`,this.bonus={activ8:this.statSpawnNug(this.iAttack,this.iHealth)}}canActivate(t){return T.emptyAdjacents(t,"").length>0}startActivation(t){const i=T.emptyAdjacents(t,"");i.push(T.cancelAction()),T.ddf5(i)}handleAction(t){this.logAct(!0);const i=g.jr5(t.param);g.birth(i.code,"P",t.playerA,t.lane),i.endActivation()}}class Zr extends N{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Mimicwurm",this.iAttack=7,this.iHealth=this.iAttack,this.tribe.push("WR"),this.text=this.lValS(["","Forge: You may put a level 1 Mimicwurm into another lane.","Forge: You may put a level 2 Mimicwurm into another lane. Then you may put a level 1 Mimicwurm into another lane."])}jr3(t,i){const r=super.jr3(t,i);if(this.level>1){const s=r.jr4("FR");s.interactive=!0}return r}handleAction(t){const i=S.deTil(t.param);if(i[0]==="P1")if(this.level===3){this.wurmsign(2,t);const r=[t.lane,parseInt(i[1])],s=this.fieldActions("P2",r);T.ddf5(s)}else this.wurmsign(1,t),T.actionDone(!0);else this.wurmsign(1,t),T.actionDone(!0)}jr8(t){const i=$.toCreature(t.event);T.ddf5(this.fieldActions("P1",[i.creature.lane]))}fieldActions(t,i){const r=y.actionTarget("TF","CARD",this.code,S.enTil(t,i[0]));r.player="F",r.hint=["FL"],r.lanes=g.laneIdx.filter(c=>!i.includes(c));const s=D.toActions(r);return s.push(T.noneEndTrigger()),s}wurmsign(t,i){g.birth(this.wurmCode(t),"R",i.playerA,i.lane)}wurmCode(t){return`${"MMW"}${t}`}}class fe extends At{lookup(t){return{["BRN"]:{c:()=>this.boutC(),z:(r,s)=>this.burner(r,s,8)},["IFL"]:{c:()=>this.izfmC(),z:(r,s)=>this.burner(r,s,this.boof6915)},["LSK"]:{c:()=>this.lspkC(),z:(r,s)=>this.burner(r,s,this.boof6812)},["LYR"]:{c:()=>this.rainC(),z:(r,s)=>this.rainZ(r,s)},["SOK"]:{c:()=>this.sealkC(),z:(r,s)=>this.burner(r,s,this.sealzap)},["STB"]:{c:()=>this.shatC(),z:(r,s)=>this.shatZ(r,s)},["SHK"]:{c:()=>this.shkC(),z:(r,s)=>this.shkZ(r,s)}}[t]}cardCast(t,i,r){this.lookup(t).z(i,r)}hurts=!0;burner(t,i,r){i?t.hurtDirect(r,this.code):k.hurtDirect(t,r,this.code)}burnText(t){return`Deal ${t} damage to a creature or player.`}constructor(t){super(t),this.lookup(this.cardCode()).c()}playTargets(){const t=super.playTargets(),i=this.hurts?["HR"]:["BF"],r=y.crActTarg("CARD",this.code,"");r.hint=i;const s=y.actionTarget("TP","CARD",this.code,"");return s.hint=i,t.push(r,s),t}handleAction(t){let i,r;t.zone==="P"?(this.logSpell(),i=!1,r=t.playerA):(r=g.ddf6(t),this.logSpell(this.hurts?void 0:r),i=!0),this.cardCast(this.cardCode(),r,i),T.spellCast()}boutC(){this.faction="T",this.rarity="R",this.name="Burnout",this.overload=!0,this.maxLevel=1,this.text=this.burnText(8)}izfmC(){this.faction="T",this.rarity="T",this.name="Iztek's Flame";const t=this.boof6915;this.addSp("D",t),this.text=this.burnText(t)}lspkC(){this.faction="T",this.rarity="C",this.name="Lightning Spark";const t=this.boof6812;this.addSp("D",t),this.text=this.burnText(t)}rainC(){this.faction="U",this.rarity="C",this.name="Lysian Rain",this.hurts=!1;const t=this.boof7911;this.addSp("H",t),this.text=`Give a creature or player +${t} health.`}rainZ(t,i){const r=this.boof7911;i?(this.logAct(!1,t),t.buff(0,r)):k.heal(t,r,this.code)}sealkC(){this.faction="T",this.rarity="C",this.name="Seal of Kadras",this.level<3&&(this.hints=["LG"]),this.consistent=this.level>1;const t=this.sealzap;this.addSp("D",t),this.consistent&&this.addSp("C",0),this.text=this.burnText(t)}get sealzap(){return this.lValN([1,2,25])}shatC(){this.faction="T",this.rarity="C",this.name="Shatterbolt";const t=this.boof5914;this.addSp("D",t),this.text=`Negate Armor from a creature or player this turn, then deal ${t} damage to that creature or player.`}shatZ(t,i){const r=this.boof5914,s=y.modT("NA",!0);if(i){const c=t;c.addMod(s),c.hurtDirect(r,this.code)}else{const c=k.toPlayer(t);k.addMod(c,s),k.hurtDirect(c,r,this.code)}}shkC(){this.faction="T",this.rarity="H",this.name="Static Shock";const t=this.boof124;this.addSp("D",t),this.hints=["ZZ+1"],this.text=`${this.burnText(t)} You may play an additional ${p.levelGateText(this.level)}spell this turn.`}shkZ(t,i){this.burner(t,i,this.boof124);const r=I.freeCard(this.code);r.condition.level=D.ddf2(this.level),r.condition.card="S"}}class Yr extends N{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Nefrax, the Soulweaver",this.iAttack=this.boof4712,this.iHealth=this.lValN([10,15,25]),this.tribe.push("HM"),this.hints=["ZZ-2"];const i=L.getCard(this.spc());this.text=`Activate: Put a ${p.tokName(i)} into an available lane.~Forge: Destroy a friendly creature.`,this.bonus={activ8:this.spawnNug(i)}}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");return s.interactive=!0,r}canActivate(t){return this.empties(t).length>0}startActivation(t){const i=this.empties(t);i.push(T.cancelAction()),T.ddf5(i)}handleAction(t){const i=S.deTil(t.param);if(i[0]==="P1"){this.logAct(!0);const r=g.jr5(i[1]);g.birth(this.spc(),"P",t.playerA,t.lane),r.endActivation()}else{const r=g.ddf6(t);W.destroy(r,this.code),T.actionDone(!0)}}jr8(t){const i=y.crFriendActTarg("CARD",this.code,""),r=D.toActions(i);T.ddf5(r)}spc(){return "SPN"+this.level}empties(t){const i=y.emptyPlayerActTarg("F","CARD",this.code,S.enTil("P1",t.id));return D.toActions(i)}}class Kr extends N{constructor(t){super(t),this.faction="N",this.rarity="T",this.name="Netherdrake",this.iAttack=this.boof4815,this.iHealth=this.iAttack,this.iMobile=this.lValN([0,0,1]),this.tribe.push("DG"),this.text=`When this enters play or moves into a lane, destroy the opposing ${p.levelGateText(this.level)}creature.`}image(t){return this.rawImage(`${"NSH"}${this.level}`,t)}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FK");return s.bonus=this.multNug(this.avgSpawnNug(),.5),r.jr4("EF"),r}ddf8(t){return t.event.creatId===t.creatId}jr8(t){const r=$.toCreature(t.event).creature.opposed;r&&D.levelTestCommon(r.level,this.level)&&W.destroy(r,this.code),x.triggerDone()}}class qr extends we{enforceEffect(t){t.lane===3?t.removeModSafe(t.id):t.addModSafe(y.mod("AR",this.boof236,t.id)),super.enforceEffect(t)}}class Xr extends N{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Nova, Grove Queen",this.iAttack=this.lValN([3,5,10,14]),this.iHealth=this.lValN([7,10,15,19]),this.tribe.push("FB"),this.maxLevel=4;const i=this.nbuf,r=this.lValS(["an adjacent","each adjacent","each","each"]);this.text=`Forge: Put a 1/1 Seedling into ${r} available space.~When a friendly creature is replaced, Nova gets ${p.jr9(i,i)}.`}get nbuf(){return this.lValN([1,3,5,10])}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");this.level===1&&(s.interactive=!0);const c=r.jr4("RP"),f=this.nbuf;return c.bonus=this.buffNug(f,f),r}ddf8(t){const i=$.toReplaced(t.event);return t.creatId!==i.replCreatId&&t.owner===i.replCreat.owner}jr8(t){const i=g.jr5(t.creatId);if(t.event.code==="RPL"){const r=this.nbuf;i.buff(r,r),x.triggerDone()}else{const r=g.emptyLanes(t.owner);if(this.level>1){const s=this.level===2?i.adjacent.filter(f=>r.includes(f)):r,c=M.tick();s.forEach(f=>{g.birth(this.seed,"P",i.owner,f,c)}),x.triggerDone()}else{const s=i.adjacent.filter(c=>r.includes(c));if(s.length===0)x.triggerDone();else if(s.length===1)g.birth(this.seed,"P",i.owner,s[0]),x.triggerDone();else{const c=T.emptyAdjacents(i,"");T.ddf5(c)}}}}handleAction(t){g.birth(this.seed,"P",t.playerA,t.lane),T.actionDone(!0)}get seed(){return "NSD"+this.level}}class jr extends At{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Omnomnom";const i=this.boof246,r=i*-1;this.text=`Give a friendly Zombie ${p.jr9(i,i,!0)}, and Regenerate ${i}.~Then give an enemy non-Zombie ${p.jr9(r,r)}.`}playTargets(){const t=super.playTargets();if(this.nonZombies().length>0){const i=y.crFriendActTarg("CARD",this.code,"P1");i.tribe="ZB",t.push(i)}return t}handleAction(t){const i=S.deTil(t.param),r=g.ddf6(t);if(i[0]==="P1"){const s=T.cancelAction(),c=this.nonZombies(r.id);c.push(s),T.ddf5(c)}else{const s=g.jr5(i[1]);this.logSpell(s,r);const c=this.boof246;s.buff(c,c),s.addRegen(c),r.buff(-c,-c),T.spellCast()}}nonZombies(t=""){const i=y.crEnemyActTarg("CARD",this.code,S.enTil("P2",t));return D.toActions(i).filter(r=>{const s=r;return!g.ddf6(s).isTribe("ZB")})}}class Jr extends N{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Onyxium Allomancer",this.iAttack=this.boof248,this.iHealth=this.boof61016,this.tribe.push("HM");const i=this.boof358;this.text=`Activate: Discard and level up a card.~Allied Nekrium: Regenerate ${i}.`,this.bonus={activ8:this.rawNug(0,0,0,0,.5)}}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}canActivate(t){return k.toPlayer(t.owner).hand.some(r=>L.getCard(r).canLevel())}startActivation(t){const i=y.lvlHandActTarg(this.code,t.id);i.hint?.push("DF"),T.ddf5(D.toActions([i,D.buttonTarget("CANC")]))}handleAction(t){this.logAct(!0);const i=g.jr5(t.param);I.levelAndDiscardA(t),i.endActivation()}jr8(t){I.allied("N")&&g.jr5(t.creatId).addRegen(this.boof358),x.triggerDone()}}class Qr extends N{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Onyxium Phantasm",this.iAttack=this.boof246,this.iHealth=this.lValN([9,12,19]),this.iRegen=this.boof124,this.tribe.push("ST");const i=this.boof4812n;this.addSp("A",i),this.text=`Allied Alloyin: Activate: Give a creature ${p.jr9(i,0)}`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}canActivate(t){return t.hasMod(t.id)}startActivation(t){const i=y.crActTarg("CARD",this.code,t.id);i.hint=["DF","DB"];const r=D.toActions(i);r.push(T.cancelAction()),T.ddf5(r)}handleAction(t){const i=g.jr5(t.param),r=g.ddf6(t);this.logAct(!0,r),r.buff(this.boof4812n,0),i.endActivation()}jr8(t){if(I.allied("A")){const i=g.jr5(t.creatId);i.addMod(y.mod("AL",!0,i.id)),i.changed=!0;const r=i.jr4("PT");r.bonus=this.buffNug(this.boof4812,0)}x.triggerDone()}}class _r extends At{constructor(t){super(t),this.faction="T",this.rarity="R",this.name="Oratek Battlebrand";const i=this.boof71013;this.addSp("D",i),this.text=`Deal ${i} damage to a creature.~Allied Alloyin: You may discard a card and level it.`}playTargets(){const t=super.playTargets(),i=y.crActTarg("CARD",this.code,"");return i.hint=["HR"],t.push(i),t}handleAction(t){if(t.zone==="F"){const i=t,r=g.ddf6(i);if(this.logSpell(),r.hurtDirect(this.boof71013,this.code),I.allied("A")){const s=this.levelActs();s.length===1?T.spellCast():T.ddf5(s)}else T.spellCast()}else if(t.zone==="H"){const i=t;T.shiftPlayCard(i.position),I.levelAndDiscardA(i),T.spellCast()}else t.zone==="B"&&t.param==="NOTR"?T.spellCast():super.handleAction(t)}levelActs(){const t=y.actionTarget("TB","CARD",this.code,"NOTR"),i=y.lvlHandActTarg(this.code,"");return i.deckPositionSkip=T.playPosition(),D.toActions([i,t])}}class ts extends N{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Oratek Warhammer",this.iAttack=this.boof3713,this.iHealth=this.lValN([8,12,19]),this.iMobile=this.level,this.tribe.push("FR","AS"),this.text=`Allied Alloyin: When ${this.name} ${p.dbdtap()} on your turn, you may discard and level up a card.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");return s.bonus=this.rawNug(0,0,0,0,.5),r}handleAction(t){I.levelAndDiscardA(t),T.actionDone(!0)}ddf8(t){const i=$.toDamage(t.event);return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcId===t.creatId&&i.srcCreat.owner===k.getActiveB()}jr8(t){if(t.trigger.type==="FR"){if(I.allied("A")){const i=g.jr5(t.creatId),r=i.jr4("DM");r.interactive=!0,i.changed=!0}x.triggerDone()}else if(t.trigger.type==="DM"){const i=D.toActions(y.lvlHandActTarg(this.code,""));i.length>0?(i.push(T.noneEndTrigger()),T.ddf5(i)):x.triggerDone()}}}class Xe extends N{hitCreature;constructor(t,i){super(t),this.hitCreature=i}trigB;jr3(t,i){const r=super.jr3(t,i),s=r.jr4("DM");return s.bonus=this.trigB,r}ddf8(t){return t.event.battle&&t.event.isCreatTarg===this.hitCreature&&t.event.isCreatSrc&&t.event.srcId===t.creatId}}class es extends Xe{constructor(t){super(t,!1),this.faction="U",this.rarity="L",this.name="Oros, Deepwood's Chosen",this.iAttack=this.lValN([7,11,16,0]),this.iHealth=this.iAttack,this.iBT=!0,this.maxLevel=4,this.tribe.push("FB"),this.hints=["OL"];const i=`When Oros ${p.dbdtap()}, you gain that much health.`,r=this.level===4?"Oros gets +attack and +health equal to your health.~":"";this.text=r+i}jr3(t,i){const r=super.jr3(t,i);return this.level===4&&r.addEffect("PH",this.code),r}jr8(t){const i=t.event;k.heal(t.owner,i.dmg,this.code),x.triggerDone()}enforceEffect(t){const i=k.toPlayer(t.owner).health;t.status==="A"&&(t.removeModSafe(t.id,!1),t.addMod(y.mod("HL",i,t.id)),t.addMod(y.mod("MH",i,t.id)),t.addMod(y.mod("AT",i,t.id)))}}class is extends N{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Othra, Apex Predator",this.iAttack=this.lValN([8,0,10]),this.iHealth=this.lValN([6,12,50]),this.tribe.push("IN"),this.level===3?(this.iMobile=1,this.text="When Othra deals battle damage to a creature or player, they get Poison 10.",this.hints=["ZZ-5"]):(this.text=`Gain Rank: Replace this with a level ${this.level+1} Othra.`,this.hints=["TL"],this.level===2?this.iDefend=!0:this.hints.push("ZZ-1"))}jr3(t,i){const r=super.jr3(t,i);if(this.level===3){const s=r.jr4("DM");s.bonus=this.regnNug(10)}else{const s=r.jr4("RU");s.bonus=this.regnNug(this.level)}return r}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&i.isCreatSrc&&i.srcId===t.creatId}return t.trigger.type==="RU"?t.event.playerA===t.owner:!1}jr8(t){if(t.trigger.type==="RU"){const i=g.jr5(t.creatId);g.birth(this.levelUpCard(),"R",i.owner,i.lane)}else if(t.trigger.type==="DM"){const i=$.toDamage(t.event);i.isCreatTarg?i.hurtCreat.addPoison(10):i.hurtPlayer.poison+=10}x.triggerDone()}}class rs extends N{constructor(t){super(t),this.faction="U",this.rarity="R",this.name="Oxidon Spitter",this.iAttack=this.boof7914,this.iHealth=this.boof3510,this.tribe.push("DN"),this.l3=this.level===3,this.text=`Forge: Negate Armor from ${this.l3?"each":"an"} enemy creature.`}l3;jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");return s.interactive=!this.l3,r}jr8(t){if(this.l3)g.creatByTarget(y.crEnemyTarg()).forEach(i=>{i.negateArmor=!0}),x.triggerDone();else{const i=y.crEnemyActTarg("CARD",this.code,""),r=D.toActions(i);r.length>0?T.ddf5(r):x.triggerDone()}}handleAction(t){const i=g.ddf6(t);this.logAct(!1,i),i.negateArmor=!0,T.actionDone(!0)}}class Qt extends N{lookup(t){return{["AFS"]:{c:()=>this.afsC(),a:r=>this.afsA(r),t:r=>this.afsT(r)},["DMW"]:{c:()=>this.drixC(),a:r=>this.drixA(r),t:r=>this.drixT(r)},["FGG"]:{c:()=>this.fggC(),a:r=>this.fggA(r),t:r=>this.fggT(r)},["GHS"]:{c:()=>this.mvpC(),a:r=>this.mvpA(r),t:r=>this.mvpT(r)},["MMG"]:{c:()=>this.mmgC(),a:r=>this.mmgA(r),t:r=>this.mmgT(r)},["OWW"]:{c:()=>this.owwC(),a:r=>this.owwA(r),t:r=>this.owwT(r)},["SST"]:{c:()=>this.sstC(),a:r=>this.sstA(r),t:r=>this.sstT(r)},["UPM"]:{c:()=>this.upakC(),a:r=>this.upakA(r),t:r=>this.upakT(r)},["WFM"]:{c:()=>this.wfmC(),a:r=>this.wfmA(r),t:r=>this.wfmT(r)},["XTE"]:{c:()=>this.xerxC(),a:r=>this.xerxA(r),t:r=>this.xerxT(r)}}[t]}runAct(t,i){this.lookup(t).a(i)}testAct(t,i){return this.lookup(t).t(i)}constructor(t){super(t),this.lookup(this.cardCode()).c()}preFight=!1;prePlay=!1;canActivate(t){return this.testAct(this.cardCode(),t)}startActivation(t){const i=D.boardTarget("CARD",this.code);i.param=t.id,this.preFight&&(i.hint=["BB"]),this.prePlay&&(i.hint=["DF"]),T.ddf5(D.toActions([i,D.buttonTarget("CANC")]))}handleAction(t){this.logAct(!0);const i=g.jr5(t.param);this.runAct(this.cardCode(),i),i.endActivation()}afsC(){this.faction="A",this.rarity="L",this.name="Arcflight Squadron",this.iAttack=this.boof4710,this.iHealth=this.iAttack+2,this.tribe.push("RB"),this.hints=["OL",this.level===1?"ZZ-3":"ZZ-2"],this.prePlay=!0,this.text=`Activate: You may play an additional ${p.levelGateText(this.level)}Robot this turn.`,this.bonus={activ8:this.avgSpawnNug()}}afsT(t){return!0}afsA(t){const i=I.freeCard(this.code);i.condition.tribe="RB",i.condition.level=D.ddf2(this.level)}drixC(){this.faction="A",this.rarity="L",this.name="Drix, the Mindwelder",this.iAttack=this.boof3612,this.iHealth=this.lValN([6,12,21]),this.tribe.push("MM"),this.preFight=!0,this.addSp("A",this.level),this.text=`Activate, discard your hand: Each friendly Metamind gets ${p.jr9(this.level,0)} for each card discarded this way.`,this.bonus={activ8:this.buffNug(3*this.level,0)}}drixT(t){return k.getActive().hand.length>0}drixA(t){const i=k.toPlayer(t.owner),r=i.hand.length*this.level;i.discard.push(...i.hand),i.hand=[];const s=y.crFriendTarg();s.tribe="MM",g.creatByTarget(s).forEach(c=>{c.buff(r,0)})}fggC(){this.faction="A",this.rarity="H",this.name="Forge Guardian Gamma",this.iAttack=this.boof4816,this.iHealth=this.iAttack,this.tribe.push("RB","GD"),this.preFight=!0;const t=L.getCard(Z.fgoc(this.level));this.addSp("N",t.iAttack),this.text=`Activate, destroy five friendly Robot Guardians: Put a ${p.tokName(t)} into this lane.`,this.bonus={activ8:this.rawNug(0,0,0,0,1)}}fggT(t){return g.creatByTarget(this.fggTarg()).length===5}fggA(t){const i=t.lane,r=t.owner,s=M.tick();g.creatByTarget(this.fggTarg()).forEach(c=>W.destroy(c,this.code,s)),g.birth(Z.fgoc(this.level),"P",r,i)}fggTarg(){const t=y.crFriendTarg();return t.tribe="GD",t}mvpC(){this.faction="U",this.rarity="C",this.name="Gemheart Sprout",this.iAttack=this.boof357,this.iHealth=this.iAttack+this.level,this.iDefend=!0,this.tribe.push("PL"),this.preFight=!0,this.addSp("L",this.level),this.text=`Activate: You gain health equal to ${this.level}x the number of friendly creatures.`,this.bonus={activ8:this.playerNug(this.level*3)}}mvpT(t){return!0}mvpA(t){const i=g.ddf1().length;k.heal(t.owner,i*this.level,this.code)}mmgC(){this.faction="A",this.rarity="L",this.name="Marty McGear",this.iAttack=this.boof3612,this.iHealth=this.boof71117,this.tribe.push("GN"),this.hints=[this.lValH(["ZZ-2","ZZ-2","ZZ-5"])],this.addSp("A",this.level),this.addSp("M",this.level),this.text=`Activate: Spawn a copy of a random ${p.levelGateText(this.level)}Robot from your deck. That Robot gets ${p.jr9(this.level,0)} and Armor ${this.level}.`,this.bonus={activ8:this.avgSpawnNug()}}mmgT(t){return g.ddf1().length<5&&this.mmgBots().length>0}mmgA(t){const i=this.mmgBots(),r=i[S.randInt(0,i.length)],s=g.birth(r,"S",t.owner);s&&(s.addArmor(this.level),s.buff(this.level,0))}mmgBots(){const t=y.target("DK");return t.player="F",t.tribe="RB",t.level=D.ddf2(this.level),D.deckByTarget(t).map(r=>r[0])}owwC(){this.faction="A",this.rarity="L",this.name="Oreian Warwalker",this.iAttack=this.boof359,this.iHealth=this.boof61018,this.tribe.push("RB"),this.preFight=!0;const t=this.owwbuff+1;this.addSp("A",t),this.text=`Activate: ${this.name} gets ${t}x attack.`,this.bonus={activ8:this.buffNug(2*this.iAttack,0)}}owwT(t){return!0}owwA(t){t.buff(t.attack*this.owwbuff,0)}get owwbuff(){return this.lValN([1,1,2])}sstC(){this.faction="U",this.rarity="C",this.name="Scatterspore Tiller",this.iHealth=this.boof61014,this.iAttack=this.iHealth-1,this.tribe.push("PL");const t=L.getCard(Z.minionCode(this.level));this.text=`Activate: Spawn a ${p.tokName(t)}`,this.bonus={activ8:this.spawnNug(t)}}sstT(t){return g.ddf1().length<5}sstA(t){g.birth(Z.minionCode(this.level),"S",t.owner)}upakC(){this.faction="U",this.rarity="L",this.name="Uterra Packmaster",this.iAttack=this.boof6914,this.iHealth=this.iAttack,this.tribe.push("HM"),this.preFight=!0;const t=this.boof124;this.addSp("U",t),this.text=`Activate: Each other friendly Uterra creature gets ${p.jr9(t,t)}.`,this.bonus={activ8:this.multNug(this.buffNug(t,t),1.5)}}upakT(t){return g.creatByTarget(this.upakTarg(t.id)).length>0}upakA(t){const i=this.boof124;g.creatByTarget(this.upakTarg(t.id)).forEach(r=>{r.buff(i,i)})}upakTarg(t){const i=y.crFriendNotMeTarg(t);return i.faction="U",i}wfmC(){this.faction="T",this.rarity="H",this.name="Wildfire Maiden",this.iAttack=this.boof4610,this.iHealth=this.boof5814,this.tribe.push("FR","AS"),this.text=`Activate, destroy ${this.name}: Deal damage equal to its attack to each enemy creature.`,this.bonus={activ8:this.rawNug(0,0,0,0,.5)}}wfmT(t){return!0}wfmA(t){const i=M.tick();g.creatByTarget(y.crEnemyTarg()).forEach(r=>{r.hurtDirect(t.attack,this.code,i)}),W.destroy(t,this.code)}xerxC(){this.faction="N",this.rarity="L",this.name="Xerxes, the Executioner",this.iAttack=this.boof5915,this.iHealth=this.iAttack+2,this.tribe.push("GG");const t=-this.boof135;this.addSp("U",t),this.text=`Activate: Each non-Nekrium creature gets ${p.jr9(t,t)}.~If any enemy creatures are destroyed this way, Spawn one of them at random.`,this.bonus={activ8:this.buffNug(-t,-t)}}xerxT(t){return this.xerxTargs().length>0}xerxA(t){const i=-this.boof135,r=[],s=M.tick();this.xerxTargs().forEach(f=>{f.buff(i,i,s),f.owner!==t.owner&&f.health<1&&r.push(f)});const c=r.length;c>0&&g.birth(r[S.randInt(0,c)].code,"S",t.owner)}xerxTargs(){return g.qActiveCreats().filter(t=>t.faction!=="N")}}class ci extends N{lookup(t){return{["MDE"]:{c:()=>this.misdC(),f:r=>this.misdF(r)},["TAB"]:{c:()=>this.thraC(),f:r=>this.thraF(r)}}[t]}cardForge(t,i){this.lookup(t).f(i)}ftext="";constructor(t){super(t),this.lookup(this.cardCode()).c(),this.text="Assault: "+this.ftext,this.ftext=""}jr3(t,i){const r=super.jr3(t,i);return r.jr4("AS"),r}jr8(t){this.cardForge(this.cardCode(),t),x.triggerDone()}misdC(){this.faction="N",this.rarity="C",this.name="Misery Demon",this.iAttack=this.boof5915,this.iHealth=this.boof2510,this.tribe.push("DM"),this.hints=["OL"];const t=this.level+3;this.ftext=`Deal ${t} damage to the enemy player and gain ${t} health.`}misdF(t){const i=this.level+3;k.hurtDirect(!t.owner,i,this.code),k.heal(t.owner,i,this.code)}thraC(){this.faction="T",this.rarity="C",this.name="Thranik Ambusher",this.iAttack=this.boof5813,this.iHealth=this.iAttack,this.tribe.push("DK"),this.hints=["OL"];const t=this.boof234;this.ftext=`${this.name} gets ${p.jr9(t,t)}.`}thraF(t){const i=this.boof234;g.jr5(t.creatId).buff(i,i)}}class dt extends N{lookup(t){return{["ATT"]:{c:()=>this.atorC(),t:(r,s)=>this.atorT(r,s),b:(r,s)=>this.atorB(r,s)},["BRH"]:{c:()=>this.brhrC(),t:(r,s)=>this.friendoT(r,s),b:(r,s)=>this.brhrB(r,s)},["BWN"]:{c:()=>this.bulbC(),t:(r,s)=>this.friendoT(r,s),b:(r,s)=>this.bulbB(r,s)},["CDM"]:{c:()=>this.cmyC(),t:(r,s)=>this.cmyT(r,s),b:(r,s)=>this.cmyB(r,s)},["CYR"]:{c:()=>this.cycrC(),t:(r,s)=>this.cycrT(r,s),b:(r,s)=>this.cycrB(r,s)},["DHM"]:{c:()=>this.dhamC(),t:(r,s)=>this.donkforgeT(r,s),b:(r,s)=>this.donkforgeB(r,s)},["FGD"]:{c:()=>this.fgdC(),t:(r,s)=>this.fgdT(r,s),b:(r,s)=>this.fgdB(r,s)},["FSP"]:{c:()=>this.fspC(),t:(r,s)=>this.fspT(r,s),b:(r,s)=>this.fspB(r,s)},["HMF"]:{c:()=>this.hamfC(),t:(r,s)=>this.hamfT(r,s),b:(r,s)=>this.hamfB(r,s)},["HOS"]:{c:()=>this.hossC(),t:(r,s)=>this.hossT(r,s),b:(r,s)=>this.hossB(r,s)},["HOD"]:{c:()=>this.haroldC(),t:(r,s)=>this.ocarT(r,s),b:(r,s)=>this.haroldB(r,s)},["IDF"]:{c:()=>this.idfC(),t:(r,s)=>this.idfT(r,s),b:(r,s)=>this.idfB(r,s)},["OJC"]:{c:()=>this.ocarC(),t:(r,s)=>this.ocarT(r,s),b:(r,s)=>this.ocarB(r,s)},["RLW"]:{c:()=>this.restwandC(),t:(r,s)=>this.restwandT(r,s),b:(r,s)=>this.restwandB(r,s)},["RHW"]:{c:()=>this.ruthwandC(),t:(r,s)=>this.restwandT(r,s),b:(r,s)=>this.ruthwandB(r,s)},["SCZ"]:{c:()=>this.sczC(),t:(r,s)=>this.donkforgeT(r,s),b:(r,s)=>this.donkforgeB(r,s)},["SHA"]:{c:()=>this.smaC(),t:(r,s)=>this.donkforgeT(r,s),b:(r,s)=>this.donkforgeB(r,s)},["SSP"]:{c:()=>this.shspC(),t:(r,s)=>this.shspT(r,s),b:(r,s)=>this.shspB(r,s)},["SDR"]:{c:()=>this.spdryC(),t:(r,s)=>this.friendoT(r,s),b:(r,s)=>this.spdryB(r,s)},["TDW"]:{c:()=>this.tdwC(),t:(r,s)=>this.tdwT(r,s),b:(r,s)=>this.tdwB(r,s)},["TNL"]:{c:()=>this.tnlC(),t:(r,s)=>this.tnlT(r,s),b:(r,s)=>this.tnlB(r,s)},["USY"]:{c:()=>this.usyC(),t:(r,s)=>this.donkforgeT(r,s),b:(r,s)=>this.donkforgeB(r,s)},["UTR"]:{c:()=>this.urexC(),t:(r,s)=>this.urexT(r,s),b:(r,s)=>this.urexB(r,s)}}[t]}testBirth(t,i){return this.lookup(t).t(i,$.toEnterField(i.event))}actBirth(t,i){this.lookup(t).b(i,$.toEnterField(i.event))}iTrigger=!0;trigB;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const r=super.jr3(t,i);if(this.iTrigger){const s=r.jr4("EF");s.bonus=this.trigB}return r}ddf8(t){return this.testBirth(this.cardCode(),t)}jr8(t){this.actBirth(this.cardCode(),t),x.triggerDone()}friendoT(t,i){return t.trigger.creatId!==i.creature.id&&i.creature.owner===t.owner}donkforgeT(t,i){return this.friendoT(t,i)&&i.creature.isTribe("DF")}donkforgeB(t,i){const r=g.jr5(t.trigger.creatId);this.logAct(!1),r.buff(this.level,this.level)}dftxt(){this.text=`When another friendly Darkforged enters play, ${this.name} gets ${p.jr9(this.level,this.level)}.`,this.trigB=this.multNug(this.buffNug(this.level,this.level),.5)}atorC(){this.faction="T",this.rarity="L",this.name="Ator, Thunder Titan",this.iAttack=this.boof6914,this.iHealth=this.iAttack-1,this.tribe.push("GT"),this.text=`Each other friendly ${p.levelGateText(this.level)}creature gets Assault: Aggressive.`,this.trigB=this.rawNug(0,0,0,0,.5)}atorT(t,i){return i.forged&&this.friendoT(t,i)&&D.levelTargetTest(D.ddf2(this.level),i.creature.level)&&!i.creature.opposed}atorB(t,i){i.creature.aggressive=!0}brhrC(){this.faction="N",this.rarity="R",this.name="Brood Horror",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("AB"),this.text=`When another friendly creature enters play, it gets ${p.jr9(this.level,this.level)}. Then ${this.name} gets ${p.jr9(-this.level,-this.level)}.`}brhrB(t,i){dt.itBirthedFirst(i.creature.id,t.creatId)&&(this.logAct(!1,i.creature),i.creature.buff(this.level,this.level),g.jr5(t.creatId).buff(-this.level,-this.level))}bulbC(){this.faction="A",this.rarity="H",this.name="Bulwark Battalion",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("GN"),this.text=`When another friendly creature enters play, it gets Armor ${this.boof468} until the end of the turn.`}bulbB(t,i){dt.itBirthedFirst(i.creature.id,t.creatId)&&(this.logAct(!1,i.creature),i.creature.addMod(y.modT("AR",this.boof468)))}cmyC(){this.faction="T",this.rarity="H",this.name="Cauldron Mystic",this.iAttack=this.boof357,this.iHealth=this.boof71015,this.tribe.push("YT"),this.text=`When a friendly creature enters play, deal ${this.boof234} damage to an enemy creature or player at random.`,this.trigB=this.buffNug(0,this.iAttack)}cmyT(t,i){return i.creature.owner===t.owner}cmyB(t,i){if(dt.itBirthedFirst(i.creature.id,t.creatId)){const r=g.qPlayerCreats(!t.owner),s=S.randInt(0,r.length+1);s===r.length?k.hurtDirect(!t.owner,this.boof234,this.code):r[s].hurtDirect(this.boof234,this.code)}}cycrC(){this.faction="T",this.rarity="H",this.name="Cyclone Rider",this.iAttack=this.lValN([8,10,16]),this.iHealth=this.iAttack/2,this.tribe.push("WN","AS"),this.level===1&&(this.hints=["ZZ-2"]),this.text=`When an enemy creature enters play, if it is unopposed, move ${this.name} to the lane opposing that creature.`,this.trigB=this.rawNug(0,0,0,0,.5)}cycrT(t,i){return i.creature.owner!==t.owner&&!i.creature.opposed}cycrB(t,i){i.creature.opposed||g.jr5(t.creatId).move(g.oppositeLane(i.creature.lane))}dhamC(){this.faction="U",this.rarity="R",this.name="Dusk Hammer",this.iAttack=this.boof51015,this.iHealth=this.boof4812,this.iBT=!0,this.tribe.push("DF","TK"),this.dftxt()}fgdC(){this.faction="A",this.rarity="H",this.name="Forge Guardian Delta",this.iAttack=this.boof71117,this.iHealth=this.iAttack,this.tribe.push("RB","GD");const t=L.getCard(Z.fgoc(this.level));this.text=`When ${this.name} enters play, if there is a friendly Alpha Beta, and Gamma, put a ${p.tokName(t)} in your discard pile.`}fgdT(t,i){return i.creature.id===t.creatId}fgdB(t,i){const r=g.qPlayerCreats(t.owner).map(s=>s.code.slice(0,3));if(r.includes("FGA")&&r.includes("FGB")&&r.includes("FGG")){const s=k.toPlayer(t.owner);s.discard.push(Z.fgoc(this.level));const c=y.trigger("NT",this.code);c.bonus=this.rawNug(0,0,0,0,10),s.triggers.push(c)}}fspC(){if(this.faction="A",this.rarity="L",this.name="Flowsteel Prototype",this.iAttack=this.lValN([3,6,8]),this.iHealth=this.lValN([8,15,20]),this.tribe.push("SS"),this.iTrigger=this.level>1,this.iTrigger){this.text=`When you Forge a ${p.levelGateText(this.level-1)}creature, ${this.name} gets +attack equal to that creature's attack.`;const t=this.avgCreatureStats(this.level-1);this.trigB=this.buffNug(t[0],0)}}fspT(t,i){return!!(i.forged&&i.creature.owner===t.owner&&L.getCard(i.creature.code).level<this.level)}fspB(t,i){g.jr5(t.trigger.creatId).buff(i.creature.attack,0)}hamfC(){this.faction="T",this.rarity="H",this.name="Hammerfang",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("YT"),this.text=`When an enemy creature enters play opposing ${this.name}, move this to an available lane at random.`,this.trigB=this.rawNug(0,0,0,0,.5)}hamfT(t,i){return i.creature.owner!==t.owner?g.jr5(t.creatId).lane===g.oppositeLane(i.creature.lane):!1}hamfB(t,i){const r=g.emptyLanes(t.owner),s=r.length;s>0&&g.jr5(t.creatId).move(r[S.randInt(0,s)])}hossC(){this.faction="U",this.rarity="R",this.name="Harbinger of Spring",this.iAttack=this.lValN([5,8,11]),this.iHealth=this.iAttack,this.tribe.push("DY");const t=this.boof234;this.text=`When another friendly creature enters play, if it wasn't Forged, ${this.name} gets ${p.jr9(t,t)}.`,this.trigB=this.multNug(this.buffNug(t,t),1.5)}hossT(t,i){return this.friendoT(t,i)&&!i.forged}hossB(t,i){const r=g.jr5(t.trigger.creatId),s=this.boof234;this.logAct(!1,i.creature),r.buff(s,s)}haroldC(){this.faction="T",this.rarity="R",this.name="Herald of Destruction",this.iAttack=this.boof369,this.iHealth=this.lValN([9,12,18]),this.tribe.push("FR","AS"),this.text=`When an enemy creature enters play, if it wasn't Forged, deal damage equal to ${this.name}'s attack to the enemy player.`,this.trigB=this.playerNug(this.iAttack*.5)}haroldB(t,i){if(dt.itBirthedFirst(i.creature.id,t.creatId)){const r=g.jr5(t.creatId);k.hurtDirect(!r.owner,r.attack,this.code)}}idfC(){this.faction="N",this.rarity="H",this.name="Indomitable Fiend",this.iAttack=2,this.iHealth=2,this.maxLevel=1,this.tribe.push("ZB"),this.hints=["ST","ZZ+1"],this.text=`When ${this.name} enters play, if it wasn't Forged, it gets ${p.jr9(5,5)} for each player rank you are.`}idfT(t,i){return i.creature.id===t.creatId&&!i.forged}idfB(t,i){const r=5*k.toPlayer(t.owner).rank;i.creature.buff(r,r)}ocarC(){this.faction="A",this.rarity="H",this.name="Oreian Justicar",this.iAttack=this.boof5814,this.iHealth=this.boof81220,this.tribe.push("HM");const t=this.ocarbuff;this.text=`When an enemy creature enters play, if it wasn't Forged, it gets ${p.jr9(t,0)}.`,this.trigB=this.buffNug(-.5*t,0)}ocarT(t,i){return i.creature.owner!==t.owner&&!i.forged}ocarB(t,i){dt.itBirthedFirst(i.creature.id,t.creatId)&&i.creature.buff(this.ocarbuff,0)}get ocarbuff(){return this.lValN([-5,-10,-20])}restwandC(){this.faction="U",this.rarity="H",this.name="Restless Wanderers",this.iAttack=this.boof51014,this.iHealth=this.boof3610,this.tribe.push("ST","WD");const t=this.boof369;this.text=`When another friendly Spirit Wanderer enters play, ${this.name} gets ${p.jr9(t,t)}.`,this.trigB=this.multNug(this.buffNug(t,t),.5)}restwandT(t,i){return this.friendoT(t,i)&&i.creature.isTribe("WD")}restwandB(t,i){const r=g.jr5(t.trigger.creatId),s=this.boof369;this.logAct(!1),r.buff(s,s)}ruthwandC(){this.faction="N",this.rarity="C",this.name="Ruthless Wanderers",this.iAttack=this.boof3610,this.iHealth=this.boof51014,this.tribe.push("ST","WD");const t=this.boof369,i=-t;this.text=`When another friendly Spirit Wanderer enters play, the creature opposing this gets ${p.jr9(i,i)}.`,this.trigB=this.multNug(this.buffNug(t,t),.5)}ruthwandB(t,i){const s=g.jr5(t.trigger.creatId).opposed;if(s){const c=-this.boof369;this.logAct(!1,s),s.buff(c,c)}}sczC(){this.faction="N",this.rarity="R",this.name="Shadeclaw Zombie",this.iAttack=this.boof4812,this.iHealth=this.iAttack+this.level,this.iRegen=this.level,this.tribe.push("DF","ZB"),this.dftxt()}smaC(){this.faction="A",this.rarity="R",this.name="Shadowmist Angel",this.iHealth=this.boof369,this.iAttack=this.iHealth*2,this.iArmor=this.level,this.tribe.push("DF","AG"),this.dftxt()}shspC(){this.faction="U",this.rarity="H",this.name="Shroudthorn Splicer",this.iHealth=this.boof3711,this.iAttack=this.iHealth-1,this.tribe.push("DF","PL"),this.text=`When another friendly Darkforged enters play, if it was Forged, Spawn a ${this.iAttack}/${this.iHealth} Darkforged Mimic.`,this.trigB=this.statSpawnNug(this.iAttack,this.iHealth)}shspT(t,i){return this.friendoT(t,i)&&i.forged&&i.creature.isTribe("DF")}shspB(t,i){dt.itBirthedFirst(i.creature.id,t.creatId)&&g.birth("DFM"+this.level,"S",t.owner)}spdryC(){this.faction="U",this.rarity="R",this.name="Spring Dryad",this.iAttack=this.boof469,this.iHealth=this.iAttack,this.tribe.push("DY"),this.text=`When another friendly creature enters play, ${this.name} gets ${p.jr9(this.level,this.level)}.`,this.trigB=this.multNug(this.buffNug(this.level,this.level),1.5)}spdryB(t,i){const r=g.jr5(t.trigger.creatId);this.logAct(!1,i.creature),r.buff(this.level,this.level)}tdwC(){this.faction="N",this.rarity="R",this.name="Tarsus Deathweaver",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.tribe.push("HM");const t=this.boof246;this.text=`When a friendly creature enters play, if it wasn't Forged, it gets ${p.jr9(t,t)}.`,this.trigB=this.buffNug(t,t)}tdwT(t,i){return i.creature.owner===t.owner&&!i.forged}tdwB(t,i){if(dt.itBirthedFirst(i.creature.id,t.creatId)){const r=this.boof246;i.creature.buff(r,r)}}tnlC(){this.faction="N",this.rarity="L",this.name="Tarsus Necrolord",this.iAttack=this.boof4812,this.iHealth=this.iAttack,this.tribe.push("HM");const t=this.boof124,i=L.getCard(Z.zomc(this.level));this.text=`Forge: Spawn a ${p.tokName(i)} for each friendly creature that was destroyed this turn.~When a friendly Zombie enters play, ${this.name} gets ${p.jr9(t,t)}.`,this.trigB=this.buffNug(t,t)}tnlT(t,i){return i.creature.owner===t.owner&&i.creature.isTribe("ZB")}tnlB(t,i){const r=g.jr5(t.trigger.creatId),s=this.boof124;r.buff(s,s)}usyC(){this.faction="T",this.rarity="R",this.name="Umbraskin Yeti",this.iAttack=this.boof369,this.iHealth=this.iAttack*2,this.iMobile=this.level,this.tribe.push("DF","YT"),this.dftxt()}urexC(){this.faction="U",this.rarity="H",this.name="Uterradon Rex",this.iAttack=this.boof4813,this.iHealth=this.boof71118,this.tribe.push("DN");const t=this.boof124;this.text=`When another friendly Dinosaur enters play, it gets ${p.jr9(t,t)}.`,this.trigB=this.buffNug(t,t)}urexT(t,i){return this.friendoT(t,i)&&i.creature.isTribe("DN")}urexB(t,i){if(dt.itBirthedFirst(i.creature.id,t.creatId)){const r=this.boof124;i.creature.buff(r,r)}}static itBirthedFirst(t,i){if(t===i)return!0;let r=!1;const s=W.findDeathTime(i);if(S.isUn(s))r=!0;else{const c=g.findBirthTime(t);(S.isUn(c)||c<=s)&&(r=!0)}return r}}class he extends Xe{lookup(t){return{["AGM"]:{c:()=>this.agamC(),h:(r,s,c,f)=>this.agamH(r,s,c,f)},["BWK"]:{c:()=>this.blwalkC(),h:(r,s,c,f)=>this.blwalkH(r,s,c,f)},["BRF"]:{c:()=>this.bfangC(),h:(r,s,c,f)=>this.bfangH(r,s,c,f)},["CDT"]:{c:()=>this.cadtC(),h:(r,s,c,f)=>this.cadtH(r,s,c,f)},["FSL"]:{c:()=>this.fslmC(),h:(r,s,c,f)=>this.fslmH(r,s,c,f)},["GSC"]:{c:()=>this.gcobC(),h:(r,s,c,f)=>this.gcobH(r,s,c,f)},["IHA"]:{c:()=>this.ibhaC(),h:(r,s,c,f)=>this.ibhaH(r,s,c,f)},["SHS"]:{c:()=>this.shimfC(),h:(r,s,c,f)=>this.shimfH(r,s,c,f)}}[t]}image(t){return this.rarity==="T"?this.fixedImage(t):this.leveledImage(t)}cardConstruct(t){this.hints=["OP"],this.lookup(t).c()}creatHit(t,i,r,s,c){this.lookup(t).h(i,r,s,c)}constructor(t){super(t,!0),this.cardConstruct(this.cardCode())}jr8(t){const i=$.toDamage(t.event);this.creatHit(this.cardCode(),t,i,i.srcCreat,i.hurtCreat),x.triggerDone()}agamC(){this.faction="T",this.rarity="L",this.name="Agamemnon",this.iAttack=this.boof4814,this.iHealth=this.lValN([8,12,18]),this.level>1&&(this.iMobile=1,this.iAggro=this.level===3),this.tribe.push("GT"),this.text=`When ${this.name} ${p.dbdtac()} on your turn, this battles again.`,this.trigB=this.buffNug(this.iAttack/2,0)}agamH(t,i,r,s){t.owner===k.getActiveB()&&(r.extraBattles+=1)}blwalkC(){this.faction="N",this.rarity="R",this.name="Blight Walker",this.iAttack=this.boof137,this.iHealth=this.lValN([5,10,17]),this.tribe.push("ZB"),this.text=`When ${this.name} ${p.dbdtac(this.level)}, destroy that creature.`,this.trigB=this.avgSpawnNug()}blwalkH(t,i,r,s){s.status==="A"&&D.levelTestCommon(s.level,this.level)&&W.destroy(s,this.code)}bfangC(){this.faction="U",this.rarity="T",this.name="Broodfang",this.iAttack=this.level,this.iHealth=this.level,this.maxLevel=this.level,this.minLevel=this.level,this.tribe.push("SN"),this.text=this.poisonText(this.iAttack),this.trigB=this.regnNug(this.iAttack)}bfangH(t,i,r,s){s.addPoison(this.iAttack)}poisonText(t){return`When ${this.name} ${p.dbdtac()}, give that creature gets Poison ${t}.`}cadtC(){this.faction="U",this.rarity="R",this.name="Cadaverous Thicket",this.iAttack=this.boof135,this.iHealth=this.lValN([7,12,22]),this.tribe.push("PL"),this.text=this.poisonText(this.iAttack),this.trigB=this.regnNug(this.iAttack)}cadtH(t,i,r,s){s.addPoison(this.iAttack)}fslmC(){this.faction="N",this.rarity="C",this.name="Festering Slime",this.iAttack=this.level,this.iHealth=this.boof61218,this.tribe.push("OZ");const t=this.level+2;this.text=`When ${this.name} ${p.dbdtac()}, that creature gets ${p.jr9(-t,-t)}.`,this.trigB=this.buffNug(t,t)}fslmH(t,i,r,s){const c=this.lValN([-3,-4,-5]);s.buff(c,c)}gcobC(){this.faction="U",this.rarity="C",this.name="Ghostscale Cobra",this.iAttack=this.boof4610,this.iHealth=this.boof135,this.tribe.push("SN"),this.text=this.poisonText(this.iAttack),this.trigB=this.regnNug(this.iAttack)}gcobH(t,i,r,s){s.addPoison(this.iAttack)}ibhaC(){this.faction="A",this.rarity="L",this.name="Ironbeard, Hammer of Anvillon",this.iAttack=this.lValN([4,7,12,15]),this.iHealth=this.lValN([7,11,17,25]),this.iArmor=this.lValN([1,3,5,20]),this.tribe.push("FB"),this.maxLevel=4;const t=this.level===4?"'s attack gets reduced to 0":` gets ${p.jr9(this.boof246n,0)}`;this.text=`When Ironbeard ${p.dbdtac()}, that creature${t}, and moves to an available enemy lane at random.`,this.trigB=this.buffNug(this.lValN([2,4,6,16]),0)}ibhaH(t,i,r,s){if(s.status==="A"){const c=this.level===4?s.attack*-1:this.boof246n;s.buff(c,0),g.fling(s)}}shimfC(){this.faction="U",this.rarity="R",this.name="Shimmerfang Serpent",this.iAttack=this.boof357,this.iHealth=this.boof61016,this.tribe.push("SN"),this.text=`When ${this.name} ${p.dbdtac()}, that creatures gets that much Poison.`,this.trigB=this.regnNug(this.iAttack)}shimfH(t,i,r,s){s.addPoison(i.dmg)}}class Ot extends Xe{lookup(t){return{["ABR"]:{c:()=>this.ashbC(),h:(r,s,c)=>this.ashyH(r,s,c)},["AMY"]:{c:()=>this.ashmC(),h:(r,s,c)=>this.ashyH(r,s,c)},["CFB"]:{c:()=>this.cfbC(),h:(r,s,c)=>this.cfbH(r,s,c)},["EPS"]:{c:()=>this.epsdC(),h:(r,s,c)=>this.epsdH(r,s,c)},["EFM"]:{c:()=>this.efmC(),h:(r,s,c)=>this.efmH(r,s,c)},["FBC"]:{c:()=>this.fbcC(),h:(r,s,c)=>this.fbcH(r,s,c)},["RTS"]:{c:()=>this.rzstC(),h:(r,s,c)=>this.rzstH(r,s,c)},["RSE"]:{c:()=>this.rselC(),h:(r,s,c)=>this.rselH(r,s,c)},["SVH"]:{c:()=>this.strhyC(),h:(r,s,c)=>this.strhyH(r,s,c)},["URB"]:{c:()=>this.uridC(),h:(r,s,c)=>this.uridH(r,s,c)},["VES"]:{c:()=>this.veskC(),h:(r,s,c)=>this.veskH(r,s,c)}}[t]}cardConstruct(t){this.hints=["OL"],this.lookup(t).c()}creatHit(t,i,r,s){this.lookup(t).h(i,r,s)}bothTurns=!0;constructor(t){super(t,!1),this.cardConstruct(this.cardCode())}jr8(t){const i=$.toDamage(t.event);i.srcCreat&&(this.bothTurns||i.srcCreat.owner===k.getActiveB())&&this.creatHit(this.cardCode(),t,i,i.srcCreat),x.triggerDone()}ashyC(){this.faction="T",this.rarity="C",this.tribe.push("FR","AS");const t=this.boof124;this.text=`When ${this.name} ${p.dbdtap()}, it gets ${p.jr9(t,t)}.`,this.trigB=this.buffNug(t,t)}ashyH(t,i,r){const s=this.boof124;r.buff(s,s)}ashbC(){this.name="Ashurian Brawler",this.iAttack=this.boof7911,this.iHealth=this.iAttack,this.ashyC()}ashmC(){this.name="Ashurian Mystic",this.iAttack=this.boof3610,this.iHealth=this.boof5812,this.iAggro=!0,this.ashyC()}cfbC(){this.faction="T",this.rarity="H",this.name="Cinderfist Brawler",this.iAttack=this.boof71014,this.iHealth=this.boof357,this.tribe.push("FR","AS"),this.text=`When ${this.name} ${p.dbdtap()}, deal that much damage to that player again.`,this.trigB=this.playerNug(this.iAttack/2)}cfbH(t,i,r){k.hurtDirect(!r.owner,i.dmg,r.code)}epsdC(){this.faction="A",this.rarity="T",this.name="Epoch Soldier",this.minLevel=this.level,this.maxLevel=this.level,this.iAttack=this.boof4710,this.iHealth=this.iAttack,this.tribe.push("HM"),this.bothTurns=!1,this.text=`When ${this.name} ${p.dbdtap()} on your turn, draw a card at the end of the turn.`,this.trigB=this.rawNug(0,0,0,0,.2)}epsdH(t,i,r){const s=y.trigger("TE","EPH"+this.level);s.changes=!0,s.bonus=this.rawNug(0,0,0,0,lt.dcWeight),k.toPlayer(t.owner).triggers.push(s)}efmC(){this.faction="T",this.rarity="L",this.name="Everflame Mystic",this.iAttack=this.boof5813,this.iHealth=this.iAttack+1,this.tribe.push("FR","AS"),this.text=`When ${this.name} ${p.dbdtap()} on your turn, you may play ${this.lValS(["one","two","three"])} spells this turn.`,this.trigB=this.rawNug(0,0,0,0,this.level*.5)}efmH(t,i,r){if(k.getActiveB()===r.owner)for(let s=0;s<this.level;s++){const c=I.freeCard(this.code);c.condition.card="S"}}fbcC(){this.faction="T",this.rarity="L",this.name="Flameblade Champion",this.iAttack=this.boof4712,this.iHealth=this.boof5916,this.tribe.push("FR","EL"),this.text=`When ${this.name} ${p.dbdtap()}, deal that much damage to each enemy creature.`,this.trigB=this.buffNug(this.iAttack,0)}fbcH(t,i,r){const s=M.tick();g.qPlayerCreats(!r.owner).forEach(c=>c.hurtDirect(i.dmg,this.code,s))}rzstC(){this.faction="T",this.rarity="C",this.name="Razortooth Stalker",this.iAttack=this.boof4812,this.iHealth=this.iAttack+1,this.iMobile=1,this.tribe.push("DN");const t=this.boof235;this.text=`When ${this.name} ${p.dbdtap()}, it gets ${p.jr9(t,t)}.`,this.trigB=this.buffNug(t,t)}rzstH(t,i,r){const s=this.boof235;r.buff(s,s)}rselC(){this.faction="T",this.rarity="H",this.name="Rumblestone Elemental",this.iAttack=this.boof246,this.iHealth=this.level,this.iAggro=!0,this.tribe.push("ER","EL"),this.text=`When ${this.name} ${p.dbdtap()}, deal that much damage to itself as well.~Assault: Spawn a copy of ${this.name}. Then repeat this for each copy.`,this.trigB=this.rawNug(0,0,0,0,-.1)}rselH(t,i,r){r.hurtDirect(i.dmg,this.code)}strhyC(){this.faction="U",this.rarity="C",this.name="Stranglevine Hydra",this.iAttack=this.boof5815,this.iHealth=this.iAttack+1,this.tribe.push("HY"),this.text=`When ${this.name} ${p.dbdtap()}, it gets Regenerate ${this.level}.`,this.trigB=this.regnNug(this.level)}strhyH(t,i,r){r.addRegen(this.level)}uridC(){this.faction="U",this.rarity="L",this.name="Uterradon Ridgeback",this.iAttack=this.boof71117,this.iHealth=this.boof4713,this.iBT=!0,this.tribe.push("DN"),this.bothTurns=!1;const t=this.boof124;this.text=`When ${this.name} ${p.dbdtap()} on your turn, each friendly creature gets ${p.jr9(t,t,this.level===3)}${this.level===3?", and Breakthrough":""}.`,this.trigB=this.buffNug(t,t)}uridH(t,i,r){const s=this.boof124,c=this.level===3;g.ddf1().forEach(f=>{f.buff(s,s),c&&(f.breakthrough=!0)})}veskC(){this.faction="N",this.rarity="L",this.name="Vyric Ebonskull",this.iAttack=this.boof3713,this.iHealth=this.boof71117,this.tribe.push("VP");let t="",i=.5;this.level===3&&(t=" Then Spawn a copy of that creature."),this.text=`When Vyric ${p.dbdtap()}, destroy an enemy ${p.levelGateText(this.level)}creature at random.`+t,this.trigB=this.multNug(this.avgSpawnNug(),i)}veskH(t,i,r){const s=y.crTarg();s.player=k.toTarget(i.hurtPlayer),s.level=D.ddf2(this.level);const c=g.creatByTarget(s);if(c.length>0){const f=M.tick(),m=c[S.randInt(0,c.length)];W.destroy(m,this.code,f),this.level===3&&g.birth(m.code,"S",r.owner,void 0,f)}}}class O extends N{lookup(t){return{["AGK"]:{c:()=>this.agknitC(),f:r=>this.agknitF(r)},["AMS"]:{c:()=>this.squadC(),f:r=>this.squadF(r)},["AFR"]:{c:()=>this.afsC(),f:r=>this.afsF(r)},["ATI"]:{c:()=>this.atiC(),f:r=>this.atiF(r)},["BZS"]:{c:()=>this.bzshC(),f:r=>this.bzshF(r)},["BTR"]:{c:()=>this.bwtC(),f:r=>this.bwtF(r)},["BSS"]:{c:()=>this.bssC(),f:r=>this.bssF(r)},["BZD"]:{c:()=>this.bzdrC(),f:r=>this.bzdrF(r)},["BFM"]:{c:()=>this.bfmC(),f:r=>this.bfmF(r)},["CTI"]:{c:()=>this.charnC(),f:r=>this.charnF(r)},["CHH"]:{c:()=>this.chihC(),f:r=>this.chihF(r)},["CSW"]:{c:()=>this.chickenC(),f:r=>this.chickenF(r)},["DFR"]:{c:()=>this.dfrC(),f:r=>this.dfrF(r)},["DSW"]:{c:()=>this.dswC(),f:r=>this.dswF(r)},["DBA"]:{c:()=>this.dbaC(),f:r=>this.dbaF(r)},["DBN"]:{c:()=>this.drbC(),f:r=>this.drbF(r)},["DDD"]:{c:()=>this.dddC(),f:r=>this.dddF(r)},["EWT"]:{c:()=>this.espwrC(),f:r=>this.espwrF(r)},["FWT"]:{c:()=>this.fwtC(),f:r=>this.fwtF(r)},["GSW"]:{c:()=>this.gwurmC(),f:r=>this.gwurmF(r)},["GSS"]:{c:()=>this.gsC(),f:r=>this.gsF(r)},["IMA"]:{c:()=>this.iracoC(),f:r=>this.iracoF(r)},["KSB"]:{c:()=>this.ksbC(),f:r=>this.ksbF(r)},["LGT"]:{c:()=>this.legtitC(),f:r=>this.legtitF(r)},["LBD"]:{c:()=>this.lbdC(),f:r=>this.lbdF(r)},["LMV"]:{c:()=>this.lyrC(),f:r=>this.lyrF(r)},["MOE"]:{c:()=>this.moeC(),f:r=>this.moeF(r)},["MMA"]:{c:()=>this.mmaC(),f:r=>this.mmaF(r)},["MMR"]:{c:()=>this.mmrC(),f:r=>this.mmrF(r)},["MBR"]:{c:()=>this.mbrC(),f:r=>this.mbrF(r)},["MTD"]:{c:()=>this.mossC(),f:r=>this.mossF(r)},["NSY"]:{c:()=>this.nysymC(),f:r=>this.nysymF(r)},["OXM"]:{c:()=>this.onxmarC(),f:r=>this.onxmarF(r)},["OFM"]:{c:()=>this.ofmC(),f:r=>this.ofmF(r)},["OPK"]:{c:()=>this.orpC(),f:r=>this.orpF(r)},["PHM"]:{c:()=>this.phmC(),f:r=>this.phmF(r)},["PSM"]:{c:()=>this.palsC(),f:r=>this.palsF(r)},["POK"]:{c:()=>this.pokC(),f:r=>this.pokF(r)},["POT"]:{c:()=>this.potC(),f:r=>this.potF(r)},["PMI"]:{c:()=>this.prinvC(),f:r=>this.prinvF(r)},["REW"]:{c:()=>this.rewC(),f:r=>this.rewF(r)},["SMD"]:{c:()=>this.scorchC(),f:r=>this.scorchF(r)},["SOC"]:{c:()=>this.scythC(),f:r=>this.scythF(r)},["SDN"]:{c:()=>this.souldrC(),f:r=>this.souldrF(r)},["SGG"]:{c:()=>this.ssggC(),f:r=>this.ssggF(r)},["SLG"]:{c:()=>this.splgC(),f:r=>this.splgF(r)},["SBD"]:{c:()=>this.sbdC(),f:r=>this.sbdF(r)},["SSK"]:{c:()=>this.sssC(),f:r=>this.sssF(r)},["SYL"]:{c:()=>this.lotusC(),f:r=>this.lotusF(r)},["TGI"]:{c:()=>this.tgiC(),f:r=>this.tgiF(r)},["TRA"]:{c:()=>this.toraC(),f:r=>this.toraF(r)},["TRS"]:{c:()=>this.torsC(),f:r=>this.torsF(r)},["TRV"]:{c:()=>this.torvC(),f:r=>this.torvF(r)},["TRW"]:{c:()=>this.torwC(),f:r=>this.torwF(r)},["UGL"]:{c:()=>this.umglidC(),f:r=>this.umglidF(r)},["UWL"]:{c:()=>this.uwarC(),f:r=>this.uwarF(r)},["UWS"]:{c:()=>this.ustokeC(),f:r=>this.ustokeF(r)},["UIW"]:{c:()=>this.uiwC(),f:r=>this.uiwF(r)},["UTM"]:{c:()=>this.umaulC(),f:r=>this.umaulF(r)},["VIC"]:{c:()=>this.vlfxC(),f:r=>this.vlfxF(r)},["VIK"]:{c:()=>this.vikC(),f:r=>this.vikF(r)},["VND"]:{c:()=>this.vdrkC(),f:r=>this.vdrkF(r)},["VNS"]:{c:()=>this.vnsC(),f:r=>this.vnsF(r)},["WMC"]:{c:()=>this.warC(),f:r=>this.warF(r)},["WWP"]:{c:()=>this.wwpC(),f:r=>this.wwpF(r)},["WFB"]:{c:()=>this.wfbC(),f:r=>this.wfbF(r)},["XTR"]:{c:()=>this.xtmC(),f:r=>this.xtmF(r)},["ZDK"]:{c:()=>this.zdkC(),f:r=>this.zdkF(r)}}[t]}cardForge(t,i){this.lookup(t).f(i)}ftext="";forges=!0;flanks;allied="X";constructor(t){super(t),this.lookup(this.cardCode()).c();let i="";this.flanks&&(i="Flank"),this.forges&&(i?i="Forge/"+i:i=p.forglied(this.allied)),i&&(this.text=i+": "+this.ftext),this.ftext=""}image(t){return this.rarity==="T"?super.fixedImage(t):super.image(t)}jr3(t,i){const r=super.jr3(t,i);if(this.forges&&r.jr4("FR"),this.flanks){const s=r.jr4("FK");s.bonus=this.flanks}return r}ddf8(t){return Dt.extractCardCode(t.trigger.logicCode)==="MMR"}jr8(t){const i=this.cardCode();if(t.trigger.type==="TE"&&i==="MMR"){this.logAct(!1);const r=t.event,s=k.toPlayer(r.playerA);k.drawCard(s,this.level);const c=y.trigIdx(s.triggers,t.trigger);c>-1&&s.triggers.splice(c,1)}else this.cardForge(this.cardCode(),t);x.triggerDone()}agknitC(){this.faction="A",this.rarity="L",this.name="Aegis Knight",this.iAttack=this.boof5814,this.iHealth=this.iAttack,this.tribe.push("HM"),this.iArmor=this.lValN([1,2,5]),this.ftext="Each friendly creature deals damage equal to its Armor to the opposing creature"}agknitF(t){const i=y.crFriendTarg();i.hasArmor=!0;const r=M.tick();g.creatByTarget(i).forEach(s=>{s.opposed&&s.opposed.hurtDirect(s.armor,s.code,r)})}squadC(){this.faction="A",this.rarity="H",this.name="Aeromind Squadron",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("MM"),this.iMobile=1,this.ftext="Put a Metamind at random from your deck into your hand."}squadF(t){const i=k.toPlayer(t.owner),r=y.target("TH");r.player=k.toTarget(i),r.tribe="MM";const s=D.deckByTarget(r),c=s.length;if(c>0){const f=s[S.randInt(0,c)];i.deck.splice(f[1],1),i.hand.push(f[0])}}afsC(){this.faction="T",this.rarity="H",this.name="Ashurian Flamesculptor",this.iAttack=this.boof5915,this.iHealth=this.boof3610,this.tribe.push("FR","AS"),this.forges=this.level>1,this.consistent=this.forges,this.forges&&(this.ftext=`You may play an additional ${p.levelGateText(this.level-1)}Tempys spell this turn.`,this.addSp("C",0))}afsF(t){const i=I.freeCard(this.code);i.condition.card="S",i.condition.level=D.ddf2(this.level-1),i.condition.faction="T"}atiC(){this.faction="N",this.rarity="L",this.name="Avarice, the Insatiable",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.iMobile=1,this.tribe.push("DG");let t="";this.level<3&&(t="Discard down to one card at random. "),this.ftext=`${t}You may play an additional spell this turn.`}atiF(t){if(this.level<3){const r=k.toPlayer(t.owner);if(r.hand.length>1){let s=r.hand.slice(),c=[];for(;s.length>1;)c.push(s.splice(S.randInt(0,s.length),1)[0]);r.discard.push(...c),r.hand=s}}const i=I.freeCard(this.code);i.condition.card="S"}bzshC(){this.faction="T",this.rarity="C",this.name="Blizzard Shaman",this.iAttack=this.boof61014,this.iHealth=this.iAttack+1,this.tribe.push("WN","AS"),this.ftext="Move another friendly creature at random to another available lane at random."}bzshF(t){const i=g.creatByTarget(y.crFriendNotMeTarg(t.creatId)),r=i.length;if(r<4&&r>0){const s=i[S.randInt(0,r)],c=g.emptyLanes(s.owner);this.logAct(!1,s),s.move(c[S.randInt(0,c.length)])}}bwtC(){if(this.faction="U",this.rarity="H",this.name="Bramblewood Tracker",this.iAttack=this.boof3712,this.iHealth=this.iAttack+3,this.tribe.push("HM"),this.forges=this.level>1,this.forges){const t=this.level-1;this.ftext=`You may play an additional ${p.levelGateText(t)}Uterra creature this turn.`,this.consistent=!0,this.addSp("C",0)}else this.hints=["LG"]}bwtF(t){const i=I.freeCard(this.code);i.condition.card="C",i.condition.faction="U",i.condition.level=D.ddf2(this.level-1)}bssC(){this.faction="A",this.rarity="L",this.name="Brightsteel Sentinal",this.iHealth=this.boof51015,this.iAttack=this.iHealth-1,this.tribe.push("RB"),this.addSp("M",this.iHealth),this.ftext=`Each friendly Robot gets Armor ${this.iHealth} this turn.`}bssF(t){const i=this.boof51015,r=y.crFriendTarg();r.tribe="RB",r.canArmor=!0,g.creatByTarget(r).forEach(c=>{c.addMod(y.modT("AR",i))})}bzdrC(){this.faction="N",this.rarity="R",this.name="Byzerak Drake",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.iRegen=this.level,this.allied="T",this.tribe.push("DG"),this.addSp("R",this.level),this.ftext=`Mobility ${this.level}.`}bzdrF(t){I.allied(this.allied)&&g.jr5(t.creatId).addMobility(this.level)}bfmC(){this.faction="N",this.rarity="H",this.name="Byzerak Frostmaiden",this.iAttack=this.boof135,this.iHealth=this.boof91420,this.tribe.push("HM");const t=this.boof246;this.flanks=this.buffNug(t*2,0),this.ftext=`If ${this.name} is opposed, the opposing creature gets ${p.jr9(-1*t,0)} and this gets ${p.jr9(t,0)}.~Allied Tempys: Mobility ${this.level}.`}bfmF(t){const r=$.toEnterField(t.event).creature;t.trigger.type==="FR"&&I.allied("T")&&r.addMobility(this.level);const s=r.opposed;if(s){const c=this.boof246;s.buff(-1*c,0),r.buff(c,0)}}charnC(){this.faction="N",this.rarity="C",this.name="Charnel Titan",this.iAttack=this.boof359,this.iHealth=this.boof5814,this.tribe.push("AB");const t=this.boof357;this.ftext=`If there is an enemy creature with ${t} or less attack, ${this.name} gets ${p.jr9(t,t)}.`}charnF(t){const i=this.boof357,r=y.crEnemyTarg();r.maxAttack=i,g.creatByTarget(r).length>0&&g.jr5(t.creatId).buff(i,i)}chihC(){this.faction="U",this.rarity="C",this.name="Chistlehearth Hunter",this.iAttack=this.lValN([2,6,11]),this.iHealth=this.boof81217,this.tribe.push("HM"),this.ftext=`${this.name} gets ${p.jr9(1,0)} for each other friendly creature.`}chihF(t){const i=g.ddf1().length;i>1&&g.jr5(t.creatId).buff(i-1,0)}chickenC(){this.faction="T",this.rarity="L",this.name="Cindersmoke Wyvern",this.iAttack=this.boof3610,this.iHealth=this.lValN([7,12,17]),this.tribe.push("DG"),this.iMobile=this.boof124,this.forges=!1,this.flanks=this.buffNug(this.iAttack,0),this.ftext="Deal damage equal to its attack to the opposing creature. If unopposed, deal that damage to the enemy player instead."}chickenF(t){const i=$.toEnterField(t.event),r=i.creature.attack,s=i.creature.opposed;s?s.hurtDirect(r,this.code):k.hurtDirect(!t.owner,r,this.code)}dfrC(){this.faction="N",this.rarity="H",this.name="Darkfrost Reaper",this.iAttack=this.boof6916,this.iHealth=this.boof3713,this.tribe.push("SK"),this.ftext="Destroy each creature with 1 or less attack."}dfrF(t){const i=y.crTarg();i.maxAttack=1;const r=g.creatByTarget(i),s=M.tick();r.forEach(c=>{W.destroy(c,this.code,s)})}dswC(){this.faction="N",this.rarity="C",this.name="Darkshard Witch",this.iAttack=this.boof51015,this.iHealth=this.iAttack-1,this.tribe.push("DF","HM");const t=this.boof234;this.ftext=`Deal ${t} damage to the enemy player and gain ${t} health for each other friendly Darkforged.`}dswF(t){const i=y.crFriendNotMeTarg(t.creatId);i.tribe="DF";const r=this.boof234*g.creatByTarget(i).length;r>0&&(k.hurtDirect(!t.owner,r,this.code),k.heal(t.owner,r,this.code))}dbaC(){this.faction="U",this.rarity="H",this.name="Deepbranch Ancient",this.iAttack=this.boof4812,this.iHealth=this.iAttack,this.tribe.push("HY"),this.ftext=`If there is a friendly creature in each lane, ${this.name} gets ${p.jr9(this.iAttack,this.iHealth)}.`}dbaF(t){g.ddf1().length===5&&g.jr5(t.creatId).buff(this.iAttack,this.iHealth)}drbC(){this.faction="N",this.rarity="C",this.name="Dirge Banshee",this.iAttack=this.boof248,this.iHealth=this.boof61016,this.tribe.push("ST"),this.hints=["OP"];const t=this.boof246;this.flanks=this.buffNug(t*2,0),this.ftext=`If ${this.name} is opposed, the opposing creature gets ${p.jr9(-t,0)} and this gets ${p.jr9(t,0)}.`}drbF(t){const i=$.toEnterField(t.event),r=i.creature.opposed;if(r){const s=this.boof246;r.buff(-s,0),i.creature.buff(s,0)}}dddC(){this.faction="N",this.rarity="L",this.name="Doomwing, Dire Drake",this.iAttack=this.boof61018,this.iHealth=this.lValN([2,6,10]),this.iMobile=this.level,this.tribe.push("DG"),this.level>1&&(this.hints=[this.level===2?"ZZ-2":"ZZ-5"]),this.forges=!1,this.flanks=this.multNug(this.avgSpawnNug(),.5),this.ftext=`Destroy the opposing ${p.levelGateText(this.level)}creature.`}dddF(t){const r=$.toEnterField(t.event).creature.opposed;r&&D.levelTestCommon(r.level,this.level)&&W.destroy(r,this.code)}espwrC(){this.faction="U",this.rarity="R",this.name="Esperian Wartusk",this.iAttack=this.boof5916,this.iHealth=this.iAttack-1,this.iBT=!0,this.allied="A",this.tribe.push("TK");const t=this.boof124;this.ftext=`Armor ${t}.`}espwrF(t){I.allied(this.allied)&&g.jr5(t.creatId).addArmor(this.boof124)}fwtC(){this.faction="U",this.rarity="H",this.name="Frostwild Tracker",this.iAttack=this.boof4712,this.iHealth=this.boof248,this.tribe.push("TG"),this.forges=this.level>1;const t=this.level-1;this.ftext=`You may play an additional ${p.levelGateText(t)}creature this turn.`,this.level===1&&(this.hints=["LG"])}fwtF(t){const i=I.freeCard(this.code);i.condition.card="C",i.condition.level=D.ddf2(this.level-1)}gwurmC(){this.faction="N",this.rarity="C",this.name="Gloomspire Wurm",this.iAttack=this.boof4813,this.iHealth=this.iAttack,this.tribe.push("WR"),this.ftext=`If there are no enemy creatures, ${this.name} gets ${p.jr9(4,4)}.`}gwurmF(t){g.qEnemyCreats().length===0&&g.jr5(t.creatId).buff(4,4)}gsC(){this.faction="U",this.rarity="C",this.name="Glowstride Stag",this.iAttack=this.boof5812,this.iHealth=this.iAttack+this.level,this.tribe.push("ST");const t=this.boof51015;this.ftext=`You gain ${t} health.`}gsF(t){const i=this.boof51015;k.heal(t.owner,i,this.code)}iracoC(){this.faction="A",this.rarity="L",this.name="Ironmind Acolyte",this.iAttack=this.boof61015,this.iHealth=this.iAttack-2,this.tribe.push("GN"),this.ftext="If you have five or more cards in your hand, you may play an additional card this turn."}iracoF(t){k.toPlayer(t.owner).hand.length>4&&(I.regularPlays+=1)}ksbC(){this.faction="T",this.rarity="C",this.name="Kadrasian Stoneback",this.iAttack=this.boof61016,this.iHealth=this.iAttack,this.tribe.push("DN"),this.iMobile=1,this.iDefend=!0,this.forges=!1,this.flanks=this.regnNug(1),this.ftext=`Negate Defender from ${this.name} this turn.`}ksbF(t){const i=$.toEnterField(t.event);i.creature.addModSafe(y.modT("ND",!0,i.creatId))}legtitC(){this.faction="N",this.rarity="R",this.name="Legion Titan",this.iAttack=this.boof4812,this.iHealth=this.iAttack,this.tribe.push("ZB"),this.ftext=`${this.name} gets ${p.jr9(this.level,this.level)} for each enemy creature with ${this.boof357} or less attack.`}legtitF(t){const i=y.crEnemyTarg();i.maxAttack=this.boof357;const r=g.creatByTarget(i);if(r.length>0){const s=this.level*r.length;g.jr5(t.creatId).buff(s,s)}}lbdC(){this.faction="U",this.rarity="H",this.name="Lifeblood Dryad",this.iAttack=this.lValN([4,7,9]),this.iHealth=this.iAttack,this.tribe.push("DY");const t=this.boof236;this.ftext=`If there is a friendly creature in each lane, each other friendly creature gets ${p.jr9(t,t)}.`}lbdF(t){const i=g.creatByTarget(y.crFriendNotMeTarg(t.creatId));if(i.length===4){const r=this.boof236;i.forEach(s=>s.buff(r,r))}}lyrC(){this.faction="N",this.rarity="L",this.name="Lyria, Muse of Varna",this.iAttack=this.boof5815,this.iHealth=this.boof4714,this.tribe.push("HM"),this.forges=this.level>1,this.ftext=this.level===2?"Spawn a random creature that was destroyed this game.":"Put a random creature that was destroyed this game into each of your available lanes.",this.forges||(this.hints=["LG"])}lyrF(t){if(this.level===2){const i=W.gravedigger();i&&g.birth(i,"S",t.owner)}else if(this.level===3){const i=g.emptyLanes(t.owner),r=i.map(s=>W.gravedigger());if(i.length>0&&r[0]){const s=M.tick();i.forEach((c,f)=>{g.birth(r[f],"P",t.owner,c,s)})}}}moeC(){this.faction="T",this.rarity="H",this.name="Master of Elements",this.iAttack=this.boof5917,this.iHealth=this.iAttack,this.tribe.push("HM"),this.forges=this.level>1,this.ftext=`You may play an additional ${p.levelGateText(this.level-1)}spell this turn.`}moeF(t){const i=I.freeCard(this.code);i.condition.card="S",i.condition.level=D.ddf2(this.level-1)}mmaC(){this.faction="A",this.rarity="C",this.name="Metamind Adept",this.iAttack=this.boof5915,this.iHealth=this.boof4813,this.tribe.push("MM");const t=this.level===1?"":"s";this.ftext=`Draw ${this.level} card${t}.`}mmaF(t){k.drawCard(t.owner,this.level)}mmrC(){this.faction="A",this.rarity="C",this.name="Metamind Archivist",this.iAttack=this.boof3713,this.iHealth=this.iAttack+5,this.tribe.push("MM");const t=this.level===1?"":"s";this.ftext=`If there is another friendly Metamind, draw ${this.level} card${t} at the end of your turn.`}mmrF(t){const i=y.crFriendNotMeTarg(t.creatId);if(i.tribe="MM",g.creatByTarget(i).length>0){const r=y.trigger("TE",this.code);r.changes=!0,r.bonus=this.rawNug(0,0,0,0,this.level*lt.dcWeight),k.toPlayer(t.owner).triggers.push(r)}}mbrC(){this.faction="A",this.rarity="R",this.name="Mind Breaker",this.iAttack=this.boof248,this.iHealth=this.lValN([8,14,20]),this.tribe.push("MM"),this.ftext="Draw a card for each friendly Metamind."}mbrF(t){const i=y.crFriendTarg();i.tribe="MM",k.drawCard(t.owner,g.creatByTarget(i).length)}mossC(){this.faction="U",this.rarity="R",this.name="Mosstodon",this.iAttack=this.boof71117,this.iHealth=this.boof4713,this.tribe.push("DN"),this.ftext=`Each other friendly Dinosaur gets ${p.jr9(0,this.boof357)}.`}mossF(t){const i=y.crFriendNotMeTarg(t.creatId);i.tribe="DN";const r=this.boof357;g.creatByTarget(i).forEach(s=>s.buff(0,r))}nysymC(){this.faction="N",this.rarity="C",this.name="Nyrali Symbiote",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("OZ"),this.hints=["OP"];const t=this.boof246;this.ftext=`If ${this.name} is opposed, it gets Regenerate ${t}.`}nysymF(t){const i=$.toEnterField(t.event);i.creature.opposed&&i.creature.addRegen(this.boof246)}ofmC(){this.faction="A",this.rarity="R",this.name="Oreian Fieldmarshal",this.iAttack=this.boof5914,this.iHealth=this.iAttack-2,this.tribe.push("HM");const t=this.boof135;this.ftext=`Each other friendly creature gets ${p.jr9(t,0)}.`}ofmF(t){const i=this.boof135;g.creatByTarget(y.crFriendNotMeTarg(t.creatId)).forEach(s=>{s.buff(i,0)})}orpC(){this.faction="A",this.rarity="R",this.name="Oreian Peacekeeper",this.iAttack=this.boof4816,this.iHealth=this.boof248,this.tribe.push("RB"),this.hints=["OP"],this.ftext=`${this.name} gets Armor ${this.iAttack} this turn.`}orpF(t){g.jr5(t.creatId).addMod(y.modT("AR",this.iAttack))}onxmarC(){this.faction="A",this.rarity="R",this.name="Onyxium Marauder",this.iAttack=this.boof4714,this.iHealth=this.lValN([6,9,17]),this.iArmor=this.level,this.allied="N",this.tribe.push("HM"),this.ftext=`Regenerate ${this.level}.`}onxmarF(t){I.allied(this.allied)&&g.jr5(t.creatId).addRegen(this.level)}phmC(){this.faction="A",this.rarity="R",this.name="Palladium Hindermind",this.iAttack=this.boof2612,this.iHealth=this.boof61016,this.tribe.push("HM"),this.ftext=`Each enemy creature gets ${p.jr9(this.boof123n,0)}.`}phmF(t){const i=this.boof123n;g.qEnemyCreats().forEach(r=>{r.buff(i,0)})}palsC(){this.faction="A",this.rarity="L",this.name="Palladium Simulacrum",this.iAttack=this.boof4816,this.iHealth=this.boof248,this.iMobile=this.level-1,this.tribe.push("SS"),this.flanks=this.multNug(this.statSpawnNug(this.iAttack,this.iHealth),.5),this.ftext=`If ${this.name} is in the center lane, Spawn a copy.`}palsF(t){$.toEnterField(t.event).creature.lane===3&&g.birth(this.code,"S",t.owner)}pokC(){this.faction="T",this.rarity="H",this.name="Patron of Kadras",this.iAttack=this.boof4812,this.iHealth=this.iAttack+2,this.tribe.push("ER","EL"),this.ftext=`If you have three or more Tempys cards in your hand, each friendly creature gets ${p.jr9(this.iAttack,0)} this turn.`}pokF(t){I.patron("T")&&g.ddf1().forEach(i=>{i.addMod(y.modT("AT",this.iAttack))})}potC(){this.faction="N",this.rarity="H",this.name="Patron of Tarsus",this.iAttack=this.boof5914,this.iHealth=this.boof4712,this.tribe.push("DM");const t=this.potbuf;this.ftext=`If you have three or more Nekrium cards in your hand, each enemy creature gets ${p.jr9(t,t)}.`}potF(t){if(I.patron("N")){const i=g.qEnemyCreats();if(i.length>0){const r=this.potbuf;this.logAct(!1),i.forEach(s=>{s.buff(r,r)})}}}get potbuf(){return this.lValN([-1,-3,-6])}prinvC(){this.faction="T",this.rarity="H",this.name="Primordial Invoker",this.iAttack=this.boof61016,this.iHealth=this.boof468,this.tribe.push("HM"),this.ftext=`Deal ${this.iHealth} damage divided at random between enemy creatures and the the enemy player.`}prinvF(t){const i=g.creatByTarget(y.crEnemyTarg()),r=i.length;if(r===0)k.hurtDirect(!t.owner,this.iHealth,this.code);else{const s=M.tick(),c=r+1,f=Array(c).fill(0);for(let m=0;m<this.iHealth;m++)f[S.randInt(0,c)]++;i.forEach((m,A)=>{f[A]>0&&m.hurtDirect(f[A],this.code,s)}),f[r]>0&&k.hurtDirect(!t.owner,f[r],this.code)}}rewC(){this.faction="U",this.rarity="L",this.name="Ramble, Eternal Witness",this.iAttack=this.boof3712,this.iHealth=this.iAttack+3+this.level,this.tribe.push("HM"),this.level===3?this.ftext="Spawn a random creature from your deck.":this.ftext=`Shuffle the level ${this.level+1} version of this from your discard pile into your deck.`}rewF(t){if(this.level===3){const i=y.target("DK");i.player="F",i.card="C";const r=D.deckByTarget(i).map(s=>s[0]);r.length>0&&g.birth(r[S.randInt(0,r.length)],"S",t.owner)}else{const i=k.getActive(),r=this.levelUpCard();i.discard.splice(i.discard.lastIndexOf(r),1),i.deck.push(r),ot.simOn||Ut.shuffleDeck(i)}}scorchC(){this.faction="T",this.rarity="L",this.name="Scorchmane Dragon",this.iAttack=this.lValN([0,12,24]),this.iHealth=this.boof61224,this.tribe.push("DG"),this.iDefend=this.level===1,this.iMobile=this.level-1,this.forges=this.level>1,this.ftext="Deal 5 damage to "+(this.level===2?"the opposing creature.":"each enemy creature and player."),this.level===1&&(this.hints=["LG","LM"])}scorchF(t){const i=$.toEnterField(t.event),r=!t.owner;if(this.level===2){const s=i.creature.opposed;s&&s.hurtDirect(5,this.code)}else if(this.level===3){const s=M.tick();g.qPlayerCreats(r).forEach(c=>c.hurtDirect(5,this.code,s)),k.hurtDirect(r,5,this.code)}}scythC(){this.faction="N",this.rarity="L",this.name="Chiron, Herald of Torment",this.iAttack=12,this.iHealth=6,this.tribe.push("DM"),this.ftext=`Each enemy creature gets ${p.jr9(-6,0)} and ${this.name} gets ${p.jr9(6,0)} for each enemy creature.`}scythF(t){const i=g.qEnemyCreats();i.forEach(r=>{r.buff(-6,0)}),i.length>0&&g.jr5(t.creatId).buff(6*i.length,0)}souldrC(){if(this.faction="N",this.rarity="L",this.name="Soul Drinker",this.iAttack=1,this.iHealth=this.boof4814,this.iMobile=this.level===3?1:0,this.tribe.push("VP"),this.hints=["OP"],this.level===3){const t=this.avgCreatureStats();this.flanks=this.buffNug(t[0]*2,0)}this.ftext=`The opposing creature's attack gets reduced to 0 and ${this.name} gains that much attack.`}souldrF(t){const i=$.toEnterField(t.event),r=i.creature.opposed;if(r){const s=r.attack;i.creature.buff(s,0),r.buff(-1*s,0)}}ssggC(){this.faction="N",this.rarity="H",this.name="Soulscourge Grimgaunt",this.iAttack=this.level+1,this.iHealth=this.iAttack,this.tribe.push("GG"),this.ftext=`${this.name} gets ${p.jr9(this.iAttack,this.iHealth)} for each creature that was destroyed this turn.`}ssggF(t){const i=this.iAttack*(I.deathsA.length+I.deathsB.length);i>0&&g.jr5(t.creatId).buff(i,i)}splgC(){this.faction="N",this.rarity="T",this.name="Spiderling",this.iAttack=this.boof369,this.iHealth=this.iAttack+1,this.tribe.push("SP"),this.hints=["OP"],this.ftext=`Replace the opposing ${p.levelGateText(this.level)}creature with a Web.`}splgF(t){const i=$.toEnterField(t.event);if(i.creature.opposed){const r=i.creature.opposed;D.levelTestCommon(r.level,this.level)&&g.birth("WEB"+this.level,"R",r.owner,r.lane)}}sbdC(){this.faction="U",this.rarity="C",this.name="Spiritbloom Dryad",this.iAttack=this.boof6812,this.iHealth=this.iAttack+this.level,this.tribe.push("DY"),this.ftext=`Each player gains ${this.boof468} health.`}sbdF(t){const i=this.boof468;k.heal(!0,i,this.code),k.heal(!1,i,this.code)}sssC(){this.faction="A",this.rarity="C",this.name="Steelskin Spelunker",this.iAttack=this.boof5814,this.iHealth=this.boof61018,this.tribe.push("HM"),this.ftext=`If there is another friendly creature in the center lane, that creature gets Armor ${this.boof124}`}sssF(t){const i=g.searchByLane(3,t.owner);i&&i.id!==t.creatId&&!i.negateArmor&&i.addArmor(this.boof124)}lotusC(){this.faction="U",this.rarity="H",this.name="Stygian Lotus",this.iAttack=this.boof468,this.iHealth=this.iAttack-1,this.tribe.push("PL"),this.hints=["ZZ-1"],this.ftext=`If ${this.name} is opposed, spawn a copy of it. Then repeat this for each copy.`}lotusF(t){if($.toEnterField(t.event).creature.opposed){let r=!0;for(;r;){const s=g.emptyLanes(t.owner),c=s.length;if(c===0)r=!1;else{const f=s[S.randInt(0,c)];g.birth(this.code,"P",t.owner,f).opposed||(r=!1)}}}}tgiC(){this.faction="T",this.rarity="R",this.name="Thundergale Invoker",this.iAttack=this.boof3711,this.iHealth=this.iAttack,this.tribe.push("WN","GT"),this.ftext=`Each creature adjacent to ${this.name} moves one lane away if possible.`}tgiF(t){const i=g.jr5(t.creatId),r=i.lane,s=i.owner,c=[];if(r>2){const f=g.searchByLane(r-1,s);f&&(g.searchByLane(r-2,s)||(c.push(f),f.move(r-2)))}if(r<4){const f=g.searchByLane(r+1,s);f&&(g.searchByLane(r+2,s)||(c.push(f),f.move(r+2)))}c.length>0&&this.logAct(!1,...c)}tortex(t){return`Put a level ${this.level} ${t} into your hand.`}handhoss(t,i){const r=k.toPlayer(i),s=t+this.level;r.hand.push(s)}toraC(){this.faction="A",this.rarity="R",this.name="Torrent Acolyte",this.iAttack=this.boof71117,this.iHealth=this.iAttack-4,this.tribe.push("MM"),this.forges=this.level>1,this.ftext=this.tortex("Power Torrent")}toraF(t){this.handhoss("PTR",t.owner)}torsC(){this.faction="U",this.rarity="R",this.name="Torrent Soldier",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("IN"),this.forges=this.level>1,this.ftext=this.tortex("Spore Torrent")}torsF(t){this.handhoss("STO",t.owner)}torvC(){this.faction="T",this.rarity="R",this.name="Torrent Valkyrie",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("IC","AS"),this.forges=this.level>1,this.ftext=this.tortex("Ice Torrent")}torvF(t){this.handhoss("ITO",t.owner)}torwC(){this.faction="N",this.rarity="R",this.name="Torrent Witch",this.iAttack=this.boof4814,this.iHealth=this.iAttack+3,this.tribe.push("HM"),this.forges=this.level>1,this.ftext=this.tortex("Spirit Torrent")}torwF(t){this.handhoss("STR",t.owner)}umglidC(){this.faction="T",this.rarity="R",this.name="Umbruk Glider",this.iAttack=this.boof71117,this.iHealth=this.iAttack-4,this.iMobile=this.level,this.allied="U",this.tribe.push("DN"),this.ftext="Breakthrough."}umglidF(t){if(I.allied(this.allied)){const i=g.jr5(t.creatId);i.breakthrough=!0}}uwarC(){this.faction="T",this.rarity="H",this.name="Uranti Warlord",this.iAttack=this.boof3713,this.iHealth=this.boof71117,this.tribe.push("FR","YT"),this.hints=["OP"],this.ftext=`Each friendly Yeti deals ${this.iAttack} damage to the opposing creature.`}uwarF(t){const i=y.crFriendTarg();i.tribe="YT";const r=M.tick();g.creatByTarget(i).forEach(s=>{const c=s.opposed;c&&c.hurtDirect(this.iAttack,s.code,r)})}ustokeC(){this.faction="T",this.rarity="R",this.name="Uranti Warstoker",this.iAttack=this.boof6812,this.iHealth=this.iAttack-1,this.tribe.push("YT"),this.ftext=`Each other friendly Yeti gets ${p.jr9(this.stokeboof,0)} this turn.`}ustokeF(t){const i=y.crFriendNotMeTarg(t.creatId);i.tribe="YT";const r=this.stokeboof;g.creatByTarget(i).forEach(s=>{s.addMod(y.modT("AT",r))})}get stokeboof(){return this.lValN([3,4,6])}uiwC(){this.faction="A",this.rarity="L",this.name="Uriel Ironwing",this.iAttack=this.lValN([6,8,13]),this.iHealth=this.boof81117,this.iMobile=this.level,this.tribe.push("AG"),this.hints=["ZZ-1"];const t=this.boof246n;this.flanks=this.buffNug(-t,0);let i="";this.level===3&&(i=" If that creature has 0 or less attack, destroy it.",this.flanks.count=1),this.ftext=`The opposing creature gets ${p.jr9(t,0)}.${i}`}uiwF(t){const s=$.toEnterField(t.event).creature.opposed;s&&(s.buff(this.boof246n,0),this.level===3&&s.attack<1&&W.destroy(s,this.code))}umaulC(){this.faction="U",this.rarity="C",this.name="Uterradon Mauler",this.iAttack=this.boof4712,this.iHealth=this.iAttack,this.tribe.push("DN"),this.hints=["OP"];const t=this.boof246;this.ftext=`If ${this.name} is opposed, it gets ${p.jr9(t,t)}.`}umaulF(t){const i=$.toEnterField(t.event);if(i.creature.opposed){const r=this.boof246;i.creature.buff(r,r)}}vlfxC(){this.faction="T",this.rarity="L",this.name="Valifrax, Iztek's Champion",this.iAttack=this.boof4816,this.iHealth=this.iAttack+4,this.iMobile=1,this.tribe.push("FR","IC","DG"),this.forges=!1,this.flanks=this.rawNug(0,0,0,0,.5);const t=(i,r)=>`If there is ${r?"an":"no"} opposing creature, put a level ${this.level} Iztek's ${i} into your hand.`;this.ftext=`${t("Frost",!0)} ${t("Flame",!1)}`}vlfxF(t){const i=$.toCreature(t.event);this.handhoss(i.creature.opposed?"IFR":"IFL",t.owner)}vikC(){this.faction="N",this.rarity="L",this.name="Varna, Immortal King",this.maxLevel=4,this.iAttack=this.lValN([4,6,12,18]),this.iHealth=this.lValN([8,13,22,30]),this.tribe.push("FB");let t="";this.level===4&&(t="Destroy each other creature. Then "),this.ftext=t+"Spawn a random friendly creature that was destroyed this turn."}vikF(t){if(this.level===4){const s=g.creatByTarget(y.crNotMeTarg(t.creatId));if(s.length>0){const c=M.tick();s.forEach(f=>W.destroy(f,this.code,c))}}const i=t.owner?I.deathsA:I.deathsB,r=i.length;r>0&&g.birth(i[S.randInt(0,r)],"S",t.owner)}vdrkC(){this.faction="U",this.rarity="R",this.name="Venomdrinker",this.iAttack=this.lValN([5,9,13]),this.iHealth=this.iAttack,this.tribe.push("NG"),this.ftext=`${this.name} gets ${p.jr9(1,1).replaceAll("1","X")}, where X is the total amount of Poison on each enemy creature.`}vdrkF(t){const i=g.qEnemyCreats();let r=0;i.forEach(s=>{r+=s.poison}),r>0&&g.jr5(t.creatId).buff(r,r)}vnsC(){this.faction="U",this.rarity="H",this.name="Venomous Netherscale",this.iAttack=this.boof4713,this.iHealth=this.iAttack+4,this.tribe.push("NG"),this.ftext=`Double the Poison on each enemy creature${this.level===3?" and the enemy player":""}.`}vnsF(t){const i=y.crEnemyTarg();if(i.hasPoison=!0,g.creatByTarget(i).forEach(s=>{s.addPoison(s.poison)}),this.level===3){const s=k.toPlayer(!t.owner);s.poison+=k.totalPoison(s)}}warC(){this.faction="A",this.rarity="H",this.name="War Machine",this.iAttack=3,this.iHealth=3,this.tribe.push("RB"),this.maxLevel=1,this.overload=!0,this.ftext=`Each other friendly creature gets ${p.jr9(3,0)}.`}warF(t){const i=y.crFriendNotMeTarg(t.creatId);g.creatByTarget(i).forEach(r=>r.buff(3,0))}wwpC(){this.faction="U",this.rarity="H",this.name="Weirwood Patriarch",this.iAttack=this.boof5714,this.iHealth=this.lValN([7,10,17]),this.tribe.push("HM");const t=this.boof235;this.ftext=`Each friendly creature with ${this.boof357} or less attack gets ${p.jr9(t,t)}.`}wwpF(t){const i=this.boof235,r=y.crFriendTarg();r.maxAttack=this.boof357,g.creatByTarget(r).forEach(s=>s.buff(i,i))}wfbC(){this.faction="N",this.rarity="C",this.name="Witherfrost Banshee",this.iAttack=this.boof3612,this.iHealth=this.iAttack,this.tribe.push("ST"),this.hints=["OP"];const t=this.boof247n;this.flanks=this.buffNug(-t,-t),this.ftext=`The opposing creature gets ${p.jr9(t,t)}.`}wfbF(t){const r=$.toEnterField(t.event).creature.opposed;if(r){const s=this.boof247n;r.buff(s,s)}}xtmC(){this.faction="N",this.rarity="H",this.name="Xithian Tormentor",this.iAttack=this.lValN([6,12,22]),this.iHealth=this.lValN([10,16,28]),this.tribe.push("AB"),this.ftext="Destroy each other friendly creature."}xtmF(t){const i=g.creatByTarget(y.crFriendNotMeTarg(t.creatId));if(i.length>0){const r=M.tick();i.forEach(s=>W.destroy(s,this.code,r))}}zdkC(){this.faction="N",this.rarity="H",this.name="Zombie Dreadknight",this.iAttack=this.boof5814,this.iHealth=this.iAttack-2,this.tribe.push("ZB");const t=this.boof246;this.ftext=`Each friendly creature with Regenerate gets ${p.jr9(t,t)}.`}zdkF(t){const i=this.boof246,r=y.crFriendTarg();r.hasRegen=!0,g.creatByTarget(r).forEach(s=>s.buff(i,i))}}class ke extends N{lookup(t){return{["AMP"]:{c:()=>this.aprmC(),f:(r,s)=>this.aprmR(r,s)},["DOV"]:{c:()=>this.dovC(),f:(r,s)=>this.dovR(r,s)},["LMD"]:{c:()=>this.lmdC(),f:(r,s)=>this.lmdR(r,s)},["MDR"]:{c:()=>this.metaC(),f:(r,s)=>this.metaR(r,s)},["NCP"]:{c:()=>this.ncplC(),f:(r,s)=>this.ncplR(r,s)},["ORC"]:{c:()=>this.ordcC(),f:(r,s)=>this.ordcR(r,s)}}[t]}get formation(){return!0}actFormation(t,i){this.lookup(t).f(i,$.toEnterField(i.event))}ftext="";constructor(t){super(t),this.lookup(this.cardCode()).c(),this.text="Formation: "+this.ftext,this.ftext=""}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FM"),r}jr8(t){this.actFormation(this.cardCode(),t),x.triggerDone()}aprmC(){this.faction="A",this.rarity="H",this.name="Automation Prime",this.iHealth=this.boof468,this.iAttack=this.iHealth+4,this.tribe.push("RB"),this.ftext=`${this.name} gets Armor ${this.iHealth}.`}aprmR(t,i){i.creature.addArmor(this.iHealth)}dovC(){this.faction="N",this.rarity="R",this.name="Disciple of Vyric",this.iAttack=this.boof6915,this.iHealth=this.iAttack-2,this.tribe.push("VP");const t=this.boof468;this.ftext=`Deal ${t} damage to the enemy player and gain ${t} health.`}dovR(t,i){const r=this.boof468;k.hurtDirect(!t.owner,r,this.code),k.heal(t.owner,r,this.code)}lmdC(){this.faction="N",this.rarity="L",this.name="Lichmane Dragon",this.iAttack=this.boof6915,this.iHealth=this.iAttack+1,this.iMobile=1,this.tribe.push("ST","DG"),this.ftext="Spawn an enemy creature that was destroyed this game."}lmdR(t,i){const r=W.gravedigger(k.toTarget(!t.owner));if(r){const s=g.birth(r,"S",t.owner);s&&this.logAct(!1,s)}}metaC(){this.faction="A",this.rarity="R",this.name="Metadata Redactor",this.iAttack=this.boof6915,this.iHealth=this.iAttack-1,this.tribe.push("MM"),this.ftext="Remove all abilities from each friendly adjacent creature."}metaR(t,i){const r=y.crTarg();r.player=k.toTarget(t.owner),r.lanes=i.creature.adjacent,g.creatByTarget(r).forEach(s=>s.wipeAll())}ncplC(){this.faction="N",this.rarity="H",this.name="Necroplasm",this.iAttack=this.lValN([5,8,9]),this.iHealth=this.lValN([7,13,19]),this.tribe.push("OZ"),this.ftext="The enemy player discards a card at random."}ncplR(t,i){const r=k.toPlayer(!t.owner),s=r.hand.length;if(s>0){r.discard.push(r.hand.splice(S.randInt(0,s),1)[0]);const c=y.trigger("NT",this.code);c.bonus=this.rawNug(0,0,0,0,.5),k.toPlayer(t.owner).triggers.push(c)}}ordcC(){this.faction="A",this.rarity="C",this.name="Ordnance Captain",this.iAttack=this.lValN([3,6,8]),this.iHealth=this.boof61014,this.tribe.push("HM"),this.ftext=`Each friendly creature gets ${p.jr9(this.boof235,0)}.`}ordcR(t,i){const r=this.boof235;g.qPlayerCreats(t.owner).forEach(s=>s.buff(r,0))}}class Le extends N{lookup(t){return{["PYM"]:{c:()=>this.pymC(),g:(r,s)=>this.pymG(r,s)},["RBG"]:{c:()=>this.rbgC(),g:(r,s)=>this.rbgG(r,s)},["SRV"]:{c:()=>this.sprvC(),g:(r,s)=>this.sprvG(r,s)},["TGK"]:{c:()=>this.tgkC(),g:(r,s)=>this.tgkG(r,s)}}[t]}onGain(t,i){this.lookup(t).g(i,i.event)}hPlayer=0;trigB;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("LG",this.code);return s.bonus=this.trigB,r}ddf8(t){return this.validPlayer(t)}jr8(t){this.onGain(this.cardCode(),t),x.triggerDone()}validPlayer(t){return this.hPlayer===0?!0:this.hPlayer===1?t.owner===t.event.playerA:t.owner!==t.event.playerA}pymC(){this.faction="T",this.rarity="R",this.name="Pyre Mystic",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.tribe.push("FR","AS"),this.hPlayer=-1;const t=this.lValS(["","2x ","3x "]);this.text=`When an enemy player gains health, deal ${t}that much damage to the enemy player.`,this.trigB=this.playerNug(this.boof369)}pymG(t,i){k.hurtDirect(i.playerA,i.healAmt*this.level,this.code)}rbgC(){this.faction="U",this.rarity="H",this.name="Runebark Guardian",this.iAttack=this.boof5916,this.iHealth=this.iAttack,this.tribe.push("HM"),this.hPlayer=1;const t=this.boof135;this.text=`When you gain health, ${this.name} gets ${p.jr9(t,t)}.`,this.trigB=this.buffNug(t,t)}rbgG(t,i){const r=g.jr5(t.creatId),s=this.boof135;r.buff(s,s)}sprvC(){this.faction="N",this.rarity="R",this.name="Spirit Reaver",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("DM"),this.hPlayer=-1;const t=this.boof234;this.text=`When an enemy player gains health, ${this.name} gets ${p.jr9(t,t)}.`,this.trigB=this.buffNug(t,t),this.hints=["ZZ-1"]}sprvG(t,i){const r=g.jr5(t.creatId),s=this.boof234;r.buff(s,s)}tgkC(){this.faction="U",this.rarity="R",this.name="Tuskin Grovekeeper",this.iAttack=this.boof6912,this.iHealth=this.iAttack,this.tribe.push("TK"),this.hPlayer=1,this.text=`When you gain health, Spawn a 3/3 ${Z.minionName(this.level)}.`,this.trigB=this.rawNug(.5,3,3,0)}tgkG(t,i){const r=this.lValS(["SXD","SPL","TTF"])+this.level;g.birth(r,"S",t.owner)}}class De extends N{lookup(t){return{["AWU"]:{c:()=>this.awuC(),m:(r,s)=>this.awuM(r,s)},["EWE"]:{c:()=>this.eweC(),m:(r,s)=>this.eweM(r,s)},["FFM"]:{c:()=>this.ffmC(),m:(r,s)=>this.ffmM(r,s)},["LUC"]:{c:()=>this.lugC(),m:(r,s)=>this.lugM(r,s)},["WBH"]:{c:()=>this.wbhC(),m:(r,s)=>this.wbhM(r,s)}}[t]}onMove(t,i){this.lookup(t).m(i,$.toCreature(i.event))}mPlayer=0;trigB;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("MV");return s.bonus=this.trigB,r}ddf8(t){return this.validPlayer(t)}jr8(t){this.onMove(this.cardCode(),t),x.triggerDone()}validPlayer(t){if(this.mPlayer===0)return!0;const i=$.toCreature(t.event);return this.mPlayer===1?t.owner===i.creature.owner:t.owner!==i.creature.owner}awuC(){this.faction="T",this.rarity="R",this.name="Arc Wurm",this.iAttack=this.boof4813,this.iHealth=this.iAttack+3,this.tribe.push("LT","EL"),this.iMobile=1,this.mPlayer=1;const t=this.boof234;this.text=`When a friendly creature moves, deal ${t} damage to the enemy player.`,this.trigB=this.playerNug(t)}awuM(t,i){k.hurtDirect(!i.creature.owner,this.boof234,this.code)}eweC(){this.faction="T",this.rarity="H",this.name="Emberwind Evoker",this.iAttack=this.boof4914,this.iHealth=this.iAttack+2,this.tribe.push("HM"),this.mPlayer=1;const t=this.boof124;this.text=`When a friendly creature moves, it gets ${p.jr9(t,t)}.`,this.trigB=this.buffNug(t,t)}eweM(t,i){const r=this.boof124;i.creature.buff(r,r)}ffmC(){this.faction="T",this.rarity="H",this.name="Frostfang Maiden",this.iAttack=this.boof5814,this.iHealth=this.iAttack+this.level,this.tribe.push("HM"),this.iMobile=this.level,this.mPlayer=1;const t=this.ffbof;this.text=`When a friendly creature moves, deal ${t} to the creature opposing it.`,this.trigB=this.buffNug(t,0)}ffmM(t,i){const r=i.creature.opposed;r&&r.hurtDirect(this.ffbof,this.code)}get ffbof(){return this.level+2}lugC(){this.faction="T",this.rarity="L",this.name="Lug, Uranti Charger",this.iAttack=this.boof359,this.iHealth=this.lValN([9,13,19]),this.level===3&&(this.iMobile=1),this.tribe.push("YT"),this.mPlayer=1,this.text="When a friendly creature moves on your turn, Lug battles an additional time.",this.trigB=this.buffNug(this.iAttack,0)}lugM(t,i){if(t.owner===k.getActiveB()){const r=g.jr5(t.creatId);r.extraBattles+=1}}wbhC(){this.faction="T",this.rarity="R",this.name="Windborn Hellion",this.iAttack=this.boof4812,this.iHealth=this.boof81217,this.tribe.push("WN","EL"),this.mPlayer=1,this.text=`When a friendly creature moves, ${this.name} gets ${p.jr9(this.level,this.level)}.`,this.trigB=this.buffNug(this.level,this.level)}wbhM(t,i){g.jr5(t.creatId).buff(this.level,this.level)}}class Lt extends N{lookup(t){return{["ATG"]:{c:()=>this.agrdC(),t:(r,s)=>this.spellMyTurn(r,s),p:(r,s)=>this.agrdP(r,s)},["ART"]:{c:()=>this.arootC(),t:(r,s)=>this.factionSpellMyTurn(r,s),p:(r,s)=>this.arootP(r,s)},["ATS"]:{c:()=>this.atrapC(),t:(r,s)=>this.spellMyTurn(r,s),p:(r,s)=>this.atrapP(r,s)},["ARB"]:{c:()=>this.arbysC(),t:(r,s)=>this.enemyPlayed(r,s),p:(r,s)=>this.arbysP(r,s)},["BLH"]:{c:()=>this.bblhC(),t:(r,s)=>this.spellMyTurn(r,s),p:(r,s)=>this.bblhP(r,s)},["CYC"]:{c:()=>this.ccC(),t:(r,s)=>this.factionSpellMyTurn(r,s),p:(r,s)=>this.ccP(r,s)},["DHW"]:{c:()=>this.dhwC(),t:(r,s)=>this.spellMyTurn(r,s),p:(r,s)=>this.dhwP(r,s)},["FBI"]:{c:()=>this.fbiC(),t:(r,s)=>this.factionSpellMyTurn(r,s),p:(r,s)=>this.fbiP(r,s)},["FLS"]:{c:()=>this.flspkC(),t:(r,s)=>this.spellMyTurn(r,s),p:(r,s)=>this.flspkP(r,s)},["IBA"]:{c:()=>this.beardC(),t:(r,s)=>this.beardT(r,s),p:(r,s)=>this.beardP(r,s)},["IZK"]:{c:()=>this.izzyC(),t:(r,s)=>this.izzyT(r,s),p:(r,s)=>this.izzyP(r,s)},["KAW"]:{c:()=>this.kasC(),t:(r,s)=>this.spellMyTurn(r,s),p:(r,s)=>this.kasP(r,s)},["SWA"]:{c:()=>this.swaC(),t:(r,s)=>this.factionSpellMyTurn(r,s),p:(r,s)=>this.swaP(r,s)}}[t]}testPlay(t,i){return this.lookup(t).t(i,i.event)}actPlay(t,i){this.lookup(t).p(i,i.event)}trigB;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const r=super.jr3(t,i);return this.trigB&&r.jr4("PC"),r}ddf8(t){return t.event.code==="PLC"?this.testPlay(this.cardCode(),t):t.event.code==="TRE"&&this.cardCode()==="BLH"}jr8(t){if(t.event.code==="PLC")this.actPlay(this.cardCode(),t);else{const i=g.jr5(t.creatId);W.destroy(i,this.code)}x.triggerDone()}spellMyTurn(t,i){return i.playerA===t.owner&&L.getCard(i.cardCode).type==="S"}factionSpellMyTurn(t,i){if(i.playerA===t.owner){const r=L.getCard(i.cardCode);if(r.type==="S"&&r.faction===this.faction)return!0}return!1}enemyPlayed(t,i){return i.playerA!==t.owner}ownerAlive(t){return g.jr5(t).status==="A"}agrdC(){this.faction="A",this.rarity="C",this.name="Aetherguard",this.iAttack=this.boof6814,this.iHealth=this.iAttack-1,this.tribe.push("RB"),this.trigB=this.rawNug(0,lt.calcCreatValueFormula(0,0,this.level,0,0,!1,0),0,0),this.text=`When you play a spell, ${this.name} gets Armor ${this.level}.`}agrdP(t,i){g.jr5(t.trigger.creatId).addArmor(this.level)}arootC(){this.faction="U",this.rarity="H",this.name="Aether Root",this.iAttack=this.boof3610,this.iHealth=this.iAttack,this.tribe.push("PL"),this.hints=[this.lValH(["ZZ+1","ZZ+2","ZZ+3"])];const t=this.boof234;this.text=`When you play an Uterra spell, ${this.name} gets ${p.jr9(t,t)}.`,this.trigB=this.multNug(this.buffNug(t,t),2)}arootP(t,i){const r=g.jr5(t.trigger.creatId),s=this.boof234;r.buff(s,s)}atrapC(){this.faction="T",this.rarity="C",this.name="Aethertap Shaman",this.iAttack=this.lValN([7,9,16]),this.iHealth=this.iAttack-1,this.tribe.push("HM"),this.trigB=this.rawNug(0,lt.calcCreatValueFormula(0,0,0,0,1,!1,0),0,0),this.text=`When you play a spell, ${this.name} gets Mobility 1 this turn.`}atrapP(t,i){g.jr5(t.trigger.creatId).addMod(y.modT("MB",1))}arbysC(){this.faction="A",this.rarity="H",this.name="Anvillon Arbiter",this.iAttack=this.boof3714,this.iHealth=this.iAttack+3,this.iArmor=1,this.tribe.push("RB"),this.text="When the enemy player plays their second card in a turn, that player discards their hand.",this.trigB=this.rawNug(0,0,0,0,1)}arbysP(t,i){if(I.cardsPlayed>1&&this.ownerAlive(t.creatId)){const r=k.getActive();r.discard.push(...r.hand),r.hand=[]}}bblhC(){this.faction="T",this.rarity="L",this.name="Binben, Lightning Herald",this.iAttack=this.boof61017,this.iHealth=this.boof468,this.tribe.push("LT","AS");const t=L.getCard(this.lwy());this.text=`When you play a spell, Spawn a ${p.tokName(t)}. At the end of your turn, destroy it.`,this.trigB=this.spawnNug(t)}bblhP(t,i){if(this.ownerAlive(t.creatId)){const r=g.birth(this.lwy(),"S",t.owner);if(r){const s=r.jr4("TE",this.code);s.changes=!0}}}lwy(){return "LWY"+this.level}ccC(){this.faction="N",this.rarity="H",this.name="Crypt Conjurer",this.iAttack=this.boof258,this.iHealth=this.lValN([8,14,20]),this.tribe.push("VP"),this.text=`When you play a Nekrium spell, deal ${this.iAttack} damage to the enemy player and you gain ${this.iAttack} health.`,this.trigB=this.playerNug(2*this.iAttack)}ccP(t,i){this.ownerAlive(t.creatId)&&(k.hurtDirect(!t.owner,this.iAttack,t.cardCode),k.heal(t.owner,this.iAttack,this.code))}dhwC(){this.faction="N",this.rarity="R",this.name="Darkheart Wanderer",this.iAttack=this.boof3612,this.iHealth=this.boof81116,this.tribe.push("HM");const t=this.boof124;this.text=`When you play a spell, ${this.name} gets Regenerate ${t}.`,this.trigB=this.regnNug(t)}dhwP(t,i){g.jr5(t.trigger.creatId).addRegen(this.boof124)}fbiC(){this.faction="T",this.rarity="H",this.name="Flamebreak Invoker",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("FR","GT"),this.text=`When you play a Tempys spell, deal ${this.level} damage to each enemy creature.`,this.trigB=this.buffNug(0,this.level*2)}fbiP(t,i){if(this.ownerAlive(t.creatId)){const r=M.tick();g.qEnemyCreats().forEach(s=>{s.hurtDirect(this.level,this.code,r)})}}flspkC(){this.faction="T",this.rarity="C",this.name="Flame Speaker",this.iAttack=this.lValN([2,6,13]),this.iHealth=this.level*6,this.tribe.push("HM");const t=this.boof235;this.text=`When you play a spell, deal ${t} damage to the enemy player.`,this.trigB=this.playerNug(t)}flspkP(t,i){this.ownerAlive(t.creatId)&&k.hurtDirect(!t.owner,this.boof235,t.cardCode)}beardC(){this.faction="A",this.rarity="L",this.name="Ironbeard, Ascendant",this.iAttack=this.lValN([6,9,14,20]),this.iHealth=this.iAttack,this.iArmor=this.level,this.maxLevel=4,this.tribe.push("FB");let t="";this.level>1&&(t=" and Armor "+(this.level-1));let i=this.lValS([this.name,this.name,this.name+" and adjacent friendly creatures","friendly creatures"]);this.text=`When you play Anvilbreaker, ${i} gets ${p.jr9(this.level+1,0)}${t}.`,this.trigB=this.rawNug(0,0,0,0,this.level/2)}beardT(t,i){return i.playerA===t.owner&&i.cardCode==="AVB"+"1"}beardP(t,i){const r=this.level+1,s=this.level-1,c=g.jr5(t.trigger.creatId);if(c.buff(r,0),s>0&&c.addArmor(1),this.level>2){const f=y.crFriendTarg();this.level===3?f.lanes=c.adjacent.concat(c.lane):f.notMe=c.id,g.creatByTarget(f).forEach(m=>{m.buff(r,0),m.addArmor(s)})}}izzyC(){this.faction="T",this.rarity="L",this.name="Iztek, Khan of Arrachtor",this.iAttack=this.boof6915,this.iHealth=this.iAttack,this.tribe.push("IC","FR","AS"),this.text=`When you play Iztek's Frost, replace this with a level ${this.level} Iztek, Avatar of Frost.~When you play Iztek's Flame, replace this with a level ${this.level} Iztek, Avatar of Flame.`,this.trigB=this.rawNug(0,0,0,0,.5)}izzyT(t,i){if(i.playerA===t.owner){const s=L.getCard(i.cardCode).cardCode();return s==="IFL"||s==="IFR"}return!1}izzyP(t,i){const r=g.jr5(t.trigger.creatId),c=L.getCard(i.cardCode).cardCode()==="IFL"?"IZL":"IZR";g.birth(`${c}${this.level}`,"R",r.owner,r.lane)}kasC(){this.faction="T",this.rarity="L",this.name="Kas, Arcweaver",this.iAttack=this.boof4814,this.iHealth=this.iAttack,this.tribe.push("LT","AS"),this.hints=["OL"],this.text="When you play a spell, Kas battles an additional time this turn.",this.trigB=this.buffNug(this.iAttack,0)}kasP(t,i){const r=g.jr5(t.trigger.creatId);r.extraBattles+=1}swaC(){this.faction="T",this.rarity="H",this.name="Sparkweaver Acolyte",this.iAttack=this.boof4610,this.iHealth=this.boof61218,this.tribe.push("LT","AS"),this.text=`When you play a Tempys spell, ${this.name} gets ${p.jr9(this.iAttack,0)} this turn.`,this.trigB=this.multNug(this.buffNug(this.iAttack,0),.5)}swaP(t,i){g.jr5(t.trigger.creatId).addMod(y.modT("AT",this.iAttack))}}class Ge extends N{lookup(t){return{["KTS"]:{c:()=>this.kitC(),r:(r,s)=>this.kitR(r,s)},["RSC"]:{c:()=>this.scootC(),r:(r,s)=>this.scootR(r,s)},["SCC"]:{c:()=>this.shcrC(),r:(r,s)=>this.shcrR(r,s)},["SND"]:{c:()=>this.ssdC(),r:(r,s)=>this.ssdR(r,s)}}[t]}trigB;actReplace(t,i){this.lookup(t).r(i,$.toReplaced(i.event))}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("RP");return s.bonus=this.trigB,r}ddf8(t){return t.creatId===t.event.replCreatId}jr8(t){this.actReplace(this.cardCode(),t),x.triggerDone()}kitC(){this.faction="U",this.rarity="H",this.name="Kitaru Sprite",this.iAttack=this.boof358,this.iHealth=this.boof71117,this.tribe.push("FY"),this.hints=["RT"],this.text=`When this is replaced, Spawn a ${this.name}.`,this.trigB=this.buffNug(0,this.iHealth)}kitR(t,i){g.birth(this.code,"S",t.owner)}scootC(){this.faction="A",this.rarity="T",this.name="Relic Scout",this.iAttack=this.level,this.iHealth=this.level,this.iArmor=this.level,this.free=!0,this.tribe.push("RB"),this.hints=["RT"],this.text=`When ${this.name} is replaced, the creature that replaces it gets ${p.jr9(this.level,this.level,!0)} and Armor ${this.level}.`,this.trigB=this.buffNug(this.level,lt.calcCreatValueFormula(this.level,this.level,this.level,0,0,!1,0))}scootR(t,i){i.creature.buff(this.level,this.level),i.creature.addArmor(this.level)}shcrC(){this.faction="U",this.rarity="C",this.name="Shardclaw Crusher",this.iAttack=this.boof5812,this.iHealth=this.iAttack,this.tribe.push("IN"),this.hints=["RT"],this.text=`When ${this.name} is replaced, the creature that replaces it gets ${p.jr9(this.iAttack,this.iAttack)}.`,this.trigB=this.multNug(this.buffNug(this.iAttack,this.iAttack),.5)}shcrR(t,i){i.creature.buff(this.iAttack,this.iAttack)}ssdC(){this.faction="U",this.rarity="R",this.name="Spiritstone Druid",this.iAttack=this.boof4610,this.iHealth=this.lValN([3,4,6]),this.tribe.push("TG"),this.hints=["RT"],this.text=`When ${this.name} is replaced, put a ${this.iAttack}/${this.iHealth} Spirit into each adjacent available lane.`,this.trigB=this.buffNug(this.iAttack,this.iHealth),this.trigB.count=1}ssdR(t,i){const r=i.replCreat.adjacent,s=g.emptyLanes(t.owner),c=M.tick();r.forEach(f=>{s.includes(f)&&g.birth("SPU"+this.level,"P",t.owner,f,c)})}}class ge extends N{lookup(t){return{["BST"]:{c:()=>this.brimC(),u:(r,s)=>this.brimR(r,s)},["OSV"]:{c:()=>this.scavC(),u:(r,s)=>this.scavR(r,s)},["RHU"]:{c:()=>this.tiaC(),u:(r,s)=>this.tiaR(r,s)},["SKS"]:{c:()=>this.spsoC(),u:(r,s)=>this.spsoR(r,s)},["SWG"]:{c:()=>this.stgrC(),u:(r,s)=>this.stgrR(r,s)},["VTW"]:{c:()=>this.weldC(),u:(r,s)=>this.weldR(r,s)},["WEB"]:{c:()=>this.webC(),u:(r,s)=>this.webR(r,s)}}[t]}actUpgrade(t,i){this.lookup(t).u(i,$.toReplaced(i.event))}constructor(t){super(t),this.lookup(this.cardCode()).c()}image(t){return this.rarity==="T"?super.fixedImage(t):super.image(t)}jr3(t,i){const r=super.jr3(t,i);return r.jr4("UP"),r}jr8(t){this.actUpgrade(this.cardCode(),t),x.triggerDone()}brimC(){this.faction="T",this.rarity="L",this.name="Brimstone Tyrant",this.iAttack=this.boof6916,this.iHealth=this.iAttack,this.tribe.push("FR","EL"),this.hints=["RD"];const t=this.boof468;this.text=`Upgrade: Deal ${t} damage to each other creature.`}brimR(t,i){const r=M.tick(),s=this.boof468;g.creatByTarget(y.crNotMeTarg(t.creatId)).forEach(c=>c.hurtDirect(s,this.code,r))}scavC(){this.faction="A",this.rarity="H",this.name="Oreian Scavenger",this.iAttack=this.boof6916,this.iHealth=1,this.tribe.push("RB"),this.hints=["RD"],this.text=`Upgrade: ${this.name} gets Armor ${this.iAttack}.`}scavR(t,i){i.creature.addArmor(this.iAttack)}tiaC(){this.faction="A",this.rarity="L",this.name="Relic Hunter",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.iBT=!0,this.tribe.push("HM"),this.hints=["RD"],this.text=`Upgrade: ${this.name} gets +attack and +health equal to the creature it replaced.`}tiaR(t,i){i.creature.buff(i.replCreat.attack,i.replCreat.health)}spsoC(){this.faction="T",this.rarity="C",this.name="Sparksoul",this.iAttack=this.boof6915,this.iHealth=this.iAttack-1,this.tribe.push("LT","EL"),this.hints=["RD"],this.text=`Upgrade: ${this.name} gets Aggressive.`}spsoR(t,i){i.creature.aggressive=!0}stgrC(){this.faction="A",this.rarity="C",this.name="Steelwatch Guard",this.iAttack=this.boof4711,this.iHealth=this.iAttack,this.tribe.push("RB"),this.hints=["RD"],this.text=`Upgrade: ${this.name} gets ${p.jr9(this.iAttack,this.iAttack)}.`}stgrR(t,i){i.creature.buff(this.iAttack,this.iAttack)}weldC(){this.faction="A",this.rarity="R",this.name="Vault Welder",this.iAttack=this.boof71118,this.iHealth=this.lValN([9,14,22]),this.iDefend=!0,this.tribe.push("RB"),this.hints=["RD"],this.text=`Upgrade: Negate Defender from ${this.name}.`}weldR(t,i){i.creature.negateDefender=!0}webC(){this.faction="N",this.rarity="T",this.name="Web",this.iAttack=0,this.iHealth=1,this.iDefend=!0,this.tribe.push("WB"),this.text=`Upgrade: ${this.name} attack and health become equal to the creature it replaced.`}webR(t,i){i.creature.buff(i.replCreat.attack,i.replCreat.health-1)}}class vt extends N{lookup(t){return{["CGG"]:{c:()=>this.cggC(),v:(r,s)=>this.cggV(r,s)},["CGF"]:{c:()=>this.cfiendC(),v:(r,s)=>this.cfiendV(r,s)},["CSB"]:{c:()=>this.corpsC(),v:(r,s)=>this.corpsV(r,s)},["CYS"]:{c:()=>this.cslmC(),v:(r,s)=>this.cslmV(r,s)},["DSK"]:{c:()=>this.dskC(),v:(r,s)=>this.dskV(r,s)},["FST"]:{c:()=>this.fstrC(),v:(r,s)=>this.fstrV(r,s)},["FWK"]:{c:()=>this.fwlkC(),v:(r,s)=>this.fwlkV(r,s)},["FFD"]:{c:()=>this.ffC(),v:(r,s)=>this.ffV(r,s)},["FSC"]:{c:()=>this.flwcC(),v:(r,s)=>this.flwcV(r,s)},["GVS"]:{c:()=>this.ghsC(),v:(r,s)=>this.ghsV(r,s)},["GBG"]:{c:()=>this.ggC(),v:(r,s)=>this.ggV(r,s)},["GMR"]:{c:()=>this.gromC(),v:(r,s)=>this.gromV(r,s)},["MMX"]:{c:()=>this.mmeC(),v:(r,s)=>this.mmeV(r,s)},["NOZ"]:{c:()=>this.nyozC(),v:(r,s)=>this.nyozV(r,s)},["POX"]:{c:()=>this.poxC(),v:(r,s)=>this.poxV(r,s)},["RSZ"]:{c:()=>this.rszC(),v:(r,s)=>this.rszV(r,s)},["SFM"]:{c:()=>this.spirmC(),v:(r,s)=>this.spirmV(r,s)},["SNT"]:{c:()=>this.sssC(),v:(r,s)=>this.sssV(r,s)},["USA"]:{c:()=>this.usaC(),v:(r,s)=>this.usaV(r,s)},["VGN"]:{c:()=>this.vgfsC(),v:(r,s)=>this.vgfsV(r,s)},["XHS"]:{c:()=>this.xhostC(),v:(r,s)=>this.xhostV(r,s)},["ZTU"]:{c:()=>this.zimusC(),v:(r,s)=>this.zimusV(r,s)}}[t]}cardVengeance(t,i){this.lookup(t).v(i,$.toCreature(i.event))}vtext="";trigB;fixedImgCreat=!1;constructor(t){super(t),this.lookup(this.cardCode()).c(),this.trigB&&(this.text="Vengeance: "+this.vtext),this.vtext=""}image(t){return this.fixedImgCreat?this.fixedImage(t):super.image(t)}jr3(t,i){const r=super.jr3(t,i);if(this.trigB){const s=r.jr4("VN");s.bonus=this.trigB}return r}jr8(t){this.cardVengeance(this.cardCode(),t),x.triggerDone()}cggC(){this.faction="N",this.rarity="H",this.name="Ceaseless Grimgaunt",this.iAttack=this.boof5813,this.iHealth=1,this.tribe.push("GG"),this.vtext=`If there are no friendly creatures in play, Spawn a level ${this.level} ${this.name}.`,this.hints=["ST"],this.trigB=this.rawNug(0,0,0,0,.5)}cggV(t,i){g.qPlayerCreats(t.owner).length===0&&(this.logAct(!1),g.birth(this.code,"S",t.owner))}cfiendC(){this.faction="N",this.rarity="T",this.name="Contagion Fiend",this.iAttack=this.boof234,this.iHealth=this.boof5812,this.tribe.push("AB"),this.hints=["ST"],this.fixedImgCreat=!0;const t=-this.level;this.vtext=`Each enemy creature gets ${p.jr9(t,t)}.`;const i=this.boof246;this.trigB=this.buffNug(i,i)}cfiendV(t,i){const r=-this.level,s=M.tick();g.qPlayerCreats(!t.owner).forEach(c=>c.buff(r,r,s))}corpsC(){this.faction="N",this.rarity="C",this.name="Corpulent Shambler",this.iAttack=this.lValN([5,7,15]),this.iHealth=this.iAttack,this.tribe.push("ZB"),this.vtext="Put a 3/3 Zombie into this lane.",this.trigB=this.buffNug(3,3)}corpsV(t,i){const r=`${"ZBS"}${this.level}`;g.birth(r,"P",i.creature.owner,i.creature.lane)}cslmC(){this.faction="N",this.rarity="C",this.name="Crypt Slime",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.tribe.push("OZ"),this.vtext="Put a 1/1 Oozeling into this lane.",this.trigB=this.buffNug(1,1)}cslmV(t,i){const r=`${"COZ"}${this.level}`;g.birth(r,"P",i.creature.owner,i.creature.lane)}dskC(){this.faction="N",this.rarity="C",this.name="Death Seeker",this.iAttack=1,this.iHealth=1,this.tribe.push("HM"),this.fixedImgCreat=!0,this.hints=["ST"];const t=this.boof51015;this.vtext=`Put a ${t}/${t} Spirit into this lane.`,this.trigB=this.buffNug(t,t)}dskV(t,i){const r=`${"SPN"}${this.level}`;g.birth(r,"P",i.creature.owner,i.creature.lane)}fstrC(){this.faction="N",this.rarity="R",this.name="Fell Strider",this.iAttack=this.lValN([4,8,10]),this.iHealth=this.boof369,this.tribe.push("ZB");const t=L.getCard(this.fsz());this.vtext=`Spawn a ${p.tokName(t)}.`,this.trigB=this.multNug(this.buffNug(t.iAttack,t.iHealth),.5)}fstrV(t,i){g.birth(this.fsz(),"S",i.creature.owner)}fsz(){return "ZST"+this.level}fwlkC(){this.faction="N",this.rarity="C",this.name="Fell Walker",this.iAttack=this.boof359,this.iHealth=this.iAttack,this.tribe.push("ZB"),this.hints=["ST"];const t=L.getCard(Z.zomc(this.level));this.vtext=`Put a ${p.tokName(t)} into this lane.`,this.trigB=this.buffNug(t.iAttack,t.iHealth)}fwlkV(t,i){g.birth(Z.zomc(this.level),"P",i.creature.owner,i.creature.lane)}ffC(){this.faction="N",this.rarity="H",this.name="Fleshfiend",this.iAttack=this.boof6812,this.iHealth=this.iAttack,this.tribe.push("AB"),this.vtext=`Put a level ${this.level-1} ${this.name} into this lane.`,this.level>1&&(this.trigB=this.buffNug(0,this.lValN([0,6,15])))}ffV(t,i){const r=`${"FFD"}${this.level-1}`;g.birth(r,"P",i.creature.owner,i.creature.lane)}flwcC(){this.faction="A",this.rarity="C",this.name="Flowsteel Carrier",this.iAttack=this.boof5915,this.iHealth=this.boof358,this.tribe.push("RB"),this.vtext=`Give a friendly Robot at random Armor ${this.iHealth}.`,this.trigB=this.regnNug(this.iHealth)}flwcV(t,i){const r=y.crTarg();r.player=k.toTarget(t.owner),r.tribe="RB";const s=g.creatByTarget(r);if(s.length>0){const c=s[S.randInt(0,s.length)];c.addArmor(this.iHealth),this.logAct(!1,c)}}ghsC(){this.faction="U",this.rarity="C",this.name="Glowhive Siren",this.iAttack=this.boof3814,this.iHealth=this.boof61117,this.tribe.push("IN"),this.vtext=`You gain ${this.boof124} to ${this.gghigh-1} health.`,this.trigB=this.playerNug(this.boof258)}ghsV(t,i){const r=S.randInt(this.boof124,this.gghigh);k.heal(t.owner,r,this.code)}get gghigh(){return this.lValN([5,9,13])}ggC(){this.faction="N",this.rarity="C",this.name="Graveborn Glutton",this.iAttack=this.boof61117,this.iHealth=this.boof3814,this.tribe.push("AB"),this.vtext=`Deal ${this.boof124} to ${this.gghigh-1} damage to the enemy player.`,this.trigB=this.playerNug(this.boof258)}ggV(t,i){const r=S.randInt(this.boof124,this.gghigh);k.hurtDirect(!t.owner,r,this.code)}gromC(){this.faction="U",this.rarity="C",this.name="Grove Matriarch",this.iAttack=this.boof4814,this.iHealth=this.iAttack+2,this.tribe.push("PL");const t=Z.minionBuff(this.level),i=Z.minionName(this.level);this.vtext=`Put a ${t}/${t} ${i} into this lane.`,this.trigB=this.buffNug(t,t)}gromV(t,i){const r=Z.minionCode(this.level);g.birth(r,"P",i.creature.owner,i.creature.lane)}mmeC(){this.faction="A",this.rarity="C",this.name="Metamind Explorer",this.iAttack=this.boof3713,this.iHealth=this.iAttack+2,this.tribe.push("MM"),this.vtext=`Draw ${this.level} cards.`,this.trigB=this.rawNug(0,0,0,0,this.level*lt.dcWeight)}mmeV(t,i){k.drawCard(t.owner,this.level)}nyozC(){this.faction="N",this.rarity="R",this.name="Nyrali Ooze",this.iAttack=this.boof247,this.iHealth=this.iAttack,this.tribe.push("OZ"),this.hints=["ST"];const t=this.level+this.iAttack+1;this.vtext=`Put a ${t}/${t} Oozeling into this lane.`,this.trigB=this.buffNug(t,t)}nyozV(t,i){const r=`${"OOZ"}${this.level}`;g.birth(r,"P",i.creature.owner,i.creature.lane)}poxC(){if(this.faction="N",this.rarity="H",this.name="Progeny of Xith",this.iAttack=this.boof246,this.iHealth=this.iAttack,this.tribe.push("AB"),this.hints=["LB","ST"],this.vtext=`Spawn a level ${this.level+1} ${this.name}.`,this.level<3){const t=this.lValN([10,6,0]);this.trigB=this.buffNug(t,t)}}poxV(t,i){const r=`${"POX"}${this.level+1}`;g.birth(r,"S",i.creature.owner)}rszC(){this.faction="N",this.rarity="R",this.name="Runescarred Zombie",this.iAttack=this.lValN([5,8,16]),this.iHealth=this.boof359,this.tribe.push("ZB"),this.vtext=`Put a ${p.levelGateText(this.level)}spell at random from your discard pile into your hand.`,this.trigB=this.rawNug(0,0,0,0,.5)}rszV(t,i){const r=k.toPlayer(t.owner),s=y.target("TD");s.player=k.toTarget(r),s.card="S",s.level=D.ddf2(this.level);const c=D.deckByTarget(s);if(c.length>0){const f=c[S.randInt(0,c.length)];r.discard.splice(f[1],1),r.hand.push(f[0])}}spirmC(){this.faction="T",this.rarity="H",this.name="Spiritflame Mystic",this.iAttack=this.boof6912,this.iHealth=this.iAttack-3,this.tribe.push("HM"),this.hints=["ST"],this.vtext=`Deal ${this.boof246} damage to each creature.`,this.trigB=this.rawNug(0,0,0,0,.2)}spirmV(t,i){const r=this.boof246,s=M.tick();g.qActiveCreats().forEach(c=>c.hurtDirect(r,this.code,s))}sssC(){this.faction="N",this.rarity="L",this.name="Spiritstone Sentry",this.iAttack=this.boof4610,this.iHealth=this.iAttack,this.tribe.push("ST"),this.vtext=`If ${this.name} was in a side lane, Spawn a ${this.name}.`,this.hints=["ST"],this.trigB=this.buffNug(this.iAttack,this.iAttack)}sssV(t,i){(i.creature.lane===1||i.creature.lane===5)&&g.birth(i.creature.code,"S",t.owner)}usaC(){this.faction="T",this.rarity="H",this.name="Unstable Asir",this.iAttack=this.boof357,this.iHealth=this.boof61016,this.iDefend=!0,this.tribe.push("FR","AS"),this.hints=["ST"],this.vtext=`Deal damage equal to ${this.name}'s attack to the enemy player.`,this.trigB=this.playerNug(this.iAttack)}usaV(t,i){i.creature.attack>0&&k.hurtDirect(!t.owner,i.creature.attack,this.code)}vgfsC(){this.faction="N",this.rarity="C",this.name="Vengeful Spirit",this.iAttack=this.boof357,this.iHealth=this.iAttack-2,this.tribe.push("ST"),this.hints=["ST","OP"];const t=this.boof369n;this.vtext=`Give the opposing creature ${p.jr9(t,t)}.`,this.trigB=this.buffNug(-t,-t)}vgfsV(t,i){const r=i.creature.opposed;if(r){const s=this.boof369n;r.buff(s,s)}}xhostC(){this.faction="N",this.rarity="C",this.name="Xithian Host",this.iAttack=this.boof359,this.iHealth=this.boof135,this.tribe.push("AB"),this.hints=["ST"],this.vtext=`Deal ${this.iAttack} damage to the enemy player and you gain ${this.iAttack} health.`,this.trigB=this.playerNug(this.iAttack*2)}xhostV(t,i){const r=this.iAttack;k.hurtDirect(!t.owner,r,this.code),k.heal(t.owner,r,this.code)}zimusC(){this.faction="N",this.rarity="L",this.name="Zimus, the Undying",this.iAttack=this.boof51014,this.iHealth=this.lValN([2,5,7]),this.tribe.push(this.level===1?"HM":"ZB"),this.vtext=`Spawn a Zimus, the ${this.level===2?"Returned":"Undying"}.`,this.level<3?(this.hints=["LG"],this.level===2?(this.trigB=this.buffNug(this.iAttack,this.iHealth),this.hints.push("ZZ-5")):this.hints.push("ZZ-1")):(this.hints=["ST","ZZ-5"],this.trigB=this.buffNug(this.iAttack,this.iHealth),this.trigB.bonus=1)}zimusV(t,i){let r;this.level===2?r=`${"ZTR"}2`:r=`${"ZTU"}3`,g.birth(r,"S",t.owner)}}class di extends At{lookup(t){return{["IRT"]:{c:()=>this.infrC(),m:r=>this.infrM(r)},["NXB"]:{c:()=>this.nexbC(),m:r=>this.nexbM(r)}}[t]}createMod(t,i){return this.lookup(t).m(i)}constructor(t){super(t),this.overload=!0,this.maxLevel=1,this.lookup(this.cardCode()).c()}nexus=!1;playTargets(){const t=super.playTargets();return t.push(y.playerActTarg("F","CARD",this.code,"")),t}handleAction(t){this.logSpell();const i=k.toPlayer(t.playerA),r={effId:M.genId(),logicCode:this.code};i.effects.push(r),this.enforcePlayerEffect(r,i),T.spellCast()}enforcePlayerEffect(t,i){const r=this.cardCode(),s=this.createMod(r,t.effId),c=this.nexus?[3]:[1,5];g.qPlayerCreats(i.isPlayerA).forEach(f=>{f.faction===this.faction&&c.includes(f.lane)?f.addModSafe(s):f.removeModSafe(t.effId)})}infrC(){this.faction="N",this.rarity="L",this.name="Infernal Ritual",this.text='You get "Each friendly Nekrium creature in the side lanes get Regenerate 2".'}infrM(t){return y.mod("RG",2,t)}nexbC(){this.faction="A",this.rarity="L",this.name="Nexus Bubble",this.nexus=!0,this.text='You get "Friendly Alloyin creatures in the center lane get Armor 3".'}nexbM(t){return y.mod("AR",3,t)}}class Pt extends At{lookup(t){return{["AEC"]:{c:()=>this.anceC(),p:r=>this.aeZ(r)},["CYW"]:{c:()=>this.wailC(),p:r=>this.wailZ(r)},["DIS"]:{c:()=>this.disnC(),p:r=>this.disnZ(r)},["DRE"]:{c:()=>this.dracC(),p:r=>this.deZ(r)},["DCH"]:{c:()=>this.dchantC(),p:r=>this.dchantZ(r)},["EVT"]:{c:()=>this.endvC(),p:r=>this.endvZ(r)},["ESU"]:{c:()=>this.esrgC(),p:r=>this.esrgZ(r)},["HOX"]:{c:()=>this.howlC(),p:r=>this.howlZ(r)},["IGR"]:{c:()=>this.icegC(),p:r=>this.icegZ(r)},["ITO"]:{c:()=>this.itorC(),p:r=>this.itorZ(r)},["IME"]:{c:()=>this.imecC(),p:r=>this.ieZ(r)},["LCE"]:{c:()=>this.lucidC(),p:r=>this.leZ(r)},["MSP"]:{c:()=>this.mendC(),p:r=>this.mendZ(r)},["NEM"]:{c:()=>this.netherC(),p:r=>this.netherZ(r)}}[t]}cardCast(t,i){this.lookup(t).p(i)}playTarg;constructor(t){super(t),this.playTarg="X",this.lookup(this.cardCode()).c()}playTargets(){const t=super.playTargets();return t.push(y.playerActTarg(this.playTarg,"CARD",this.code,"")),t}handleAction(t){this.logSpell();const i=k.toPlayer(t.playerA);this.cardCast(this.cardCode(),i),T.spellCast()}ddf8(t){if(t.trigger.type==="TE")return t.event.playerA===t.owner;if(t.trigger.type==="PC"){const i=t.event,r=L.getCard(i.cardCode);return r.type==="S"&&r.faction==="T"&&i.playerA===t.owner}else if(t.trigger.type==="EF"){const i=$.toEnterField(t.event);return i.creature.faction==="U"&&i.creature.owner===t.owner}else return!1}jr8(t){const i=Dt.extractCardCode(t.trigger.logicCode),r=t.event;let s=!1;if(i==="LCE"){s=!0;const c=k.toPlayer(r.playerA),f=this.level===1?1:2;this.logAct(!1),k.drawCard(c,f)}else if(i==="IME"){s=!0;const c=W.gravedigger(k.toTarget(t.owner),D.ddf2(this.level+1));c&&g.birth(c,"S",r.playerA)}else if(i==="DRE"){s=!0;const c=this.level===1?11:21;k.hurtDirect(!r.playerA,S.randInt(1,c),this.code)}else if(i==="IGR")k.hurtDirect(!r.playerA,2,this.code);else if(i==="EVT"){const c=$.toEnterField(t.event);c.creature.buff(1,1),this.logAct(!1,c.creature)}else if(i==="AEC"){s=!0;const c=g.qPlayerCreats(t.owner);if(c.length>0){const f=this.level===1?[1,2]:[2,4];c.forEach(m=>{this.logAct(!1,m),m.buff(f[0],f[1])})}}else super.jr8(t);if(s&&this.level<3){const c=k.toPlayer(r.playerA),f=y.trigIdx(c.triggers,t.trigger);f>-1?t.trigger.customCode==="P2"?c.triggers[f].customCode="P1":c.triggers.splice(f,1):console.error("Wery curious, could not find player trigger ",t.trigger)}x.triggerDone()}echTxt(){return"At the end of "+(this.level===3?"each of your turns":"this turn and your next turn")+", "}echoZ(t){const i=y.trigger("TE",this.code);return this.level<3&&(i.customCode="P2"),i.changes=!0,t.triggers.push(i),i}anceC(){this.faction="U",this.rarity="L",this.name="Ancestral Echoes",this.playTarg="F";const t=this.level===1?[1,2]:[2,4];this.text=`${this.echTxt()}each friendly creature gets ${p.jr9(t[0],t[1])}.`}aeZ(t){const i=this.echoZ(t),r=this.boof248;i.bonus=this.buffNug(r,r*2)}wailC(){this.faction="N",this.rarity="R",this.name="Crypt Wail",this.playTarg="E";const t=this.boof579;this.text=`Deal ${t} damage to the enemy player and gain ${t} health. If a Raid occured this turn, deal ${t*2} damage and gain ${t*2} health instead.`}wailZ(t){const i=this.boof579*(I.ffs>2?2:1);k.hurtDirect(t,i,this.code),k.heal(!t.isPlayerA,i,this.code)}disnC(){this.faction="T",this.rarity="R",this.name="Disintigrate",this.playTarg="E",this.text=`Deal 1 to  ${this.dshigh-1} damage to the enemy player.`}disnZ(t){k.hurtDirect(t,S.randInt(1,this.dshigh),this.code)}get dshigh(){return this.lValN([9,16,26])}dracC(){this.faction="T",this.rarity="L",this.name="Draconic Echoes",this.playTarg="F";const t=this.level===1?"10":"20";this.text=`${this.echTxt()}deal 1 to ${t} damage to the enemy player.`}deZ(t){const i=this.echoZ(t),r=this.lValN([4,9,25]);i.bonus=this.playerNug(r)}dchantC(){this.faction="U",this.rarity="C",this.name="Druid's Chant",this.playTarg="F",this.text=`You gain ${this.boof81220} health.`}dchantZ(t){k.heal(t,this.boof81220,this.code)}endvC(){this.faction="U",this.rarity="L",this.name="Enduring Vitality",this.overload=!0,this.maxLevel=1,this.playTarg="F",this.text=`You get "When a friendly Uterra creature enters play, it gets ${p.jr9(1,1)}".`}endvZ(t){const i=y.trigger("EF",this.code);i.changes=!0,t.triggers.push(i),i.bonus=this.buffNug(4,4)}esrgC(){this.faction="A",this.rarity="R",this.name="Energy Surge",this.overload=this.level===3,this.level===1?this.hints=["LG"]:this.free=!0,this.playTarg="F",this.text=`Draw ${this.level} card${this.free?"s":""}.`}esrgZ(t){k.drawCard(t,this.level)}howlC(){this.faction="N",this.rarity="R",this.name="Howl of Xith",this.maxLevel=1,this.playTarg="E",this.text="Deal X damage to the enemy player and gain X health, where X is three times your rank."}howlZ(t){const i=k.getActive(),r=i.rank*3;k.hurtDirect(t,r,this.code),k.heal(i,r,this.code)}icegC(){this.faction="T",this.rarity="L",this.name="Ice Grasp",this.overload=!0,this.maxLevel=1,this.playTarg="F",this.text='You get "When you play a Tempys spell, deal 2 damage to the enemy player".'}icegZ(t){const i=y.trigger("PC",this.code);i.changes=!0,t.triggers.push(i),i.bonus=this.playerNug(6)}itorC(){this.faction="T",this.rarity="R",this.name="Ice Torrent",this.free=this.level>1,this.level===1&&(this.hints=["LG"]),this.playTarg="E",this.text=`Deal ${this.boof234} damage to the enemy player.`}itorZ(t){k.hurtDirect(t,this.boof234,this.code)}imecC(){this.faction="N",this.rarity="L",this.name="Immortal Echoes",this.playTarg="F";const t=`Spawn a random friendly ${p.levelGateText(this.level+1)}creature that was destroyed this game`;this.text=`${this.echTxt()}${t}.`}ieZ(t){const i=this.echoZ(t),r=this.lValN([1,1,3]);i.bonus=this.multNug(this.avgSpawnNug(),r)}lucidC(){this.faction="A",this.rarity="L",this.name="Lucid Echoes",this.playTarg="F";const t=this.level===1?"draw 1 card":"draw 2 cards";this.text=`${this.echTxt()}${t}.`}leZ(t){const i=this.echoZ(t),r=this.boof124*lt.dcWeight;i.bonus=this.rawNug(0,0,0,0,r)}mendC(){this.faction="U",this.rarity="R",this.name="Mending Spring",this.playTarg="F",this.text=`You gain 1 to ${this.mendboof} Health.`}mendZ(t){ot.simOn?this.boof61224:this.mendboof+1,k.heal(t,S.randInt(1,this.mendboof+1),this.code)}get mendboof(){return this.lValN([10,20,40])}netherC(){this.faction="N",this.rarity="C",this.name="Nether Embrace",this.playTarg="E";const t=this.boof4712;this.text=`Deal ${t} damage to the enemy player. You gain ${t} heal`}netherZ(t){const i=this.boof4712;k.hurtDirect(t,i,this.code),k.heal(!t.isPlayerA,i,this.code)}}class ss extends N{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Primeval Ancient",this.iAttack=this.boof359,this.iHealth=this.boof71117,this.tribe.push("DN"),this.text=`At the end of your turn, you gain ${this.healy} life.~Forge: If there are no enemy creatures, spawn a copy of this.`}get healy(){return this.level+2}jr3(t,i){const r=super.jr3(t,i);r.jr4("FR");const s=r.jr4("TE");return s.bonus=this.playerNug(this.healy),r}ddf8(t){return t.event.playerA===t.owner}jr8(t){t.trigger.type==="FR"?g.qEnemyCreats().length===0&&g.birth(this.code,"S",t.owner):t.event.code==="TRE"&&k.heal(t.owner,this.healy,this.code),x.triggerDone()}}class as extends N{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Rageborn Hellion",this.iAttack=this.boof469,this.iHealth=this.iAttack*2,this.tribe.push("FR","EL"),this.hints=["OL"],this.text=`When a friendly creature ${p.dbdtap()}, ${this.name} gets ${p.jr9(this.level,this.level)}.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("DM"),c=this.boof246;return s.bonus=this.buffNug(c,c),r}ddf8(t){const i=$.toDamage(t.event);return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcCreat.owner===t.owner}jr8(t){g.jr5(t.creatId).buff(this.level,this.level),x.triggerDone()}}class le extends N{lookup(t){return{["BTD"]:{c:()=>this.btdC(),r:r=>this.btdR(r)},["DKS"]:{c:()=>this.dksC(),r:r=>this.dksR(r)},["HMO"]:{c:()=>this.hrdC(),r:r=>this.hrdR(r)},["HVE"]:{c:()=>this.hveC(),r:r=>this.hveR(r)},["LTU"]:{c:()=>this.ltuC(),r:r=>this.ltuR(r)},["QSW"]:{c:()=>this.qswC(),r:r=>this.qswR(r)},["RTW"]:{c:()=>this.rlwC(),r:r=>this.rlwR(r)},["SMS"]:{c:()=>this.smsC(),r:r=>this.smsR(r)}}[t]}trigB;rtext="";constructor(t){super(t),this.lookup(this.cardCode()).c(),this.text="Raid: "+this.rtext,this.rtext=""}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("RD");return s.bonus=this.trigB,r}jr8(t){this.lookup(this.cardCode()).r(t),x.triggerDone()}btdC(){this.faction="T",this.rarity="L",this.name="Blitzmane, the Destroyer",this.iAttack=this.lValN([5,8,10]),this.iHealth=this.iAttack-1,this.iAggro=!0,this.iMobile=1,this.tribe.push("DG"),this.trigB=this.buffNug(0,this.iAttack),this.rtext="Deal damage equal to Blitzmane's attack to the opposing creature. If unopposed, deal the damage to the enemy player instead."}btdR(t){const i=g.jr5(t.creatId);if(i.attack>0){const r=i.opposed;r?r.hurtDirect(i.attack,this.code):k.hurtDirect(!i.owner,i.attack,this.code)}}dksC(){this.faction="T",this.rarity="R",this.name="Dragonkeeper Shaman",this.iAttack=this.boof61016,this.iHealth=this.boof369,this.tribe.push("HM");const t=this.level+2;this.trigB=this.buffNug(0,t),this.rtext=`Deal ${t} damage to each enemy creature.`}dksR(t){const i=g.qEnemyCreats();if(i.length>0){const r=M.tick(),s=this.level+2;i.forEach(c=>c.hurtDirect(s,this.code,r))}}hrdC(){this.faction="U",this.rarity="C",this.name="Herd Mother",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.tribe.push("DN");const t=this.level+2;this.trigB=this.buffNug(this.level,this.level),this.rtext=`${this.name} gets ${p.jr9(t,t)}.`}hrdR(t){this.logAct(!1);const i=g.jr5(t.creatId),r=this.level+2;i.buff(r,r)}hveC(){this.faction="U",this.rarity="R",this.name="Hive Empress",this.iAttack=this.boof234,this.iHealth=this.boof61016,this.tribe.push("IN"),this.hints=[this.lValH(["ZZ+1","ZZ+2","ZZ+4"])],this.trigB=this.playerNug(this.iAttack),this.rtext=`Give the enemy player Poison ${this.iAttack}.`}hveR(t){this.logAct(!1);const i=k.toPlayer(!t.owner);i.poison+=this.iAttack}ltuC(){this.faction="U",this.rarity="L",this.name="Lorus, the Unrivaled",this.iAttack=this.boof2612,this.iHealth=this.boof71117,this.tribe.push("LP"),this.trigB=this.buffNug(3,3),this.level===3?this.rtext=`Each other friendly creature gets ${p.jr9(3,3)}.`:this.rtext=`Replace this with a level ${this.level+1} ${this.name}.`}ltuR(t){if(this.logAct(!1),this.level===3)g.creatByTarget(y.crFriendNotMeTarg(t.creatId)).forEach(i=>i.buff(3,3));else{const i=g.jr5(t.creatId);g.birth(this.levelUpCard(),"R",i.owner,i.lane)}}qswC(){this.faction="T",this.rarity="L",this.name="Quakeasaurus Wrecks",this.iAttack=this.boof5814,this.iHealth=this.iAttack+2,this.tribe.push("DN");const t=this.boof234;this.trigB=this.playerNug(t),this.rtext=`Deal damage to a random enemy creature and to the enemy player equal to ${t}x the number of friendly Dinosaurs.`}qswR(t){const i=y.crFriendTarg();i.tribe="DN";const r=g.creatByTarget(i).length*this.boof234,s=g.qEnemyCreats();s.length>0&&s[S.randInt(0,s.length)].hurtDirect(r,this.code),k.hurtDirect(!t.owner,r,this.code)}rlwC(){this.faction="U",this.rarity="H",this.name="Relentless Wanderers",this.iAttack=this.boof51015,this.iHealth=this.iAttack-this.level,this.tribe.push("ST","WD"),this.hints=[this.lValH(["ZZ-1","ZZ-3","ZZ-3"])],this.trigB=this.multNug(this.spawnNug(this),.5),this.rtext=`Spawn a ${p.tokName(this)}.`}rlwR(t){g.birth(this.code,"S",t.owner)&&this.logAct(!1)}smsC(){this.faction="T",this.rarity="C",this.name="Stampeding Mongosaur",this.iAttack=this.boof61015,this.iHealth=this.iAttack,this.tribe.push("DN");const t=this.lValN([6,8,10]);this.trigB=this.playerNug(t/2),this.rtext=`Deal ${t} damage to the enemy player.`}smsR(t){k.hurtDirect(!t.owner,this.lValN([6,8,10]),this.code)}}class Gt extends N{lookup(t){return{["AIV"]:{c:()=>this.avinvC(),r:r=>this.avinvR(r)},["BSP"]:{c:()=>this.bskphC(),r:r=>this.bskphR(r)},["CRC"]:{c:()=>this.crucC(),r:r=>this.crucR(r)},["ESK"]:{c:()=>this.ebknC(),r:r=>this.ebknR(r)},["FWC"]:{c:()=>this.fwcC(),r:r=>this.fwcR(r)},["FME"]:{c:()=>this.feggC(),r:r=>this.feggR(r)},["MMV"]:{c:()=>this.mmovC(),r:r=>this.mmovR(r)},["PSH"]:{c:()=>this.porshC(),r:r=>this.porshR(r)},["RGG"]:{c:()=>this.runegC(),r:r=>this.runegR(r)},["SSR"]:{c:()=>this.solrevC(),r:r=>this.solrevR(r)},["SSM"]:{c:()=>this.spshamC(),r:r=>this.spshamR(r)},["SSG"]:{c:()=>this.snoutC(),r:r=>this.snoutR(r)},["UGM"]:{c:()=>this.mantisC(),r:r=>this.mantisR(r)}}[t]}rtext="";trigB;constructor(t){super(t),this.lookup(this.cardCode()).c(),this.text="Gain Rank: "+this.rtext,this.rtext=""}image(t){return this.rarity==="T"?this.cardCode()==="FWC"?this.rawImage("MPH",t):super.fixedImage(t):super.image(t)}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("RU");return s.bonus=this.trigB,r}ddf8(t){return t.event.playerA===t.owner}jr8(t){this.lookup(this.cardCode()).r(t),x.triggerDone()}avinvC(){this.faction="T",this.rarity="H",this.name="Avalanche Invoker",this.iAttack=this.boof6914,this.iHealth=this.iAttack+1,this.tribe.push("ER","AS"),this.hints=["TL"];const t=this.boof3612;this.trigB=this.buffNug(t,0),this.rtext=`Deal ${t} damage to each non-Tempys creature.`}avinvR(t){const i=this.boof3612,r=M.tick();g.qActiveCreats().filter(s=>s.faction!=="T").forEach(s=>s.hurtDirect(i,this.code,r))}bskphC(){this.faction="N",this.rarity="C",this.name="Blightskull Phantasm",this.iAttack=this.boof5814,this.iHealth=this.boof61017,this.tribe.push("ST"),this.hints=["TL","OP"];const t=this.boof369n;this.trigB=this.buffNug(0,-t),this.rtext=`The opposing creature gets ${p.jr9(t,t)}.`}bskphR(t){const r=g.jr5(t.creatId).opposed;if(r){const s=this.boof369n;r.buff(s,s)}}crucC(){this.faction="A",this.rarity="R",this.name="Crucible Colossus",this.iAttack=this.boof61016,this.iHealth=this.iAttack+2,this.tribe.push("RB"),this.iDefend=!0,this.hints=["TL"],this.trigB=this.rawNug(0,0,0,0,.2),this.rtext=`Negate Defender from ${this.name}.`}crucR(t){const i=g.jr5(t.creatId);i.negateDefender=!0}ebknC(){this.faction="N",this.rarity="H",this.name="Ebonskull Knight",this.iAttack=this.lValN([9,13,18]),this.iHealth=this.iAttack-2,this.tribe.push("VP"),this.hints=["TL"],this.trigB=this.rawNug(0,0,0,0,-1),this.rtext=`Destroy ${this.name}.`}ebknR(t){const i=g.jr5(t.creatId);W.destroy(i,this.code)}fwcC(){this.faction="U",this.rarity="T",this.maxLevel=1,this.name="Feywing Chrysalis",this.iAttack=0,this.iHealth=3,this.tribe.push("CR"),this.iDefend=!0,this.trigB=this.buffNug(5,5),this.rtext=`Replace ${this.name} with a 9/9 Feywing.`}fwcR(t){const i=g.jr5(t.creatId);g.birth(`${"FWG"}1`,"R",i.owner,i.lane)}feggC(){this.faction="T",this.rarity="T",this.minLevel=this.level,this.maxLevel=this.level,this.name="Frostmane Egg",this.iAttack=0,this.iHealth=6,this.tribe.push("DG"),this.iDefend=!0;const t=this.lValN([6,9,13]);this.trigB=this.buffNug(t,t),this.rtext=`Replace ${this.name} with a level ${this.level} Frostmane Dragon.`}feggR(t){const i=g.jr5(t.creatId);g.birth(`${"FMD"}${this.level}`,"R",i.owner,i.lane)}mmovC(){this.faction="A",this.rarity="C",this.name="Metamind Overseer",this.iAttack=this.boof5915,this.iHealth=this.iAttack+1,this.tribe.push("MM"),this.hints=["TL"],this.trigB=this.rawNug(0,0,0,0,lt.dcWeight*.6),this.rtext="Draw 2 cards."}mmovR(t){k.drawCard(t.owner,2)}porshC(){this.faction="N",this.rarity="H",this.name="Portal Shade",this.iAttack=this.boof5914,this.iHealth=this.boof71118,this.tribe.push("ST"),this.trigB=this.multNug(this.avgSpawnNug(),.4),this.rtext="Spawn a random creature that was destroyed this game."}porshR(t){const i=W.gravedigger();i&&g.birth(i,"S",t.owner)}runegC(){this.faction="U",this.rarity="H",this.name="Runegrove Guardian",this.iAttack=this.boof4814,this.iHealth=this.iAttack,this.tribe.push("PL"),this.hints=["TL"],this.trigB=this.buffNug(0,this.iAttack),this.rtext=`${this.name} gets ${p.jr9(this.iAttack,this.iAttack)}.`}runegR(t){g.jr5(t.creatId).buff(this.iAttack,this.iAttack)}solrevC(){this.faction="U",this.rarity="L",this.name="Solstice Reveler",this.iAttack=this.boof4816,this.iHealth=this.iAttack,this.tribe.push("HM"),this.hints=["TL"];const t=this.boof248;this.trigB=this.buffNug(t,t);const i=this.level===3;let r="";i&&(r=", and Breakthrough"),this.rtext=`Each friendly creature gets ${p.jr9(t,t,i)}${r}.`}solrevR(t){const i=this.boof248;g.ddf1().forEach(r=>{r.buff(i,i),this.level===3&&(r.breakthrough=!0)})}spshamC(){this.faction="T",this.rarity="C",this.name="Spiritfrost Shaman",this.iAttack=this.boof71117,this.iHealth=this.boof4610,this.tribe.push("HM"),this.hints=["TL"];const t=this.boof579;this.rtext=`Deal ${t} damage to the enemy player.`,this.trigB=this.playerNug(t)}spshamR(t){k.hurtDirect(!t.owner,this.boof579,this.code)}snoutC(){this.faction="U",this.rarity="C",this.name="Stouthide Stegadon",this.iAttack=this.boof4714,this.iHealth=this.boof71117,this.tribe.push("DN"),this.hints=["TL"],this.rtext=`Heal ${this.snoutbof} damage from ${this.name}.`,this.trigB=this.buffNug(0,this.iHealth)}snoutR(t){g.jr5(t.creatId).heal(this.snoutbof)}get snoutbof(){return this.level*10}mantisC(){this.faction="U",this.rarity="C",this.name="Umbraglim Mantis",this.iAttack=this.boof6914,this.iHealth=this.iAttack-1,this.tribe.push("IN"),this.hints=["TL"];const t=this.mantbof;this.rtext=`You gain ${t} health.`,this.trigB=this.playerNug(t/3)}mantisR(t){k.heal(t.owner,this.mantbof,this.code)}get mantbof(){return this.lValN([8,10,12])}}class ns extends At{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Remembrance",this.text=`Banish a ${p.levelGateText(this.level)}creature from your discard pile, then Spawn a copy of it.`}playTargets(){const t=super.playTargets();if(this.remCrds().length===0)return t;const i=D.boardTarget("CARD",this.code);return i.param="P1",t.push(i),t}remCrds(){const t=k.getActive(),i=y.target("TD");return i.player=k.toTarget(t),i.card="C",i.level=D.ddf2(this.level),St.generateContent(t.discard,!1,i)}handleAction(t){if(t.param==="P1"){const i=this.remCrds(),r=i.map(c=>{const f=y.deckSelectAction("CARD",c.cardCode,c.sourceIdx);return f.host=this.code,f}),s=T.cancelAction();s.param="PM",r.push(s),St.showCustomDeck(i,r)}else{const i=t,r=k.getActive();r.discard.splice(i.position,1);const s=g.birth(i.card,"S",r.isPlayerA);this.logSpell(s),bt.popMode(),T.spellCast()}}}class os extends N{constructor(t){super(t),this.faction="T",this.rarity="R",this.name="Riftlasher",this.iAttack=this.boof359,this.iHealth=this.boof61016,this.tribe.push("FR","EL"),this.text=`When ${this.name} ${p.dbdtap()} on your turn, you may deal that much damage to an enemy creature.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("DM");return s.interactive=!0,s.bonus=this.buffNug(this.iAttack,0),r}ddf8(t){return t.event.battle&&!t.event.isCreatTarg&&t.event.isCreatSrc&&t.event.srcId===t.creatId&&t.owner===k.getActiveB()}jr8(t){const i=D.toActions(y.crEnemyActTarg("CARD",this.code,S.enTil(t.creatId,t.event.dmg)));i.length>0?(i.push(T.noneEndTrigger()),T.ddf5(i)):x.triggerDone()}handleAction(t){const i=S.deTil(t.param);g.ddf6(t).hurtDirect(parseInt(i[1]),this.code),T.actionDone(!0)}}class hs extends Ot{jr3(t,i){const r=super.jr3(t,i);return r.jr4("AS"),r}jr8(t){if(t.trigger.type==="AS"){let i=!0;for(;i;){const r=g.birth(this.code,"S",t.owner);r?r.opposed&&(i=!1):i=!1}x.triggerDone()}else super.jr8(t)}}class ls extends N{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Scourgeflame Sorcerer",this.iAttack=this.boof358,this.iHealth=this.boof5914,this.tribe.push("ZB");let i=": ",r=1;this.level<3&&(i=", destroy another friendly creature: ",r=.5);const s=`Destroy an enemy ${p.levelGateText(this.level+1)}creature.`;this.text=`Activate${i}${s}`,this.bonus={activ8:this.multNug(this.avgSpawnNug(),r)}}canActivate(t){return this.enemies(t).length>0?this.level===3?!0:this.friends(t).length>0:!1}startActivation(t){let i;this.level===3?i=this.enemies(t):i=this.friends(t),i.push(T.cancelAction()),T.ddf5(i)}handleAction(t){const i=S.deTil(t.param),r=g.jr5(i[0]),s=g.ddf6(t);if(i[1]==="P1"){const c=this.enemies(r,s.id);c.push(T.cancelAction()),T.ddf5(c)}else{this.logAct(!0);const c=M.tick();if(this.level<3){const f=g.jr5(i[2]);W.destroy(f,this.code,c)}W.destroy(s,this.code,c),r.endActivation()}}friends(t){const i=y.crFriendNotMeActTarg("CARD",t.id,this.code,S.enTil(t.id,"P1"));return D.toActions(i)}enemies(t,i=""){const r=y.crEnemyActTarg("CARD",this.code,S.enTil(t.id,"P2",i));return r.level=D.ddf2(this.level+1),D.toActions(r)}}class cs extends N{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Scourge Knights",this.iAttack=this.boof4814,this.iHealth=this.iAttack,this.tribe.push("ZB");const i=this.boof246n;this.text=`Formation: Give an enemy creature ${p.jr9(i,i)}.`}get formation(){return!0}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FM");return s.interactive=!0,r}jr8(t){if(t.owner!==k.getActiveB()){x.triggerDone();return}const i=y.crEnemyActTarg("CARD",this.code,""),r=D.toActions(i);r.length>0?T.ddf5(r):x.triggerDone()}handleAction(t){const i=g.ddf6(t);this.logAct(!1,i);const r=this.boof246n;i.buff(r,r),T.actionDone(!0)}}class ds extends N{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Seismic Adept",this.iAttack=this.boof4712,this.iHealth=this.boof61218,this.tribe.push("HM"),this.text="Activate: Move an enemy creature to another available enemy lane.",this.bonus={activ8:this.rawNug(0,0,0,0,this.level*.5)}}canActivate(t){return this.enemies(t).length>0&&this.empties(t).length>0}startActivation(t){const i=this.enemies(t);i.push(T.cancelAction()),T.ddf5(i)}handleAction(t){const i=S.deTil(t.param),r=g.jr5(i[1]);if(i[0]==="P1"){const s=g.ddf6(t),c=this.empties(r,s.id);c.push(T.cancelAction()),T.ddf5(c)}else{const s=g.jr5(i[2]);this.logAct(!0,s),s.move(t.lane),r.endActivation()}}empties(t,i=""){const r=y.emptyPlayerActTarg("E","CARD",this.code,S.enTil("P2",t.id,i));return D.toActions(r)}enemies(t){const i=y.crEnemyActTarg("CARD",this.code,S.enTil("P1",t.id));return D.toActions(i)}}class us extends N{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Shadowsmith",this.iAttack=this.boof3612,this.iHealth=this.boof6915,this.tribe.push("DF","HM"),this.text=`When ${this.name} or another friendly Darkforged enters play on your turn, you may discard and level up a card.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("EF");return s.bonus=this.rawNug(0,0,0,0,.5),s.interactive=!0,r}handleAction(t){I.levelAndDiscardA(t),T.actionDone(!0)}ddf8(t){const i=$.toCreature(t.event);return i.creature.owner===t.owner&&t.owner===k.activePlayer&&i.creature.isTribe("DF")}jr8(t){const i=y.lvlHandActTarg(this.code,t.creatId),r=D.toActions([i,D.buttonTarget("NOTR")]);r.length>1?T.ddf5(r):x.triggerDone()}}class $e extends N{constructor(t){super(t),this.rarity="R",this.iAttack=this.boof4612,this.iHealth=this.boof61016;const i=this.cardCode();i==="SSS"?this.steel():i==="LSS"?this.life():i==="FSS"?this.flame():i==="DSS"&&this.dark(),this.level>1?this.text=`When you play a ${p.levelGateText(this.level-1)}${p.factionText(this.faction)} card, you may ${this.tuxt}.`:this.hints=["LG"],this.tuxt=""}tuxt="";dark(){this.faction="N",this.name="Darkshaper Savant",this.tribe.push("ZB");const t=-this.boof135;this.tuxt=`give an enemy creature ${p.jr9(t,t)}`}life(){this.faction="U",this.name="Lifeshaper Savant",this.tribe.push("SE");const t=this.boof135;this.tuxt=`give another friendly creature ${p.jr9(t,t)}`}steel(){this.faction="A",this.name="Steelshaper Savant",this.tribe.push("HM"),this.tuxt=`give another friendly creature Armor ${this.boof124}`}flame(){this.faction="T",this.name="Flameshaper Savant",this.tribe.push("HM"),this.tuxt=`deal ${this.boof147} damage to target creature or player`}jr3(t,i){const r=super.jr3(t,i);if(this.level>1){const s=r.jr4("PC");s.interactive=!0,s.bonus=this.rawNug(0,0,0,0,this.level*.5)}return r}ddf8(t){if(t.event.playerA===t.owner){const i=L.getCard(t.event.cardCode);if(i.level<this.level&&i.faction===this.faction)return!0}return!1}jr8(t){const i=y.crActTarg("CARD",this.code,""),r=[i,D.buttonTarget("NOTR")];if(this.faction==="N")i.player="E";else if(this.faction==="T"){i.hint=["HR"];const c=y.actionTarget("TP","CARD",this.code,"");c.hint=["HR"],r.push(c)}else i.notMe=t.creatId,i.player="F",this.faction==="A"&&(i.canArmor=!0);const s=D.toActions(r);s.length===1?x.triggerDone():T.ddf5(s)}handleAction(t){if(this.faction==="T"&&t.zone==="P")k.hurtDirect(t.playerA,this.level===3?7:4,this.code);else{const i=g.ddf6(t);if(this.faction==="A")this.logAct(!1,i),i.addArmor(this.level===3?4:2);else if(this.faction==="T")i.hurtDirect(this.level===3?7:4,this.code);else{this.logAct(!1,i);const r=(this.level===3?5:3)*(this.faction==="N"?-1:1);i.buff(r,r)}}T.actionDone(!0)}}class fs extends N{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Shardplate Behemoth",this.iAttack=0,this.iHealth=this.lValN([11,13,15]),this.tribe.push("IN"),this.level<3&&(this.hints=["LB"]),this.text=`${this.name}'s attack is equal to its health.`}jr3(t,i){const r=super.jr3(t,i);return r.addEffect("CH",this.code),r.addEffect("AT",this.code),r.addModSafe(this.sbm(r)),r}enforceEffect(t){t.status==="A"&&t.attack!==t.health&&(t.removeModSafe(t.id,!1),t.addMod(this.sbm(t)))}sbm(t){return y.mod("AT",t.health-t.attack,t.id)}}class gs extends N{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Shardplate Toxoid",this.iAttack=this.boof4612,this.iHealth=this.boof61018,this.tribe.push("IN"),this.text=`Forge: Give an enemy creature Poison ${this.spit}.~At the end of the enemy player's turn, each enemy creature gets Poison ${this.splat}.`}get spit(){return this.lValN([2,4,10])}get splat(){return this.lValN([1,2,5])}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");s.interactive=!0;const c=r.jr4("TE");return c.bonus=this.regnNug(this.spit),r}handleAction(t){const i=g.ddf6(t);i.addPoison(this.spit),this.logAct(!1,i),T.actionDone(!0)}ddf8(t){return t.event.code==="TRE"&&t.owner!==t.event.playerA}jr8(t){if(t.trigger.type==="FR"){const i=y.crEnemyActTarg("CARD",this.code,""),r=D.toActions(i);r.length>0?T.ddf5(r):x.triggerDone()}else{const i=g.qPlayerCreats(!t.owner);if(i.length>0){this.logAct(!1);const r=this.splat;i.forEach(s=>s.addPoison(r))}x.triggerDone()}}}class ms extends N{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Slumbering Shrine",this.iAttack=0,this.iHealth=this.lValN([14,20,30]),this.iDefend=!0,this.tribe.push("ER","EL"),this.text="When you play an spell, you may Negate Defender from a friendly creature."}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("PC");return s.bonus=this.rawNug(0,0,0,0,.5),s.interactive=!0,r}handleAction(t){const i=g.ddf6(t);i.negateDefender=!0,this.logAct(!1,i),T.actionDone(!0)}ddf8(t){return t.event.playerA===t.owner&&L.getCard(t.event.cardCode).type==="S"}jr8(t){const i=y.crFriendActTarg("CARD",this.code,""),r=D.toActions([i,D.buttonTarget("NOTR")]);r.length>1?T.ddf5(r):x.triggerDone()}}class ps extends N{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Snowdrift Alpha",this.iAttack=this.boof61224,this.iHealth=this.boof4816,this.tribe.push("ST"),this.hints=[this.lValH(["ZZ-2","ZZ-3","ZZ-5"]),"OP"];const i=L.getCard(this.hc());this.text=`Activate: Put a ${p.tokName(i)} into an available lane.`,this.bonus={activ8:this.spawnNug(i)}}hc(){return "HTP"+this.level}canActivate(t){return this.empties(t).length>0}startActivation(t){const i=this.empties(t);i.push(T.cancelAction()),T.ddf5(i)}handleAction(t){this.logAct(!0);const i=g.jr5(t.param);g.birth(`${this.hc()}`,"P",t.playerA,t.lane),i.endActivation()}empties(t){const i=y.emptyPlayerActTarg("F","CARD",this.code,t.id);return D.toActions(i)}}class ys extends N{constructor(t){super(t),this.faction="T",this.rarity="R",this.name="Sparkstone Elemental",this.iAttack=this.boof4815,this.iHealth=this.iAttack+3,this.tribe.push("LT","EL"),this.text="Negate Defender from each creature."}jr3(t,i){const r=super.jr3(t,i),s=r.addEffect("PS",this.code);return s.area="A",r}enforceEffect(t){if(t.status==="A"){const r=y.mod("ND",!0,t.id);g.qActiveCreats().forEach(s=>s.addModSafe(r))}else g.qActiveCreats().forEach(r=>r.removeModSafe(t.id))}}class bs extends At{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Spiritcleave",this.text=`Destroy a ${p.levelGateText(this.level+1)}creature with the highest health among all creatures.${this.level===3?"~You gain health equal to that creature's health.":""}`}playTargets(){const t=super.playTargets();let i=-1;const r=g.qActiveCreats();r.forEach(f=>{f.health>i&&(i=f.health)});const s=r.filter(f=>f.health===i).map(f=>f.id),c=y.crActTarg("CARD",this.code,"");return c.level=D.ddf2(this.level+1),c.victims=S.enTil(...s),this.level<3&&(c.hint=["KL"]),t.push(c),t}handleAction(t){this.logSpell();const i=g.ddf6(t);W.destroy(i,this.code),this.level===3&&k.heal(k.getActiveB(),i.health,this.code),T.spellCast()}}class As extends At{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Spiritleash";const i=this.boof5814;this.text=`Destroy a friendly creature.~Give a creature ${p.jr9(i,i)}.`}playTargets(){const t=super.playTargets(),i=y.crFriendActTarg("CARD",this.code,"P1");return g.creatByTarget(i).length>0&&g.qActiveCreats().length>1&&t.push(i),t}handleAction(t){const i=S.deTil(t.param),r=g.ddf6(t);if(i[0]==="P1"){const s=y.crNotMeActTarg("CARD",r.id,this.code,S.enTil("P2",r.id));s.hint=["BF"];const c=D.toActions(s);c.push(T.cancelAction()),T.ddf5(c)}else{this.logSpell(r);const s=g.jr5(i[1]),c=this.boof5814;W.destroy(s,this.code),r.buff(c,c),T.spellCast()}}}class ks extends N{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Spite Hydra",this.iAttack=this.boof5914,this.iHealth=this.iAttack,this.tribe.push("HY"),this.text=`When ${this.name} ${p.dbdtac()}, this gets ${p.jr9(this.level,this.level)}.~Allied Tempys: Activate: Deal ${this.level} damage to another creature. This gets ${p.jr9(this.level,this.level)}.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("FR");const s=r.jr4("DM");return s.bonus=this.buffNug(this.level,this.level),r}zapTargs(t){const i=y.crNotMeActTarg("CARD",t,this.code,t);return i.hint=["HR"],D.toActions([i,D.buttonTarget("CANC")])}canActivate(t){return this.zapTargs(t.id).length>1&&t.hasMod(t.id)}startActivation(t){T.ddf5(this.zapTargs(t.id))}ddf8(t){return t.event.battle&&t.event.isCreatTarg&&t.event.isCreatSrc&&t.event.srcId===t.creatId}handleAction(t){const i=g.ddf6(t),r=g.jr5(t.param);this.logAct(!0),i.hurtDirect(this.level,this.code),r.buff(this.level,this.level),r.endActivation()}jr8(t){const i=g.jr5(t.creatId);if(t.trigger.type==="FR"){if(I.allied("T")){i.addMod(y.mod("AL",!0,i.id)),i.changed=!0;const r=i.jr4("NT");r.bonus=this.buffNug(this.boof246,this.level)}}else t.trigger.type==="DM"&&i.buff(this.level,this.level);x.triggerDone()}}class vs extends N{constructor(t){super(t),this.faction="A",this.rarity="R",this.name="Statis Warden",this.iAttack=this.boof5915,this.iHealth=this.iAttack+1,this.tribe.push("MM"),this.text="When you play a spell, give a friendly creature Defender until the end of the enemy player's next turn."}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("PC");return s.interactive=!0,s.bonus=this.rawNug(0,0,0,0,.5),r}handleAction(t){const i=g.ddf6(t);this.logAct(!1,i);const r=y.mod("DF",!0);r.expiry="EN",i.addMod(r),T.actionDone(!0)}ddf8(t){return t.event.playerA===t.owner&&L.getCard(t.event.cardCode).type==="S"}jr8(t){const i=y.crFriendActTarg("CARD",this.code,t.creatId);i.canDefender=!0;const r=D.toActions(i);r.length===0?x.triggerDone():(r.push(T.noneEndTrigger()),T.ddf5(r))}}class Ts extends N{constructor(t){super(t),this.faction="A",this.rarity="C",this.name="Steeleye Researcher",this.iAttack=this.boof5915,this.iHealth=this.iAttack+1,this.tribe.push("HM"),this.hints=["RD"],this.text=`Upgrade: You may ${p.daluac()}.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("UP");return s.interactive=!0,r}handleAction(t){I.levelAndDiscardA(t),T.actionDone(!0)}jr8(t){const i=y.lvlHandActTarg(this.code,t.creatId),r=D.toActions(i);r.length>0?(r.push(T.noneEndTrigger()),T.ddf5(r)):x.triggerDone()}}class Ss extends N{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Steeleye Seer",this.iAttack=0,this.iHealth=this.lValN([8,12,18]),this.iDefend=!0,this.tribe.push("HM"),this.hints=["OL"],this.level===3?this.text="Activate: Level up a card in your hand. You may use this ability twice each turn.":this.text="Activate: Level a card in your hand, then discard it if its level is higher than your Rank.",this.bonus={activ8:this.rawNug(0,0,0,0,this.lValN([.8,1.7,3]))}}jr3(t,i){const r=super.jr3(t,i);return this.level===3&&(r.jr4("TS"),this.addExtraActivate(r)),r}jr8(t){if(t.trigger.type==="TS"){const i=g.jr5(t.creatId);this.addExtraActivate(i),x.triggerDone()}}canActivate(t){return k.toPlayer(t.owner).hand.some(r=>L.getCard(r).canLevel())}startActivation(t){const i=y.lvlHandActTarg(this.code,t.id);i.hint?.push("DF"),T.ddf5(D.toActions([i,D.buttonTarget("CANC")]))}handleAction(t){this.logAct(!0);const i=g.jr5(t.param),r=k.toPlayer(i.owner);this.level===3||r.rank>parseInt(t.card.slice(3))?r.hand[t.position]=L.getCard(t.card).levelUpCard():I.levelAndDiscardA(t),i.endActivation()}}class Cs extends N{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Steelscale Dragon",this.iAttack=this.boof4812,this.iHealth=this.iAttack+2,this.tribe.push("RB","DG"),this.iMobile=this.level;const i=this.boof246;this.addSp("M",i),this.text=`While each other friendly creature has Defender, ${this.name} gets ${p.jr9(this.iAttack,0)}, Armor ${i}, and Breakthrough.`}jr3(t,i){const r=super.jr3(t,i),s=r.addEffect("DF",this.code);s.area="C";const c=r.addEffect("PS",this.code);return c.area="C",r}enforceEffect(t){const i=y.crNotMeTarg(t.id);if(i.player=k.toTarget(t.owner),g.creatByTarget(i).some(s=>!s.defender))t.removeModSafe(t.id);else{const s=y.mod("AT",this.iAttack,t.id),c=y.mod("AR",this.boof246,t.id),f=y.mod("BT",!0,t.id);t.addModSafe(s),t.addModSafe(c),t.addModSafe(f)}}}class ws extends N{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Storm Bringer",this.iAttack=this.boof5814,this.iHealth=this.boof61018,this.tribe.push("WN","EL");const i=this.boof246;this.addSp("D",i),this.text=`At the start of each turn, ${this.name} moves to an available lane at random. Flank: Deal ${i} damage to the opposing creature.`}jr3(t,i){const r=this.boof246,s=super.jr3(t,i),c=s.jr4("TS");c.bonus=this.rawNug(0,0,r,0,.2);const f=s.jr4("FK");return f.bonus=this.buffNug(r,0),s}ddf8(t){return!0}jr8(t){if(t.trigger.type==="TS"){const i=g.jr5(t.creatId);g.fling(i),x.triggerDone()}else if(t.trigger.type==="FK"){const r=$.toCreature(t.event).creature.opposed;r&&r.hurtDirect(this.boof246,this.code),x.triggerDone()}else super.jr8(t)}}class Ds extends N{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Sulgrim, Herald of Force",this.iAttack=15,this.iHealth=15,this.tribe.push("GL"),this.addSp("M",6),this.bonus={activ8:this.buffNug(6,0)},this.text="Activate: Deal damage equal to a friendly creature's Armor to an enemy creature.~Forge: Each friendly creature gets Armor 6."}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}canActivate(t){return this.enemies(t.id).length>0&&this.friends(t.id).length>0}startActivation(t){const i=this.friends(t.id);i.push(T.cancelAction()),T.ddf5(i)}handleAction(t){const i=S.deTil(t.param),r=g.ddf6(t);if(i[1]==="P1"){const s=this.enemies(i[0],r.id);s.push(T.cancelAction()),T.ddf5(s)}else if(i[1]==="P2"){const s=g.jr5(i[0]),c=g.jr5(i[2]);this.logAct(!0,c),r.hurtDirect(c.armor,this.code),s.endActivation()}}jr8(t){g.ddf1().forEach(i=>i.addArmor(6)),x.triggerDone()}friends(t){const i=y.crFriendActTarg("CARD",this.code,S.enTil(t,"P1"));return i.hasArmor=!0,D.toActions(i)}enemies(t,i=""){const r=y.crEnemyActTarg("CARD",this.code,S.enTil(t,"P2",i));return D.toActions(r)}}class xs extends N{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Synapsis Oracle",this.iAttack=this.boof358,this.iHealth=this.lValN([9,15,24]),this.tribe.push("HM"),this.hints=["OL"];let i;this.level===3?(this.text="Activate: Level up a card in your hand.",i=1):(this.text=`Activate: ${p.daluac(!0)}.`,i=.5),this.bonus={activ8:this.rawNug(0,0,0,0,i)}}canActivate(t){return k.toPlayer(t.owner).hand.some(r=>L.getCard(r).canLevel())}startActivation(t){const i=y.lvlHandActTarg(this.code,t.id);i.hint?.push("DF"),T.ddf5(D.toActions([i,D.buttonTarget("CANC")]))}handleAction(t){this.logAct(!0);const i=g.jr5(t.param),r=k.toPlayer(i.owner);this.level===3?r.hand[t.position]=L.getCard(t.card).levelUpCard():I.levelAndDiscardA(t),i.endActivation()}}class Hs extends dt{jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}jr8(t){if(t.trigger.type==="FR"){const i=t.owner?I.deathsA.length:I.deathsB.length;if(i>0){const r=M.tick();for(let s=0;s<i;s++)g.birth(Z.zomc(this.level),"S",t.owner,void 0,r)}x.triggerDone()}else super.jr8(t)}}class Bs extends At{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Thunderstomp";const i=this.boof5812;this.text=`Deal ${i} damage to an enemy creature.~Then, if there is a friendly Dinosaur, deal another ${i} damage to an enemy creature.`}playTargets(){const t=super.playTargets(),i=y.crEnemyActTarg("CARD",this.code,"P1");return t.push(i),t}handleAction(t){const i=S.deTil(t.param),r=this.boof5812,s=g.ddf6(t);i[0]==="P1"?(this.logSpell(),s.hurtDirect(r,this.code),this.dino()?T.ddf5(D.toActions(y.crEnemyActTarg("CARD",this.code,"P2"))):T.spellCast()):(s.hurtDirect(r,this.code),T.spellCast())}dino(){const t=y.crFriendTarg();return t.tribe="DN",g.creatByTarget(t).length>0}}class Ns extends N{constructor(t){super(t),this.rarity="C",this.faction="U",this.name="Toorgmai Mender",this.tribe.push("PL"),this.iAttack=this.lValN([2,5,9]),this.iHealth=this.iAttack+3,this.text=`Forge: Give a creature or player ${p.jr9(0,this.iHealth)}.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");return s.interactive=!0,r}jr8(t){const i=y.crActTarg("CARD",this.code,"");i.hint=["BF"];const r=y.actionTarget("TP","CARD",this.code,"");r.hint=["BF"];const s=[i,r,D.buttonTarget("NOTR")],c=D.toActions(s);T.ddf5(c)}handleAction(t){if(t.zone==="P")k.heal(t.playerA,this.iHealth,this.code);else{const i=g.ddf6(t);this.logAct(!1,i),i.buff(0,this.iHealth)}T.actionDone(!0)}}class Fs extends N{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Tremorsaur",this.iAttack=0,this.iHealth=this.lValN([8,16,24]),this.tribe.push("DN"),this.text=`When you are dealt damage, ${this.name} gets +attack equal to ${this.level===3?"2x ":""}the damage dealt.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("DM");return s.bonus=this.buffNug(this.boof3610,0),r}ddf8(t){return!t.event.isCreatTarg&&t.event.target===t.owner}jr8(t){const i=this.level===3?2:1;g.jr5(t.creatId).buff(t.event.dmg*i,0),x.triggerDone()}}class Ps extends At{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Trial by Combat";const i=this.boof369;this.text=`Give a friendly creature ${p.jr9(i,0)} this turn. Then it and an enemy creature deal damage equal to their attacks to each other.`}playTargets(){const t=super.playTargets();return this.baddies().length>0&&t.push(y.crFriendActTarg("CARD",this.code,"P1")),t}handleAction(t){const i=S.deTil(t.param),r=g.ddf6(t);if(i[0]==="P1"){const s=T.cancelAction(),c=this.baddies(r.id);c.push(s),T.ddf5(c)}else{const s=g.jr5(i[1]),c=y.mod("AT",this.boof369);s.addMod(c);const f=M.tick();r.hurtDirect(s.attack,this.code,f),s.hurtDirect(r.attack,this.code,f),T.spellCast()}}baddies(t=""){return D.toActions(y.crEnemyActTarg("CARD",this.code,S.enTil("P2",t)))}}class xe extends N{lookup(t){return{["IKA"]:{c:()=>this.ikaC(),t:r=>this.ikaT(r)},["RSD"]:{c:()=>this.rsdC(),t:r=>this.rsdT(r)},["SSD"]:{c:()=>this.ssdC(),t:r=>this.ssdT(r)},["SOL"]:{c:()=>this.stagC(),t:r=>this.stagT(r)},["WTK"]:{c:()=>this.tinkC(),t:r=>this.tinkT(r)}}[t]}mPlayer=0;trigB;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("TE");return s.bonus=this.trigB,r}ddf8(t){return this.validPlayer(t)}jr8(t){this.lookup(this.cardCode()).t(t),x.triggerDone()}validPlayer(t){if(this.mPlayer===0)return!0;const i=t.event;return this.mPlayer===1?i.playerA===t.owner:i.playerA!==t.owner}ikaC(){this.faction="T",this.rarity="L",this.name="Ignir, Khan of Ashur",this.iAttack=this.lValN([4,8,14,24]),this.iHealth=this.iAttack,this.tribe.push("FB"),this.maxLevel=4;let t;this.level<3?(this.hints=["LG","ZZ-2"],t="an enemy creature or player at random."):this.level===3?t="an enemy creature at random and the enemy player.":t="each enemy creature and player.",this.mPlayer=1,this.trigB=this.buffNug(0,this.iAttack),this.text=`At the end of your turn, deal ${this.iAttack} damage to `+t}ikaT(t){const i=g.qEnemyCreats(),r=i.length>0;let s=this.level>2,c=-1;if(this.level===4&&r){const f=M.tick();i.forEach(m=>m.hurtDirect(this.iAttack,this.code,f))}if(this.level===3&&r&&(c=S.randInt(0,i.length)),this.level<3){const f=S.randInt(0,i.length+1);f===i.length?s=!0:c=f}c>-1&&i[c].hurtDirect(this.iAttack,this.code),s&&k.hurtDirect("E",this.iAttack,this.code)}rsdC(){this.faction="U",this.rarity="L",this.name="Rubyscale Dragon",this.iAttack=this.lValN([2,8,18]),this.iHealth=this.lValN([7,11,24]),this.tribe.push("DG"),this.level===1?(this.iDefend=!0,this.hints=["LG"]):(this.iMobile=1,this.level===3&&(this.hints=["ZZ-5"])),this.mPlayer=1;const t=this.lValN([1,2,5]);this.trigB=this.playerNug(t),this.text=`At the end of your turn, you and each other friendly creature gets ${p.jr9(0,t)}.`}rsdT(t){const i=this.lValN([1,2,5]);g.creatByTarget(y.crFriendNotMeTarg(t.creatId)).forEach(s=>s.buff(0,i)),k.heal(t.owner,i,this.code)}ssdC(){this.faction="T",this.rarity="L",this.name="Smolderscale Dragon",this.iAttack=this.lValN([0,3,15]),this.iHealth=this.lValN([6,13,30]),this.tribe.push("DG"),this.level===3?this.iMobile=2:(this.hints=["LG"],this.iDefend=!0),this.mPlayer=1;const t=this.boof135;this.trigB=this.buffNug(t*2,0),this.text=`At the end of your turn, deal ${t} damage to each enemy creature.`}ssdT(t){const i=g.qEnemyCreats();if(i.length>0){const r=M.tick(),s=this.boof135;i.forEach(c=>c.hurtDirect(s,this.code,r))}}stagC(){this.faction="U",this.rarity="C",this.name="Stag of Lys",this.iAttack=this.boof5916,this.iHealth=this.iAttack,this.tribe.push("ST"),this.mPlayer=1;const t=this.boof246;this.trigB=this.playerNug(t),this.text=`At the end of your turn, gain ${t} health.`}stagT(t){k.heal(t.owner,this.boof246,this.code)}tinkC(){this.faction="A",this.rarity="H",this.name="War Tinker",this.iAttack=this.level,this.iHealth=this.boof4812,this.tribe.push("GN"),this.mPlayer=-1,this.trigB=this.avgSpawnNug(),this.text=`At the end of the enemy player's turn, replace ${this.name} with a copy of a random Robot from your deck.`}tinkT(t){const i=y.target("DK");i.player=k.toTarget(t.owner),i.tribe="RB";const r=D.deckByTarget(i),s=r.length;if(s>0){const c=r[S.randInt(0,s)][0],f=g.jr5(t.creatId);g.birth(c,"R",f.owner,f.lane)}}}class Mt extends N{lookup(t){return{["DCS"]:{c:()=>this.delphC(),t:r=>this.delphT(r)},["GMP"]:{c:()=>this.gmpC(),t:r=>this.gmpT(r)},["LBL"]:{c:()=>this.lbcC(),t:r=>this.lbcT(r)},["MNM"]:{c:()=>this.mnmC(),t:r=>this.mnmT(r)},["NUG"]:{c:()=>this.nugC(),t:r=>this.nugT(r)},["SBF"]:{c:()=>this.sfangC(),t:r=>this.sfangT(r)},["SSE"]:{c:()=>this.sseC(),t:r=>this.sseT(r)},["SPD"]:{c:()=>this.spdC(),t:r=>this.spdT(r)},["SPM"]:{c:()=>this.spmC(),t:r=>this.spmT(r)},["TBA"]:{c:()=>this.tbaC(),t:r=>this.tbaT(r)},["USS"]:{c:()=>this.ussC(),t:r=>this.ussT(r)},["VCG"]:{c:()=>this.vgC(),t:r=>this.vgT(r)},["WBG"]:{c:()=>this.woeC(),t:r=>this.woeT(r)},["ZSH"]:{c:()=>this.zyxC(),t:r=>this.zyxT(r)}}[t]}bothTurns=!1;trigB;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("TS");s.bonus=this.trigB;const c=Dt.extractCardCode(this.code);return(c==="ZSH"||c==="SBF")&&(r.extraBattles=1),r}ddf8(t){return this.bothTurns||t.event.playerA===t.owner}jr8(t){this.lookup(this.cardCode()).t(t),x.triggerDone()}delphC(){this.faction="A",this.rarity="L",this.name="Delpha, Chronosculptor",this.iAttack=this.boof7914,this.iHealth=this.iAttack,this.tribe.push("HM"),this.level>1&&(this.hints=["OL"],this.trigB=this.buffNug(5,4),this.text=`At the start of your turn, level a ${this.level===2?"level 1 ":""}card in your hand at random.`)}delphT(t){if(this.level>1){const i=k.toPlayer(t.owner),r=i.hand.map((c,f)=>{const m=L.getCard(c);return{idx:f,lvl:m.level,nxt:m.canLevel()?m.levelUpCard():""}}).filter(c=>c.nxt&&(this.level===3||c.lvl===1)),s=r.length;if(s>0){const c=r[S.randInt(0,s)];i.hand[c.idx]=c.nxt}}}gmpC(){this.faction="A",this.rarity="L",this.name="Ghox, Metamind Paragon",this.iAttack=this.boof4814,this.iHealth=this.boof61218,this.tribe.push("MM"),this.hints=["OL"];const t=this.level===1?"":"s";this.trigB=this.rawNug(0,0,0,0,this.level*lt.dcWeight),this.text=`At the start of your turn, draw ${this.level} card${t}.`}gmpT(t){k.drawCard(t.owner,this.level)}lbcC(){this.faction="U",this.rarity="R",this.name="Lightbringer Cleric",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("TK"),this.hints=["OL"],this.trigB=this.playerNug(this.boof3610),this.text=`At the start of your turn, you gain ${this.boof137} to ${this.boof5914-1} health.`}lbcT(t){k.heal(t.owner,S.randInt(this.boof137,this.boof5914),this.code)}mnmC(){this.faction="N",this.rarity="L",this.name="Murderous Necromancer",this.iAttack=this.boof61017,this.iHealth=this.iAttack-1,this.tribe.push("HM"),this.trigB=this.avgSpawnNug();let t;this.level===3?(t=" If that creature is opposed, destroy the creature opposing it.",this.hints=["ZZ-5"]):(t="",this.hints=["ZZ-3"]),this.text=`At the start of your turn, Spawn a random ${p.levelGateText(this.level)}creature that was destroyed this game.${t}`}mnmT(t){const i=W.gravedigger("X",D.ddf2(this.level));if(i){const r=g.birth(i,"S",t.owner);if(r&&(this.logAct(!1,r),this.level===3)){const s=r.opposed;s&&W.destroy(s,this.code)}}}nugC(){this.faction="T",this.rarity="L",this.name="Nug, Fury Fists",this.iAttack=this.boof71015,this.iHealth=this.iAttack-1,this.tribe.push("YT"),this.hints=["ZZ-3"],this.trigB=this.rawNug(0,0,0,0,1.5),this.text="At the start of your turn, each other friendly creature deals battle damage equal to its attack to the creature opposing it."}nugT(t){const i=g.creatByTarget(y.crFriendNotMeTarg(t.creatId));if(i.length>0){const r=M.tick();i.forEach(s=>{if(s.attack>0){const c=s.opposed;c&&c.hurtDirect(s.attack,s.code,r)}})}}sfangC(){this.faction="T",this.rarity="H",this.name="Saberfang",this.iAttack=this.boof246,this.iHealth=1,this.iAggro=!0,this.tribe.push("CT"),this.trigB=this.buffNug(this.iAttack,0),this.text=`${this.name} battles an additional time on your turn.`}sfangT(t){const i=g.jr5(t.creatId);i.extraBattles+=1}sseC(){this.faction="U",this.rarity="L",this.name="Scatterspore Eidolon",this.iAttack=8,this.iHealth=this.iAttack,this.tribe.push("PL"),this.level<3&&(this.hints=["LB"]);const t=this.boof357,i=Z.minionName(this.level);this.trigB=this.statSpawnNug(t,t),this.text=`At the start of your turn, Spawn a ${t}/${t} ${i}.`}sseT(t){const i=this.lValS(["SXD","SXP","SXT"])+this.level.toString();g.birth(i,"S",t.owner)}spdC(){this.faction="U",this.rarity="R",this.name="Shardplate Delver",this.iAttack=this.boof4612,this.iHealth=this.iAttack,this.tribe.push("DN"),this.hints=["OL"];const t=this.boof246;this.trigB=this.buffNug(t,t),this.text=`At the start of your turn, ${this.name} gets ${p.jr9(t,t)}.`}spdT(t){const i=this.boof246;g.jr5(t.creatId).buff(i,i)}spmC(){this.faction="U",this.rarity="L",this.name="Shardplate Mutant",this.iAttack=this.boof91421,this.iHealth=this.iAttack,this.tribe.push("IN"),this.hints=["OP"],this.trigB=this.rawNug(0,0,0,0,this.lValN([-1.5,-2.1,-3])),this.text="At the start of your turn, randomly discard down to two cards in your hand."}spmT(t){const i=k.toPlayer(t.owner);if(i.hand.length>2){let r=i.hand.slice(),s=[];for(;r.length>2;)s.push(r.splice(S.randInt(0,r.length),1)[0]);i.discard.push(...s),i.hand=r}}tbaC(){this.faction="U",this.rarity="L",this.name="Talisin, Bard of Abundance",this.iAttack=this.lValN([8,12,16]),this.iHealth=this.lValN([10,14,20]),this.tribe.push("SY"),this.bothTurns=this.lValB([!0,!0,!1]),this.hints=["OL"],this.level===3?this.trigB=this.multNug(this.avgSpawnNug(),.5):this.hints.push("LG","ZZ-3"),this.text=`At the start of ${this.bothTurns?"each player's":"your"} turn, ${this.bothTurns?"that player":"you"} may play an additional card.`}tbaT(t){I.regularPlays+=1}ussC(){this.faction="T",this.rarity="H",this.name="Uranti Stormshaper",this.iAttack=0,this.iHealth=this.lValN([9,12,18]),this.iDefend=!0,this.tribe.push("YT");const t=L.getCard("LWY"+this.level);this.trigB=this.spawnNug(t);const i=this.level===3?" into each available lane":"";this.text=`At the start of your turn, Spawn a ${p.tokName(t)}${i}.`}ussT(t){const i="LWY"+this.level;if(this.level===3){const r=g.emptyLanes(t.owner);if(r.length>0){const s=M.tick();r.forEach(c=>g.birth(i,"P",t.owner,c,s))}}else g.birth(i,"S",t.owner)}vgC(){this.faction="T",this.rarity="C",this.name="Volcanic Giant",this.iAttack=this.boof51015,this.iHealth=this.iAttack,this.tribe.push("ER","GT"),this.hints=["OL"],this.trigB=this.playerNug(this.boof3610),this.text=`At the start of your turn, deals ${this.boof137} to ${this.boof5914-1} damage to the enemy player.`}vgT(t){const i=S.randInt(this.boof137,this.boof5914);k.hurtDirect(!t.owner,i,this.code)}woeC(){this.faction="N",this.rarity="L",this.name="Woebringer",this.iAttack=this.lValN([7,10,18]),this.iHealth=this.boof5815,this.tribe.push("AB"),this.text=`At the start of your turn, destroy the ${this.level===3?"enemy ":""}creature with the lowest attack. If there is a tie, one is chosen at random.`}woeT(t){const i=y.crTarg();this.level===3&&(i.player=k.toTarget(!t.owner));const r=g.creatByTarget(i);let s=99999,c=[];r.forEach(m=>{m.attack===s?c.push(m):m.attack<s&&(s=m.attack,c=[m])});const f=c.length;if(f>0){const m=c[S.randInt(0,f)];W.destroy(m,this.code)}}zyxC(){this.faction="T",this.rarity="L",this.name="Zyx, Storm Herald",this.iAttack=this.boof4712,this.iHealth=this.lValN([6,9,20]),this.iMobile=1,this.tribe.push("LT","AS"),this.text="Zyx battles an additional time on your turn.",this.trigB=this.buffNug(this.iAttack,0)}zyxT(t){const i=g.jr5(t.creatId);i.extraBattles+=1}}class Ms extends N{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Tuskin Sporelord",this.iAttack=this.lValN([2,6,10]),this.iHealth=this.lValN([10,14,18]),this.tribe.push("TK"),this.text=`Activate: Put a copy of friendly ${p.levelGateText(this.level)}Plant into an available lane.`,this.bonus={activ8:this.multNug(this.avgSpawnNug(),.5)}}canActivate(t){return this.emptySloots(t.id).length>0&&this.buddies(t.id).length>0}startActivation(t){const i=this.buddies(t.id);i.push(T.cancelAction()),T.ddf5(i)}handleAction(t){const i=S.deTil(t.param);if(i[0]==="P1"){const r=g.ddf6(t),s=this.emptySloots(i[1],r.code);s.push(T.cancelAction()),T.ddf5(s)}else{const r=g.jr5(i[1]),s=g.birth(i[2],"P",r.owner,t.lane);this.logAct(!0,s),r.endActivation()}}emptySloots(t,i=""){const r=y.emptyPlayerActTarg("F","CARD",this.code,S.enTil("P2",t,i));return D.toActions(r)}buddies(t){const i=y.crFriendActTarg("CARD",this.code,S.enTil("P1",t));return i.tribe="PL",i.level=D.ddf2(this.level),D.toActions(i)}}class ui extends At{constructor(t){super(t),this.faction="A",t==="PRI"+"1"?(this.rarity="R",this.name="Perilous Insight",this.maxLevel=1,this.overload=!0):(this.rarity="C",this.name="Metasight",this.maxLevel=2,this.free=this.level===2),this.text="Discard and level up two cards."}playTargets(){const t=super.playTargets();return t.push(this.targParty("P1")),t}handleAction(t){if(T.shiftPlayCard(t.position),t.param==="P1"){this.logSpell(),I.levelAndDiscardA(t);const i=this.targParty("P2"),r=D.toActions(i);r.length===0?T.spellCast():T.ddf5(r)}else I.levelAndDiscardA(t),T.spellCast()}targParty(t){const i=y.lvlHandActTarg(this.code,t);return i.deckPositionSkip=T.playPosition(),i}}class We extends At{lookup(t){return{["CFG"]:{c:()=>this.confC(),z:(r,s)=>this.confZ(r,s)},["CSG"]:{c:()=>this.cystgC(),z:(r,s)=>this.cystgZ(r,s)},["GRN"]:{c:()=>this.grenC(),z:(r,s)=>this.grenZ(r,s)},["TWG"]:{c:()=>this.twstrC(),z:(r,s)=>this.twstrZ(r,s)}}[t]}cardCast(t,i,r){this.lookup(t).z(i,r)}playTarg;xl=!0;constructor(t){super(t),this.playTarg=y.crActTarg("CARD",this.code,""),this.lookup(this.cardCode()).c()}playTargets(){const t=super.playTargets();return this.playTarg.param="P1",this.playTarg.notMe="",g.creatByTarget(this.playTarg).length>1&&t.push(this.playTarg),t}handleAction(t){const i=S.deTil(t.param),r=g.ddf6(t);if(i[0]==="P1"){this.playTarg.notMe=r.id,this.playTarg.param=S.enTil("P2",r.id);const s=D.toActions([this.playTarg,D.buttonTarget("CANC")]);T.ddf5(s)}else{const s=g.jr5(i[1]);this.xl?this.logSpell(s,r):this.logSpell(),this.cardCast(this.cardCode(),s,r),T.spellCast()}}confC(){this.faction="T",this.rarity="C",this.name="Conflagrate",this.xl=!1,this.text=`Deal ${this.boof369} to two enemy creatures.`,this.playTarg.player="E"}confZ(t,i){const r=M.tick(),s=this.boof369;t.hurtDirect(s,this.code,r),i.hurtDirect(s,this.code,r)}cystgC(){this.faction="A",this.rarity="C",this.name="Cypien Steelgraft",this.text=`Two friendly creatures get Armor ${this.boof246}.`,this.playTarg.player="F",this.playTarg.canArmor=!0}cystgZ(t,i){const r=this.boof246;t.addArmor(r),i.addArmor(r)}grenC(){this.faction="N",this.rarity="C",this.name="Ghastly Renewal",this.text=`Give two friendly creatures Regenerate ${this.boof246}.`,this.playTarg.player="F",this.playTarg.canRegen=!0}grenZ(t,i){const r=this.boof246;t.addRegen(r),i.addRegen(r)}get tsboof(){return this.level+2}twstrC(){this.faction="U",this.rarity="C",this.name="Twinstrength";const t=this.tsboof;this.text=`Two friendly creatures get ${p.jr9(t,t)}.`,this.playTarg.player="F"}twstrZ(t,i){const r=this.tsboof;t.buff(r,r),i.buff(r,r)}}class Rs extends N{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Umbruk Icecrusher",this.iAttack=this.boof61014,this.iHealth=this.boof246,this.tribe.push("DN"),this.text=`When ${this.name} ${p.dbdtap()}, deal that much damage to that player.~Allied Uterra: This gets ${p.jr9(2,2,!0)}, and Breakthrough.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("FR");const s=r.jr4("DM");return s.bonus=this.playerNug(this.boof357),r}ddf8(t){return t.event.battle&&!t.event.isCreatTarg&&t.event.isCreatSrc&&t.event.srcId===t.creatId}jr8(t){if(t.trigger.type==="FR"){if(I.allied("U")){const i=g.jr5(t.creatId);i.breakthrough=!0,i.buff(2,2)}}else t.trigger.type==="DM"&&k.hurtDirect(t.event.target,t.event.dmg,this.code);x.triggerDone()}}class Es extends N{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Umbruk Lasher",this.iAttack=this.boof71014,this.iHealth=this.iAttack-1,this.iBT=!0,this.tribe.push("DN"),this.text=`Allied Tempys: When ${this.name} ${p.dbdtap()} on your turn, you may deal that much damage to an enemy creature.`}jr3(t,i){const r=super.jr3(t,i);return r.jr4("FR"),r}handleAction(t){g.ddf6(t).hurtDirect(parseInt(t.param),this.code),T.actionDone(!0)}ddf8(t){const i=$.toDamage(t.event);return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcId===t.creatId&&i.srcCreat.owner===k.getActiveB()}jr8(t){if(t.trigger.type==="FR"){if(I.allied("T")){const i=g.jr5(t.creatId),r=i.jr4("DM");r.interactive=!0,r.bonus=this.buffNug(this.iAttack,0),i.changed=!0}x.triggerDone()}else if(t.trigger.type==="DM"){const i=t.event,r=D.toActions(y.crEnemyActTarg("CARD",this.code,i.dmg.toString()));r.length>0?(r.push(T.noneEndTrigger()),T.ddf5(r)):x.triggerDone()}}}class Ue extends N{lookup(t){return{["CBB"]:{c:()=>this.cindC(),f:r=>this.cindF(r)},["EBW"]:{c:()=>this.ebwC(),f:r=>this.ebwF(r)},["IBR"]:{c:()=>this.ibrfC(),f:r=>this.ibrfF(r)},["SBI"]:{c:()=>this.sbiC(),f:r=>this.sbiF(r)}}[t]}targAction(t,i){this.lookup(t).f(i)}enemy=!1;ftext="";constructor(t){super(t),this.lookup(this.cardCode()).c(),this.text=`Forge: If you are rank ${this.level+1} or higher, `+this.ftext,this.ftext=""}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");return s.interactive=!0,r}handleAction(t){const i=g.ddf6(t);this.targAction(this.cardCode(),i),T.actionDone(!0)}jr8(t){if(g.jr5(t.creatId).rank>this.level){const r=y.crActTarg("CARD",this.code,t.creatId);this.enemy?r.player="E":r.hint=["BF"];const s=D.toActions(r);s.length>0?T.ddf5(s):x.triggerDone()}else x.triggerDone()}ebwC(){this.faction="N",this.rarity="C",this.name="Ebonbound Warlord",this.iAttack=this.boof3714,this.iHealth=this.iAttack+4,this.tribe.push("VP"),this.enemy=!0;const t=this.boof369n;this.ftext=`give an enemy creature ${p.jr9(t,t)}.`}ebwF(t){this.logAct(!1,t);const i=this.boof369n;t.buff(i,i)}sbiC(){this.faction="U",this.rarity="C",this.name="Shardbound Invoker",this.iAttack=this.boof4714,this.iHealth=this.iAttack+1,this.tribe.push("TK");const t=this.boof359;this.ftext=`give a creature ${p.jr9(t,t)}.`}sbiF(t){this.logAct(!1,t);const i=this.boof359;t.buff(i,i)}cindC(){this.faction="T",this.rarity="C",this.name="Cinderbound Barbarian",this.iAttack=this.boof3612,this.iHealth=this.iAttack,this.tribe.push("FR","AS");const t=this.boof6912;this.enemy=!0,this.ftext=`deal ${t} damage to an enemy creature.`}cindF(t){t.hurtDirect(this.boof6912,this.code)}ibrfC(){this.faction="A",this.rarity="C",this.name="Ironbound Reinforcements",this.iAttack=this.lValN([3,6,8]),this.iHealth=this.iAttack*2,this.tribe.push("GN");const t=this.boof5812;this.ftext=`give a creature ${p.jr9(t,0)}.`}ibrfF(t){this.logAct(!1,t),t.buff(this.boof5812,0)}}class Is extends N{constructor(t){super(t),this.faction="T",this.rarity="C",this.name="Uranti Elementalist",this.iAttack=this.boof4712,this.iHealth=this.iAttack-1,this.tribe.push("YT"),this.text=`Forge: You may move another friendly creature to an available lane adjacent to ${this.name}.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");return s.interactive=!0,r}jr8(t){const i=g.jr5(t.creatId);if(this.emptySloots(i).length>0){const r=y.crFriendNotMeActTarg("CARD",i.id,this.code,S.enTil("P1",i.id)),s=D.toActions(r);s.length>0?(s.push(T.noneEndTrigger()),T.ddf5(s)):x.triggerDone()}else x.triggerDone()}handleAction(t){const i=S.deTil(t.param);if(i[0]==="P1"){const r=g.ddf6(t),s=g.jr5(i[1]),c=this.emptySloots(s,r.id);c.push(T.cancelAction()),T.ddf5(c)}else{const r=g.jr5(i[1]);this.logAct(!1,r),r.move(t.lane),T.actionDone(!0)}}emptySloots(t,i=""){return T.emptyAdjacents(t,S.enTil("P2",i))}}class Ls extends N{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Uranti Heartseeker",this.iAttack=this.boof4915,this.iHealth=this.iAttack,this.iDefend=!0,this.tribe.push("YT"),this.addSp("D",this.iAttack),this.text=`Activate: Deal ${this.iAttack} damage to an enemy creature or player with exactly ${this.iAttack} health.`,this.bonus={activ8:this.buffNug(this.iAttack/2,0)}}canActivate(t){return this.findVictims(t.id).length>0}startActivation(t){const i=this.findVictims(t.id);i.push(T.cancelAction()),T.ddf5(i)}handleAction(t){if(t.zone==="F"){const r=g.ddf6(t);this.logAct(!0,r),r.hurtDirect(this.iAttack,this.code)}else{this.logAct(!0);const r=t;k.hurtDirect(r.playerA,this.iAttack,this.code)}g.jr5(t.param).endActivation()}findVictims(t){const i=this.iAttack,r=y.crEnemyTarg(),c=g.creatByTarget(r).filter(m=>m.health===i).map(m=>y.fieldSelectAction("CARD",m.lane,m.owner)),f=k.toPlayer("E");return f.health===i&&c.push(y.playerSelectAction("CARD",f.isPlayerA)),c.forEach(m=>{m.host=this.code,m.param=t}),c}}class Gs extends N{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Vaerus, Herald of Fury",this.iAttack=15,this.iHealth=12,this.iMobile=2,this.tribe.push("DG"),this.hints=["OL"],this.text="Each friendly creature battles an additional time on each of your turns."}jr3(t,i){const r=super.jr3(t,i);r.jr4("EF");const s=r.jr4("TS");return s.bonus=this.buffNug(20,0),r}ddf8(t){if(t.event.code==="ENT"){const i=$.toCreature(t.event);return t.owner===i.creature.owner&&t.owner===k.getActiveB()}else if(t.event.code==="TRS")return t.event.playerA===t.owner;return!1}giveXtra(t,i){t.hasMod(i)||(t.extraBattles+=1,t.addMod(y.mod("TK",!0,i)))}jr8(t){if(t.event.code==="ENT"){const i=$.toCreature(t.event);i.creature.id===t.creatId?g.ddf1().forEach(r=>{this.giveXtra(r,t.creatId)}):dt.itBirthedFirst(i.creature.id,t.creatId)&&this.giveXtra(i.creature,t.creatId)}else t.event.code==="TRS"&&g.ddf1().forEach(i=>{i.extraBattles+=1,i.hasMod(t.creatId)||i.addMod(y.mod("TK",!0,t.creatId))});x.triggerDone()}}class V extends N{constructor(t){super(t),this.cardConstruct(this.cardCode())}cardConstruct(t){({["AEN"]:()=>this.anvenf(),["AGU"]:()=>this.avguard(),["BTH"]:()=>this.batthid(),["BBB"]:()=>this.bart(),["BLW"]:()=>this.blitwi(),["BWG"]:()=>this.brambleguard(),["CHY"]:()=>this.cavernhyd(),["CSL"]:()=>this.cslime(),["CDC"]:()=>this.cindcol(),["CNM"]:()=>this.cindmy(),["CTG"]:()=>this.citg(),["CWK"]:()=>this.crag(),["DBP"]:()=>this.prowler(),["DMR"]:()=>this.raptor(),["DBR"]:()=>this.bearride(),["DTD"]:()=>this.dmaw(),["DSZ"]:()=>this.duskzomb(),["FWB"]:()=>this.fangbear(),["FWR"]:()=>this.ravager(),["FFG"]:()=>this.ffang(),["FMS"]:()=>this.firemane(),["FPR"]:()=>this.flop(),["FGA"]:()=>this.falpha(),["FGB"]:()=>this.fbeta(),["FGO"]:()=>this.fomega(),["FPM"]:()=>this.minot(),["FPS"]:()=>this.forgeplate(),["GGE"]:()=>this.geist(),["GGH"]:()=>this.ghast(),["GGS"]:()=>this.ggs(),["GCL"]:()=>this.glacial(),["IWC"]:()=>this.warcharger(),["LTM"]:()=>this.ltam(),["LWY"]:()=>this.lwyrm(),["LHY"]:()=>this.lyshyd(),["KDC"]:()=>this.kadc(),["MRF"]:()=>this.marrow(),["MMI"]:()=>this.mmin(),["MMO"]:()=>this.mmop(),["NGW"]:()=>this.narg(),["NCW"]:()=>this.necrotic(),["NXC"]:()=>this.nexcore(),["NAM"]:()=>this.nyam(),["OBD"]:()=>this.battledroid(),["OSP"]:()=>this.oss(),["OSL"]:()=>this.ogsl(),["PRG"]:()=>this.perd(),["RHY"]:()=>this.ravh(),["RHC"]:()=>this.rime(),["RSP"]:()=>this.runprim(),["SCS"]:()=>this.scorp(),["SCD"]:()=>this.scout(),["SFT"]:()=>this.scrap(),["SBA"]:()=>this.sparkblade(),["SKB"]:()=>this.sparkbot(),["SBR"]:()=>this.sparkass(),["STM"]:()=>this.sparkman(),["SSN"]:()=>this.sfsent(),["SMN"]:()=>this.steam(),["SGI"]:()=>this.stonefist(),["SCL"]:()=>this.stormcall(),["SMA"]:()=>this.ancient(),["SML"]:()=>this.lurker(),["TGS"]:()=>this.tsprout(),["TGN"]:()=>this.tgnome(),["TNM"]:()=>this.tiggy(),["TWS"]:()=>this.tscout(),["TWT"]:()=>this.tund(),["URD"]:()=>this.unrelenting(),["VBK"]:()=>this.vblock(),["VTC"]:()=>this.vtech(),["WHC"]:()=>this.wardog(),["WTW"]:()=>this.waterwalk(),["WPD"]:()=>this.windprime(),["XCR"]:()=>this.xithcrush(),["XHU"]:()=>this.hulk(),["YWC"]:()=>this.yetiwar(),["ZIN"]:()=>this.zombinf()})[t]()}sist(){this.rarity="R",this.level===1?this.hints=["LG"]:this.consistent=!0}shite(){this.level<3&&(this.hints=["LB"])}ancient(){this.faction="U",this.rarity="C",this.name="Swampmoss Ancient",this.iAttack=this.lValN([7,12]),this.iHealth=this.iAttack,this.tribe.push("DN"),this.hints=[this.level===1?"ZZ-1":"ZZ-2"],this.maxLevel=2}anvenf(){this.faction="A",this.rarity="C",this.name="Anvillon Enforcer",this.iAttack=this.boof5711,this.iHealth=this.iAttack-1,this.iArmor=this.boof246,this.tribe.push("RB")}avguard(){this.faction="T",this.rarity="R",this.name="Avalanche Guardian",this.iAttack=this.boof5915,this.iHealth=this.lValN([8,15,23]),this.iMobile=1,this.iDefend=!0,this.tribe.push("IC","EL")}bart(){this.faction="U",this.rarity="H",this.name="Big Bad Bartok",this.iAttack=this.level+8,this.iHealth=this.iAttack,this.consistent=!0,this.shite(),this.tribe.push("TG")}batthid(){this.faction="U",this.name="Batterhide",this.iAttack=this.boof3814,this.iHealth=this.iAttack+3,this.sist(),this.iBT=!0,this.tribe.push("DN")}battledroid(){this.faction="A",this.rarity="H",this.name="Oreian Battledroid",this.iAttack=this.lValN([5,7,17]),this.iHealth=1,this.iArmor=this.iAttack,this.tribe.push("RB")}bearride(){this.faction="U",this.rarity="C",this.name="Deepwood Bear Rider",this.iAttack=this.lValN([5,16,18]),this.iHealth=this.lValN([2,8,10]),this.tribe.push("LP"),this.level===2&&(this.hints=["LB"])}blitwi(){this.faction="N",this.name="Blight Witch",this.iAttack=this.lValN([2,5,9]),this.iHealth=this.boof71117,this.sist(),this.iRegen=this.boof234,this.tribe.push("ZB")}brambleguard(){this.faction="U",this.rarity="C",this.name="Bramblewood Guardian",this.iAttack=this.boof2612,this.iHealth=this.lValN([9,14,24]),this.tribe.push("PL")}cavernhyd(){this.faction="U",this.rarity="C",this.name="Cavern Hydra",this.iAttack=this.boof4711,this.iHealth=this.boof71015,this.iRegen=this.boof135,this.tribe.push("HY")}cslime(){this.faction="N",this.rarity="C",this.name="Cavern Slime",this.iAttack=this.boof61218,this.iHealth=this.boof246,this.iRegen=this.iAttack,this.tribe.push("OZ"),this.hints=[this.lValH(["ZZ-2","ZZ-3","ZZ-5"])]}cindcol(){this.faction="T",this.rarity="C",this.name="Cinder Colossus",this.iAttack=this.lValN([3,13,24]),this.iHealth=this.lValN([4,14,27]),this.iDefend=!0,this.level===1&&(this.hints=["LG"]),this.tribe.push("ER","EL")}cindmy(){this.faction="T",this.rarity="C",this.name="Cinder Mystic",this.iAttack=this.lValN([4,11,21]),this.iHealth=this.boof3714,this.tribe.push("FR","AS")}citg(){this.faction="A",this.rarity="C",this.name="Citadel Guard",this.iAttack=this.lValN([8,12,25]),this.iHealth=this.lValN([9,13,30]),this.iDefend=!0,this.hints=[this.level===3?"ZZ-5":"ZZ-1"],this.tribe.push("RB")}crag(){this.faction="T",this.rarity="C",this.name="Crag Walker",this.iAttack=this.lValN([7,12,18]),this.iHealth=this.boof246,this.iMobile=1,this.tribe.push("DN")}dmaw(){this.faction="N",this.rarity="L",this.name="Duskmaw, Twilight Drake",this.iAttack=this.boof61017,this.iHealth=this.boof5915,this.iMobile=1,this.tribe.push("ST","DG")}duskzomb(){this.faction="N",this.rarity="C",this.name="Duskspire Zombie",this.iAttack=this.lValN([2,5,16]),this.iHealth=this.lValN([5,8,19]),this.iRegen=4,this.tribe.push("ZB")}falpha(){this.faction="A",this.rarity="C",this.name="Forge Guardian Alpha",this.iAttack=this.lValN([4,8,20]),this.iHealth=this.lValN([8,14,26]),this.iDefend=!0,this.tribe.push("RB","GD")}fangbear(){this.faction="U",this.rarity="C",this.name="Fangwood Bear",this.iAttack=this.boof61016,this.iHealth=this.iAttack,this.tribe.push("BR")}fbeta(){this.faction="A",this.rarity="R",this.name="Forge Guardian Beta",this.iAttack=this.lValN([5,8,20]),this.iHealth=this.lValN([3,6,18]),this.iArmor=this.boof124,this.tribe.push("RB","GD"),this.level===3&&(this.hints=["ZZ-3"])}ffang(){this.faction="U",this.rarity="C",this.name="Featherfang",this.iAttack=this.boof61218,this.iHealth=this.boof4812,this.tribe.push("DN")}firemane(){this.faction="T",this.rarity="C",this.name="Firemane Steed",this.iAttack=this.lValN([3,6,16]),this.iHealth=this.lValN([6,9,19]),this.iMobile=2,this.tribe.push("FR","EL")}flop(){this.faction="T",this.rarity="C",this.name="Flowstone Primordial",this.iAttack=this.lValN([6,7,15]),this.iHealth=this.iAttack+1,this.tribe.push("FR","EL")}fomega(){this.faction="A",this.rarity="L",this.name="Forge Guardian Omega",this.iAttack=this.boof255080,this.iHealth=this.iAttack,this.iMobile=this.boof124,this.iArmor=this.iMobile*10,this.iBT=!0,this.iAggro=!0,this.consistent=!0,this.tribe.push("RB","GD")}forgeplate(){this.faction="A",this.rarity="C",this.name="Forgeplate Sentry",this.iAttack=this.boof4915,this.iHealth=this.iAttack,this.iArmor=this.boof135,this.tribe.push("RB")}ggs(){this.faction="N",this.rarity="C",this.name="Grimgaunt Spectre",this.iAttack=this.lValN([3,11,14]),this.iHealth=this.iAttack,this.iMobile=1,this.level===1?this.hints=["LG"]:this.level===2&&(this.hints=["LB"]),this.tribe.push("GG")}geist(){this.faction="N",this.rarity="C",this.name="Grave Geist",this.iAttack=this.boof71118,this.iHealth=this.boof4711,this.tribe.push("ST")}ghast(){this.faction="N",this.rarity="C",this.name="Grave Ghast",this.iHealth=this.boof71013,this.iAttack=this.iHealth-2,this.iRegen=this.boof246,this.tribe.push("ZB")}glacial(){this.faction="T",this.rarity="C",this.name="Glacial Colossus",this.iAttack=this.boof61016,this.iHealth=this.lValN([8,13,19]),this.tribe.push("IC","EL"),this.iDefend=!0}hulk(){this.faction="N",this.rarity="C",this.name="Xithian Hulk",this.iAttack=this.boof4814,this.iHealth=this.iAttack+3,this.tribe.push("AB")}kadc(){this.faction="T",this.rarity="C",this.name="Kadras Colossus",this.iAttack=this.lValN([6,11,13]),this.iHealth=this.iAttack,this.tribe.push("GT"),this.shite(),this.level===1&&this.hints.push("ZZ+1")}ltam(){this.faction="T",this.rarity="C",this.name="Lightning Tamer",this.iAttack=this.lValN([6,8,10]),this.iHealth=1,this.tribe.push("LT","AS"),this.iAggro=!0}lurker(){this.faction="U",this.rarity="C",this.name="Swampmoss Lurker",this.iAttack=this.lValN([8,13,22]),this.iHealth=this.lValN([4,6,15]),this.tribe.push("DN"),this.level===3?this.hints=["ZZ-5"]:this.hints=["ZZ-1"]}lwyrm(){this.faction="T",this.rarity="C",this.name="Lightning Wyrm",this.iAttack=this.boof4711,this.iHealth=this.boof258,this.tribe.push("LT","EL"),this.iAggro=!0}lyshyd(){this.faction="U",this.rarity="C",this.name="Lysian Hydra",this.iAttack=this.boof5914,this.iHealth=this.iAttack+1,this.iRegen=this.level,this.tribe.push("HY")}marrow(){this.faction="N",this.rarity="C",this.name="Marrow Fiend",this.iAttack=this.boof81117,this.iHealth=this.lValN([1,5,13]),this.tribe.push("SK")}minot(){this.faction="A",this.name="Forgeplate Minotaur",this.iAttack=this.lValN([2,8,16]),this.iHealth=this.lValN([4,9,17]),this.sist(),this.iArmor=this.level,this.tribe.push("RB")}mmin(){this.faction="A",this.rarity="C",this.name="Metamind Infiltrator",this.iAttack=this.boof5917,this.iHealth=this.iAttack-1,this.tribe.push("MM")}mmop(){this.faction="A",this.rarity="C",this.name="Metamind Operator",this.iAttack=this.boof4610,this.iHealth=this.lValN([10,14,18]),this.tribe.push("MM")}narg(){this.faction="T",this.rarity="C",this.name="Nargath Warrior",this.iAttack=this.boof51014,this.iHealth=this.iAttack+1,this.tribe.push("ER","AS")}necrotic(){this.faction="N",this.rarity="C",this.name="Necrotic Wurm",this.iAttack=this.lValN([4,7,18]),this.iHealth=this.lValN([5,8,19]),this.tribe.push("WR")}nexcore(){this.faction="A",this.rarity="C",this.name="Nexus Core",this.iAttack=0,this.iHealth=this.lValN([15,25,40]),this.tribe.push("RB"),this.iDefend=!0}nyam(){this.faction="N",this.rarity="C",this.name="Nyrali Ambusher",this.iAttack=this.boof71117,this.iHealth=this.lValN([3,6,13]),this.tribe.push("OZ")}ogsl(){this.faction="U",this.rarity="C",this.name="Overgrown Spineleaf",this.iAttack=this.lValN([6,12,16]),this.iHealth=this.boof4812,this.tribe.push("PL")}oss(){this.faction="N",this.rarity="R",this.name="Ossuary Spirit",this.iAttack=this.lValN([1,3,6]),this.iHealth=this.boof91420,this.iRegen=this.iAttack+2,this.tribe.push("ST")}perd(){this.faction="N",this.rarity="C",this.name="Perdition Guard",this.iAttack=this.lValN([3,12,15]),this.iHealth=this.iAttack-1,this.tribe.push("NG"),this.level===1?this.hints=["LG","ZZ-1"]:this.level===2&&(this.hints=["LB"])}prowler(){this.faction="U",this.rarity="C",this.name="Deepbranch Prowler",this.iAttack=this.lValN([8,9,10]),this.iHealth=this.iAttack,this.tribe.push("CT"),this.shite(),this.iBT=!0}raptor(){this.faction="U",this.rarity="C",this.name="Deepmoss Raptor",this.iAttack=this.lValN([2,13,16]),this.iHealth=this.iAttack,this.level===1?this.hints=["LG","RT"]:this.level===2&&(this.hints=["LB"]),this.tribe.push("DN")}ravager(){this.faction="U",this.rarity="C",this.name="Fangwood Ravager",this.iAttack=this.boof5917,this.iHealth=this.iAttack,this.tribe.push("BE")}ravh(){this.faction="U",this.rarity="C",this.name="Ravenous Hydra",this.iAttack=this.boof5813,this.iHealth=this.iAttack+this.level,this.iRegen=this.level,this.iBT=!0,this.tribe.push("HY")}rime(){this.faction="T",this.rarity="C",this.name="Rimehorn Charger",this.iAttack=this.lValN([5,8,10]),this.iHealth=this.iAttack+3,this.iMobile=1,this.shite(),this.tribe.push("RM")}runprim(){this.faction="T",this.name="Runestorm Primordial",this.iAttack=this.boof3714,this.iHealth=this.iAttack-1,this.sist(),this.iAggro=!0,this.tribe.push("LT","EL")}scorp(){this.faction="N",this.rarity="C",this.name="Scavenger Scorpion",this.iAttack=this.lValN([6,9,11]),this.iHealth=this.iAttack,this.iRegen=this.level,this.shite(),this.tribe.push("AB")}scout(){this.faction="A",this.rarity="H",this.name="Scout Drone",this.iAttack=this.boof246,this.iHealth=this.iAttack,this.free=this.level>1,this.level<3&&(this.hints=[this.level===1?"LG":"LB"]),this.tribe.push("RB")}scrap(){this.faction="A",this.rarity="H",this.name="Scrapforge Titan",this.iAttack=this.lValN([1,5,20]),this.iHealth=this.iAttack,this.iArmor=this.lValN([1,5,10]),this.level===1&&(this.hints=["LG","LM","RT"]),this.tribe.push("RB")}sfsent(){this.faction="A",this.rarity="C",this.name="Spiritforge Sentinel",this.iAttack=this.lValN([3,6,9]),this.iHealth=this.iAttack*2,this.iArmor=this.lValN([1,2,6]),this.tribe.push("RB")}sparkbot(){this.faction="A",this.rarity="C",this.name="Spark Bot",this.iAttack=this.boof5914,this.iHealth=this.lValN([6,11,16]),this.tribe.push("RB")}sparkblade(){this.faction="A",this.rarity="C",this.name="Sparkblade Assassin",this.iAttack=this.lValN([4,12,14]),this.iHealth=this.lValN([5,13,15]),this.tribe.push("HM")}sparkass(){this.faction="T",this.rarity="C",this.name="Sparkbrand Asir",this.iAttack=this.lValN([2,7,9]),this.iHealth=this.lValN([6,11,13]),this.iAggro=!0,this.tribe.push("LT","AS")}sparkman(){this.faction="T",this.rarity="R",this.name="Sparktail Manticore",this.iAttack=this.boof369,this.iHealth=this.boof71116,this.iAggro=!0,this.iMobile=1,this.tribe.push("MT")}steam(){this.faction="T",this.rarity="C",this.name="Steam Sentinel",this.iAttack=this.lValN([8,14,20]),this.iHealth=this.boof61016,this.iDefend=!0,this.tribe.push("WT","EL")}stonefist(){this.faction="T",this.rarity="C",this.name="Stonefist Giant",this.iAttack=this.lValN([3,7,16]),this.iHealth=this.lValN([6,10,24]),this.tribe.push("ER","EL")}stormcall(){this.faction="T",this.rarity="C",this.name="Storm Caller",this.iAttack=this.lValN([8,11,14]),this.iHealth=this.iAttack-2,this.tribe.push("WN","AS")}tgnome(){this.faction="A",this.rarity="C",this.name="Technognome",this.iAttack=this.lValN([3,9,19]),this.iHealth=this.iAttack,this.level===1&&(this.hints=["LG"]),this.tribe.push("GN")}tiggy(){this.faction="U",this.rarity="C",this.name="Tigrin Nomad",this.iAttack=this.lValN([8,10,12]),this.iHealth=this.boof246,this.iBT=!0,this.shite(),this.tribe.push("TG")}tscout(){this.faction="A",this.rarity="C",this.name="Tower Scout",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.iMobile=1,this.tribe.push("HM")}tund(){this.faction="A",this.rarity="C",this.name="Tundra Watcher",this.iAttack=this.lValN([5,10,12]),this.iHealth=this.lValN([8,11,13]),this.shite(),this.tribe.push("RB")}tsprout(){this.faction="U",this.rarity="C",this.name="Tanglesprout",this.iAttack=this.boof7911,this.iHealth=this.iAttack+1,this.shite(),this.tribe.push("PL")}unrelenting(){this.faction="N",this.rarity="H",this.name="Unrelenting Dead",this.iAttack=this.boof4814,this.iHealth=this.iAttack,this.iRegen=this.iAttack,this.tribe.push("ZB")}vblock(){this.faction="A",this.rarity="R",this.name="Vault Blockade",this.iAttack=0,this.iHealth=this.boof135,this.iArmor=this.boof101520,this.iDefend=!0,this.tribe.push("RB")}vtech(){this.faction="A",this.rarity="C",this.name="Vault Technician",this.iAttack=this.boof61218,this.iHealth=this.boof3915,this.tribe.push("HM")}warcharger(){this.faction="A",this.rarity="C",this.name="Ionic Warcharger",this.iAttack=this.boof4915,this.iHealth=this.lValN([7,12,18]),this.iMobile=1,this.tribe.push("RB")}wardog(){this.faction="T",this.rarity="T",this.name="Warhound Courser",this.iAttack=this.level,this.iHealth=this.level,this.iAggro=!0,this.tribe.push("FR","EL"),this.free=!0}waterwalk(){this.faction="T",this.rarity="C",this.name="Water Walker",this.iAttack=this.lValN([5,12,14]),this.iHealth=this.lValN([2,9,11]),this.tribe.push("WT","AS")}windprime(){this.faction="T",this.rarity="C",this.name="Wind Primordial",this.iHealth=this.boof4814,this.iAttack=this.iHealth+2,this.iMobile=this.level,this.tribe.push("WN","EL")}xithcrush(){this.faction="N",this.rarity="C",this.name="Xithian Crusher",this.iAttack=this.lValN([4,10,16]),this.iHealth=this.iAttack+2,this.tribe.push("AB")}yetiwar(){this.faction="T",this.rarity="C",this.name="Yeti Warcaller",this.iAttack=this.boof248,this.iHealth=this.lValN([10,15,23]),this.tribe.push("YT")}zombinf(){this.faction="N",this.rarity="C",this.name="Zombie Infantry",this.iAttack=this.boof61015,this.iHealth=this.iAttack-1,this.tribe.push("ZB")}}class $s extends At{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Varna's Pact";const i=this.lValS(["a","two","three"]),r=this.level===1?"":"s",s=this.level===1?"was":"were";this.text=`Put ${i} random creature${r} that ${s} destroyed this game into ${i} lane${r}.`}playTargets(){const t=super.playTargets();return t.push(this.fieldTarget("P1",[])),t}handleAction(t){const i=S.deTil(t.param);if(i[0]==="P1")if(this.level===1)this.endSpell([t.lane],t.playerA);else{const r=this.fieldTarget("P2",[t.lane]);T.ddf5(D.toActions(r))}else if(i[0]==="P2"){const r=[t.lane,parseInt(i[1])];if(this.level===2)this.endSpell(r,t.playerA);else{const s=this.fieldTarget("P3",r);T.ddf5(D.toActions(s))}}else this.endSpell([t.lane,parseInt(i[1]),parseInt(i[2])],t.playerA)}endSpell(t,i){this.logSpell();const r=M.tick();t.forEach(s=>{const c=W.gravedigger();c&&g.birth(c,"R",i,s,r)}),T.spellCast()}fieldTarget(t,i){const r=y.actionTarget("TF","CARD",this.code,S.enTil(t,...i));return r.player="F",r.hint=["FL"],r.lanes=g.laneIdx.filter(s=>!i.includes(s)),r}}class Ws extends N{constructor(t){super(t),this.faction="U",this.rarity="R",this.name="Vigorwisp",this.iAttack=this.boof5915,this.iHealth=this.iAttack,this.tribe.push("ST"),this.text=`When ${this.name} gains health, heal that much damage from each other friendly creature.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("HG");return s.bonus=this.buffNug(0,this.boof369),r}ddf8(t){return t.event.creatId===t.creatId}jr8(t){const i=y.crNotMeTarg(t.creatId);i.player=k.toTarget(t.owner),g.creatByTarget(i).forEach(r=>r.heal(t.event.healAmt)),x.triggerDone()}}class Us extends N{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Voltaic Prophet",this.iAttack=this.boof61016,this.iHealth=this.iAttack,this.tribe.push("HM");const i="evel up each card in your hand",r=this.lValS(["You may discard and level up a card","Discard and l"+i,"L"+i]);this.text="Formation: "+r+"."}get formation(){return!0}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FM");return s.interactive=this.level===1,r}handleAction(t){I.levelAndDiscardA(t),T.actionDone(!0)}jr8(t){if(t.owner!==k.getActiveB()){x.triggerDone();return}if(this.level===1){const i=y.lvlHandActTarg(this.code,t.creatId),r=D.toActions([i,D.buttonTarget("NOTR")]);r.length>1?T.ddf5(r):x.triggerDone()}else{const i=k.getActive();this.logAct(!1);const r=i.hand.map(s=>L.getCard(s).levelUpCard());this.level===2?(i.discard.push(...r),i.hand=[]):i.hand=r,x.triggerDone()}}}class Vs extends N{constructor(t){super(t),this.faction="T",this.rarity="R",this.name="Warhound Raider",this.iAttack=this.boof5915,this.iHealth=this.iAttack+1,this.tribe.push("FR","AS"),this.text=`If there is a friendly Warhound Courser in play, ${this.name} has Aggressive.`}jr3(t,i){const r=super.jr3(t,i),s=r.addEffect("PS",this.code);return s.area="C",r}enforceEffect(t){const i=y.crNotMeTarg(t.id);i.player=k.toTarget(t.owner),i.cardCode="WHC",g.creatByTarget(i).length===0?t.removeModSafe(t.id):t.addModSafe(y.mod("AG",!0,t.id))}}class Os extends Ce{jr3(t,i){const r=super.jr3(t,i),s=r.jr4("LG",this.code),c=this.boof124*5;return s.bonus=this.buffNug(c,c),r}ddf8(t){return t.owner===t.event.playerA}jr8(t){const i=this.boof124*t.event.healAmt;g.jr5(t.creatId).buff(i,i),x.triggerDone()}}class zs extends N{constructor(t){super(t),this.faction="U",this.rarity="R",this.name="Wildwood Sower",this.iAttack=this.boof3612,this.iHealth=this.lValN([6,11,18]),this.tribe.push("HM");const i=L.getCard(Z.minionCode(this.level));this.text=`When you play a spell, you may put a ${p.tokName(i)} into an available lane.`,this.spB=this.spawnNug(i)}spB;jr3(t,i){const r=super.jr3(t,i),s=r.jr4("PC");return s.interactive=!0,s.bonus=this.spB,r}handleAction(t){g.birth(Z.minionCode(this.level),"P",t.playerA,t.lane),T.actionDone(!0)}ddf8(t){return t.event.playerA===t.owner&&L.getCard(t.event.cardCode).type==="S"}jr8(t){const i=y.emptyPlayerActTarg("F","CARD",this.code,""),r=D.toActions(i);r.length===0?x.triggerDone():(r.push(T.noneEndTrigger()),T.ddf5(r))}}class Zs extends N{constructor(t){super(t),this.faction="T",this.rarity="C",this.name="Windcaller Shaman",this.iAttack=this.boof3713,this.iHealth=this.iAttack+4,this.tribe.push("WN","AS"),this.text=`Forge: You may move another friendly ${p.levelGateText(this.level)}creature to an available lane adjacent to ${this.name}.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("FR");return s.interactive=!0,r}jr8(t){const i=g.jr5(t.creatId);if(this.emptySloots(i).length>0){const r=y.crFriendNotMeActTarg("CARD",i.id,this.code,S.enTil("P1",i.id));r.level=D.ddf2(this.level);const s=D.toActions(r);s.length>0?(s.push(T.noneEndTrigger()),T.ddf5(s)):x.triggerDone()}else x.triggerDone()}handleAction(t){const i=S.deTil(t.param);if(i[0]==="P1"){const r=g.ddf6(t),s=g.jr5(i[1]),c=this.emptySloots(s,r.id);c.push(T.cancelAction()),T.ddf5(c)}else{const r=g.jr5(i[1]);this.logAct(!1,r),r.move(t.lane),T.actionDone(!0)}}emptySloots(t,i=""){return T.emptyAdjacents(t,S.enTil("P2",i))}}class Ys extends N{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Windspark Elemental",this.iAttack=this.boof258,this.iHealth=this.lValN([7,14,21]),this.tribe.push("LT","EL"),this.text=`When an enemy creature is delt non-battle damage, deal ${this.boof246} damage to the enemy player.`}jr3(t,i){const r=super.jr3(t,i),s=r.jr4("DM");return s.bonus=this.playerNug(this.boof246),r}ddf8(t){const i=$.toDamage(t.event);return!i.battle&&i.isCreatTarg&&i.hurtCreat.owner!==t.owner}jr8(t){k.hurtDirect(!t.owner,this.boof246,this.code),x.triggerDone()}}class Ks extends N{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Xithian Rotfiend",this.iAttack=this.lValN([7,12,20]),this.iHealth=this.iAttack+1,this.tribe.push("AB");const i=-this.boof135;this.text=`When ${this.name} becomes opposed, it gets ${p.jr9(i,i)}.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("EF");const s=r.jr4("MV"),c=-this.boof135;return s.bonus=this.buffNug(c,c),r}ddf8(t){const i=$.toCreature(t.event);return t.trigger.creatId===i.creature.id&&t.trigger.type==="MV"||i.creature.owner!==t.owner}jr8(t){let i=!1;const r=g.jr5(t.creatId),s=$.toCreature(t.event);if((r.id===s.creature.id&&r.opposed||s.creature.lane===g.oppositeLane(r.lane))&&(i=!0),i){const c=-this.boof135;r.buff(c,c)}x.triggerDone()}}class qs extends N{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Zarox, the Raging",this.iAttack=this.lValN([2,4,10]),this.iHealth=this.lValN([8,12,18]),this.tribe.push("FR","EL"),this.text=`When Zaxox ${p.dbdtap()} on your turn, you may deal that much damage to an enemy creature.~Allied Nekrium: When a creature is destroyed, Zarox gets ${p.jr9(this.boof124,0)}.`}jr3(t,i){const r=super.jr3(t,i);r.jr4("FR");const s=r.jr4("DM");return s.interactive=!0,s.bonus=this.buffNug(this.lValN([3,6,14]),0),r}handleAction(t){g.ddf6(t).hurtDirect(parseInt(t.param),this.code),T.actionDone(!0)}ddf8(t){if(t.trigger.type==="DM"){const i=$.toDamage(t.event);return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcId===t.creatId&&i.srcCreat.owner===k.getActiveB()}else return!0}jr8(t){if(t.trigger.type==="FR"){if(I.allied("N")){const i=g.jr5(t.creatId),r=i.jr4("DS");r.bonus=this.buffNug(this.boof124,0),i.changed=!0}x.triggerDone()}else if(t.trigger.type==="DM"){const i=t.event,r=D.toActions(y.crEnemyActTarg("CARD",this.code,i.dmg.toString()));r.length>0?(r.push(T.noneEndTrigger()),T.ddf5(r)):x.triggerDone()}else if(t.trigger.type==="DS"){const i=g.jr5(t.creatId);this.logAct(!1),i.buff(this.boof124,0),x.triggerDone()}}}class Xs extends N{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Zombie Titan",this.iAttack=this.boof4712,this.iHealth=this.iAttack,this.tribe.push("ZB");const i=this.boof234;this.text=`While ${this.name} is in a side lane, it gets ${p.jr9(i,i,!0)} and Regenerate ${this.level}.`}jr3(t,i){const r=super.jr3(t,i),s=r.addEffect("PS",this.code);return s.area="C",r}enforceEffect(t){if(t.lane===1||t.lane===5){const i=this.boof234;[y.mod("AT",i,t.id),y.mod("HL",i,t.id),y.mod("MH",i,t.id),y.mod("RG",this.level,t.id)].forEach(s=>{t.addModSafe(s)})}else t.removeModSafe(t.id)}}class js{cardCache=new Map;mapper={["AAK"]:$i,["ABB"]:Wi,["ABM"]:ft,["AGC"]:ft,["AGK"]:O,["AGP"]:at,["AGW"]:G,["ASG"]:G,["AMS"]:O,["AFO"]:ue,["ATG"]:Lt,["ATP"]:be,["ART"]:Lt,["ATS"]:Lt,["AGM"]:he,["ALG"]:we,["AHL"]:Ui,["ALS"]:we,["ASB"]:Jt,["AAA"]:Vi,["ABE"]:at,["ATZ"]:G,["AEC"]:Pt,["AVB"]:G,["ARB"]:Lt,["AEN"]:V,["APM"]:Oi,["AQE"]:G,["AGD"]:zi,["AFS"]:Qt,["AWU"]:De,["ASQ"]:mt,["AOP"]:G,["AMD"]:Zi,["ABR"]:Ot,["AFR"]:O,["AMY"]:Ot,["ABL"]:re,["ATT"]:dt,["AMP"]:ke,["AGU"]:V,["AIV"]:Gt,["ATI"]:O,["BRS"]:li,["BTB"]:ni,["BTH"]:V,["BTI"]:ft,["BTN"]:we,["BBB"]:V,["BLH"]:Lt,["BFT"]:G,["BZH"]:G,["BSP"]:Gt,["BWK"]:he,["BLW"]:V,["BTD"]:le,["BZS"]:O,["BBR"]:G,["BBD"]:G,["BBL"]:G,["BBN"]:G,["BSR"]:ft,["BMY"]:Yi,["BSW"]:mt,["BWW"]:oe,["BTM"]:G,["BLP"]:G,["BOS"]:Z,["BAW"]:ft,["BWG"]:V,["BTR"]:O,["BWD"]:Ae,["BOF"]:Bt,["BSG"]:qi,["BSS"]:O,["BTS"]:Ae,["BST"]:ge,["BWT"]:Ki,["BRF"]:he,["BRH"]:dt,["BWH"]:Xi,["BWN"]:dt,["BRN"]:fe,["BZD"]:O,["BFM"]:O,["BSM"]:ji,["CKB"]:ft,["CDT"]:he,["CMF"]:qe,["CTL"]:at,["CCS"]:mt,["CDM"]:dt,["CHY"]:V,["CSR"]:li,["CSL"]:V,["CGG"]:vt,["CHV"]:Ji,["CCC"]:at,["CRS"]:ue,["COD"]:at,["CHT"]:G,["CTI"]:O,["CHA"]:ft,["CHH"]:O,["CHR"]:Jt,["CBB"]:Ue,["CDC"]:V,["CFB"]:Ot,["CNM"]:V,["CSW"]:O,["CTG"]:V,["CCT"]:Ie,["CFG"]:We,["CGF"]:vt,["CGL"]:mt,["CSU"]:G,["CCR"]:ft,["CSB"]:vt,["CNT"]:G,["CWK"]:V,["CRC"]:Gt,["CMR"]:Qi,["CYP"]:_i,["CYC"]:Lt,["COZ"]:Z,["CYS"]:vt,["CYW"]:Pt,["CTW"]:G,["CTV"]:G,["CYR"]:dt,["CAG"]:G,["CBS"]:G,["CEX"]:at,["CIN"]:Ce,["CSH"]:mt,["CSG"]:We,["CTM"]:tr,["DFM"]:Z,["DFR"]:O,["DHC"]:er,["DHW"]:Lt,["DRS"]:ft,["DSS"]:$e,["DSW"]:O,["DSE"]:ft,["DSA"]:ft,["DCR"]:at,["DSK"]:vt,["DPO"]:G,["DBA"]:O,["DBP"]:V,["DMR"]:V,["DBR"]:V,["DFS"]:at,["DCS"]:Mt,["DPG"]:rr,["DWW"]:sr,["DDF"]:G,["DGZ"]:at,["DNK"]:ar,["DBN"]:O,["DOV"]:ke,["DDS"]:nr,["DIS"]:Pt,["DSV"]:or,["DDD"]:O,["DPB"]:hr,["DZA"]:Z,["DZD"]:Jt,["DRE"]:Pt,["DKS"]:le,["DGS"]:ft,["DGW"]:at,["DRD"]:lr,["DBT"]:G,["DTR"]:Jt,["DFB"]:Bt,["DMW"]:Qt,["DCH"]:Pt,["DTD"]:V,["DHM"]:dt,["DSZ"]:V,["DYB"]:re,["DBQ"]:cr,["DYF"]:G,["DYS"]:dr,["DYL"]:ur,["EBW"]:Ue,["ESD"]:fr,["ESK"]:Gt,["EHW"]:gr,["ETN"]:G,["EWE"]:De,["EVT"]:Pt,["ENP"]:G,["ESU"]:Pt,["ENR"]:G,["EPD"]:at,["EPH"]:mr,["EPS"]:Ot,["ESG"]:pr,["ESC"]:Ae,["ESP"]:yr,["EWT"]:O,["EHN"]:Ae,["EWF"]:Z,["EWV"]:at,["EFA"]:G,["EFM"]:Ot,["EFP"]:br,["EFE"]:Ar,["EXD"]:G,["FWB"]:V,["FWR"]:V,["FFG"]:V,["FST"]:vt,["FWK"]:vt,["FIN"]:G,["FRR"]:at,["FVA"]:re,["FSL"]:he,["FWG"]:Z,["FWC"]:Gt,["FFU"]:mt,["FLH"]:qe,["FMS"]:V,["FSM"]:at,["FOR"]:G,["FBC"]:Ot,["FBI"]:Lt,["FFS"]:mt,["FLN"]:G,["FJT"]:G,["FRI"]:ft,["FSS"]:$e,["FLS"]:Lt,["FSH"]:mt,["FFD"]:vt,["FRV"]:ft,["FSC"]:vt,["FSP"]:dt,["FPR"]:V,["FFL"]:G,["FGA"]:V,["FGB"]:V,["FGD"]:dt,["FGG"]:Qt,["FGO"]:V,["FOL"]:ue,["FPM"]:V,["FPS"]:V,["FWS"]:Jt,["FLC"]:ft,["FFM"]:De,["FRH"]:Z,["FMD"]:kr,["FME"]:Gt,["FSK"]:vr,["FKS"]:Tr,["FWT"]:O,["FZS"]:G,["FUN"]:Z,["GOS"]:Sr,["GHS"]:Qt,["GHB"]:Ie,["GHR"]:Cr,["GRN"]:We,["GTH"]:G,["GSC"]:he,["GMP"]:Mt,["GTT"]:wr,["GCL"]:V,["GCR"]:G,["GLF"]:ft,["GRW"]:ft,["GSW"]:O,["GVS"]:vt,["GSS"]:O,["GPV"]:Dr,["GBG"]:vt,["GGE"]:V,["GGH"]:V,["GRP"]:xr,["GGB"]:Bt,["GGD"]:Bt,["GGR"]:Bt,["GGP"]:Bt,["GGS"]:V,["GGW"]:Bt,["GRM"]:at,["GHT"]:ft,["GMR"]:vt,["GSF"]:Hr,["GAS"]:Br,["HMF"]:dt,["HOS"]:dt,["HTR"]:oe,["HAR"]:G,["HFA"]:Ee,["HOD"]:dt,["HMO"]:le,["HRM"]:Nr,["HWM"]:Ce,["HVE"]:le,["HOX"]:Pt,["HGS"]:Fr,["HTP"]:Pr,["IBF"]:at,["IGR"]:Pt,["ITO"]:Pt,["ISB"]:Ie,["IKA"]:xe,["IME"]:Pt,["IDF"]:dt,["IRT"]:di,["IVS"]:at,["ICD"]:Mr,["IWC"]:V,["IBA"]:Lt,["IHA"]:he,["IBR"]:Ue,["IMD"]:Jt,["IMA"]:O,["IZL"]:Rr,["IZR"]:Er,["IZK"]:Lt,["IFL"]:fe,["IFR"]:G,["JPK"]:G,["KDC"]:V,["KSB"]:O,["KAW"]:Lt,["KOD"]:mt,["KBE"]:Ir,["KIW"]:Lr,["KTS"]:Ge,["KKK"]:oe,["LOD"]:at,["LFA"]:Gr,["LVG"]:oe,["LKP"]:$r,["LGT"]:O,["LLD"]:Se,["LLG"]:Se,["LLS"]:Se,["LLT"]:Se,["LLV"]:Se,["LMD"]:ke,["LBD"]:O,["LSS"]:$e,["LBL"]:Mt,["LBC"]:Wr,["LBR"]:G,["LSK"]:fe,["LTT"]:oe,["LTM"]:V,["LWY"]:V,["LSP"]:Ce,["LVH"]:Ur,["LTU"]:le,["LCE"]:Pt,["LUC"]:De,["LMV"]:O,["LHY"]:V,["LYR"]:fe,["LYS"]:G,["MMH"]:ft,["MMY"]:G,["MHR"]:Vr,["MRF"]:V,["MMG"]:Qt,["MOE"]:O,["MXW"]:ft,["MSP"]:Pt,["MDR"]:ke,["MMA"]:O,["MMR"]:O,["MMX"]:vt,["MMI"]:V,["MMO"]:V,["MMV"]:Gt,["MPH"]:G,["MSC"]:G,["MTS"]:ui,["MTT"]:Or,["MML"]:zr,["MMW"]:Zr,["MBR"]:O,["MDE"]:ci,["MBP"]:mt,["MTD"]:O,["MND"]:mt,["MNM"]:Mt,["NNS"]:G,["NGB"]:ft,["NGW"]:V,["NSL"]:G,["NCF"]:G,["NCM"]:Jt,["POZ"]:Z,["NCP"]:ke,["NCS"]:mt,["NCW"]:V,["NCV"]:G,["NSW"]:Yr,["NDY"]:G,["NDR"]:Kr,["NEM"]:Pt,["NSH"]:at,["NXA"]:qr,["NXB"]:di,["NXC"]:V,["NXG"]:mt,["NXO"]:ue,["NXP"]:hi,["NXT"]:we,["NGT"]:Bt,["NGQ"]:Xr,["NSD"]:Z,["NCL"]:at,["NFF"]:mt,["NUG"]:Mt,["NAM"]:V,["NOZ"]:vt,["NSY"]:O,["ONN"]:jr,["OXA"]:Jr,["OXM"]:O,["OXP"]:Qr,["OOZ"]:Z,["OBB"]:_r,["OEX"]:G,["OWH"]:ts,["ORC"]:ke,["OBD"]:V,["OFM"]:O,["OJC"]:dt,["OPK"]:O,["OSV"]:ge,["OSS"]:G,["OWW"]:Qt,["OHV"]:mt,["ODC"]:es,["OSP"]:V,["OAP"]:is,["OSL"]:V,["OWF"]:at,["OXS"]:rs,["PHM"]:O,["PPM"]:mt,["PSM"]:O,["PLW"]:at,["POA"]:ft,["POD"]:Ae,["POK"]:O,["POT"]:O,["PRG"]:V,["PRI"]:ui,["PHS"]:ft,["PHC"]:at,["PTB"]:at,["PLI"]:be,["PSC"]:mt,["PSH"]:Gt,["PTR"]:G,["PSG"]:G,["PVA"]:ss,["PMI"]:O,["PMS"]:G,["POX"]:vt,["PMP"]:G,["PYG"]:Ie,["PYM"]:Le,["PYS"]:at,["QSW"]:le,["RBH"]:as,["ROK"]:at,["REW"]:O,["RPT"]:Z,["RHY"]:V,["RTS"]:Ot,["RTW"]:le,["RHU"]:ge,["RSC"]:Ge,["RMB"]:ns,["RPR"]:G,["RLW"]:dt,["RFL"]:os,["RHC"]:V,["ROG"]:re,["ROU"]:at,["ROE"]:at,["RWC"]:Ae,["RFA"]:Ee,["RWD"]:ft,["RSD"]:xe,["RSE"]:hs,["RBG"]:Le,["RGG"]:Gt,["RSZ"]:vt,["RSP"]:V,["RHW"]:dt,["SBF"]:Mt,["SAP"]:G,["SPL"]:Z,["SVO"]:G,["SSE"]:Mt,["SXP"]:Z,["SXD"]:Z,["SST"]:Qt,["SXT"]:Z,["STS"]:at,["SCS"]:V,["SMD"]:O,["SFS"]:ls,["SHY"]:ft,["SKN"]:cs,["SCD"]:V,["SFT"]:V,["SOC"]:G,["SOA"]:G,["SOD"]:G,["SOK"]:fe,["SOT"]:G,["SDL"]:Z,["SAD"]:ds,["SCZ"]:dt,["SFE"]:oe,["SWS"]:us,["SHA"]:dt,["SHG"]:G,["SBI"]:Ue,["SCC"]:Ge,["SPB"]:fs,["SPD"]:Mt,["SPG"]:re,["SPM"]:Mt,["SPT"]:gs,["STD"]:ft,["STB"]:fe,["SHS"]:he,["SSP"]:dt,["SGF"]:mt,["SKG"]:hi,["SLS"]:ms,["SSD"]:xe,["SDA"]:ps,["SSR"]:Gt,["SNB"]:G,["SNP"]:at,["SRD"]:at,["SSH"]:be,["SRM"]:mt,["SRH"]:Bt,["SDN"]:O,["SHV"]:G,["SRP"]:G,["SGG"]:O,["SBA"]:V,["SKB"]:V,["SBR"]:V,["SKS"]:ge,["SEL"]:ys,["STM"]:V,["SWA"]:Lt,["SFG"]:mt,["S01"]:Jt,["SPR"]:Bt,["SLG"]:O,["SBD"]:O,["SCV"]:bs,["SFM"]:vt,["SSN"]:V,["SSM"]:Gt,["SLH"]:As,["SPN"]:Z,["SSI"]:Ce,["SND"]:Ge,["SNT"]:vt,["SRV"]:Le,["STR"]:G,["SPU"]:Z,["XYR"]:Z,["SPH"]:ks,["SSA"]:mt,["STO"]:G,["SDR"]:dt,["SOL"]:xe,["SOV"]:G,["SMS"]:le,["SHK"]:fe,["SIX"]:ft,["SWR"]:vs,["SMN"]:V,["SER"]:Ts,["SES"]:Ss,["SFA"]:Ee,["STG"]:Cs,["SSS"]:$e,["SSK"]:O,["SNK"]:ue,["SWG"]:ge,["SWM"]:mt,["SIV"]:at,["STN"]:G,["SGI"]:V,["SBG"]:ws,["SCL"]:V,["SGA"]:Ee,["STP"]:G,["SSG"]:Gt,["SVH"]:Ot,["SIN"]:G,["SYL"]:O,["SEV"]:ft,["SMA"]:V,["SML"]:V,["SYO"]:xs,["TST"]:at,["TBA"]:Mt,["TGL"]:G,["TGS"]:V,["TPT"]:G,["TDW"]:dt,["TNL"]:Hs,["TEX"]:ue,["TGN"]:V,["TSM"]:ue,["TUP"]:G,["TOT"]:G,["TAB"]:ci,["TGI"]:O,["TDS"]:Jt,["TSP"]:Bs,["TNM"]:V,["TPG"]:be,["TMG"]:be,["TMM"]:Ns,["TRA"]:O,["TRS"]:O,["TRV"]:O,["TRW"]:O,["TBB"]:qe,["TOB"]:re,["TCN"]:oe,["TWS"]:V,["TVG"]:ni,["TXB"]:G,["TXS"]:G,["TFK"]:Z,["TFD"]:Z,["TFF"]:Z,["TCG"]:G,["TMS"]:Fs,["TBC"]:Ps,["TWT"]:V,["TRN"]:at,["TGK"]:Le,["TSL"]:Ms,["TTF"]:Z,["TWG"]:We,["UGM"]:Gt,["USY"]:dt,["UGL"]:O,["UIC"]:Rs,["ULR"]:Es,["ULG"]:re,["URD"]:V,["USA"]:vt,["UBL"]:G,["UCM"]:mt,["UEM"]:Is,["UHS"]:Ls,["UIM"]:mt,["USS"]:Mt,["UWL"]:O,["UWS"]:O,["UIW"]:O,["URS"]:G,["UTM"]:O,["UTR"]:dt,["URB"]:Ot,["UPM"]:Qt,["VIC"]:O,["VIK"]:O,["VRP"]:$s,["VBK"]:V,["VIN"]:be,["VTC"]:V,["VTW"]:ge,["VGN"]:vt,["VND"]:O,["VNF"]:ft,["VNS"]:O,["VSK"]:G,["VCH"]:at,["VGR"]:G,["VSP"]:G,["VTR"]:G,["VGL"]:G,["VGW"]:Ws,["VOB"]:re,["VCG"]:Mt,["VPR"]:Us,["VES"]:Ot,["VYE"]:G,["WBY"]:ft,["WBU"]:ft,["WHC"]:V,["WHR"]:Vs,["WMC"]:O,["WMR"]:mt,["WMM"]:G,["WTK"]:xe,["WTW"]:V,["WEB"]:ge,["WGE"]:re,["WTA"]:Os,["WWP"]:O,["WWR"]:mt,["WOD"]:at,["WFM"]:Qt,["WWS"]:zs,["WBH"]:De,["WCS"]:Zs,["WPD"]:V,["WSE"]:Ys,["WPC"]:at,["WFB"]:O,["WFS"]:mt,["WBG"]:Mt,["XTE"]:Qt,["XCR"]:V,["XDH"]:ft,["XHS"]:vt,["XHU"]:V,["XRF"]:Ks,["XSH"]:mt,["XTR"]:O,["XDV"]:oe,["XRW"]:G,["YWC"]:V,["YNS"]:Bt,["ZXR"]:qs,["ZPM"]:mt,["ZTR"]:Z,["ZTU"]:vt,["ZIN"]:V,["ZDK"]:O,["ZBS"]:Z,["ZST"]:Z,["ZMT"]:Xs,["ZMB"]:Z,["ZSH"]:Mt};makeCard(t){try{let i;if(t==="SOV3"?i=new Gs(t):t==="SOC3"?i=new O(t):t==="LOD3"?i=new ir(t):t==="GOS3"?i=new Ds(t):i=new this.mapper[Dt.extractCardCode(t)](t),i.type==="C"){const r=i;r.spice=[{icon:"A",num:r.iAttack},{icon:"H",num:r.iHealth}].concat(r.spice??[])}return i}catch(i){throw console.error("Make card screwed up on code: "+t),i}}getCard(t){let i=this.cardCache.get(t);return i||(i=this.makeCard(t),this.cardCache.set(t,i)),i}}const L=new js;class Js{registry;constructor(){this.registry=[]}find(t){const i=this.registry.find(r=>r.action===t);if(i)return i;throw console.trace(),new Error("Attempted to find non-existing clicker")}entoggle(t,i){const r=this.find(t);r.enabled=i}add(t){this.registry.push(t)}get(t){return this.find(t)}remove(t){const i=this.registry.findIndex(r=>r.action===t);i>-1&&this.registry.splice(i,1)}removeAll(){this.registry=[]}enable(t){this.entoggle(t,!0)}disable(t){this.entoggle(t,!1)}hitTest(t,i,r){if(M.ui.animating)return;let s,c;this.scaleFactor===1?(s=t,c=i):(s=Math.round(t*this.scaleFactor),c=Math.round(i*this.scaleFactor));let f,m=S.clickMode;return m==="M"?f=r:r===rt.ForceRight?f=rt.Right:m==="T"?f=rt.Left:f=rt.Right,Ye.arrayHit(this.registry,s,c,f)}updateScale(t){t===1?this.scaleFactor=1:this.scaleFactor=1/t}scaleFactor=1}const et=new Js;class Qs{memLoad=!0;step="O";vsAI=!0;p1=this.dud();p2=this.dud();initConstructed(){this.step="O",this.memLoad&&(this.memLoad=!1,this.p1.mode=S.readStringStorage("cMode"+"A","CP"),this.p2.mode=S.readStringStorage("cMode"+"B","CP"),this.p1.mode==="LK"&&(this.p1.mode="CP"),this.p2.mode==="LK"&&(this.p2.mode="CP"),this.vsAI=S.readBoolStorage("cAI",!0)),yt.drawAll()}handleMenuPick(t,i){if(t==="CI"||t==="CV")this.vsAI=t==="CI",S.writeBoolStorage("cAI",this.vsAI);else if(t==="CN")this.ezDeck(this.p1)?this.ezDeck(this.p2)?this.launchConstructed():(this.step="B",T.ddf5(this.generateDeckPickerActions())):(this.step="A",T.ddf5(this.generateDeckPickerActions()));else{const r=i==="A"?this.p1:this.p2;t==="LK"?Ut.loadFromFile().then(s=>{typeof s=="string"?new ze().iAmError(s):(r.deck=s,r.mode=t,S.writeStorage("cMode"+i,t),yt.drawAll())}):(r.mode=t,S.writeStorage("cMode"+i,t))}yt.drawAll()}ezDeck(t){return t.mode==="CP"?!1:(t.mode==="CR"?t.deck=Ut.randomStockDeck():t.mode==="CX"&&(t.deck=Ut.treatsAbound(!0)),!0)}handleDeckPick(t){const i=S.deTil(t.param),r=Ut.stockDeckByName(i[0],i[1]);this.step==="A"?(this.p1.deck=r,this.ezDeck(this.p2)?this.launchConstructed():(this.step="B",T.ddf5(this.generateDeckPickerActions()))):(this.p2.deck=r,this.launchConstructed())}generateDeckPickerActions(t=-1){const i=ye.map((r,s)=>{const c=y.basicAction("DSET");return c.param=s.toString(),c});if(t>-1){const r=ye[t],s=r.decks.map(c=>{const f=y.basicAction("DECK");return f.param=S.enTil(r.id,c.name),f});return i.concat(s)}return i}launchConstructed(){M.aiMode=this.vsAI,bt.setMode("G"),M.newGame(this.p1.deck.cards,this.p2.deck.cards)}replay(){M.newGame(this.p1.deck.cards,this.p2.deck.cards)}dud(){return{mode:"CP",deck:{cards:[],name:"",factions:[]}}}}const Rt=new Qs;class _s{deathOrder=[];graveyard=[];reset(){this.graveyard=[],this.deathOrder=[]}purge(){this.deathOrder=[]}getState(){const t={dO:this.deathOrder,gY:this.graveyard};return JSON.stringify(t)}setState(t){const i=JSON.parse(t);this.deathOrder=i.dO,this.graveyard=i.gY}deathCheck(){const t=M.tick();g.qActiveCreats().forEach(s=>{s.health<1&&(p.new().crd(s.code).txt(" died.").go(),this.smite(s,t))});const i=k.toPlayer(!0),r=k.toPlayer(!1);(i.health<1||r.health<1)&&(i.health<r.health?M.winFlag=-1:M.winFlag=1),x.deathCheck=!0}deathProdder(t,i=void 0){t.health<1?this.deathOrder.push({creatId:t.id,time:i||M.tick()}):this.deathOrder.some(r=>r.creatId===t.id)&&(this.deathOrder=this.deathOrder.filter(r=>r.creatId!==t.id))}findDeathTime(t){const i=this.deathOrder.filter(r=>r.creatId===t).map(r=>r.time);if(i.length!==0)return Math.min(...i)}destroy(t,i,r=void 0){t.status==="A"?(p.new().crd(t.code).txt(" was destroyed by ").crd(i).txt(".").go(),this.smite(t,r)):(console.warn(`Attempted to destroy creature that was not active. Targ creat ${t.code}; Killer creat ${i}`),console.trace())}gravedigger(t="X",i="LA"){if(t==="X"&&i==="LA"){const r=this.graveyard.length;return r===0?"":this.graveyard[S.randInt(0,r)].cardCode}else{let r;if(t==="X")r=this.graveyard;else{const c=k.toBool(t);r=this.graveyard.filter(f=>f.owner===c)}i!=="LA"&&(r=r.filter(c=>D.levelTargetTest(i,parseInt(c.cardCode.slice(3)))));const s=r.length;return s===0?"":r[S.randInt(0,s)].cardCode}}smite(t,i=void 0){t.status="D",this.deathOrder.push({creatId:t.id,time:i||M.tick()}),this.graveyard.push({cardCode:t.code,owner:t.owner}),x.addEvents($.creature("DIE",t)),ce.positionChange(t.owner),t.owner?I.deathsA.push(t.code):I.deathsB.push(t.code)}}const W=new _s;class ta{get youi(){return M.ui}initDeck(t,i){this.youi.deckContents=t,this.youi.deckScroll=0,this.youi.deckSummary=i,bt.setMode("T")}get canPageDown(){return this.youi.deckContents.length-this.youi.deckScroll>15}get canPageUp(){return this.youi.deckScroll>0}paginate(t){t?this.youi.deckScroll+=15:this.youi.deckScroll-=15}visibleContent(){const t=this.youi.deckScroll;return this.youi.deckContents.slice(t,t+15)}generateContent(t,i,r){const s=D.cardByTarget(t,r);if(M.aiActive||s.sort((c,f)=>{const m=c[0],A=f[0];return A===m?0:m>A?1:-1}),i){const c=s.length;let f=0,m="",A=0;const w=[];for(;f<c;)m===s[f][0]?A++:(f>0&&w.push({cardCode:m,sourceIdx:-1,cardCount:A}),m=s[f][0],A=1),f++;return c>0&&w.push({cardCode:m,sourceIdx:-1,cardCount:A}),w}else return s.map(c=>({cardCode:c[0],sourceIdx:c[1],cardCount:0}))}handleShowDeck(t){let i;const r=S.deTil(t.param);if(r[0]==="VE")i=k.activeCardItems(S.txt2bool(r[1]));else{const s=k.getActive();i=t.param==="VR"?s.deck:s.discard}this.showDeck(i)}handleDeckScroll(t){this.paginate(t.param==="D"),yt.drawAll()}showCustomDeck(t,i){this.initDeck(t,!1);const r=this.rightClickers(),s=i.concat(r);return T.ddf5(s),s}showDeck(t){this.initDeck(this.generateContent(t,!0),!0);const i=T.cancelAction();i.key="CNCL",i.param="PM";const r=this.rightClickers();r.push(i),T.ddf5(r)}rightClickers(){return M.aiActive?[]:this.youi.deckContents.map((t,i)=>{const r=y.deckSelectAction("DEET",t.cardCode,i);return r.param=t.cardCode,r})}}const St=new ta;class ea{friends;friendText;get browseStack(){return M.ui.detailStack}n(t,i){return`${t}${i}`}friendo(t,i){const r=Array.isArray(i)?i:[i];[1,2,3].forEach(s=>{this.friends[this.n(t,s)]=r.map(c=>this.n(c,s))})}plont(t){this.friends[this.n(t,1)]=[this.n("SDL",1)],this.friends[this.n(t,2)]=[this.n("SPL",2)],this.friends[this.n(t,3)]=[this.n("TFK",3)]}constructor(){const t=this.n("FWC",1),i=this.n("AVB",1);this.friends={[this.n("ASQ",1)]:[this.n("SLG",1),this.n("WEB",1)],[this.n("ASQ",2)]:[this.n("WEB",2)],[this.n("ASQ",3)]:[this.n("WEB",3)],[this.n("CGL",1)]:[this.n("CGF",1)],[this.n("DHC",1)]:[this.n("DYF",1)],[this.n("DTD",1)]:[this.n("TOT",1)],[this.n("EWV",1)]:[this.n("EWF",1)],[t]:[this.n("FWG",1)],[this.n("IBA",1)]:[i],[this.n("IBA",2)]:[i],[this.n("IBA",3)]:[i],[this.n("IBA",4)]:[i],[this.n("MPH",1)]:[t],[this.n("MPH",2)]:[t],[this.n("MPH",3)]:[t],[this.n("NGQ",4)]:[this.n("NSD",4)],[this.n("RHU",1)]:[this.n("RSC",1)],[this.n("ROE",1)]:[this.n("FRH",1),this.n("LVG",1),this.n("LTT",1)],[this.n("SSE",1)]:[this.n("SXD",1)],[this.n("SSE",2)]:[this.n("SXP",2)],[this.n("SSE",3)]:[this.n("SXT",3)],[this.n("SLS",1)]:[this.n("MMY",1)],[this.n("TRA",2)]:[this.n("PTR",2)],[this.n("TRA",3)]:[this.n("PTR",3)],[this.n("TRS",2)]:[this.n("STO",2)],[this.n("TRS",3)]:[this.n("STO",3)],[this.n("TRV",2)]:[this.n("ITO",2)],[this.n("TRV",3)]:[this.n("ITO",3)],[this.n("TRW",2)]:[this.n("STR",2)],[this.n("TRW",3)]:[this.n("STR",3)],[this.n("TGK",1)]:[this.n("SXD",1)],[this.n("TGK",2)]:[this.n("SPL",2)],[this.n("TGK",3)]:[this.n("TTF",3)],[this.n("TSL",1)]:[this.n("FUN",1)],[this.n("ZTU",2)]:[this.n("ZTR",2)]},this.friendo("BLH","LWY"),this.friendo("BTM","BOS"),this.friendo("BWD","TFD"),this.plont("BTS"),this.friendo("BWT","DNK"),this.friendo("CSB","ZBS"),this.friendo("CYS","COZ"),this.friendo("DSK","SPN"),this.friendo("DDF","SXT"),this.friendo("DNK","BWT"),this.friendo("DZD","DZA"),this.friendo("DBQ","BRF"),this.friendo("EPH","EPS"),this.friendo("FST","ZST"),this.friendo("FWK","ZMB"),this.friendo("FGD",["FGA","FGB","FGG","FGO"]),this.friendo("FGG","FGO"),this.friendo("FMD","FME"),this.friendo("FME","FMD"),this.plont("GMR"),this.friendo("IZL",["IFL","IFR","IZR"]),this.friendo("IZR",["IFL","IFR","IZL"]),this.friendo("IZK",["IFL","IFR","IZL","IZR"]),this.friendo("LVH","KBE"),this.friendo("NCM","POZ"),this.friendo("NSW","SPN"),this.friendo("NSH","NDR"),this.friendo("NGQ","NSD"),this.friendo("NFF","TFF"),this.friendo("NOZ","OOZ"),this.friendo("PHC","CYP"),this.plont("PTB"),this.friendo("RWC","RPT"),this.plont("SST"),this.plont("STS"),this.friendo("SSP","DFM"),this.friendo("SDA","HTP"),this.friendo("SLG","WEB"),this.friendo("SND","SPU"),this.friendo("SIV","KBE"),this.friendo("TNL","ZMB"),this.friendo("USS","LWY"),this.friendo("VIC",["IFL","IFR"]),this.friendo("WHR","WHC"),this.plont("WWS"),this.friendo("YNS","XYR");const r=42,s=31,c=40,f=51,m=38,A=52,w=66;this.friendText={["AVB"]:[42,"Hammer"],["BOS"]:[f,""],["BWT"]:[68,"Bron"],["BRF"]:[18,""],["CGF"]:[65,"Fiend"],["CYP"]:[4,""],["COZ"]:[s,""],["DFM"]:[33,"Mimic"],["DNK"]:[8,""],["DZA"]:[59,"Dozer"],["DYF"]:[38,"Infusion"],["EPS"]:[49,"Soldier"],["EWF"]:[18,""],["FWG"]:[44,""],["FWC"]:[28,"Chrysalis"],["FGA"]:[65,"Alpha"],["FGB"]:[77,"Beta"],["FGG"]:[53,"Gamma"],["FGO"]:[57,"Omega"],["FRH"]:[21,""],["FMD"]:[47,"Dragon"],["FME"]:[78,"Egg"],["FUN"]:[49,""],["HTP"]:[38,"Hunting"],["ITO"]:[r,"Torrent"],["IZL"]:[42,"Av Flame"],["IZR"]:[44,"Av Frost"],["IFL"]:[65,"Flame"],["IFR"]:[67,"Frost"],["KBE"]:[83,"Bee"],["LVG"]:[16,""],["LTT"]:[65,"Titan"],["LWY"]:[65,"Wyrm"],["MMY"]:[40,""],["POZ"]:[s,""],["NDR"]:[3,""],["NSD"]:[c,""],["OOZ"]:[s,""],["PTR"]:[r,"Torrent"],["RPT"]:[51,""],["RSC"]:[60,"Scout"],["SPL"]:[f,""],["SXP"]:[f,""],["SXD"]:[c,""],["SXT"]:[m,""],["SDL"]:[c,""],["SLG"]:[25,""],["SPN"]:[w,""],["STR"]:[r,"Torrent"],["SPU"]:[w,""],["XYR"]:[w,""],["STO"]:[r,"Torrent"],["TOT"]:[40,"Tendrils"],["TFK"]:[m,""],["TFD"]:[m,""],["TFF"]:[m,""],["TTF"]:[m,""],["WHC"]:[41,"Courser"],["WEB"]:[78,""],["ZTR"]:[32,"Returned"],["ZBS"]:[A,""],["ZST"]:[A,""],["ZMB"]:[A,""]}}get currentCard(){const t=this.browseStack;return t[t.length-1]}get friendos(){return this.friends[this.currentCard]??[]}get canGoBack(){return this.browseStack.length>1}init(t){if(!M.aiActive)if(M.ui.detailStack=[t],bt.mode!=="R"){bt.setMode("R");const i=y.basicAction("CNCL");i.zone=bt.baseMode==="G"?"B":"N",i.param="PM",T.ddf5([i])}else yt.drawAll()}changeLevel(t){const i=this.browseStack,r=i.length-1,s=i[r];i[r]=this.n(Dt.extractCardCode(s),t)}goBack(){this.browseStack.pop()}goToFriend(t){this.browseStack.push(t)}friendTxt(t){const i=this.friendText[t];return i||[3,"I am error"]}goBackAction(){const t=y.basicAction("DTUP");return t.param="DB",t}levelAction(t){const i=y.basicAction("DTUP");return i.param=S.enTil("DL",t),i}friendAction(t){const i=y.basicAction("DTUP");return i.param=S.enTil("DF",t),i}updateDetails(t){const i=S.deTil(t.param),r=i[0];r==="DB"?this.goBack():r==="DF"?this.goToFriend(i[1]):r==="DL"?this.changeLevel(parseInt(i[1])):console.error("Unknown detail arg",t)}}const _t=new ea,je=[1,2,3,4,5,6,7].map(n=>n.toString());class ia{rarityCache={["L"]:[],["H"]:[],["R"]:[],["C"]:[],["T"]:[]};faction1="X";faction2="X";factionLock=!1;picks=[];picksAsDeck=[];currentPack=[];scrollIdx=0;memLoad=!0;step="O";stats;vsAI=!0;legDraft=!1;fatPacks=!1;overdraft=!1;rarityFilters;setFilters;pAdeck=[];pBdeck=[];get aiPicking(){return this.vsAI&&this.step==="B"}packOdds=[];constructor(){this.rarityFilters=new Map(pe.map(t=>[t,!0])),this.setFilters=new Map(je.map(t=>[t,!0])),this.stats=new si}getRarity(t){return this.rarityFilters.get(t)??!0}toggleRarity(t){const i=!this.rarityFilters.get(t);return this.rarityFilters.set(t,i),i}getSet(t){return this.setFilters.get(t.toString())??!0}toggleSet(t){const i=t.toString(),r=!this.setFilters.get(i);return this.setFilters.set(i,r),r}get canPageDown(){return this.picksAsDeck.length-this.scrollIdx>15}get canPageUp(){return this.scrollIdx>0}paginate(t){t?this.scrollIdx+=15:this.scrollIdx-=15}initDraft(){this.step="O",this.memLoad&&(this.memLoad=!1,this.vsAI=S.readBoolStorage("dAI",!0),this.legDraft=S.readBoolStorage("legDraft",!1),this.fatPacks=S.readBoolStorage("fatPacks",!1),this.overdraft=S.readBoolStorage("overD",!1),je.forEach(t=>{this.setFilters.set(t,S.readBoolStorage("dSet"+t,!0))}),pe.forEach(t=>{this.rarityFilters.set(t,S.readBoolStorage("dRare"+t,!0))})),yt.drawAll()}setFArr(){let t=je.filter(i=>this.setFilters.get(i)).map(i=>parseInt(i));return t.length===7&&(t=[]),t}validRarities(){return pe.filter(t=>this.rarityFilters.get(t))}startDraftPicks(){const t=this.setFArr();pe.forEach(i=>{this.getRarity(i)?this.rarityCache[i]=Ut.getDeckCards([i],[],t):this.rarityCache[i]=[]}),pe.every(i=>this.rarityCache[i].length===0)&&(this.rarityCache["C"]=this.fun()),this.packOdds=this.fatPacks?[9,31,40]:[5,25,40],this.faction1="X",this.faction2="X",this.factionLock=!1,this.picks=[],this.picksAsDeck=[],this.scrollIdx=0,this.stats=new si,this.resumeDraft("")}resumeDraft(t){if(t){this.picks.push(t),this.picksAsDeck=this.picksToDeck();const s=this.overdraft?60:30;if(this.picks.length===s){this.step==="A"?(this.pAdeck=this.picksAsDeck.slice(),this.step="B",this.startDraftPicks()):(this.pBdeck=this.picksAsDeck.slice(),this.launchDraft());return}const c=L.getCard(t);if(this.aiPicking||this.stats.addStat(c.type,c.faction),!this.factionLock){const f=c.faction;if(this.faction1==="X")this.faction1=f;else if(f!==this.faction1){this.faction2=f,this.factionLock=!0;const m=this.setFArr();this.validRarities().forEach(A=>{this.rarityCache[A]=Ut.getDeckCards([A],[this.faction1,this.faction2],m)})}}}const i=this.generatePack().slice(-1*(6-this.picks.length%5)),r=this.fillPack(i);if(this.aiPicking)this.resumeDraft(r[r.length-1]);else{this.currentPack=r;const s=r.map((c,f)=>{const m=y.draftSelectAction("DRFT",f,!0);return m.param=c,m});T.ddf5(s)}}replay(){this.launchDraft()}picksToDeck(){const t=[];return this.picks.forEach(i=>{const r=t.findIndex(s=>s.card===i);r===-1?t.push({card:i,num:1}):t[r].num+=1}),t.sort((i,r)=>{const s=L.getCard(i.card+"1"),c=L.getCard(r.card+"1");return s.name.toLowerCase()<c.name.toLowerCase()?-1:1})}generatePack(){const t=this.validRarities();let i;if(this.picks.length===0&&this.legDraft&&t.includes("L"))return Array(6).fill("L");if(this.picks.length===0&&t.includes("H"))i=Array(6).fill("H"),t.includes("L")&&i.push(...this.boost("L"));else if(this.picks.length===0&&t.includes("R"))i=Array(6).fill("R"),t.includes("L")&&i.push(...this.boost("L"));else{const r=t[0]??"C";i=Array(6).fill(r),t.includes("R")&&(i[5]="R",i.push(...this.boost("R"))),t.includes("H")&&i.push(...this.boost("H")),t.includes("L")&&i.push(...this.boost("L"))}return i.slice(-6).reverse()}boost(t){const i=t==="R"?2:t==="H"?1:0,r=this.packOdds[i],s=[];let c=!0;for(;c;)S.randInt(0,99)<r?s.push(t):c=!1;return s}fillPack(t){const i=[];return t.forEach(r=>{const s=this.rarityCache[r].length;let c=!0,f=0;for(;c&&f<100;){const m=this.rarityCache[r][S.randInt(0,s)];i.includes(m)?f++:(i.push(m),c=!1)}}),i}handleMenuPick(t,i){if(t==="DI"||t==="DV")this.vsAI=t==="DI",S.writeBoolStorage("dAI",this.vsAI);else if(t==="DN")this.step="A",this.startDraftPicks();else if(t==="DR"){const r=i;S.writeBoolStorage("dRare"+i,this.toggleRarity(r))}else t==="DT"?S.writeBoolStorage("dSet"+i,this.toggleSet(i)):t==="LD"?(this.legDraft=!this.legDraft,S.writeBoolStorage("legDraft",this.legDraft)):t==="GP"?(this.fatPacks=!this.fatPacks,S.writeBoolStorage("fatPacks",this.fatPacks)):t==="OD"&&(this.overdraft=!this.overdraft,S.writeBoolStorage("overD",this.overdraft));yt.drawAll()}launchDraft(){M.aiMode=this.vsAI,bt.setMode("G"),M.newGame(this.pAdeck,this.pBdeck)}fun(){return[["ART","SVO","MPH","VSK","MSP","LYS"],["CAG","ATG","WMM","ESU","BWH","CBS"],["DHW","NCF","ROG","EXD","TPT","HOX"],["FLS","STP","BRN","TCG","AQE","VOB"]][S.randInt(0,4)]}}const pt=new ia;class ra{async drawAll(){if(ot.simOn)return;const t=bt.mode;et.removeAll(),this.clearDetails(),t==="G"?(this.clearDeck(),await Promise.all([this.drawHand(k.getLocal()),this.drawPlayers(),this.drawField(),this.drawActions(T.activeActions)]),M.winFlag!==0?await this.drawGameOver():await this.drawCommonButtons(!0,!0,!0)):t==="R"?await this.drawDetails(T.activeActions):t==="T"?M.aiActive||await this.drawDeck(T.activeActions):t==="D"?await this.drawDraft(T.activeActions):t==="C"?await this.drawConstructed():t==="I"?await this.drawInfoMenu():t==="X"?await this.drawExit(T.activeActions):t==="S"?await this.drawSwap():await this.drawMenu()}async drawGameOver(){await new He().drawGameOver()}async drawHand(t){await new yi().drawCards(t)}async drawField(){await new ti().drawCards()}async drawPlayers(){await new He().drawAllPlayers()}async drawDeck(t){const i=t.find(f=>f.zone==="B"),r=[];i&&r.push(i),await new Ve().drawActions(r);const c=new ka;await c.drawCards(),await c.drawActions(t),await this.drawCommonButtons(!0,!0,!1)}async drawActions(t){if(ot.simOn)return;const i=new Ve;if(M.aiActive)await i.drawActions([]);else{st.get("effects").clear();const s=new yi,c=new ti,f=new He;await Promise.all([s.drawActions(t),c.drawActions(t),i.drawActions(t),f.drawActions(t)])}}async drawCombat(t){if(t.length===0)return;M.ui.animating=!0,st.get("effects").clear(),await new ti().drawFight(t),M.ui.animating=!1}async drawDraft(t){st.get("effects").clear();const r=new Ta,s=st.get("game-ui");s.clear(),et.removeAll(),pt.step==="O"?await r.drawDraftMenu(s):(await new Be().drawPickerPlayer(s,pt.step==="A",!1),await r.drawPack(t,s),await r.drawList(t,s),await r.drawStats(s),await this.drawCommonButtons(!0,!0,!1))}async drawMenu(){const t=new Sa,i=st.get("game-ui");i.clear(),et.removeAll(),await t.drawMenu(i)}async drawInfoMenu(){const t=new Be,i=st.get("game-ui");i.clear(),et.removeAll(),await t.drawExtrasMenu(i)}async drawConstructed(){if(Rt.step==="O"){const t=new ze,i=st.get("game-ui");i.clear(),et.removeAll(),await t.drawConstrMenu(i)}else await this.drawDeckPick(T.activeActions)}async drawDeckPick(t){const i=new ze,r=new Be,s=st.get("game-ui");s.clear(),et.removeAll(),await r.drawPickerPlayer(s,Rt.step==="A",Rt.vsAI),await i.drawSets(t,s),await i.drawList(t,s)}clearDetails(){st.get("card").clear()}clearDeck(){st.get("decklist").clear()}async drawDetails(t){await this.drawActions(t),await this.drawCommonButtons(!0,!0,!1),st.get("card").clear();const r=new va,s=t.find(c=>c.key==="CNCL");s?await r.drawDetails(s):console.error("Attempted to show details view with no cancel action")}async drawCommonButtons(t,i,r){let s=979;const c=723,f=new _e,m=st.get("game-ui");if(r&&m.clear(),t&&(await f.makeIconButton(m,s,c,"EX"),s-=50),i){const A=S.clickMode;A!=="M"&&await f.makeIconButton(m,s,c,A==="I"?"TM":"DM")}}async drawExit(t){st.get("decklist").clear();const r=st.get("effects"),s=new Te;await s.drawButton(r,151,488,t[1],"Quit Game",24,!1),await s.drawButton(r,478,488,t[0],"Resume",52,!1)}async drawSwap(){const t=st.get("decklist");t.clear(),t.context.fillStyle="#000000",t.context.fillRect(0,0,S.gameWidth,S.gameHeight);const i=new He,r=k.getActive(),s="#AAF0C1",c=y.basicAction("USWP");c.param="PM",await i.drawPlayer(r,t,200,300);const f={fontSize:22,colour:s};await i.drawText(t,"Player "+(r.isPlayerA?"1":"2"),480,360,f),await i.drawText(t,"Click to start turn",480,420,f);const m=new ut(c,0,0,S.gameWidth,S.gameHeight,rt.Both);et.add(m)}setBackground(t){const i="hide";this.allBackgrounds.forEach(r=>{const s=document.getElementById(r);s&&(t===r?s.classList.remove(i):s.classList.add(i))})}playmatSetup(){let t=!1;const i=S.options.playmat,r=document.getElementById("playmat");if(r?r.dataset.pic!==i&&(t=!0,r.remove()):t=!0,t){const s=new Image(S.gameWidth,S.gameHeight);s.id="playmat",s.classList.add("hide",this.scaleCSS(S.options.scale)),s.dataset.pic=i,s.src=S.imgRoot+`background/playfield-${i}.jpg`,document.getElementById("mainmenu").before(s)}}scaleCSS(t){return`uiSize${t}`}changeScale(t){this.clearAll();let i=S.options.scale;i===t&&(i="100");const r=t==="100"?1:.90625;et.updateScale(r);const s=this.scaleCSS(i),c=this.scaleCSS(t);this.allCanvases.forEach(A=>{st.get(A).dom.classList.replace(s,c)}),this.allBackgrounds.forEach(A=>{const w=document.getElementById(A);w&&w.classList.replace(s,c)}),document.getElementById("solforge").classList.replace(`gameSize${i}`,`gameSize${t}`),document.getElementById("log").classList.replace(`logSize${i}`,`logSize${t}`),S.options.scale=t,S.writeStorage("scale",t)}clearAll(){this.allCanvases.forEach(t=>{st.get(t).clear()})}allCanvases=["game-ui","field","player","hand","effects","decklist","card"];allBackgrounds=["playmat","blueface","mainmenu"]}const yt=new ra;class sa{positionChange(t){g.creatByTarget().forEach(i=>{i.enforceEffects("PS",t)}),k.enforceEffects(t)}defenderChange(t){g.qPlayerCreats(t).forEach(r=>{r.effects.filter(s=>s.watch==="DF").forEach(s=>L.getCard(s.logicCode).enforceEffect(r))})}playerHealthChange(){g.qActiveCreats().forEach(t=>{t.enforceEffects("PH")})}enforceAllNonPositionCreatureEffects(){g.qActiveCreats().forEach(i=>{i.enforceEffects("AT"),i.enforceEffects("AR"),i.enforceEffects("CH"),i.enforceEffects("DF",i.owner)})}}const ce=new sa;class aa{getC(t){return g.jr5(t)}creature(t,i){return{code:t,creatId:i.id}}creatHeal(t,i){return{code:"CHL",creatId:t.id,healAmt:i}}damage(t,i,r,s,c,f,m){let A;return f instanceof Pe?A=f.id:A=f,{code:"DMG",battle:t,dmg:i,life:r,isCreatSrc:s,isCreatTarg:c,target:A,srcId:m?.id}}enterField(t){return{code:"ENT",creatId:t.id,forged:!1,formation:!1}}playCard(t,i){return{code:"PLC",playerA:i,cardCode:t}}player(t,i){return{code:t,playerA:i}}playerHeal(t,i){return{code:"PHL",playerA:t,healAmt:i}}replaced(t,i){return{code:"RPL",creatId:t.id,replCreatId:i.id}}toCreature(t){const i=t;return{code:i.code,creatId:i.creatId,creature:this.getC(i.creatId)}}toDamage(t){const i=t;let r,s,c;return i.isCreatTarg?c=this.getC(i.target):s=k.toPlayer(i.target),i.isCreatSrc&&(r=this.getC(i.srcId)),{code:i.code,battle:i.battle,dmg:i.dmg,life:i.life,isCreatSrc:i.isCreatSrc,srcId:i.srcId,target:i.target,isCreatTarg:i.isCreatTarg,srcCreat:r,hurtCreat:c,hurtPlayer:s}}toEnterField(t){const i=t;return{code:i.code,creatId:i.creatId,forged:i.forged,formation:i.formation,creature:this.getC(i.creatId)}}toReplaced(t){const i=t;return{code:i.code,creatId:i.creatId,creature:this.getC(i.creatId),replCreatId:i.replCreatId,replCreat:this.getC(i.replCreatId)}}}const $=new aa;class na{field=[];birthOrder=[];laneIdx=[1,2,3,4,5];reset(){this.field=[],this.birthOrder=[]}purge(){this.field=this.field.filter(t=>t.status==="A"),this.birthOrder=[]}getState(){const t={field:this.field.map(i=>i.getState()),bO:this.birthOrder};return JSON.stringify(t)}setState(t){const i=JSON.parse(t);this.field=i.field.map(r=>new Pe(r)),this.birthOrder=i.bO}jr5(t){const i=this.searchById(t);if(i)return i;throw console.error("naughty creature id",t),new Error("Could not find creature by id")}creatByLane(t,i){const r=this.searchByLane(t,i);if(r)return r;throw console.error("naughty creature lane ",t,i),new Error("Could not find creature by lane")}ddf6(t){const i=this.searchByFSA(t);if(i)return i;throw console.error("naughty FSA",t),new Error("Could not find creature by FSA")}searchById(t){return this.field.find(i=>i.id===t)}searchByLane(t,i){return this.field.find(r=>r.lane===t&&r.owner===i&&r.status==="A")}searchByFSA(t){return this.searchByLane(t.lane,t.playerA)}creatByTarget(t){let i=this.field;if(t){if(t.player!=="X"){const r=k.toBool(t.player);i=i.filter(s=>s.owner===r)}if(t.creatStatus!=="A"){const r=this.creatStatusTargetToCS(t.creatStatus);i=i.filter(s=>s.status===r)}if(!S.isUn(t.lanes)){const r=D.lanesToArr(t.lanes);i=i.filter(s=>r.includes(s.lane))}if(S.isUn(t.maxAttack)||(i=i.filter(r=>r.attack<=t.maxAttack)),t.notMe&&(i=i.filter(r=>r.id!==t.notMe)),t.victims){const r=S.deTil(t.victims);i=i.filter(s=>r.includes(s.id))}if(t.tribe!=="AN"&&(i=i.filter(r=>r.isTribe(t.tribe))),t.canLevel&&(i=i.filter(r=>L.getCard(r.code).canLevel())),t.level!=="LA"){const r=D.levelTargetToLevel(t.level);i=i.filter(s=>r.includes(s.level))}t.cardCode&&(i=i.filter(r=>L.getCard(r.code).cardCode()===t.cardCode)),t.canDefender&&(i=i.filter(r=>!r.negateDefender)),t.hasDefender&&(i=i.filter(r=>r.defender)),t.canArmor&&(i=i.filter(r=>!r.negateArmor)),t.hasArmor&&(i=i.filter(r=>r.armor>0)),t.canMove&&(i=i.filter(r=>!r.negateMobility)),t.hasMobility&&(i=i.filter(r=>r.mobility>0)),t.hasPoison&&(i=i.filter(r=>r.poison>0)),t.canRegen&&(i=i.filter(r=>!r.negateRegen)),t.hasRegen&&(i=i.filter(r=>r.regen>0)),t.faction!=="X"&&(i=i.filter(r=>r.faction===t.faction))}return i}cst2cs={["A"]:()=>{throw new Error("goof passed any to field state target mapper")},["V"]:()=>"A",["D"]:()=>"D",["R"]:()=>"R"};creatStatusTargetToCS(t){return this.cst2cs[t]()}emptyLanes(t){return this.laneIdx.filter(i=>!this.field.find(s=>s.owner===t&&s.lane===i&&s.status==="A"))}oppositeLane(t){return 6-t}adjacentPositions(t){return[[2],[1,3],[2,4],[3,5],[4]][t-1]}canMove(t){return t.mobility>0&&t.mobilityAvailable&&(!t.sleeping||t.aggressive)?this.emptyLanes(t.owner).filter(i=>Math.abs(t.lane-i)<=t.mobility):[]}fling(t){const i=this.emptyLanes(t.owner),r=i.length;r>0&&t.move(i[S.randInt(0,r)])}birth(t,i,r,s=0,c=void 0){if(i==="S"){const w=this.emptyLanes(r);if(w.length===0)return;s=w[S.randInt(0,w.length)]}else if(i==="P"&&!this.emptyLanes(r).includes(s))return;const f=typeof t=="string"?L.getCard(t):t,m=f.jr3(r,s);if(r===k.getActiveB()&&I.birthRegistrar(m.id),i==="F"||i==="R"){const w=this.searchByLane(s,r);if(w){const R=p.new().crd(w.code).txt(" was replaced");i==="R"?R.txt(" with ").crd(m.code).txt(".").go():R.txt(".").go(),w.status="R",x.addEvents($.replaced(m,w))}}this.field.push(m);const A=$.enterField(m);return A.forged=i==="F",f.formation&&m.lane!==1&&m.lane!==5&&(A.formation=m.adjacent.every(w=>!S.isUn(this.searchByLane(w,r)))),this.birthOrder.push({creatId:m.id,time:c||M.tick()}),x.addEvents(A),m.enforceEffects("PH"),ce.positionChange(r),m}findBirthTime(t){const i=this.birthOrder.filter(r=>r.creatId===t).map(r=>r.time);if(i.length!==0)return i.length>1&&console.warn("wery curious, more than one birth record for creat "+t),i[0]}qActiveCreats(){return this.creatByTarget(y.crTarg())}qPlayerCreats(t){const i=y.crTarg();return i.player=k.toTarget(t),this.creatByTarget(i)}ddf1(){return this.creatByTarget(y.crFriendTarg())}qEnemyCreats(){return this.creatByTarget(y.crEnemyTarg())}}const g=new na;class oa{creatFightState(t,i){return t?i===1||t.defender||t.sleeping&&!t.aggressive?1:i===0?2:t.extraBattles>0?(t.extraBattles-=1,2):1:0}dukeItOut(t,i,r,s,c){if(t>0){let f=0;if(i>0){const m=t===2&&r.breakthrough;f=s.hurtBattle(c,r,m)}else t===2&&(f=c);f>0&&k.hurtBattle(!r.owner,f,r)}}fight(t){const i=!ot.simOn;i&&p.add("FIGHT!");let r=2,s=1;t&&(I.mainBattle=!1,r=0,s=0);const c=k.getActiveB(),f=[],m=[];g.laneIdx.forEach(w=>{const R=g.searchByLane(w,c),U=g.searchByLane(6-w,!c),z=this.creatFightState(R,r),Q=this.creatFightState(U,s);(z===2||Q===2)&&(m.push([z,Q,R,U,R?.attack||0],[Q,z,U,R,U?.attack||0]),z===2&&(I.ffs++,f.push([w,c])),Q===2&&f.push([g.oppositeLane(w),!c]))}),this.barking&&f.length>0&&i&&S.dogBark();let A;i?A=yt.drawCombat(f):A=Promise.resolve(),A.then(()=>{m.forEach(w=>this.dukeItOut(...w)),ce.playerHealthChange(),W.deathCheck(),x.type="C0",T.actionDone()})}barking=!0}const fi=new oa;class ha{aiMode=!1;aiActive=!1;winFlag=0;ui=this.freshUI();idnum=0;clock=0;genId(){return this.idnum++,"@"+this.idnum.toString(36)}tick(){return this.clock++,this.clock}getState(){return{i:this.idnum,t:this.clock}}setState(t,i){this.idnum=t,this.clock=i}newGame(t,i){this.idnum=0,this.clock=0,fi.barking=S.options.bark,k.activePlayer=S.randInt(0,2)===0,this.aiActive=!k.activePlayer&&this.aiMode,k.isLocalA=this.aiMode||k.activePlayer,T.actionHistory=[],ot.turnSims=0,ot.turnTime=0,g.reset(),W.reset(),x.reset(),this.ui=this.freshUI(),I.firstTurn=!0,this.winFlag=0;const r=k.nameOSaurus();k.initPlayer(!0,t,"Forgy McGhee",25),k.initPlayer(!1,i,r[0],r[1]),p.setup(),p.add("Ready...FIGHT!"),I.startTurn()}freshUI(){return{handScrollLeft:0,detailStack:[],deckContents:[],deckScroll:0,deckSummary:!1,animating:!1}}}const M=new ha;class la{loglist;you=!0;localPlayerKey="";oppPlayerKey="";localPlayerSpan="";oppPlayerSpan="";constructor(){this.loglist=document.getElementById("loglist")}setup(){this.you=k.getLocalB(),this.localPlayerKey=this.you?"^pa":"^pb",this.oppPlayerKey=this.you?"^pb":"^pa",this.localPlayerSpan=this.span(k.toPlayer(this.you).name,"green"),this.oppPlayerSpan=this.span(k.toPlayer(!this.you).name,"red")}addLi(t){const i=document.createElement("li");i.innerHTML=t,this.loglist.appendChild(i),i.scrollIntoView({behavior:"smooth",block:"end"})}span(t,i,r=""){const s=r.length>0?` onclick="sfapi.details('${r}')"`:"";return`<span class="${i}"${s}>${t}</span>`}add(t){this.addLi(t)}debug(t,i=!0){(i||S.options.debug)&&this.addLi(this.span(t,"debug"))}clearAll(){this.loglist.innerHTML=""}new(){return new Ni}factMap={["A"]:"all",["N"]:"nek",["T"]:"tem",["U"]:"ute"};parseCards(t){let i=!0;for(;i;){const r=t.indexOf("^c");if(r===-1)i=!1;else{const s=t.slice(r+2,r+6);if(s==="POIS")t=t.replaceAll("^c"+s,this.span("Poison","green"));else{const c=L.getCard(s);t=t.replaceAll("^c"+s,this.span(`${c.name} ${c.level}`,this.factMap[c.faction],s))}}}return t}parse(t){const r=t.guts.replaceAll(this.localPlayerKey,this.localPlayerSpan).replaceAll(this.oppPlayerKey,this.oppPlayerSpan),s=this.parseCards(r);this.add(s)}cardText(t){let i;if(t.type==="C"){const r=t,s=[];r.iRegen>0&&s.push("Regenerate "+r.iRegen),r.iArmor>0&&s.push("Armor "+r.iArmor),r.iMobile>0&&s.push("Mobility "+r.iMobile),r.iBT&&s.push("Breakthrough"),r.iDefend&&s.push("Defender"),r.iAggro&&s.push("Aggressive"),r.consistent&&s.push("Consistent"),s.length>0&&s.push(""),i=s.join(". ")+t.text}else i=t.text;return(t.free?"Free. ":"")+(t.overload?"Overload. ":"")+i}cardTextSplit(t){const i=[];if(t.free&&i.push("Free"),t.consistent&&i.push("Consistent"),t.overload&&i.push("Overload"),t.type==="C"){const r=t;r.iRegen>0&&i.push("Regenerate "+r.iRegen),r.iArmor>0&&i.push("Armor "+r.iArmor),r.iMobile>0&&i.push("Mobility "+r.iMobile),r.iBT&&i.push("Breakthrough"),r.iDefend&&i.push("Defender"),r.iAggro&&i.push("Aggressive")}if(t.text.length>0&&i.push(...t.text.split("~")),t.level===1){const r=t.cardCode(),s=ri.find(c=>c[0]===r);if(s){let c;const f=s[1];f.length===2&&f[0]===f[1]?c="2x "+L.getCard(`${f[0]}1`).name:c=f.map(m=>L.getCard(`${m}1`).name).join(", "),i.push("Solbind: "+c)}}return i}factionText(t){switch(t){case "A":return"Alloyin";case "N":return"Nekrium";case "T":return"Tempys";case "U":return"Uterra";case "X":return""}}cardTypeText(t){return t==="C"?"Creature":"Spell"}rarityText(t){switch(t){case "C":return"Common";case "R":return"Rare";case "H":return"Heroic";case "L":return"Legendary";case "T":return"Token"}}levelGateText(t){return t===1?"level 1 ":t===2?"level 2 or lower ":""}jr9(t,i,r=!1){return t!==0&&i!==0?`${this.bufferson(t,!0)}${r?",":" and"} ${this.bufferson(i,!1)}`:t!==0?this.bufferson(t,!0):this.bufferson(i,!1)}bufferson(t,i){return`${t>0?"+":""}${t} ${i?"attack":"health"}`}dbdtac(t=-1){return`deals battle damage to a ${t===-1?"":this.levelGateText(t)}creature`}dbdtap(){return"deals battle damage to a player"}daluac(t=!1){return(t?"D":"d")+"iscard and level up a card"}forglied(t){return t==="X"?"Forge":`Allied ${this.factionText(t)}`}fastName(t){t.length===3&&(console.warn("HEY a 3 char card code was passed to fastName, why?: "+t),t=`${t}1`);const i=L.getCard(t);return i.name+" "+i.level}pName(t){return t?"A":"B"}tokName(t){return`${t.iAttack}/${t.iHealth} ${t.name}`}cardActionText(t){let i=`Card (${this.fastName(t.host)}) `;if(t.zone==="F"){const r=t,s=r.playerA?r.lane:6-r.lane,c=g.searchByFSA(r),f=c?this.fastName(c.code):"Empty";i+=`Lane ${s}${this.pName(r.playerA)} ${f}`}else if(t.zone==="H"){const r=t;i+=`Hand (${this.fastName(r.card)})`}else if(t.zone==="P"){const r=t;i+=`Player (${this.pName(r.playerA)})`}else t.zone==="R"?i+="Full Board":t.zone==="B"?i+="Button":t.zone==="N"&&(i+="Special");return i}actionText(t){switch(t.key){case "ACTV":return`Activate (${this.fastName(t.host)})`;case "CARD":return this.cardActionText(t);case "FITE":return"Fight";case "FORG":return`Forge to Lane ${6-t.lane}`;case "HDSC":return`Hand Discard (${this.fastName(t.host)})`;case "HPLY":const r=t;return`Play (${this.fastName(r.card)})`;case "MEND":return"Move End";case "MOVE":return"Move Start";case "NOTR":return"Pick None";case "ENDT":return"Donethanks";case "CANC":return"Cancel";default:return t.key}}tribeT={["AN"]:"Any",["AB"]:"Abomination",["AG"]:"Angel",["AS"]:"Asir",["BR"]:"Bear",["BE"]:"Beast",["CT"]:"Cat",["CR"]:"Chrysalis",["CY"]:"Cyborg",["DF"]:"Darkforged",["DM"]:"Demon",["DN"]:"Dinosaur",["DG"]:"Dragon",["DK"]:"Drakin",["DY"]:"Dryad",["ER"]:"Earth",["EL"]:"Elemental",["EN"]:"Energeist",["FY"]:"Fairy",["FR"]:"Fire",["FB"]:"Forgeborn",["FT"]:"Frost",["GT"]:"Giant",["GN"]:"Gnome",["GL"]:"Golem",["GG"]:"Grimgaunt",["GD"]:"Guardian",["HM"]:"Human",["HY"]:"Hydra",["IC"]:"Ice",["IN"]:"Insect",["LT"]:"Lightning",["LP"]:"Lupin",["MT"]:"Manticore",["MC"]:"Mech",["MM"]:"Metamind",["NG"]:"Naga",["OZ"]:"Ooze",["PX"]:"Phoenix",["PL"]:"Plant",["RM"]:"Ram",["RB"]:"Robot",["SY"]:"Satyr",["SE"]:"Seraph",["SH"]:"Shaman",["SS"]:"Shapeshifter",["SK"]:"Skeleton",["SN"]:"Snake",["SP"]:"Spider",["ST"]:"Spirit",["TG"]:"Tigrin",["TK"]:"Tuskin",["VP"]:"Vampire",["WD"]:"Wanderer",["WT"]:"Water",["WB"]:"Web",["WN"]:"Wind",["WF"]:"Wolf",["WR"]:"Wurm",["YT"]:"Yeti",["ZB"]:"Zombie"};tribeText(t){return this.tribeT[t]}}const p=new la;class ca{handleMainMenuButton(t){t.param==="D"?(bt.setMode("D"),S.options.wasDrafting=!0,yt.playmatSetup(),pt.initDraft()):t.param==="C"?(bt.setMode("C"),S.options.wasDrafting=!1,yt.playmatSetup(),Rt.initConstructed()):t.param==="I"?(bt.setMode("I"),yt.drawAll()):window.open("deckbuilder.html")}handleMenuButton(t){const i=S.deTil(t.param),r=i[0];let s=!0;if(r==="RP")s=!1,p.clearAll(),S.options.wasDrafting?pt.replay():Rt.replay();else if(r==="MM")bt.setMode("M"),p.clearAll();else if(r==="CN"||r==="CP"||r==="CX"||r==="CR"||r==="CI"||r==="CV"||r==="LK")Rt.handleMenuPick(r,i[1]);else if(r==="DN"||r==="DR"||r==="DI"||r==="DV"||r==="LD"||r==="GP"||r==="OD"||r==="DT")pt.handleMenuPick(r,i[1]);else if(r==="alloyin"||r==="nekrium"||r==="tempys"||r==="uterra"||r==="vanilla")S.options.playmat=r,S.writeStorage("playmat",r);else if(r==="HH")S.toggleOption("highHealth");else if(r==="CH")S.toggleOption("cheater");else if(r==="BB")S.toggleOption("bark");else if(t.param==="BC")S.toggleOption("bigCards");else if(r==="90"){const c=S.options.scale==="90"?"100":"90";yt.changeScale(c)}else r==="RU"?(s=!1,window.open("https://grousewood-games.github.io/solforge/docs/rules")):r==="FQ"?(s=!1,window.open("https://grousewood-games.github.io/solforge/docs/faq")):(s=!1,console.error("missing handler for menu button param "+t.param));s&&yt.drawAll()}handleUIButton(t){t.param==="DM"?(S.setClickMode("I"),yt.drawAll()):t.param==="TM"?(S.setClickMode("T"),yt.drawAll()):t.param==="EX"?(bt.setMode("X"),T.ddf5(this.generateExitActions())):console.error("missing handler for common button param "+t.param)}generateExitActions(){const t=y.basicAction("CANC");return t.param="PM",[t,y.menuButtonAction("MM")]}}const Je=new ca;class da{stack=["M"];setMode(t){this.deetMode(t)||t==="X"||t==="S"?this.stack.push(t):(this.stack=[t],t==="G"?(st.get("game-ui").clear(),yt.setBackground("playmat")):t==="D"||t==="C"||t==="I"?(st.get("game-ui").clear(),yt.setBackground("blueface")):t==="M"&&(yt.clearAll(),yt.setBackground("mainmenu")))}popMode(){this.stack.pop()}get mode(){const t=this.stack;return t[t.length-1]}get isDetailMode(){return this.deetMode(this.mode)}get baseMode(){return this.stack[0]}deetMode(t){return t==="R"||t==="T"}}const bt=new da;class ua{constructor(){this.loader=document.getElementById("fileupload"),this.loader.addEventListener("change",t=>this.loadInputHandler(t))}shuffleDeck(t){const i=k.toPlayer(t),r=[],s=[];if(i.deck.forEach(c=>{L.getCard(c).consistent?r.push(c):s.push(c)}),r.length===0)this.shuffle(i.deck);else{this.shuffle(s);const c=20-r.length,f=r.concat(s.slice(0,c));this.shuffle(f),i.deck=s.slice(c).concat(f)}}shuffle(t){const i=t.length,r=(s,c)=>{const f=t[s];t[s]=t[c],t[c]=f};if(i>0){let s,c;const f=i*4;for(let m=0;m<f;m++)s=S.randInt(0,i),c=S.randInt(0,i),r(s,c)}}randomDeck(t,i,r){const s=t===i;let c;return s?c=this.ripper(t,r,30):c=this.ripper(t,r,15).concat(this.ripper(i,r,15)),{cards:c,name:"Random Nonsense",factions:s?[t]:[t,i]}}testies(t){const i=this.ripper(this.randFaction(),3,15);return i.push({card:t,num:15}),{cards:i,name:"Test Fun",factions:[]}}testies2(t,i){return{cards:[{card:t,num:15},{card:i,num:15}],name:"Test Fun",factions:[]}}treatsAbound(t){const i=t?1:S.randInt(1,4);return this.randomDeck(this.randFaction(),this.randFaction(),i)}randFaction(){return Fe[S.randInt(0,4)]}randomStockDeck(){const t=ye.map(r=>r.decks).flat(),i=S.randInt(0,t.length);return t[i]}stockDeckByName(t,i){let r;if(ye.some(s=>s.id===t?s.decks.some(c=>{c.name===i&&(r=c)}):!1),r)return r;throw new Error("Stock Deck not found: Set: "+t+"; Name: "+i)}ripper(t,i,r){const s=[[15,8,5],[30,15,10]],c=this.getDeckCards([],[t]),f=[],m=s[r===15?0:1][i-1];for(;f.length<m;){const w=S.randInt(0,c.length),R=c[w];f.find(U=>U===R)||f.push(R)}const A=f.map(w=>({card:w,num:i}));return i===2&&r===15&&(A[0].num=1),A}deckify(t){const i=t.map(r=>{const s=ri.find(c=>c[0]===r);return s?s[1]:[]}).flat();return t.concat(i).map(r=>`${r}1`)}parseDeck(t){const i=t.map(r=>Array(r.num).fill(r.card)).flat();return this.deckify(i)}validDeck(t){const i={};t.forEach(w=>{i[w.card]?i[w.card]+=w.num:i[w.card]=w.num});const r=Object.entries(i).map(w=>({card:w[0],num:w[1]})),s=r.map(w=>w.num).reduce((w,R)=>w+R,0);if(s!==30)return"Deck must have 30 cards, found "+s;const c=[];let f="";if(r.some(w=>{const R=It.findIndex(U=>U.c===w.card);return R===-1?(f=w.card,!0):(c.push(It[R].f),!1)}))return`Invalid card code: '${f}'`;let m=0;if(r.some(w=>w.num>3?(f=w.card,m=w.num,!0):!1))return`${m} copies of '${f}' ${p.fastName(f).slice(0,-2)}`;const A=[...new Set(c)];return A.length>2?"Deck must have two or less factions, found: "+A.join():""}getDeckCards(t=[],i=[],r=[]){return t.length===0&&i.length===0&&r.length===0?It.map(s=>s.c):t.length>0&&i.length>0&&r.length===0?It.filter(s=>t.includes(s.r)&&i.includes(s.f)).map(s=>s.c):t.length>0&&i.length===0&&r.length===0?It.filter(s=>t.includes(s.r)).map(s=>s.c):t.length===0&&i.length>0&&r.length===0?It.filter(s=>i.includes(s.f)).map(s=>s.c):t.length>0&&i.length>0&&r.length>0?It.filter(s=>t.includes(s.r)&&i.includes(s.f)&&r.includes(Math.floor(s.s))).map(s=>s.c):t.length>0&&i.length===0&&r.length>0?It.filter(s=>t.includes(s.r)&&r.includes(Math.floor(s.s))).map(s=>s.c):t.length===0&&i.length>0&&r.length>0?It.filter(s=>i.includes(s.f)&&r.includes(Math.floor(s.s))).map(s=>s.c):It.filter(s=>r.includes(Math.floor(s.s))).map(s=>s.c)}getCardFaction(t){const i=It.find(r=>r.c===t);return i?i.f:"X"}getCardRarity(t){const i=It.find(r=>r.c===t);return i?i.r:"T"}cardStats(){Fe.forEach(t=>{const i=`${p.factionText(t)} total: ${this.getDeckCards(void 0,[t]).length}; `,r=pe.map(s=>`${p.rarityText(s)}: ${this.getDeckCards([s],[t]).length}`).join("; ");console.log(i+r)})}loadPromise=new Re;fileguts="";loader;async loadFromFile(){if(this.loadPromise=new Re,this.loader.click(),await this.loadPromise.getPromise(),this.fileguts==="")return"";if(this.fileguts.startsWith("!")){const s=this.fileguts.substring(1);return this.fileguts="",s}const t=JSON.parse(this.fileguts);this.fileguts="";const i=t.cards,r=this.validDeck(i);return r||t}readError(t){this.fileguts="!"+t,this.loadPromise.resolveMe()}loadInputHandler(t){const i=this.loader.files;if(i&&i.length>0){const s=i[0];var r=new FileReader;r.onload=c=>{try{var f=r.result;if(f){var m=JSON.parse(new TextDecoder("utf-8").decode(new Uint8Array(f)));m.cards&&Array.isArray(m.cards)&&!m.cards.some(A=>!(A&&typeof A.card=="string"&&Number.isInteger(A.num)))?(this.fileguts=JSON.stringify(m),this.loadPromise.resolveMe()):this.readError("File format is invalid.")}else this.readError("File read was empty.")}catch(A){console.error(A),this.readError("Error reading file.")}};try{r.readAsArrayBuffer(s)}catch{this.readError("Could not read file.")}}else this.loadPromise.resolveMe()}}const Ut=new ua;class fa{phase="ST";enterMainPhase(){this.phase="MN";const t=k.getActive(),i=this.getMainPhaseActions(t);M.aiActive&&ot.hitMainPhase(),T.ddf5(i,!0)}async whatNext(t=!1){if(M.winFlag!==0){ot.simOn?(ot.simEndpoint(M.winFlag===1?"L":"W"),M.winFlag=0):(T.actionHistory=[],M.aiActive=!1,M.ui.animating=!1,await yt.drawAll());return}if(await yt.drawAll(),T.actionHistory.length>0)T.ddf5();else if(t)bt.setMode("S"),yt.drawAll();else if(x.getNextTrigger())Qe.resolve(x.getNextTrigger());else if(!x.deathCheck)W.deathCheck(),this.whatNext();else if(x.events.length>0)x.startBatch();else switch(g.purge(),W.purge(),this.phase){case "MN":this.enterMainPhase();break;case "ET":this.phase="PT",x.addEvents($.player("PTN",k.getActiveB())),Et.expireMods(),this.whatNext();break;case "PT":I.passTheTurn();break;case "WT":console.error("Hit unhandled waiting phase"),this.phase="MN",this.whatNext();break;case "ST":ot.simOn?ot.simEndpoint("T"):(this.phase="MN",ot.cheater()?S.sleep(500).then(()=>this.whatNext()):S.sleep(100).then(()=>this.whatNext()));break}}expireatron(t,i,r,s){i.mods.forEach(c=>{c.expiry===s?c.expiry=r:c.expiry===r&&t.push([i,c])})}expireMods(){const t=g.creatByTarget(y.crTarg());t.push(k.playerA,k.playerB);let i=[];this.phase==="PT"?t.forEach(r=>{this.expireatron(i,r,"ET","EN")}):this.phase==="ST"&&t.forEach(r=>{this.expireatron(i,r,"ST","SN")}),i.length>0&&(i.forEach(r=>{const s=r[0];s instanceof Pe?s.expireMod(r[1]):k.expireMod(s,r[1])}),ce.enforceAllNonPositionCreatureEffects())}getMainPhaseActions(t){const i=this.getHandActions(t),r=this.getFieldActions(t);let s=I.mainBattle,c="M";return s||(s=g.ddf1().some(m=>m.extraBattles>0&&m.isActive&&!m.defender),c="E"),s&&i.push({key:"FITE",zone:"B",param:c,host:""}),s||i.push({key:"ENDT",zone:"B",param:"",host:""}),[i,r].flat()}getHandActions(t){const i=[...new Set(t.hand)],r=[],s=[];i.forEach(A=>{L.getCard(A).free?r.push(A):s.push(A)});const c=r.map(A=>[A,"FREE"]);I.freeCards.forEach(A=>{D.cardByTarget(s,A.condition).forEach(R=>{c.push([R[0],A.id]),s.splice(s.indexOf(R[0]),1)})}),c.push(...s.map(A=>[A,""]));const f=I.regularPlays>0;let m=t.hand.map((A,w)=>[A,w]);return f||(m=m.filter(A=>!s.includes(A[0]))),m.map(A=>{const w=c.find(R=>R[0]===A[0]);return w||console.error("No cost found for card"+A[0]),y.handSelectAction("HPLY",A[0],w[1],A[1])})}getFieldActions(t){const i=g.qPlayerCreats(t.isPlayerA),r=i.filter(c=>g.canMove(c).length>0).map(c=>y.fieldSelectAction("MOVE",c.lane,c.owner)),s=i.filter(c=>c.isActive&&c.activationAvailable?L.getCard(c.code).canActivate(c):!1).map(c=>{const f=y.fieldSelectAction("ACTV",c.lane,c.owner);return f.host=c.code,f.param=c.id,f});return r.forEach(c=>{const f=s.findIndex(m=>m.lane===c.lane);f>-1&&(s.splice(f,1),c.param="ACTV")}),r.concat(s)}}const Et=new fa;class ga{playerA;playerB;activePlayer;isLocalA;constructor(){this.playerA=this.newPlayer(!0),this.playerB=this.newPlayer(!1),this.activePlayer=!0,this.isLocalA=!0}getPlayerState(t){return{deck:t.deck,discard:t.discard,hand:t.hand,health:t.health,triggers:t.triggers,turn:t.turn,rank:t.rank,poison:t.poison,armor:t.armor,armorDmg:t.armorDmg,mods:t.mods,effects:t.effects}}setPlayerState(t,i){i.deck=t.deck,i.discard=t.discard,i.hand=t.hand,i.health=t.health,i.triggers=t.triggers,i.turn=t.turn,i.rank=t.rank,i.poison=t.poison,i.mods=t.mods,i.effects=t.effects,i.armor=t.armor,i.armorDmg=t.armorDmg}getState(){const t={pA:this.getPlayerState(this.playerA),pB:this.getPlayerState(this.playerB),actP:this.activePlayer};return JSON.stringify(t)}setState(t){const i=JSON.parse(t);this.setPlayerState(i.pA,this.playerA),this.setPlayerState(i.pB,this.playerB),this.activePlayer=i.actP}pt2pb={["X"]:()=>{throw new Error("goof passed any to player target boolean-o-fier")},["A"]:()=>!0,["B"]:()=>!1,["F"]:()=>this.getActiveB(),["E"]:()=>!this.getActiveB()};b2p(t){return t?this.playerA:this.playerB}toPlayer(t){return typeof t=="boolean"?this.b2p(t):typeof t=="string"?this.b2p(this.pt2pb[t]()):t}toBool(t){return typeof t=="boolean"?t:typeof t=="string"?this.pt2pb[t]():t.isPlayerA}toTarget(t){return typeof t=="string"?t:(typeof t=="boolean"?t:t.isPlayerA)?"A":"B"}getActive(){return this.b2p(this.activePlayer)}getActiveB(){return this.activePlayer}getLocal(){return this.b2p(this.isLocalA)}getLocalB(){return this.isLocalA}hurtPlayer(t,i){if(i<1)return 0;const r=this.totalArmor(t),s=Math.max(Math.min(i,r-t.armorDmg),0);let c=i-s;return t.armorDmg+=s,t.health-=c,c}hurtDirect(t,i,r){const s=this.toPlayer(t),c=this.hurtPlayer(s,i);c>0&&(p.new().crd(r).txt(` dealt ${c} dmg to `).plr(s).txt(".").go(),x.addEvents($.damage(!1,c,s.health,!1,!1,s.isPlayerA,void 0)),ce.playerHealthChange())}hurtBattle(t,i,r){const s=this.toPlayer(t),c=this.hurtPlayer(s,i);c>0&&(p.new().crd(r.code).txt(` dealt ${c} battle dmg to `).plr(s).txt(".").go(),x.addEvents($.damage(!0,c,s.health,!0,!1,s.isPlayerA,r)))}heal(t,i,r){const s=this.toPlayer(t);s.health+=i,p.new().plr(s).txt(` gained ${i} health from `).crd(r).txt(".").go(),x.addEvents($.playerHeal(s.isPlayerA,i)),ce.playerHealthChange()}drawCard(t,i){const r=this.toPlayer(t);let s=!0;for(let c=0;c<i;c++){const f=r.deck.pop();if(f)r.hand.push(f);else if(s){s=!1;const m=[],A=[];r.discard.forEach(w=>{parseInt(w.slice(3,4))>r.rank?A.push(w):m.push(w)}),m.length>0&&(r.deck=m,r.discard=A,Ut.shuffle(r.deck),r.hand.push(r.deck.pop()))}}}totalArmor(t){const i=this.toPlayer(t);return this.modBool(i,"NA")?0:i.armor+this.modSum(i,"AR")}totalPoison(t){const i=this.toPlayer(t);return i.poison+this.modSum(i,"PN")}modSum(t,i){const r=this.toPlayer(t);return y.modSum(r.mods,i)}modBool(t,i){const r=this.toPlayer(t);return y.modBool(r.mods,i)}hasMod(t,i){const r=this.toPlayer(t);return y.hasModG(r.mods,i)}addMod(t,i){this.toPlayer(t).mods.push(i)}addModSafe(t,i){const r=this.toPlayer(t);y.hasMod(r.mods,i)||this.addMod(r,i)}removeMod(t,i){const r=this.toPlayer(t);r.mods=r.mods.filter(s=>s.granter===i?(s.type==="AR"&&(r.armorDmg=Math.max(0,r.armorDmg-s.value)),!1):!0)}removeModSafe(t,i){const r=this.toPlayer(t);this.hasMod(r,i)&&this.removeMod(r,i)}expireMod(t,i){const r=this.toPlayer(t);r.mods.splice(y.modIdx(r.mods,i),1)}enforceEffects(t){const i=this.toPlayer(t);i.effects.forEach(r=>L.getCard(r.logicCode).enforcePlayerEffect(r,i))}activeCardItems(t){const i=this.toPlayer(t),r=i.triggers.filter(c=>!(c.customCode==="AB"||c.type==="NT")).map(c=>c.logicCode.startsWith("EPH")?"EPS"+c.logicCode.slice(3,4):c.logicCode),s=i.effects.map(c=>c.logicCode);return r.concat(s)}newPlayer(t){return{hand:[],deck:[],discard:[],effects:[],isPlayerA:t,health:120,mods:[],name:"",nameOffset:0,triggers:[],turn:1,rank:1,armor:0,armorDmg:0,poison:0,avatar:Math.floor(Math.random()*17)}}initPlayer(t,i,r,s){const c=this.toPlayer(t);c.name=r,c.nameOffset=s,c.turn=1,c.rank=1,c.health=S.options.highHealth?360:120,c.discard=[],c.deck=Ut.parseDeck(i),c.mods=[],c.triggers=[],c.effects=[],c.poison=0,c.armor=0,c.armorDmg=0,this.ambushScan(c),Ut.shuffleDeck(c),c.hand=c.deck.splice(-5,5)}ambushScan(t){this.boosh(t,"LLD","PC"),this.boosh(t,"LLG","MV"),this.boosh(t,"LLS","EF"),this.boosh(t,"LLT","LG"),this.boosh(t,"LLV","DS")}boosh(t,i,r){const s=i+"1";if(t.deck.includes(s)){const c=y.trigger(r,s);c.cardCode=s,c.customCode="AB",t.triggers.push(c)}}nameOSaurus(){const t=[["The Garmgunt",5],["Dr. Lucksack",15],["Sgt. Misplay",22],["Salty O'Teary",12],["M.V.P. Sprout",19],["Uncle Punchy",7],["Yesetherian",20],["Rubbish Asir",20],["Hogwash Druid",0],["Offal Savant",15],["Filth Knight",17],["Dirty Mystic",16],["Ether Buffoon",6],["Nexus Dimwit",12],["Hairy Poppins",11],["Al E. Gator",26],["Anita Bath",28],["Bennie Factor",9],["Chris P. Bacon",9],["Don Keigh",29],["Earl E. Bird",25],["Hugh Jass",34],["Jay Walker",28],["Barb Dwyer",22],["Robyn Banks",18],["Anna Graham",9],["Holly Graham",6],["Justin Case",26],["Sir Loins",39]],i=t[S.randInt(0,t.length)];return[i[0],i[1]+18]}}const k=new ga;class ma{stateStack=[];popCheck(){if(this.stateStack.length===0)throw new Error("Attempted to manipulate empty stack")}saveState(){const t={action:T.getState(),aiInPhase:ot.inPhase,batch:x.getState(),death:W.getState(),field:g.getState(),game:M.getState(),mode:JSON.stringify(bt.stack),phase:Et.phase,player:k.getState(),turn:I.getState()};this.stateStack.push(t)}restoreState(){this.popCheck();const t=this.stateStack[this.stateStack.length-1];T.setState(t.action),ot.inPhase=t.aiInPhase,x.setState(t.batch),W.setState(t.death),g.setState(t.field),M.setState(t.game.i,t.game.t),bt.stack=JSON.parse(t.mode),Et.phase=t.phase,k.setState(t.player),I.setState(t.turn)}popState(){this.popCheck(),this.stateStack.pop()}}const ve=new ma;class pa{toActions(t){return(Array.isArray(t)?t:[t]).map(r=>{const s=this.actionTargGuts(r);return s.forEach(c=>{c.host=r.host,c.param=r.param,c.hint=r.hint}),s}).flat()}actionTargGuts(t){if(t.target==="TH")return this.deckByTarget(t).map(i=>y.handSelectAction(t.key,i[0],"",i[1]));if(t.target==="TF"){if(t.field==="O")return g.creatByTarget(t).map(i=>y.fieldSelectAction(t.key,i.lane,i.owner));{const i=t.player==="X"?[!0,!1]:[k.toBool(t.player)],r=S.isUn(t.lanes)?g.laneIdx:this.lanesToArr(t.lanes);if(t.field==="A")return i.map(s=>r.map(c=>y.fieldSelectAction(t.key,c,s))).flat();if(t.field==="E")return i.map(s=>g.emptyLanes(s).filter(c=>r.includes(c)).map(c=>y.fieldSelectAction(t.key,c,s))).flat()}}if(t.target==="TP")return t.player==="X"?[y.playerSelectAction(t.key,!0),y.playerSelectAction(t.key,!1)]:[y.playerSelectAction(t.key,k.toBool(t.player))];if(t.target==="TB")return[{key:t.key,zone:"B",host:t.host,param:""}];if(t.target==="TR")return[{key:t.key,zone:"R",host:t.host,param:""}];if(t.target==="TD")return[];throw new Error("Target encountered that doesnt have mappings to actions: "+t.target)}cardByTarget(t,i){let r=t.map((s,c)=>[s,c]);if(i){if(S.isUn(i.deckPositionSkip)||(r=r.filter(s=>s[1]!==i.deckPositionSkip)),i.faction!=="X"&&(r=r.filter(s=>L.getCard(s[0]).faction===i.faction)),i.tribe!=="AN"&&(r=r.filter(s=>{const c=L.getCard(s[0]);return c.type==="C"?c.isTribe(i.tribe):!1})),i.canLevel&&(r=r.filter(s=>L.getCard(s[0]).canLevel())),i.level!=="LA"){const s=D.levelTargetToLevel(i.level);r=r.filter(c=>{const f=parseInt(c[0].substring(3,4));return s.includes(f)})}if(i.card!=="A"){const s=i.card==="C"?"C":"S";r=r.filter(c=>L.getCard(c[0]).type===s),i.card==="C"&&!S.isUn(i.maxAttack)&&(r=r.filter(c=>L.getCard(c[0]).iAttack<=i.maxAttack))}i.cardCode&&(r=r.filter(s=>L.getCard(s[0]).cardCode()===i.cardCode))}return r}deckByTarget(t){const i=k.toPlayer(t.player);let r;if(t.target==="TH")r=i.hand;else if(t.target==="TD")r=i.discard;else if(t.target==="DK")r=i.deck;else throw new Error("bad target passed to deckByTarget: "+t.target);return this.cardByTarget(r,t)}buttonTarget(t,i="",r=""){return y.actionTarget("TB",t,i,r)}boardTarget(t,i){return y.actionTarget("TR",t,i,"")}ddf2(t){return t===1?"L1":t===2?"LN":"LA"}lt2l={["LA"]:()=>[1,2,3,4],["HR"]:()=>[1,2,3],["L1"]:()=>[1],["L2"]:()=>[2],["L3"]:()=>[3],["LN"]:()=>[1,2]};levelTargetToLevel(t){return this.lt2l[t]()}levelTargetTest(t,i){return this.levelTargetToLevel(t).includes(i)}levelTestCommon(t,i){return this.levelTargetTest(this.ddf2(i),t)}lanesToArr(t){return Array.isArray(t)?t:[t]}}const D=new pa;class ya{ddf8(t){return t.trigger.type==="FR"?this.forgeTriggerTest(t,!1):t.trigger.type==="VN"?this.vengeanceTriggerTest(t):t.trigger.type==="FK"?this.flankTriggerTest(t):t.trigger.type==="AS"?this.forgeTriggerTest(t,!0):t.trigger.type==="UP"?this.upgradeTriggerTest(t):t.trigger.type==="FM"?this.formationTriggerTest(t):t.trigger.type==="RD"?this.raidTriggerTest(t):t.trigger.type==="DM"&&t.event.code==="DMG"||t.trigger.type==="HG"&&t.event.code==="CHL"||t.trigger.type==="EF"&&t.event.code==="ENT"||t.trigger.type==="DS"&&t.event.code==="DIE"||t.trigger.type==="PC"&&t.event.code==="PLC"||t.trigger.type==="MV"&&t.event.code==="MOV"||t.trigger.type==="RP"&&t.event.code==="RPL"||t.trigger.type==="LG"&&t.event.code==="PHL"||t.trigger.type==="TS"&&t.event.code==="TRS"||t.trigger.type==="TE"&&t.event.code==="TRE"||t.trigger.type==="PT"&&t.event.code==="PTN"||t.trigger.type==="RU"&&t.event.code==="RKU"?this.generalTriggerTest(t):!1}resolve(t){t.trigger.interactive&&(t.host==="P"?console.error("Encountered player hosted trigger that is interactive!!"):x.iaTrigLane=g.jr5(t.creatId).lane),L.getCard(t.trigger.logicCode).jr8(t)}forgeTriggerTest(t,i){if(t.event.code==="ENT"&&t.event.forged){const r=g.jr5(t.creatId),s=r.id===t.event.creatId&&r.status==="A";return i&&s?!r.opposed:s}return!1}formationTriggerTest(t){if(t.event.code==="ENT"&&t.event.formation){const i=g.jr5(t.creatId);return i.id===t.event.creatId&&i.status==="A"}return!1}raidTriggerTest(t){if(t.event.code==="TRE"&&I.ffs>2){const i=g.jr5(t.creatId);return i.owner===t.event.playerA&&i.status==="A"}return!1}upgradeTriggerTest(t){if(t.event.code==="RPL"){const i=g.searchById(t.creatId);if(i)return i.id===t.event.creatId;console.warn("Upgrade trigger test could not find its creature",t)}return!1}vengeanceTriggerTest(t){if(t.event.code==="DIE"){const i=t.event,r=g.searchById(t.creatId);if(r)return r.status==="D"&&r.id===i.creatId;console.warn("Venegeance trigger test could not find its creature",t)}return!1}flankTriggerTest(t){if(t.event.code==="MOV"){const i=t.event,r=g.jr5(t.creatId);return r.status==="A"&&r.id===i.creatId}return!1}generalTriggerTest(t){return L.getCard(t.trigger.logicCode).ddf8(t)}}const Qe=new ya;class ba{firstTurn=!0;mainBattle=!0;deathsA=[];deathsB=[];ffs=0;regularPlays=2;cardsPlayed=0;freeCards=[];newPre=[];newPost=[];getState(){const t={mB:this.mainBattle,dA:this.deathsA,dB:this.deathsB,cP:this.cardsPlayed,ffs:this.ffs,fC:this.freeCards,rP:this.regularPlays,n1:this.newPre,n2:this.newPost};return JSON.stringify(t)}setState(t){const i=JSON.parse(t);this.mainBattle=i.mB,this.deathsA=i.dA,this.deathsB=i.dB,this.cardsPlayed=i.cP,this.ffs=i.ffs,this.freeCards=i.fC,this.regularPlays=i.rP,this.newPre=i.n1,this.newPost=i.n2}resetTurnData(){this.mainBattle=!0,this.deathsA=[],this.deathsB=[],this.ffs=0,this.regularPlays=2,this.cardsPlayed=0,this.freeCards=[],this.newPre=[],this.newPost=[],this.firstTurn&&(this.firstTurn=!1,this.regularPlays=1)}forgeCard(t,i,r,s){const c=this.cardPlayed(i,r,s),f=k.getActive();p.new().txt("Forged ").crd(c.code).txt(".").go(),g.birth(c,"F",f.isPlayerA,t.lane),T.actionDone()}levelAndDiscardA(t){return this.levelAndDiscard(t.card,t.position)}levelAndDiscard(t,i,r=!0,s="F"){const c=L.getCard(t),f=k.toPlayer(s);if(i>-1?f.hand.splice(i,1):p.debug("Bad play index: "+i+" ("+t+")"),!c.overload){const m=c.levelUpCard();f.discard.push(m),r&&m!==t&&p.new().plr(f).txt(" leveled a card.").go()}return c}cardPlayed(t,i,r,s=!1){const c=this.levelAndDiscard(t,r,s),f=k.getActive();if(i==="")this.regularPlays-=1;else if(i!=="FREE"){const m=this.freeCards.findIndex(A=>A.id===i);m>-1?this.freeCards.splice(m,1):console.error("Could not find free card rule!")}if(this.cardsPlayed+=1,!s){const m=$.playCard(t,f.isPlayerA);x.addEvents(m)}return c}passTheTurn(){if(k.activePlayer=!k.activePlayer,Et.phase="WT",M.aiMode){if(!ot.simOn)if(M.aiActive=!M.aiActive,M.aiActive)ot.turnSims=0,ot.turnTime=0;else{const t=`🤖: ${this.calma(ot.turnSims)} pontifications in ${(ot.turnTime/1e3).toFixed(1)} seconds.`;p.new().txt(t).go()}}else k.isLocalA=k.activePlayer;this.startTurn()}calma(t){let i=t.toString();return i.length<4?i:i.length>6?i.slice(0,-6)+","+i.slice(-6,-3)+","+i.slice(-3):i.slice(0,-3)+","+i.slice(-3)}startTurn(){const t="------";ot.log&&M.aiActive&&M.aiMode&&console.log(t+" AI Turn Start "+t),ot.simOn||(p.new().txt(t).go(),p.new().plr(k.getActiveB()).txt(" starts turn.").go()),this.resetTurnData(),Et.phase="ST",x.addEvents($.player("TRS",k.getActiveB())),Et.expireMods(),Et.whatNext(!M.aiMode)}endTurn(){const t=k.getActive();t.discard.push(...t.hand),t.hand=[],t.turn++;const i=t.turn>4;x.addEvents($.player("TRE",t.isPlayerA)),i&&(t.turn=1,t.rank++,p.new().plr(t).txt(" hits Rank "+t.rank+".").go(),x.addEvents($.player("RKU",t.isPlayerA)),t.deck.push(...t.discard),t.discard=[],Ut.shuffleDeck(t)),g.qActiveCreats().forEach(r=>{r.extraBattles=0}),k.drawCard(t,5),Et.phase="ET",T.actionDone()}mobility(t){const i=g.jr5(t.param);p.new().crd(i.code).txt(" moved.").go(),i.mobilityAvailable=!1,i.move(t.lane),T.actionDone()}allied(t,i){const r=i??k.getActive(),s=y.target("TH");return s.player=k.toTarget(r),s.faction=t,D.deckByTarget(s).length>0}patron(t){const i=y.target("TH");return i.player=k.toTarget(k.getActive()),i.faction=t,D.deckByTarget(i).length>2}freeCard(t){const i=y.freeCard(t);return this.freeCards.push(i),i}birthRegistrar(t){this.mainBattle?this.newPre.push(t):this.newPost.push(t)}}const I=new ba;class gi{id;dom;context;width;height;constructor(t){if(this.id=t,this.dom=document.getElementById(t),!this.dom)throw new Error(`Could not find canvas id ${t}`);this.context=this.dom.getContext("2d"),this.width=this.dom.width,this.height=this.dom.height,this.context.textBaseline="top",this.context.shadowOffsetX=1,this.context.shadowOffsetY=1}show(){this.dom.hidden=!1}hide(){this.dom.hidden=!0}get visible(){return!this.dom.hidden}clear(){this.context.clearRect(0,0,this.width,this.height)}sprite(t,i,r){this.context.drawImage(t,i,r)}updateScale(t){this.context.scale(t,t)}}class $t{getCanv(t){return t instanceof gi?t:st.get(t)}async drawSprite(t,i,r,s,c={}){const f=this.getCanv(t).context,m=await S.getSprite(S.imgRoot+i);let A=1;c&&(A=c.alpha??1),A<1&&(f.globalAlpha=A),f.drawImage(m,r,s,m.naturalWidth,m.naturalHeight),A<1&&(f.globalAlpha=1)}async drawText(t,i,r,s,c={}){const f=this.getCanv(t).context,m=c.fontSize??24;S.pxRatio===2&&(s=this.retinaTextY(s,m)),f.fillStyle=c.colour||"#000000",f.font=`${m}px ${c.fontName||"cinzel"}`,f.shadowColor=c.shadow?"#000000":"#00000000",f.fillText(i,r,s),f.shadowColor="#00000000"}async spriteNumber(t,i,r,s,c,f){let m=r-this.numOffset(i,c);const A=[];i.toString().split("").forEach(w=>{A.push(this.drawSprite(t,this.numSpriteUrl(w,c,f),m,s)),m+=this.numSize(w,c)}),await Promise.all(A)}async drawHighlight(t,i,r,s,c,f="#00FF00"){const m=f.length===7?f.concat("aa"):f,A=this.getCanv(t);A.context.strokeStyle=m,A.context.beginPath(),A.context.rect(i,r,s,c),A.context.stroke()}hlColour(t){return t==="CANC"?"#FF0000":"#00FF00"}drawRarity(t,i,r,s){return this.drawSprite(t,`icons/rarity/new/${p.rarityText(i).toLowerCase()}.png`,r,s)}drawFaction(t,i,r,s){const c=i==="T"?2:0;return this.drawSprite(t,`icons/faction/${p.factionText(i).toLowerCase()}.png`,r+c,s+3)}retinaTextY(t,i){let r;return i<21?r=6:i<27?r=7:r=8,t-r}smallNumSize={"-":7,0:10,1:9,2:10,3:8,4:10,5:9,6:10,7:9,8:8,9:9};bigNumSize={"-":8,0:13,1:9,2:13,3:11,4:14,5:12,6:12,7:12,8:12,9:12};numSize(t,i){return i==="S"?this.smallNumSize[t]:this.bigNumSize[t]}numOffset(t,i){const r=t.toString().split("").reduce((s,c)=>s+this.numSize(c,i),0)-(i==="B"?2:1);return Math.floor(r/2)}numSpriteUrl(t,i,r){return`text/nums/${i}/${r}/${t}.png`}haze="#222222d8"}class Te extends $t{async drawButton(t,i,r,s,c,f=7,m=!1,A=!0){let w,R;m?(w="ui/button/menu_on.png",R="#d7fc03"):(w="ui/button/menu_off.png",R="#00DEF7");const U=this.buttonBounds(i,r);if(await this.drawSprite(t,w,U[0],U[1]),await this.drawText(t,c,U[0]+7+f,U[1]+24,{colour:R,fontSize:30}),!m||A){const z=new ut(s,...U,rt.Both);et.add(z)}}async buttonMaker(t,i,r,s,c,f=7,m=!1,A=!0){const w={key:"MNBT",zone:"N",host:"",param:s};await this.drawButton(t,i,r,w,c,f,m,A)}buttonBounds(t,i){return[t-7,i-7,232,69]}}class _e extends $t{async makeIconButton(t,i,r,s){let f;f=`ui/button/ui_${s}.png`,await this.drawSprite(t,f,i,r);const m=y.basicAction("UIBT");m.param=s;const A=new ut(m,i,r,40,40,rt.Both);et.add(A)}async makeVScroller(t,i,r,s,c){const f=this.vScrollHilightBounds(i,r);await this.drawSprite(t,`ui/arrow/${s?"up":"down"}.png`,i,r);const m={zone:"N",key:c,host:"",param:s?"U":"D"},A=new ut(m,...f,rt.Both);et.add(A)}vScrollHilightBounds(t,i){return[t-3,i-3,40,27]}}class Ve extends $t{async drawActions(t){if(bt.baseMode==="G"){const i=st.get("effects"),r=t.filter(s=>s.zone==="B");if(r.length>1&&console.error("Two button actions encountered in one batch",r),r.length===0||M.aiActive||S.clickMode==="I"&&!bt.isDetailMode){const s=this.buttonBounds();await this.drawSprite(i,"ui/button/off.png",s[0],s[1])}else{const s=r[0],c=this.buttonBounds();await this.drawSprite(i,"ui/button/on.png",c[0],c[1]);let f;s.key==="CARD"?f=s.param:f=s.key,await this.drawSprite(i,`text/butt/${f}.png`,c[0]+23,c[1]+18);const m=this.highlightBounds(),A=new ut(s,...m);s.key==="CNCL"&&(A.mouse=rt.Both),et.add(A)}}}buttonBounds(){return[856,406,160,63]}highlightBounds(){const t=this.buttonBounds(),i=5,r=[-1,-1,2,2];return t.map((s,c)=>s+i*r[c])}}class Yt extends $t{async drawCard(t,i,r,s){const c=this.getCanv(i),f=this.extractStats(t),m=f.cardClass;if(await this.drawSprite(c,m.image(!1),r+14,s+35),await this.drawSprite(c,this.frameImg(m.level,m.faction,m.type,!1),r,s),await this.drawSprite(c,`text/card/${m.cardCode()}.png`,r+12,s+16),f.isCreature){const A=s+178;await this.spriteNumber(c,f.att,r+24,A,"S","Y"),await this.spriteNumber(c,f.hlt,r+127,A,"S","Y")}if(f.sleeping&&await this.drawSprite(c,"icons/effects/defensive.png",r+5,s+40,{alpha:.7}),f.iconList.length>0){const A=r+57-17*(f.iconList.length-1);await Promise.all(f.iconList.map(async(w,R)=>this.drawIcon(c,A+R*35,s+140,w[0],w[1])))}}async drawBigCard(t,i,r,s){const c=this.extractStats(i);if(await this.drawSprite(t,i.image(!0),r+38,s+117),await this.drawSprite(t,this.frameImg(i.level,i.faction,i.type,!0),r,s),i.rarity!=="T"&&await this.drawRarity(t,i.rarity,r+309,s+394),c.isCreature){const f=s+555;await this.spriteNumber(t,c.att,r+44,f,"B","Y"),await this.spriteNumber(t,c.hlt,r+325,f,"B","Y")}}async drawIcon(t,i,r,s,c=0){const f=this.getCanv(t);if(await this.drawSprite(f,`icons/effects/${s}.png`,i,r),c>0){const m=s==="poison"?12:9;await this.spriteNumber(f,c,i+17,r+m,"S","B")}}extractStats(t){let i,r=!1,s=0,c=0,f=!1,m=0,A=!1,w=!1,R=!1,U=!1,z=0,Q=0,ct=0,Y=!1,kt=!1;if(!(t instanceof Dt))r=!0,s=t.attack,c=t.health,f=t.sleeping&&!t.aggressive,m=t.regen,A=t.breakthrough,w=t.defender,R=t.aggressive,z=t.armor,Q=t.poison,ct=t.mobility,U=t.changed,i=L.getCard(t.code);else{if(t.type==="C"){r=!0;const nt=t;s=nt.iAttack,c=nt.iHealth,m=nt.iRegen,A=nt.iBT,w=nt.iDefend,R=nt.iAggro,z=nt.iArmor,ct=nt.iMobile}Y=t.overload,kt=t.consistent,i=t}const tt=[];return Y&&tt.push(["overload",0]),kt&&tt.push(["consistent",0]),m>0&&tt.push(["regenerate",m]),A&&tt.push(["breakthrough",0]),w&&tt.push(["defender",0]),R&&tt.push(["aggressive",0]),z>0&&tt.push(["armor",z]),Q>0&&tt.push(["poison",Q]),ct>0&&tt.push(["mobility",ct]),U&&tt.push(["changed",0]),{cardClass:i,isCreature:r,iconList:tt,hlt:c,att:s,sleeping:f}}async drawHilight(t,i,r,s="#00FF00"){await super.drawHighlight(t,...this.highlightBounds(i,r),s)}cardBounds(t,i){return[t,i,150,205]}highlightBounds(t,i){const r=this.cardBounds(t,i),s=5,c=[-1,-1,2,2];return r.map((f,m)=>f+s*c[m])}frameImg(t,i,r,s){return`frames/${s?"big":"small"}/lvl${t}_${i}${r}.png`}levelImg(t){return`icons/frame/lvl${t}.png`}oldFrameImg(t){return`icons/frame/frame${t}.png`}factionImg(t){return`icons/faction/orb${t}.png`}}const mi=30,Oe=540,pi=5;class yi extends $t{async drawCards(t){const i=st.get("hand");i.clear();const r=new Yt,s=r.highlightBounds(0,0)[2]+pi;let c=mi;const f=this.paginatron(t);for(let m=f[0];m<=f[1];m++){const A=L.getCard(t.hand[m]);await r.drawCard(A,i,c,Oe),c+=s}}async drawActions(t){const i=S.clickMode!=="I",r=st.get("effects"),s=new Yt,c=s.highlightBounds(0,0)[2]+pi,f=new Vt(0,520,1e3,250),m=new Vt(0,520,1e3,250,rt.Right),A=this.paginatron(k.getActive());await Promise.all(t.filter(w=>w.zone==="H").map(async w=>{const R=w;if(R.position>=A[0]&&R.position<=A[1]){const U=mi+(R.position-A[0])*c;if(w.key==="DEET"){const z=new ut(w,...s.highlightBounds(U,Oe),rt.Right);m.addChild(z)}else if(i){const z=new ut(w,...s.highlightBounds(U,Oe));f.addChild(z),await s.drawHilight(r,U,Oe,this.hlColour(R.key))}}})),i&&et.add(f),et.add(m),A[0]>0&&await this.makeScroller(r,!1),A[1]<A[2]&&await this.makeScroller(r,!0)}paginatron(t){let i=M.ui.handScrollLeft;return i>0&&t.hand.length-i<5&&(i=Math.max(0,t.hand.length-5),M.ui.handScrollLeft=i),[i,Math.min(i+4,t.hand.length-1),t.hand.length-1]}scrollHilightBounds(t,i){return[t-3,i-2,27,38]}async makeScroller(t,i){const r=i?894:856,s=726,c=this.scrollHilightBounds(r,s);await this.drawSprite(t,`ui/arrow/${i?"right":"left"}.png`,r,s),await this.drawHighlight(t,...c);const f={zone:"N",key:"SCRH",host:"",param:i?"R":"L"},m=new ut(f,...c,rt.Both);et.add(m)}}class ti extends $t{fieldBoundary=[17,62,821,443];async drawCards(t){const i=k.getLocalB(),r=st.get("field");r.clear();const s=new Yt,c=g.qActiveCreats().map(f=>{let m=0;t&&t.scrappers.some(w=>w[0]===f.lane&&w[1]===f.owner)&&(m=t.battlePhase);const A=this.coordCalc(f.lane,f.owner,i,m);return s.drawCard(f,r,...A)});if(await Promise.all(c),x.iaTrigLane>0){const f=this.coordCalc(x.iaTrigLane,k.getActiveB(),i),m=s.cardBounds(...f),A=m[1]+m[3]+11,w=m[0]+m[2]/2;await this.drawSprite(r,"icons/rewards/gold.png",w-10,A),await this.drawSprite(r,"icons/rewards/gold.png",w-35,A),await this.drawSprite(r,"icons/rewards/gold.png",w-60,A),await this.drawSprite(r,"icons/rewards/gold.png",w+15,A),await this.drawSprite(r,"icons/rewards/gold.png",w+40,A)}}async drawActions(t){const i=S.clickMode!=="I",r=k.getLocalB(),s=st.get("effects"),c=new Yt,f=new Vt(...this.fieldBoundary),m=new Vt(...this.fieldBoundary,rt.Right);await Promise.all(t.filter(A=>A.zone==="F"||A.zone==="R").map(async A=>{if(A.zone==="R"&&i){const w=new ut(A,...this.fieldBoundary);et.add(w),await this.drawHighlight(s,...this.fieldBoundary)}else{const w=A,R=this.coordCalc(w.lane,w.playerA,r);if(A.key==="DEET"){const U=new ut(A,...c.highlightBounds(...R),rt.Right);m.addChild(U)}else if(i){const U=new ut(A,...c.highlightBounds(...R));f.addChild(U),await c.drawHilight(s,...R,this.hlColour(w.key))}}})),i&&f.childs.length>0&&et.add(f),m.childs.length>0&&et.add(m)}async drawFight(t){if(t.length>0){const i={battlePhase:1,scrappers:t},r=72;await new Ve().drawActions([]),await this.drawCards(i),await S.sleep(r),i.battlePhase=2,await this.drawCards(i),await S.sleep(r),i.battlePhase=3,await this.drawCards(i),await S.sleep(r),i.battlePhase=4,await this.drawCards(i),await S.sleep(r+70),i.battlePhase=3,await this.drawCards(i),await S.sleep(r),i.battlePhase=2,await this.drawCards(i),await S.sleep(r),i.battlePhase=1,await this.drawCards(i),await S.sleep(r)}}coordCalc(t,i,r,s=0){const c=r===i,f=166,m=5;let A,w,R;return[A,R,w]=c?[22,290,1]:[687,65,-1],[A+(t-1)*f*w,R+s*m*(-1*w)]}}class He extends $t{avatars=["barf","beee","behold","boof","crowley","darko","deert","eyebs","fine","furiousgeorge","ghoost","judge","kenta","nom","pupsky","skelly","stache"];async drawPlayer(t,i,r,s){const c=this.getCanv(i);await this.drawSprite(c,`avatar/${this.avatars[t.avatar]}.jpg`,r+46,s+48),await this.drawSprite(c,"ui/player_frame.png",r,s),await this.drawSprite(c,"ui/player_health.png",r+10,s+102),await this.spriteNumber(c,t.health,r+45,s+149,"B","G"),await this.drawText(c,`Turn: ${t.turn}   Rank: ${t.rank}`,r+25,s+210,{colour:"#f5f242",fontSize:20}),await this.drawText(c,t.name,r+t.nameOffset,s+185,{colour:"#42a4f5",fontSize:20});const f=k.totalPoison(t),m=k.totalArmor(t),A=k.activeCardItems(t);if(f>0||m>0||A.length>0){const w=new Yt,R=s+9;if(f>0&&await w.drawIcon(c,r+15,R,"poison",f),m>0&&await w.drawIcon(c,r+150,R,"armor",m),A.length>0){await w.drawIcon(c,r+156,s+147,"changed");const U=y.basicAction("VWDK");U.param=S.enTil("VE",S.bool2txt(t.isPlayerA));const z=new ut(U,r+155,s+147,36,36,rt.Both);et.add(z)}}}async drawAllPlayers(){const t=st.get("player");t.clear();const i=!M.aiActive,r=k.getLocal(),s=k.toPlayer(!r.isPlayerA);if(await this.drawPlayer(r,t,...this.playerOrigin(!0)),await this.drawPlayer(s,t,...this.playerOrigin(!1)),r.isPlayerA===k.getActiveB()){let c=862;const f=295,m=Array(I.regularPlays).fill("blue").concat(I.freeCards.map(w=>w.sourceCard)),A=[];m.forEach(w=>{let R;if(w==="blue")R=w;else if(R="green",i){const U={key:"DEET",zone:"N",host:"",param:w},z=new ut(U,c-1,f-1,28,41,rt.Both);et.add(z)}A.push(this.drawSprite(t,`ui/${R}card.png`,c,f)),c+=30}),await Promise.all(A)}await this.drawDeckButton(t,r,!0,i),await this.drawDeckButton(t,r,!1,i)}async drawDeckButton(t,i,r,s){let c,f,m;if(r?(c=i.discard.length,f=935,m="T"):(c=i.deck.length,f=858,m="U"),await this.drawSprite(t,`ui/button/faction_${m}.png`,f,350),await this.spriteNumber(t,c,f+38,350+14,"S","Y"),c>0&&s){const w=y.basicAction("VWDK");w.param=r?"VD":"VR";const R=new ut(w,f,350,77,44,rt.Both);et.add(R)}}async drawActions(t){if(S.clickMode==="I")return;const i=st.get("effects"),r=k.getLocalB();await Promise.all(t.filter(s=>s.zone==="P").map(s=>{const c=s,f=this.playerOrigin(c.playerA===r),m=this.highlightBounds(...f),A=new ut(s,...m);return et.add(A),this.drawHighlight(i,...m)}))}playerOrigin(t){return[832,t?485:0]}playerBounds(t,i){return[t+18,i+18,170,170]}highlightBounds(t,i){return this.playerBounds(t,i)}async drawGameOver(){const t=st.get("field"),i=94,r=k.getLocalB(),s=M.winFlag,c=r&&s===1||!r&&s===-1;await this.drawSprite(t,`ui/you-${c?"win":"lose"}.png`,i,89),et.removeAll();const f=new Te,m=st.get("effects");await f.drawButton(m,i+62,520,y.menuButtonAction("MM"),"Main Menu",20,!1),await f.drawButton(m,i+389,520,y.menuButtonAction("RP"),"Replay",55,!1)}async drawAiGear(t,i){const c=t%6,f=Math.floor(t/6),m=st.get("effects"),A=`icons/rewards/${i?"gold":"silver"}.png`;await this.drawSprite(m,A,862+c*24,255+f*24)}hwhipe(){st.get("effects").clear()}}const bi=15,Ai=15,Aa=5;class ka extends $t{constructor(){super();const i=new Yt().highlightBounds(0,0);this.xOffset=i[2]+Aa,this.yOffset=i[3]+25}xOffset;yOffset;async drawCards(){const t=st.get("decklist");t.clear(),t.context.fillStyle=this.haze,t.context.fillRect(0,0,849,S.gameHeight);const i=new Yt,s=St.visibleContent().map((c,f)=>{const m=L.getCard(c.cardCode),A=this.listXY(f);return i.drawCard(m,t,...A).then(()=>{if(c.cardCount>0)return this.drawCount(t,A[0]+61,A[1]+163,c.cardCount)})});await Promise.all(s)}async drawActions(t){const i=st.get("decklist"),r=new Yt,s=new _e,c=S.clickMode!=="I",f=St.visibleContent(),m=M.ui,A=m.deckScroll,w=A+15,U=m.deckSummary?rt.Both:rt.Right,z=new Vt(...this.deckBoundary()),Q=new Vt(...this.deckBoundary(),U),ct=[];t.forEach(Y=>{if(Y.key==="DEET"){const kt=Y;if(kt.position>=A&&kt.position<w){const tt=new ut(Y,...r.highlightBounds(...this.listXY(kt.position-A)),U);Q.addChild(tt)}}else if(Y.key==="CARD"&&c){const kt=Y,tt=f.findIndex(nt=>nt.sourceIdx===kt.position);if(tt>-1){const nt=this.listXY(tt),se=new ut(Y,...r.highlightBounds(...nt));z.addChild(se),ct.push(r.drawHilight(i,...nt,this.hlColour(Y.key)))}}}),c&&z.childs.length>0&&et.add(z),Q.childs.length>0&&et.add(Q),St.canPageDown&&ct.push(s.makeVScroller(i,319,723,!1,"SCRK")),St.canPageUp&&ct.push(s.makeVScroller(i,487,723,!0,"SCRK")),await Promise.all(ct)}async drawCount(t,i,r,s){await this.drawSprite(t,"ui/dullcard.png",i,r),await this.spriteNumber(t,s,i+13,r+12,"S","Y")}listXY(t){return[bi+t%5*this.xOffset,Ai+Math.floor(t/5)*this.yOffset]}deckBoundary(){return[bi,Ai,this.xOffset*5,this.yOffset*3]}}class va extends $t{async drawDetails(t){const i=[],r=st.get("card");r.clear(),r.context.fillStyle=this.haze,r.context.fillRect(0,0,849,S.gameHeight);const s=30,c=30,f=L.getCard(_t.currentCard),m=new Yt;S.options.bigCards?i.push(m.drawBigCard(r,f,s,c)):i.push(m.drawCard(f,r,134,280));const A=435;let w=30;const R="#f5f242",U="#03fcfc",z=33,Q=23,ct=28;let Y=f.name;for(;Y.length>0;){w+=36;let xt;if(Y.length<Q)xt=Y,Y="";else{const Kt=Y.lastIndexOf(" ",Q);xt=Y.substring(0,Kt),Y=Y.substring(Kt+1)}i.push(this.drawText(r,xt,A,w,{colour:U,fontSize:28}))}w+=36,i.push(this.drawText(r,this.cardSummary(f),A,w,{colour:U,fontSize:20})),f.type==="C"&&(w+=30,i.push(this.drawText(r,this.tribeSummary(f),A,w,{colour:U,fontSize:20})));let kt=p.cardTextSplit(f);w+=40,kt.forEach(xt=>{for(;xt.length>0;){let Kt;if(xt.length<z)Kt=xt,xt="";else{const me=xt.lastIndexOf(" ",z);Kt=xt.substring(0,me),xt=xt.substring(me+1)}i.push(this.drawText(r,Kt,A,w,{colour:R,fontSize:20})),w+=ct}});const tt=this.levelFun(f),nt=tt.length;if(tt.length>1){const xt=f.cardCode(),Kt=nt===3?[19,147,270]:nt===2?[78,216]:[0,98,196,294];tt.forEach((me,Ze)=>{i.push(this.drawLevelButton(r,xt,me,40+Kt[Ze],658,me===f.level))})}const se=new Te;let Ne=0;const ei=513,ii=697,ki=74;bt.baseMode!=="G"&&(i.push(se.drawButton(r,ei,ii,t,"Close",62,!1)),Ne++);const Da=new ut(t,s,c,377,603,rt.Both);if(et.add(Da),_t.canGoBack){const xt=_t.goBackAction();i.push(se.drawButton(r,ei,this.buttonY(ii,Ne,ki),xt,"Back",72,!1)),Ne++}_t.friendos.forEach(xt=>{const Kt=L.getCard(xt),me=_t.friendAction(xt),Ze=_t.friendTxt(Kt.cardCode());i.push(se.drawButton(r,ei,this.buttonY(ii,Ne,ki),me,Ze[1]||Kt.name,Ze[0],!1)),Ne++}),await Promise.all(i)}buttonY(t,i,r){return t-i*r}cardSummary(t){const i=p.factionText(t.faction),r=p.rarityText(t.rarity),s=p.cardTypeText(t.type);return`${i}, ${r} ${s}`}tribeSummary(t){return t.tribe.map(i=>p.tribeText(i)).join(" ")}async drawLevelButton(t,i,r,s,c,f){if(await this.drawSprite(t,`icons/frame/level${r}.png`,s,c),!f){const R=_t.levelAction(r),U=new ut(R,s-15,c-5,88,112,rt.Both);et.add(U)}const A=L.getCard(`${i}${r}`).levelSpice(),w=[[-16,55],[41,55],[11,79]];await Promise.all(A.map((R,U)=>{const z=s+w[U][0],Q=c+w[U][1];if(R.icon==="A"||R.icon==="H"){let ct,Y;return R.icon==="A"?(ct="icons/frame/attack.png",Y=z+17):(ct="icons/frame/health.png",Y=z+16),this.drawSprite(t,ct,z-1,Q-1).then(()=>this.spriteNumber(t,R.num,Y,Q+10,"S","Y"))}else{let ct=this.spiceIcon(R.icon);if(R.icon==="U"||R.icon==="D"||R.icon==="L"||R.icon==="N"){const Y=`icons/effects/${ct}.png`;return this.drawSprite(t,Y,z-1,Q-1).then(()=>this.spriteNumber(t,R.num,z+16,Q+10,"S","B"))}else return new Yt().drawIcon(t,z,Q,ct,R.num)}}))}spiceIcon(t){return t==="N"?"new":t==="D"?"damage":t==="U"?"buff":t==="V"?"mobility":t==="P"?"poison":t==="M"?"armor":t==="G"?"aggressive":t==="F"?"defender":t==="B"?"breakthrough":t==="R"?"regenerate":t==="L"?"life":t==="C"?"consistent":t==="O"?"overload":"whoops"}levelFun(t){return t.maxLevel===3?t.minLevel===1?[1,2,3]:[3]:t.maxLevel===t.minLevel?[t.minLevel]:t.maxLevel===4?[1,2,3,4]:[1,2]}}class Ta extends $t{packLeft=22;packTop=190;packBoundary=[this.packLeft-5,this.packTop-10,537,480];async drawPack(t,i){const r=new Yt,s=S.clickMode!=="I",c=[],f=new Vt(...this.packBoundary),m=new Vt(...this.packBoundary,rt.Right);t.filter(w=>w.pack).forEach(w=>{const R=this.coordCalcPack(w.index);if(w.key==="DRFT"){const U=L.getCard(w.param+"1");if(c.push(r.drawCard(U,i,...R).then(()=>this.drawRarity(i,U.rarity,R[0]+112,R[1]+4))),s){const z=new ut(w,...r.highlightBounds(...R));f.addChild(z)}}else{const U=new ut(w,...r.highlightBounds(...R),rt.Right);m.addChild(U)}}),s&&f.childs.length>0&&et.add(f),m.childs.length>0&&et.add(m),await Promise.all(c)}async drawList(t,i){let r=170;const s=570,c=[],f=pt.picksAsDeck,m=new Vt(s,r,600,600,rt.Both),A=t,w=15,R=pt.scrollIdx;pt.canPageDown&&await this.makeScroller(i,!1),pt.canPageUp&&await this.makeScroller(i,!0),A.filter(U=>!U.pack).forEach(U=>{if(U.index>=R&&U.index<R+w){const z=L.getCard(U.param);c.push(this.drawFaction(i,z.faction,s,r),this.drawRarity(i,z.rarity,s+28,r),this.drawText(i,`${f[U.index].num}x ${z.name}`,s+65,r+7,{colour:"#f5f242"}));const Q=new ut(U,s,r-2,600,35,rt.Both);m.addChild(Q),r+=35}}),await Promise.all(c),et.add(m)}coordCalcPack(t){const s=t%3,c=Math.floor(t/3);return[this.packLeft+s*176,this.packTop+c*235]}async makeScroller(t,i){const r=new _e,s=522,c=720-(i?40:0);await r.makeVScroller(t,s,c,i,"SCRD")}async drawStats(t){const i=pt.stats;let r=this.packBoundary[0]+10;const s=this.packBoundary[1]+this.packBoundary[3]+20;await this.threeLine(t,r,s,["Creat:","Spell:","Total:"]),r+=75,await this.threeLine(t,r,s,i.getTotal()),await Promise.all(Fe.map(c=>{const f=i.getFactTotal(c);if(f[2]===0)return[Promise.resolve()];{r+=75;const m=this.threeLine(t,r,s,f),A=this.drawFaction(t,c,r-8,s-39);return[m,A]}}).flat())}async threeLine(t,i,r,s){const c={colour:"#ffd865",fontSize:18,fontName:"serif"},f=30;await Promise.all(s.map((m,A)=>this.drawText(t,m.toString(),i,r+f*A,c)))}async drawDraftMenu(t){const i=new Te,r=new Be,s=240,c=80,f=45,m=34;let A=50,w=s;await r.headerText(A+28,w,"Opponent",t),w+=f,await i.buttonMaker(t,A,w,"DI","DUMB BOT",27,pt.vsAI,!1),w+=c,await i.buttonMaker(t,A,w,"DV","HUMAN",47,!pt.vsAI,!1),w+=c+16,await r.headerText(A+17,w,"Rarity Filter",t),w+=c-m-6,await this.rarityButton(t,A+20,w,"L",pt.getRarity("L")),await this.rarityButton(t,A+125,w,"H",pt.getRarity("H")),w+=c,await this.rarityButton(t,A+20,w,"R",pt.getRarity("R")),await this.rarityButton(t,A+125,w,"C",pt.getRarity("C")),w=s+f+c*5,await i.buttonMaker(t,A,w,"MM","MAIN MENU",16),A=404,w=s,await r.headerText(A+5,w,"Draft Modes",t),w+=f,await i.buttonMaker(t,A,w,"GP","GOOD PACKS",9,pt.fatPacks),w+=c,await i.buttonMaker(t,A,w,"LD","LEGENDARY",17,pt.legDraft),w+=c,await i.buttonMaker(t,A,w,"OD","OVERDRAFT",17,pt.overdraft),A=757,w=s,await r.headerText(A+76,w,"Sets",t),w+=f,await this.chestButton(t,A+3,w,1,pt.getSet(1)),await this.chestButton(t,A+124,w,2,pt.getSet(2)),w+=88,await this.chestButton(t,A+3,w,3,pt.getSet(3)),await this.chestButton(t,A+124,w,4,pt.getSet(4)),w+=88,await this.chestButton(t,A+3,w,5,pt.getSet(5)),await this.chestButton(t,A+124,w,6,pt.getSet(6)),w+=88,await this.chestButton(t,A+3,w,7,pt.getSet(7)),w=s+f+c*5,await i.buttonMaker(t,A,w,"DN","NEXT",68)}async rarityButton(t,i,r,s,c){const f={key:"MNBT",zone:"N",host:"",param:S.enTil("DR",s)},m=`ui/button/rarity_${s}${c?"y":"n"}.png`;await this.drawSprite(t,m,i,r);const A=new ut(f,i,r,75,65,rt.Both);et.add(A)}async chestButton(t,i,r,s,c){const f={key:"MNBT",zone:"N",host:"",param:S.enTil("DT",s)},m=`icons/sets/Chest_Set${s}${c?"y":"n"}.png`;await this.drawSprite(t,m,i,r);const A=new ut(f,i,r,90,74,rt.Both);et.add(A)}}class ze extends $t{async drawSets(t,i){let r=200;const s=100,c=[],f=new Vt(s,r,400,600);t.filter(m=>m.key==="DSET").forEach(m=>{const A=ye[parseInt(m.param)];c.push(this.drawText(i,A.name,s,r,{colour:"#f5f242"}),this.drawSprite(i,"icons/chest_small.png",s-48,r-5));const w=new ut(m,s,r-2,400,35,rt.Both);f.addChild(w),r+=45}),et.add(f),await Promise.all(c)}async drawList(t,i){let r=170;const s=570,c=[],f=new Vt(s,r,600,600);t.filter(m=>m.key==="DECK").forEach(m=>{const A=S.deTil(m.param),w=Ut.stockDeckByName(A[0],A[1]);c.push(this.drawFaction(i,w.factions[0],s,r),this.drawText(i,w.name,s+65,r+7,{colour:"#f5f242"})),w.factions.length===2&&c.push(this.drawFaction(i,w.factions[1],s+28,r));const R=new ut(m,s,r-2,600,35,rt.Both);f.addChild(R),r+=35}),await Promise.all(c),et.add(f)}packBoundary=[17,190,537,480];coordCalcPack(t){const s=t%3,c=Math.floor(t/3);return[22+s*176,200+c*235]}iAmError(t){const i=st.get("game-ui");this.drawText(i,t,295,655,{colour:"#f5142e",fontSize:26})}async drawConstrMenu(t){const i=new Te,r=new Be,s=240,c=80,f=45;let m=50,A=s;await r.headerText(m+28,A,"Opponent",t),A+=f,await i.buttonMaker(t,m,A,"CI","DUMB BOT",27,Rt.vsAI,!1),A+=c,await i.buttonMaker(t,m,A,"CV","HUMAN",47,!Rt.vsAI,!1),A+=c*4,await i.buttonMaker(t,m,A,"MM","MAIN MENU",16),m=404,A=s,await r.headerText(m+46,A,"Player 1",t);const w=Rt.p1.mode;A+=f,await i.buttonMaker(t,m,A,S.enTil("CP","A"),"PRE-CON",39,w==="CP",!1),A+=c,await i.buttonMaker(t,m,A,S.enTil("CR","A"),"RANDOM",36,w==="CR",!1),A+=c,await i.buttonMaker(t,m,A,S.enTil("CX","A"),"SCRAMBLE",30,w==="CX",!1),A+=c,await i.buttonMaker(t,m,A,S.enTil("LK","A"),"LOAD FILE",32,w==="LK"),w==="LK"&&await this.drawFileDeck(t,m,A,Rt.p1.deck),m=757,A=s,await r.headerText(m+44,A,"Player 2",t);const R=Rt.p2.mode;A+=f,await i.buttonMaker(t,m,A,S.enTil("CP","B"),"PRE-CON",39,R==="CP",!1),A+=c,await i.buttonMaker(t,m,A,S.enTil("CR","B"),"RANDOM",36,R==="CR",!1),A+=c,await i.buttonMaker(t,m,A,S.enTil("CX","B"),"SCRAMBLE",30,R==="CX",!1),A+=c,await i.buttonMaker(t,m,A,S.enTil("LK","B"),"LOAD FILE",32,R==="LK"),R==="LK"&&await this.drawFileDeck(t,m,A,Rt.p2.deck),A+=c*2,await i.buttonMaker(t,m,A,"CN","NEXT",68)}async drawFileDeck(t,i,r,s){const c=r+89;await this.drawText(t,s.name.slice(0,20),i,r+70,{colour:"#f5f242",fontSize:18}),s.factions.length===1?await this.drawFaction(t,s.factions[0],i+96,c):(await this.drawFaction(t,s.factions[0],i+78,c),await this.drawFaction(t,s.factions[1],i+113,c))}}class Be extends $t{async drawExtrasMenu(t){const i=new Te,r=240,s=80,c=45,f=34;let m=50,A=r;await this.headerText(m+28,A,"More Info",t),A+=c,await i.buttonMaker(t,m,A,"RU","RULES",66),A+=s,await i.buttonMaker(t,m,A,"FQ","INFO & FAQ",20),A+=s*4,await i.buttonMaker(t,m,A,"MM","MAIN MENU",16),m=404,A=r,await this.headerText(m+37,A,"UI Modes",t),A+=c,await i.buttonMaker(t,m,A,"90","90% SIZE",47,S.options.scale==="90"),A+=s,await i.buttonMaker(t,m,A,"BC","BIG CARDS",29,S.options.bigCards),A+=s+f,await this.headerText(m+12,A,"Game Modes",t),A+=s-f,await i.buttonMaker(t,m,A,"HH","BIG HEALTH",20,S.options.highHealth),A+=s,await i.buttonMaker(t,m,A,"CH","CHEATER",39,S.options.cheater),A+=s,await i.buttonMaker(t,m,A,"BB","BATTLE BARK",13,S.options.bark),m=757,A=r,await this.headerText(m+43,A,"Playmat",t),A+=c;const w=S.options.playmat==="vanilla";await i.buttonMaker(t,m,A,"vanilla","VANILLA",43,w,!w),A+=s;const R=S.options.playmat==="alloyin";await i.buttonMaker(t,m,A,"alloyin","ALLOYIN",43,R,!R),A+=s;const U=S.options.playmat==="nekrium";await i.buttonMaker(t,m,A,"nekrium","NEKRIUM",38,U,!U),A+=s;const z=S.options.playmat==="tempys";await i.buttonMaker(t,m,A,"tempys","TEMPYS",51,z,!z),A+=s;const Q=S.options.playmat==="uterra";await i.buttonMaker(t,m,A,"uterra","UTERRA",52,Q,!Q),await this.drawText(t,"v0.9.0",890,46,{fontSize:16,colour:"#7b68ee"})}async headerText(t,i,r,s){await this.drawText(s,r,t,i,{colour:"#f5f242",fontSize:30})}async drawPickerPlayer(t,i,r){let s;i?s="Player 1":r?s="Dumb Bot":s="Player 2",await this.headerText(54,75,s,t)}}class Sa extends $t{async drawMenu(t){let r=22;await this.drawSprite(t,"ui/button/constructed.png",778,r);const s=new ut(this.makeAction("C"),...this.buttHilightBounds(778,r),rt.Both);et.add(s),r=148,await this.drawSprite(t,"ui/button/draft.png",778,r);const c=new ut(this.makeAction("D"),...this.buttHilightBounds(778,r),rt.Both);et.add(c),r=508,await this.drawSprite(t,"ui/button/deck.png",778,r);const f=new ut(this.makeAction("B"),...this.buttHilightBounds(778,r),rt.Both);et.add(f),r=634,await this.drawSprite(t,"ui/button/info.png",778,r);const m=new ut(this.makeAction("I"),...this.buttHilightBounds(778,r),rt.Both);et.add(m);const A=y.basicAction("DBUG"),w=new ut(A,757,349,74,70,rt.Right);et.add(w),await this.drawSprite(t,"gwg/gwg_red.png",58,0)}buttBounds(t,i){return[t,i,242,113]}buttHilightBounds(t,i){const s=[-3,-3,6,6];return this.buttBounds(t,i).map((c,f)=>c+s[f])}makeAction(t){return{zone:"N",key:"MENU",host:"",param:t}}}class Ca{gameWidth;gameHeight;spriteCache;dogAudio;_clickMode;pxRatio=1;options;imgRoot;constructor(){this.spriteCache={},this.imgRoot="./img/",this.gameWidth=1024,this.gameHeight=768,this.dogAudio=document.getElementById("dogbark"),this._clickMode="M",this.options={bark:!0,bigCards:!0,highHealth:!1,cheater:!1,playmat:"uterra",wasDrafting:!1,scale:"100",debug:!1}}randInt(t,i){return Math.floor(Math.random()*(i-t))+t}isUn(t){return typeof t>"u"}async sleep(t){return new Promise(i=>{setTimeout(()=>{i()},t)})}async getSprite(t){return this.spriteCache[t]||(this.spriteCache[t]=this.imageLoader(t)),this.spriteCache[t]}async bulkLoadSprite(t){await Promise.all(t.map(i=>this.getSprite(`${this.imgRoot}${i}`)))}dogBark(){this.dogAudio.volume=.2,this.dogAudio.play()}toggleDebug(){const t=!this.options.debug;this.options.debug=t,new ze().iAmError("Debug mode "+(t?"ON":"OFF"))}enTil(...t){return t.join("~")}deTil(t){return t.split("~")}imageLoader(t){return new Promise(i=>{const r=new Image;r.onload=()=>{i(r)},r.src=t})}writeStorage(t,i){localStorage.setItem(t,i)}readStorage(t){return localStorage.getItem(t)}readStringStorage(t,i){const r=this.readStorage(t);return r===null?i:r}readBoolStorage(t,i){const r=this.readStorage(t);return r===null?i:this.txt2bool(r)}writeBoolStorage(t,i){this.writeStorage(t,this.bool2txt(i))}bool2txt(t){return t?"Y":"N"}txt2bool(t){return t==="Y"}restoreOptions(){const t=this.options;t.bark=this.readBoolStorage("bark",!1),t.bigCards=this.readBoolStorage("bigCards",!0),t.cheater=this.readBoolStorage("cheater",!1),t.highHealth=this.readBoolStorage("highHealth",!1),t.playmat=this.readStringStorage("playmat","uterra"),t.scale=this.readStringStorage("scale","100")}toggleOption(t){S.options[t]=!S.options[t],this.writeBoolStorage(t,S.options[t])}setClickMode(t){this._clickMode=t}get clickMode(){return this._clickMode}}const S=new Ca;class wa{log=!1;file=!1;makeReport(){if(!this.file&&!this.log)return;const t=[[],[],[]];It.forEach(s=>{let c=0;s.s>6.5?c=2:s.s>5.5&&(c=1),t[c].push(s.c)}),t[0].push("NDR","RSC","CGF","IZL","IZR","FUN","FWG","FWC","DZA"),t[1].push("CYP","SLG");const i=t.map(s=>s.map(c=>{const f=L.getCard(c+"1");return f.type==="C"?f.name+"	"+this.cardGuts(f):""}).filter(Boolean).sort()).flat().join(`
`);if(this.file){var r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(i)),r.setAttribute("download","guts.txt"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}cardGuts(t){const i=t.jr3(!0,3);i.sleeping=!1;const r=i.bonusTotal(),s=ot.levelBonusFormula(t,!1)+ot.hintAdjuster(t);let c=lt.creatValueFormula(i),f=lt.threatFormula(i,[]),m=r.pHealth,A=r.bonus+s,w=1+r.count,R=c+r.value,U=f+r.attack,Q=lt.ddp9Nugget(w,R,U,m,A).map(ct=>ct.toFixed(1)).join("	");if(this.log&&(console.group("---- "+t.name+" "+t.level+" ----"),console.log("Attack: "+i.attack+"; Health: "+i.health),console.log("Creat Value Weight: "+c+"; Creat Threat Weight: "+f),console.log("Creat Value Bonus: "+r.value+"; Creat Threat Bonus: "+r.attack),console.log("Level Bonus: "+s+"; Raw Bonus: "+r.bonus),console.log("Player Bonus: "+r.pHealth+"; Count Bonus: "+r.count),console.log("Formula: Total, Count, Value, Threat, Player, Bonus"),console.log(Q),console.groupEnd()),t.level<t.maxLevel){const ct=L.getCard(t.levelUpCard());Q+="	"+this.cardGuts(ct)}return Q}}window.onload=async()=>{await document.fonts.ready;let n=[];document.fonts.forEach(Y=>{Y.load(),n.push(Y.loaded)}),await Promise.all(n),["game-ui","field","player","hand","effects","decklist","card"].forEach(Y=>{st.register(Y)});const i=st.get("effects");i.context.lineWidth=2,S.pxRatio=window.devicePixelRatio;let r;(Y=>{Y.Neutral="N",Y.Cancel="C",Y.Down="D"})(r||(r={}));let s=!0,c=800,f="N",m;try{document.createEvent("TouchEvent"),S.setClickMode("T"),s=!1}catch{}const A=()=>{m&&(clearTimeout(m),m=void 0)},w=(Y,kt,tt)=>{const nt=et.hitTest(Y,kt,tt);nt&&T.handleAction(nt)},R=Y=>{w(Y.pageX,Y.pageY,Y.button)},U=Y=>{Y.touches.length>1?(f="C",A()):f==="N"&&(f="D",m=setTimeout(()=>{f="C";const kt=Y.touches[0];w(kt.pageX,kt.pageY,rt.ForceRight),m=void 0},c))},z=Y=>{if(f==="D"){if(A(),f="N",Y.changedTouches.length>0){const kt=Y.changedTouches[0];w(kt.pageX,kt.pageY,rt.Left)}}else Y.touches.length===0&&(f="N")},Q=document.getElementById("solforge");s?(Q.addEventListener("click",R),Q.addEventListener("contextmenu",Y=>(Y.preventDefault(),R(Y),!1))):(Q.addEventListener("touchstart",U),Q.addEventListener("touchend",z)),window.sfapi={details:Y=>{_t.init(Y)},setLog:Y=>{ot.setLog(Y)},peekAll:()=>{ot.peekAllCards()},peekDeck:()=>{ot.peekDecks()},peekField:()=>{console.log(g.field)},dumb:()=>{console.log("Am I dumb? "+ot.dumb)},debug:()=>{S.toggleDebug()}},S.restoreOptions(),S.options.scale!=="100"&&yt.changeScale(S.options.scale),yt.drawAll(),new wa().makeReport()}})();

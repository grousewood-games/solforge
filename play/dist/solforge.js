(function(){"use strict";const ve=["A","N","T","U"];const ne=["C","R","H","L"];const Nt=[{crd:"AAK",fct:"T",rty:"L",set:1,typ:"C"},{crd:"ABB",fct:"N",rty:"R",set:4,typ:"C"},{crd:"AGC",fct:"A",rty:"C",set:1,typ:"C"},{crd:"AGK",fct:"A",rty:"L",set:2.1,typ:"C"},{crd:"AGP",fct:"A",rty:"C",set:1.1,typ:"S"},{crd:"AGW",fct:"A",rty:"R",set:4,typ:"S"},{crd:"ASG",fct:"T",rty:"R",set:1,typ:"S"},{crd:"AFO",fct:"A",rty:"C",set:2.1,typ:"C"},{crd:"ATG",fct:"A",rty:"C",set:2,typ:"C"},{crd:"ART",fct:"U",rty:"H",set:2.1,typ:"C"},{crd:"ATP",fct:"U",rty:"H",set:3,typ:"C"},{crd:"AGM",fct:"T",rty:"L",set:2.2,typ:"C"},{crd:"ALG",fct:"A",rty:"R",set:1,typ:"C"},{crd:"AHL",fct:"A",rty:"H",set:1,typ:"C"},{crd:"ALS",fct:"A",rty:"H",set:2,typ:"C"},{crd:"ATZ",fct:"A",rty:"C",set:4,typ:"S"},{crd:"ARB",fct:"A",rty:"H",set:4,typ:"C"},{crd:"AEN",fct:"A",rty:"C",set:2,typ:"C"},{crd:"APM",fct:"A",rty:"H",set:2,typ:"C"},{crd:"AQE",fct:"T",rty:"C",set:1,typ:"S"},{crd:"AGD",fct:"U",rty:"L",set:1,typ:"C"},{crd:"AFS",fct:"A",rty:"L",set:1,typ:"C"},{crd:"ABR",fct:"T",rty:"C",set:2,typ:"C"},{crd:"AFR",fct:"T",rty:"H",set:3.1,typ:"C"},{crd:"AMY",fct:"T",rty:"C",set:1,typ:"C"},{crd:"ABL",fct:"T",rty:"R",set:1,typ:"S"},{crd:"ATT",fct:"T",rty:"L",set:4.1,typ:"C"},{crd:"AGU",fct:"T",rty:"R",set:2.1,typ:"C"},{crd:"AIV",fct:"T",rty:"H",set:1,typ:"C"},{crd:"BTH",fct:"U",rty:"R",set:3,typ:"C"},{crd:"BTI",fct:"A",rty:"C",set:4,typ:"C"},{crd:"BTN",fct:"A",rty:"H",set:1,typ:"C"},{crd:"BBB",fct:"U",rty:"H",set:4,typ:"C"},{crd:"BLH",fct:"T",rty:"L",set:2,typ:"C"},{crd:"BSP",fct:"N",rty:"C",set:2.2,typ:"C"},{crd:"BWK",fct:"N",rty:"R",set:1,typ:"C"},{crd:"BLW",fct:"N",rty:"R",set:3,typ:"C"},{crd:"BSR",fct:"N",rty:"R",set:1,typ:"C"},{crd:"BMY",fct:"T",rty:"H",set:2.1,typ:"C"},{crd:"BSW",fct:"T",rty:"C",set:3,typ:"C"},{crd:"BWW",fct:"T",rty:"H",set:4,typ:"C"},{crd:"BTM",fct:"U",rty:"H",set:1,typ:"S"},{crd:"BAW",fct:"U",rty:"R",set:2,typ:"C"},{crd:"BWG",fct:"U",rty:"C",set:1,typ:"C"},{crd:"BTR",fct:"U",rty:"H",set:3.1,typ:"C"},{crd:"BWD",fct:"U",rty:"C",set:2,typ:"C"},{crd:"BSG",fct:"A",rty:"L",set:1,typ:"C"},{crd:"BSS",fct:"A",rty:"L",set:1,typ:"C"},{crd:"BTS",fct:"U",rty:"C",set:1.1,typ:"C"},{crd:"BST",fct:"T",rty:"L",set:4,typ:"C"},{crd:"BWT",fct:"U",rty:"L",set:4.2,typ:"C"},{crd:"BWH",fct:"A",rty:"R",set:1,typ:"S"},{crd:"BRN",fct:"T",rty:"R",set:3,typ:"S"},{crd:"BZD",fct:"N",rty:"R",set:2,typ:"C"},{crd:"BFM",fct:"N",rty:"H",set:2.3,typ:"C"},{crd:"BSM",fct:"T",rty:"H",set:2,typ:"C"},{crd:"CDT",fct:"U",rty:"R",set:1,typ:"C"},{crd:"CMF",fct:"N",rty:"R",set:4,typ:"C"},{crd:"CTL",fct:"T",rty:"L",set:1,typ:"S"},{crd:"CCS",fct:"N",rty:"C",set:3,typ:"C"},{crd:"CHY",fct:"U",rty:"C",set:1,typ:"C"},{crd:"CHV",fct:"N",rty:"L",set:2,typ:"C"},{crd:"CRS",fct:"A",rty:"R",set:3,typ:"C"},{crd:"COD",fct:"T",rty:"R",set:4,typ:"S"},{crd:"CTI",fct:"N",rty:"C",set:1.1,typ:"C"},{crd:"CHA",fct:"U",rty:"R",set:2.1,typ:"C"},{crd:"CHH",fct:"U",rty:"C",set:2,typ:"C"},{crd:"CHR",fct:"U",rty:"L",set:1,typ:"C"},{crd:"CBB",fct:"T",rty:"C",set:3,typ:"C"},{crd:"CDC",fct:"T",rty:"C",set:2,typ:"C"},{crd:"CFB",fct:"T",rty:"H",set:1,typ:"C"},{crd:"CNM",fct:"T",rty:"C",set:2,typ:"C"},{crd:"CSW",fct:"T",rty:"L",set:2.3,typ:"C"},{crd:"CTG",fct:"A",rty:"C",set:3,typ:"C"},{crd:"CCT",fct:"T",rty:"R",set:2,typ:"C"},{crd:"CFG",fct:"T",rty:"C",set:2,typ:"S"},{crd:"CGL",fct:"N",rty:"H",set:3,typ:"C"},{crd:"CSU",fct:"N",rty:"R",set:1,typ:"S"},{crd:"CCR",fct:"N",rty:"C",set:1,typ:"C"},{crd:"CSB",fct:"N",rty:"C",set:2,typ:"C"},{crd:"CWK",fct:"T",rty:"C",set:3,typ:"C"},{crd:"CRC",fct:"A",rty:"R",set:2,typ:"C"},{crd:"CYC",fct:"N",rty:"H",set:2,typ:"C"},{crd:"CYS",fct:"N",rty:"C",set:4,typ:"C"},{crd:"CTW",fct:"N",rty:"C",set:1,typ:"S"},{crd:"CTV",fct:"U",rty:"H",set:1,typ:"S"},{crd:"CAG",fct:"A",rty:"R",set:1,typ:"S"},{crd:"CBS",fct:"A",rty:"C",set:2.1,typ:"S"},{crd:"CIN",fct:"A",rty:"R",set:1.1,typ:"C"},{crd:"CSH",fct:"A",rty:"C",set:3,typ:"C"},{crd:"CSG",fct:"A",rty:"C",set:2,typ:"S"},{crd:"DFR",fct:"N",rty:"H",set:2,typ:"C"},{crd:"DHW",fct:"N",rty:"R",set:1,typ:"C"},{crd:"DSS",fct:"N",rty:"R",set:1,typ:"C"},{crd:"DCR",fct:"N",rty:"R",set:2,typ:"S"},{crd:"DSK",fct:"N",rty:"C",set:1,typ:"C"},{crd:"DBA",fct:"U",rty:"H",set:1,typ:"C"},{crd:"DBP",fct:"U",rty:"C",set:1,typ:"C"},{crd:"DMR",fct:"U",rty:"C",set:2,typ:"C"},{crd:"DBR",fct:"U",rty:"C",set:1,typ:"C"},{crd:"DCS",fct:"A",rty:"L",set:2,typ:"C"},{crd:"DGZ",fct:"A",rty:"R",set:2,typ:"S"},{crd:"DBN",fct:"N",rty:"C",set:4,typ:"C"},{crd:"DDS",fct:"A",rty:"H",set:4.2,typ:"S"},{crd:"DIS",fct:"T",rty:"R",set:1,typ:"S"},{crd:"DSV",fct:"U",rty:"R",set:2,typ:"S"},{crd:"DDD",fct:"N",rty:"L",set:1,typ:"C"},{crd:"DZD",fct:"U",rty:"L",set:3,typ:"C"},{crd:"DBT",fct:"N",rty:"H",set:1,typ:"S"},{crd:"DFB",fct:"N",rty:"R",set:1,typ:"C"},{crd:"DMW",fct:"A",rty:"L",set:1.1,typ:"C"},{crd:"DCH",fct:"U",rty:"C",set:1,typ:"S"},{crd:"DTD",fct:"N",rty:"L",set:4.2,typ:"C"},{crd:"DSZ",fct:"N",rty:"C",set:2,typ:"C"},{crd:"DYB",fct:"U",rty:"R",set:2,typ:"S"},{crd:"DBQ",fct:"N",rty:"H",set:3,typ:"C"},{crd:"DYS",fct:"N",rty:"R",set:3,typ:"S"},{crd:"DYL",fct:"U",rty:"L",set:3,typ:"C"},{crd:"EBW",fct:"N",rty:"C",set:3,typ:"C"},{crd:"ESK",fct:"N",rty:"H",set:2,typ:"C"},{crd:"EHW",fct:"U",rty:"L",set:1,typ:"C"},{crd:"ETN",fct:"A",rty:"C",set:1,typ:"S"},{crd:"EWE",fct:"T",rty:"H",set:2,typ:"C"},{crd:"ENP",fct:"A",rty:"H",set:1,typ:"S"},{crd:"ESU",fct:"A",rty:"R",set:1,typ:"S"},{crd:"ENR",fct:"U",rty:"C",set:1,typ:"S"},{crd:"EPD",fct:"N",rty:"H",set:1,typ:"S"},{crd:"EPH",fct:"A",rty:"L",set:4.2,typ:"C"},{crd:"ESG",fct:"A",rty:"H",set:4.1,typ:"C"},{crd:"ESC",fct:"A",rty:"H",set:2,typ:"C"},{crd:"ESP",fct:"U",rty:"H",set:2.3,typ:"C"},{crd:"EWT",fct:"U",rty:"R",set:2,typ:"C"},{crd:"EHN",fct:"U",rty:"C",set:1,typ:"C"},{crd:"EFM",fct:"T",rty:"L",set:2.1,typ:"C"},{crd:"EFP",fct:"T",rty:"L",set:1,typ:"C"},{crd:"EXD",fct:"N",rty:"H",set:1,typ:"S"},{crd:"FWB",fct:"U",rty:"C",set:2.3,typ:"C"},{crd:"FWR",fct:"U",rty:"C",set:1,typ:"C"},{crd:"FFG",fct:"U",rty:"C",set:4,typ:"C"},{crd:"FST",fct:"N",rty:"R",set:4,typ:"C"},{crd:"FWK",fct:"N",rty:"C",set:1,typ:"C"},{crd:"FIN",fct:"U",rty:"C",set:1,typ:"S"},{crd:"FRR",fct:"U",rty:"H",set:1,typ:"S"},{crd:"FVA",fct:"T",rty:"H",set:1,typ:"S"},{crd:"FFU",fct:"T",rty:"H",set:1,typ:"C"},{crd:"FLH",fct:"T",rty:"C",set:4,typ:"C"},{crd:"FMS",fct:"T",rty:"C",set:2,typ:"C"},{crd:"FSM",fct:"T",rty:"H",set:1,typ:"S"},{crd:"FBC",fct:"T",rty:"L",set:1,typ:"C"},{crd:"FBI",fct:"T",rty:"H",set:2.2,typ:"C"},{crd:"FFS",fct:"T",rty:"R",set:2,typ:"C"},{crd:"FLN",fct:"T",rty:"R",set:2,typ:"S"},{crd:"FRI",fct:"T",rty:"C",set:3,typ:"C"},{crd:"FSS",fct:"T",rty:"R",set:1,typ:"C"},{crd:"FLS",fct:"T",rty:"C",set:1,typ:"C"},{crd:"FSH",fct:"T",rty:"R",set:1,typ:"C"},{crd:"FFD",fct:"N",rty:"H",set:1,typ:"C"},{crd:"FRV",fct:"N",rty:"H",set:3,typ:"C"},{crd:"FSP",fct:"A",rty:"L",set:1,typ:"C"},{crd:"FPR",fct:"T",rty:"C",set:2.1,typ:"C"},{crd:"FFL",fct:"A",rty:"C",set:1,typ:"S"},{crd:"FGA",fct:"A",rty:"C",set:1,typ:"C"},{crd:"FGB",fct:"A",rty:"R",set:1,typ:"C"},{crd:"FGD",fct:"A",rty:"H",set:3,typ:"C"},{crd:"FGG",fct:"A",rty:"H",set:1,typ:"C"},{crd:"FOL",fct:"A",rty:"H",set:3.1,typ:"C"},{crd:"FPM",fct:"A",rty:"R",set:3,typ:"C"},{crd:"FPS",fct:"A",rty:"C",set:1,typ:"C"},{crd:"FFM",fct:"T",rty:"H",set:3,typ:"C"},{crd:"FMD",fct:"T",rty:"L",set:3,typ:"C"},{crd:"FSK",fct:"T",rty:"C",set:2.3,typ:"S"},{crd:"FWT",fct:"U",rty:"H",set:1,typ:"C"},{crd:"FZS",fct:"T",rty:"R",set:1,typ:"S"},{crd:"GOS",fct:"A",rty:"L",set:4,typ:"S"},{crd:"GHS",fct:"U",rty:"C",set:2.2,typ:"C"},{crd:"GHB",fct:"U",rty:"R",set:1,typ:"C"},{crd:"GHR",fct:"U",rty:"H",set:4.2,typ:"C"},{crd:"GRN",fct:"N",rty:"C",set:2,typ:"S"},{crd:"GTH",fct:"N",rty:"C",set:1,typ:"S"},{crd:"GSC",fct:"U",rty:"C",set:1,typ:"C"},{crd:"GMP",fct:"A",rty:"L",set:1,typ:"C"},{crd:"GTT",fct:"T",rty:"L",set:2,typ:"C"},{crd:"GCL",fct:"T",rty:"C",set:1,typ:"C"},{crd:"GCR",fct:"T",rty:"C",set:2,typ:"S"},{crd:"GLF",fct:"N",rty:"C",set:2,typ:"C"},{crd:"GRW",fct:"N",rty:"C",set:1,typ:"C"},{crd:"GSW",fct:"N",rty:"C",set:2,typ:"C"},{crd:"GVS",fct:"U",rty:"C",set:2,typ:"C"},{crd:"GSS",fct:"U",rty:"C",set:1,typ:"C"},{crd:"GBG",fct:"N",rty:"C",set:1,typ:"C"},{crd:"GGE",fct:"N",rty:"C",set:2,typ:"C"},{crd:"GGH",fct:"N",rty:"C",set:1,typ:"C"},{crd:"GRP",fct:"N",rty:"R",set:1,typ:"S"},{crd:"GGD",fct:"N",rty:"L",set:1,typ:"C"},{crd:"GGR",fct:"N",rty:"L",set:3,typ:"C"},{crd:"GGP",fct:"N",rty:"H",set:1,typ:"C"},{crd:"GGS",fct:"N",rty:"C",set:1,typ:"C"},{crd:"GRM",fct:"N",rty:"R",set:2,typ:"S"},{crd:"GHT",fct:"U",rty:"C",set:1,typ:"C"},{crd:"GMR",fct:"U",rty:"C",set:1,typ:"C"},{crd:"HMF",fct:"T",rty:"H",set:3,typ:"C"},{crd:"HTR",fct:"U",rty:"L",set:1,typ:"C"},{crd:"HAR",fct:"A",rty:"C",set:1,typ:"C"},{crd:"HFA",fct:"N",rty:"H",set:1,typ:"C"},{crd:"HOD",fct:"T",rty:"R",set:3,typ:"C"},{crd:"HWM",fct:"A",rty:"L",set:1,typ:"C"},{crd:"HOX",fct:"N",rty:"R",set:4,typ:"S"},{crd:"HGS",fct:"N",rty:"R",set:1,typ:"S"},{crd:"HTP",fct:"U",rty:"C",set:1,typ:"C"},{crd:"IBF",fct:"T",rty:"R",set:1,typ:"S"},{crd:"ITO",fct:"T",rty:"R",set:2,typ:"S"},{crd:"IVS",fct:"N",rty:"C",set:4,typ:"S"},{crd:"IWC",fct:"A",rty:"C",set:1,typ:"C"},{crd:"IHA",fct:"A",rty:"L",set:2,typ:"C"},{crd:"IBR",fct:"A",rty:"C",set:3,typ:"C"},{crd:"IMD",fct:"A",rty:"L",set:3,typ:"C"},{crd:"IMA",fct:"A",rty:"L",set:2.3,typ:"C"},{crd:"IZK",fct:"T",rty:"L",set:3,typ:"C"},{crd:"JPK",fct:"A",rty:"C",set:1,typ:"S"},{crd:"KDC",fct:"T",rty:"C",set:3,typ:"C"},{crd:"KAW",fct:"T",rty:"L",set:1.1,typ:"C"},{crd:"KOD",fct:"N",rty:"L",set:1,typ:"C"},{crd:"KIW",fct:"A",rty:"L",set:3,typ:"C"},{crd:"KTS",fct:"U",rty:"H",set:4,typ:"C"},{crd:"KKK",fct:"T",rty:"L",set:2,typ:"C"},{crd:"LOD",fct:"U",rty:"L",set:4,typ:"S"},{crd:"LFA",fct:"T",rty:"H",set:4,typ:"C"},{crd:"LKP",fct:"U",rty:"L",set:1,typ:"C"},{crd:"LGT",fct:"N",rty:"R",set:2.3,typ:"C"},{crd:"LBD",fct:"U",rty:"H",set:1,typ:"C"},{crd:"LSS",fct:"U",rty:"R",set:1,typ:"C"},{crd:"LBL",fct:"U",rty:"R",set:1,typ:"C"},{crd:"LBR",fct:"T",rty:"C",set:1,typ:"S"},{crd:"LSK",fct:"T",rty:"C",set:1,typ:"S"},{crd:"LWY",fct:"T",rty:"C",set:1,typ:"C"},{crd:"LSP",fct:"A",rty:"C",set:1,typ:"C"},{crd:"LUC",fct:"T",rty:"L",set:4.2,typ:"C"},{crd:"LMV",fct:"N",rty:"L",set:1,typ:"C"},{crd:"LHY",fct:"U",rty:"C",set:2,typ:"C"},{crd:"LYR",fct:"U",rty:"C",set:4,typ:"S"},{crd:"LYS",fct:"U",rty:"R",set:3,typ:"S"},{crd:"MMH",fct:"T",rty:"C",set:1,typ:"C"},{crd:"MRF",fct:"N",rty:"C",set:1,typ:"C"},{crd:"MOE",fct:"T",rty:"H",set:1,typ:"C"},{crd:"MXW",fct:"A",rty:"C",set:1,typ:"C"},{crd:"MSP",fct:"U",rty:"R",set:2,typ:"S"},{crd:"MMA",fct:"A",rty:"C",set:1,typ:"C"},{crd:"MMX",fct:"A",rty:"C",set:2,typ:"C"},{crd:"MMI",fct:"A",rty:"C",set:4,typ:"C"},{crd:"MMO",fct:"A",rty:"C",set:2,typ:"C"},{crd:"MMV",fct:"A",rty:"C",set:2.2,typ:"C"},{crd:"MPH",fct:"U",rty:"H",set:3,typ:"S"},{crd:"MSC",fct:"A",rty:"H",set:1,typ:"S"},{crd:"MTS",fct:"A",rty:"C",set:1.1,typ:"S"},{crd:"MTT",fct:"A",rty:"C",set:2,typ:"S"},{crd:"MML",fct:"U",rty:"H",set:2,typ:"C"},{crd:"MMW",fct:"U",rty:"L",set:2.2,typ:"C"},{crd:"MDE",fct:"N",rty:"C",set:4,typ:"C"},{crd:"MBP",fct:"U",rty:"H",set:1,typ:"C"},{crd:"MND",fct:"A",rty:"R",set:1,typ:"C"},{crd:"NNS",fct:"A",rty:"R",set:3,typ:"S"},{crd:"NGB",fct:"T",rty:"C",set:1,typ:"C"},{crd:"NGW",fct:"T",rty:"C",set:4,typ:"C"},{crd:"NSL",fct:"U",rty:"R",set:1,typ:"S"},{crd:"NCF",fct:"N",rty:"C",set:4,typ:"S"},{crd:"NCS",fct:"N",rty:"R",set:1,typ:"C"},{crd:"NCW",fct:"N",rty:"C",set:1,typ:"C"},{crd:"NCV",fct:"N",rty:"C",set:1,typ:"S"},{crd:"NEM",fct:"N",rty:"C",set:1,typ:"S"},{crd:"NSW",fct:"N",rty:"L",set:3,typ:"C"},{crd:"NSH",fct:"N",rty:"L",set:2.3,typ:"S"},{crd:"NXA",fct:"A",rty:"L",set:3.1,typ:"C"},{crd:"NXC",fct:"A",rty:"C",set:1,typ:"C"},{crd:"NXG",fct:"A",rty:"H",set:3,typ:"C"},{crd:"NXP",fct:"A",rty:"C",set:1,typ:"C"},{crd:"NXT",fct:"A",rty:"H",set:2,typ:"C"},{crd:"NGT",fct:"N",rty:"R",set:2,typ:"C"},{crd:"NGQ",fct:"U",rty:"L",set:4.1,typ:"C"},{crd:"NCL",fct:"U",rty:"R",set:1.1,typ:"S"},{crd:"NFF",fct:"U",rty:"L",set:2,typ:"C"},{crd:"NAM",fct:"N",rty:"C",set:3,typ:"C"},{crd:"NOZ",fct:"N",rty:"R",set:2,typ:"C"},{crd:"NSY",fct:"N",rty:"C",set:2.1,typ:"C"},{crd:"ONN",fct:"N",rty:"H",set:1.1,typ:"S"},{crd:"OXA",fct:"A",rty:"H",set:2.3,typ:"C"},{crd:"OXM",fct:"A",rty:"R",set:2,typ:"C"},{crd:"OXP",fct:"N",rty:"H",set:2,typ:"C"},{crd:"OBB",fct:"T",rty:"R",set:3,typ:"S"},{crd:"OEX",fct:"A",rty:"H",set:3,typ:"S"},{crd:"OWH",fct:"T",rty:"H",set:3,typ:"C"},{crd:"OBD",fct:"A",rty:"H",set:1,typ:"C"},{crd:"OFM",fct:"A",rty:"R",set:2.1,typ:"C"},{crd:"OJC",fct:"A",rty:"H",set:1.1,typ:"C"},{crd:"OPK",fct:"A",rty:"R",set:2,typ:"C"},{crd:"OSV",fct:"A",rty:"H",set:4,typ:"C"},{crd:"OWW",fct:"A",rty:"L",set:1,typ:"C"},{crd:"OHV",fct:"N",rty:"R",set:2,typ:"C"},{crd:"ODC",fct:"U",rty:"L",set:2,typ:"C"},{crd:"OSP",fct:"N",rty:"R",set:2,typ:"C"},{crd:"OSL",fct:"U",rty:"C",set:3,typ:"C"},{crd:"OWF",fct:"A",rty:"H",set:2,typ:"S"},{crd:"OXS",fct:"U",rty:"R",set:1,typ:"C"},{crd:"PHM",fct:"A",rty:"R",set:2,typ:"C"},{crd:"PPM",fct:"A",rty:"R",set:1,typ:"C"},{crd:"PSM",fct:"A",rty:"L",set:2.2,typ:"C"},{crd:"PLW",fct:"A",rty:"R",set:4,typ:"S"},{crd:"PRG",fct:"N",rty:"C",set:4,typ:"C"},{crd:"PRI",fct:"A",rty:"R",set:3,typ:"S"},{crd:"PHS",fct:"A",rty:"R",set:2.2,typ:"C"},{crd:"PTB",fct:"U",rty:"H",set:1,typ:"S"},{crd:"PSC",fct:"U",rty:"R",set:2,typ:"C"},{crd:"PSH",fct:"N",rty:"H",set:4,typ:"C"},{crd:"PTR",fct:"A",rty:"R",set:2,typ:"S"},{crd:"PSG",fct:"U",rty:"R",set:1,typ:"S"},{crd:"PMS",fct:"T",rty:"C",set:1,typ:"S"},{crd:"POX",fct:"N",rty:"H",set:4.2,typ:"C"},{crd:"PYG",fct:"T",rty:"H",set:1,typ:"C"},{crd:"PYS",fct:"T",rty:"C",set:1.1,typ:"S"},{crd:"RBH",fct:"T",rty:"L",set:1,typ:"C"},{crd:"ROK",fct:"T",rty:"L",set:3.1,typ:"S"},{crd:"RHY",fct:"U",rty:"C",set:3,typ:"C"},{crd:"RTS",fct:"T",rty:"C",set:2.2,typ:"C"},{crd:"RLW",fct:"U",rty:"H",set:1,typ:"C"},{crd:"RHU",fct:"A",rty:"L",set:4.1,typ:"C"},{crd:"RFL",fct:"T",rty:"R",set:1,typ:"C"},{crd:"RHC",fct:"T",rty:"C",set:1,typ:"C"},{crd:"ROG",fct:"N",rty:"H",set:1,typ:"S"},{crd:"RWC",fct:"U",rty:"C",set:4,typ:"C"},{crd:"RFA",fct:"U",rty:"H",set:1,typ:"C"},{crd:"RSE",fct:"T",rty:"H",set:4.1,typ:"C"},{crd:"RBG",fct:"U",rty:"H",set:2,typ:"C"},{crd:"RGG",fct:"U",rty:"H",set:1,typ:"C"},{crd:"RSZ",fct:"N",rty:"R",set:1.1,typ:"C"},{crd:"RSP",fct:"T",rty:"R",set:3,typ:"C"},{crd:"RHW",fct:"N",rty:"C",set:3,typ:"C"},{crd:"SBF",fct:"T",rty:"H",set:4,typ:"C"},{crd:"SAP",fct:"A",rty:"C",set:2,typ:"S"},{crd:"SVO",fct:"U",rty:"C",set:2.1,typ:"S"},{crd:"SSE",fct:"U",rty:"L",set:2.1,typ:"C"},{crd:"STS",fct:"U",rty:"C",set:3,typ:"S"},{crd:"SCS",fct:"N",rty:"C",set:1,typ:"C"},{crd:"SMD",fct:"T",rty:"L",set:1,typ:"C"},{crd:"SFS",fct:"N",rty:"L",set:1,typ:"C"},{crd:"SCD",fct:"A",rty:"H",set:1,typ:"C"},{crd:"SFT",fct:"A",rty:"H",set:1,typ:"C"},{crd:"SOC",fct:"N",rty:"L",set:4,typ:"S"},{crd:"SOA",fct:"A",rty:"C",set:3,typ:"S"},{crd:"SOD",fct:"U",rty:"C",set:3,typ:"S"},{crd:"SOK",fct:"T",rty:"C",set:3,typ:"S"},{crd:"SOT",fct:"N",rty:"C",set:3,typ:"S"},{crd:"SAD",fct:"T",rty:"H",set:1,typ:"C"},{crd:"SHG",fct:"N",rty:"L",set:2,typ:"S"},{crd:"SBI",fct:"U",rty:"C",set:3,typ:"C"},{crd:"SCC",fct:"U",rty:"C",set:4,typ:"C"},{crd:"SPD",fct:"U",rty:"R",set:1,typ:"C"},{crd:"SPM",fct:"U",rty:"L",set:1,typ:"C"},{crd:"STD",fct:"A",rty:"H",set:2.2,typ:"C"},{crd:"SHS",fct:"U",rty:"R",set:2.2,typ:"C"},{crd:"SGF",fct:"N",rty:"H",set:2.2,typ:"C"},{crd:"SKG",fct:"A",rty:"C",set:2,typ:"C"},{crd:"SSR",fct:"U",rty:"L",set:2,typ:"C"},{crd:"SNB",fct:"A",rty:"C",set:2.3,typ:"S"},{crd:"SNP",fct:"A",rty:"H",set:1,typ:"S"},{crd:"SRD",fct:"U",rty:"C",set:1,typ:"S"},{crd:"SSH",fct:"U",rty:"H",set:4,typ:"C"},{crd:"SRM",fct:"N",rty:"H",set:4,typ:"C"},{crd:"SRH",fct:"N",rty:"C",set:2.3,typ:"C"},{crd:"SDN",fct:"N",rty:"L",set:1,typ:"C"},{crd:"SHV",fct:"N",rty:"H",set:1,typ:"S"},{crd:"SRP",fct:"N",rty:"L",set:4,typ:"S"},{crd:"SGG",fct:"N",rty:"H",set:4,typ:"C"},{crd:"SBA",fct:"A",rty:"C",set:1,typ:"C"},{crd:"SKB",fct:"A",rty:"C",set:1,typ:"C"},{crd:"SBR",fct:"T",rty:"C",set:2,typ:"C"},{crd:"SKS",fct:"T",rty:"C",set:4,typ:"C"},{crd:"STM",fct:"T",rty:"R",set:4,typ:"C"},{crd:"SBD",fct:"U",rty:"C",set:2.1,typ:"C"},{crd:"SCV",fct:"N",rty:"R",set:3,typ:"S"},{crd:"SFM",fct:"T",rty:"H",set:1,typ:"C"},{crd:"SSN",fct:"A",rty:"C",set:2.2,typ:"C"},{crd:"SSM",fct:"T",rty:"C",set:2.2,typ:"C"},{crd:"SLH",fct:"N",rty:"C",set:2,typ:"S"},{crd:"SRV",fct:"N",rty:"R",set:2.2,typ:"C"},{crd:"SSI",fct:"A",rty:"R",set:4,typ:"C"},{crd:"SND",fct:"U",rty:"R",set:4,typ:"C"},{crd:"STR",fct:"N",rty:"R",set:2,typ:"S"},{crd:"SPH",fct:"N",rty:"H",set:4.1,typ:"C"},{crd:"SSA",fct:"N",rty:"H",set:2.1,typ:"C"},{crd:"STO",fct:"U",rty:"R",set:2,typ:"S"},{crd:"SDR",fct:"U",rty:"R",set:1,typ:"C"},{crd:"SOL",fct:"U",rty:"C",set:4,typ:"C"},{crd:"SOV",fct:"T",rty:"L",set:4,typ:"S"},{crd:"SHK",fct:"T",rty:"H",set:1,typ:"S"},{crd:"SWR",fct:"A",rty:"R",set:1,typ:"C"},{crd:"SER",fct:"A",rty:"C",set:4,typ:"C"},{crd:"SFA",fct:"A",rty:"H",set:1,typ:"C"},{crd:"STG",fct:"A",rty:"L",set:2,typ:"C"},{crd:"SSS",fct:"A",rty:"R",set:1,typ:"C"},{crd:"SSK",fct:"A",rty:"C",set:3,typ:"C"},{crd:"SWG",fct:"A",rty:"C",set:4,typ:"C"},{crd:"SWM",fct:"A",rty:"R",set:2,typ:"C"},{crd:"STN",fct:"T",rty:"R",set:2,typ:"S"},{crd:"SGI",fct:"T",rty:"C",set:1,typ:"C"},{crd:"SBG",fct:"T",rty:"L",set:1,typ:"C"},{crd:"SCL",fct:"T",rty:"C",set:1,typ:"C"},{crd:"SGA",fct:"T",rty:"H",set:1,typ:"C"},{crd:"STP",fct:"T",rty:"C",set:4,typ:"S"},{crd:"SSG",fct:"U",rty:"C",set:2,typ:"C"},{crd:"SVH",fct:"U",rty:"C",set:2.3,typ:"C"},{crd:"SIN",fct:"U",rty:"C",set:1.1,typ:"S"},{crd:"SYL",fct:"U",rty:"H",set:2.2,typ:"C"},{crd:"SEV",fct:"N",rty:"L",set:3.1,typ:"C"},{crd:"SML",fct:"U",rty:"C",set:1,typ:"C"},{crd:"SYO",fct:"A",rty:"L",set:1,typ:"C"},{crd:"TST",fct:"T",rty:"C",set:2,typ:"S"},{crd:"TBA",fct:"U",rty:"L",set:1,typ:"C"},{crd:"TGL",fct:"U",rty:"R",set:3,typ:"S"},{crd:"TGS",fct:"U",rty:"C",set:2,typ:"C"},{crd:"TPT",fct:"N",rty:"C",set:2.1,typ:"S"},{crd:"TDW",fct:"N",rty:"R",set:1.1,typ:"C"},{crd:"TNL",fct:"N",rty:"L",set:4.1,typ:"C"},{crd:"TEX",fct:"A",rty:"C",set:4,typ:"C"},{crd:"TGN",fct:"A",rty:"C",set:2,typ:"C"},{crd:"TSM",fct:"A",rty:"C",set:1,typ:"C"},{crd:"TUP",fct:"A",rty:"R",set:1,typ:"S"},{crd:"TAB",fct:"T",rty:"C",set:4,typ:"C"},{crd:"TGI",fct:"T",rty:"R",set:2,typ:"C"},{crd:"TDS",fct:"U",rty:"L",set:1.1,typ:"C"},{crd:"TSP",fct:"T",rty:"H",set:4.2,typ:"S"},{crd:"TPG",fct:"N",rty:"H",set:3.1,typ:"C"},{crd:"TMG",fct:"U",rty:"R",set:3,typ:"C"},{crd:"TBB",fct:"T",rty:"R",set:4,typ:"C"},{crd:"TOB",fct:"N",rty:"R",set:1,typ:"S"},{crd:"TWS",fct:"A",rty:"C",set:2,typ:"C"},{crd:"TVG",fct:"A",rty:"R",set:1.1,typ:"C"},{crd:"TXS",fct:"U",rty:"C",set:1,typ:"S"},{crd:"TCG",fct:"T",rty:"C",set:2.1,typ:"S"},{crd:"TWT",fct:"A",rty:"C",set:3,typ:"C"},{crd:"TRN",fct:"T",rty:"H",set:2,typ:"S"},{crd:"TGK",fct:"U",rty:"R",set:4,typ:"C"},{crd:"TSL",fct:"U",rty:"H",set:3,typ:"C"},{crd:"TWG",fct:"U",rty:"C",set:2,typ:"S"},{crd:"UGM",fct:"U",rty:"C",set:2.2,typ:"C"},{crd:"UGL",fct:"T",rty:"R",set:2,typ:"C"},{crd:"UIC",fct:"T",rty:"H",set:2.3,typ:"C"},{crd:"ULR",fct:"U",rty:"H",set:2,typ:"C"},{crd:"URD",fct:"N",rty:"H",set:1,typ:"C"},{crd:"UBL",fct:"T",rty:"R",set:1,typ:"S"},{crd:"UCM",fct:"T",rty:"R",set:1,typ:"C"},{crd:"UEM",fct:"T",rty:"C",set:4,typ:"C"},{crd:"UHS",fct:"T",rty:"H",set:2,typ:"C"},{crd:"UIM",fct:"T",rty:"C",set:2,typ:"C"},{crd:"UWL",fct:"T",rty:"H",set:2,typ:"C"},{crd:"UWS",fct:"T",rty:"R",set:2.3,typ:"C"},{crd:"UIW",fct:"A",rty:"L",set:4,typ:"C"},{crd:"UTM",fct:"U",rty:"C",set:2,typ:"C"},{crd:"UTR",fct:"U",rty:"H",set:2,typ:"C"},{crd:"URB",fct:"U",rty:"L",set:2.3,typ:"C"},{crd:"UPM",fct:"U",rty:"L",set:1,typ:"C"},{crd:"VRP",fct:"N",rty:"L",set:2,typ:"S"},{crd:"VBK",fct:"A",rty:"R",set:2,typ:"C"},{crd:"VTC",fct:"A",rty:"C",set:1,typ:"C"},{crd:"VTW",fct:"A",rty:"R",set:4,typ:"C"},{crd:"VGN",fct:"N",rty:"C",set:1,typ:"C"},{crd:"VND",fct:"U",rty:"R",set:4,typ:"C"},{crd:"VNF",fct:"U",rty:"R",set:1.1,typ:"C"},{crd:"VNS",fct:"U",rty:"H",set:2,typ:"C"},{crd:"VSK",fct:"U",rty:"C",set:4,typ:"S"},{crd:"VCH",fct:"U",rty:"H",set:4.1,typ:"S"},{crd:"VGR",fct:"U",rty:"C",set:2,typ:"S"},{crd:"VOB",fct:"T",rty:"R",set:4,typ:"S"},{crd:"VCG",fct:"T",rty:"C",set:1,typ:"C"},{crd:"VES",fct:"N",rty:"L",set:2.1,typ:"C"},{crd:"VYE",fct:"N",rty:"C",set:2,typ:"S"},{crd:"WBY",fct:"T",rty:"R",set:2,typ:"C"},{crd:"WBU",fct:"T",rty:"C",set:1.1,typ:"C"},{crd:"WMR",fct:"A",rty:"H",set:2.1,typ:"C"},{crd:"WTK",fct:"A",rty:"H",set:4,typ:"C"},{crd:"WMM",fct:"A",rty:"H",set:1,typ:"C"},{crd:"WTW",fct:"T",rty:"C",set:1,typ:"C"},{crd:"WTA",fct:"U",rty:"L",set:4,typ:"C"},{crd:"WWP",fct:"U",rty:"H",set:1.1,typ:"C"},{crd:"WWR",fct:"U",rty:"C",set:3,typ:"C"},{crd:"WOD",fct:"U",rty:"R",set:4,typ:"S"},{crd:"WFM",fct:"T",rty:"H",set:1.1,typ:"C"},{crd:"WWS",fct:"U",rty:"R",set:1,typ:"C"},{crd:"WBH",fct:"T",rty:"R",set:1.1,typ:"C"},{crd:"WCS",fct:"T",rty:"C",set:1,typ:"C"},{crd:"WPD",fct:"T",rty:"C",set:1,typ:"C"},{crd:"WFB",fct:"N",rty:"C",set:1.1,typ:"C"},{crd:"WFS",fct:"N",rty:"H",set:1,typ:"C"},{crd:"WBG",fct:"N",rty:"L",set:1.1,typ:"C"},{crd:"XCR",fct:"N",rty:"C",set:2,typ:"C"},{crd:"XDH",fct:"N",rty:"R",set:3,typ:"C"},{crd:"XHS",fct:"N",rty:"C",set:2.2,typ:"C"},{crd:"XHU",fct:"N",rty:"C",set:1,typ:"C"},{crd:"XRF",fct:"N",rty:"C",set:2,typ:"C"},{crd:"XSH",fct:"N",rty:"L",set:1,typ:"C"},{crd:"XDV",fct:"N",rty:"H",set:1,typ:"C"},{crd:"XRW",fct:"N",rty:"H",set:2,typ:"S"},{crd:"YWC",fct:"T",rty:"C",set:2,typ:"C"},{crd:"YNS",fct:"N",rty:"L",set:2.2,typ:"C"},{crd:"ZPM",fct:"T",rty:"R",set:1.1,typ:"C"},{crd:"ZTU",fct:"N",rty:"L",set:1,typ:"C"},{crd:"ZIN",fct:"N",rty:"C",set:1,typ:"C"},{crd:"ZMT",fct:"N",rty:"C",set:3,typ:"C"},{crd:"ZSH",fct:"T",rty:"L",set:1,typ:"C"}],Je=[["ASQ",["SLG","SLG"]],["CGL",["CGF"]],["DHC",["DYF"]],["DTD",["TOT"]],["FGD",["FGA","FGB","FGG"]],["IBA",["AVB"]],["IZK",["IFL","IFR"]],["RHU",["RSC"]],["SLS",["MMY"]],["TSL",["FUN"]],["WHR",["WHC"]]];class Qe{raw={["C"]:{["A"]:0,["N"]:0,["T"]:0,["U"]:0},["S"]:{["A"]:0,["N"]:0,["T"]:0,["U"]:0}};addStat(t,e){this.raw[t][e]++}g(t,e){return this.raw[t][e]}typeSum(t){return ve.map(e=>this.g(t,e)).reduce((e,i)=>e+i,0)}getTotal(){const t=this.typeSum("C"),e=this.typeSum("S");return[t,e,t+e]}getFactTotal(t){const e=this.g("C",t),i=this.g("S",t);return[e,i,e+i]}}const l=(n,t)=>({card:n,num:t}),fi={name:"Official 1 - 3",id:"SBE1",decks:[{name:"Alloyin Starter",factions:["A"],cards:[l("SYO",1),l("BSS",1),l("SFT",2),l("SNP",2),l("TSM",2),l("SSS",2),l("ALG",2),l("MXW",3),l("TUP",3),l("FPS",3),l("MND",3),l("IWC",3),l("SKB",3)]},{name:"Nekrium Starter",factions:["N"],cards:[l("SFS",1),l("GGD",1),l("FFD",3),l("EPD",2),l("CCR",2),l("HGS",2),l("DSS",2),l("BWK",2),l("GBG",3),l("DSK",3),l("GRP",3),l("VGN",3),l("XHU",3)]},{name:"Tempys Starter",factions:["T"],cards:[l("FBC",1),l("RBH",1),l("CFB",3),l("FSM",2),l("FSH",2),l("FSS",2),l("PMS",2),l("RFL",2),l("UBL",3),l("WPD",3),l("SGI",3),l("AMY",3),l("WCS",3)]},{name:"Uterra Starter",factions:["U"],cards:[l("UPM",1),l("EHW",1),l("FRR",3),l("SPD",2),l("HTP",2),l("LSS",2),l("SDR",2),l("SRD",2),l("FWR",3),l("DBP",3),l("GHT",3),l("GSS",3),l("TXS",3)]},{name:"Cruel Corrosion",factions:["A","N"],cards:[l("IHA",1),l("WBG",1),l("OXP",1),l("DFR",1),l("APM",1),l("SNP",1),l("GRM",2),l("ETN",2),l("DHW",2),l("OXM",2),l("AEN",2),l("ATG",2),l("CTI",2),l("CTW",2),l("FPS",2),l("GRW",2),l("MTT",2),l("SAP",2)]},{name:"Death March",factions:["N","T"],cards:[l("ZTU",1),l("VRP",1),l("GGP",1),l("EPD",1),l("DBT",1),l("BSM",1),l("TDW",2),l("NGT",2),l("UBL",2),l("FWK",2),l("BZD",2),l("CSB",2),l("SLH",2),l("MMH",2),l("LSK",2),l("GBG",2),l("CFG",2),l("DSK",2)]},{name:"Dinosaurs!",factions:["T","U"],cards:[l("TDS",1),l("SSR",1),l("FRR",1),l("ULR",1),l("UTR",1),l("BTM",1),l("UGL",2),l("EHN",2),l("SPD",2),l("GHB",2),l("FLN",2),l("SML",2),l("RFL",2),l("OXS",2),l("UTM",2),l("TWG",2),l("ENR",2),l("DBP",2)]},{name:"Wyvern's Wrath",factions:["T","U"],cards:[l("CSW",1),l("SMD",1),l("FRR",1),l("UIC",1),l("CFB",1),l("UGL",2),l("FSH",2),l("FLN",2),l("WPD",1),l("TWG",2),l("TCG",2),l("TGS",2),l("SML",2),l("SVH",1),l("SCL",2),l("RTS",1),l("FWB",2),l("ENR",2),l("ABR",2)]},{name:"Ironmind Intuition",factions:["A","N"],cards:[l("IMA",1),l("GMP",1),l("OXA",1),l("EPD",1),l("OJC",1),l("ESU",2),l("OXM",2),l("MMA",2),l("SAP",1),l("AFO",2),l("GBG",2),l("CTW",2),l("SRH",1),l("TSM",2),l("SLH",1),l("MTT",1),l("DCR",1),l("DFB",1),l("BSR",1),l("LGT",1),l("XRF",2),l("MMX",1)]},{name:"Nethershriek Negation",factions:["N","T"],cards:[l("SBG",1),l("NSH",1),l("FFU",1),l("EWE",1),l("BFM",1),l("WBH",1),l("UWS",1),l("TGI",2),l("RFL",2),l("GRM",1),l("ASG",1),l("YWC",2),l("XRF",2),l("WPD",2),l("WCS",2),l("WBU",2),l("TCG",1),l("FSK",1),l("SLH",2),l("CFG",1),l("RTS",2)]},{name:"Ridgeback's Rage",factions:["A","U"],cards:[l("URB",1),l("AGK",1),l("ESP",1),l("FRR",1),l("NXT",1),l("ALG",1),l("FGB",1),l("PHS",2),l("TUP",1),l("EWT",2),l("PTR",1),l("VBK",1),l("AGC",1),l("AEN",2),l("ETN",1),l("FPS",2),l("MXW",2),l("GHT",1),l("TWG",2),l("SNB",1),l("SML",1),l("JPK",1),l("ENR",1),l("IWC",1)]},{name:"Spare Parts",factions:["N"],cards:[l("SEV",1),l("SHG",1),l("TPG",1),l("CGL",1),l("FRV",1),l("HFA",2),l("XDH",1),l("GRM",1),l("SCV",1),l("DFB",2),l("EBW",2),l("GBG",2),l("GLF",2),l("XHS",2),l("SOT",1),l("XRF",2),l("SCS",1),l("ZMT",1),l("SLH",1),l("VYE",1),l("XCR",2),l("XHU",1)]},{name:"Future Forged",factions:["A"],cards:[l("NXA",1),l("IMD",1),l("FOL",1),l("SFA",2),l("SFT",1),l("SCD",1),l("CAG",1),l("ESU",1),l("NNS",1),l("FPM",1),l("PRI",1),l("SSS",1),l("CTG",1),l("TSM",2),l("IWC",1),l("MMA",2),l("TGN",2),l("MTT",1),l("SKG",1),l("AFO",1),l("MMV",1),l("TWS",1),l("SBA",2),l("SSK",1),l("JPK",1)]},{name:"Burning Rage",factions:["T"],cards:[l("ROK",1),l("KKK",1),l("MOE",1),l("AFR",1),l("FBI",1),l("FSS",2),l("FLN",2),l("CCT",2),l("BRN",2),l("WPD",2),l("SSM",2),l("SOK",1),l("RTS",2),l("FSK",2),l("CWK",2),l("CFG",2),l("BSW",2),l("FMS",2)]},{name:"Awakened Fury",factions:["U"],cards:[l("DZD",1),l("SSE",1),l("BTR",1),l("TSL",1),l("MPH",1),l("CDT",1),l("DYB",1),l("BTH",2),l("TMG",2),l("BWD",2),l("RHY",2),l("SBD",2),l("GMR",2),l("STS",1),l("OSL",2),l("SBI",2),l("LYS",2),l("TGS",2),l("SOD",2)]}]},gi={name:"Official 4",id:"SBE2",decks:[{name:"Titan's Assault",factions:["N","T"],cards:[l("ATT",1),l("TNL",1),l("RSE",1),l("SPH",1),l("SCV",2),l("ABB",2),l("TBB",2),l("BRN",2),l("FLN",2),l("CMF",2),l("XDH",2),l("FST",2),l("TAB",2),l("MDE",2),l("FSK",2),l("FLH",2),l("CBB",2)]},{name:"Verdant Fortress",factions:["A","U"],cards:[l("NGQ",1),l("RHU",1),l("VCH",1),l("ESG",1),l("PLW",2),l("NNS",2),l("SND",2),l("WOD",2),l("IBR",2),l("BWD",2),l("SBI",2),l("RWC",2),l("TEX",2),l("SER",2),l("SWG",2),l("SCC",2),l("DYB",2)]},{name:"Umbruk Uprising",factions:["T","U"],cards:[l("LUC",1),l("BWT",1),l("GHR",1),l("TSP",1),l("WBH",1),l("COD",1),l("SDR",1),l("ZPM",1),l("OXS",1),l("WOD",1),l("RWC",2),l("SSG",2),l("VGR",2),l("CFG",2),l("UEM",2),l("FFG",2),l("UGL",2),l("DMR",2),l("RTS",2),l("CWK",2)]},{name:"Onyxium Twilight",factions:["A","N"],cards:[l("EPH",1),l("DTD",1),l("POX",1),l("DDS",1),l("OHV",1),l("PHS",1),l("DFB",1),l("TDW",1),l("CAG",1),l("ALG",1),l("TUP",2),l("CTW",2),l("XCR",2),l("SSK",2),l("SRH",2),l("ATG",2),l("MTT",2),l("SLH",2),l("GLF",2),l("AFO",2)]}]},mi={name:"Set 1 & 2 Tournies",id:"T1309",decks:[{name:"Axel: Lifegain",factions:["T","U"],cards:[l("AGD",3),l("EHW",3),l("FRR",3),l("FIN",1),l("UPM",1),l("LKP",2),l("BTM",2),l("LBL",3),l("GSS",3),l("RFA",3),l("GHB",3),l("EFP",3)]},{name:"Derk: Metaminds",factions:["A"],cards:[l("OJC",3),l("DMW",3),l("MMV",3),l("JPK",3),l("MMO",3),l("GMP",3),l("ALS",3),l("MMA",3),l("SFA",3),l("BTN",3)]},{name:"Foxhull: Grow Wide",factions:["U"],cards:[l("DBP",3),l("EHW",2),l("FRR",3),l("FWT",3),l("UPM",3),l("LKP",2),l("BTM",3),l("HTR",2),l("LBD",2),l("RFA",3),l("GHB",2),l("SDR",2)]},{name:"Hectares: Dino Attack",factions:["A","U"],cards:[l("ALS",3),l("TDS",3),l("FRR",3),l("WWP",3),l("SML",2),l("BSG",3),l("JPK",2),l("ODC",3),l("NXT",2),l("WMM",3),l("GHB",3)]},{name:"Klaven: Mono-N",factions:["N"],cards:[l("SCS",3),l("ROG",1),l("GGP",1),l("GGD",3),l("WFS",1),l("DSS",3),l("ZTU",1),l("GBG",3),l("HFA",3),l("EXD",1),l("EPD",1),l("BSR",1),l("MRF",2),l("HGS",3),l("GTH",3)]},{name:"Phoenyx: Free Spell Dmg",factions:["T","U"],cards:[l("SHK",3),l("MOE",3),l("FRR",3),l("LSK",3),l("FFU",3),l("UBL",3),l("WWS",3),l("FSS",3),l("ENR",3),l("MMH",3)]},{name:"Technogeek5000: Grow Wide",factions:["N","U"],cards:[l("DBP",2),l("EHW",2),l("FRR",3),l("HTP",2),l("UPM",3),l("LKP",2),l("GHT",3),l("GGP",2),l("LBD",1),l("EPD",2),l("DBT",2),l("SPD",3),l("SDR",3)]},{name:"Thematik: Level Up",factions:["A","T"],cards:[l("IWC",3),l("FSS",3),l("ETN",1),l("WPD",2),l("FSM",1),l("AHL",1),l("UBL",3),l("SMD",2),l("BTN",3),l("LSK",1),l("MMH",3),l("FFU",1),l("TSM",3),l("ALG",3)]},{name:"TinyGrimes: NT Shapers",factions:["N","T"],cards:[l("DSS",3),l("FSS",3),l("EPD",2),l("GTH",3),l("FSM",1),l("MOE",1),l("UBL",3),l("GGP",3),l("GBG",1),l("LSK",3),l("HGS",1),l("CTW",1),l("SHK",3),l("GGD",1),l("DBT",1)]}]},pi={name:"The Forge",id:"TG10",decks:[{name:"DarkSoulSP: Grim Debuff",factions:["N","U"],cards:[l("BWK",3),l("TDS",2),l("FRR",3),l("WWP",3),l("GGP",3),l("GGD",3),l("DBT",1),l("WFS",3),l("CTW",3),l("EPD",3),l("GHB",3)]},{name:"ErrorAsh: Burn",factions:["N","T"],cards:[l("UBL",2),l("EFM",2),l("FBI",3),l("ESK",3),l("FLN",3),l("EFP",3),l("MOE",3),l("FSS",3),l("SHK",3),l("EPD",3),l("CHV",2)]},{name:"ErrorAsh: Farmer Tarsus",factions:["N","U"],cards:[l("WWS",3),l("DYB",3),l("FRR",3),l("SYL",3),l("EPD",3),l("SSE",2),l("NSH",2),l("TDW",3),l("NFF",2),l("CHR",2),l("LKP",2),l("EXD",2)]},{name:"ErrorAsh: Necro Mobiltiy",factions:["N","T"],cards:[l("NSH",2),l("SMD",2),l("DDD",3),l("TDW",3),l("VRP",3),l("WCS",3),l("BSM",3),l("SHG",2),l("TGI",2),l("EPD",3),l("FVA",2),l("DBT",1),l("TRN",1)]},{name:"Hans: Yetis",factions:["T","U"],cards:[l("UWL",3),l("FFU",3),l("WBY",3),l("UIM",3),l("WBU",3),l("SSR",1),l("TRN",1),l("GTT",1),l("GCR",3),l("FRR",3),l("UBL",3),l("WWP",3)]},{name:"MingisTheKing: Mobility",factions:["N","T"],cards:[l("DDD",3),l("DBT",3),l("EPD",3),l("EFP",3),l("GGP",3),l("LSK",3),l("SHK",3),l("UBL",3),l("WCS",3),l("ZTU",3)]},{name:"Noetherian: Shambler",factions:["N","U"],cards:[l("XSH",3),l("SPM",3),l("FRR",3),l("ODC",3),l("SSE",3),l("ESK",3),l("TGS",3),l("XRF",3),l("VRP",3),l("URB",3)]},{name:"Noetherian: Tempo",factions:["T","U"],cards:[l("RBH",3),l("TDS",3),l("FRR",3),l("WWP",3),l("EFP",3),l("AMY",2),l("FVA",2),l("ENR",3),l("ZSH",3),l("EHW",3),l("GHB",2)]},{name:"Piquadore: Zombies",factions:["N","T"],cards:[l("BWK",2),l("KOD",2),l("CYC",3),l("GRM",3),l("VYE",3),l("XRW",3),l("MOE",2),l("ZTU",3),l("BSM",3),l("EPD",3),l("DSS",3)]},{name:"Stautmeister: Yeti Mobility",factions:["T","U"],cards:[l("AGM",3),l("TDS",2),l("FRR",3),l("WWP",3),l("CSW",3),l("FLN",3),l("EFP",2),l("UWL",3),l("WBY",2),l("WCS",2),l("EHW",2),l("SHS",2)]},{name:"Technonaut: Steelscale",factions:["A","T"],cards:[l("UHS",2),l("FLN",3),l("STG",3),l("CRC",3),l("SHK",3),l("EFP",2),l("WMR",2),l("WMM",3),l("JPK",3),l("SMD",3),l("FVA",3)]},{name:"Technonaut: Woebringer",factions:["N","T"],cards:[l("LSK",2),l("WBG",3),l("EPD",3),l("DDD",3),l("SHK",3),l("EFP",3),l("ZTU",2),l("GGD",2),l("GGP",3),l("CTW",3),l("DBT",3)]},{name:"Zrandles: Metaminds",factions:["A","N"],cards:[l("DMW",3),l("GMP",3),l("MMA",3),l("MMV",2),l("TDW",3),l("VRP",3),l("EPD",3),l("SHG",2),l("OJC",2),l("ESK",2),l("CHV",2),l("CTW",2)]},{name:"Zrandles: Tempo",factions:["N","T"],cards:[l("CTW",1),l("GCR",1),l("CFG",1),l("FZS",1),l("FBI",3),l("MOE",3),l("EFP",3),l("LSK",3),l("FLN",3),l("SHK",3),l("RTS",3),l("GGP",3),l("UBL",2)]}]},yi={name:"Set 1 Fundecks",id:"FUN1",decks:[{name:"Frankenbomb",factions:["N"],cards:[l("DFB",3),l("BSR",3),l("HGS",3),l("HFA",3),l("FFD",3),l("XSH",3),l("XHU",3),l("WBG",3),l("GBG",3),l("CTI",3)]},{name:"Hangry Beasts",factions:["T","U"],cards:[l("TBA",3),l("SVH",3),l("MBP",2),l("FSH",3),l("RBH",3),l("FBC",3),l("LBR",2),l("CFB",3),l("AAK",3),l("KKK",2),l("FRR",1),l("FIN",1),l("IBF",1)]},{name:"Metamind Zapper",factions:["A","T"],cards:[l("MMA",3),l("DMW",3),l("GMP",3),l("SYO",3),l("KAW",3),l("SHK",3),l("CTL",2),l("CAG",2),l("MSC",2),l("MTS",2),l("ASG",2),l("ESU",2)]},{name:"Plant Party",factions:["N","U"],cards:[l("CTV",3),l("TDW",3),l("BTS",3),l("CHR",3),l("GMR",3),l("KOD",2),l("LKP",2),l("SHV",2),l("DBA",2),l("CCR",2),l("PTB",2),l("FIN",1),l("DBT",2)]},{name:"Voltron",factions:["A"],cards:[l("FGA",3),l("FGB",3),l("FGD",3),l("FGG",3),l("AFS",3),l("BSS",3),l("PRI",3),l("TUP",2),l("JPK",2),l("BWH",2),l("SFT",3)]},{name:"Do Fear The Reaper",factions:["A","N"],cards:[l("CTI",3),l("DFR",3),l("GRW",3),l("LGT",3),l("OXM",3),l("OXP",3),l("PHM",3),l("CTW",2),l("NNS",2),l("OXA",2),l("SDN",3)]},{name:"Muadib",factions:["N","U"],cards:[l("DBA",3),l("DYL",3),l("GSW",3),l("LBD",3),l("MMW",3),l("NCW",3),l("SRV",3),l("LBL",2),l("MSP",2),l("VYE",2),l("SBD",3)]},{name:"Triassic Park",factions:["T","U"],cards:[l("URB",3),l("UTR",3),l("UTM",3),l("ULR",3),l("UIC",3),l("UGL",3),l("RTS",3),l("BRN",2),l("LBR",2),l("IBF",2),l("GHB",3)]},{name:"Whacky Whinds",factions:["N","T"],cards:[l("DDD",3),l("WBH",3),l("HMF",3),l("WCS",3),l("GGP",3),l("SAD",3),l("SDN",3),l("EWE",3),l("SBG",3),l("ZSH",3)]},{name:"WWP 4 Victory",factions:["A","U"],cards:[l("WWP",3),l("EHN",2),l("SDR",2),l("HTR",2),l("MML",2),l("HTP",2),l("SHS",3),l("MND",2),l("NXC",2),l("CDT",2),l("PTB",2),l("SVO",2),l("MPH",2),l("SYO",2)]},{name:"Braaiins",factions:["N"],cards:[l("XDV",3),l("XRW",3),l("ONN",2),l("SLH",2),l("FWK",2),l("BWK",2),l("URD",2),l("TPG",2),l("DSS",2),l("KOD",2),l("ZMT",2),l("RSZ",2),l("BLW",2),l("CSB",2)]},{name:"Wanderin",factions:["N","U"],cards:[l("LYS",3),l("STR",2),l("MBP",2),l("OSL",2),l("RLW",3),l("SSR",1),l("SVO",2),l("SSE",2),l("RHW",3),l("SYL",2),l("TGS",2),l("TMG",3),l("XDH",3)]},{name:"Walls",factions:["A","T"],cards:[l("CDC",3),l("CTG",3),l("CRC",3),l("DCS",3),l("FRI",3),l("FGA",2),l("OBB",3),l("FVA",2),l("TGN",2),l("OWH",3),l("STN",3)]},{name:"Snakes In A Lane",factions:["A","U"],cards:[l("AFO",3),l("DSV",3),l("PSC",3),l("SHS",3),l("STO",3),l("NCL",2),l("VNF",3),l("LYS",2),l("SVO",1),l("VNS",3),l("TXS",2),l("ART",2)]},{name:"Benny & Izzy",factions:["A","T"],cards:[l("BRN",3),l("EFM",2),l("IZK",3),l("JPK",1),l("MTT",1),l("NNS",1),l("OBB",2),l("OWF",2),l("OEX",3),l("PRI",2),l("PTR",1),l("TST",1),l("FLS",2),l("BLH",3),l("SHK",3)]}]},fe=[fi,gi,mi,pi,yi];class Ie{state;constructor(t){this.state=t}getState(){return this.state}get adjacent(){return f.adjacentPositions(this.lane)}get attack(){return this.state.attack+this.modSum("AT")}get activationAvailable(){return this.state.negateActivate?!1:this.state.activationAvailable}set activationAvailable(t){this.state.activationAvailable=t}get aggressive(){return this.state.aggressive||this.modBool("AG")}set aggressive(t){this.state.aggressive=t}get armor(){return this.negateArmor?0:this.state.armor+this.modSum("AR")}get armorDmg(){return this.state.armorDmg}set armorDmg(t){this.state.armorDmg=t}get bonus(){return this.state.bonus}set bonus(t){this.state.bonus=t}get breakthrough(){return this.state.breakthrough||this.modBool("BT")}set breakthrough(t){this.state.breakthrough=t}get changed(){return this.state.changed||this.negateDefender||this.negateArmor||this.negateActivate||this.negateMobility||this.negateRegen||this.state.triggers.some(t=>t.changes)}set changed(t){this.state.changed=t}get code(){return this.state.code}get defender(){return this.negateDefender?!1:this.state.defender||this.modBool("DF")}set defender(t){this.negateDefender||(this.state.defender=t,this.enforceEffects("DF"))}get effects(){return this.state.effects}get extraBattles(){return this.state.extraBattles}set extraBattles(t){this.state.extraBattles=t}get faction(){return W.getCard(this.code).faction}get health(){return this.state.health+this.modSum("HL")}get id(){return this.state.id}get isActive(){return!this.sleeping||this.aggressive}isTribe(t){return W.getCard(this.code).isTribe(t)}get lane(){return this.state.lane}get level(){return W.getCard(this.code).level}get maxHealth(){return this.state.maxHealth+this.modSum("MH")}get mobility(){return this.negateMobility?0:this.state.mobility+this.modSum("MB")}get mobilityAvailable(){return this.state.mobilityAvailable}set mobilityAvailable(t){this.state.mobilityAvailable=t}get mods(){return this.state.mods}get negateActivate(){return this.state.negateActivate}set negateActivate(t){this.state.negateActivate=t}get negateArmor(){return this.state.negateArmor||this.modBool("NA")}set negateArmor(t){this.state.negateArmor=t,this.enforceEffects("AR")}get negateDefender(){return this.state.negateDefender||this.modBool("ND")}set negateDefender(t){this.state.negateDefender=t,this.enforceEffects("DF")}get negateMobility(){return this.state.negateMobility||this.modBool("NM")}set negateMobility(t){this.state.negateMobility=t}get negateRegen(){return this.state.negateRegen||this.modBool("NM")}set negateRegen(t){this.state.negateRegen=t}get opposed(){const t=p.crTarg();return t.player=S.toTarget(!this.owner),t.lanes=f.oppositeLane(this.lane),f.creatByTarget(t)[0]}get owner(){return this.state.owner}get poison(){return this.state.poison+this.modSum("PN")}get rank(){return S.toPlayer(this.owner).rank}get regen(){return this.negateRegen?0:this.state.regen+this.modSum("RG")}get sleeping(){return this.state.sleeping}set sleeping(t){this.state.sleeping=t}get status(){return this.state.status}set status(t){this.state.status=t}get triggers(){return this.state.triggers}buff(t,e,i=void 0){t!==0&&(this.state.attack+=t,this.enforceEffects("AT")),e!==0&&(this.state.health+=e,this.state.maxHealth+=e,this.enforceEffects("CH"),$.deathProdder(this,i))}addArmor(t){if(!this.negateArmor){const e=this.state.armor+t;this.state.armor=Math.max(0,e),this.enforceEffects("AR")}}addMobility(t){if(!this.negateMobility){const e=this.state.mobility+t;this.state.mobility=Math.max(0,e)}}addPoison(t){const e=this.state.poison+t;this.state.poison=Math.max(0,e)}addRegen(t){if(!this.negateRegen){const e=this.state.regen+t;this.state.regen=Math.max(0,e)}}heal(t){if(t===0)return 0;const e=Math.min(this.health+t,this.maxHealth)-this.health;return this.state.health+=e,e}setHealth(t){this.state.health=t}hurt(t,e=!1){if(t<1)return[0,0];const i=Math.max(Math.min(t,this.armor-this.armorDmg),0);let s=t-i,h=this.health-s;this.state.armorDmg+=i;let d=0;return e&&h<0&&(d=s-this.health,s=this.health),s>0&&(this.state.health-=s),[s,d]}hurtBattle(t,e,i=!1){const s=this.hurt(t,i);return s[0]>0&&D.addEvents(O.damage(!0,s[0],!0,!0,this,e)),s[1]}hurtDirect(t,e,i=void 0){const s=this.hurt(t,!1);return s[0]>0&&(m.new().crd(e).txt(` dealt ${t} dmg to `).crd(this.code).txt(".").go(),D.addEvents(O.damage(!1,s[0],!1,!0,this,void 0)),$.deathProdder(this,i)),s[0]}modIdx(t){return this.mods.findIndex(e=>e.granter===t)}modEffectPropagator(t){t.type==="AT"?this.enforceEffects("AT"):t.type==="HL"?(this.enforceEffects("CH"),$.deathProdder(this)):t.type==="AR"||t.type==="NA"?this.enforceEffects("AR"):(t.type==="DF"||t.type==="ND")&&this.enforceEffects("DF")}modSum(t){return this.mods.filter(e=>e.type===t).map(e=>e.value).reduce((e,i)=>e+i,0)}modBool(t){return this.mods.some(e=>e.type===t&&e.value===1)}hasMod(t){return this.modIdx(t)>-1}addMod(t){this.mods.push(t),this.modEffectPropagator(t)}addModSafe(t){this.mods.findIndex(i=>i.granter===t.granter&&i.type===t.type)===-1&&this.addMod(t)}removeMod(t){const e=this.state.mods.filter(i=>i.granter===t);this.state.mods=this.state.mods.filter(i=>i.granter!==t),e.forEach(i=>this.modEffectPropagator(i))}removeModSafe(t){this.hasMod(t)&&this.removeMod(t)}expireMod(t){this.state.mods.splice(this.state.mods.indexOf(t),1)}endActivation(){this.state.activationAvailable=!1,$.deathCheck(),C.actionDone()}move(t){this.state.lane=t,_t.positionChange(this.owner),D.addEvents(O.creature("MOV",this))}addEffect(t,e){const i=p.effect(t,e);return this.effects.push(i),i}enforceEffects(t,e=!1){this.effects.filter(i=>i.watch===t).filter(i=>i.area==="A"||i.area==="C"&&this.owner===e).forEach(i=>W.getCard(i.logicCode).enforceEffect(i,this))}jr4(t,e){const i=p.trigger(t,e);return i.cardCode=this.code,i.creatId=this.id,this.triggers.push(i),i}removeTrigger(t){const e=this.triggers.indexOf(t);e>-1?this.triggers.splice(e,1):console.error("Wery curious, could not find trigger to remove",t)}wipeAll(){this.state.mods=[],this.state.triggers=[],this.state.effects=[],this.state.hints=[],this.state.armor=0,this.state.mobility=0,this.state.poison=0,this.state.regen=0,this.state.aggressive=!1,this.state.defender=!1,this.state.breakthrough=!1,this.state.defender=!1,this.state.negateDefender=!1,this.state.negateArmor=!1,this.state.bonus=0,this.state.changed=!0,this.state.negateActivate=!0,f.creatByTarget(p.crTarg()).forEach(t=>{t.removeMod(this.id),t.enforceEffects("PS",this.owner)}),this.enforceEffects("AT"),this.enforceEffects("AR"),this.enforceEffects("CH"),_t.defenderChange(this.owner)}get hints(){return this.state.hints}aiHints(){return this.hints}}class p{static creatureState(t,e){return{activationAvailable:!0,aggressive:!1,armor:0,armorDmg:0,attack:0,bonus:0,breakthrough:!1,changed:!1,code:"",defender:!1,effects:[],extraBattles:0,health:0,hints:[],id:"",lane:e,maxHealth:0,mobility:0,mobilityAvailable:!0,mods:[],negateActivate:!1,negateArmor:!1,negateDefender:!1,negateMobility:!1,negateRegen:!1,owner:t,poison:0,regen:0,sleeping:!0,status:"A",triggers:[]}}static effect(t,e){return{area:"A",watch:t,logicCode:e}}static freeCard(t){return{id:M.genId(),condition:p.target("TH"),sourceCard:t}}static mod(t,e,i=""){return{type:t,value:typeof e=="boolean"?e?1:0:e,granter:i,expiry:"NN"}}static trigger(t,e){return{type:t,logicCode:e,cardCode:"",creatId:"",customCode:"",interactive:!1,changes:!1}}static triggerReaction(t,e,i,s){return{event:t,ownerPlayerA:i,creatId:"",cardCode:"",trigger:e,host:s}}static basicAction(t){return{zone:"N",key:t,host:"",param:""}}static fieldSelectAction(t,e=-1,i=!0){return{zone:"F",key:t,playerA:i,lane:e,host:"",param:""}}static deckSelectAction(t,e,i){return{zone:"N",key:t,card:e,position:i,host:"",param:""}}static handSelectAction(t,e="",i="",s=-1){return{zone:"H",key:t,card:e,cost:i,position:s,host:"",param:""}}static playerSelectAction(t,e){return{zone:"P",key:t,playerA:e,host:"",param:""}}static draftSelectAction(t,e,i){return{zone:"N",key:t,index:e,pack:i,host:"",param:""}}static ddf4(){return{zone:"N",key:"ACTV",host:"",param:""}}static menuButtonAction(t){return{zone:"N",key:"MNBT",host:"",param:t}}static actionifier(t,e,i,s){const h=t;return h.key=e,h.host=i,h.param=s,h}static target(t){return{target:t,level:"LA",canLevel:!1,faction:"X",player:"X",card:"A",field:"A",creatStatus:"A",tribe:"AN",notMe:"",hasArmor:!1,canArmor:!1,hasDefender:!1,canDefender:!1,hasMobility:!1,canMove:!1,hasPoison:!1,hasRegen:!1,canRegen:!1,cardCode:"",victims:""}}static actionTarget(t,e,i,s){return p.actionifier(p.target(t),e,i,s)}static crTarg(){const t=p.target("TF");return t.field="O",t.creatStatus="V",t}static crActTarg(t,e,i){return p.actionifier(p.crTarg(),t,e,i)}static crNotMeTarg(t){const e=p.target("TF");return e.field="O",e.creatStatus="V",e.notMe=t,e}static crNotMeActTarg(t,e,i,s){return p.actionifier(p.crNotMeTarg(e),t,i,s)}static crFriendTarg(){const t=p.crTarg();return t.player="F",t}static crFriendActTarg(t,e,i){return p.actionifier(p.crFriendTarg(),t,e,i)}static crFriendNotMeTarg(t){const e=p.crNotMeTarg(t);return e.player="F",e}static crFriendNotMeActTarg(t,e,i,s){return p.actionifier(p.crFriendNotMeTarg(e),t,i,s)}static crEnemyTarg(){const t=p.crTarg();return t.player="E",t}static crEnemyActTarg(t,e,i){return p.actionifier(p.crEnemyTarg(),t,e,i)}static playerTarg(t){const e=p.target("TP");return e.player=S.toTarget(t),e}static playerActTarg(t,e,i,s){return p.actionifier(p.playerTarg(t),e,i,s)}static lvlHandActTarg(t,e){const i=this.actionTarget("TH","CARD",t,e);return i.player="F",i.canLevel=!0,i.hint=["CD"],i}static emptyTarg(){const t=p.target("TF");return t.field="E",t}static emptyActTarg(t,e,i){return p.actionifier(p.emptyTarg(),t,e,i)}static emptyPlayerTarg(t){const e=p.emptyTarg();return e.player=S.toTarget(t),e}static emptyPlayerActTarg(t,e,i,s){return p.actionifier(p.emptyPlayerTarg(t),e,i,s)}}class Mt{constructor(t){this.code=t,this.level=parseInt(t.substring(3))}code;consistent=!1;faction="X";cardCode(){return Mt.extractCardCode(this.code)}image(t){return this.type==="S"?this.fixedImage(t):this.leveledImage(t)}leveledImage(t){return this.rawImage(this.code,t)}fixedImage(t){return this.rawImage(this.cardCode(),t)}rawImage(t,e){return`card/${e?"b":"s"}/${this.faction}/${t}.jpg`}isFree=!1;level;maxLevel=3;minLevel=1;name="";overload=!1;rarity="T";spice;text="";get type(){return "C"}hints;addSp(t,e){}aiHints(){return this.hints??[]}bonus;bonusPlay(){return this?.bonus?.play??0}bonusExist(){return this?.bonus?.exist??0}canLevel(){return this.level<this.maxLevel}enforceEffect(t,e){console.error("Effect without an enforcement routine",t)}getCardActions(t,e){return console.error(`Request for ${m.fastName(this.code)} actions ended up in baseclass: `,t),[]}handleAction(t){console.error("Custom card action did not have handler written for it.",t.key)}levelSpice(){return this.spice??[]}levelUpCard(){return this.canLevel()?`${this.cardCode()}${this.level+1}`:this.code}lValB(t){return t[this.level-1]}lValN(t){return t[this.level-1]}lValS(t){return t[this.level-1]}playTargets(){return[]}ddf8(t){return!1}jr8(t){throw new Error(`Unhandled trigger resolve in card ${this.code}, trigger ${t.trigger.type}`)}ddp9(t,e,i,s,h=0){return he.ddp9(t,e,i,s,h)}ddp6(t=0){const e=this.avgCreatureStats(t);return this.ddp9(1,e[0]+e[1],e[0],0,0)}avgCreatureStats(t=0){const e=t===0?this.level:t,i=[[4,8,14],[7,11,17]];let s;e===1?s=[1,0,0]:e===2?s=[.5,.5,0]:s=[.2,.4,.4];let h=0,d=0;return[0,1,2].forEach(g=>{h+=s[g]*i[0][g],d+=s[g]*i[1][g]}),[h,d]}static extractCardCode(t){return t.substring(0,3)}get boof123n(){return this.level*-1}get boof124(){return this.lValN([1,2,4])}get boof135(){return this.lValN([1,3,5])}get boof137(){return this.lValN([1,3,7])}get boof147(){return this.lValN([1,4,7])}get boof234(){return this.level+1}get boof235(){return this.lValN([2,3,5])}get boof236(){return this.lValN([2,3,6])}get boof246(){return this.level*2}get boof246n(){return this.level*-2}get boof247(){return this.lValN([2,4,7])}get boof247n(){return this.lValN([-2,-4,-7])}get boof248(){return this.lValN([2,4,8])}get boof258(){return this.lValN([2,5,8])}get boof2510(){return this.lValN([2,5,10])}get boof2612(){return this.lValN([2,6,12])}get boof357(){return this.lValN([3,5,7])}get boof358(){return this.lValN([3,5,8])}get boof359(){return this.lValN([3,5,9])}get boof3510(){return this.lValN([3,5,10])}get boof3612(){return this.lValN([3,6,12])}get boof369(){return this.level*3}get boof369n(){return this.level*-3}get boof3610(){return this.lValN([3,6,10])}get boof3711(){return this.lValN([3,7,11])}get boof3712(){return this.lValN([3,7,12])}get boof3713(){return this.lValN([3,7,13])}get boof3714(){return this.lValN([3,7,14])}get boof3814(){return this.lValN([3,8,14])}get boof468(){return this.lValN([4,6,8])}get boof469(){return this.lValN([4,6,9])}get boof4610(){return this.lValN([4,6,10])}get boof4612(){return this.lValN([4,6,12])}get boof4710(){return this.lValN([4,7,10])}get boof4711(){return this.lValN([4,7,11])}get boof4712(){return this.lValN([4,7,12])}get boof4713(){return this.lValN([4,7,13])}get boof4714(){return this.lValN([4,7,14])}get boof4812(){return this.level*4}get boof4812n(){return this.level*-4}get boof4813(){return this.lValN([4,8,13])}get boof4814(){return this.lValN([4,8,14])}get boof4815(){return this.lValN([4,8,15])}get boof4816(){return this.lValN([4,8,16])}get boof4914(){return this.lValN([4,9,14])}get boof4915(){return this.lValN([4,9,15])}get boof579(){return this.lValN([5,7,9])}get boof5711(){return this.lValN([5,7,11])}get boof5714(){return this.lValN([5,7,14])}get boof5812(){return this.lValN([5,8,12])}get boof5813(){return this.lValN([5,8,13])}get boof5814(){return this.lValN([5,8,14])}get boof5815(){return this.lValN([5,8,15])}get boof5914(){return this.lValN([5,9,14])}get boof5915(){return this.lValN([5,9,15])}get boof5916(){return this.lValN([5,9,16])}get boof5917(){return this.lValN([5,9,17])}get boof51014(){return this.lValN([5,10,14])}get boof51015(){return this.level*5}get boof51020(){return this.lValN([5,10,20])}get boof6812(){return this.lValN([6,8,12])}get boof6814(){return this.lValN([6,8,14])}get boof6912(){return this.lValN([6,9,12])}get boof6914(){return this.lValN([6,9,14])}get boof6915(){return this.lValN([6,9,15])}get boof6916(){return this.lValN([6,9,16])}get boof61014(){return this.lValN([6,10,14])}get boof61015(){return this.lValN([6,10,15])}get boof61016(){return this.lValN([6,10,16])}get boof61017(){return this.lValN([6,10,17])}get boof61018(){return this.lValN([6,10,18])}get boof61117(){return this.lValN([6,11,17])}get boof61218(){return this.lValN([6,12,18])}get boof61224(){return this.lValN([6,12,24])}get boof7911(){return this.lValN([7,9,11])}get boof7914(){return this.lValN([7,9,14])}get boof71013(){return this.lValN([7,10,13])}get boof71014(){return this.lValN([7,10,14])}get boof71015(){return this.lValN([7,10,15])}get boof71116(){return this.lValN([7,11,16])}get boof71117(){return this.lValN([7,11,17])}get boof71118(){return this.lValN([7,11,18])}get boof81116(){return this.lValN([8,11,16])}get boof81117(){return this.lValN([8,11,17])}get boof81217(){return this.lValN([8,12,17])}get boof81220(){return this.lValN([8,12,20])}get boof81318(){return this.lValN([8,13,18])}get boof91420(){return this.lValN([9,14,20])}get boof91421(){return this.lValN([9,14,21])}get boof101520(){return this.lValN([10,15,20])}get boof255080(){return this.lValN([25,50,80])}}class R extends Mt{constructor(t){super(t)}jr2=0;jr1=0;initAggro=!1;initArmor=0;initBT=!1;initDefend=!1;initMobile=0;initRegen=0;tribe=[];isTribe(t){return(Array.isArray(t)?t:[t]).every(i=>this.tribe.includes(i))}jr3(t,e){const i=p.creatureState(t,e);return i.id=M.genId(),i.code=this.code,i.health=this.jr2,i.attack=this.jr1,i.maxHealth=i.health,i.regen=this.initRegen,i.breakthrough=this.initBT,i.defender=this.initDefend,i.aggressive=this.initAggro,i.armor=this.initArmor,i.mobility=this.initMobile,i.hints=this.aiHints(),i.bonus=this.bonusExist(),new Ie(i)}playTargets(){const t=super.playTargets(),e=p.actionTarget("TF","FORG",this.code,"");return e.player="F",t.push(e),t}canActivate(t){return!1}startActivation(t){console.error("encountered activation request for creature with no activate",t)}}class mt extends Mt{constructor(t){super(t)}get type(){return "S"}logSpell(){m.new().txt("Casted ").crd(this.code).txt(".").go()}}class jt{paStats;pbStats;constructor(t,e){this.paStats=t,this.pbStats=e}allStats(){return[this.paStats,this.pbStats]}playerStats(t){return t?this.paStats:this.pbStats}deltaStats(t){const e=this.playerStats(t),i=this.playerStats(!t);return jt.deltafier(e,i)}static deltafier(t,e){const i=jt.blankStats(!0);return i.creatCount=t.creatCount-e.creatCount,i.creatValue=t.creatValue-e.creatValue,i.threatValue=t.threatValue-e.threatValue,i.playerHealth=t.playerHealth-e.playerHealth,i}static blankStats(t){return{side:t,creatCount:0,creatValue:0,threatValue:0,playerHealth:0}}}class he{fromState(){const t=f.qActiveCreats(),i=[!0,!1].map(s=>{const h=jt.blankStats(s),d=S.toPlayer(s);return h.playerHealth=d.health,t.filter(g=>g.owner===s).forEach(g=>{h.creatCount++,h.creatValue+=he.creatValueFormula(g);let y=0;if(!g.defender){const v=t.find(L=>L.owner!==g.owner&&L.lane===6-g.lane);let F=0;if(v?g.breakthrough&&(F=g.attack-v.health):F=g.attack,!(F<1))if(F<6)y=F;else{const L=this.scalingBonus(F);return F+(g.sleeping&&!g.aggressive?L/2:L)}}h.threatValue+=y}),h});return new jt(i[0],i[1])}static ddp9(t,e,i,s,h=0){return he.ddp9Nugget(t,e,i,s,h)[0]}static ddp9Nugget(t,e,i,s,h=0){const d=t/4,g=e/8,y=i/5,v=s/3;return[d+g+y+v+h,d,g,y,v,h]}static creatValueFormula(t){return t.health+Math.max(0,t.attack)+t.bonus+(t.armor+Math.min(t.mobility,3)+t.regen-t.poison)*1.5}scalingBonus(t){let e=!0,i=0,s=6,h=1;const d=6;for(;e;)t>s+d?(i+=h*d,s+=d,h++):(i+=h*(t-s),e=!1);return i}weighState(t,e,i){const s=t.deltaStats(i),h=e.deltaStats(i),d=jt.deltafier(h,s),g=he.ddp9Nugget(d.creatCount,d.creatValue,d.threatValue,d.playerHealth);return{formula:g[0],fParts:g.slice(1,-1).map(y=>y.toFixed(1)),stats:[d.creatCount,d.creatValue,d.threatValue,d.playerHealth].map(y=>y.toFixed(1))}}}class bi{aiPlayer;constructor(t){this.aiPlayer=t}jr7(t,e=3){return`${t}${e}`}jr6(t,e){const i=T.randInt(0,e.length),s=e[i];return e.splice(i,1),f.birthCreature(t,"F",this.aiPlayer,s)}cheatin(){const t=S.toPlayer(this.aiPlayer),e=S.toPlayer(!this.aiPlayer),i=e.health-t.health;let s=0;i>85?s=3:i>65?s=2:i>45&&(s=1);const h=f.emptyLanes(this.aiPlayer);if(s===0||h.length===0)return!1;m.new().plr(this.aiPlayer).txt(" is a cheaty cheaterton.").go();let d=0;if(s===1){if(x.regularPlays-=1,d=T.randInt(0,13),d===0)this.jr6(this.jr7("HTR"),h);else if(d===1)this.jr6(this.jr7("AGM"),h).addRegen(8);else if(d===2){const g=this.jr6(this.jr7("YNS"),h);g.buff(0,15),g.addRegen(4)}else if(d===3)this.jr6(this.jr7("TBA"),h);else if(d===4)this.jr6(this.jr7("DCS"),h);else if(d===5)this.jr6(this.jr7("GGP"),h).addRegen(8);else if(d===6){const g=this.jr6(this.jr7("WFM"),h);g.aggressive=!0}else if(d===7){const g=this.jr6(this.jr7("FFU"),h);g.aggressive=!0}else if(d===8){const g=this.jr6(this.jr7("URB"),h);g.aggressive=!0}else if(d===9){const g=this.jr6(this.jr7("KOD"),h);g.aggressive=!0,g.addRegen(6)}else if(d===10)this.jr6(this.jr7("AGK"),h).addArmor(3);else if(d===11){const g=this.jr6(this.jr7("PSC"),h);g.aggressive=!0}else if(d===12){const g=this.jr6(this.jr7("SAD"),h);g.aggressive=!0}}else if(s===2)if(x.regularPlays-=1,d=T.randInt(0,17),d===0){const g=this.jr6(this.jr7("NDR"),h);g.aggressive=!0}else if(d===1){const g=this.jr6(this.jr7("CSW"),h);g.aggressive=!0}else if(d===2)this.jr6(this.jr7("GGD"),h).addRegen(6);else if(d===3)this.jr6(this.jr7("EFP"),h);else if(d===4)this.jr6(this.jr7("ZTU"),h);else if(d===5){const g=this.jr6(this.jr7("DDD"),h);g.aggressive=!0}else if(d===6)this.jr6(this.jr7("RBH"),h).addRegen(8);else if(d===7)this.jr6(this.jr7("SFT"),h);else if(d===8)this.jr6(this.jr7("GTT"),h);else if(d===9)this.jr6(this.jr7("SMD"),h);else if(h.length===5)this.jr6(this.jr7("DFB"),h),[1,2,3,4].forEach(g=>this.jr6(this.jr7("XHS"),h));else if(h.length===4)this.jr6(this.jr7("LMV"),h);else if(h.length===3)this.jr6(this.jr7("LHY"),h),this.jr6(this.jr7("SVH"),h),this.jr6(this.jr7("DBA"),h);else if(h.length===2)this.jr6(this.jr7("UTR"),h),this.jr6(this.jr7("TDS"),h);else if(t.turn===4)this.jr6(this.jr7("SSR"),h);else if(t.turn===1)this.jr6(this.jr7("ESK"),h);else{const g=this.jr6(this.jr7("XSH"),h);g.aggressive=!0}else if(s===3)if(d=T.randInt(0,20),d===0){const g=this.jr6(this.jr7("IHA",4),h);g.aggressive=!0}else if(d===1)this.jr6(this.jr7("CHR"),h);else if(d===2)this.jr6(this.jr7("FGO",1),h);else if(d===3)this.jr6(this.jr7("CHV",4),h);else if(d===4)this.jr6(this.jr7("KKK",4),h);else if(t.health<20){const g=this.jr6(this.jr7("ODC",4),h);g.aggressive=!0}else if(h.length===5){const g=T.randInt(0,4);if(g===0)[1,2,3,4,5].forEach(y=>this.jr6(this.jr7("UWL",2),h));else if(g===1)[1,2].forEach(y=>this.jr6(this.jr7("DFB"),h)),[1,2,3].forEach(y=>this.jr6(this.jr7("FFD"),h));else if(g===2)[1,2,3,4,5].forEach(y=>this.jr6(this.jr7("BWK"),h));else if(g===3){this.jr6(this.jr7("SBG"),h),this.jr6(this.jr7("EWE"),h);const y=this.jr6(this.jr7("BMY"),h);y.defender=!0,y.aggressive=!0}}else if(e.health>350)t.health<180&&S.healPlayer(t,180-t.health),this.jr6(this.jr7("AGD"),h);else if(e.health>250)this.jr6(this.jr7("FGO"),h);else if(h.length===4){const g=T.randInt(0,3);g===0?(this.jr6(this.jr7("AGK"),h),[1,2,3].forEach(y=>this.jr6(this.jr7("VBK"),h))):g===1?(this.jr6(this.jr7("TDS"),h),this.jr6(this.jr7("TDS"),h),this.jr6(this.jr7("UTR"),h)):g===2&&[1,2,3,4].forEach(y=>this.jr6(this.jr7("CDC"),h))}else if(h.length===3)if(T.randInt(0,2)){this.jr6(this.jr7("SDR"),h),this.jr6(this.jr7("SDR"),h);const g=this.jr6(this.jr7("UPM"),h);g.aggressive=!0}else{this.jr6(this.jr7("SDL"),h);const g=this.jr6(this.jr7("NFF"),h);g.aggressive=!0}else if(h.length===2)this.jr6(this.jr7("SPM"),h),this.jr6(this.jr7("SPM"),h);else{const g=this.jr6(this.jr7("NXC"),h);g.buff(10,0),g.aggressive=!0,g.addMobility(2),g.addRegen(5)}return t.health<30&&S.healPlayer(t,50-t.health),!0}}var it=(n=>(n[n.Left=0]="Left",n[n.Both=1]="Both",n[n.Right=2]="Right",n[n.ForceRight=3]="ForceRight",n))(it||{});class Ge{action;hitTest(t,e,i){}enabled=!0;mouse=0;validButton(t){return this.mouse===1||this.mouse===t}static arrayHit(t,e,i,s){let h,d=0;const g=t.length;for(;h===void 0&&d<g;)h=t[d].hitTest(e,i,s),d++;return h}}class nt extends Ge{originX;originY;endX;endY;constructor(t,e,i,s,h,d=0){super(),this.action=t,this.originX=e,this.originY=i,this.endX=e+s,this.endY=i+h,this.mouse=d}hitTest(t,e,i){if(!(!this.enabled||!this.validButton(i)))return this.originX<=t&&this.endX>=t&&this.originY<=e&&this.endY>=e?this.action:void 0}}class Gt extends nt{constructor(t,e,i,s,h=0){super({zone:"N",key:"BNDL",host:"",param:""},t,e,i,s,h)}childs=[];addChild(t){this.childs.push(t)}clear(){this.childs=[]}hitTest(t,e,i){if(super.hitTest(t,e,i))return Ge.arrayHit(this.childs,t,e,i)}}class Ai{guts="";txt(t){return ot.simOn||(this.guts+=t),this}plr(t){if(!ot.simOn){const e=S.toBool(t);this.guts+="^p"+(e?"a":"b")}return this}crd(t){return ot.simOn||(this.guts+="^c"+t),this}go(){ot.simOn||m.parse(this)}}class Te{realPromise;resolveMe(t){}rejectMe(){}getPromise(){return this.realPromise}constructor(){this.realPromise=new Promise((t,e)=>{this.resolveMe=t,this.rejectMe=e})}}const Le=25,_e=9999,ki=-9999,vi=-999999,Ti=["CANC","DEET","SCRH"],Ci=["HPLY","ACTV","MOVE"];class Si{log=!1;simOn=!1;smart=!0;inPhase=!0;promStack=[];peekStack=[];peeking=!1;endCount=0;aiPlayer=!1;brdEval;rootBoardStats;turnSims=0;turnTime=0;constructor(){this.brdEval=new he,this.rootBoardStats=new jt(jt.blankStats(!0),jt.blankStats(!1))}setLog(t){this.log=t}lNum(t){return t<-100?"NUNS":t>100?"KILL":t.toFixed(1)}popProm(t){this.promStack.pop().resolveMe(t)}popPeeker(t){this.peekStack.pop().resolveMe(t)}hitMainPhase(){!this.smart&&this.simOn&&this.inPhase&&x.mainBattle&&(this.inPhase=!1)}simEndpoint(t){if(this.endCount++,this.promStack.length===0)console.error("Tried to end a sim, but no promise to boop.");else{let e;if(t==="T"){const i=this.brdEval.fromState();e=this.brdEval.weighState(this.rootBoardStats,i,this.aiPlayer).formula}else t==="W"?e=_e:t==="L"?e=ki:e=vi;this.popProm(e)}}async processAction(t){const e=!this.simOn;let i=0,s=0,h,d=this.actionPruner(t);if(this.peeking){this.popPeeker(d);return}if(!this.smart&&!this.inPhase){let v=d.filter(F=>F.key==="FITE"||F.key==="ENDT");v.length>0&&(d=v)}if(e){h=new Re,h.hwhipe();const v=d.map((U,j)=>h.drawAiGear(j,!1));await Promise.all(v),await new Ne().drawActions([]),await T.sleep(Le),this.simOn=!0,i=Date.now(),this.rootBoardStats=this.brdEval.fromState(),this.endCount=0;const L=await this.peeker(d),z=[];let rt=0;L.forEach(U=>{rt+=U.peek.length,U.wasPeek&&U.peek.some(j=>this.hasHint(j,"DF"))&&z.push(U.root)}),z.length>0?(d=z,this.smart=!1):x.regularPlays>3?this.smart=!1:rt>29&&this.peekerReport(L)}if(d.length===0){e&&console.error("Root eval set consisted of 0 valid actions"),this.simEndpoint("D");return}let g=-99999;const y=[];if(d.length===1&&e)y.push({a:d[0],weight:99});else{ue.saveState();for(let v=0;v<d.length;v++){const F=d[v];e&&!this.smart&&F.key==="FITE"&&this.inPhase&&x.mainBattle&&(this.inPhase=!1),this.log&&console.groupCollapsed("Details: "+m.actionText(F));const L=new Te;this.promStack.push(L),C.handleAction(F);let z=await L.getPromise();z+=this.hintWeight(F),z>g&&(g=z,y.push({a:F,weight:z})),ue.restoreState(),e&&(await h.drawAiGear(v,!0),s++,await T.sleep(Le))}ue.popState()}if(e){this.simOn=!1,this.smart=!0;const v=g-.4,F=y.filter(j=>j.weight>v);let L;if(v>_e-10){const j=F.find(xt=>xt.a.key==="FITE");j?L=j.a:L=F[T.randInt(0,F.length)].a}else L=F[T.randInt(0,F.length)].a;const z=Date.now()-i,rt=Math.max(1,350-z),U=z-Le*s;this.turnSims+=this.endCount,this.turnTime+=U,T.sleep(rt).then(()=>{C.handleAction(L)})}else this.popProm(g)}actionPruner(t){let e=t.filter(i=>Ti.indexOf(i.key)===-1);return x.mainBattle?e=e.filter(i=>i.key!=="HDSC"):e=e.filter(i=>!this.hasHint(i,"BB")),e=e.filter(i=>{if(this.hasHint(i,"HR")){if(i.zone==="P")return i.playerA!==this.aiPlayer;{const s=i,h=f.ddf6(s);if(h.owner===this.aiPlayer){const d=h.aiHints();return d.includes("MC")||d.includes("LZ")}else return!0}}else return!0}),e=e.filter(i=>{if(this.hasHint(i,"KL")){const s=i,h=f.ddf6(s);if(h.owner===this.aiPlayer){const d=h.aiHints();return d.includes("ST")||d.includes("LZ")}else return!0}else return!0}),e=e.filter(i=>this.hasHint(i,"BF")?i.playerA===this.aiPlayer:!0),e=e.filter(i=>this.hasHint(i,"DB")?i.playerA!==this.aiPlayer:!0),e=e.filter(i=>{if(this.hasHint(i,"PN")){if(i.zone==="P")return i.playerA!==this.aiPlayer;{const s=i,h=f.ddf6(s);return h.owner===this.aiPlayer?h.aiHints().includes("MC"):!0}}else return!0}),e=e.filter(i=>{const s=i.key==="FORG";if(s||this.hasHint(i,"FL")){const h=i,d=f.searchByFSA(h);return d&&(x.mainBattle?x.newPre:x.newPost).includes(d.id)?d.aiHints().includes("RT")?!0:s?W.getCard(h.host).aiHints().includes("RD"):!1:!0}else return!0}),e}async peeker(t){this.peeking=!0;const e=[],i=[];t.forEach(s=>{Ci.includes(s.key)?i.push(s):e.push({root:s,peek:[s],wasPeek:!1})}),ue.saveState();for(let s=0;s<i.length;s++){const h=i[s],d=new Te;this.peekStack.push(d),C.handleAction(h);const g=await d.getPromise();g.length>0&&e.push({root:h,peek:g,wasPeek:!0}),ue.restoreState()}return ue.popState(),this.peeking=!1,e}peekerReport(t){let e=0,i=0,s=0,h=[],d=[];t.forEach(g=>{const y=g.peek.length;if(y>0){const v=g.root.key;if(v==="HPLY")if(g.peek[0].key==="FORG")i+=y;else{const F=m.fastName(g.root.card)+": "+y;h.push(F)}else if(v==="MOVE")s+=y;else if(v==="ACTV"){const F=m.fastName(g.root.host)+": "+y;d.push(F)}else e+=y}}),m.add("High complexity hit: Root: "+t.length),i>0&&m.add("Forges: "+i),s>0&&m.add("Mobility: "+s),h.forEach(g=>m.add(g)),d.forEach(g=>m.add(g)),e>0&&m.add("Other: "+e)}hintWeight(t){let e=0,i="";if(t.key==="HDSC"?i=t.host:this.hasHint(t,"CD")&&(i=t.card),i){const h=W.getCard(i).aiHints();h.includes("LV")?e+=1.5:h.includes("DL")?e-=2:e+=.6}return e}hasHint(t,e){return!t.hint||t.hint.length===0?!1:t.hint.includes(e)}logStats(t,e){const s=["Crt Cnt","Crt Val","Threat","P Health"].map((h,d)=>`${h}: ${this.numNum(e[d])}`).join(", ");console.log(t+s)}numNum(t){return t.length>6?t.charAt(0)==="-"?"NUNS":"KILL":t.padEnd(4)}cheater(){return M.aiMode&&M.aiActive&&T.options.cheater?new bi(this.aiPlayer).cheatin():!1}peekAllCards(){const t=S.toPlayer(this.aiPlayer),e=t.deck.concat(t.hand,t.discard).sort();console.log(e.map(i=>m.fastName(i)).join(`
`))}peekDecks(){const t=S.toPlayer(!1),e=t.deck.map(d=>m.fastName(d)).sort(),i=t.hand.map(d=>m.fastName(d)).sort(),s=t.discard.map(d=>m.fastName(d)).sort(),h=["-- Deck --"].concat(e,"-- Hand --",i,"-- Discard --",s);console.log(h.join(`
`))}}const ot=new Si;class wi{getState(){const t={handy:this.currPlayHandAction,aa:this.actionHistory};return JSON.stringify(t)}setState(t){const e=JSON.parse(t);this.currPlayHandAction=e.handy,this.actionHistory=e.aa}handleAction(t){if(t.key==="DEET"){Zt.init(t.param);return}if(t.key==="HPLY"){this.playCardSelect(t);return}if(t.key==="FORG"){x.forgeCard(t,this.cardBeingPlayed);return}if(t.key==="FITE"){ai.fight(t.param==="M");return}if(t.key==="ENDT"){x.endTurn();return}if(t.key==="MOVE"){this.mobilitySelect(t);return}if(t.key==="MEND"){x.mobility(t);return}if(t.key==="HDSC"){const e=this.cardBeingPlayed;e.cost="",x.cardPlayed(e,!0),this.actionDone();return}if(t.key==="ACTV"){const e=f.jr5(t.param);W.getCard(e.code).startActivation(e);return}if(t.key==="NOTR"){t.param==="PM"&&gt.popMode(),this.actionDone(!0);return}if(t.key==="CARD"){W.getCard(t.host).handleAction(t);return}if(t.key==="CANC"||t.key==="CNCL"){t.param==="PM"&&gt.popMode(),this.actionHistory.pop(),this.ddf5();return}if(t.key==="DTUP"){Zt.updateDetails(t),dt.drawAll();return}if(t.key==="VWDK"){Bt.handleShowDeck(t);return}if(t.key==="SCRK"){Bt.handleDeckScroll(t);return}if(t.key==="SCRH"){t.param==="R"?M.ui.handScrollLeft+=1:M.ui.handScrollLeft-=1,dt.drawAll();return}if(t.key==="DRFT"){ct.resumeDraft(t.param);return}if(t.key==="SCRD"){ct.paginate(t.param==="D"),dt.drawAll();return}if(t.key==="UIBT"){ze.handleUIButton(t);return}if(t.key==="MENU"){ze.handleMainMenuButton(t);return}if(t.key==="MNBT"){ze.handleMenuButton(t);return}if(t.key==="DSET"){this.ddf5(Dt.generateDeckPickerActions(parseInt(t.param)));return}if(t.key==="DECK"){Dt.handleDeckPick(t);return}}ddf5(t){let e;if(t){const i=this.generateDetailActions();e=t.concat(i),this.actionHistory.push(e)}else e=this.actionHistory[this.actionHistory.length-1];M.aiActive?ot.processAction(e):dt.drawAll()}currPlayHandAction;get cardBeingPlayed(){if(this.currPlayHandAction)return this.currPlayHandAction;throw new Error("Attempted to read current card being played, nothing exists")}actionHistory=[];get activeActions(){const t=this.actionHistory.length;return t===0?[]:this.actionHistory[t-1]}actionDone(t=!1){this.currPlayHandAction=void 0,this.actionHistory=[],J.removeAll(),dt.drawActions([]),t?D.triggerDone():Et.whatNext()}playCardSelect(t){this.currPlayHandAction=t;const e=this.getPlayCardActions(t);this.ddf5(e)}getPlayCardActions(t){const i=W.getCard(t.card).playTargets();x.regularPlays>0&&i.push(w.buttonTarget("HDSC",t.card));const s=w.toActions(i);return s.push(p.handSelectAction("CANC",t.card,"",t.position)),s}mobilitySelect(t){const e=this.getMoveCardActions(t);this.ddf5(e)}getMoveCardActions(t){if(t.key!=="MOVE")throw new Error("Unexpected action passed to getMoveCardActions: "+t.key);const e=f.ddf6(t);let i=[];if(t.param==="ACTV"){const s=p.actionTarget("TB","ACTV",e.code,e.id);i=w.toActions(s)}return i.push(p.fieldSelectAction("CANC",t.lane,t.playerA)),f.canMove(e).map(s=>{const h=p.fieldSelectAction("MEND",s,t.playerA);return h.param=e.id,h}).concat(i)}noneEndTrigger(){return w.toActions(w.buttonTarget("NOTR"))[0]}cancelAction(){return w.toActions(w.buttonTarget("CANC"))[0]}emptyAdjacents(t,e){const i=e||t.id,s=p.emptyPlayerActTarg("F","CARD",t.code,i);return s.lanes=t.adjacent,w.toActions(s)}generateDetailActions(){const t=gt.mode;if(M.aiActive)return[];if(t==="G"){const e=S.getLocal().hand.map((s,h)=>{const d=p.handSelectAction("DEET",s,"",h);return d.param=s,d}),i=f.qActiveCreats().map(s=>{const h=p.fieldSelectAction("DEET",s.lane,s.owner);return h.param=s.code,h});return e.concat(i)}else if(t==="D"){const e=ct.currentPack.map((s,h)=>{const d=p.draftSelectAction("DEET",h,!0);return d.param=`${s}1`,d}),i=ct.picksAsDeck.map((s,h)=>{const d=p.draftSelectAction("DEET",h,!1);return d.param=`${s.card}1`,d});return e.concat(i)}return[]}}const C=new wi;class Di{type="N0";events=[];triggerActions=[];deathCheck=!0;iaTrigLane=0;getState(){const t={type:this.type,events:this.events,tA:this.triggerActions,dC:this.deathCheck,tL:this.iaTrigLane};return JSON.stringify(t)}setState(t){const e=JSON.parse(t);this.type=e.type,this.events=e.events,this.triggerActions=e.tA,this.deathCheck=e.dC,this.iaTrigLane=e.tL}startBatch(){this.deathCheck=!1,this.type==="C0"?this.type="C1":this.type==="C1"?this.type="C2":this.type==="C2"&&(this.type="N0");const t=this.type;let e;if(t==="N0")e=this.events.slice(),this.events=[];else{const s=this.events.filter(d=>d.code==="DIE"),h=this.events.filter(d=>d.code!=="DIE");t==="C1"?(e=h,this.events=s):(e=s,this.events=h)}const i=this.generateTriggers(e);this.triggerActions=this.sortTriggers(i),Et.whatNext()}generateTriggers(t){let e;const i=t.map(s=>{s.code==="TRS"&&(e=s);const h=f.field.map(g=>g.triggers.map(y=>{const v=p.triggerReaction(s,y,g.owner,"C");return v.creatId=g.id,v.cardCode=g.code,v}).filter(y=>Ze.ddf8(y))).flat(),d=[!0,!1].map(g=>S.toPlayer(g).triggers.map(v=>p.triggerReaction(s,v,g,"P")).filter(v=>Ze.ddf8(v))).flat();return h.concat(d)}).flat();return e&&this.handleTurnStart(e),i}sortTriggers(t){const e=S.getActiveB(),i=t.filter(d=>!d.trigger.interactive&&d.ownerPlayerA===e),s=t.filter(d=>!d.trigger.interactive&&d.ownerPlayerA!==e);return t.filter(d=>d.trigger.interactive&&d.ownerPlayerA===e).concat(s,i)}handleTurnStart(t){const e=S.getActiveB();f.qPlayerCreats(e).filter(s=>s.sleeping).forEach(s=>{s.sleeping=!1});const i=M.tick();f.qActiveCreats().forEach(s=>{s.owner===t.playerA&&(s.activationAvailable=!0,s.mobilityAvailable=!0,s.sleeping=!1),s.armorDmg=0,s.poison>0&&s.hurtDirect(s.poison,"POIS",i),s.regen>0&&s.heal(s.regen),$.deathProdder(s,i)})}getNextTrigger(){const t=this.triggerActions;if(t.length!==0)return t[t.length-1]}triggerDone(){this.triggerActions.length===0?console.error("batch.triggerDone() was called when there is no trigger actions"):(this.triggerActions.pop(),this.iaTrigLane=0),Et.whatNext()}addEvents(...t){this.events.push(...t)}}const D=new Di;class xi{registry;constructor(){this.registry={}}register(t){if(this.registry[t])throw new Error(`Double registration of canvas ${t}`);this.registry[t]=new ni(t)}get(t){return this.registry[t]}}const tt=new xi;class Fi extends R{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Abraxas, Avatar of Kadras",this.jr1=this.boof4712,this.jr2=this.lValN([7,11,21]),this.tribe.push("HY");const e=this.lValS(["Give an adjacent creature","Each adjacent creature gets","Each other friendly creature gets"]);this.text=`Activate: ${e} 2x attack this turn.`}targ(t){const e=p.crFriendNotMeActTarg("CARD",t.id,this.code,t.id);return this.level<3&&(e.lanes=t.adjacent),e}canActivate(t){return f.creatByTarget(this.targ(t)).length>0}startActivation(t){let e;this.level===1?e=this.targ(t):(e=w.boardTarget("CARD",this.code),e.param=t.id),e.hint=["BB"],C.ddf5(w.toActions([e,w.buttonTarget("CANC")]))}handleAction(t){const e=f.jr5(t.param);if(t.zone==="F"){const i=f.ddf6(t);this.applyMod(i,e.id)}else{const i=this.targ(e);f.creatByTarget(i).forEach(s=>{this.applyMod(s,e.id)})}e.endActivation()}applyMod(t,e){const i=p.mod("AT",t.attack,e);i.expiry="ET",t.addMod(i)}}class Pi extends R{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Abyssal Brute",this.jr1=this.boof4712,this.jr2=this.jr1,this.tribe.push("ZB"),this.text=`When ${this.name} or another friendly creature enters a side lane, that creature gets ${m.jr9(this.level,this.level,!0)} and Regenerate ${this.level}.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("EF",this.code),i.jr4("MV",this.code),i}ddf8(t){if(t.trigger.type==="EF"||t.trigger.type==="MV"){const e=O.toCreature(t.event),i=e.creature.lane;return(i===1||i===5)&&e.creature.owner===t.ownerPlayerA}return!1}jr8(t){const e=O.toCreature(t.event);e.creature.buff(this.level,this.level),e.creature.addRegen(this.level),D.triggerDone()}}class Bi extends R{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Apocrymancer",this.jr1=this.boof3713,this.jr2=this.jr1+3,this.tribe.push("HM"),this.text="When you play an Alloyin spell, you may discard and level up a card."}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("PC",this.code);return s.interactive=!0,i}handleAction(t){x.levelAndDiscard(t),C.actionDone(!0)}ddf8(t){if(t.event.code==="PLC"){const e=t.event;if(e.playerA===t.ownerPlayerA){const i=W.getCard(e.cardCode);if(i.type==="S"&&i.faction==="A")return!0}}return!1}jr8(t){const e=p.lvlHandActTarg(this.code,t.creatId);C.ddf5(w.toActions([e,w.buttonTarget("NOTR")]))}}class Hi extends R{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Arboris, Grove Dragon",this.jr1=this.lValN([5,9,20]),this.jr2=this.jr1,this.tribe.push("DG");const e=this.boof;this.text=`While you have over 120 health, Arboris gets ${m.jr9(e,e)}.`}jr3(t,e){const i=super.jr3(t,e);return i.addEffect("PH",this.code),i}enforceEffect(t,e){if(S.toPlayer(e.owner).health>120&&e.status==="A"){const s=this.boof;e.addModSafe(p.mod("HL",s,e.id)),e.addModSafe(p.mod("MH",s,e.id)),e.addModSafe(p.mod("AT",s,e.id))}else e.removeModSafe(e.id)}get boof(){return this.lValN([4,8,80])}}class Ce extends R{constructor(t){super(t),this.rarity="H",this.jr1=this.level+2,this.jr2=this.jr1;const e=this.cardCode();e==="SFA"?this.steel():e==="RFA"?this.root():e==="HFA"?this.hell():e==="SGA"&&this.storm(),this.text=`Forge: ${this.name} gets ${m.jr9(this.level,this.level)} for each ${m.factionText(this.faction)} card in your hand.`}hell(){this.faction="N",this.name="Hellforged Avatar",this.initRegen=this.level,this.tribe.push("AB")}root(){this.faction="U",this.name="Rootforged Avatar",this.initBT=!0,this.tribe.push("HM")}steel(){this.faction="A",this.name="Steelforged Avatar",this.initArmor=this.level,this.tribe.push("CY")}storm(){this.faction="T",this.name="Stormforged Avatar",this.initMobile=this.level,this.tribe.push("MT")}jr3(t,e){const i=super.jr3(t,e);return i.jr4("FR",this.code),i}jr8(t){const e=O.toEnterField(t.event),i=S.toPlayer(t.ownerPlayerA).hand.filter(s=>W.getCard(s).faction===this.faction).length;if(i>0){const s=i*this.level;e.creature.buff(s,s)}D.triggerDone()}}class Z extends R{imgKey="";lookup(t){return{["BOS"]:()=>this.fixedSapling(3),["COZ"]:()=>this.cooze(),["DZA"]:()=>this.dozer(),["FWG"]:()=>this.feywing(),["FUN"]:()=>this.funguy(),["NSD"]:()=>this.fixedSeedling(1),["OOZ"]:()=>this.nooze(),["RPT"]:()=>this.raptor(),["SPL"]:()=>this.minion(),["SXP"]:()=>this.fixedSapling(5),["SXD"]:()=>this.fixedSeedling(3),["SXT"]:()=>this.fixedTreefolk(7),["SDL"]:()=>this.minion(),["SPN"]:()=>this.nekSpirit(),["SPU"]:()=>this.uspirit(),["XYR"]:()=>this.yuruSpirit(),["TFK"]:()=>this.minion(),["TFD"]:()=>this.fixedTreefolk(this.boof5714),["TFF"]:()=>this.tfFight(),["TTF"]:()=>this.fixedTreefolk(3),["ZTR"]:()=>this.zimus(),["ZBS"]:()=>this.threeZomb(),["ZST"]:()=>this.strideZomb(),["ZMB"]:()=>this.commonZomb()}[t]}constructor(t){super(t),this.rarity="T";const e=this.cardCode();this.imgKey=e,this.minLevel=this.level,this.maxLevel=this.level,this.lookup(e)()}image(t){return this.rawImage(this.imgKey,t)}fixedNekSpirit(t){this.faction="N",this.rarity="T",this.name="Spirit",this.tribe.push("ST"),this.jr1=t,this.jr2=t,this.imgKey=`${"SPN"}${this.level}`}nekSpirit(){this.fixedNekSpirit(this.boof51015)}yuruSpirit(){this.fixedNekSpirit(this.boof5814)}oozer(t){this.faction="N",this.rarity="T",this.name="Oozeling",this.tribe.push("OZ"),this.jr2=this.jr1,this.imgKey=t?"???":"OOZ"}nooze(){this.jr1=this.boof4711,this.oozer(!1)}cooze(){this.jr1=1,this.oozer(!1),this.hints=["RT"]}minion(){this.jr1=Z.minionBuff(this.level),this.plont(),this.name=Z.minionName(this.level),this.hints=["RT"]}static minionCode(t){return(t===1?"SDL":t===2?"SPL":"TFK")+t}static minionName(t){return t===1?"Seedling":t===2?"Sapling":"Treefolk"}static minionBuff(t){return t===1?1:t===2?3:5}plont(){this.faction="U",this.jr2=this.jr1,this.tribe.push("PL")}fixedSapling(t){this.jr1=t,this.plont(),this.name=Z.minionName(2),this.imgKey="SPL"}fixedSeedling(t){this.jr1=t,this.plont(),this.name=Z.minionName(1),this.imgKey="SDL",this.hints=["RT"]}fixedTreefolk(t){this.jr1=t,this.plont(),this.name=Z.minionName(3),this.imgKey="TFK"}tfFight(){this.jr1=this.boof91421,this.plont(),this.name=Z.minionName(3),this.imgKey="TFK"}dozer(){this.faction="U",this.name="Dozer, the Awakened",this.jr1=this.level*3+6,this.jr2=this.jr1,this.initAggro=!0,this.initBT=!0,this.tribe.push("BR"),this.imgKey=this.code,this.text=`${this.name} enters play with health equal to the Dozer, the Dormant it replaced.`}feywing(){this.faction="U",this.name="Feywing",this.jr1=9,this.jr2=this.jr1,this.initMobile=1,this.tribe.push("DG")}funguy(){this.name="Funguy",this.jr1=this.lValN([6,12,14]),this.plont(),this.minLevel=1,this.maxLevel=3,this.hints=["DL"]}raptor(){this.faction="U",this.name="Raptor",this.jr1=1,this.jr2=1,this.tribe.push("DN"),this.hints=["RT"]}uspirit(){this.faction="U",this.name="Spirit",this.jr1=this.boof4610,this.jr2=this.lValN([3,4,6]),this.tribe.push("ST")}zimus(){this.faction="N",this.rarity="L",this.name="Zimus, the Returned",this.tribe.push("ZB"),this.jr1=10,this.jr2=5,this.imgKey=`${"ZTU"}2`}zomb(t,e){this.faction="N",this.rarity="T",this.name="Zombie",this.tribe.push("ZB"),this.jr1=t,this.jr2=e,this.imgKey="ZMB"}commonZomb(){const t=this.boof359;this.zomb(t,t)}threeZomb(){this.zomb(3,3)}strideZomb(){this.zomb(this.lValN([4,8,10]),this.boof369)}}class ut extends mt{lookup(t){return{["AGP"]:{c:()=>this.apulseC(),z:()=>this.apulseZ()},["CTL"]:{c:()=>this.ctlC(),z:()=>this.ctlZ()},["COD"]:{c:()=>this.chontC(),z:()=>this.chontZ()},["DCR"]:{c:()=>this.dcurC(),z:()=>this.dcurZ()},["DGZ"]:{c:()=>this.digiC(),z:()=>this.digiZ()},["EPD"]:{c:()=>this.epiC(),z:()=>this.epiZ()},["FRR"]:{c:()=>this.roarC(),z:()=>this.roarZ()},["FSM"]:{c:()=>this.fstormC(),z:()=>this.fstormZ()},["GRM"]:{c:()=>this.mealC(),z:()=>this.mealZ()},["IBF"]:{c:()=>this.ibfC(),z:()=>this.ibfZ()},["IVS"]:{c:()=>this.infvC(),z:()=>this.infvZ()},["LOD"]:{c:()=>this.lashC(),z:()=>this.lashZ()},["NSH"]:{c:()=>this.shriekC(),z:()=>this.shriekZ()},["NCL"]:{c:()=>this.noxC(),z:()=>this.noxZ()},["OWF"]:{c:()=>this.oforceC(),z:()=>this.oforceZ()},["PLW"]:{c:()=>this.palwC(),z:()=>this.palwZ()},["PTB"]:{c:()=>this.phyC(),z:()=>this.phyZ()},["PYS"]:{c:()=>this.pyreC(),z:()=>this.pyreZ()},["ROK"]:{c:()=>this.rokC(),z:()=>this.rokZ()},["STS"]:{c:()=>this.stsC(),z:()=>this.stsZ()},["SNP"]:{c:()=>this.pulseC(),z:()=>this.pulseZ()},["SRD"]:{c:()=>this.sradC(),z:()=>this.sradZ()},["TST"]:{c:()=>this.talinC(),z:()=>this.talinZ()},["TRN"]:{c:()=>this.turnbC(),z:()=>this.turnbZ()},["VCH"]:{c:()=>this.verdC(),z:()=>this.verdZ()},["WOD"]:{c:()=>this.wdenC(),z:()=>this.wdenZ()}}[t]}constructor(t){super(t),this.lookup(this.cardCode()).c()}image(t){return this.cardCode()==="NSH"?this.leveledImage(t):this.fixedImage(t)}playTargets(){const t=super.playTargets(),e=w.boardTarget("CARD",this.code);return t.push(e),t}handleAction(t){this.logSpell(),this.lookup(this.cardCode()).z(),x.spellCast()}apulseC(){this.faction="A",this.rarity="C",this.name="Aegis Pulse",this.text=`Each friendly creature gets Armor ${this.boof234}.`}apulseZ(){const t=this.boof234;f.ddf1().forEach(e=>{e.addArmor(t)})}get ctlboof(){return(this.level-1)*2}ctlC(){this.faction="T",this.rarity="L",this.name="Call the Lightning";const t=this.level>1?` gets ${m.jr9(this.ctlboof,0)} this turn. Those creatures`:"";this.text=`Each friendly creature${t} battles an additional time this turn.`}ctlZ(){const t=this.ctlboof;f.ddf1().forEach(e=>{const i=p.mod("AT",t,this.code);i.expiry="ET",e.addMod(i),e.extraBattles+=1})}chontC(){this.faction="T",this.rarity="R",this.name="Chant of Dragonwatch",this.maxLevel=1,this.text="Deal X damaage to each enemy creature, where X is your rank."}chontZ(){const t=S.getActive().rank,e=M.tick();f.qEnemyCreats().forEach(i=>{i.hurtDirect(t,this.code,e)})}dcurC(){this.faction="N",this.rarity="R",this.name="Death Current";const t=this.lValS(["a level 2 or lower","an","two"]);this.text=`Destroy ${t} enemy creature at random.`}dcurZ(){const t=this.dCurrHunter(),e=t.length;if(e>0){const i=T.randInt(0,e),s=M.tick();$.destroy(t[i],this.code,s),this.level===3&&e>1&&(t.splice(i,1),$.destroy(t[T.randInt(0,e-1)],this.code,s))}}dCurrHunter(){const t=p.crEnemyTarg();return t.level=w.ddf2(this.level+1),f.creatByTarget(t)}digiC(){this.faction="A",this.rarity="R",this.name="Digitize",this.text=`Each enemy creature gets ${m.jr9(this.boof4812n,0)}.`}digiZ(){const t=this.boof4812n;f.qEnemyCreats().forEach(e=>{e.buff(t,0)})}epiC(){this.faction="N",this.rarity="H",this.name="Epidemic";const t=this.boof246n;this.text=`Each enemy creature gets ${m.jr9(t,t)}.`}epiZ(){const t=this.boof246n,e=p.crEnemyTarg();f.creatByTarget(e).forEach(i=>{i.buff(t,t)})}roarC(){this.faction="U",this.rarity="H",this.name="Ferocious Roar";const t=this.boof235;this.text=`Each friendly creature gets ${m.jr9(t,t,this.level===3)}${this.level===3?", and Breakthrough":""}.`}roarZ(){const t=this.boof235;f.ddf1().forEach(e=>{e.buff(t,t),this.level===3&&(e.breakthrough=!0)})}get fszap(){return this.level+4}fstormC(){this.faction="T",this.rarity="H",this.name="Firestorm",this.text=`Deal ${this.fszap} damage to each creature.`}fstormZ(){const t=this.fszap,e=M.tick();f.qActiveCreats().forEach(i=>{i.hurtDirect(t,this.code,e)})}mealC(){this.faction="N",this.rarity="R",this.name="Group Meal";const t=this.boof234;this.text=`Each enemy creature gets ${m.jr9(-1*t,0)}. Each friendly creature gets ${m.jr9(t,0)}.`}mealZ(){const t=this.boof234,e=S.getActiveB();f.qActiveCreats().forEach(i=>{const s=i.owner===e?t:-1*t;i.buff(s,0)})}ibfC(){this.faction="T",this.rarity="R",this.name="Iceborn Fortitude",this.text=`Each friendly creature gets ${m.jr9(0,this.boof3510)}.`}ibfZ(){const t=this.boof3510,e=p.crFriendTarg();f.creatByTarget(e).forEach(i=>{i.buff(0,t)})}infvC(){this.faction="N",this.rarity="C",this.name="Infernal Visage";const t=this.boof246;this.text=`Each friendly creature in a side lane gets ${m.jr9(t,t,!0)} and Regenerate ${this.level}.`}infvZ(){const t=this.boof246,e=p.crFriendTarg();e.lanes=[1,5],f.creatByTarget(e).forEach(i=>{i.buff(t,t),i.addRegen(this.level)})}lashC(){this.faction="U",this.rarity="L",this.name="Lash of Demara",this.text=`Each enemy creature gets Poison ${this.level+2}.`}lashZ(){const t=this.level+2;f.qEnemyCreats().forEach(e=>{e.addPoison(t)})}shriekC(){this.faction="N",this.rarity="L",this.name="Nethershriek";const t=this.boof4815;this.text=`Spawn a ${t}/${t} Netherdrake.`}shriekZ(){f.birthCreature(`${"NDR"}${this.level}`,"S",S.getActiveB())}noxC(){this.faction="U",this.rarity="R",this.name="Noxious Cloud",this.text=`Each enemy creature gets Poison ${this.boof246}.`}noxZ(){const t=this.boof246;f.qEnemyCreats().forEach(e=>{e.addPoison(t)})}oforceC(){this.faction="A",this.rarity="H",this.name="Overwhelming Force",this.text="Each friendly creature gets "+(this.level===3?"2x attack.":`${m.jr9(this.boof369,0)}.`)}oforceZ(){if(this.level===3)f.ddf1().forEach(t=>{t.buff(t.attack,0)});else{const t=this.boof369;f.ddf1().forEach(e=>{e.buff(t,0)})}}palwC(){this.faction="A",this.rarity="R",this.name="Palladium Wave",this.maxLevel=1,this.text=`Each enemy creature gets ${m.jr9(-1,0).replaceAll("1","X")}, where X is two times your rank.`}palwZ(){const t=-2*S.getActive().rank;f.qEnemyCreats().forEach(e=>{e.buff(t,0)})}phyC(){this.faction="U",this.rarity="H",this.name="Phytobomb";const t=Z.minionBuff(this.level);this.text=`Put a ${t}/${t} ${Z.minionName(this.level)} into each players available lanes.`}phyZ(){const t=Z.minionCode(this.level),e=M.tick();[!0,!1].forEach(i=>{f.emptyLanes(i).forEach(s=>{f.birthCreature(t,"P",i,s,e)})})}pyreC(){this.faction="T",this.rarity="C",this.name="Pyre Song",this.text=`Each friendly creature deals ${this.level} damage to each enemy creature.`}pyreZ(){const t=this.level,e=M.tick(),i=f.qEnemyCreats();f.ddf1().forEach(s=>{i.forEach(h=>{h.hurtDirect(t,s.code,e)})})}rokC(){this.faction="T",this.rarity="L",this.name="Rage of Kadras",this.overload=!0,this.maxLevel=1,this.text="Each friendly Tempys creature gets +1 attack and deals damage equal to its attack to the creature opposing it."}rokZ(){const t=M.tick(),e=p.crFriendTarg();e.faction="T",f.creatByTarget(e).forEach(i=>{i.buff(1,0);const s=i.opposed;s&&s.hurtDirect(i.attack,i.code,t)})}get spboof(){return(this.level+1)*-2}pulseC(){this.faction="A",this.rarity="H",this.name="Sonic Pulse",this.text=`Each enemy creature gets ${m.jr9(this.spboof,0)}.`}pulseZ(){const t=this.spboof;f.qEnemyCreats().forEach(e=>{e.buff(t,0)})}sradC(){this.faction="U",this.rarity="C",this.name="Soothing Radiance",this.text=`Heal ${this.boof61224} damage from each friendly creature.`}sradZ(){const t=this.boof61224;f.ddf1().forEach(e=>{e.heal(t)})}stsC(){this.faction="U",this.rarity="C",this.name="Scatter the Seeds";const t=Z.minionBuff(this.level);this.text=`Spawn three ${t}/${t} ${Z.minionName(this.level)}s.`}stsZ(){const t=Z.minionCode(this.level),e=M.tick();[1,2,3].forEach(i=>{f.birthCreature(t,"S",S.getActiveB(),void 0,e)})}talinC(){this.faction="T",this.rarity="C",this.name="Talin Stampede",this.text=`Each friendly Tempys creature gets ${m.jr9(this.boof5814,0)} this turn.`}talinZ(){const t=this.boof5814;this.talinTarg().forEach(e=>{const i=p.mod("AT",t);i.expiry="ET",e.addMod(i)})}talinTarg(){const t=p.crFriendTarg();return t.faction="T",f.creatByTarget(t)}turnbC(){this.faction="T",this.rarity="H",this.name="Turnabout",this.isFree=this.level===3;const t=this.boof235;this.text=`Each creature gets ${m.jr9(t,-1*t)} this turn.`}turnbZ(){const t=this.boof235,e=-1*t;f.qActiveCreats().forEach(i=>{const s=p.mod("AT",t),h=p.mod("HL",e),d=p.mod("MH",e);s.expiry="ET",h.expiry="ET",d.expiry="ET",i.addMod(s),i.addMod(h),i.addMod(d)})}verdC(){this.faction="U",this.rarity="H",this.name="Verdant Charge";const t=this.verdb;this.text=`Each friendly creature gets ${m.jr9(t,t,!0)} and Regenerate ${t}.`}verdZ(){const t=this.verdb;f.ddf1().forEach(e=>{e.buff(t,t),e.addRegen(t)})}get verdb(){return this.lValN([1,3,6])}wdenC(){this.faction="U",this.rarity="R",this.name="Whispers of Dendris",this.maxLevel=1,this.text=`Each friendly creature gets ${m.jr9(1,1).replaceAll("1","X")}, where X is your rank.`}wdenZ(){const t=S.getActive().rank;f.ddf1().forEach(e=>{e.buff(t,t)})}}class Ni extends R{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Borean Mystic",this.jr1=this.boof4814,this.jr2=this.boof71118,this.tribe.push("WN","AS"),this.text=`Activate: Move another friendly creature to an available lane adjacent to ${this.name}.`}canActivate(t){return this.emptySloots(t).length>0&&this.buddies(t.id).length>0}startActivation(t){const e=this.buddies(t.id);e.push(C.cancelAction()),C.ddf5(e)}handleAction(t){const e=T.deTil(t.param);if(e[0]==="P1"){const i=f.ddf6(t),s=f.jr5(e[1]),h=this.emptySloots(s,i.id);h.push(C.cancelAction()),C.ddf5(h)}else{const i=f.jr5(e[1]);f.jr5(e[2]).move(t.lane),i.endActivation()}}emptySloots(t,e=""){return C.emptyAdjacents(t,T.enTil("P2",t.id,e))}buddies(t){return w.toActions(p.crFriendNotMeActTarg("CARD",t,this.code,T.enTil("P1",t)))}}class Mi extends R{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Bron, Wild Tamer",this.jr1=this.boof4712,this.jr2=this.jr1,this.tribe.push("TK"),this.hints=["RD"];const e=this.boof357;this.bonus={exist:this.ddp9(0,e*2,0,0)},this.text=`Upgrade Dinosaur: Replace Bron with a level ${this.level} Dino Knight.~When this ${m.dbdtap()}, heal ${e} damage from each other friendly creature.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("UP",this.code),i.jr4("DM",this.code),i}ddf8(t){if(t.trigger.type==="DM"){const e=t.event;return e.battle&&!e.isCreatTarg&&e.isCreatSrc&&e.srcId===t.creatId}return!1}jr8(t){if(t.trigger.type==="UP"){const i=O.toReplaced(t.event).replCreat;i.isTribe("DN")&&f.birthCreature("DNK"+this.level,"R",i.owner,i.lane),D.triggerDone()}else if(t.trigger.type==="DM"){const e=this.boof357,i=p.crNotMeTarg(t.creatId);i.player=S.toTarget(t.ownerPlayerA),f.creatByTarget(i).forEach(h=>h.heal(e)),D.triggerDone()}}}class Ri extends R{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Brightsteel Gargoyle",this.jr1=this.boof61016,this.jr2=this.jr1,this.initMobile=1,this.tribe.push("RB"),this.text=`At the end of your turn, ${this.name} gets Armor ${this.boof2510} and Defender until the end of the next turn.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("PT",this.code),i}ddf8(t){return t.trigger.type==="PT"?t.event.playerA===t.ownerPlayerA:!1}jr8(t){const e=p.mod("AR",this.boof2510,t.creatId),i=p.mod("DF",!0,t.creatId);e.expiry="ET",i.expiry="ET";const s=f.jr5(t.creatId);s.addMod(e),s.addMod(i),D.triggerDone()}}class Ei extends mt{constructor(t){super(t),this.faction="A",this.rarity="R",this.name="Bullwark Bash",this.text=`Deal damage equal to ${this.level>1?this.level+"x ":""}the Armor on a friendly creature to an enemy creature.`}playTargets(){const t=super.playTargets();if(this.enemyTargActions().length>0){const e=p.crFriendActTarg("CARD",this.code,"P1");e.hasArmor=!0,t.push(e)}return t}handleAction(t){const e=T.deTil(t.param);if(e[0]==="P1"){const i=f.ddf6(t),s=this.enemyTargActions(i.id);s.push(C.cancelAction()),C.ddf5(s)}else{this.logSpell();const i=f.ddf6(t),s=f.jr5(e[1]);i.hurtDirect(s.armor*this.level,this.code),x.spellCast()}}enemyTargActions(t=""){const e=p.crEnemyActTarg("CARD",this.code,T.enTil("P2",t));return w.toActions(e)}}class Ii extends R{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Byzerak Spitemage",this.jr1=this.boof369,this.jr2=this.level,this.initAggro=!0,this.tribe.push("HM"),this.text=`Allied Nekrium: When ${this.name} ${m.dbdtac(this.level)}, destroy it.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("FR",this.code),i}ddf8(t){if(t.trigger.type==="DM"){const e=O.toDamage(t.event);return e.battle&&e.isCreatSrc&&e.isCreatTarg&&e.dmg>0&&e.srcId===t.creatId&&w.levelTestCommon(e.hurtCreat.level,this.level)}else return!1}jr8(t){if(t.trigger.type==="FR"&&x.allied("N")){const e=f.jr5(t.creatId);e.jr4("DM",this.code),e.changed=!0}else if(t.trigger.type==="DM"){const i=O.toDamage(t.event).hurtCreat;i.status==="A"&&$.destroy(i,this.code)}D.triggerDone()}}class Gi extends R{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Cercee, Hand of Varna",this.jr1=this.lValN([1,3,5,7]),this.jr2=this.lValN([6,10,20,40]),this.tribe.push("FB"),this.initMobile=1,this.maxLevel=4;const e=this.level===4?`When ${this.name} ${m.dbdtap()}, deal damamge to that player equal to their health.~`:"";this.text=e+`When ${this.name} ${m.dbdtac(this.level)}, destroy that creature.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("DM",this.code),i}ddf8(t){if(t.trigger.type==="DM"){const e=O.toDamage(t.event);if(e.battle&&e.isCreatSrc&&e.srcId===t.creatId){if(this.level===4)return!0;if(e.isCreatTarg){const i=e.hurtCreat;return w.levelTestCommon(i.level,this.level)}}}return!1}jr8(t){const e=O.toDamage(t.event);if(e.isCreatTarg){const i=e.hurtCreat;i.status==="A"&&$.destroy(i,this.code)}else S.ddf3(e.hurtPlayer,e.hurtPlayer.health,this.code);D.triggerDone()}}class ht extends R{lookup(t){return{["BSW"]:{c:()=>this.bswC(),a:(i,s)=>this.bswA(i,s),t:i=>this.bswT(i)},["CCS"]:{c:()=>this.ccsC(),a:(i,s)=>this.ccsA(i,s),t:i=>this.ccsT(i)},["CGL"]:{c:()=>this.clordC(),a:(i,s)=>this.clordA(i,s),t:i=>this.clordT(i)},["CSH"]:{c:()=>this.cswC(),a:(i,s)=>this.cswA(i,s),t:i=>this.cswT(i)},["FFU"]:{c:()=>this.ffuC(),a:(i,s)=>this.ffuA(i,s),t:i=>this.ffuT(i)},["FFS"]:{c:()=>this.ffsC(),a:(i,s)=>this.ffsA(i,s),t:i=>this.ffsT(i)},["FSH"]:{c:()=>this.fssC(),a:(i,s)=>this.fssA(i,s),t:i=>this.fssT(i)},["KOD"]:{c:()=>this.kodC(),a:(i,s)=>this.kodA(i,s),t:i=>this.kodT(i)},["LOD"]:{c:()=>this.lashC(),a:(i,s)=>this.lashA(i,s),t:i=>this.lashT(i)},["MBP"]:{c:()=>this.mbpC(),a:(i,s)=>this.mbpA(i,s),t:i=>this.mbpT(i)},["MND"]:{c:()=>this.mndC(),a:(i,s)=>this.mndA(i,s),t:i=>this.mndT(i)},["NCS"]:{c:()=>this.ncsC(),a:(i,s)=>this.ncsA(i,s),t:i=>this.ncsT(i)},["NXG"]:{c:()=>this.nxgC(),a:(i,s)=>this.nxgA(i,s),t:i=>this.nxgT(i)},["NFF"]:{c:()=>this.nffC(),a:(i,s)=>this.nffA(i,s),t:i=>this.nffT(i)},["OHV"]:{c:()=>this.orghC(),a:(i,s)=>this.orghA(i,s),t:i=>this.orghT(i)},["PPM"]:{c:()=>this.ppmC(),a:(i,s)=>this.ppmA(i,s),t:i=>this.ppmT(i)},["PSC"]:{c:()=>this.pcoilC(),a:(i,s)=>this.pcoilA(i,s),t:i=>this.pcoilT(i)},["SGF"]:{c:()=>this.siggyC(),a:(i,s)=>this.siggyA(i,s),t:i=>this.siggyT(i)},["SRM"]:{c:()=>this.srmdC(),a:(i,s)=>this.srmdA(i,s),t:i=>this.srmdT(i)},["SSA"]:{c:()=>this.ssaC(),a:(i,s)=>this.ssaA(i,s),t:i=>this.ssaT(i)},["SWM"]:{c:()=>this.swmC(),a:(i,s)=>this.swmA(i,s),t:i=>this.swmT(i)},["UCM"]:{c:()=>this.ucmC(),a:(i,s)=>this.ucmA(i,s),t:i=>this.ucmT(i)},["UIM"]:{c:()=>this.uimC(),a:(i,s)=>this.uimA(i,s),t:i=>this.uimT(i)},["WMR"]:{c:()=>this.warmC(),a:(i,s)=>this.warmA(i,s),t:i=>this.warmT(i)},["WWR"]:{c:()=>this.wwrC(),a:(i,s)=>this.wwrA(i,s),t:i=>this.wwrT(i)},["WFS"]:{c:()=>this.wfsC(),a:(i,s)=>this.wfsA(i,s),t:i=>this.wfsT(i)},["XSH"]:{c:()=>this.shambC(),a:(i,s)=>this.shambA(i,s),t:i=>this.shambT(i)},["ZPM"]:{c:()=>this.zpmC(),a:(i,s)=>this.zpmA(i,s),t:i=>this.zpmT(i)}}[t]}targAction(t,e,i){this.lookup(t).a(e,i)}actTargets(t,e){return this.lookup(t).t(e)}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,e){const i=super.jr3(t,e);return this.doubleActivator()&&(i.jr4("TS",this.code),this.addExtraActivate(i)),i}canActivate(t){return w.toActions(this.actTargets(this.cardCode(),t)).length>0}startActivation(t){const e=w.toActions([this.actTargets(this.cardCode(),t),w.buttonTarget("CANC")]);C.ddf5(e)}handleAction(t){const e=f.ddf6(t),i=f.jr5(t.param);this.targAction(this.cardCode(),e,i),i.endActivation(),this.doubleActivator()&&i.hasMod(i.id)&&(i.removeMod(i.id),i.activationAvailable=!0,Et.whatNext())}makeCreatTarg(t){return p.crActTarg("CARD",this.code,t.id)}makeOtherCreatTarg(t){const e=this.makeCreatTarg(t);return e.notMe=t.id,e}doubleActivator(){return this.code==="CGL"+"3"||this.code==="XSH"+"3"}addExtraActivate(t){const e=p.mod("EA",!0,t.id);e.expiry="ET",t.addMod(e)}ddf8(t){return Mt.extractCardCode(t.trigger.logicCode)==="KOD"&&(t.trigger.type==="PT"||t.trigger.type==="VN")?!0:t.trigger.type==="TS"&&this.doubleActivator()?t.event.playerA===t.ownerPlayerA:super.ddf8(t)}jr8(t){if(t.trigger.type==="VN"){const e=t.event,i=f.jr5(e.creatId);f.birthCreature(i.code,"S",t.ownerPlayerA),D.triggerDone()}else if(t.trigger.type==="PT"){const e=t.trigger.customCode,i=f.jr5(t.creatId);i.triggers.filter(h=>h.customCode===e).forEach(h=>i.removeTrigger(h)),D.triggerDone()}else if(t.trigger.type==="TS"){const e=f.jr5(t.creatId);this.addExtraActivate(e),D.triggerDone()}}bswC(){this.faction="T",this.rarity="C",this.name="Borean Stormweaver",this.jr1=this.boof4816,this.jr2=this.lValN([6,10,20]),this.tribe.push("GT");const t=this.boof234;this.text=`Activate: Deal ${t} damage to a creature.`}bswT(t){const e=this.makeCreatTarg(t);return e.hint=["HR"],e}bswA(t,e){t.hurtDirect(this.boof234,this.code)}ccsC(){this.faction="N",this.rarity="C",this.name="Catacomb Spider",this.jr1=this.boof4815,this.jr2=this.lValN([5,10,16]),this.tribe.push("SP");const t=this.boof246;this.text=`Activate:  Give another creature Regenerate ${t}.`}ccsT(t){const e=this.makeOtherCreatTarg(t);return e.canRegen=!0,e.hint=["BF"],e}ccsA(t,e){t.addRegen(this.boof246)}clordC(){this.faction="N",this.rarity="H",this.name="Contagion Lord",this.jr1=this.boof4914,this.jr2=this.jr1+3,this.tribe.push("AB"),this.text="Activate, destroy a friendly Abomination: You may play an additional card this turn.",this.level===3&&(this.text+="~You may use this ability twice per turn.")}clordT(t){const e=this.makeCreatTarg(t);return e.player="F",e.tribe="AB",e}clordA(t,e){$.destroy(t,this.code),x.regularPlays+=1}cswC(){this.faction="A",this.rarity="C",this.name="Cypien Shieldwarden",this.jr1=this.boof4610,this.jr2=this.boof61016,this.tribe.push("HM");const t=this.boof246;this.text=`Activate: Give a creature Armor ${t} this turn.`}cswT(t){const e=this.makeCreatTarg(t);return e.canArmor=!0,e.hint=["BF"],e}cswA(t,e){const i=p.mod("AR",this.boof246,e.id);i.expiry="ET",t.addMod(i)}ffuC(){this.faction="T",this.rarity="H",this.name="Firefist Uranti",this.jr1=this.boof357,this.jr2=this.boof71116,this.tribe.push("FR","YT"),this.text=`Activate: Deal damage equal to ${this.name}'s attack to a creature.`}ffuT(t){const e=this.makeCreatTarg(t);return e.hint=["HR"],t.attack<1&&(e.victims="???"),e}ffuA(t,e){t.hurtDirect(e.attack,this.code)}ffsC(){this.faction="T",this.rarity="R",this.name="Flamefury Shaman",this.jr1=this.boof369,this.jr2=this.boof81116,this.tribe.push("HM"),this.text=`Activate: Grant another creature ${m.jr9(this.jr1,0)} this turn.`}ffsT(t){const e=this.makeOtherCreatTarg(t);return e.hint=["BF"],e}ffsA(t,e){const i=p.mod("AT",this.jr1,e.id);i.expiry="ET",t.addMod(i)}fssC(){this.faction="T",this.rarity="R",this.name="Flamestoke Shaman",this.jr1=this.boof61218,this.jr2=this.boof3712,this.tribe.push("HM"),this.text=`Activate: Grant an adjacent ${m.levelGateText(this.level,!0)}creature Aggressive.`}fssT(t){const e=this.makeCreatTarg(t);return e.level=w.ddf2(this.level),e.lanes=t.adjacent,e.player="F",e}fssA(t,e){t.aggressive=!0}kodC(){this.faction="N",this.rarity="L",this.name="Keeper of the Damned",this.jr1=this.boof5815,this.jr2=this.boof61017,this.tribe.push("ZB"),this.text=`Activate: another friendly ${m.levelGateText(this.level,!0)}creature gets "Vengeance: Spawn this" this turn.`}kodT(t){const e=this.makeOtherCreatTarg(t);return e.level=w.ddf2(this.level),e.player="F",e}kodA(t,e){const i=t.jr4("VN",this.code);i.customCode=e.id,i.changes=!0;const s=t.jr4("PT",this.code);s.customCode=e.id}lashC(){this.faction="U",this.rarity="L",this.name="Demara, Herald of Affliction",this.jr1=14,this.jr2=20,this.tribe.push("NG"),this.text="Activate: Give an enemy creature with Poison Defender.~Forge: Each enemy creature gets Poison 6."}lashT(t){const e=this.makeCreatTarg(t);return e.player="E",e.hasPoison=!0,e.canDefender=!0,e}lashA(t,e){t.defender=!0}mbpC(){this.faction="U",this.rarity="H",this.name="Mossbeard Patriarch",this.jr1=this.boof137,this.jr2=this.boof81220,this.tribe.push("PL"),this.text=`Activate: Give another creature ${m.jr9(0,this.boof468)}.`}mbpT(t){const e=this.makeOtherCreatTarg(t);return e.hint=["BF"],e}mbpA(t,e){t.buff(0,this.boof468)}mndC(){this.faction="A",this.rarity="R",this.name="Munitions Drone",this.jr1=this.boof137,this.jr2=this.boof6814,this.tribe.push("RB"),this.text=`Activate: Give another creature ${m.jr9(this.boof357,0)}.`}mndT(t){const e=this.makeOtherCreatTarg(t);return e.hint=["BF"],e}mndA(t,e){t.buff(this.boof357,0)}ncsC(){this.faction="N",this.rarity="R",this.name="Necroslime",this.jr1=this.boof4814,this.jr2=this.jr1,this.tribe.push("OZ");const t=this.boof248;this.text=`Activate, deal 3 damage to another friendly creature: ${this.name} gets ${m.jr9(t,t)}.`}ncsT(t){const e=this.makeOtherCreatTarg(t);return e.player="F",e}ncsA(t,e){const i=this.boof248;t.hurtDirect(3,this.code),e.buff(i,i)}nxgC(){this.faction="A",this.rarity="H",this.name="Nexus Gunner",this.jr1=this.boof51015,this.jr2=this.jr1,this.tribe.push("HM"),this.text=`Activate: Give a creature ${m.jr9(this.jr1,0)}. Use this ability only if ${this.name} is in the center lane.`}nxgT(t){const e=this.makeCreatTarg(t);return t.lane!==3?e.victims="???":e.hint=["BF","BB"],e}nxgA(t,e){t.buff(this.jr1,0)}nffC(){this.faction="U",this.rarity="L",this.name="Nuada, Faith's Flourish",this.jr1=this.boof246,this.jr2=this.lValN([10,17,25]),this.initDefend=!0,this.tribe.push("TK");const t=this.boof91421;this.text=`Activate: Replace a friendly Plant with a ${t}/${t} Treefolk.`}nffT(t){const e=this.makeCreatTarg(t);return e.player="F",e.tribe="PL",e}nffA(t,e){f.birthCreature(`${"TFF"}${this.level}`,"R",e.owner,t.lane)}orghC(){this.faction="N",this.rarity="R",this.name="Organ Harvester",this.jr1=this.lValN([2,6,9]),this.jr2=this.jr1+1,this.tribe.push("AB"),this.text=`Activate, destroy ${this.name}: Destroy a ${m.levelGateText(this.level,!0)}creature.`}orghT(t){const e=this.makeOtherCreatTarg(t);return e.level=w.ddf2(this.level),e.hint=["KL"],e}orghA(t,e){const i=M.tick();$.destroy(t,this.code,i),$.destroy(e,this.code,i)}ppmC(){this.faction="A",this.rarity="R",this.name="Palladium Pulsemage",this.jr1=this.lValN([2,8,12]),this.jr2=this.lValN([7,12,15]),this.tribe.push("HM"),this.text=`Activate: give a creature ${m.jr9(this.boof4812n,0)} this turn.`}ppmT(t){const e=this.makeCreatTarg(t);return e.hint=["DB","DF"],e}ppmA(t,e){const i=p.mod("AT",this.boof4812n,e.id);i.expiry="ET",t.addMod(i)}pcoilC(){this.faction="U",this.rarity="R",this.name="Poisoncoil",this.jr1=this.boof357,this.jr2=this.boof71013,this.initDefend=!0,this.tribe.push("SN"),this.text=`Activate: Give another creature Poison ${this.boof135}.`}pcoilT(t){const e=this.makeOtherCreatTarg(t);return e.hint=["PN","DF"],e}pcoilA(t,e){t.addPoison(this.boof135)}siggyC(){this.faction="N",this.rarity="H",this.name="Sigmund Fraud",this.jr1=this.boof357,this.jr2=this.lValN([9,14,19]),this.initDefend=!0,this.tribe.push("AB");const t=this.boof4812;this.text=`Activate, destroy another friendly creature: Deal ${t} damage to the enemy player and you gain ${t} health.`}siggyT(t){const e=this.makeOtherCreatTarg(t);return e.player="F",e}siggyA(t,e){$.destroy(t,this.code);const i=this.boof4812;S.ddf3(!e.owner,i,this.code),S.healPlayer(e.owner,i)}srmdC(){this.faction="N",this.rarity="H",this.name="Sorrow Maiden",this.jr1=this.boof4814,this.jr2=this.jr1+2,this.tribe.push("HM"),this.text=`Activate: Destroy an enemy creature with ${this.jr1} or less attack.`}srmdT(t){const e=this.makeCreatTarg(t);return e.player="E",e.maxAttack=this.jr1,e}srmdA(t,e){$.destroy(t,this.code)}ssaC(){this.faction="N",this.rarity="H",this.name="Spitesower Acolyte",this.jr1=this.boof234,this.jr2=this.lValN([8,14,22]),this.tribe.push("HM");const t=this.boof246n;this.text=`Activate, deal ${-t} damage to ${this.name}: Give a creature ${m.jr9(t,t)}.`}ssaT(t){const e=this.makeCreatTarg(t);return e.hint=["DB","BB"],e}ssaA(t,e){const i=this.boof246n,s=M.tick();e.hurtDirect(-i,this.code,s),t.buff(i,i,s)}swmC(){this.faction="A",this.rarity="R",this.name="Steelwelder Medic",this.jr1=this.lValN([3,5,13]),this.jr2=this.boof61014,this.tribe.push("HM"),this.text=`Activate: Give another creature Armor ${this.level}.`}swmT(t){const e=this.makeOtherCreatTarg(t);return e.canArmor=!0,e.hint=["BF","BB"],e}swmA(t,e){t.addArmor(this.level)}ucmC(){this.faction="T",this.rarity="R",this.name="Uranti Cryomancer",this.jr1=this.boof247,this.jr2=this.lValN([8,13,17]),this.tribe.push("IC","YT"),this.text=`Activate: Deal ${this.boof135} damage to a creature.`}ucmT(t){const e=this.makeCreatTarg(t);return e.hint=["HR"],e}ucmA(t,e){t.hurtDirect(this.boof135,this.code)}uimC(){this.faction="T",this.rarity="C",this.name="Uranti Icemage",this.jr1=this.lValN([2,5,9]),this.jr2=this.lValN([8,13,20]),this.tribe.push("IC","YT"),this.text="Activate: Negate Defender this turn."}uimT(t){const e=this.makeCreatTarg(t);return e.hint=["BB"],e}uimA(t,e){const i=p.mod("ND",!0,e.id);i.expiry="ET",t.addMod(i)}warmC(){this.faction="A",this.rarity="H",this.name="War Merchant",this.jr1=this.boof468,this.jr2=this.jr1,this.initDefend=!0,this.tribe.push("HM"),this.text=`Activate: Give a creature in a center lane ${m.jr9(this.jr1,this.level===3?this.jr1:0)}.`}warmT(t){const e=this.makeCreatTarg(t);return e.lanes=3,e.hint=["BF","BB"],e}warmA(t,e){t.buff(this.jr1,this.level===3?this.jr1:0)}wwrC(){this.faction="U",this.rarity="C",this.name="Weirwood Ranger",this.jr1=this.boof51015,this.jr2=this.jr1-1,this.tribe.push("HM"),this.text=`Activate: Give another creature ${m.jr9(this.level,this.level)}.`}wwrT(t){const e=this.makeOtherCreatTarg(t);return e.hint=["BF","BB"],e}wwrA(t,e){t.buff(this.level,this.level)}wfsC(){this.faction="N",this.rarity="H",this.name="Witherfrost Succubus",this.jr1=this.boof147,this.jr2=this.boof61018,this.tribe.push("DM");const t=-this.boof357;this.text=`Activate: Give a creature ${m.jr9(t,t)} this turn.`}wfsT(t){const e=this.makeCreatTarg(t);return e.hint=["DB","DF"],e}wfsA(t,e){const i=-this.boof357,s=p.mod("AT",i,e.id);s.expiry="ET",t.addMod(s);const h=p.mod("HL",i,e.id);h.expiry="ET",t.addMod(h);const d=p.mod("MH",i,e.id);d.expiry="ET",t.addMod(d)}shambC(){this.faction="N",this.rarity="L",this.name="Xithian Shambler",this.jr1=this.boof369,this.jr2=this.jr1+1,this.tribe.push("AB");let t="";this.level===3&&(t="~You may use this ability twice per turn."),this.text=`Activate, destroy an adjacent creature: ${this.name} moves into that creature's lane, then gets +attack and +health equal to that creature's attack and health.${t}`}shambT(t){const e=p.crFriendActTarg("CARD",this.code,t.id);return e.lanes=t.adjacent,e}shambA(t,e){const i=t.attack,s=t.health;$.destroy(t,this.code),e.move(t.lane),e.buff(i,s)}zpmC(){this.faction="T",this.rarity="R",this.name="Zephyr Mage",this.jr1=this.boof4813,this.jr2=this.boof61017,this.tribe.push("WN","AS"),this.text=`Activate: Give another ${m.levelGateText(this.level,!0)}creature Mobility ${this.level}.`}zpmT(t){const e=this.makeOtherCreatTarg(t);return e.level=w.ddf2(this.level),e.canMove=!0,e.hint=["BF","BB"],e}zpmA(t,e){t.addMobility(this.level)}}class $e extends R{lookup(t){return{["CMF"]:{c:()=>this.aconC(),f:(i,s)=>this.aconF(i,s)},["FLH"]:{c:()=>this.flhC(),f:(i,s)=>this.flhF(i,s)},["TBB"]:{c:()=>this.tbbC(),f:(i,s)=>this.tbbF(i,s)}}[t]}targAction(t,e,i){this.lookup(t).f(e,i)}playTarg;optional=!1;notme=!1;ftext="";constructor(t){super(t),this.playTarg=p.crActTarg("CARD",this.code,""),this.lookup(this.cardCode()).c(),this.text="Assault: "+this.ftext,this.ftext=""}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("AS",this.code);return s.interactive=!0,i}handleAction(t){const e=f.ddf6(t),i=f.jr5(t.param);this.targAction(this.cardCode(),e,i),C.actionDone(!0)}jr8(t){this.notme&&(this.playTarg.notMe=t.creatId);const e=w.toActions(this.playTarg);e.length>0?(e.forEach(i=>{i.param=t.creatId}),this.optional&&e.push(C.noneEndTrigger()),C.ddf5(e)):D.triggerDone()}aconC(){this.faction="N",this.rarity="R",this.name="Calamity Fiend",this.jr1=this.boof4814,this.jr2=this.lValN([5,10,16]),this.tribe.push("DM");const t=-this.boof234;this.addSp("U",t),this.playTarg.player="E",this.ftext=`Give an enemy creature ${m.jr9(t,t)}.`}aconF(t,e){const i=-this.boof234;t.buff(i,i)}flhC(){this.faction="T",this.rarity="C",this.name="Firelight Hunter",this.jr1=this.boof468,this.jr2=this.jr1-2,this.tribe.push("HM"),this.playTarg.player="E",this.addSp("D",this.jr1),this.ftext=`Deal ${this.jr1} to an enemy creature.`}flhF(t,e){t.hurtDirect(this.jr1,this.code)}tbbC(){this.faction="T",this.rarity="R",this.name="Totembound Berserker",this.jr1=this.boof81318,this.jr2=this.lValN([2,4,10]),this.tribe.push("GT"),this.playTarg.player="E",this.playTarg.level=w.ddf2(this.level),this.optional=!0,this.ftext=`You may move an enemy ${m.levelGateText(this.level,!0)}creature to the space opposing ${this.name}.`}tbbF(t,e){e.opposed||t.move(f.oppositeLane(e.lane))}}class pt extends R{lookup(t){return{["AGC"]:{c:()=>this.aconC(),f:(i,s)=>this.aconF(i,s)},["BTI"]:{c:()=>this.binvC(),f:(i,s)=>this.binvF(i,s)},["BSR"]:{c:()=>this.bsrC(),f:(i,s)=>this.bsrF(i,s)},["BAW"]:{c:()=>this.bawC(),f:(i,s)=>this.bawF(i,s)},["CHA"]:{c:()=>this.chaC(),f:(i,s)=>this.chaF(i,s)},["CCR"]:{c:()=>this.ccC(),f:(i,s)=>this.ccF(i,s)},["FRI"]:{c:()=>this.friC(),f:(i,s)=>this.friF(i,s)},["FRV"]:{c:()=>this.freavC(),f:(i,s)=>this.freavF(i,s)},["GLF"]:{c:()=>this.gfiendC(),f:(i,s)=>this.gfiendF(i,s)},["GRW"]:{c:()=>this.grwC(),f:(i,s)=>this.grwF(i,s)},["GHT"]:{c:()=>this.grhC(),f:(i,s)=>this.grhF(i,s)},["MMH"]:{c:()=>this.houndC(),f:(i,s)=>this.houndF(i,s)},["MXW"]:{c:()=>this.mtxC(),f:(i,s)=>this.mtxF(i,s)},["NGB"]:{c:()=>this.ngbC(),f:(i,s)=>this.ngbF(i,s)},["PHS"]:{c:()=>this.phxsC(),f:(i,s)=>this.phxsF(i,s)},["STD"]:{c:()=>this.stdC(),f:(i,s)=>this.stdF(i,s)},["SEV"]:{c:()=>this.surzC(),f:(i,s)=>this.surzF(i,s)},["VNF"]:{c:()=>this.vnfC(),f:(i,s)=>this.vnfF(i,s)},["WBY"]:{c:()=>this.wbyC(),f:(i,s)=>this.wbyF(i,s)},["WBU"]:{c:()=>this.wbuC(),f:(i,s)=>this.wbuF(i,s)},["XDH"]:{c:()=>this.dogsC(),f:(i,s)=>this.dogsF(i,s)}}[t]}targAction(t,e,i){this.lookup(t).f(e,i)}playTarg;optional=!1;notme=!1;ftext="";forges=!0;constructor(t){super(t),this.playTarg=p.crActTarg("CARD",this.code,""),this.lookup(this.cardCode()).c(),this.forges&&(this.text="Forge: "+this.ftext),this.ftext=""}jr3(t,e){const i=super.jr3(t,e);if(this.forges){const s=i.jr4("FR",this.code);s.interactive=!0}return i}handleAction(t){const e=f.ddf6(t),i=f.jr5(t.param);this.targAction(this.cardCode(),e,i),C.actionDone(!0)}jr8(t){this.notme&&(this.playTarg.notMe=t.creatId);const e=w.toActions(this.playTarg);e.length>0?(e.forEach(i=>{i.param=t.creatId}),this.optional&&e.push(C.noneEndTrigger()),C.ddf5(e)):D.triggerDone()}aconC(){this.faction="A",this.rarity="C",this.name="Aegis Conscript",this.jr1=this.boof3612,this.jr2=this.boof6915,this.tribe.push("HM"),this.playTarg.canArmor=!0,this.playTarg.player="F",this.ftext=`Give a friendly creature Armor ${this.boof124}.`}aconF(t,e){t.addArmor(this.boof124)}binvC(){this.faction="A",this.rarity="C",this.name="Battletech Inventor",this.jr1=this.boof369,this.jr2=this.jr1,this.tribe.push("MM"),this.playTarg.player="E",this.ftext=`Give an enemy creature ${m.jr9(-this.jr1,0)}.`}binvF(t,e){t.buff(-this.jr1,0)}bsrC(){if(this.faction="N",this.rarity="R",this.name="Bonescythe Reaver",this.jr1=this.boof5813,this.jr2=this.boof3712,this.tribe.push("AB"),this.forges=this.level>1,this.forges){const t=this.level-1;this.playTarg.level=w.ddf2(t),this.playTarg.player="E",this.ftext=`You may destroy a ${m.levelGateText(t)} enemy creature.`,this.optional=!0}else this.hints=["LV"]}bsrF(t,e){$.destroy(t,this.code)}bawC(){this.faction="U",this.rarity="R",this.name="Brambleaxe Warrior",this.jr1=this.boof61014,this.jr2=this.jr1-4,this.tribe.push("HM"),this.playTarg.hint=["BF"],this.ftext="Give a creature Breakthrough this turn."}bawF(t,e){const i=p.mod("BT",!0,e.id);i.expiry="ET",t.addMod(i)}chaC(){this.faction="U",this.rarity="R",this.name="Chistlehearth Archer",this.jr1=this.boof2510,this.jr2=this.jr1+7,this.tribe.push("HM");const t=this.boof4816;this.playTarg.player="E",this.playTarg.hasMobility=!0,this.ftext=`Deal ${t} damage to an enemy creature with Mobility. Negate Mobility from that creature.`}chaF(t,e){t.hurtDirect(this.boof4816,this.code),t.negateMobility=!0}ccC(){this.faction="N",this.rarity="C",this.name="Corpse Crawler",this.jr1=this.boof81220,this.jr2=this.jr1+1,this.tribe.push("AB"),this.playTarg.player="F",this.ftext="Destroy a friendly creature."}ccF(t,e){$.destroy(t,this.code)}friC(){this.faction="T",this.rarity="C",this.name="Flamerift Instigator",this.jr1=this.lValN([7,12,17]),this.jr2=this.jr1-5,this.tribe.push("GT"),this.ftext="Negate Defender from a creature."}friF(t,e){t.negateDefender=!0}freavC(){if(this.faction="N",this.rarity="H",this.name="Fleshreaver",this.jr1=this.boof6915,this.jr2=this.boof235,this.tribe.push("AB"),this.forges=this.level>1,this.forges){const t=this.level-1;this.consistent=!0,this.playTarg.level=w.ddf2(t),this.playTarg.player="E",this.ftext=`You may destroy a ${m.levelGateText(t)} enemy creature.`,this.optional=!0}else this.hints=["LV"]}freavF(t,e){$.destroy(t,this.code)}get fiendBof(){return this.lValN([-1,-2,-5])}gfiendC(){this.faction="N",this.rarity="C",this.name="Gloomfiend",this.jr1=this.boof4812,this.jr2=this.jr1,this.tribe.push("AB"),this.playTarg.player="E";const t=this.fiendBof;this.ftext=`You may give an enemy creature ${m.jr9(t,t)}.`,this.optional=!0}gfiendF(t,e){const i=this.fiendBof;t.buff(i,i)}grwC(){this.faction="N",this.rarity="C",this.name="Gloomreaper Witch",this.jr1=this.boof5915,this.jr2=this.jr1,this.tribe.push("HM");const t=this.boof147;this.playTarg.maxAttack=t,this.playTarg.player="E",this.ftext=`You may destroy an enemy creature with ${t} or less attack.`,this.optional=!0}grwF(t,e){$.destroy(t,this.code)}grhC(){this.faction="U",this.rarity="C",this.name="Grove Huntress",this.jr1=this.boof4711,this.jr2=this.jr1-1,this.tribe.push("HM"),this.playTarg.player="F";const t=this.boof135;this.ftext=`Give a friendly creature ${m.jr9(t,t)}.`}grhF(t,e){const i=this.boof135;t.buff(i,i)}houndC(){this.faction="T",this.rarity="C",this.name="Magma Hound",this.jr1=this.boof4813,this.jr2=this.jr1-1,this.tribe.push("ER","EL");const t=this.boof246;this.optional=!0,this.playTarg.player="E",this.ftext=`You may deal ${t} damage to an enemy creature.`}houndF(t,e){t.hurtDirect(this.boof246,this.code)}mtxC(){this.faction="A",this.rarity="C",this.name="Matrix Warden",this.jr1=this.lValN([3,8,12]),this.jr2=this.jr1,this.tribe.push("RB");const t=this.boof3510;this.playTarg.player="F",this.ftext=`Give a friendly creature ${m.jr9(t,0)}.`}mtxF(t,e){t.buff(this.boof3510,0)}ngbC(){this.faction="T",this.rarity="C",this.name="Nargath Bruiser",this.jr1=this.boof5814,this.jr2=this.jr1-1,this.tribe.push("ER","AS");const t=this.boof248;this.playTarg.player="F",this.ftext=`Give a friendly creature ${m.jr9(0,t)}.`}ngbF(t,e){t.buff(0,this.boof248)}phxsC(){this.faction="A",this.rarity="R",this.name="Phalanx Squadron",this.jr1=this.boof3714,this.jr2=this.boof61117,this.tribe.push("HM"),this.playTarg.hasArmor=!0,this.playTarg.player="F";const t=this.boof234;this.ftext=`Give a friendly creature with Armor ${m.jr9(t,t)}.`}phxsF(t,e){const i=this.boof234;t.buff(i,i)}stdC(){this.faction="A",this.rarity="H",this.name="Shardthief Druid",this.jr1=this.boof5813,this.jr2=this.boof81318,this.tribe.push("MM"),this.playTarg.canRegen,this.playTarg.player="E",this.ftext=`Negate and remove all Regenerate from an enemy creature. ${this.name} gets that much Renerate.`}stdF(t,e){const i=t.regen;t.negateRegen=!0,e.addRegen(i)}surzC(){this.faction="N",this.rarity="L",this.name="Suruzal, Emissary of Varna",this.jr1=this.boof4814,this.jr2=this.jr1-1,this.tribe.push("HM"),this.optional=!0,this.playTarg.player="F",this.playTarg.level=w.ddf2(this.level),this.ftext=`You may destroy another friendly ${m.levelGateText(this.level,!0)}creature. If you do, spawn a copy of it.`}surzF(t,e){const i=M.tick();$.destroy(t,this.code,i),f.birthCreature(t.code,"S",e.owner,void 0,i)}vnfC(){this.faction="U",this.rarity="R",this.name="Venomfang",this.jr1=this.boof61014,this.jr2=this.jr1-2,this.tribe.push("SN");const t=this.boof246;this.playTarg.player="E",this.ftext=`Give an enemy creature Poison ${t}.`}vnfF(t,e){t.addPoison(this.boof246)}wbyC(){this.faction="T",this.rarity="R",this.name="Wallbreaker Yeti",this.jr1=this.boof4712,this.jr2=this.boof71116,this.tribe.push("ER","YT"),this.playTarg.player="E",this.playTarg.level=w.ddf2(this.level),this.playTarg.hasDefender=!0,this.ftext=`You may destroy a ${m.levelGateText(this.level,!0)}enemy creature with Defender.`,this.optional=!0}wbyF(t,e){$.destroy(t,this.code)}wbuC(){this.faction="T",this.rarity="C",this.name="Warbringer Uranti",this.jr1=this.boof3711,this.jr2=this.jr1,this.tribe.push("LT","YT");const t=this.boof4812;this.notme=!0,this.playTarg.player="F",this.addSp("A",t),this.ftext=`Give another friendly creature ${m.jr9(t,0)} this turn.`}wbuF(t,e){const i=p.mod("AT",this.boof4812,e.id);i.expiry="ET",t.addMod(i)}dogsC(){this.faction="N",this.rarity="R",this.name="Xithian Direhound",this.jr1=4,this.jr2=4,this.tribe.push("AB"),this.overload=!0,this.maxLevel=1,this.optional=!0,this.playTarg.player="E",this.ftext=`You may give an enemy creature ${m.jr9(-4,-4)}.`}dogsF(t,e){t.buff(-4,-4)}}class G extends mt{lookup(t){return{["AGW"]:{c:()=>this.awingC(),z:i=>this.awingZ(i)},["ASG"]:{c:()=>this.asurgeC(),z:i=>this.asurgeZ(i)},["ATZ"]:{c:()=>this.anatC(),z:i=>this.anatZ(i)},["AQE"]:{c:()=>this.aqatC(),z:i=>this.aqatZ(i)},["ABL"]:{c:()=>this.ablC(),z:i=>this.ablZ(i)},["BTM"]:{c:()=>this.botC(),z:i=>this.botZ(i)},["CSU"]:{c:()=>this.csurgeC(),z:i=>this.csurgeZ(i)},["CTW"]:{c:()=>this.cullC(),z:i=>this.cullZ(i)},["CTV"]:{c:()=>this.cultC(),z:i=>this.cultZ(i)},["CAG"]:{c:()=>this.cypaC(),z:i=>this.cypaZ(i)},["CBS"]:{c:()=>this.cypbC(),z:i=>this.cypbZ(i)},["DBT"]:{c:()=>this.dreadC(),z:i=>this.dreadZ(i)},["DYB"]:{c:()=>this.drybC(),z:i=>this.drybZ(i)},["ETN"]:{c:()=>this.elnC(),z:i=>this.elnZ(i)},["ENP"]:{c:()=>this.enpC(),z:i=>this.enpZ(i)},["ENR"]:{c:()=>this.rageC(),z:i=>this.rageZ(i)},["EXD"]:{c:()=>this.expdmC(),z:i=>this.expdmZ(i)},["FIN"]:{c:()=>this.feralC(),z:i=>this.feralZ(i)},["FVA"]:{c:()=>this.fervassC(),z:i=>this.fervassZ(i)},["FLN"]:{c:()=>this.flncC(),z:i=>this.flncZ(i)},["FFL"]:{c:()=>this.ffldC(),z:i=>this.ffldZ(i)},["FZS"]:{c:()=>this.frozC(),z:i=>this.frozZ(i)},["GTH"]:{c:()=>this.ghastC(),z:i=>this.ghastZ(i)},["GCR"]:{c:()=>this.crushC(),z:i=>this.crushZ(i)},["HAR"]:{c:()=>this.hartC(),z:i=>this.hartZ(i)},["IFR"]:{c:()=>this.izftC(),z:i=>this.izftZ(i)},["JPK"]:{c:()=>this.jpC(),z:i=>this.jpZ(i)},["LBR"]:{c:()=>this.lbrandC(),z:i=>this.lbrandZ(i)},["LYS"]:{c:()=>this.shartC(),z:i=>this.shartZ(i)},["MPH"]:{c:()=>this.morphC(),z:i=>this.morphZ(i)},["MSC"]:{c:()=>this.sculptC(),z:i=>this.sculptZ(i)},["NNS"]:{c:()=>this.nanoC(),z:i=>this.nanoZ(i)},["NSL"]:{c:()=>this.natselC(),z:i=>this.natselZ(i)},["NCF"]:{c:()=>this.nflayC(),z:i=>this.nflayZ(i)},["NCV"]:{c:()=>this.nviveC(),z:i=>this.nviveZ(i)},["OEX"]:{c:()=>this.oexpC(),z:i=>this.oexpZ(i)},["PTR"]:{c:()=>this.pwtorC(),z:i=>this.pwtorZ(i)},["PSG"]:{c:()=>this.psurgeC(),z:i=>this.psurgeZ(i)},["PMS"]:{c:()=>this.pslamC(),z:i=>this.pslamZ(i)},["ROG"]:{c:()=>this.rotgC(),z:i=>this.rotgZ(i)},["SAP"]:{c:()=>this.sapC(),z:i=>this.sapZ(i)},["SVO"]:{c:()=>this.soathC(),z:i=>this.soathZ(i)},["SOC"]:{c:()=>this.scythC(),z:i=>this.scythZ(i)},["SOA"]:{c:()=>this.soaC(),z:i=>this.soaZ(i)},["SOD"]:{c:()=>this.sodC(),z:i=>this.sodZ(i)},["SOT"]:{c:()=>this.sotC(),z:i=>this.sotZ(i)},["SHG"]:{c:()=>this.shgrC(),z:i=>this.shgrZ(i)},["SNB"]:{c:()=>this.snbC(),z:i=>this.snbZ(i)},["SHV"]:{c:()=>this.sharvC(),z:i=>this.sharvZ(i)},["SRP"]:{c:()=>this.sreapC(),z:i=>this.sreapZ(i)},["STR"]:{c:()=>this.sttorC(),z:i=>this.sttorZ(i)},["STO"]:{c:()=>this.sptorC(),z:i=>this.sptorZ(i)},["SOV"]:{c:()=>this.sovC(),z:i=>this.sovZ(i)},["STN"]:{c:()=>this.stbrnC(),z:i=>this.stbrnZ(i)},["STP"]:{c:()=>this.ssperC(),z:i=>this.ssperZ(i)},["SIN"]:{c:()=>this.sinC(),z:i=>this.sinZ(i)},["TGL"]:{c:()=>this.tanglC(),z:i=>this.tanglZ(i)},["TPT"]:{c:()=>this.tpactC(),z:i=>this.tpactZ(i)},["TUP"]:{c:()=>this.tugC(),z:i=>this.tugZ(i)},["TOT"]:{c:()=>this.totsC(),z:i=>this.totsZ(i)},["TOB"]:{c:()=>this.blightC(),z:i=>this.blightZ(i)},["TXS"]:{c:()=>this.sporeC(),z:i=>this.sporeZ(i)},["TCG"]:{c:()=>this.tremcC(),z:i=>this.tremcZ(i)},["VSK"]:{c:()=>this.vensC(),z:i=>this.vensZ(i)},["VGR"]:{c:()=>this.vgraC(),z:i=>this.vgraZ(i)},["VOB"]:{c:()=>this.vobC(),z:i=>this.vobZ(i)},["VYE"]:{c:()=>this.vembC(),z:i=>this.vembZ(i)},["UBL"]:{c:()=>this.uboltC(),z:i=>this.uboltZ(i)},["WMM"]:{c:()=>this.warC(),z:i=>this.warZ(i)},["XRW"]:{c:()=>this.xwillC(),z:i=>this.xwillZ(i)}}[t]}cardCast(t,e){this.lookup(t).z(e)}playTarg;constructor(t){super(t),this.playTarg=p.crActTarg("CARD",this.code,""),this.lookup(this.cardCode()).c()}playTargets(){const t=super.playTargets();return this.cardCode()==="NSL"&&f.creatByTarget(p.crFriendTarg()).length<5||t.push(this.playTarg),t}handleAction(t){this.logSpell();const e=f.ddf6(t);this.cardCast(this.cardCode(),e),x.spellCast()}ddf8(t){const e=Mt.extractCardCode(t.trigger.logicCode);if(e==="TOB"&&t.trigger.type==="DM"){const i=O.toDamage(t.event);if(i.battle&&i.isCreatTarg&&i.isCreatSrc&&i.srcId===t.creatId)return this.level===3?!0:W.getCard(i.hurtCreat.code).level<=this.level}else if((e==="ABL"||e==="OEX"||e==="VOB")&&t.trigger.type==="DM"){const i=t.event;return i.battle&&!i.isCreatTarg&&i.isCreatSrc&&i.srcId===t.creatId}else if((e==="FZS"||e==="IFR")&&t.trigger.type==="DM"){const i=t.event;if(i.isCreatTarg&&i.target===t.creatId)return!0}else if(e==="DYB"&&t.trigger.type==="EF"){const i=O.toEnterField(t.event);return t.trigger.creatId!==i.creature.id&&i.creature.owner===t.ownerPlayerA}else if(e==="FVA"&&t.trigger.type==="FK"||e==="ROG"&&t.trigger.type==="DS"||e==="SHG"&&(t.trigger.type==="PT"||t.trigger.type==="VN")||(e==="IFR"||e==="OEX")&&t.trigger.type==="PT")return!0;return!1}jr8(t){const e=Mt.extractCardCode(t.trigger.logicCode);if(e==="TOB"){const i=t.event,s=f.jr5(i.target);s.status==="A"&&$.destroy(s,this.code)}else if(e==="ABL")f.jr5(t.creatId).buff(this.level,this.level);else if(e==="FVA"){const i=f.jr5(t.creatId),s=f.searchByLane(f.oppositeLane(i.lane),!i.owner);s&&s.hurtDirect(this.boof3612,i.code)}else if(e==="FZS"||e==="IFR"&&t.trigger.type==="DM"){const i=f.jr5(t.creatId);i.status==="A"&&$.destroy(i,this.code)}else if(e==="ROG"||e==="DYB")f.jr5(t.creatId).buff(this.level,this.level);else if(e==="SHG"){if(t.trigger.type==="VN"){const i=t.event,s=f.jr5(i.creatId);f.birthCreature(s.code,"S",t.ownerPlayerA)}else if(t.trigger.type==="PT"){const i=t.trigger.customCode,s=f.jr5(t.creatId);s.triggers.filter(d=>d.customCode===i).forEach(d=>s.removeTrigger(d))}}else if(e==="IFR"&&t.trigger.type==="PT"){const i=T.deTil(t.trigger.customCode),s=i[1];if(i[0]==="P2")t.trigger.customCode=T.enTil("P1",s);else{const h=f.jr5(t.creatId),d=h.triggers.find(g=>g.customCode===s);d&&h.removeTrigger(d),h.removeTrigger(t.trigger)}}else if(e==="OEX"){if(t.trigger.type==="DM"){const i=t.event,s=f.qEnemyCreats(),h=s.length,d=M.tick();let g;h>0&&(this.level===1?g=[s[T.randInt(0,h)]]:this.level===2?(g=s.splice(T.randInt(0,h),1),s.length>0&&g.push(s[T.randInt(0,h-1)])):g=s,g.forEach(y=>y.hurtDirect(i.dmg,this.code,d)))}else if(t.trigger.type==="PT"){const i=t.trigger.customCode,s=f.jr5(t.creatId);s.triggers.filter(d=>d.customCode===i).forEach(d=>s.removeTrigger(d))}}else if(e==="VOB"){const i=O.toDamage(t.event);i.srcCreat.hurtDirect(i.dmg,this.code)}else super.jr8(t);D.triggerDone()}awingC(){this.faction="A",this.rarity="R",this.name="Aegis Wings",this.text=`Give a creature ${m.jr9(this.boof369,0)}. Then if that creature has the highest attack, it also gets Mobility 1 and Armor ${this.boof246}.`,this.playTarg.hint=["BF"]}awingZ(t){t.buff(this.boof369,0);const e=t.attack;f.qActiveCreats().every(i=>i.attack<=e)&&(t.addMobility(1),t.addArmor(this.boof246))}asurgeC(){this.faction="T",this.rarity="R",this.name="Aerial Surge",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]),this.playTarg.canMove=!0,this.playTarg.hint=["BF"],this.text=`Give a creature Mobility ${this.level}.`}asurgeZ(t){t.addMobility(this.level)}anatC(){this.faction="A",this.rarity="C",this.name="Anatomize",this.playTarg.hint=["DB"],this.text=`Give a creature ${m.jr9(-this.boof4816,0)}.~You may play an additional ${this.name} this turn.`}anatZ(t){t.buff(-this.boof4816,0);const e=x.freeCard(this.code);e.condition.cardCode="ATZ"}aqatC(){this.faction="T",this.rarity="C",this.name="Aquatic Embrace",this.text=`Give a creature ${m.jr9(0,this.boof51015)}.`,this.playTarg.hint=["BF"]}aqatZ(t){t.buff(0,this.boof51015)}ablC(){this.faction="T",this.rarity="R",this.name="Asir's Blessing",this.text=`Give a creature "When this creature ${m.dbdtap()}, it gets ${m.jr9(this.level,this.level)}."`,this.playTarg.hint=["BF"]}ablZ(t){t.changed=!0,t.jr4("DM",this.code),t.hints.push("OL")}botC(){this.faction="U",this.rarity="H",this.name="Botanimate",this.text=`Replace an enemy ${m.levelGateText(this.level,!0)}creature with a 3/3 Sapling.`,this.playTarg.player="E",this.playTarg.level=w.ddf2(this.level)}botZ(t){f.birthCreature(`${"BOS"}${this.level}`,"R",t.owner,t.lane)}csurgeC(){this.faction="N",this.rarity="R",this.name="Contagion Surge",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]);const t=this.boof123n;this.text=`Give a creature ${m.jr9(t,t)}.`,this.playTarg.hint=["DB"]}csurgeZ(t){const e=this.boof123n;t.buff(e,e)}cullC(){this.faction="N",this.rarity="C",this.name="Cull the Weak";const t=this.boof4814;this.text=`Destroy a creature with ${t} or less attack.`,this.playTarg.maxAttack=t,this.playTarg.hint=["KL"]}cullZ(t){$.destroy(t,this.code)}cultC(){this.faction="U",this.rarity="H",this.name="Cultivate";const t=this.boof91421;this.text=`Replace a friendly Plant with a ${t}/${t} Treefolk.`,this.playTarg.player="F",this.playTarg.tribe="PL"}cultZ(t){f.birthCreature(`${"TFF"}${this.level}`,"R",t.owner,t.lane)}cypaC(){this.faction="A",this.rarity="R",this.name="Cypien Augmentation",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]);const t=this.boof246;this.text=`Give a creature in a center lane ${m.jr9(t,t)}.`,this.playTarg.lanes=3,this.playTarg.hint=["BF"]}cypaZ(t){const e=this.boof246;t.buff(e,e)}cypbC(){this.faction="A",this.rarity="C",this.name="Cypien Battlesuit",this.text=`Give an Alloyin creature ${m.jr9(this.boof51015,0)} and Armor ${this.boof124}.`,this.playTarg.hint=["BF"],this.playTarg.faction="A"}cypbZ(t){t.buff(this.boof51015,0),t.addArmor(this.boof124)}dreadC(){this.faction="N",this.rarity="H",this.name="Dreadbolt",this.hints=["LV"],this.text=`Destroy a ${m.levelGateText(this.level,!0)}creature.`,this.playTarg.level=w.ddf2(this.level),this.playTarg.hint=["KL"]}dreadZ(t){$.destroy(t,this.code)}drybC(){this.faction="U",this.rarity="R",this.name="Dryad's Boon",this.text=`Give a creature ${m.jr9(this.level,this.level,!0)}, and "When another friendly creature enters play, this gets ${m.jr9(this.level,this.level)}."`,this.playTarg.hint=["BF"]}drybZ(t){t.buff(this.level,this.level),t.changed=!0,t.jr4("EF",this.code)}enpC(){this.faction="A",this.rarity="H",this.name="Energy Prison",this.isFree=this.level===3,this.text=`Give a ${m.levelGateText(this.level,!0)}creature Defender.`,this.playTarg.canDefender=!0}enpZ(t){t.defender=!0}elnC(){this.faction="A",this.rarity="C",this.name="Electro Net",this.text=`Give a creature ${m.jr9(-this.boof51015,0)}.`,this.playTarg.hint=["DB"]}elnZ(t){t.buff(-this.boof51015,0)}rageC(){this.faction="U",this.rarity="C",this.name="Enrage";const t=this.boof3612;this.text=`Give a creature ${m.jr9(t,t)}.`,this.playTarg.hint=["BF"]}rageZ(t){const e=this.boof3612;t.buff(e,e)}expdmC(){this.faction="N",this.rarity="H",this.name="Explosive Demise",this.text=`Destroy a friendly ${m.levelGateText(this.level+1,!0)}creature.~Deal damage equal to its attack to the enemy player.${this.level===3?"~You gain that much health.":""}`,this.playTarg.level=w.ddf2(this.level+1),this.playTarg.player="F"}expdmZ(t){const e=t.attack;$.destroy(t,this.code),S.ddf3("E",e,this.code),this.level===3&&S.healPlayer("F",e)}get fiboof(){return this.lValN([1,3,8])}feralC(){this.faction="U",this.rarity="C",this.name="Feral Instinct";const t=this.fiboof;this.text=`Give a creature ${m.jr9(t,t,!0)} and Breakthrough.`,this.playTarg.hint=["BF"]}feralZ(t){const e=this.fiboof;t.breakthrough=!0,t.buff(e,e)}fervassC(){this.faction="T",this.rarity="H",this.name="Fervent Assault",this.playTarg.player="F",this.text=`Give a friendly creature Mobility ${this.level} and "Flank: Deal ${this.boof3612} damage to the opposing creature.`}fervassZ(t){t.changed=!0,t.addMobility(this.level),t.jr4("FK",this.code)}flncC(){this.faction="T",this.rarity="R",this.name="Flame Lance";const t=this.boof579;this.text=`Deal ${t} damage to an enemy creature and ${t} damage to the enemy player.`,this.playTarg.player="E"}flncZ(t){const e=this.boof579;t.hurtDirect(e,this.code),S.ddf3("E",e,this.code)}ffldC(){this.faction="A",this.rarity="C",this.name="Forcefield",this.playTarg.canArmor=!0,this.playTarg.hint=["BF"],this.text=`Give a creature Armor ${this.boof51020} this turn.`}ffldZ(t){const e=p.mod("AR",this.boof51020,this.code);e.expiry="ET",t.addMod(e)}frozC(){this.faction="T",this.rarity="R",this.name="Frozen Solid",this.playTarg.level=w.ddf2(this.level),this.playTarg.hint=["KL"],this.text=`Give a ${m.levelGateText(this.level,!0)}creature "When this is dealt damage, destroy it".`}frozZ(t){t.changed=!0,t.jr4("DM",this.code)}ghastC(){this.faction="N",this.rarity="C",this.name="Ghastly Touch";const t=-this.boof3612;this.text=`Give a creature ${m.jr9(t,t)}.`,this.playTarg.hint=["DB"]}ghastZ(t){const e=-this.boof3612;t.buff(e,e)}crushC(){this.faction="T",this.rarity="C",this.name="Glacial Crush",this.isFree=this.level>1,this.isFree||(this.hints=["LV"]),this.playTarg.player="E",this.playTarg.hasDefender=!0,this.text=`Destroy an enemy creature with Defender.${this.level===3?" Deal damage equal to its health to the enemy player.":""}`}crushZ(t){const e=t.health;$.destroy(t,this.code),this.level===3&&S.ddf3(t.owner,e,this.code)}hartC(){this.faction="A",this.rarity="C",this.name="Heavy Artillery",this.playTarg.hint=["BF"],this.text=`Give a creature ${m.jr9(this.boof51015,0)}.`}hartZ(t){t.buff(this.boof51015,0)}izftC(){this.faction="T",this.rarity="T",this.name="Iztek's Frost",this.isFree=this.level===3,this.playTarg.level=w.ddf2(this.level+1),this.playTarg.hint=["KL"],this.text=`Until the end of the next turn, give a ${m.levelGateText(this.level+1,!0)}creature "When this is dealt damage, destroy it".`}izftZ(t){const e=M.genId(),i=t.jr4("DM",this.code);i.changes=!0,i.customCode=e;const s=t.jr4("PT",this.code);s.customCode=T.enTil("P2",e)}jpC(){this.faction="A",this.rarity="C",this.name="Jet Pack",this.playTarg.hint=["BF"],this.text=`Give a creature ${m.jr9(this.boof369,0)} and Mobility 1.`}jpZ(t){t.buff(this.boof369,0),t.addMobility(1)}lbrandC(){this.faction="T",this.rarity="C",this.name="Lightning Brand",this.playTarg.level=w.ddf2(this.level+1),this.playTarg.hint=["BF"],this.text=`Give a ${m.levelGateText(this.level+1)}creature ${m.jr9(this.boof124,0)} and Aggressive this turn.`}lbrandZ(t){const e=p.mod("AT",this.boof124,this.code),i=p.mod("AG",!0,this.code);e.expiry="ET",i.expiry="ET",t.addMod(e),t.addMod(i)}shartC(){this.faction="U",this.rarity="R",this.name="Lysian Shard",this.overload=!0,this.maxLevel=1,this.playTarg.hint=["BF"],this.text=`Give a creature ${m.jr9(6,6)}.`}shartZ(t){t.buff(6,6)}morphC(){this.faction="U",this.rarity="H",this.name="Metamorphosis",this.text=`Replace a ${m.levelGateText(this.level,!0)}creature with a 0/3 Feywing Chrysalis.`,this.playTarg.level=w.ddf2(this.level)}morphZ(t){f.birthCreature(`${"FWC"}1`,"R",t.owner,t.lane)}sculptC(){this.faction="A",this.rarity="H",this.name="Metasculpt",this.isFree=this.level===3,this.playTarg.level=w.ddf2(this.level+1),this.text=`Remove all abilities from a ${m.levelGateText(this.level+1,!0)}creature.`,this.playTarg.hint=["DB"]}sculptZ(t){t.wipeAll()}nanoC(){this.faction="A",this.rarity="R",this.name="Nanoswarm",this.playTarg.level=w.ddf2(this.level),this.text=`Give a ${m.levelGateText(this.level,!0)}creature ${m.jr9(-this.boof51015,0)} and remove all abilities from it.`,this.playTarg.hint=["DB"]}nanoZ(t){t.buff(-this.boof51015,0),t.wipeAll()}natselC(){this.faction="U",this.rarity="R",this.name="Natural Selection",this.text=`If there is a friendly creature in each lane, destroy a ${m.levelGateText(this.level,!0)}creature.`,this.playTarg.level=w.ddf2(this.level),this.playTarg.hint=["KL"]}natselZ(t){$.destroy(t,this.code)}nflayC(){this.faction="N",this.rarity="C",this.name="Necroflay";const t=-this.boof3711;this.text=`Give a creature ${m.jr9(t,t)}.~You may play an additional ${this.name} this turn.`,this.playTarg.hint=["DB"]}nflayZ(t){const e=-this.boof3711;t.buff(e,e);const i=x.freeCard(this.code);i.condition.cardCode="NCF"}nviveC(){this.faction="N",this.rarity="C",this.name="Necrovive",this.playTarg.canRegen=!0,this.playTarg.hint=["BF"],this.text=`Give a creature Regenerate ${this.boof3612}.`}nviveZ(t){t.addRegen(this.boof3612)}oexpC(){this.faction="A",this.rarity="H",this.name="Oratek Explosives",this.playTarg.player="F";const t=this.lValS(["an enemy creature at random","up to two enemy creatures at random","each enemy creature"]);this.text=`Give a friendly creature ${m.jr9(5,0)}.~Allied Tempys: This turn, when that creature ${m.dbdtap()}, deal that much damage to ${t}.`}oexpZ(t){if(t.buff(5,0),x.allied("T")){const e=M.genId(),i=t.jr4("DM",this.code);i.changes=!0,i.customCode=e;const s=t.jr4("PT",this.code);s.customCode=e,t.hints.push("OL")}}pwtorC(){this.faction="A",this.rarity="R",this.name="Power Torrent",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]),this.playTarg.hint=["BF"],this.text=`Give a creature ${m.jr9(this.boof234,0)}.`}pwtorZ(t){t.buff(this.boof234,0)}psurgeC(){this.faction="U",this.rarity="R",this.name="Primal Surge",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]),this.playTarg.hint=["BF"],this.text=`Give a creature ${m.jr9(this.level,this.level)}.`}psurgeZ(t){t.buff(this.level,this.level)}pslamC(){this.faction="T",this.rarity="C",this.name="Primordial Slam",this.playTarg.hint=["BF"],this.text=`Give a creature ${m.jr9(this.boof71116,0)} this turn.`}pslamZ(t){const e=p.mod("AT",this.boof71116,this.code);e.expiry="ET",t.addMod(e)}rotgC(){this.faction="N",this.rarity="H",this.name="Rite of the Grimgaunt",this.playTarg.hint=["BF"],this.text=`Give a creature "When a creature is destroyed, this gets ${m.jr9(this.level,this.level)}."`}rotgZ(t){t.changed=!0,t.jr4("DS",this.code)}sapC(){this.faction="A",this.rarity="C",this.name="Sap",this.playTarg.level=w.ddf2(this.level),this.text=`Reduce a ${m.levelGateText(this.level,!0)}creature's attack to 0.`,this.playTarg.hint=["DB"]}sapZ(t){t.buff(-t.attack,0)}soathC(){this.faction="U",this.rarity="C",this.name="Savage Oath",this.level===1&&(this.hints=["LV"]);const t=this.saboof;this.text=`Give an Uterra creature ${m.jr9(t,t,!0)} and Breakthrough.`,this.playTarg.hint=["BF"],this.playTarg.faction="U"}soathZ(t){const e=this.saboof;t.buff(e,e),t.breakthrough=!0}get saboof(){return this.lValN([2,6,15])}scythC(){this.faction="N",this.rarity="L",this.name="Scythe of Chiron";const t=this.boof246;this.playTarg.player="F",this.text=`Each enemy creature gets ${m.jr9(-t,0)}. Give a friendly creature ${m.jr9(t,0)} for each enemy creature.`}scythZ(t){const e=-this.boof246,i=f.qEnemyCreats();i.forEach(s=>{s.buff(e,0)}),i.length>0&&t.buff(-e*i.length,0)}soaC(){this.faction="A",this.rarity="C",this.name="Seal of Anvillon",this.level===1?this.hints=["LV"]:this.consistent=!0,this.playTarg.hint=["BF"],this.text=`Give a creature ${m.jr9(this.ubzap,0)}.`}soaZ(t){t.buff(this.ubzap,0)}sodC(){this.faction="U",this.rarity="C",this.name="Seal of Deepwood",this.level===1?this.hints=["LV"]:this.consistent=!0;const t=this.derpboof;this.playTarg.hint=["BF"],this.text=`Give a creature ${m.jr9(t,t)}.`}sodZ(t){const e=this.derpboof;t.buff(e,e)}get derpboof(){return this.lValN([1,6,12])}sotC(){this.faction="N",this.rarity="C",this.name="Seal of Tarsus",this.level===1?this.hints=["LV"]:this.consistent=!0;const t=this.tars;this.playTarg.hint=["DB"],this.text=`Give a creature ${m.jr9(t,t)}.`}sotZ(t){const e=this.tars;t.buff(e,e)}get tars(){return this.lValN([-2,-8,-16])}shgrC(){this.faction="N",this.rarity="L",this.name="Shallow Grave",this.isFree=this.level===3,this.playTarg.level=w.ddf2(this.level+1),this.playTarg.player="F",this.text=`Give a ${m.levelGateText(this.level+1,!0)}friendly creature "Vengeance: Spawn this" this turn.`}shgrZ(t){const e=M.genId(),i=t.jr4("VN",this.code);i.customCode=e,i.changes=!0;const s=t.jr4("PT",this.code);s.customCode=e}sinC(){this.faction="U",this.rarity="C",this.name="Strength In Numbers",this.playTarg.hint=["BF"],this.text=`Give a creature ${m.jr9(this.level,this.level)} for each friendly creature.`}sinZ(t){const e=this.level*f.ddf1().length;t.buff(e,e)}get snbboof(){return-1*(this.level+7)}snbC(){this.faction="A",this.rarity="C",this.name="Sonic Burst",this.playTarg.hint=["DB"],this.text=`Give a creature ${m.jr9(this.snbboof,0)}.`}snbZ(t){t.buff(this.snbboof,0)}sharvC(){this.faction="N",this.rarity="H",this.name="Soul Harvest";const t=this.lValS(["an additional level 1 card","an additional card","two additional cards"]);this.text=`Destroy a friendly creature. You may play ${t} this turn.`,this.playTarg.player="F"}sharvZ(t){if($.destroy(t,this.code),this.level===1){const e=x.freeCard(this.code);e.condition.level=w.ddf2(1)}else x.regularPlays+=this.level-1}sreapC(){this.faction="N",this.rarity="L",this.name="Soulreap";const t=this.boof248;this.text=`Destroy an enemy creature with ${t} or less attack. Then Spawn a copy of it.`,this.playTarg.player="E",this.playTarg.maxAttack=t}sreapZ(t){$.destroy(t,this.code),f.birthCreature(t.code,"S",!t.owner)}sttorC(){this.faction="N",this.rarity="R",this.name="Spirit Torrent",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]),this.text=`Give a creature Regenerate ${this.boof234}.`,this.playTarg.hint=["BF"],this.playTarg.canRegen=!0}sttorZ(t){t.addRegen(this.boof234)}sptorC(){this.faction="U",this.rarity="R",this.name="Spore Torrent",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]),this.text=`Give a creature Poison ${this.boof234}.`,this.playTarg.hint=["PN"]}sptorZ(t){t.addPoison(this.boof234)}sovC(){this.faction="T",this.rarity="L",this.name="Staff of Vaerus",this.text=`Give a friendly ${m.levelGateText(this.level+1,!0)}creature Mobility ${this.level}. That creature battles an additional time this turn.`,this.playTarg.level=w.ddf2(this.level+1),this.playTarg.player="F"}sovZ(t){t.extraBattles+=1,t.addMobility(this.level)}stbrnC(){this.faction="T",this.rarity="R",this.name="Stone Brand";const t=this.boof579;this.text=`Give a creature with Defender ${m.jr9(t,t,!0)} and Negate Defender from it.`,this.playTarg.hint=["BF"],this.playTarg.hasDefender=!0}stbrnZ(t){const e=this.boof579;t.buff(e,e),t.negateDefender=!0}ssperC(){this.faction="T",this.rarity="C",this.name="Stormspear",this.playTarg.hint=["HR"],this.text=`Deal ${this.sspb} to a creature.~You may play an additional ${this.name} this turn.`}ssperZ(t){t.hurtDirect(this.sspb,this.code);const e=x.freeCard(this.code);e.condition.cardCode="STP"}get sspb(){return this.lValN([3,8,12])}tanglC(){this.faction="U",this.rarity="R",this.name="Tangle";let t="";this.level===3?t=" You gain health equal to that creature's attack.":this.playTarg.hint=["KL"],this.text=`Destroy a ${m.levelGateText(this.level+1,!0)}creature with Mobility.${t}`,this.playTarg.level=w.ddf2(this.level+1),this.playTarg.hasMobility=!0}tanglZ(t){$.destroy(t,this.code),this.level===3&&S.healPlayer("F",t.attack)}tpactC(){this.faction="N",this.rarity="C",this.name="Tarsian Pact";const t=this.boof235;this.text=`Give a Nekrium creature ${m.jr9(t,t,!0)} and Regenerate ${t}.`,this.playTarg.hint=["BF"],this.playTarg.faction="N"}tpactZ(t){const e=this.boof235;t.buff(e,e),t.addRegen(e)}tugC(){this.faction="A",this.rarity="R",this.name="Tech Upgrade",this.playTarg.tribe="RB",this.playTarg.hint=["BF"],this.text=`Give a Robot ${m.jr9(this.boof4612,0)} and Armor ${this.boof236}.`}tugZ(t){t.addArmor(this.boof236),t.buff(this.boof4612,0)}totsC(){this.faction="N",this.rarity="T",this.name="Tendrils Of Twilight",this.isFree=!0;const t=-this.boof7911;this.text=`Give an enemy creature ${m.jr9(-1,-1)}.~If that creature is opposing a friendly Duskmaw, give that creature ${m.jr9(t,t)} instead.`,this.playTarg.player="E"}totsZ(t){const e=this.duskBof(t);t.buff(e,e)}duskBof(t){const e=t.opposed;let i=!1;return e&&(i=Mt.extractCardCode(e.code)==="DTD"),i?-this.boof7911:-1}blightC(){this.faction="N",this.rarity="R",this.name="Touch Of Blight",this.text=`Give a creature "When this creature ${m.dbdtac(this.level)}, destroy that creature."`,this.playTarg.hint=["BF"]}blightZ(t){t.changed=!0,t.jr4("DM",this.code)}get tspois(){return this.lValN([5,7,12])}sporeC(){this.faction="U",this.rarity="C",this.name="Toxic Spores",this.text=`Give a creature Poison ${this.tspois}.`,this.playTarg.hint=["PN"]}sporeZ(t){t.addPoison(this.tspois)}tremcC(){this.faction="T",this.rarity="C",this.name="Tremorcharge",this.text=`Give a Tempys creature ${m.jr9(0,this.boof4812)} and Mobility ${this.level}.`,this.playTarg.faction="T",this.playTarg.hint=["BF"]}tremcZ(t){t.buff(0,this.boof4812),t.addMobility(this.level)}uboltC(){this.faction="T",this.rarity="R",this.name="Uranti Bolt",this.text=`Deal ${this.ubzap} damage to a creature.~It gets Defender until the end of the next turn.`}uboltZ(t){t.hurtDirect(this.ubzap,this.code);const e=p.mod("DF",!0,this.code);e.expiry="EN",t.addMod(e)}get ubzap(){return this.lValN([3,10,20])}vensC(){this.faction="U",this.rarity="C",this.name="Venomstrike",this.playTarg.hint=["PN"],this.text=`Give a creature Poison ${this.boof468}.~You may play an additional ${this.name} this turn.`}vensZ(t){t.addPoison(this.boof468);const e=x.freeCard(this.code);e.condition.cardCode="VSK"}vgraC(){this.faction="U",this.rarity="C",this.name="Verdant Grace",this.playTarg.player="F",this.text=`Heal ${this.boof101520} damage from a friendly creature and ${this.boof246} health from each other friendly creature.`}vgraZ(t){t.heal(this.boof101520);const e=this.boof246;f.creatByTarget(p.crFriendNotMeTarg(t.id)).forEach(i=>{i.heal(e)})}vobC(){this.faction="T",this.rarity="R",this.name="Violent Outburst",this.level===3?this.isFree=!0:this.hints=["LV"],this.text=`Give a ${m.levelGateText(this.level+1,!0)}creature Aggressive and, "When this creature ${m.dbdtap()}, it also deals that much damage to itself."`}vobZ(t){t.aggressive=!0,t.changed=!0,t.jr4("DM",this.code)}vembC(){this.faction="N",this.rarity="C",this.name="Vyric's Embrace",this.playTarg.hint=["DB"];const t=this.boof468,e=-t;this.text=`Give a creature ${m.jr9(e,e)}.~You gain ${t} health.`}vembZ(t){const e=this.boof468,i=-e;t.buff(i,i),S.healPlayer(S.getActive(),e)}warC(){this.faction="A",this.rarity="H",this.name="Warmonger Mod";let t=this.level,e=3;this.level===1&&(this.playTarg.level="LN",e=2,t=2),this.playTarg.hint=["BF"],this.text=`Give a ${m.levelGateText(e,!0)}creature ${t}x attack.`}warZ(t){const e=this.level===3?2:1;t.buff(t.attack*e,0)}xwillC(){this.faction="N",this.rarity="H",this.name="Xrath's Will";const t=this.boof3612;this.text=`Destroy an enemy creature with ${t} or less attack.~You may play an additional Zombie this turn.`,this.playTarg.player="E",this.playTarg.maxAttack=t}xwillZ(t){$.destroy(t,this.code);const e=x.freeCard(this.code);e.condition.tribe="ZB"}}class Se extends R{lookup(t){return{["ATP"]:{c:()=>this.phagC(),t:()=>this.phagT(),f:(i,s)=>this.phagF(i,s)},["SSH"]:{c:()=>this.sshmC(),t:()=>this.sshmT(),f:(i,s)=>this.sshmF(i,s)},["TPG"]:{c:()=>this.pillC(),t:()=>this.pillT(),f:(i,s)=>this.pillF(i,s)},["TMG"]:{c:()=>this.grootC(),t:()=>this.grootT(),f:(i,s)=>this.grootF(i,s)}}[t]}forgTargets(t){return this.lookup(t).t()}forgAction(t,e,i){this.lookup(t).f(e,i)}optional=!0;ftext="";constructor(t){super(t),this.lookup(this.cardCode()).c(),this.text="Forge: "+this.ftext,this.ftext=""}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("FR",this.code);return s.interactive=!0,i}handleAction(t){const e=f.jr5(t.param);this.forgAction(this.cardCode(),t.position,e),gt.popMode(),C.actionDone(!0)}jr8(t){const e=this.forgTargets(this.cardCode());if(e.length>0){const i=e.map(s=>{const h=p.deckSelectAction("CARD",s.cardCode,s.sourceIdx);return h.param=t.creatId,h.host=this.code,h});if(this.optional){const s=C.noneEndTrigger();s.param="PM",i.push(s)}Bt.showCustomDeck(e,i)}else D.triggerDone()}phagC(){this.faction="U",this.rarity="H",this.name="Aetherphage",this.jr1=this.lValN([7,10,16]),this.jr2=this.boof3612,this.tribe.push("IN"),this.ftext=`Look at the ${m.levelGateText(this.level,!0)}spells in the enemy player's hand and choose one. The enemy player discards the chosen spell.`}phagT(){const t=S.toPlayer(!S.getActiveB()),e=p.target("TH");return e.player=S.toTarget(t),e.level=w.ddf2(this.level),e.card="S",Bt.generateContent(t.hand,!1,e)}phagF(t,e){const i=S.toPlayer(!e.owner),s=i.hand[t];i.hand.splice(t,1),i.discard.push(s)}sshmC(){this.faction="U",this.rarity="H",this.name="Soothsayer Hermit",this.jr1=this.boof61016,this.jr2=this.jr1-1,this.tribe.push("LP"),this.ftext=`You may put a ${m.levelGateText(this.level)} creature from your discard pile into your hand.`}sshmT(){const t=S.getActive(),e=p.target("TD");return e.player=S.toTarget(t),e.card="C",e.level=w.ddf2(this.level),Bt.generateContent(t.discard,!1,e)}sshmF(t,e){const i=S.toPlayer(e.owner),s=i.discard.splice(t,1);i.hand.push(s[0])}pillC(){this.faction="N",this.rarity="H",this.name="Tomb Pillager",this.jr1=this.boof5915,this.jr2=this.jr1+1,this.tribe.push("ZB"),this.consistent=this.level>1,this.ftext="You may banish a Nekrium card from your discard pile."}pillT(){const t=S.getActive(),e=p.target("TD");return e.player=S.toTarget(t),e.faction="N",Bt.generateContent(t.discard,!1,e)}pillF(t,e){S.toPlayer(e.owner).discard.splice(t,1)}grootC(){this.faction="U",this.rarity="R",this.name="Toorgmai Guardian",this.jr1=this.boof4711,this.jr2=this.jr1,this.tribe.push("PL");const t=this.boof358;this.ftext=`You may banish a Plant from your discard pile. If you do, ${this.name} gets ${m.jr9(t,t)}.`}grootT(){const t=S.getActive(),e=p.target("TD");return e.player=S.toTarget(t),e.tribe="PL",Bt.generateContent(t.discard,!1,e)}grootF(t,e){S.toPlayer(e.owner).discard.splice(t,1);const s=this.boof358;e.buff(s,s)}}class Li extends ht{jr3(t,e){const i=super.jr3(t,e);return i.jr4("FR",this.code),i}jr8(t){f.qEnemyCreats().forEach(e=>{e.addPoison(6)}),D.triggerDone()}}class $i extends R{constructor(t){super(t),this.faction="U",this.rarity="T",this.name="Dino Knight",this.jr1=this.lValN([8,12,18]),this.jr2=this.jr1,this.tribe.push("DN"),this.initAggro=!0,this.initBT=!0,this.maxLevel=this.level,this.minLevel=this.level;const e=this.boof357;this.text=`When this ${m.dbdtap()}, heal ${e} damage from each other friendly creature.~Vengeance: Put a level ${this.level} Bron, Wild Tamer into this lane.`}image(t){return this.fixedImage(t)}jr3(t,e){const i=super.jr3(t,e);return i.jr4("VN",this.code),i.jr4("DM",this.code),i}ddf8(t){if(t.trigger.type==="DM"){const e=t.event;return e.battle&&!e.isCreatTarg&&e.isCreatSrc&&e.srcId===t.creatId}return!1}jr8(t){if(t.trigger.type==="VN"){const e=f.jr5(t.creatId);f.birthCreature("BWT"+this.level,"P",e.owner,e.lane),D.triggerDone()}else if(t.trigger.type==="DM"){const e=this.boof357,i=p.crNotMeTarg(t.creatId);i.player=S.toTarget(t.ownerPlayerA),f.creatByTarget(i).forEach(h=>h.heal(e)),D.triggerDone()}}}class Oi extends mt{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Discordant Strike";const e=-this.boof4610;this.text=`Give an enemy creature ${m.jr9(e,0)}.~Allied Nekrium: Give an enemy creature ${m.jr9(0,e)}.`}playTargets(){const t=super.playTargets(),e=p.crEnemyActTarg("CARD",this.code,"P1");return t.push(e),t}handleAction(t){const e=T.deTil(t.param),i=-this.boof4610,s=f.ddf6(t);e[0]==="P1"?(this.logSpell(),s.buff(i,0),x.allied("N")?C.ddf5(this.getCardActions(t)):x.spellCast()):(s.buff(0,i),x.spellCast())}getCardActions(t,e){return w.toActions(p.crEnemyActTarg("CARD",this.code,"P2"))}}class Wi extends mt{constructor(t){super(t),this.faction="U",this.rarity="R",this.name="Dissolve",this.isFree=this.level===3,this.level<3&&(this.hints=["LV"]),this.text=`Double the Poison on ${this.level===1?"an":"each"} enemy creature.`}playTargets(){const t=super.playTargets(),e=this.poisTarg();return this.level===1?t.push(e):f.creatByTarget(e).length>0&&t.push(w.boardTarget("CARD",this.code)),t}handleAction(t){if(this.logSpell(),this.level===1){const e=f.ddf6(t);e.addPoison(e.poison)}else f.creatByTarget(this.poisTarg()).forEach(i=>{i.addPoison(i.poison)});x.spellCast()}poisTarg(){const t=p.crEnemyActTarg("CARD",this.code,"");return t.hasPoison=!0,t}}class Ui extends R{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Dysian Broodqueen",this.jr1=this.boof248,this.jr2=this.boof61117,this.tribe.push("NG");const e=`Destroy an enemy ${m.levelGateText(this.level,!0)}creature.`;this.text=`Activate, destroy another friendly creature: ${e}~Allied Uterra: Put a ${this.level}/${this.level} Broodfang into an available lane.`}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("FR",this.code);return s.interactive=!0,i}canActivate(t){return this.enemies(t.id).length>0&&this.friends(t.id).length>0}startActivation(t){const e=this.friends(t.id);e.push(C.cancelAction()),C.ddf5(e)}handleAction(t){const e=T.deTil(t.param);if(e[1]==="P1"){const i=f.ddf6(t),s=this.enemies(e[0],i.id);s.push(C.cancelAction()),C.ddf5(s)}else if(e[1]==="P2"){const i=f.jr5(e[0]),s=M.tick(),h=f.jr5(e[2]);$.destroy(h,this.code,s);const d=f.ddf6(t);$.destroy(d,this.code,s),i.endActivation()}else f.birthCreature(`${"BRF"}${this.level}`,"P",t.playerA,t.lane),C.actionDone(!0)}jr8(t){if(x.allied("U")){const e=p.emptyPlayerActTarg("F","CARD",this.code,t.trigger.creatId),i=w.toActions(e);i.length>0?C.ddf5(i):D.triggerDone()}else D.triggerDone()}friends(t){const e=p.crFriendNotMeActTarg("CARD",t,this.code,T.enTil(t,"P1"));return w.toActions(e)}enemies(t,e=""){const i=p.crEnemyActTarg("CARD",this.code,T.enTil(t,"P2",e));return i.level=w.ddf2(this.level),w.toActions(i)}}class Vi extends mt{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Dysian Siphon";const e=this.boof357;this.text=`Give an enemy creature ${m.jr9(-e,-e)}.~Allied Uterra: Give a friendly creature ${m.jr9(e,e)}. `}playTargets(){const t=super.playTargets(),e=p.crEnemyActTarg("CARD",this.code,"P1");return t.push(e),t}handleAction(t){const e=T.deTil(t.param),i=this.boof357,s=f.ddf6(t);if(e[0]==="P1"){const h=p.crFriendActTarg("CARD",this.code,T.enTil("P2",s.id)),d=w.toActions(h);x.allied("U")&&d.length>0?(d.push(C.cancelAction()),C.ddf5(d)):(this.logSpell(),s.buff(-i,-i),x.spellCast())}else this.logSpell(),f.jr5(e[1]).buff(-i,-i),s.buff(i,i),x.spellCast()}}class zi extends R{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Dysian Sludge",this.jr1=this.boof51015,this.jr2=this.jr1,this.tribe.push("OZ");const e=-this.boof135;this.text=`Forge: If you have health over 120, you may put a copy of ${this.name} into another lane.~When this enters play, if you have a Nekrium card in hand, the opposing creathure gets ${m.jr9(e,e)}.`}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("FR",this.code);return s.interactive=!0,s.customCode=i.id,i.jr4("EF",this.code),i}ddf8(t){return t.trigger.type==="EF"&&t.event.creatId===t.creatId}jr8(t){const e=O.toEnterField(t.event);if(e.forged&&e.creature.id===t.trigger.customCode)if(S.getActive().health>120){const i=p.actionTarget("TF","CARD",this.code,"");i.player="F",i.hint=["FL"],i.lanes=f.laneIdx.filter(h=>h!==e.creature.lane);const s=w.toActions(i);s.push(C.noneEndTrigger()),C.ddf5(s)}else D.triggerDone();else{const i=e.creature.opposed;if(i&&x.allied("N",e.creature.owner)){const s=-this.boof135;i.buff(s,s)}D.triggerDone()}}handleAction(t){f.birthCreature(this.code,"R",t.playerA,t.lane),C.actionDone(!0)}}class Zi extends R{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Echowisp",this.jr1=this.lValN([7,8,10]),this.jr2=this.boof135,this.tribe.push("ST"),this.level===3?this.text="Forge: Put a copy of Echowisp into each available lane.":this.text="Forge: You may put a copy of Echowisp into an adjacent lane."}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("FR",this.code);return s.interactive=this.level<3,i}jr8(t){if(this.level<3){const e=f.jr5(t.trigger.creatId),i=p.actionTarget("TF","CARD",this.code,"");i.player="F",i.lanes=e.adjacent,i.hint=["FL"];const s=w.toActions(i);s.push(C.noneEndTrigger()),C.ddf5(s)}else{const e=p.emptyPlayerActTarg("F","CARD",this.code,t.trigger.creatId);let i=w.toActions(e);if(i.length>0){const s=M.tick();i.forEach(h=>f.birthCreature(this.code,"P",h.playerA,h.lane,s))}D.triggerDone()}}handleAction(t){f.birthCreature(this.code,"P",t.playerA,t.lane),C.actionDone(!0)}}class Yi extends R{lookup(t){return{["TVG"]:{c:()=>this.tvgC(),m:i=>this.tvgM(i)}}[t]}createMods(t,e){return this.lookup(t).m(e)}armThreshold=0;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,e){const i=super.jr3(t,e),s=i.addEffect("AR",this.code);return s.area="A",i}enforceEffect(t,e){this.armThreshold<=e.armor?this.createMods(this.cardCode(),e).forEach(i=>{e.addModSafe(i)}):e.removeModSafe(e.id)}tvgC(){this.faction="A",this.rarity="R",this.name="Tower Vanguard",this.jr1=this.lValN([3,6,11]),this.jr2=this.lValN([7,13,21]),this.tribe.push("RB"),this.armThreshold=1;const t=this.boof247;this.text=`While ${this.name} has Armor, it gets ${m.jr9(t,0)}.`}tvgM(t){return[p.mod("AT",this.boof247,t.id)]}}class ge extends R{lookup(t){return{["CIN"]:{c:()=>this.cyinC(),m:i=>this.cyinM(i)},["HWM"]:{c:()=>this.hlwmC(),m:i=>this.hlwmM(i)},["LSP"]:{c:()=>this.lspC(),m:i=>this.lspM(i)},["SSI"]:{c:()=>this.ssinC(),m:i=>this.ssinM(i)},["WTA"]:{c:()=>this.weguC(),m:i=>this.weguM(i)}}[t]}createMods(t,e){return this.lookup(t).m(e)}attThreshold=0;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,e){const i=super.jr3(t,e);return i.addEffect("AT",this.code),i}enforceEffect(t,e){this.attThreshold<=e.attack?this.createMods(this.cardCode(),e).forEach(i=>{e.addModSafe(i)}):e.removeModSafe(e.id)}cyinC(){this.faction="A",this.rarity="R",this.name="Cypien Infiltrator",this.jr1=this.boof61117,this.jr2=this.jr1-1,this.tribe.push("HM"),this.attThreshold=this.lValN([7,14,21]),this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets Breakthrough.`}cyinM(t){return[p.mod("BT",!0,t.id)]}hlwmC(){this.faction="A",this.rarity="L",this.name="Hinterland Watchman",this.jr1=this.lValN([4,7,15]),this.jr2=this.lValN([7,10,20]),this.tribe.push("MC"),this.attThreshold=this.boof51020;const t=this.lValS(["Mobility 3","Armor 5 and Mobility 3","Armor 5, Breakthrough, Aggressive, Mobility 3, and Regenerate 5"]);this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets ${t}.`}hlwmM(t){const e=[p.mod("MB",3,t.id)];return this.level>1&&e.push(p.mod("AR",5,t.id)),this.level===3&&(e.push(p.mod("BT",!0,t.id)),e.push(p.mod("AG",!0,t.id)),e.push(p.mod("RG",5,t.id))),e}lspC(){this.faction="A",this.rarity="C",this.name="Lightshield Patrol",this.jr1=this.lValN([4,7,15]),this.jr2=this.boof51020,this.tribe.push("HM"),this.attThreshold=this.jr2,this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets Armor ${this.boof234}.`}lspM(t){return[p.mod("AR",this.boof234,t.id)]}ssinC(){this.faction="A",this.rarity="R",this.name="Spiritsteel Infiltrator",this.jr1=this.boof4815,this.jr2=this.jr1+3,this.tribe.push("EN"),this.attThreshold=this.boof51020,this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets Mobility ${this.level} and Armor ${this.boof246}.`}ssinM(t){return[p.mod("MB",this.level,t.id),p.mod("AR",this.boof246,t.id)]}weguC(){this.faction="U",this.rarity="L",this.name="Wegu, the Ancient",this.jr1=0,this.jr2=1,this.tribe.push("PL"),this.initDefend=!0,this.attThreshold=this.lValN([10,25,100]);const t=this.boof124,e=this.level===3?"it gets Breakthrough and ":"";this.text=`When you gain health, Wegu gets ${m.jr9(t,t)} for each health you gained.~While Wegu has ${this.attThreshold} or more attack, ${e}Negate Defender from it.`}weguM(t){const e=[p.mod("ND",!0,t.id)];return this.level===3&&e.push(p.mod("BT",!0,t.id)),e}}class ti extends R{friendNotMe(t){const e=p.crNotMeTarg(t.id);return e.player=S.toTarget(t.owner),e}friendNone(t){const e=p.crTarg();return e.player=S.toTarget(t.owner),e.lanes=[],e}jr3(t,e){const i=super.jr3(t,e),s=i.addEffect("PS",this.code);return s.area="C",i}enforcementActive(t){return t.status==="A"}applyEffect(t,e,i){const s=this.friendNotMe(t),h=f.creatByTarget(s),d=f.creatByTarget(i);h.forEach(g=>{d.includes(g)?g.addModSafe(e):g.removeModSafe(t.id)})}}class we extends ti{lookup(t){return{["BWW"]:{c:()=>this.bwwC(),m:i=>this.bwwM(i),t:i=>this.bwwT(i)},["HTR"]:{c:()=>this.hrtC(),m:i=>this.hrtM(i),t:i=>this.hrtT(i)},["KKK"]:{c:()=>this.kkkC(),m:i=>this.kkkM(i),t:i=>this.kkkT(i)},["XDV"]:{c:()=>this.xdvC(),m:i=>this.xdvM(i),t:i=>this.xdvT(i)}}[t]}createMod(t,e){return this.lookup(t).m(e)}effTargs(t,e){return this.lookup(t).t(e)}constructor(t){super(t),this.lookup(this.cardCode()).c()}enforceEffect(t,e){const i=this.cardCode(),s=this.createMod(i,e),h=this.enforcementActive(e)?this.effTargs(i,e):this.friendNone(e);this.applyEffect(e,s,h)}bwwC(){this.faction="T",this.rarity="H",this.name="Borean Windweaver",this.jr1=this.boof6914,this.jr2=this.jr1-1,this.initMobile=this.level,this.tribe.push("WN","AS"),this.text=`Each other friendly creature gets Mobility ${this.level}.`}bwwM(t){return p.mod("MB",this.level,t.id)}bwwT(t){return this.friendNotMe(t)}hrtC(){this.faction="U",this.rarity="L",this.name="Heart Tree",this.jr1=0,this.jr2=this.lValN([10,15,30]),this.initRegen=this.boof246,this.initDefend=!0,this.tribe.push("PL"),this.text=`Each other friendly creature gets Regenerate ${this.initRegen}.`}hrtM(t){return p.mod("RG",this.initRegen,t.id)}hrtT(t){return this.friendNotMe(t)}kkkC(){if(this.faction="T",this.rarity="L",this.name="Korok, Khan of Kadras",this.jr1=this.lValN([4,7,12,18]),this.jr2=this.lValN([7,12,18,26]),this.initAggro=!0,this.tribe.push("FB"),this.maxLevel=4,this.level>1){const t=this.lValS(["","friendly level 1","friendly level 2 or lower","other friendly"]);this.text=`Each ${t} creature gets Aggressive.`}}kkkM(t){return p.mod("AG",!0,t.id)}kkkT(t){const e=this.friendNotMe(t);return this.level===1?e.lanes=[]:e.level=w.ddf2(this.level-1),e}xdvC(){this.faction="N",this.rarity="H",this.name="Xrath, Dreadnight Of Varna",this.jr1=this.boof5914,this.jr2=this.jr1+1,this.initRegen=this.boof248,this.tribe.push("ZB"),this.text=`Each other friendly Zombie gets Regenerate ${this.initRegen}`}xdvM(t){return p.mod("RG",this.initRegen,t.id)}xdvT(t){const e=this.friendNotMe(t);return e.tribe="ZB",e}}class Ki extends R{lookup(t){return{["AHL"]:{c:()=>this.ahlC(),m:i=>this.ahlM(i)}}[t]}createMods(t,e){return this.lookup(t).m(e)}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,e){const i=super.jr3(t,e),s=i.addEffect("PS",this.code);return s.area="C",i}enforceEffect(t,e){const i=p.crNotMeTarg(e.id);i.player=S.toTarget(e.owner),f.creatByTarget(i).length===0?this.createMods(this.cardCode(),e).forEach(h=>{e.addModSafe(h)}):e.removeModSafe(e.id)}ahlC(){this.faction="A",this.rarity="H",this.name="Alloyin Highlander",this.jr1=this.lValN([5,7,10]),this.jr2=this.boof6914,this.tribe.push("HM"),this.text=`While ${this.name} is your only friendly creature, it gets ${m.jr9(this.boof4812,0)} and Armor ${this.boof248}.`}ahlM(t){return[p.mod("AT",this.boof4812,t.id),p.mod("AR",this.boof248,t.id)]}}class ei extends R{lookup(t){return{["NXP"]:{c:()=>this.nxpC(),m:i=>this.nxpM(i)},["SKG"]:{c:()=>this.skgC(),m:i=>this.skgM(i)}}[t]}createMods(t,e){return this.lookup(t).m(e)}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,e){const i=super.jr3(t,e),s=i.addEffect("PS",this.code);return s.area="C",i}enforceEffect(t,e){e.lane===3?this.createMods(this.cardCode(),e).forEach(i=>{e.addModSafe(i)}):e.removeModSafe(e.id)}nxpC(){this.faction="A",this.rarity="C",this.name="Nexus Pilot",this.jr1=this.boof358,this.jr2=this.boof4710,this.tribe.push("HM"),this.text=`While ${this.name} is in the center lane, it gets ${m.jr9(this.jr1,this.jr2)}.`}nxpM(t){return[p.mod("AT",this.jr1,t.id),p.mod("HL",this.jr2,t.id),p.mod("MH",this.jr2,t.id)]}skgC(){this.faction="A",this.rarity="C",this.name="Skyknight Glider",this.jr1=this.boof5916,this.jr2=this.jr1+1,this.tribe.push("HM"),this.text=`While ${this.name} is in the center lane, it gets Mobility 2.`}skgM(t){return[p.mod("MB",2,t.id)]}}class Oe extends R{lookup(t){return{["CCT"]:{c:()=>this.cctC(),m:i=>this.cctM(i)},["GHB"]:{c:()=>this.ghbC(),m:i=>this.ghbM(i)},["PYG"]:{c:()=>this.pygC(),m:i=>this.pygM(i)}}[t]}createMods(t,e){return this.lookup(t).m(e)}likesOpposed=!1;constructor(t){super(t),this.lookup(this.cardCode()).c(),this.hints=[this.likesOpposed?"OP":"OL"]}jr3(t,e){const i=super.jr3(t,e),s=i.addEffect("PS",this.code);return s.area="A",i}enforceEffect(t,e){!!e.opposed===this.likesOpposed?this.createMods(this.cardCode(),e).forEach(i=>{e.addModSafe(i)}):e.removeModSafe(e.id)}cctC(){this.faction="T",this.rarity="R",this.name="Cloudcleaver Titan",this.jr1=this.boof4812,this.jr2=this.lValN([7,10,16]),this.tribe.push("WN","GT"),this.initMobile=this.level;const t=this.boof246;this.text=`While ${this.name} is unopposed, it gets ${m.jr9(t,0)}.`}cctM(t){return[p.mod("AT",this.boof246,t.id)]}ghbC(){this.faction="U",this.rarity="R",this.name="Gemhide Basher",this.jr1=this.lValN([5,10,16]),this.jr2=this.lValN([3,7,10]),this.tribe.push("DN"),this.likesOpposed=!0,this.text=`While ${this.name} is opposed, it gets Aggressive.`}ghbM(t){return[p.mod("AG",!0,t.id)]}pygC(){this.faction="T",this.rarity="H",this.name="Pyre Giant",this.jr1=this.boof468,this.jr2=this.boof234,this.tribe.push("FR","GT"),this.initAggro=!0,this.text=`While ${this.name} is unopposed, it gets ${m.jr9(this.jr1,0)}.`}pygM(t){return[p.mod("AT",this.jr1,t.id)]}}class me extends ti{lookup(t){return{["ALG"]:{c:()=>this.algnC(),m:i=>this.algnM(i)},["ALS"]:{c:()=>this.alstC(),m:i=>this.alstM(i)},["BTN"]:{c:()=>this.btcC(),m:i=>this.btcM(i)},["NXA"]:{c:()=>this.aeroC(),m:i=>this.aeroM(i)},["NXT"]:{c:()=>this.ntcC(),m:i=>this.ntcM(i)}}[t]}createMod(t,e){return this.lookup(t).m(e)}constructor(t){super(t),this.lookup(this.cardCode()).c()}nexus=!1;enforcementActive(t){return super.enforcementActive(t)?this.nexus?t.lane===3:!0:!1}enforceEffect(t,e){const i=this.cardCode(),s=this.createMod(i,e);let h;this.enforcementActive(e)?(h=this.friendNotMe(e),this.nexus?h.lanes=[1,2,4,5]:h.lanes=e.adjacent):h=this.friendNone(e),this.applyEffect(e,s,h)}algnC(){this.faction="A",this.rarity="R",this.name="Alloyin General",this.jr1=this.boof246,this.jr2=this.boof81318,this.tribe.push("HM"),this.text=`Adjacent creatures gets ${m.jr9(this.jr1,0)}.`}algnM(t){return p.mod("AT",this.jr1,t.id)}alstC(){this.faction="A",this.rarity="H",this.name="Alloyin Strategist",this.jr1=this.boof4814,this.jr2=this.jr1+1,this.initMobile=this.level,this.tribe.push("HM");const t=this.boof246;this.text=`Adjacent creatures gets ${m.jr9(t,0)}.`}alstM(t){return p.mod("AT",this.boof246,t.id)}btcC(){this.faction="A",this.rarity="H",this.name="Battle Techtician",this.jr1=this.boof3714,this.jr2=this.boof71117,this.tribe.push("HM"),this.nexus=!0;const t=this.boof248;this.text=`While ${this.name} is in the center lane, each other friendly creature gets ${m.jr9(t,0)}.`}btcM(t){return p.mod("AT",this.boof248,t.id)}aeroC(){this.faction="A",this.rarity="L",this.name="Nexus Aeronaut",this.jr1=this.boof4814,this.jr2=this.jr1+2,this.tribe.push("HM"),this.initMobile=1;const t=this.boof236;this.nexus=!0,this.text=`While ${this.name} is in the center lane, each other friendly creature gets ${m.jr9(t,0)}. Otherwise this gets Armor ${t}.`}aeroM(t){return p.mod("AT",this.boof236,t.id)}ntcC(){this.faction="A",this.rarity="H",this.name="Nexus Techtician",this.jr2=this.boof6916,this.jr1=this.jr2-3,this.tribe.push("HM"),this.nexus=!0,this.boof235,this.text=`While ${this.name} is in the center lane, each other friendly creature gets Armor ${this.boof235}.`}ntcM(t){return p.mod("AR",this.boof235,t.id)}}class pe extends R{cardConstruct(t){({["BWD"]:()=>this.bwdC(),["BTS"]:()=>this.btsC(),["ESC"]:()=>this.escarC(),["EHN"]:()=>this.ethhC(),["RWC"]:()=>this.roamC()})[t]()}targAction(t){f.birthCreature(this.spawnCode,"P",t.playerA,t.lane)}adjacent=!1;optional=!1;needsEmpty=!1;spawnCode="";ftext="";allied="X";constructor(t){super(t),this.cardConstruct(this.cardCode());const e=m.forglied(this.allied);this.text=e+": "+this.ftext}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("FR",this.code);return s.interactive=!0,i}jr8(t){if(this.allied==="X"||x.allied(this.allied)){const e=f.jr5(t.creatId),i=p.emptyPlayerActTarg("F","CARD",this.code,t.creatId);this.needsEmpty||(i.field="A",i.hint=["FL"],i.lanes=f.laneIdx.filter(h=>h!==e.lane)),this.adjacent&&(i.lanes=e.adjacent);const s=w.toActions(i);s.length>0?(this.optional&&s.push(C.noneEndTrigger()),C.ddf5(s)):D.triggerDone()}else D.triggerDone()}handleAction(t){this.targAction(t),C.actionDone(!0)}bwdC(){this.faction="U",this.rarity="C",this.name="Branchweaver Druid",this.jr1=1,this.jr2=1,this.tribe.push("HM"),this.hints=["RT"],this.spawnCode=`${"TFD"}${this.level}`,this.optional=!0;const t=this.boof5714;this.ftext=`You may put a ${t}/${t} ${Z.minionName(3)} into another lane.`}btsC(){this.faction="U",this.rarity="C",this.name="Brighttusk Sower",this.jr1=this.lValN([6,8,10]),this.jr2=this.jr1,this.tribe.push("TK"),this.spawnCode=Z.minionCode(this.level),this.optional=!0,this.adjacent=!0;const t=Z.minionBuff(this.level);this.ftext=`You may put a ${t}/${t} ${Z.minionName(this.level)} into an adjacent lane.`}escarC(){this.faction="A",this.rarity="H",this.name="Esperian Scarab",this.jr1=this.lValN([3,4,7]),this.jr2=this.boof5711,this.initArmor=this.boof135,this.tribe.push("RB"),this.allied="U",this.spawnCode=this.code,this.optional=!0,this.ftext=`You may but a copy of ${this.name} into another lane.`}ethhC(){this.faction="U",this.rarity="C",this.name="Ether Hounds",this.jr1=this.boof369,this.jr2=this.jr1,this.tribe.push("ST"),this.needsEmpty=!0,this.spawnCode=this.code,this.ftext="Put a copy of this into an available lane."}roamC(){this.faction="U",this.rarity="C",this.name="Roaming Warclaw",this.jr1=this.boof61016,this.jr2=this.jr1-3,this.tribe.push("DN"),this.spawnCode=`${"RPT"}${this.level}`,this.optional=!0,this.ftext="You may put a 1/1 Raptor into another lane."}}class Xi extends R{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Epoch Hawk",this.jr1=this.boof469,this.jr2=this.boof71117,this.tribe.push("MC");const e=this.boof4710;this.addSp("N",e),this.text=`While you have 6 or more cards in hand, this gets "Activate: Put a ${e}/${e} Epoch Soldier into an available lane."`}canActivate(t){return S.toPlayer(t.owner).hand.length>5&&f.emptyLanes(t.owner).length>0}startActivation(t){const e=p.emptyPlayerActTarg(t.owner,"CARD",this.code,t.id),i=w.toActions(e);i.push(C.cancelAction()),C.ddf5(i)}handleAction(t){const e=f.jr5(t.param);f.birthCreature(this.soldier,"P",t.playerA,t.lane),e.endActivation()}ddf8(t){return t.trigger.type==="TE"}jr8(t){S.drawCard(t.ownerPlayerA,1);const e=S.toPlayer(t.ownerPlayerA),i=e.triggers.findIndex(s=>s.customCode===t.trigger.customCode);i>-1&&e.triggers.splice(i,1),D.triggerDone()}get soldier(){return "EPS"+this.level}}class qi extends R{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Esperian Sage",this.jr1=this.boof3510,this.jr2=this.boof124,this.tribe.push("HM"),this.text=`When ${this.name} enters play, discard and level up a card.~Allied Uterra: You may put a copy of this into another lane.`}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("FR",this.code);s.interactive=!0;const h=i.jr4("EF",this.code);return h.interactive=!0,i}handleAction(t){if(t.zone==="H")x.levelAndDiscard(t);else{const e=t;f.birthCreature(this.code,"R",e.playerA,e.lane)}C.actionDone(!0)}ddf8(t){return t.event.code==="ENT"?t.event.creatId===t.creatId:!1}jr8(t){if(t.trigger.type==="FR")if(x.allied("U")){const e=f.jr5(t.creatId),i=p.actionTarget("TF","CARD",this.code,t.creatId);i.player="F",i.lanes=f.laneIdx.filter(h=>h!==e.lane),i.hint=["FL"];const s=w.toActions(i);s.push(C.noneEndTrigger()),C.ddf5(s)}else D.triggerDone();else{const e=p.lvlHandActTarg(this.code,t.creatId),i=w.toActions(e);i.length>0?C.ddf5(i):D.triggerDone()}}}class ji extends R{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Esperian Steelplate",this.jr1=this.boof369,this.jr2=this.boof6916,this.tribe.push("IN");const e=this.boof358;this.addSp("H",e),this.text=`Activate: Heal ${e} damage from each other friendly creature.~Allied Alloyin: Armor ${this.boof247}.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("FR",this.code),i}canActivate(t){const e=p.crFriendNotMeTarg(t.id);return f.creatByTarget(e).length>0}startActivation(t){const e=w.boardTarget("CARD",this.code);e.param=t.id,C.ddf5(w.toActions([e,w.buttonTarget("CANC")]))}handleAction(t){const e=f.jr5(t.param),i=this.boof358,s=p.crFriendNotMeTarg(e.id);f.creatByTarget(s).forEach(h=>{h.heal(i)}),e.endActivation()}jr8(t){x.allied("A")&&f.jr5(t.creatId).addArmor(this.boof247),D.triggerDone()}}class Ji extends R{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Everflame Phoenix",this.jr1=this.lValN([7,0,22]),this.jr2=this.lValN([6,1,15]),this.tribe.push("PX"),this.initMobile=this.lValN([1,0,2]),this.level===2?(this.initDefend=!0,this.text=`When you gain a rank, replace ${this.name} with a level 3 ${this.name}.`,this.hints=["RH","LV"],this.bonus={exist:this.ddp9(1,37,22,0)}):this.level===3&&(this.text=`Vengeance: Put a level 2 ${this.name} into this lane.`,this.bonus={exist:this.ddp9(1,1,0,0)})}jr3(t,e){const i=super.jr3(t,e);return this.level===2?i.jr4("RU",this.code):this.level===3&&i.jr4("VN",this.code),i}ddf8(t){return t.trigger.type==="RU"?t.event.playerA===t.ownerPlayerA:super.ddf8(t)}jr8(t){if(t.trigger.type==="RU"){const e=f.jr5(t.creatId);f.birthCreature(`${"EFP"}3`,"R",e.owner,e.lane)}else if(t.trigger.type==="VN"){const i=O.toCreature(t.event).creature;f.birthCreature(`${"EFP"}2`,"P",i.owner,i.lane)}D.triggerDone()}}class Qi extends R{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Frostmane Dragon",this.jr1=this.lValN([6,9,13]),this.jr2=this.jr1+1,this.tribe.push("IC","DG"),this.initMobile=2,this.text=`At the start of your turn, if ${this.name} was Forged last turn, you may put a Level ${this.level} Frostmane egg into an available lane.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("FR",this.code),i}handleAction(t){f.birthCreature(`${"FME"}${this.level}`,"P",t.playerA,t.lane),C.actionDone(!0)}ddf8(t){return t.trigger.type==="TS"?t.event.playerA===t.ownerPlayerA:!1}jr8(t){const e=f.jr5(t.creatId);if(t.event.code==="ENT"){const i=e.jr4("TS",this.code);i.interactive=!0,i.changes=!0,i.customCode=e.id,D.triggerDone()}else if(t.event.code==="TRS"){const i=t.trigger.customCode,s=e.triggers.find(g=>g.customCode===i);s&&e.removeTrigger(s);const h=p.emptyPlayerActTarg("F","CARD",this.code,""),d=w.toActions(h);d.length===0?D.triggerDone():(d.push(C.noneEndTrigger()),C.ddf5(d))}}}class _i extends mt{constructor(t){super(t),this.faction="T",this.rarity="C",this.name="Frostshatter Strike";const e=this.boof4711;this.text=`Deal ${e} damage to an enemy creature.~Give a friendly creature ${m.jr9(e,0)} this turn.`}playTargets(){const t=super.playTargets();return this.friends().length>0&&t.push(p.crEnemyActTarg("CARD",this.code,"P1")),t}handleAction(t){const e=T.deTil(t.param);if(e[0]==="P1")C.ddf5(this.getCardActions(t));else{this.logSpell();const i=f.ddf6(t),s=f.jr5(e[1]),h=this.boof4711;s.hurtDirect(h,this.code);const d=p.mod("AT",h,this.code);d.expiry="ET",i.addMod(d),x.spellCast()}}friends(t=""){const e=p.crFriendActTarg("CARD",this.code,T.enTil("P2",t));return w.toActions(e)}getCardActions(t,e){const i=f.ddf6(t),s=this.friends(i.id);return s.push(C.cancelAction()),s}}class tr extends mt{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Gauntlets of Sulgrim";const e=this.boof2510;this.text=`Give a friendly creature Armor ${e}, then deal damage equal to its Armor to an enemy creature.`}playTargets(){const t=super.playTargets();if(this.baddies().length>0){const e=p.crFriendActTarg("CARD",this.code,"P1");e.canArmor=!0,t.push(e)}return t}handleAction(t){const e=T.deTil(t.param),i=f.ddf6(t);if(e[0]==="P1"){const s=C.cancelAction(),h=this.baddies(i.id);h.push(s),C.ddf5(h)}else{this.logSpell();const s=f.jr5(e[1]),h=this.boof2510;s.addArmor(h),i.hurtDirect(s.armor,this.code),x.spellCast()}}baddies(t=""){return w.toActions(p.crEnemyActTarg("CARD",this.code,T.enTil("P2",t)))}}class er extends R{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Gemhide Ravager",this.jr1=this.boof5915,this.jr2=this.jr1+1,this.tribe.push("DN"),this.bonus={exist:this.ddp9(0,0,0,this.jr1)},this.text=`When ${this.name} ${m.dbdtap()}, you gain that much health.~Allied Tempys: Mobility ${this.level}.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("FR",this.code),i.jr4("DM",this.code),i}ddf8(t){if(t.trigger.type==="DM"){const e=t.event;return e.battle&&!e.isCreatTarg&&e.isCreatSrc&&e.srcId===t.creatId}return!1}jr8(t){if(t.trigger.type==="FR")x.allied("T")&&f.jr5(t.creatId).addMobility(this.level),D.triggerDone();else if(t.trigger.type==="DM"){const e=t.event;S.healPlayer(t.ownerPlayerA,e.dmg),D.triggerDone()}}}class ir extends R{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Glaceus, Tundra Tyrant",this.jr1=this.boof5916,this.jr2=this.jr1+2,this.tribe.push("IC","EL"),this.hints=["TL"];const e=`Gain Rank: each enemy ${m.levelGateText(this.level,!0)}creature gets "When this is dealt damage, destroy it."`,i=this.level===3?"At the start of each turn, deal 1 damage to each enemy creature.~":"";this.text=i+e}jr3(t,e){const i=super.jr3(t,e);return i.jr4("RU",this.code),this.level===3&&i.jr4("TS",this.code),i}ddf8(t){if(t.trigger.type==="DM"){const e=t.event;if(e.isCreatTarg&&e.target===t.creatId)return!0}return t.trigger.type==="RU"?t.event.playerA===t.ownerPlayerA:t.trigger.type==="TS"}jr8(t){if(t.trigger.type==="RU"){const e=p.crEnemyTarg();e.level=w.ddf2(this.level),f.creatByTarget(e).forEach(i=>{i.jr4("DM",this.code),i.changed=!0})}else if(t.trigger.type==="TS"){const e=M.tick();f.qEnemyCreats().forEach(i=>{i.hurtDirect(1,this.code,e)})}else if(t.trigger.type==="DM"){const e=f.jr5(t.creatId);e.status==="A"&&$.destroy(e,this.code)}D.triggerDone()}}class rr extends mt{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Grave Pact",this.isFree=this.level===3,this.text=`Destroy a friendly creature.~Destroy an ${m.levelGateText(this.level+1,!0)}enemy creature.`}playTargets(){const t=super.playTargets();if(this.enemyTargActions().length>0){const e=p.crFriendActTarg("CARD",this.code,"P1");t.push(e)}return t}handleAction(t){const e=T.deTil(t.param);if(e[0]==="P1")C.ddf5(this.getCardActions(t));else{this.logSpell();const i=f.ddf6(t),s=f.jr5(e[1]),h=M.tick();$.destroy(s,this.code,h),$.destroy(i,this.code,h),x.spellCast()}}enemyTargActions(t=""){const e=p.crEnemyActTarg("CARD",this.code,T.enTil("P2",t));return e.level=w.ddf2(this.level+1),w.toActions(e)}getCardActions(t,e){const i=f.ddf6(t),s=this.enemyTargActions(i.id);return s.push(C.cancelAction()),s}}class sr extends mt{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Hungering Strike";const e=this.boof359;this.text=`Give a friendly creature +${e} attack.~Give an enemy creature -${e} attack.`}playTargets(){const t=super.playTargets();if(this.enemyTargActions().length>0){const e=p.crFriendActTarg("CARD",this.code,"P1");t.push(e)}return t}handleAction(t){const e=T.deTil(t.param);if(e[0]==="P1")C.ddf5(this.getCardActions(t));else{this.logSpell();const i=f.ddf6(t),s=f.jr5(e[1]),h=this.boof359;s.buff(h,0),i.buff(-h,0),x.spellCast()}}getCardActions(t,e){const i=f.ddf6(t),s=this.enemyTargActions(i.id);return s.push(C.cancelAction()),s}enemyTargActions(t=""){const e=p.crEnemyActTarg("CARD",this.code,T.enTil("P2",t));return w.toActions(e)}}class ar extends R{constructor(t){super(t),this.faction="U",this.rarity="C",this.name="Hunting Pack",this.jr1=this.boof3612,this.jr2=this.boof248,this.tribe.push("WF"),this.text=`When ${this.name} enters play, you have a 50% chance to put a copy of ${this.name} into an available lane.`}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("EF",this.code);return s.interactive=!0,i}handleAction(t){f.birthCreature(this.code,"P",t.playerA,t.lane),C.actionDone(!0)}ddf8(t){return t.trigger.type==="EF"&&t.event.creatId===t.creatId}jr8(t){if(T.randInt(0,2)===1){const i=p.emptyPlayerActTarg("F","CARD",this.code,""),s=p.actionTarget("TB","NOTR",this.code,""),h=w.toActions([i,s]);h.length===1?D.triggerDone():C.ddf5(h)}else D.triggerDone()}}class nr extends R{image(t){return super.fixedImage(t)}constructor(t){super(t),this.faction="T",this.rarity="T",this.name="Iztek, Avatar of Flame",this.jr1=this.lValN([7,12,20]),this.jr2=this.boof6915,this.tribe.push("FR","EL"),this.initAggro=!0,this.text=`When Iztek ${m.dbdtap()}, deal that much damage to that player again.~When you play Iztek's Frost, replace this with a level ${this.level} Iztek, Avatar of Frost.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("PC",this.code),i.jr4("DM",this.code),i}ddf8(t){if(t.trigger.type==="DM"){const e=t.event;return e.battle&&!e.isCreatTarg&&e.isCreatSrc&&e.srcId===t.creatId}else if(t.trigger.type==="PC"){const e=t.event;if(e.playerA===t.ownerPlayerA)return W.getCard(e.cardCode).cardCode()==="IFR"}return!1}jr8(t){if(t.trigger.type==="DM"){const e=t.event;S.ddf3(!t.ownerPlayerA,e.dmg,this.code)}else if(t.trigger.type==="PC"){const e=f.jr5(t.trigger.creatId);f.birthCreature(`${"IZR"}${this.level}`,"R",e.owner,e.lane)}D.triggerDone()}}class or extends R{image(t){return super.fixedImage(t)}constructor(t){super(t),this.faction="T",this.rarity="T",this.name="Iztek, Avatar of Frost",this.jr1=this.boof6915,this.jr2=this.lValN([7,12,20]),this.tribe.push("IC","EL"),this.initAggro=!0;const e=this.boof2510;this.text=`When you play Iztek's Flame, replace this with a level ${this.level} Iztek, Avatar of Flame.~Activate: Deal ${e} damage to a creature.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("PC",this.code),i}canActivate(t){return!0}startActivation(t){const e=p.crActTarg("CARD",this.code,t.id);e.hint=["HR"];const i=w.toActions([e,w.buttonTarget("CANC")]);C.ddf5(i)}handleAction(t){const e=f.ddf6(t),i=f.jr5(t.param);e.hurtDirect(this.boof2510,this.code),i.endActivation()}ddf8(t){const e=t.event;return e.playerA===t.ownerPlayerA?W.getCard(e.cardCode).cardCode()==="IFL":!1}jr8(t){const e=f.jr5(t.trigger.creatId);f.birthCreature(`${"IZL"}${this.level}`,"R",e.owner,e.lane),D.triggerDone()}}class hr extends R{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Killion, Infinity Warden",this.maxLevel=4,this.jr1=this.lValN([6,9,16,22]),this.jr2=this.lValN([3,7,14,20]),this.tribe.push("FB");let e;this.level<3?e=`a ${m.levelGateText(this.level)} card in your`:this.level===3?e="a card in your hand and":e="each card in your hand, deck, and",this.text=`Forge: Level up ${e} discard pile.`}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("FR",this.code);return s.interactive=this.level<4,i}handleAction(t){const e=S.getActive();if(t.zone==="N"){const i=W.getCard(e.discard[t.position]);e.discard[t.position]=i.levelUpCard(),gt.popMode(),C.actionDone(!0)}else{const i=W.getCard(e.hand[t.position]);e.hand[t.position]=i.levelUpCard(),this.discardLevel(!0)}}jr8(t){if(this.level<3)this.discardLevel(!1);else if(this.level===3){const e=w.toActions(p.lvlHandActTarg(this.code,""));e.length>0?C.ddf5(e):this.discardLevel(!1)}else{const e=S.getActive();this.levelDeck(e.deck),this.levelDeck(e.hand),this.levelDeck(e.discard),D.triggerDone()}}discardLevel(t){const e=S.getActive(),i=p.target("TD");i.player=S.toTarget(e),i.level=w.ddf2(this.level),i.canLevel=!0;const s=Bt.generateContent(e.discard,!1,i);if(s.length>0){const h=s.map(d=>{const g=p.deckSelectAction("CARD",d.cardCode,d.sourceIdx);return g.host=this.code,g.hint=["CD"],g});Bt.showCustomDeck(s,h)}else t?C.actionDone(!0):D.triggerDone()}levelDeck(t){t.map(i=>{const s=W.getCard(i);return s.canLevel()?s.levelUpCard():i}).forEach((i,s)=>t[s]=i)}}class lr extends R{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Lavafused Asir",this.jr1=this.boof369,this.jr2=this.jr1*2,this.tribe.push("FR","AS"),this.text=`While a friendly creature is unopposed, gets ${m.jr9(this.jr1,0)}.`}jr3(t,e){const i=super.jr3(t,e),s=i.addEffect("PS",this.code);return s.area="A",i}enforceEffect(t,e){const i=p.crTarg(),s=e.status!=="A";i.player=S.toTarget(e.owner);const h=f.creatByTarget(i),d=p.mod("AT",this.jr1,e.id);h.forEach(g=>{g.opposed||s?g.removeModSafe(e.id):g.addModSafe(d)})}}class cr extends R{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Leafkin Progenitor",this.jr1=this.boof3711,this.jr2=this.jr1,this.tribe.push("PL"),this.level===3?(this.text=`Activate: Put a level 1 ${this.name} into an adjacent available lane.`,this.bonus={exist:this.ddp9(1,6,3,0)}):(this.text=`Activate: Replace this with a level ${this.level+1} ${this.name}.`,this.bonus={exist:this.ddp9(0,12*this.level,6*this.level,0)})}canActivate(t){return this.level===3?C.emptyAdjacents(t,"").length>0:!0}startActivation(t){let e;if(this.level===3)e=C.emptyAdjacents(t,"");else{const i=p.fieldSelectAction("CARD",t.lane,t.owner);i.param=t.id,i.host=this.code,e=[i]}e.push(C.cancelAction()),C.ddf5(e)}handleAction(t){const e=f.jr5(t.param);this.level===3?f.birthCreature(this.leafCode(1),"P",t.playerA,t.lane):f.birthCreature(this.leafCode(this.level+1),"R",e.owner,e.lane),e.endActivation()}leafCode(t){return`${"LKP"}${t}`}}class ye extends R{cardConstruct(t){({["AFO"]:()=>this.aetorC(),["CRS"]:()=>this.scootC(),["FOL"]:()=>this.forcC(),["TEX"]:()=>this.texC(),["TSM"]:()=>this.tsmithC()})[t]()}targAction(t,e,i){({["AFO"]:(h,d)=>this.doNossing(h,d),["CRS"]:(h,d)=>this.doNossing(h,d),["FOL"]:(h,d)=>this.doNossing(h,d),["TEX"]:(h,d)=>this.doNossing(h,d),["TSM"]:(h,d)=>this.doNossing(h,d)})[t](e,i)}playTarg;optional=!1;ftext="";forgeLevels=[1,2,3,4];constructor(t){super(t),this.playTarg=p.lvlHandActTarg(this.code,""),this.cardConstruct(this.cardCode()),this.forgeLevels.includes(this.level)&&(this.text="Forge: "+this.ftext)}jr3(t,e){const i=super.jr3(t,e);if(this.forgeLevels.includes(this.level)){const s=i.jr4("FR",this.code);s.interactive=!0}return i}handleAction(t){x.levelAndDiscard(t);const e=f.jr5(t.param);this.targAction(this.cardCode(),t,e),C.actionDone(!0)}jr8(t){const e=w.toActions(this.playTarg);e.length>0?(e.forEach(i=>{i.param=t.creatId}),this.optional&&e.push(C.noneEndTrigger()),C.ddf5(e)):D.triggerDone()}doNossing(t,e){}aetorC(){this.faction="A",this.rarity="C",this.name="Aetherforge Oracle",this.jr1=this.boof61218,this.jr2=this.boof246,this.tribe.push("HM"),this.optional=!0,this.playTarg.card="S",this.ftext="You may discard and level up a spell.",this.bonus={play:.5}}scootC(){this.faction="A",this.rarity="R",this.name="Cerebral Scout",this.jr1=this.boof51015,this.jr2=this.boof3712,this.tribe.push("MM"),this.optional=!0,this.playTarg.tribe="MM",this.ftext="You may discard and level up a Metamind.",this.bonus={play:.5}}forcC(){this.faction="A",this.rarity="H",this.name="Forge Oracle",this.jr1=this.lValN([1,10,20]),this.jr2=this.jr1,this.tribe.push("ST"),this.playTarg.faction="A",this.optional=!0,this.ftext="You may discard an Alloyin card and level it.",this.level===1?(this.hints=["LV","RT"],this.bonus={play:1}):(this.consistent=!0,this.addSp("C",0),this.bonus={play:.3})}texC(){this.faction="A",this.rarity="C",this.name="Tech Explorer",this.jr1=this.lValN([1,8,18]),this.jr2=this.jr1+2,this.tribe.push("GN"),this.level===1&&(this.hints=["LV","RT"]),this.optional=!0,this.playTarg.card="C",this.ftext="You may discard and level up a creature.",this.bonus={play:.5}}tsmithC(){this.faction="A",this.rarity="C",this.name="Technosmith",this.jr1=this.boof5915,this.jr2=this.jr1-1,this.tribe.push("HM"),this.optional=!0,this.ftext=`You may ${m.daluac()}.`,this.bonus={play:.5}}}class ur extends mt{constructor(t){super(t),this.faction="A",this.rarity="C",this.name="Metatransfer",this.text=`Give a creature ${m.jr9(-this.boof579,0)}.~Discard and level up a card.`}playTargets(){const t=super.playTargets();return t.push(p.crActTarg("CARD",this.code,"P1")),t}handleAction(t){const e=T.deTil(t.param);if(e[0]==="P1"){const i=f.ddf6(t),s=p.lvlHandActTarg(this.code,T.enTil("P2",i.id));s.deckPositionSkip=C.cardBeingPlayed.position;const h=w.toActions(s);h.length===0?(this.logSpell(),i.buff(-this.boof579,0),x.spellCast()):(h.push(C.cancelAction()),C.ddf5(h))}else{this.logSpell(),f.jr5(e[1]).buff(-this.boof579,0);const s=t;s.position<C.cardBeingPlayed.position&&(C.cardBeingPlayed.position-=1),x.levelAndDiscard(s),x.spellCast()}}}class dr extends R{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Mimicleaf",this.jr1=this.lValN([2,5,11]),this.jr2=this.jr1,this.tribe.push("PL"),this.text=`Activate: Put a level ${this.level} ${this.name} into an adjacent available lane.`}canActivate(t){return C.emptyAdjacents(t,"").length>0}startActivation(t){const e=C.emptyAdjacents(t,"");e.push(C.cancelAction()),C.ddf5(e)}handleAction(t){const e=f.jr5(t.param);f.birthCreature(e.code,"P",t.playerA,t.lane),e.endActivation()}}class fr extends R{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Mimicwurm",this.jr1=7,this.jr2=this.jr1,this.tribe.push("WR"),this.text=this.lValS(["","Forge: You may put a level 1 Mimicwurm into another lane.","Forge: You may put a level 2 Mimicwurm into another lane. Then you may put a level 1 Mimicwurm into another lane."])}jr3(t,e){const i=super.jr3(t,e);if(this.level>1){const s=i.jr4("FR",this.code);s.interactive=!0}return i}handleAction(t){const e=T.deTil(t.param);if(e[0]==="P1")if(this.level===3){this.wurmsign(2,t);const i=[t.lane,parseInt(e[1])],s=this.fieldActions("P2",i);C.ddf5(s)}else this.wurmsign(1,t),C.actionDone(!0);else this.wurmsign(1,t),C.actionDone(!0)}jr8(t){const e=O.toCreature(t.event);C.ddf5(this.fieldActions("P1",[e.creature.lane]))}fieldActions(t,e){const i=p.actionTarget("TF","CARD",this.code,T.enTil(t,e[0]));i.player="F",i.hint=["FL"],i.lanes=f.laneIdx.filter(h=>!e.includes(h));const s=w.toActions(i);return s.push(C.noneEndTrigger()),s}wurmsign(t,e){f.birthCreature(this.wurmCode(t),"R",e.playerA,e.lane)}wurmCode(t){return`${"MMW"}${t}`}}class le extends mt{lookup(t){return{["BRN"]:{c:()=>this.boutC(),z:(i,s)=>this.burner(i,s,8)},["IFL"]:{c:()=>this.izfmC(),z:(i,s)=>this.burner(i,s,this.boof6915)},["LSK"]:{c:()=>this.lspkC(),z:(i,s)=>this.burner(i,s,this.boof6812)},["LYR"]:{c:()=>this.rainC(),z:(i,s)=>this.rainZ(i,s)},["SOK"]:{c:()=>this.sealkC(),z:(i,s)=>this.burner(i,s,this.sealzap)},["SHK"]:{c:()=>this.shkC(),z:(i,s)=>this.shkZ(i,s)}}[t]}cardCast(t,e,i){this.lookup(t).z(e,i)}hurts=!0;burner(t,e,i){e?t.hurtDirect(i,this.code):S.ddf3(t,i,this.code)}burnText(t){return`Deal ${t} damage to a creature or player.`}constructor(t){super(t),this.lookup(this.cardCode()).c()}playTargets(){const t=super.playTargets(),e=this.hurts?["HR"]:["BF"],i=p.crActTarg("CARD",this.code,"");i.hint=e;const s=p.actionTarget("TP","CARD",this.code,"");return s.hint=e,t.push(i,s),t}handleAction(t){this.logSpell();let e,i;t.zone==="P"?(e=!1,i=t.playerA):(i=f.ddf6(t),e=!0),this.cardCast(this.cardCode(),i,e),x.spellCast()}boutC(){this.faction="T",this.rarity="R",this.name="Burnout",this.overload=!0,this.maxLevel=1,this.text=this.burnText(8)}izfmC(){this.faction="T",this.rarity="T",this.name="Iztek's Flame";const t=this.boof6915;this.addSp("D",t),this.text=this.burnText(t)}lspkC(){this.faction="T",this.rarity="C",this.name="Lightning Spark";const t=this.boof6812;this.addSp("D",t),this.text=this.burnText(t)}rainC(){this.faction="U",this.rarity="C",this.name="Lysian Rain",this.hurts=!1;const t=this.boof7911;this.addSp("H",t),this.text=`Give a creature or player +${t} health.`}rainZ(t,e){const i=this.boof7911;e?t.buff(0,i):S.healPlayer(t,i)}sealkC(){this.faction="T",this.rarity="C",this.name="Seal of Kadras",this.level<3&&(this.hints=["LV"]),this.consistent=this.level>1;const t=this.sealzap;this.addSp("D",t),this.consistent&&this.addSp("C",0),this.text=this.burnText(t)}get sealzap(){return this.lValN([1,2,25])}shkC(){this.faction="T",this.rarity="H",this.name="Static Shock";const t=this.boof124;this.addSp("D",t),this.text=`${this.burnText(t)} You may play an additional ${m.levelGateText(this.level,!0)}spell this turn.`}shkZ(t,e){this.burner(t,e,this.boof124);const i=x.freeCard(this.code);i.condition.level=w.ddf2(this.level),i.condition.card="S"}}class gr extends R{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Nefrax, the Soulweaver",this.jr1=this.boof4712,this.jr2=this.lValN([10,15,25]),this.tribe.push("HM");const e=this.boof51015;this.addSp("N",e),this.text=`Activate: Put a ${e}/${e} Spirit into an available lane.~Forge: Destroy a friendly creature.`,this.bonus={play:this.ddp9(1,e*2,e,0)}}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("FR",this.code);return s.interactive=!0,i}canActivate(t){return this.empties(t).length>0}startActivation(t){const e=this.empties(t);e.push(C.cancelAction()),C.ddf5(e)}handleAction(t){const e=T.deTil(t.param);if(e[0]==="P1"){const i=f.jr5(e[1]);f.birthCreature(`${"SPN"}${this.level}`,"P",t.playerA,t.lane),i.endActivation()}else{const i=f.ddf6(t);$.destroy(i,this.code),C.actionDone(!0)}}jr8(t){const e=p.crFriendActTarg("CARD",this.code,""),i=w.toActions(e);C.ddf5(i)}empties(t){const e=p.emptyPlayerActTarg("F","CARD",this.code,T.enTil("P1",t.id));return w.toActions(e)}}class mr extends R{constructor(t){super(t),this.faction="N",this.rarity="T",this.name="Netherdrake",this.jr1=this.boof4815,this.jr2=this.jr1,this.initMobile=this.lValN([0,0,1]),this.tribe.push("DG"),this.text=`When this enters play or moves into a lane, destroy the opposing ${m.levelGateText(this.level,!0)}creature.`}image(t){return this.rawImage(`${"NSH"}${this.level}`,t)}jr3(t,e){const i=super.jr3(t,e);return i.jr4("FK",this.code),i.jr4("EF",this.code),i}ddf8(t){return t.trigger.type==="EF"&&t.event.creatId===t.creatId}jr8(t){const i=O.toCreature(t.event).creature.opposed;i&&w.levelTestCommon(i.level,this.level)&&$.destroy(i,this.code),D.triggerDone()}}class pr extends me{enforceEffect(t,e){e.lane===3?e.removeModSafe(e.id):e.addModSafe(p.mod("AR",this.boof236,e.id)),super.enforceEffect(t,e)}}class yr extends R{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Nova, Grove Queen",this.jr1=this.lValN([3,5,10,14]),this.jr2=this.lValN([7,10,15,19]),this.tribe.push("FB"),this.maxLevel=4;const e=this.nbuf,i=this.lValS(["an adjacent","each adjacent","each","each"]);this.text=`Forge: Put a 1/1 Seedling into ${i} available space.~When a friendly creature is replaced, Nova gets ${m.jr9(e,e)}.`,this.bonus={play:2}}get nbuf(){return this.lValN([1,3,5,10])}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("FR",this.code);return this.level===1&&(s.interactive=!0),i.jr4("RP",this.code),i}ddf8(t){if(t.event.code==="RPL"){const e=O.toReplaced(t.event);return t.creatId!==e.replCreatId&&t.ownerPlayerA===e.replCreat.owner}return!1}jr8(t){const e=f.jr5(t.creatId);if(t.event.code==="RPL"){const i=this.nbuf;e.buff(i,i),D.triggerDone()}else{const i="NSD"+this.level,s=f.emptyLanes(t.ownerPlayerA);if(this.level>1){const h=this.level===2?e.adjacent.filter(g=>s.includes(g)):s,d=M.tick();h.forEach(g=>{f.birthCreature(i,"P",e.owner,g,d)}),D.triggerDone()}else{const h=e.adjacent.filter(d=>s.includes(d));if(h.length===0)D.triggerDone();else if(h.length===1)f.birthCreature(i,"P",e.owner,h[0]),D.triggerDone();else{const d=C.emptyAdjacents(e,"");C.ddf5(d)}}}}handleAction(t){f.birthCreature("NSD"+this.level,"P",t.playerA,t.lane),C.actionDone(!0)}}class br extends mt{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Omnomnom";const e=this.boof246,i=e*-1;this.text=`Give a friendly Zombie ${m.jr9(e,e,!0)}, and Regenerate ${e}.~Then give an enemy non-Zombie ${m.jr9(i,i)}.`}playTargets(){const t=super.playTargets();if(this.nonZombies().length>0){const e=p.crFriendActTarg("CARD",this.code,"P1");e.tribe="ZB",t.push(e)}return t}handleAction(t){const e=T.deTil(t.param);if(e[0]==="P1")C.ddf5(this.getCardActions(t));else{this.logSpell();const i=f.ddf6(t),s=f.jr5(e[1]),h=this.boof246;s.buff(h,h),s.addRegen(h),i.buff(-h,-h),x.spellCast()}}nonZombies(t=""){const e=p.crEnemyActTarg("CARD",this.code,T.enTil("P2",t));return w.toActions(e).filter(i=>{const s=i;return!f.ddf6(s).isTribe("ZB")})}getCardActions(t,e){if(t.key==="CARD"){const i=f.ddf6(t),s=C.cancelAction(),h=this.nonZombies(i.id);return h.push(s),h}return super.getCardActions(t,e)}}class Ar extends R{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Onyxium Allomancer",this.jr1=this.boof248,this.jr2=this.boof61016,this.tribe.push("HM");const e=this.boof358;this.text=`Activate: Discard and level up a card.~Allied Nekrium: Regenerate ${e}.`,this.bonus={exist:this.ddp9(0,e,0,0,.5)}}jr3(t,e){const i=super.jr3(t,e);return i.jr4("FR",this.code),i}canActivate(t){return S.toPlayer(t.owner).hand.some(i=>W.getCard(i).canLevel())}startActivation(t){const e=p.lvlHandActTarg(this.code,t.id);e.hint?.push("DF"),C.ddf5(w.toActions([e,w.buttonTarget("CANC")]))}handleAction(t){const e=f.jr5(t.param);x.levelAndDiscard(t),e.endActivation()}jr8(t){x.allied("N")&&f.jr5(t.creatId).addRegen(this.boof358),D.triggerDone()}}class kr extends R{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Onyxium Phantasm",this.jr1=this.boof246,this.jr2=this.lValN([9,12,19]),this.initRegen=this.boof124,this.tribe.push("ST");const e=this.boof4812n;this.addSp("A",e),this.text=`Allied Alloyin: Activate: Give a creature ${m.jr9(e,0)}`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("FR",this.code),i}canActivate(t){return t.hasMod(t.id)}startActivation(t){const e=p.crActTarg("CARD",this.code,t.id);e.hint=["DF","DB"];const i=w.toActions(e);i.push(C.cancelAction()),C.ddf5(i)}handleAction(t){const e=f.jr5(t.param);f.ddf6(t).buff(this.boof4812n,0),e.endActivation()}jr8(t){if(x.allied("A")){const e=f.jr5(t.creatId);e.addMod(p.mod("AL",!0,e.id)),e.changed=!0}D.triggerDone()}}class vr extends mt{constructor(t){super(t),this.faction="T",this.rarity="R",this.name="Oratek Battlebrand";const e=this.boof71013;this.addSp("D",e),this.text=`Deal ${e} damage to a creature.~Allied Alloyin: You may discard a card and level it.`}playTargets(){const t=super.playTargets(),e=p.crActTarg("CARD",this.code,"");return e.hint=["HR"],t.push(e),t}handleAction(t){if(t.zone==="F"){this.logSpell();const e=t;if(f.ddf6(e).hurtDirect(this.boof71013,this.code),x.allied("A")){const s=this.levelActs();s.length===1?x.spellCast():C.ddf5(s)}else x.spellCast()}else if(t.zone==="H"){const e=t;e.position<C.cardBeingPlayed.position&&(C.cardBeingPlayed.position-=1),x.levelAndDiscard(e),x.spellCast()}else t.zone==="B"&&t.param==="NOTR"?x.spellCast():super.handleAction(t)}levelActs(){const t=p.actionTarget("TB","CARD",this.code,"NOTR"),e=p.lvlHandActTarg(this.code,"");return e.deckPositionSkip=C.cardBeingPlayed.position,w.toActions([e,t])}}class Tr extends R{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Oratek Warhammer",this.jr1=this.boof3713,this.jr2=this.lValN([8,12,19]),this.initMobile=this.level,this.tribe.push("FR","AS"),this.text=`Allied Alloyin: When ${this.name} ${m.dbdtap()} on your turn, you may discard and level up a card.`,this.bonus={exist:.5}}jr3(t,e){const i=super.jr3(t,e);return i.jr4("FR",this.code),i}handleAction(t){x.levelAndDiscard(t),C.actionDone(!0)}ddf8(t){if(t.trigger.type==="DM"){const e=O.toDamage(t.event);return e.battle&&!e.isCreatTarg&&e.isCreatSrc&&e.srcId===t.creatId&&e.srcCreat.owner===S.getActiveB()}return!1}jr8(t){if(t.trigger.type==="FR"){if(x.allied("A")){const e=f.jr5(t.creatId),i=e.jr4("DM",this.code);i.interactive=!0,e.changed=!0}D.triggerDone()}else if(t.trigger.type==="DM"){const e=w.toActions(p.lvlHandActTarg(this.code,""));e.length>0?(e.push(C.noneEndTrigger()),C.ddf5(e)):D.triggerDone()}}}class We extends R{hitCreature;constructor(t,e){super(t),this.hitCreature=e}jr3(t,e){const i=super.jr3(t,e);return i.jr4("DM",this.code),i}ddf8(t){if(t.trigger.type==="DM"){const e=t.event;return e.battle&&e.isCreatTarg===this.hitCreature&&e.isCreatSrc&&e.srcId===t.creatId}return!1}}class Cr extends We{constructor(t){super(t,!1),this.faction="U",this.rarity="L",this.name="Oros, Deepwood's Chosen",this.jr1=this.lValN([7,11,16,0]),this.jr2=this.jr1,this.initBT=!0,this.maxLevel=4,this.tribe.push("FB"),this.hints=["OL"];const e=`When Oros ${m.dbdtap()}, you gain that much health.`,i=this.level===4?"Oros gets +attack and +health equal to your health.~":"";this.text=i+e}jr3(t,e){const i=super.jr3(t,e);return this.level===4&&i.addEffect("PH",this.code),i}jr8(t){const e=t.event;S.healPlayer(t.ownerPlayerA,e.dmg),D.triggerDone()}enforceEffect(t,e){const i=S.toPlayer(e.owner).health;e.status==="A"&&(e.removeModSafe(e.id),e.addModSafe(p.mod("HL",i,e.id)),e.addModSafe(p.mod("MH",i,e.id)),e.addModSafe(p.mod("AT",i,e.id)))}}class Sr extends R{constructor(t){super(t),this.faction="U",this.rarity="R",this.name="Oxidon Spitter",this.jr1=this.boof7914,this.jr2=this.boof3510,this.tribe.push("DN"),this.l3=this.level===3,this.text=`Forge: Negate Armor from ${this.l3?"each":"an"} enemy creature.`}l3;jr3(t,e){const i=super.jr3(t,e),s=i.jr4("FR",this.code);return s.interactive=!this.l3,i}jr8(t){if(this.l3)f.creatByTarget(p.crEnemyTarg()).forEach(e=>{e.negateArmor=!0}),D.triggerDone();else{const e=p.crEnemyActTarg("CARD",this.code,""),i=w.toActions(e);i.length>0?C.ddf5(i):D.triggerDone()}}handleAction(t){const e=f.ddf6(t);e.negateArmor=!0,C.actionDone(!0)}}class ie extends R{lookup(t){return{["AFS"]:{c:()=>this.afsC(),a:i=>this.afsA(i),t:i=>this.afsT(i)},["DMW"]:{c:()=>this.drixC(),a:i=>this.drixA(i),t:i=>this.drixT(i)},["FGG"]:{c:()=>this.fggC(),a:i=>this.fggA(i),t:i=>this.fggT(i)},["GHS"]:{c:()=>this.mvpC(),a:i=>this.mvpA(i),t:i=>this.mvpT(i)},["OWW"]:{c:()=>this.owwC(),a:i=>this.owwA(i),t:i=>this.owwT(i)},["UPM"]:{c:()=>this.upakC(),a:i=>this.upakA(i),t:i=>this.upakT(i)},["WFM"]:{c:()=>this.wfmC(),a:i=>this.wfmA(i),t:i=>this.wfmT(i)}}[t]}runAct(t,e){this.lookup(t).a(e)}testAct(t,e){return this.lookup(t).t(e)}constructor(t){super(t),this.lookup(this.cardCode()).c()}preFight=!1;prePlay=!1;canActivate(t){return this.testAct(this.cardCode(),t)}startActivation(t){const e=w.boardTarget("CARD",this.code);e.param=t.id,this.preFight&&(e.hint=["BB"]),this.prePlay&&(e.hint=["DF"]),C.ddf5(w.toActions([e,w.buttonTarget("CANC")]))}handleAction(t){const e=f.jr5(t.param);this.runAct(this.cardCode(),e),e.endActivation()}afsC(){this.faction="A",this.rarity="L",this.name="Arcflight Squadron",this.jr1=this.boof4710,this.jr2=this.jr1+2,this.tribe.push("RB"),this.hints=["OL"],this.prePlay=!0,this.text=`Activate: You may play an additional ${m.levelGateText(this.level,!0)}Robot this turn.`}afsT(t){return!0}afsA(t){const e=x.freeCard(this.code);e.condition.tribe="RB",e.condition.level=w.ddf2(this.level)}drixC(){this.faction="A",this.rarity="L",this.name="Drix, the Mindwelder",this.jr1=this.boof3612,this.jr2=this.lValN([6,12,21]),this.tribe.push("MM"),this.preFight=!0,this.addSp("A",this.level),this.text=`Activate, discard your hand: Each friendly Metamind gets ${m.jr9(this.level,0)} for each card discarded this way.`}drixT(t){return S.getActive().hand.length>0}drixA(t){const e=S.toPlayer(t.owner),i=e.hand.length*this.level;e.discard.push(...e.hand),e.hand=[];const s=p.crFriendTarg();s.tribe="MM",f.creatByTarget(s).forEach(h=>{h.buff(i,0)})}fggC(){this.faction="A",this.rarity="H",this.name="Forge Guardian Gamma",this.jr1=this.boof4816,this.jr2=this.jr1,this.tribe.push("RB","GD"),this.preFight=!0;const t=this.boof255080;this.addSp("N",t),this.text=`Activate, destroy five friendly Robot Guardians: Put a ${t}/${t} Forge Guardian Omega into this lane.`}fggT(t){return f.creatByTarget(this.fggTarg()).length===5}fggA(t){const e=t.lane,i=t.owner,s=M.tick();f.creatByTarget(this.fggTarg()).forEach(h=>$.destroy(h,this.code,s)),f.birthCreature(`${"FGO"}${this.level}`,"P",i,e)}fggTarg(){const t=p.crFriendTarg();return t.tribe="GD",t}mvpC(){this.faction="U",this.rarity="C",this.name="Gemheart Sprout",this.jr1=this.boof357,this.jr2=this.jr1+this.level,this.initDefend=!0,this.tribe.push("PL"),this.preFight=!0,this.addSp("L",this.level),this.text=`Activate: You gain health equal to ${this.level}x the number of friendly creatures.`}mvpT(t){return!0}mvpA(t){const e=f.ddf1().length;S.healPlayer(t.owner,e*this.level)}owwC(){this.faction="A",this.rarity="L",this.name="Oreian Warwalker",this.jr1=this.boof359,this.jr2=this.boof61018,this.tribe.push("RB"),this.preFight=!0;const t=this.owwbuff+1;this.addSp("A",t),this.text=`Activate: ${this.name} gets ${t}x attack.`}owwT(t){return!0}owwA(t){t.buff(t.attack*this.owwbuff,0)}get owwbuff(){return this.lValN([1,1,2])}upakC(){this.faction="U",this.rarity="L",this.name="Uterra Packmaster",this.jr1=this.boof6914,this.jr2=this.jr1,this.tribe.push("HM"),this.preFight=!0;const t=this.boof124;this.addSp("U",t),this.text=`Activate: each other friendly Uterra creature gets ${m.jr9(t,t)}.`}upakT(t){return f.creatByTarget(this.upakTarg(t.id)).length>0}upakA(t){const e=this.boof124;f.creatByTarget(this.upakTarg(t.id)).forEach(i=>{i.buff(e,e)})}upakTarg(t){const e=p.crFriendNotMeTarg(t);return e.faction="U",e}wfmC(){this.faction="T",this.rarity="H",this.name="Wildfire Maiden",this.jr1=this.boof4610,this.jr2=this.boof5814,this.tribe.push("FR","AS"),this.text=`Activate, destroy ${this.name}: Deal damage equal to its attack to each enemy creature.`}wfmT(t){return!0}wfmA(t){const e=M.tick();f.creatByTarget(p.crEnemyTarg()).forEach(i=>{i.hurtDirect(t.attack,this.code,e)}),$.destroy(t,this.code)}}class ii extends R{lookup(t){return{["MDE"]:{c:()=>this.misdC(),f:i=>this.misdF(i)},["TAB"]:{c:()=>this.thraC(),f:i=>this.thraF(i)}}[t]}cardForge(t,e){this.lookup(t).f(e)}ftext="";constructor(t){super(t),this.lookup(this.cardCode()).c(),this.text="Assault: "+this.ftext,this.ftext=""}jr3(t,e){const i=super.jr3(t,e);return i.jr4("AS",this.code),i}jr8(t){this.cardForge(this.cardCode(),t),D.triggerDone()}misdC(){this.faction="N",this.rarity="C",this.name="Misery Demon",this.jr1=this.boof5915,this.jr2=this.boof2510,this.tribe.push("DM"),this.hints=["OL"];const t=this.level+3;this.ftext=`Deal ${t} damage to the enemy player and gain ${t} health.`}misdF(t){const e=this.level+3;S.ddf3(!t.ownerPlayerA,e,this.code),S.healPlayer(t.ownerPlayerA,e)}thraC(){this.faction="T",this.rarity="C",this.name="Thranik Ambusher",this.jr1=this.boof5813,this.jr2=this.jr1,this.tribe.push("DK"),this.hints=["OL"];const t=this.boof234;this.ftext=`${this.name} gets ${m.jr9(t,t)}.`}thraF(t){const e=this.boof234;f.jr5(t.creatId).buff(e,e)}}class bt extends R{lookup(t){return{["ATT"]:{c:()=>this.atorC(),t:(i,s)=>this.atorT(i,s),b:(i,s)=>this.atorB(i,s)},["FGD"]:{c:()=>this.fgdC(),t:(i,s)=>this.fgdT(i,s),b:(i,s)=>this.fgdB(i,s)},["FSP"]:{c:()=>this.fspC(),t:(i,s)=>this.fspT(i,s),b:(i,s)=>this.fspB(i,s)},["HMF"]:{c:()=>this.hamfC(),t:(i,s)=>this.hamfT(i,s),b:(i,s)=>this.hamfB(i,s)},["HOD"]:{c:()=>this.haroldC(),t:(i,s)=>this.ocarT(i,s),b:(i,s)=>this.haroldB(i,s)},["OJC"]:{c:()=>this.ocarC(),t:(i,s)=>this.ocarT(i,s),b:(i,s)=>this.ocarB(i,s)},["RLW"]:{c:()=>this.restwandC(),t:(i,s)=>this.restwandT(i,s),b:(i,s)=>this.restwandB(i,s)},["RHW"]:{c:()=>this.ruthwandC(),t:(i,s)=>this.restwandT(i,s),b:(i,s)=>this.ruthwandB(i,s)},["SDR"]:{c:()=>this.spdryC(),t:(i,s)=>this.spdryT(i,s),b:(i,s)=>this.spdryB(i,s)},["TDW"]:{c:()=>this.tdwC(),t:(i,s)=>this.tdwT(i,s),b:(i,s)=>this.tdwB(i,s)},["TNL"]:{c:()=>this.tnlC(),t:(i,s)=>this.tnlT(i,s),b:(i,s)=>this.tnlB(i,s)},["UTR"]:{c:()=>this.urexC(),t:(i,s)=>this.urexT(i,s),b:(i,s)=>this.urexB(i,s)}}[t]}testBirth(t,e){return this.lookup(t).t(e,O.toEnterField(e.event))}actBirth(t,e){this.lookup(t).b(e,O.toEnterField(e.event))}iTrigger=!0;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,e){const i=super.jr3(t,e);return this.iTrigger&&i.jr4("EF",this.code),i}ddf8(t){return t.event.code==="ENT"?this.testBirth(this.cardCode(),t):!1}jr8(t){this.actBirth(this.cardCode(),t),D.triggerDone()}atorC(){this.faction="T",this.rarity="L",this.name="Ator, Thunder Titan",this.jr1=this.boof6914,this.jr2=this.jr1-1,this.tribe.push("GT"),this.text=`Each another friendly ${m.levelGateText(this.level,!0)}creature gets Assault: Aggressive.`}atorT(t,e){const i=e.creature;return e.forged&&t.trigger.creatId!==i.id&&i.owner===t.ownerPlayerA&&w.levelTargetTest(w.ddf2(this.level),i.level)&&!i.opposed}atorB(t,e){e.creature.aggressive=!0}fgdC(){this.faction="A",this.rarity="H",this.name="Forge Guardian Delta",this.jr1=this.boof71117,this.jr2=this.jr1,this.tribe.push("RB","GD");const t=this.boof255080;this.text=`When ${this.name} enters play, if there is a friendly Alpha Beta, and Gamma, put a ${t}/${t} Forge Guardian Omega in your discard pile.`}fgdT(t,e){return e.creature.id===t.creatId}fgdB(t,e){const i=p.crTarg();i.player=S.toTarget(t.ownerPlayerA);const s=f.creatByTarget(i).map(h=>h.code.slice(0,3));s.includes("FGA")&&s.includes("FGB")&&s.includes("FGG")&&S.toPlayer(t.ownerPlayerA).discard.push("FGO"+this.level)}fspC(){if(this.faction="A",this.rarity="L",this.name="Flowsteel Prototype",this.jr1=this.lValN([3,6,8]),this.jr2=this.lValN([8,15,20]),this.tribe.push("SS"),this.iTrigger=this.level>1,this.iTrigger){const t=m.levelGateText(this.level-1);this.text=`When you Forge a ${t} creature, ${this.name} gets +attack equal to that creature's attack.`}}fspT(t,e){return!!(e.forged&&e.creature.owner===t.ownerPlayerA&&W.getCard(e.creature.code).level<this.level)}fspB(t,e){f.jr5(t.trigger.creatId).buff(e.creature.attack,0)}hamfC(){this.faction="T",this.rarity="H",this.name="Hammerfang",this.jr1=this.boof51015,this.jr2=this.jr1,this.tribe.push("YT"),this.text=`When an enemy creature enters play opposing ${this.name}, move this to an available space at random.`}hamfT(t,e){const i=f.jr5(t.creatId);return e.creature.owner!==t.ownerPlayerA&&i.lane===f.oppositeLane(e.creature.lane)}hamfB(t,e){const i=f.emptyLanes(t.ownerPlayerA),s=i.length;s>0&&f.jr5(t.creatId).move(i[T.randInt(0,s)])}haroldC(){this.faction="T",this.rarity="R",this.name="Herald of Destruction",this.jr1=this.boof369,this.jr2=this.lValN([9,12,18]),this.tribe.push("FR","AS"),this.text=`When an enemy creature enters play, if it wasn't Forged, deal damage equal to ${this.name}'s attack to the enemy player.`}haroldB(t,e){if(bt.itBirthedFirst(e.creature.id,t.creatId)){const i=f.jr5(t.creatId);S.ddf3(!i.owner,i.attack,this.code)}}ocarC(){this.faction="A",this.rarity="H",this.name="Oreian Justicar",this.jr1=this.boof5814,this.jr2=this.boof81220,this.tribe.push("HM");const t=this.ocarbuff;this.text=`When an enemy creature enters play, if it wasn't Forged, it gets ${m.jr9(t,0)}.`,this.bonus={exist:this.ddp9(0,t,t,0)*-.5}}ocarT(t,e){return e.creature.owner!==t.ownerPlayerA&&!e.forged}ocarB(t,e){bt.itBirthedFirst(e.creature.id,t.creatId)&&e.creature.buff(this.ocarbuff,0)}get ocarbuff(){return this.lValN([-5,-10,-20])}restwandC(){this.faction="U",this.rarity="H",this.name="Restless Wanderers",this.jr1=this.boof51014,this.jr2=this.boof3610,this.tribe.push("ST","WD");const t=this.boof369;this.text=`When another friendly Spirit Wanderer enters play, ${this.name} gets ${m.jr9(t,t)}.`}restwandT(t,e){return t.trigger.creatId!==e.creature.id&&e.creature.owner===t.ownerPlayerA?e.creature.isTribe("WD"):!1}restwandB(t,e){const i=f.jr5(t.trigger.creatId),s=this.boof369;i.buff(s,s)}ruthwandC(){this.faction="N",this.rarity="C",this.name="Ruthless Wanderers",this.jr1=this.boof3610,this.jr2=this.boof51014,this.tribe.push("ST","WD");const t=-this.boof369;this.text=`When another friendly Spirit Wanderer enters play, the creature opposing this gets ${m.jr9(t,t)}.`}ruthwandB(t,e){const s=f.jr5(t.trigger.creatId).opposed;if(s){const h=-this.boof369;s.buff(h,h)}}spdryC(){this.faction="U",this.rarity="R",this.name="Spring Dryad",this.jr1=this.boof469,this.jr2=this.jr1,this.tribe.push("DY"),this.text=`When a friendly creature enters play, ${this.name} gets ${m.jr9(this.level,this.level)}.`,this.bonus={exist:this.ddp9(0,this.level*2,this.level,0)}}spdryT(t,e){return t.trigger.creatId!==e.creature.id&&e.creature.owner===t.ownerPlayerA}spdryB(t,e){f.jr5(t.trigger.creatId).buff(this.level,this.level)}tdwC(){this.faction="N",this.rarity="R",this.name="Tarsus Deathweaver",this.jr1=this.boof5915,this.jr2=this.jr1,this.tribe.push("HM");const t=this.boof246;this.text=`When a friendly creature enters play, if it wasn't Forged, it gets ${m.jr9(t,t)}.`,this.bonus={exist:this.ddp9(0,t*2,t,0)*.5}}tdwT(t,e){return e.creature.owner===t.ownerPlayerA&&!e.forged}tdwB(t,e){if(bt.itBirthedFirst(e.creature.id,t.creatId)){const i=this.boof246;e.creature.buff(i,i)}}tnlC(){this.faction="N",this.rarity="L",this.name="Tarsus Necrolord",this.jr1=this.boof4812,this.jr2=this.jr1,this.tribe.push("HM");const t=this.boof124,e=this.boof359;this.text=`Forge: Spawn a ${e}/${e} Zombie for each friendly creature that was destroyed this turn.~When a friendly Zombie enters play, ${this.name} gets ${m.jr9(t,t)}.`}tnlT(t,e){return e.creature.owner===t.ownerPlayerA?e.creature.isTribe("ZB"):!1}tnlB(t,e){const i=f.jr5(t.trigger.creatId),s=this.boof124;i.buff(s,s)}urexC(){this.faction="U",this.rarity="H",this.name="Uterradon Rex",this.jr1=this.boof4813,this.jr2=this.boof71118,this.tribe.push("DN");const t=this.boof124;this.text=`When another friendly Dinosaur enters play, it gets ${m.jr9(t,t)}.`,this.bonus={exist:this.ddp9(0,t*2,t,0)*.5}}urexT(t,e){return t.trigger.creatId!==e.creature.id&&e.creature.owner===t.ownerPlayerA&&e.creature.isTribe("DN")}urexB(t,e){if(bt.itBirthedFirst(e.creature.id,t.creatId)){const i=this.boof124;e.creature.buff(i,i)}}static itBirthedFirst(t,e){if(t===e)return!0;let i=!1;const s=$.findDeathTime(e);if(T.isUn(s))i=!0;else{const h=f.findBirthTime(t);(T.isUn(h)||h<=s)&&(i=!0)}return i}}class re extends We{lookup(t){return{["AGM"]:{c:()=>this.agamC(),h:(i,s,h,d)=>this.agamH(i,s,h,d)},["BWK"]:{c:()=>this.blwalkC(),h:(i,s,h,d)=>this.blwalkH(i,s,h,d)},["BRF"]:{c:()=>this.bfangC(),h:(i,s,h,d)=>this.bfangH(i,s,h,d)},["CDT"]:{c:()=>this.cadtC(),h:(i,s,h,d)=>this.cadtH(i,s,h,d)},["GSC"]:{c:()=>this.gcobC(),h:(i,s,h,d)=>this.gcobH(i,s,h,d)},["IHA"]:{c:()=>this.ibhaC(),h:(i,s,h,d)=>this.ibhaH(i,s,h,d)},["SHS"]:{c:()=>this.shimfC(),h:(i,s,h,d)=>this.shimfH(i,s,h,d)}}[t]}image(t){return this.rarity==="T"?this.fixedImage(t):this.leveledImage(t)}cardConstruct(t){this.hints=["OP"],this.lookup(t).c()}creatHit(t,e,i,s,h){this.lookup(t).h(e,i,s,h)}constructor(t){super(t,!0),this.cardConstruct(this.cardCode())}jr8(t){const e=O.toDamage(t.event);this.creatHit(this.cardCode(),t,e,e.srcCreat,e.hurtCreat),D.triggerDone()}agamC(){this.faction="T",this.rarity="L",this.name="Agamemnon",this.jr1=this.boof4814,this.jr2=this.lValN([8,12,18]),this.level>1&&(this.initMobile=1,this.initAggro=this.level===3),this.tribe.push("GT"),this.text=`When ${this.name} ${m.dbdtac()} on your turn, this battles again.`}agamH(t,e,i,s){t.ownerPlayerA===S.getActiveB()&&(i.extraBattles+=1)}blwalkC(){this.faction="N",this.rarity="R",this.name="Blight Walker",this.jr1=this.boof137,this.jr2=this.lValN([5,10,17]),this.tribe.push("ZB"),this.text=`When ${this.name} ${m.dbdtac(this.level)}, destroy that creature.`}blwalkH(t,e,i,s){s.status==="A"&&w.levelTestCommon(s.level,this.level)&&$.destroy(s,this.code)}bfangC(){this.faction="U",this.rarity="T",this.name="Broodfang",this.jr1=this.level,this.jr2=this.level,this.maxLevel=this.level,this.minLevel=this.level,this.tribe.push("SN"),this.text=this.poisonText(this.jr1)}bfangH(t,e,i,s){s.addPoison(this.jr1)}poisonText(t){return`When ${this.name} ${m.dbdtac()}, give that creature gets Poison ${t}.`}cadtC(){this.faction="U",this.rarity="R",this.name="Cadaverous Thicket",this.jr1=this.boof135,this.jr2=this.lValN([7,12,22]),this.tribe.push("PL"),this.text=this.poisonText(this.jr1)}cadtH(t,e,i,s){s.addPoison(this.jr1)}gcobC(){this.faction="U",this.rarity="C",this.name="Ghostscale Cobra",this.jr1=this.boof4610,this.jr2=this.boof135,this.tribe.push("SN"),this.text=this.poisonText(this.jr1)}gcobH(t,e,i,s){s.addPoison(this.jr1)}ibhaC(){this.faction="A",this.rarity="L",this.name="Ironbeard, Hammer of Anvillon",this.jr1=this.lValN([4,7,12,15]),this.jr2=this.lValN([7,11,17,25]),this.initArmor=this.lValN([1,3,5,20]),this.tribe.push("FB"),this.maxLevel=4;const t=this.level===4?"'s attack gets reduced to 0":` gets ${m.jr9(this.boof246n,0)}`;this.text=`When Ironbeard ${m.dbdtac()}, that creature${t}, and moves to an available enemy lane at random.`}ibhaH(t,e,i,s){if(s.status==="A"){const h=this.level===4?s.attack*-1:this.boof246n;s.buff(h,0);const d=f.emptyLanes(s.owner),g=d.length;g>0&&s.move(d[T.randInt(0,g)])}}shimfC(){this.faction="U",this.rarity="R",this.name="Shimmerfang Serpent",this.jr1=this.boof357,this.jr2=this.boof61016,this.tribe.push("SN"),this.text=`When ${this.name} ${m.dbdtac()}, that creatures gets that much Poison.`}shimfH(t,e,i,s){s.addPoison(e.dmg)}}class Lt extends We{lookup(t){return{["ABR"]:{c:()=>this.ashbC(),h:(i,s,h)=>this.ashyH(i,s,h)},["AMY"]:{c:()=>this.ashmC(),h:(i,s,h)=>this.ashyH(i,s,h)},["CFB"]:{c:()=>this.cfbC(),h:(i,s,h)=>this.cfbH(i,s,h)},["EPS"]:{c:()=>this.epsdC(),h:(i,s,h)=>this.epsdH(i,s,h)},["EFM"]:{c:()=>this.efmC(),h:(i,s,h)=>this.efmH(i,s,h)},["FBC"]:{c:()=>this.fbcC(),h:(i,s,h)=>this.fbcH(i,s,h)},["RTS"]:{c:()=>this.rzstC(),h:(i,s,h)=>this.rzstH(i,s,h)},["RSE"]:{c:()=>this.rselC(),h:(i,s,h)=>this.rselH(i,s,h)},["SVH"]:{c:()=>this.strhyC(),h:(i,s,h)=>this.strhyH(i,s,h)},["URB"]:{c:()=>this.uridC(),h:(i,s,h)=>this.uridH(i,s,h)},["VES"]:{c:()=>this.veskC(),h:(i,s,h)=>this.veskH(i,s,h)}}[t]}cardConstruct(t){this.hints=["OP"],this.lookup(t).c()}creatHit(t,e,i,s){this.lookup(t).h(e,i,s)}bothTurns=!0;constructor(t){super(t,!1),this.cardConstruct(this.cardCode())}jr8(t){const e=O.toDamage(t.event);e.srcCreat&&(this.bothTurns||e.srcCreat.owner===S.getActiveB())&&this.creatHit(this.cardCode(),t,e,e.srcCreat),D.triggerDone()}ashyC(){this.faction="T",this.rarity="C",this.tribe.push("FR","AS");const t=this.boof124;this.text=`When ${this.name} ${m.dbdtap()}, it gets ${m.jr9(t,t)}.`}ashyH(t,e,i){const s=this.boof124;i.buff(s,s)}ashbC(){this.name="Ashurian Brawler",this.jr1=this.boof7911,this.jr2=this.jr1,this.ashyC()}ashmC(){this.name="Ashurian Mystic",this.jr1=this.boof3610,this.jr2=this.boof5812,this.initAggro=!0,this.ashyC()}cfbC(){this.faction="T",this.rarity="H",this.name="Cinderfist Brawler",this.jr1=this.boof71014,this.jr2=this.boof357,this.tribe.push("FR","AS"),this.text=`When ${this.name} ${m.dbdtap()}, deal that much damage to that player again.`}cfbH(t,e,i){S.ddf3(!i.owner,e.dmg,i.code)}epsdC(){this.faction="A",this.rarity="T",this.name="Epoch Soldier",this.minLevel=this.level,this.maxLevel=this.level,this.jr1=this.boof4710,this.jr2=this.jr1,this.tribe.push("HM"),this.bothTurns=!1,this.text=`When ${this.name} ${m.dbdtap()} on your turn, draw a card at the end of the turn.`}epsdH(t,e,i){const s=p.trigger("TE","EPH"+this.level);s.customCode=M.genId(),S.toPlayer(t.ownerPlayerA).triggers.push(s)}efmC(){this.faction="T",this.rarity="L",this.name="Everflame Mystic",this.jr1=this.boof5813,this.jr2=this.jr1+1,this.tribe.push("FR","AS"),this.text=`When ${this.name} ${m.dbdtap()} on your turn, you may play ${this.lValS(["one","two","three"])} spells this turn.`}efmH(t,e,i){if(S.getActiveB()===i.owner)for(let s=0;s<this.level;s++){const h=x.freeCard(this.code);h.condition.card="S"}}fbcC(){this.faction="T",this.rarity="L",this.name="Flameblade Champion",this.jr1=this.boof4712,this.jr2=this.boof5916,this.tribe.push("FR","EL"),this.text=`When ${this.name} ${m.dbdtap()}, deal that much damage to each enemy creature.`}fbcH(t,e,i){const s=M.tick();f.qPlayerCreats(!i.owner).forEach(h=>h.hurtDirect(e.dmg,this.code,s))}rzstC(){this.faction="T",this.rarity="C",this.name="Razortooth Stalker",this.jr1=this.boof4812,this.jr2=this.jr1+1,this.initMobile=1,this.tribe.push("DN");const t=this.boof235;this.text=`When ${this.name} ${m.dbdtap()}, it gets ${m.jr9(t,t)}.`}rzstH(t,e,i){const s=this.boof235;i.buff(s,s)}rselC(){this.faction="T",this.rarity="H",this.name="Rumblestone Elemental",this.jr1=this.boof246,this.jr2=this.level,this.initAggro=!0,this.tribe.push("ER","EL"),this.text=`When ${this.name} ${m.dbdtap()}, deal that much damage to itself as well.~Assault: Spawn a copy of ${this.name}. Then repeat this for each copy.`}rselH(t,e,i){i.hurtDirect(e.dmg,this.code)}strhyC(){this.faction="U",this.rarity="C",this.name="Stranglevine Hydra",this.jr1=this.boof5815,this.jr2=this.jr1+1,this.tribe.push("HY"),this.text=`When ${this.name} ${m.dbdtap()}, it gets Regenerate ${this.level}.`}strhyH(t,e,i){i.addRegen(this.level)}uridC(){this.faction="U",this.rarity="L",this.name="Uterradon Ridgeback",this.jr1=this.boof71117,this.jr2=this.boof4713,this.initBT=!0,this.tribe.push("DN"),this.bothTurns=!1;const t=this.boof124;this.text=`When ${this.name} ${m.dbdtap()} on your turn, each friendly creature gets ${m.jr9(t,t,this.level===3)}${this.level===3?", and Breakthrough":""}.`}uridH(t,e,i){const s=this.boof124,h=this.level===3;f.ddf1().forEach(d=>{d.buff(s,s),h&&(d.breakthrough=!0)})}veskC(){this.faction="N",this.rarity="L",this.name="Vyric Ebonskull",this.jr1=this.boof3713,this.jr2=this.boof71117,this.tribe.push("VP"),this.text=`When Vyric ${m.dbdtap()}, destroy an enemy ${m.levelGateText(this.level,!0)} creature at random.${this.level===3?" Then Spawn a copy of that creature.":""}`}veskH(t,e,i){const s=p.crTarg();s.player=S.toTarget(e.hurtPlayer),s.level=w.ddf2(this.level);const h=f.creatByTarget(s);if(h.length>0){const d=M.tick(),g=h[T.randInt(0,h.length)];$.destroy(g,this.code,d),this.level===3&&f.birthCreature(g.code,"S",i.owner,void 0,d)}}}class De extends R{lookup(t){return{["CHR"]:{c:()=>this.crgC(),d:(i,s,h)=>this.crgD(i,s,h)},["DZD"]:{c:()=>this.dozC(),d:(i,s,h)=>this.dozD(i,s,h)},["IMD"]:{c:()=>this.eddieC(),d:(i,s,h)=>this.eddieD(i,s,h)},["TDS"]:{c:()=>this.tsrC(),d:(i,s,h)=>this.tsrD(i,s,h)}}[t]}constructor(t){super(t),this.lookup(this.cardCode()).c()}cares=!0;cardDamaged(t,e){const i=O.toDamage(e.event);this.lookup(t).d(e,i.hurtCreat,i)}image(t){return this.cardCode()==="DZD"?this.fixedImage(t):super.image(t)}jr3(t,e){const i=super.jr3(t,e);return this.cares&&i.jr4("DM",this.code),i}ddf8(t){if(t.trigger.type==="DM"){const e=t.event;return e.isCreatTarg&&e.target===t.creatId}return!1}jr8(t){this.cardDamaged(this.cardCode(),t),D.triggerDone()}crgC(){this.faction="U",this.rarity="L",this.name="Chrogias",this.jr1=this.lValN([1,0,40]),this.jr2=this.lValN([1,15,40]),this.tribe.push("PL"),this.level===1?(this.hints=["LV","RT"],this.bonus={play:1},this.cares=!1):this.level===2?(this.initRegen=2,this.initDefend=!0,this.bonus={play:1}):this.level===3&&(this.initBT=!0,this.initRegen=5),this.level>1&&(this.hints=["MC"],this.text="When Chrogias is dealt damage, you gain that much health.")}crgD(t,e,i){S.healPlayer(t.ownerPlayerA,i.dmg)}dozC(){this.faction="U",this.rarity="L",this.name="Dozer, the Dormant",this.jr1=0,this.jr2=this.level*3+6,this.tribe.push("BR"),this.initDefend=!0,this.hints=["MC"],this.text=`When ${this.name} is dealt damage and survives, replace it with a ${this.jr2}/${this.jr2} Dozer, the Awakened`}dozD(t,e,i){if(e.health>0&&e.status==="A"){const s=f.birthCreature(`${"DZA"}${this.level}`,"R",e.owner,e.lane);s&&s.setHealth(e.health)}}eddieC(){this.faction="A",this.rarity="L",this.name="Iron Maiden",this.jr1=this.lValN([1,3,30]),this.jr2=this.jr1,this.tribe.push("RB"),this.consistent=this.level>1,this.level===3?(this.initBT=!0,this.hints=["MC"],this.text="When Iron Maiden is dealt damage, deal that much damage to the enemy player."):(this.cares=!1,this.hints=["LV","RT"],this.bonus={play:1})}eddieD(t,e,i){S.ddf3(!t.ownerPlayerA,i.dmg,this.code)}tsrC(){this.faction="U",this.rarity="L",this.name="Thundersaur",this.jr1=0,this.jr2=this.level*12,this.tribe.push("DN"),this.initBT=!0,this.hints=["MC"],this.text=`When ${this.name} is dealt damage, it gets +1 attack for each damage dealt.`}tsrD(t,e,i){e.buff(i.dmg,0)}}class Rt extends R{lookup(t){return{["DFB"]:{c:()=>this.dfbC(),d:(i,s)=>this.dfbD(i,s)},["GGD"]:{c:()=>this.ggdC(),d:(i,s)=>this.ggdD(i,s)},["GGR"]:{c:()=>this.ggdrC(),d:(i,s)=>this.ggdrD(i,s)},["GGP"]:{c:()=>this.ggpC(),d:(i,s)=>this.ggpD(i,s)},["NGT"]:{c:()=>this.ngauntC(),d:(i,s)=>this.ngauntD(i,s)},["SRH"]:{c:()=>this.sharvC(),d:(i,s)=>this.sharvD(i,s)},["YNS"]:{c:()=>this.yuruC(),d:(i,s)=>this.yuruD(i,s)}}[t]}creatDied(t,e){this.lookup(t).d(e,O.toCreature(e.event))}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,e){const i=super.jr3(t,e);return i.jr4("DS",this.code),i}ddf8(t){return t.trigger.type==="DS"}jr8(t){this.creatDied(this.cardCode(),t),D.triggerDone()}dfbC(){this.faction="N",this.rarity="R",this.name="Dr. Frankenbaum",this.jr1=this.boof6914,this.jr2=this.jr1-1,this.tribe.push("AB");const t=this.boof234;this.text=`When a friendly Abomination is destroyed, deal ${t} damage to the enemy player.`,this.bonus={exist:this.ddp9(0,0,0,t*2)}}dfbD(t,e){const i=f.jr5(t.creatId),s=e.creature;(i.id===s.id||s.owner===i.owner&&s.isTribe("AB")&&Rt.itDiedFirst(s.id,i.id))&&S.ddf3(!i.owner,this.boof234,this.code)}ggdC(){this.faction="N",this.rarity="L",this.name="Grimgaunt Devourer",this.jr1=this.boof579,this.jr2=this.jr1-2,this.tribe.push("GG"),this.hints=["OL"],this.text=`When a creature is destroyed, ${this.name} gets ${m.jr9(this.level,this.level)}.`,this.bonus={exist:this.ddp9(0,this.level*2,this.level,0)*2}}ggdD(t,e){f.jr5(t.creatId).buff(this.level,this.level)}get doomb(){return this.lValN([1,1,2])}ggdrC(){this.faction="N",this.rarity="L",this.name="Grimgaunt Doomrider",this.jr1=this.boof4712,this.jr2=this.jr1+2,this.tribe.push("GG");const t=this.doomb;this.text=`When a friendly creature is destroyed, ${this.name} moves to that creatures lane and gets ${m.jr9(t,t)}. Then give the opposing creature ${m.jr9(-t,-t)}.`,this.bonus={exist:this.ddp9(0,t*4,t*2,0)}}ggdrD(t,e){const i=f.jr5(t.creatId),s=e.creature;if(s.owner===i.owner&&i.id!==s.id&&Rt.itDiedFirst(s.id,i.id)&&!f.searchByLane(s.lane,s.owner)){const d=this.doomb;i.move(s.lane),i.buff(d,d);const g=i.opposed;g&&g.buff(-d,-d)}}ggpC(){this.faction="N",this.rarity="H",this.name="Grimgaunt Predator",this.jr1=this.boof5914,this.jr2=this.jr1,this.initMobile=1,this.tribe.push("GG"),this.hints=["OP"];const t=this.boof246;this.text=`When the opposing creature is destroyed, ${this.name} gets ${m.jr9(t,t)}.`,this.bonus={exist:this.ddp9(0,2*t,t,0)}}ggpD(t,e){const i=f.jr5(t.creatId),s=f.oppositeLane(i.lane);if(e.creature.owner!==i.owner&&e.creature.lane===s){const h=this.boof246;i.buff(h,h)}}ngauntC(){this.faction="N",this.rarity="R",this.name="Nightgaunt",this.jr1=this.boof4815,this.jr2=this.jr1+1,this.tribe.push("GG"),this.text=`When a creature is destroyed, ${this.name} gets Regenerate 1.`,this.bonus={exist:this.ddp9(0,4,0,0)}}ngauntD(t,e){f.jr5(t.creatId).addRegen(1)}sharvC(){this.faction="N",this.rarity="C",this.name="Sorrow Harvester",this.jr1=this.boof4814,this.jr2=this.jr1+2,this.tribe.push("AB"),this.text="When a friendly Abomination is destroyed on your turn, draw a card.",this.bonus={exist:.25}}sharvD(t,e){const i=e.creature;i.owner===t.ownerPlayerA&&i.isTribe("AB")&&S.getActiveB()===t.ownerPlayerA&&Rt.itDiedFirst(i.id,t.creatId)&&S.drawCard(t.ownerPlayerA,1)}yuruC(){this.faction="N",this.rarity="L",this.name="Yuru, the Necrosage",this.jr1=3,this.jr2=this.jr1,this.initDefend=!0,this.tribe.push("HM");const t=this.boof5814;this.text=`When an adjacent non-Spirit creature is destroyed, put a ${t}/${t} Spirit into that lane.`,this.bonus={exist:this.ddp9(1,t*2,t,0)}}yuruD(t,e){const i=f.jr5(t.creatId),s=e.creature;s.owner===i.owner&&i.adjacent.includes(s.lane)&&!s.isTribe("ST")&&Rt.itDiedFirst(s.id,i.id)&&f.birthCreature(`${"XYR"}${this.level}`,"P",i.owner,s.lane)}static itDiedFirst(t,e){if(t===e)return!0;let i=!1;const s=$.findDeathTime(e);if(T.isUn(s))i=!0;else{const h=$.findDeathTime(t);(T.isUn(h)||h<=s)&&(i=!0)}return i}}class X extends R{lookup(t){return{["AGK"]:{c:()=>this.agknitC(),f:i=>this.agknitF(i)},["AFR"]:{c:()=>this.afsC(),f:i=>this.afsF(i)},["BTR"]:{c:()=>this.bwtC(),f:i=>this.bwtF(i)},["BSS"]:{c:()=>this.bssC(),f:i=>this.bssF(i)},["BZD"]:{c:()=>this.bzdrC(),f:i=>this.bzdrF(i)},["BFM"]:{c:()=>this.bfmC(),f:i=>this.bfmF(i)},["CTI"]:{c:()=>this.charnC(),f:i=>this.charnF(i)},["CHH"]:{c:()=>this.chihC(),f:i=>this.chihF(i)},["CSW"]:{c:()=>this.chickenC(),f:i=>this.chickenF(i)},["DFR"]:{c:()=>this.dfrC(),f:i=>this.dfrF(i)},["DBA"]:{c:()=>this.dbaC(),f:i=>this.dbaF(i)},["DBN"]:{c:()=>this.drbC(),f:i=>this.drbF(i)},["DDD"]:{c:()=>this.dddC(),f:i=>this.dddF(i)},["EWT"]:{c:()=>this.espwrC(),f:i=>this.espwrF(i)},["FWT"]:{c:()=>this.fwtC(),f:i=>this.fwtF(i)},["GSW"]:{c:()=>this.gwurmC(),f:i=>this.gwurmF(i)},["GSS"]:{c:()=>this.gsC(),f:i=>this.gsF(i)},["IMA"]:{c:()=>this.iracoC(),f:i=>this.iracoF(i)},["LGT"]:{c:()=>this.legtitC(),f:i=>this.legtitF(i)},["LBD"]:{c:()=>this.lbdC(),f:i=>this.lbdF(i)},["LMV"]:{c:()=>this.lyrC(),f:i=>this.lyrF(i)},["MOE"]:{c:()=>this.moeC(),f:i=>this.moeF(i)},["MMA"]:{c:()=>this.mmaC(),f:i=>this.mmaF(i)},["NSY"]:{c:()=>this.nysymC(),f:i=>this.nysymF(i)},["OXM"]:{c:()=>this.onxmarC(),f:i=>this.onxmarF(i)},["OFM"]:{c:()=>this.ofmC(),f:i=>this.ofmF(i)},["OPK"]:{c:()=>this.orpC(),f:i=>this.orpF(i)},["PHM"]:{c:()=>this.phmC(),f:i=>this.phmF(i)},["PSM"]:{c:()=>this.palsC(),f:i=>this.palsF(i)},["SMD"]:{c:()=>this.scorchC(),f:i=>this.scorchF(i)},["SOC"]:{c:()=>this.scythC(),f:i=>this.scythF(i)},["SDN"]:{c:()=>this.souldrC(),f:i=>this.souldrF(i)},["SGG"]:{c:()=>this.ssggC(),f:i=>this.ssggF(i)},["SBD"]:{c:()=>this.sbdC(),f:i=>this.sbdF(i)},["SSK"]:{c:()=>this.sssC(),f:i=>this.sssF(i)},["SYL"]:{c:()=>this.lotusC(),f:i=>this.lotusF(i)},["TGI"]:{c:()=>this.tgiC(),f:i=>this.tgiF(i)},["UGL"]:{c:()=>this.umglidC(),f:i=>this.umglidF(i)},["UWL"]:{c:()=>this.uwarC(),f:i=>this.uwarF(i)},["UWS"]:{c:()=>this.ustokeC(),f:i=>this.ustokeF(i)},["UIW"]:{c:()=>this.uiwC(),f:i=>this.uiwF(i)},["UTM"]:{c:()=>this.umaulC(),f:i=>this.umaulF(i)},["VND"]:{c:()=>this.vdrkC(),f:i=>this.vdrkF(i)},["VNS"]:{c:()=>this.vnsC(),f:i=>this.vnsF(i)},["WWP"]:{c:()=>this.wwpC(),f:i=>this.wwpF(i)},["WFB"]:{c:()=>this.wfbC(),f:i=>this.wfbF(i)}}[t]}cardForge(t,e){this.lookup(t).f(e)}ftext="";forges=!0;flanks=!1;allied="X";constructor(t){super(t),this.lookup(this.cardCode()).c();let e="";this.flanks&&(e="Flank"),this.forges&&(e?e="Forge/"+e:e=m.forglied(this.allied)),e&&(this.text=e+": "+this.ftext),this.ftext=""}jr3(t,e){const i=super.jr3(t,e);return this.forges&&i.jr4("FR",this.code),this.flanks&&i.jr4("FK",this.code),i}jr8(t){this.cardForge(this.cardCode(),t),D.triggerDone()}agknitC(){this.faction="A",this.rarity="L",this.name="Aegis Knight",this.jr1=this.boof5814,this.jr2=this.jr1,this.tribe.push("HM"),this.initArmor=this.lValN([1,2,5]),this.ftext="Each friendly creature deals damage equal to its Armor to the opposing creature"}agknitF(t){const e=p.crFriendTarg();e.hasArmor=!0;const i=M.tick();f.creatByTarget(e).forEach(s=>{s.opposed&&s.opposed.hurtDirect(s.armor,s.code,i)})}afsC(){this.faction="T",this.rarity="H",this.name="Ashurian Flamesculptor",this.jr1=this.boof5915,this.jr2=this.boof3610,this.tribe.push("FR","AS"),this.forges=this.level>1,this.consistent=this.forges,this.ftext=`You may play an additional ${m.levelGateText(this.level-1)} Tempys spell this turn.`,this.forges&&this.addSp("C",0)}afsF(t){const e=x.freeCard(this.code);e.condition.card="S",e.condition.level=w.ddf2(this.level-1),e.condition.faction="T"}bwtC(){if(this.faction="U",this.rarity="H",this.name="Bramblewood Tracker",this.jr1=this.boof3712,this.jr2=this.jr1+3,this.tribe.push("HM"),this.forges=this.level>1,this.forges){const t=this.level-1;this.ftext=`You may play an additional ${m.levelGateText(t)} Uterra creature this turn.`,this.consistent=!0,this.addSp("C",0)}else this.hints=["LV"]}bwtF(t){const e=x.freeCard(this.code);e.condition.card="C",e.condition.faction="U",e.condition.level=w.ddf2(this.level-1)}bssC(){this.faction="A",this.rarity="L",this.name="Brightsteel Sentinal",this.jr2=this.boof51015,this.jr1=this.jr2-1,this.tribe.push("RB"),this.addSp("M",this.jr2),this.ftext=`Each friendly Robot gets Armor ${this.jr2} this turn.`}bssF(t){const e=this.boof51015,i=p.crFriendTarg();i.tribe="RB",i.canArmor=!0,f.creatByTarget(i).forEach(h=>{const d=p.mod("AR",e,t.creatId);d.expiry="ET",h.addMod(d)})}bzdrC(){this.faction="N",this.rarity="R",this.name="Byzerak Drake",this.jr1=this.boof4814,this.jr2=this.jr1+2,this.initRegen=this.level,this.allied="T",this.tribe.push("DG"),this.addSp("R",this.level),this.ftext=`Mobility ${this.level}.`}bzdrF(t){x.allied(this.allied)&&f.jr5(t.creatId).addMobility(this.level)}bfmC(){this.faction="N",this.rarity="H",this.name="Byzerak Frostmaiden",this.jr1=this.boof135,this.jr2=this.boof91420,this.tribe.push("HM"),this.flanks=!0;const t=this.boof246;this.ftext=`If ${this.name} is opposed, the opposing creature gets ${m.jr9(-1*t,0)} and this gets ${m.jr9(t,0)}.~Allied Tempys: Mobility ${this.level}.`;const e=this.ddp9(0,t*2,t*2,0);this.bonus={play:e,exist:e/2}}bfmF(t){const i=O.toEnterField(t.event).creature;t.trigger.type==="FR"&&x.allied("T")&&i.addMobility(this.level);const s=i.opposed;if(s){const h=this.boof246;s.buff(-1*h,0),i.buff(h,0)}}charnC(){this.faction="N",this.rarity="C",this.name="Charnel Titan",this.jr1=this.boof359,this.jr2=this.boof5814,this.tribe.push("AB");const t=this.boof357;this.ftext=`If there is an enemy creature with ${t} or less attack, ${this.name} gets ${m.jr9(t,t)}.`}charnF(t){const e=this.boof357,i=p.crEnemyTarg();i.maxAttack=e,f.creatByTarget(i).length>0&&f.jr5(t.creatId).buff(e,e)}chihC(){this.faction="U",this.rarity="C",this.name="Chistlehearth Hunter",this.jr1=this.lValN([2,6,11]),this.jr2=this.boof81217,this.tribe.push("HM"),this.ftext=`${this.name} gets ${m.jr9(1,0)} for each other friendly creature.`}chihF(t){const e=f.ddf1().length;e>1&&f.jr5(t.creatId).buff(e-1,0)}chickenC(){this.faction="T",this.rarity="L",this.name="Cindersmoke Wyvern",this.jr1=this.boof3610,this.jr2=this.lValN([7,12,17]),this.tribe.push("DG"),this.initMobile=this.boof124,this.forges=!1,this.flanks=!0,this.ftext="Deal damage equal to its attack to the opposing creature. If there is no opposing creature, deal that damage to the enemy player instead.",this.bonus={exist:this.ddp9(0,this.jr1,this.jr1,0)}}chickenF(t){const e=O.toEnterField(t.event),i=e.creature.attack,s=e.creature.opposed;s?s.hurtDirect(i,this.code):S.ddf3(!t.ownerPlayerA,i,this.code)}dfrC(){this.faction="N",this.rarity="H",this.name="Darkfrost Reaper",this.jr1=this.boof6916,this.jr2=this.boof3713,this.tribe.push("SK"),this.ftext="Destroy each creature with 1 or less attack."}dfrF(t){const e=p.crTarg();e.maxAttack=1;const i=f.creatByTarget(e),s=M.tick();i.forEach(h=>{$.destroy(h,this.code,s)})}dbaC(){this.faction="U",this.rarity="H",this.name="Deepbranch Ancient",this.jr1=this.boof4812,this.jr2=this.jr1,this.tribe.push("HY"),this.ftext=`If there is a friendly creature in each lane, ${this.name} gets ${m.jr9(this.jr1,this.jr2)}.`}dbaF(t){f.ddf1().length===5&&f.jr5(t.creatId).buff(this.jr1,this.jr2)}drbC(){this.faction="N",this.rarity="C",this.name="Dirge Banshee",this.jr1=this.boof248,this.jr2=this.boof61016,this.tribe.push("ST"),this.hints=["OP"],this.flanks=!0;const t=this.boof246;this.ftext=`If ${this.name} is opposed, the opposing creature gets ${m.jr9(-t,0)} and this gets ${m.jr9(t,0)}.`}drbF(t){const e=O.toEnterField(t.event),i=e.creature.opposed;if(i){const s=this.boof246;i.buff(-s,0),e.creature.buff(s,0)}}dddC(){this.faction="N",this.rarity="L",this.name="Doomwing, Dire Drake",this.jr1=this.boof61018,this.jr2=this.lValN([2,6,10]),this.initMobile=this.level,this.tribe.push("DG"),this.forges=!1,this.flanks=!0,this.ftext=`Destroy the opposing ${m.levelGateText(this.level,!0)}creature.`}dddF(t){const i=O.toEnterField(t.event).creature.opposed;i&&w.levelTestCommon(i.level,this.level)&&$.destroy(i,this.code)}espwrC(){this.faction="U",this.rarity="R",this.name="Esperian Wartusk",this.jr1=this.boof5916,this.jr2=this.jr1-1,this.initBT=!0,this.allied="A",this.tribe.push("TK");const t=this.boof124;this.ftext=`Armor ${t}.`}espwrF(t){x.allied(this.allied)&&f.jr5(t.creatId).addArmor(this.boof124)}fwtC(){this.faction="U",this.rarity="H",this.name="Frostwild Tracker",this.jr1=this.boof4712,this.jr2=this.boof248,this.tribe.push("TG"),this.forges=this.level>1;const t=this.level-1;this.ftext=`You may play an additional ${m.levelGateText(t)} creature this turn.`,this.level>1||(this.hints=["LV"])}fwtF(t){const e=x.freeCard(this.code);e.condition.card="C",e.condition.level=w.ddf2(this.level-1)}gwurmC(){this.faction="N",this.rarity="C",this.name="Gloomspire Wurm",this.jr1=this.boof4813,this.jr2=this.jr1,this.tribe.push("WR"),this.ftext=`If there are no enemy creatures, ${this.name} gets ${m.jr9(4,4)}.`}gwurmF(t){f.qEnemyCreats().length===0&&f.jr5(t.creatId).buff(4,4)}gsC(){this.faction="U",this.rarity="C",this.name="Glowstride Stag",this.jr1=this.boof5812,this.jr2=this.jr1+this.level,this.tribe.push("ST");const t=this.boof51015;this.ftext=`You gain ${t} health.`}gsF(t){const e=this.boof51015;S.healPlayer(t.ownerPlayerA,e)}iracoC(){this.faction="A",this.rarity="L",this.name="Ironmind Acolyte",this.jr1=this.boof61015,this.jr2=this.jr1-2,this.tribe.push("GN"),this.ftext="If you have five or more cards in your hand, you may play an additional card this turn."}iracoF(t){S.toPlayer(t.ownerPlayerA).hand.length>4&&(x.regularPlays+=1)}legtitC(){this.faction="N",this.rarity="R",this.name="Legion Titan",this.jr1=this.boof4812,this.jr2=this.jr1,this.tribe.push("ZB"),this.ftext=`${this.name} gets ${m.jr9(this.level,this.level)} for each enemy creature with ${this.boof357} or less attack.`}legtitF(t){const e=p.crEnemyTarg();e.maxAttack=this.boof357;const i=f.creatByTarget(e);if(i.length>0){const s=this.level*i.length;f.jr5(t.creatId).buff(s,s)}}lbdC(){this.faction="U",this.rarity="H",this.name="Lifeblood Dryad",this.jr1=this.lValN([4,7,9]),this.jr2=this.jr1,this.tribe.push("DY");const t=this.boof236;this.ftext=`If there is a friendly creature in each lane, each other friendly creature gets ${m.jr9(t,t)}`}lbdF(t){const e=f.creatByTarget(p.crFriendNotMeTarg(t.creatId));if(e.length===4){const i=this.boof236;e.forEach(s=>s.buff(i,i))}}lyrC(){this.faction="N",this.rarity="L",this.name="Lyria, Muse of Varna",this.jr1=this.boof5815,this.jr2=this.boof4714,this.tribe.push("HM"),this.forges=this.level>1,this.ftext=this.level===2?"Spawn a random creature that was destroyed this game.":"Put a random creature that was destroyed this game into each of your available lanes.",this.forges||(this.hints=["LV"])}lyrF(t){if(this.level===2){const e=$.gravedigger();e&&f.birthCreature(e,"S",t.ownerPlayerA)}else if(this.level===3){const e=f.emptyLanes(t.ownerPlayerA),i=e.map(s=>$.gravedigger());if(e.length>0&&i[0]){const s=M.tick();e.forEach((h,d)=>{f.birthCreature(i[d],"P",t.ownerPlayerA,h,s)})}}}moeC(){this.faction="T",this.rarity="H",this.name="Master of Elements",this.jr1=this.boof5917,this.jr2=this.jr1,this.tribe.push("HM"),this.forges=this.level>1,this.ftext=`You may play an additional ${m.levelGateText(this.level-1)} spell this turn.`}moeF(t){const e=x.freeCard(this.code);e.condition.card="S",e.condition.level=w.ddf2(this.level-1)}mmaC(){this.faction="A",this.rarity="C",this.name="Metamind Adept",this.jr1=this.boof5915,this.jr2=this.boof4813,this.tribe.push("MM");const t=this.level===1?"":"s";this.ftext=`Draw ${this.level} card${t}.`}mmaF(t){S.drawCard(t.ownerPlayerA,this.level)}nysymC(){this.faction="N",this.rarity="C",this.name="Nyrali Symbiote",this.jr1=this.boof51015,this.jr2=this.jr1,this.tribe.push("OZ"),this.hints=["OP"];const t=this.boof246;this.ftext=`If ${this.name} is opposed, it gets Regenerate ${t}.`}nysymF(t){const e=O.toEnterField(t.event);e.creature.opposed&&e.creature.addRegen(this.boof246)}ofmC(){this.faction="A",this.rarity="R",this.name="Oreian Fieldmarshal",this.jr1=this.boof5914,this.jr2=this.jr1-2,this.tribe.push("HM");const t=this.boof135;this.ftext=`Each other friendly creature gets ${m.jr9(t,0)}.`}ofmF(t){const e=this.boof135;f.creatByTarget(p.crFriendNotMeTarg(t.creatId)).forEach(s=>{s.buff(e,0)})}orpC(){this.faction="A",this.rarity="R",this.name="Oreian Peacekeeper",this.jr1=this.boof4816,this.jr2=this.boof248,this.tribe.push("RB"),this.hints=["OP"],this.ftext=`${this.name} gets Armor ${this.jr1} this turn.`}orpF(t){const e=f.jr5(t.creatId),i=p.mod("AR",this.jr1,t.creatId);i.expiry="ET",e.addMod(i)}onxmarC(){this.faction="A",this.rarity="R",this.name="Onyxium Marauder",this.jr1=this.boof4714,this.jr2=this.lValN([6,9,17]),this.initArmor=this.level,this.allied="N",this.tribe.push("HM"),this.ftext=`Regenerate ${this.level}.`}onxmarF(t){x.allied(this.allied)&&f.jr5(t.creatId).addRegen(this.level)}phmC(){this.faction="A",this.rarity="R",this.name="Palladium Hindermind",this.jr1=this.boof2612,this.jr2=this.boof61016,this.tribe.push("HM"),this.ftext=`Each enemy creature gets ${m.jr9(this.boof123n,0)}.`}phmF(t){const e=this.boof123n;f.qEnemyCreats().forEach(i=>{i.buff(e,0)})}palsC(){this.faction="A",this.rarity="L",this.name="Palladium Simulacrum",this.jr1=this.boof4816,this.jr2=this.boof248,this.initMobile=this.level-1,this.tribe.push("SS"),this.flanks=!0,this.ftext=`If ${this.name} is in the center lane, Spawn a copy.`}palsF(t){O.toEnterField(t.event).creature.lane===3&&f.birthCreature(this.code,"S",t.ownerPlayerA)}scorchC(){this.faction="T",this.rarity="L",this.name="Scorchmane Dragon",this.jr1=this.lValN([0,12,24]),this.jr2=this.boof61224,this.tribe.push("DG"),this.initDefend=this.level===1,this.initMobile=this.level-1,this.forges=this.level>1,this.ftext="Deal 5 damage to "+(this.level===2?"the opposing creature.":"each enemy creature and player."),this.level===1&&(this.hints=["LV"])}scorchF(t){const e=O.toEnterField(t.event),i=!t.ownerPlayerA;if(this.level===2){const s=e.creature.opposed;s&&s.hurtDirect(5,this.code)}else if(this.level===3){const s=M.tick();f.qPlayerCreats(i).forEach(h=>h.hurtDirect(5,this.code,s)),S.ddf3(i,5,this.code)}}scythC(){this.faction="N",this.rarity="L",this.name="Chiron, Herald of Torment",this.jr1=12,this.jr2=6,this.tribe.push("DM"),this.ftext=`Each enemy creature gets ${m.jr9(-6,0)} and ${this.name} gets ${m.jr9(6,0)} for each enemy creature.`}scythF(t){const e=f.qEnemyCreats();e.forEach(i=>{i.buff(-6,0)}),e.length>0&&f.jr5(t.creatId).buff(6*e.length,0)}souldrC(){this.faction="N",this.rarity="L",this.name="Soul Drinker",this.jr1=1,this.jr2=this.boof4814,this.initMobile=this.level===3?1:0,this.tribe.push("VP"),this.hints=["OP"],this.flanks=this.level===3,this.ftext=`The opposing creature's attack gets reduced to 0 and ${this.name} gains that much attack.`}souldrF(t){const e=O.toEnterField(t.event),i=e.creature.opposed;if(i){const s=i.attack;e.creature.buff(s,0),i.buff(-1*s,0)}}ssggC(){this.faction="N",this.rarity="H",this.name="Soulscourge Grimgaunt",this.jr1=this.level+1,this.jr2=this.jr1,this.tribe.push("GG"),this.ftext=`${this.name} gets ${m.jr9(this.jr1,this.jr2)} for each creature that was destroyed this turn.`}ssggF(t){const e=this.jr1*(x.deathsA+x.deathsB);e>0&&f.jr5(t.creatId).buff(e,e)}sbdC(){this.faction="U",this.rarity="C",this.name="Spiritbloom Dryad",this.jr1=this.boof6812,this.jr2=this.jr1+this.level,this.tribe.push("DY"),this.ftext=`Each player gains ${this.boof468} health.`}sbdF(t){const e=this.boof468;S.healPlayer(!0,e),S.healPlayer(!1,e)}sssC(){this.faction="A",this.rarity="C",this.name="Steelskin Spelunker",this.jr1=this.boof5814,this.jr2=this.boof61018,this.tribe.push("HM"),this.ftext=`If there is another friendly creature in the center lane, that creature gets Armor ${this.boof124}`}sssF(t){const e=f.searchByLane(3,t.ownerPlayerA);e&&e.id!==t.creatId&&!e.negateArmor&&e.addArmor(this.boof124)}lotusC(){this.faction="U",this.rarity="H",this.name="Stygian Lotus",this.jr1=this.boof468,this.jr2=this.jr1-1,this.tribe.push("PL"),this.hints=["OP"],this.ftext=`If ${this.name} is opposed, spawn a copy of it. Then repeat this for each copy.`}lotusF(t){if(O.toEnterField(t.event).creature.opposed){let i=!0;for(;i;){const s=f.emptyLanes(t.ownerPlayerA),h=s.length;if(h===0)i=!1;else{const d=s[T.randInt(0,h)];f.birthCreature(this.code,"P",t.ownerPlayerA,d).opposed||(i=!1)}}}}tgiC(){this.faction="T",this.rarity="R",this.name="Thundergale Invoker",this.jr1=this.boof3711,this.jr2=this.jr1,this.tribe.push("WN","GT"),this.ftext=`Each creature adjacent to ${this.name} moves one lane away if possible.`}tgiF(t){const e=f.jr5(t.creatId),i=e.lane,s=e.owner;if(i>2){const h=f.searchByLane(i-1,s);h&&(f.searchByLane(i-2,s)||h.move(i-2))}if(i<4){const h=f.searchByLane(i+1,s);h&&(f.searchByLane(i+2,s)||h.move(i+2))}}umglidC(){this.faction="T",this.rarity="R",this.name="Umbruk Glider",this.jr1=this.boof71117,this.jr2=this.jr1-4,this.initMobile=this.level,this.allied="U",this.tribe.push("DN"),this.ftext="Breakthrough."}umglidF(t){if(x.allied(this.allied)){const e=f.jr5(t.creatId);e.breakthrough=!0}}uwarC(){this.faction="T",this.rarity="H",this.name="Uranti Warlord",this.jr1=this.boof3713,this.jr2=this.boof71117,this.tribe.push("FR","YT"),this.hints=["OP"],this.ftext=`Each friendly Yeti deals ${this.jr1} damage to the opposing creature.`}uwarF(t){const e=p.crFriendTarg();e.tribe="YT";const i=f.creatByTarget(e),s=M.tick();i.forEach(h=>{const d=h.opposed;d&&d.hurtDirect(this.jr1,h.code,s)})}ustokeC(){this.faction="T",this.rarity="R",this.name="Uranti Warstoker",this.jr1=this.boof6812,this.jr2=this.jr1-1,this.tribe.push("YT"),this.ftext=`Each other friendly Yeti get  ${m.jr9(this.stokeboof,0)} this turn.`}ustokeF(t){const e=p.crFriendNotMeTarg(t.creatId);e.tribe="YT";const i=f.creatByTarget(e),s=this.stokeboof;i.forEach(h=>{const d=p.mod("AT",s,t.creatId);d.expiry="ET",h.addMod(d)})}get stokeboof(){return this.lValN([3,4,6])}uiwC(){this.faction="A",this.rarity="L",this.name="Uriel Ironwing",this.jr1=this.lValN([6,8,13]),this.jr2=this.boof81117,this.initMobile=this.level,this.tribe.push("AG"),this.flanks=!0;const t=this.boof246n,e=this.level===3?" If that creature has 0 or less attack, destroy it.":"";this.ftext=`The opposing creature gets ${m.jr9(t,0)}.${e}`}uiwF(t){const s=O.toEnterField(t.event).creature.opposed;s&&(s.buff(this.boof246n,0),this.level===3&&s.attack<1&&$.destroy(s,this.code))}umaulC(){this.faction="U",this.rarity="C",this.name="Uterradon Mauler",this.jr1=this.boof4712,this.jr2=this.jr1,this.tribe.push("DN"),this.hints=["OP"];const t=this.boof246;this.ftext=`If ${this.name} is opposed, it gets ${m.jr9(t,t)}.`}umaulF(t){const e=O.toEnterField(t.event);if(e.creature.opposed){const i=this.boof246;e.creature.buff(i,i)}}vdrkC(){this.faction="U",this.rarity="R",this.name="Venomdrinker",this.jr1=this.lValN([5,9,13]),this.jr2=this.jr1,this.tribe.push("NG"),this.ftext=`${this.name} gets ${m.jr9(1,1).replaceAll("1","X")}, where X is the total amount of Poison on each enemy creature.`}vdrkF(t){const e=f.qEnemyCreats();let i=0;e.forEach(s=>{i+=s.poison}),i>0&&f.jr5(t.creatId).buff(i,i)}vnsC(){this.faction="U",this.rarity="H",this.name="Venomous Netherscale",this.jr1=this.boof4713,this.jr2=this.jr1+4,this.tribe.push("NG"),this.ftext=`Double the Poison on each enemy creature${this.level===3?" and the enemy player":""}.`}vnsF(t){const e=p.crEnemyTarg();e.hasPoison=!0,f.creatByTarget(e).forEach(s=>{s.addPoison(s.poison)})}wwpC(){this.faction="U",this.rarity="H",this.name="Weirwood Patriarch",this.jr1=this.boof5714,this.jr2=this.lValN([7,10,17]),this.tribe.push("HM");const t=this.boof235;this.ftext=`Each friendly creature with ${this.boof357} or less attack gets ${m.jr9(t,t)}.`}wwpF(t){const e=this.boof235,i=p.crFriendNotMeTarg(t.creatId);i.maxAttack=this.boof357,f.creatByTarget(i).forEach(s=>s.buff(e,e))}wfbC(){this.faction="N",this.rarity="C",this.name="Witherfrost Banshee",this.jr1=this.boof3612,this.jr2=this.jr1,this.tribe.push("ST"),this.hints=["OP"],this.flanks=!0;const t=this.boof247n;this.ftext=`The opposing creature gets ${m.jr9(t,t)}.`}wfbF(t){const i=O.toEnterField(t.event).creature.opposed;if(i){const s=this.boof247n;i.buff(s,s)}}}class Ue extends R{lookup(t){return{["RBG"]:{c:()=>this.rbgC(),g:(i,s)=>this.rbgG(i,s)},["SRV"]:{c:()=>this.sprvC(),g:(i,s)=>this.sprvG(i,s)},["TGK"]:{c:()=>this.tgkC(),g:(i,s)=>this.tgkG(i,s)}}[t]}onGain(t,e){this.lookup(t).g(e,e.event)}hPlayer=0;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,e){const i=super.jr3(t,e);return i.jr4("LG",this.code),i}ddf8(t){return t.trigger.type==="LG"&&this.validPlayer(t)}jr8(t){this.onGain(this.cardCode(),t),D.triggerDone()}validPlayer(t){if(this.hPlayer===0)return!0;const e=t.event;return this.hPlayer===1?t.ownerPlayerA===e.playerA:t.ownerPlayerA!==e.playerA}rbgC(){this.faction="U",this.rarity="H",this.name="Runebark Guardian",this.jr1=this.boof5916,this.jr2=this.jr1,this.tribe.push("HM"),this.hPlayer=1;const t=this.boof135;this.text=`When you gain health, ${this.name} gets ${m.jr9(t,t)}.`,this.bonus={exist:this.ddp9(0,t*2,t,0)*.5}}rbgG(t,e){const i=f.jr5(t.creatId),s=this.boof135;i.buff(s,s)}sprvC(){this.faction="N",this.rarity="R",this.name="Spirit Reaver",this.jr1=this.boof4814,this.jr2=this.jr1+2,this.tribe.push("DM"),this.hPlayer=-1;const t=this.boof234;this.text=`When an enemy player gains health, ${this.name} gets ${m.jr9(t,t)}.`,this.bonus={exist:this.ddp9(0,t*2,t,0)*.5}}sprvG(t,e){const i=f.jr5(t.creatId),s=this.boof234;i.buff(s,s)}tgkC(){this.faction="U",this.rarity="R",this.name="Tuskin Grovekeeper",this.jr1=this.boof6912,this.jr2=this.jr1,this.tribe.push("TK"),this.hPlayer=1,this.text=`When you gain health, Spawn a 3/3 ${Z.minionName(this.level)}.`,this.bonus={exist:this.ddp9(1,6,3,0)*.5}}tgkG(t,e){const i=this.lValS(["SXD","SPL","TTF"])+this.level;f.birthCreature(i,"S",t.ownerPlayerA)}}class xe extends R{lookup(t){return{["EWE"]:{c:()=>this.eweC(),m:(i,s)=>this.eweM(i,s)},["FFM"]:{c:()=>this.ffmC(),m:(i,s)=>this.ffmM(i,s)},["LUC"]:{c:()=>this.lugC(),m:(i,s)=>this.lugM(i,s)},["WBH"]:{c:()=>this.wbhC(),m:(i,s)=>this.wbhM(i,s)}}[t]}onMove(t,e){this.lookup(t).m(e,O.toCreature(e.event))}mPlayer=0;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,e){const i=super.jr3(t,e);return i.jr4("MV",this.code),i}ddf8(t){return t.trigger.type==="MV"&&this.validPlayer(t)}jr8(t){this.onMove(this.cardCode(),t),D.triggerDone()}validPlayer(t){if(this.mPlayer===0)return!0;const e=O.toCreature(t.event);return this.mPlayer===1?t.ownerPlayerA===e.creature.owner:t.ownerPlayerA!==e.creature.owner}eweC(){this.faction="T",this.rarity="H",this.name="Emberwind Evoker",this.jr1=this.boof4914,this.jr2=this.jr1+2,this.tribe.push("HM"),this.mPlayer=1;const t=this.boof124;this.text=`When a friendly creature moves, it gets ${m.jr9(t,t)}.`,this.bonus={exist:this.ddp9(0,t*2,t,0)}}eweM(t,e){const i=this.boof124;e.creature.buff(i,i)}ffmC(){this.faction="T",this.rarity="H",this.name="Frostfang Maiden",this.jr1=this.boof5814,this.jr2=this.jr1+this.level,this.tribe.push("HM"),this.initMobile=this.level,this.mPlayer=1;const t=this.ffbof;this.text=`When a friendly creature moves, deal ${t} to the creature opposing it.`,this.bonus={exist:this.ddp9(0,t,0,0)}}ffmM(t,e){const i=e.creature.opposed;i&&i.hurtDirect(this.ffbof,this.code)}get ffbof(){return this.level+2}lugC(){this.faction="T",this.rarity="L",this.name="Lug, Uranti Charger",this.jr1=this.boof359,this.jr2=this.lValN([9,13,19]),this.level===3&&(this.initMobile=1),this.tribe.push("YT"),this.mPlayer=1,this.text="When a friendly creature moves on your turn, Lug battles an additional time.",this.bonus={exist:this.ddp9(0,0,0,this.jr1)}}lugM(t,e){if(t.ownerPlayerA===S.getActiveB()){const i=f.jr5(t.creatId);i.extraBattles+=1}}wbhC(){this.faction="T",this.rarity="R",this.name="Windborn Hellion",this.jr1=this.boof4812,this.jr2=this.boof81217,this.tribe.push("WN","EL"),this.mPlayer=1,this.text=`When a friendly creature moves, ${this.name} gets ${m.jr9(this.level,this.level)}.`,this.bonus={exist:this.ddp9(0,this.level*2,this.level,0)}}wbhM(t,e){f.jr5(t.creatId).buff(this.level,this.level)}}class zt extends R{lookup(t){return{["ATG"]:{c:()=>this.agrdC(),t:(i,s)=>this.spellMyTurn(i,s),p:(i,s)=>this.agrdP(i,s)},["ART"]:{c:()=>this.arootC(),t:(i,s)=>this.factionSpellMyTurn(i,s,"U"),p:(i,s)=>this.arootP(i,s)},["ARB"]:{c:()=>this.arbysC(),t:(i,s)=>this.enemyPlayed(i,s),p:(i,s)=>this.arbysP(i,s)},["BLH"]:{c:()=>this.bblhC(),t:(i,s)=>this.spellMyTurn(i,s),p:(i,s)=>this.bblhP(i,s)},["CYC"]:{c:()=>this.ccC(),t:(i,s)=>this.factionSpellMyTurn(i,s,"N"),p:(i,s)=>this.ccP(i,s)},["DHW"]:{c:()=>this.dhwC(),t:(i,s)=>this.spellMyTurn(i,s),p:(i,s)=>this.dhwP(i,s)},["FBI"]:{c:()=>this.fbiC(),t:(i,s)=>this.factionSpellMyTurn(i,s,"T"),p:(i,s)=>this.fbiP(i,s)},["FLS"]:{c:()=>this.flspkC(),t:(i,s)=>this.spellMyTurn(i,s),p:(i,s)=>this.flspkP(i,s)},["IZK"]:{c:()=>this.izzyC(),t:(i,s)=>this.izzyT(i,s),p:(i,s)=>this.izzyP(i,s)},["KAW"]:{c:()=>this.kasC(),t:(i,s)=>this.spellMyTurn(i,s),p:(i,s)=>this.kasP(i,s)}}[t]}testPlay(t,e){return this.lookup(t).t(e,e.event)}actPlay(t,e){this.lookup(t).p(e,e.event)}triggerLevels=[1,2,3,4];constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,e){const i=super.jr3(t,e);return this.triggerLevels.includes(this.level)&&i.jr4("PC",this.code),i}ddf8(t){return t.event.code==="PLC"?this.testPlay(this.cardCode(),t):t.event.code==="TRE"&&this.cardCode()==="BLH"}jr8(t){if(t.event.code==="PLC")this.actPlay(this.cardCode(),t);else{const e=f.jr5(t.creatId);$.destroy(e,this.code)}D.triggerDone()}spellMyTurn(t,e){return e.playerA===t.ownerPlayerA&&W.getCard(e.cardCode).type==="S"}factionSpellMyTurn(t,e,i){if(e.playerA===t.ownerPlayerA){const s=W.getCard(e.cardCode);if(s.type==="S"&&s.faction===i)return!0}return!1}enemyPlayed(t,e){return e.playerA!==t.ownerPlayerA}ownerAlive(t){return f.jr5(t).status==="A"}agrdC(){this.faction="A",this.rarity="C",this.name="Aetherguard",this.jr1=this.boof6814,this.jr2=this.jr1-1,this.tribe.push("RB"),this.bonus={exist:this.ddp9(0,this.level,0,0)},this.text=`When you play a spell, ${this.name} gets Armor ${this.level}.`}agrdP(t,e){f.jr5(t.trigger.creatId).addArmor(this.level)}arootC(){this.faction="U",this.rarity="H",this.name="Aether Root",this.jr1=this.boof3610,this.jr2=this.jr1,this.tribe.push("PL");const t=this.boof234;this.text=`When you play an Uterra spell, ${this.name} gets ${m.jr9(t,t)}.`,this.bonus={exist:this.ddp9(0,t*2,t,0)*.5}}arootP(t,e){const i=f.jr5(t.trigger.creatId),s=this.boof234;i.buff(s,s)}arbysC(){this.faction="A",this.rarity="H",this.name="Anvillon Arbiter",this.jr1=this.boof3714,this.jr2=this.jr1+3,this.initArmor=1,this.tribe.push("RB"),this.text="When the enemy player plays their second card in a turn, that player discards their hand."}arbysP(t,e){if(x.cardsPlayed>1&&this.ownerAlive(t.creatId)){const i=S.getActive();i.discard.push(...i.hand),i.hand=[]}}bblhC(){this.faction="T",this.rarity="L",this.name="Binben, Lightning Herald",this.jr1=this.boof61017,this.jr2=this.boof468,this.tribe.push("LT","AS");const t=this.boof4711,e=this.boof258;this.text=`When you play a spell, Spawn a ${t}/${e} Lightning Wyrm. At the end of your turn, destroy it.`,this.bonus={exist:this.ddp9(1,t+e,t,0)*.5}}bblhP(t,e){if(this.ownerAlive(t.creatId)){const i=f.birthCreature(`${"LWY"}${this.level}`,"S",t.ownerPlayerA);if(i){const s=i.jr4("TE",this.code);s.changes=!0}}}ccC(){this.faction="N",this.rarity="H",this.name="Crypt Conjurer",this.jr1=this.boof258,this.jr2=this.lValN([8,14,20]),this.tribe.push("VP"),this.text=`When you play a Nekrium spell, deal ${this.jr1} damage to the enemy player and you gain ${this.jr1} health.`,this.bonus={exist:this.ddp9(0,0,0,this.jr1)}}ccP(t,e){this.ownerAlive(t.creatId)&&(S.ddf3(!t.ownerPlayerA,this.jr1,t.cardCode),S.healPlayer(t.ownerPlayerA,this.jr1))}dhwC(){this.faction="N",this.rarity="R",this.name="Darkheart Wanderer",this.jr1=this.boof3612,this.jr2=this.boof81116,this.tribe.push("HM");const t=this.boof124;this.text=`When you play a spell, ${this.name} gets Regenerate ${t}.`}dhwP(t,e){f.jr5(t.trigger.creatId).addRegen(this.boof124)}fbiC(){this.faction="T",this.rarity="H",this.name="Flamebreak Invoker",this.jr1=this.boof4814,this.jr2=this.jr1+2,this.tribe.push("FR","GT"),this.text=`When you play a Tempys spell, deal ${this.level} damage to each enemy creature.`,this.bonus={exist:this.ddp9(0,this.level*2,0,0)*.5}}fbiP(t,e){if(this.ownerAlive(t.creatId)){const i=M.tick();f.qEnemyCreats().forEach(s=>{s.hurtDirect(this.level,this.code,i)})}}flspkC(){this.faction="T",this.rarity="C",this.name="Flame Speaker",this.jr1=this.lValN([2,6,13]),this.jr2=this.level*6,this.tribe.push("HM");const t=this.boof235;this.text=`When you play a spell, deal ${t} damage to the enemy player.`,this.bonus={exist:this.ddp9(0,0,0,t)*.5}}flspkP(t,e){this.ownerAlive(t.creatId)&&S.ddf3(!t.ownerPlayerA,this.boof235,t.cardCode)}izzyC(){this.faction="T",this.rarity="L",this.name="Iztek, Khan of Arrachtor",this.jr1=this.boof6915,this.jr2=this.jr1,this.tribe.push("IC","FR","AS"),this.text=`When you play Iztek's Frost, replace this with a level ${this.level} Iztek, Avatar of Frost.~When you play Iztek's Flame, replace this with a level ${this.level} Iztek, Avatar of Flame.`}izzyT(t,e){if(e.playerA===t.ownerPlayerA){const s=W.getCard(e.cardCode).cardCode();if(s==="IFL"||s==="IFR")return!0}return!1}izzyP(t,e){const i=f.jr5(t.trigger.creatId),h=W.getCard(e.cardCode).cardCode()==="IFL"?"IZL":"IZR";f.birthCreature(`${h}${this.level}`,"R",i.owner,i.lane)}kasC(){this.faction="T",this.rarity="L",this.name="Kas, Arcweaver",this.jr1=this.boof4814,this.jr2=this.jr1,this.tribe.push("LT","AS"),this.hints=["OL"],this.text="When you play a spell, Kas battles an additional time this turn.",this.bonus={exist:this.ddp9(0,this.jr1,this.jr1,0)*.5}}kasP(t,e){const i=f.jr5(t.trigger.creatId);i.extraBattles+=1}}class Fe extends R{lookup(t){return{["KTS"]:{c:()=>this.kitC(),r:(i,s)=>this.kitR(i,s)},["RSC"]:{c:()=>this.scootC(),r:(i,s)=>this.scootR(i,s)},["SCC"]:{c:()=>this.shcrC(),r:(i,s)=>this.shcrR(i,s)},["SND"]:{c:()=>this.ssdC(),r:(i,s)=>this.ssdR(i,s)}}[t]}actReplace(t,e){this.lookup(t).r(e,O.toReplaced(e.event))}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,e){const i=super.jr3(t,e);return i.jr4("RP",this.code),i}ddf8(t){if(t.event.code==="RPL"){const e=t.event;return t.creatId===e.replCreatId}return!1}jr8(t){this.actReplace(this.cardCode(),t),D.triggerDone()}kitC(){this.faction="U",this.rarity="H",this.name="Kitaru Sprite",this.jr1=this.boof358,this.jr2=this.boof71117,this.tribe.push("FY"),this.hints=["RT"],this.text=`When this is replaced, Spawn a ${this.name}.`}kitR(t,e){f.birthCreature(this.code,"S",t.ownerPlayerA)}scootC(){this.faction="A",this.rarity="T",this.name="Relic Scout",this.jr1=this.level,this.jr2=this.level,this.initArmor=this.level,this.isFree=!0,this.tribe.push("RB"),this.hints=["RT"],this.text=`When ${this.name} is replaced, the creature that replaces it gets ${m.jr9(this.level,this.level,!0)} and Armor ${this.level}.`}scootR(t,e){e.creature.buff(this.level,this.level),e.creature.addArmor(this.level)}shcrC(){this.faction="U",this.rarity="C",this.name="Shardclaw Crusher",this.jr1=this.boof5812,this.jr2=this.jr1,this.tribe.push("IN"),this.hints=["RT"],this.text=`When ${this.name} is replaced, the creature that replaces it gets ${m.jr9(this.jr1,this.jr1)}.`}shcrR(t,e){e.creature.buff(this.jr1,this.jr1)}ssdC(){this.faction="U",this.rarity="R",this.name="Spiritstone Druid",this.jr1=this.boof4610,this.jr2=this.lValN([3,4,6]),this.tribe.push("TG"),this.hints=["RT"],this.text=`When ${this.name} is replaced, put a ${this.jr1}/${this.jr2} Spirit into each adjacent available lane.`}ssdR(t,e){const i=e.replCreat.adjacent,s=f.emptyLanes(t.ownerPlayerA),h=M.tick();i.forEach(d=>{s.includes(d)&&f.birthCreature("SPU"+this.level,"P",t.ownerPlayerA,d,h)})}}class ce extends R{lookup(t){return{["BST"]:{c:()=>this.brimC(),u:(i,s)=>this.brimR(i,s)},["OSV"]:{c:()=>this.scavC(),u:(i,s)=>this.scavR(i,s)},["RHU"]:{c:()=>this.tiaC(),u:(i,s)=>this.tiaR(i,s)},["SKS"]:{c:()=>this.spsoC(),u:(i,s)=>this.spsoR(i,s)},["SWG"]:{c:()=>this.stgrC(),u:(i,s)=>this.stgrR(i,s)},["VTW"]:{c:()=>this.weldC(),u:(i,s)=>this.weldR(i,s)}}[t]}actUpgrade(t,e){this.lookup(t).u(e,O.toReplaced(e.event))}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,e){const i=super.jr3(t,e);return i.jr4("UP",this.code),i}jr8(t){this.actUpgrade(this.cardCode(),t),D.triggerDone()}brimC(){this.faction="T",this.rarity="L",this.name="Brimstone Tyrant",this.jr1=this.boof6916,this.jr2=this.jr1,this.tribe.push("FR","EL"),this.hints=["RD"];const t=this.boof468;this.text=`Upgrade: Deal ${t} damage to each other creature.`}brimR(t,e){const i=M.tick(),s=this.boof468;f.creatByTarget(p.crNotMeTarg(t.creatId)).forEach(h=>h.hurtDirect(s,this.code,i))}scavC(){this.faction="A",this.rarity="H",this.name="Oreian Scavenger",this.jr1=this.boof6916,this.jr2=1,this.tribe.push("RB"),this.hints=["RD"],this.text=`Upgrade: ${this.name} gets Armor ${this.jr1}.`}scavR(t,e){e.creature.addArmor(this.jr1)}tiaC(){this.faction="A",this.rarity="L",this.name="Relic Hunter",this.jr1=this.boof5915,this.jr2=this.jr1,this.initBT=!0,this.tribe.push("HM"),this.hints=["RD"],this.text=`Upgrade: ${this.name} gets +attack and +health equal to the creature it replaced.`}tiaR(t,e){e.creature.buff(e.replCreat.attack,e.replCreat.health)}spsoC(){this.faction="T",this.rarity="C",this.name="Sparksoul",this.jr1=this.boof6915,this.jr2=this.jr1-1,this.tribe.push("LT","EL"),this.hints=["RD"],this.text=`Upgrade: ${this.name} gets Aggressive.`}spsoR(t,e){e.creature.aggressive=!0}stgrC(){this.faction="A",this.rarity="C",this.name="Steelwatch Guard",this.jr1=this.boof4711,this.jr2=this.jr1,this.tribe.push("RB"),this.hints=["RD"],this.text=`Upgrade: ${this.name} gets ${m.jr9(this.jr1,this.jr1)}.`}stgrR(t,e){e.creature.buff(this.jr1,this.jr1)}weldC(){this.faction="A",this.rarity="R",this.name="Vault Welder",this.jr1=this.boof71118,this.jr2=this.lValN([9,14,22]),this.initDefend=!0,this.tribe.push("RB"),this.hints=["RD"],this.text=`Upgrade: Negate Defender from ${this.name}.`}weldR(t,e){e.creature.negateDefender=!0}}class At extends R{lookup(t){return{["CGF"]:{c:()=>this.cfiendC(),v:(i,s)=>this.cfiendV(i,s)},["CSB"]:{c:()=>this.corpsC(),v:(i,s)=>this.corpsV(i,s)},["CYS"]:{c:()=>this.cslmC(),v:(i,s)=>this.cslmV(i,s)},["DSK"]:{c:()=>this.dskC(),v:(i,s)=>this.dskV(i,s)},["FST"]:{c:()=>this.fstrC(),v:(i,s)=>this.fstrV(i,s)},["FWK"]:{c:()=>this.fwlkC(),v:(i,s)=>this.fwlkV(i,s)},["FFD"]:{c:()=>this.ffC(),v:(i,s)=>this.ffV(i,s)},["GVS"]:{c:()=>this.ghsC(),v:(i,s)=>this.ghsV(i,s)},["GBG"]:{c:()=>this.ggC(),v:(i,s)=>this.ggV(i,s)},["GMR"]:{c:()=>this.gromC(),v:(i,s)=>this.gromV(i,s)},["MMX"]:{c:()=>this.mmeC(),v:(i,s)=>this.mmeV(i,s)},["NOZ"]:{c:()=>this.nyozC(),v:(i,s)=>this.nyozV(i,s)},["POX"]:{c:()=>this.poxC(),v:(i,s)=>this.poxV(i,s)},["RSZ"]:{c:()=>this.rszC(),v:(i,s)=>this.rszV(i,s)},["SFM"]:{c:()=>this.spirmC(),v:(i,s)=>this.spirmV(i,s)},["VGN"]:{c:()=>this.vgfsC(),v:(i,s)=>this.vgfsV(i,s)},["XHS"]:{c:()=>this.xhostC(),v:(i,s)=>this.xhostV(i,s)},["ZTU"]:{c:()=>this.zimusC(),v:(i,s)=>this.zimusV(i,s)}}[t]}cardVengeance(t,e){this.lookup(t).v(e,O.toCreature(e.event))}vtext="";venges=!0;fixedImgCreat=!1;constructor(t){super(t),this.lookup(this.cardCode()).c(),this.venges&&(this.text="Vengeance: "+this.vtext),this.vtext=""}image(t){return this.fixedImgCreat?this.fixedImage(t):super.image(t)}jr3(t,e){const i=super.jr3(t,e);return this.venges&&i.jr4("VN",this.code),i}jr8(t){this.cardVengeance(this.cardCode(),t),D.triggerDone()}cfiendC(){this.faction="N",this.rarity="T",this.name="Contagion Fiend",this.jr1=this.boof234,this.jr2=this.boof5812,this.tribe.push("AB"),this.fixedImgCreat=!0;const t=-this.level;this.vtext=`Each enemy creature gets ${m.jr9(t,t)}.`}cfiendV(t,e){const i=-this.level,s=M.tick(),h=p.crTarg();h.player=S.toTarget(!t.ownerPlayerA),f.creatByTarget(h).forEach(d=>d.buff(i,i,s))}corpsC(){this.faction="N",this.rarity="C",this.name="Corpulent Shambler",this.jr1=this.lValN([5,7,15]),this.jr2=this.jr1,this.tribe.push("ZB"),this.vtext="Put a 3/3 Zombie into this lane.",this.bonus={play:this.ddp9(1,6,3,0)}}corpsV(t,e){const i=`${"ZBS"}${this.level}`;f.birthCreature(i,"P",e.creature.owner,e.creature.lane)}cslmC(){this.faction="N",this.rarity="C",this.name="Crypt Slime",this.jr1=this.boof5915,this.jr2=this.jr1,this.tribe.push("OZ"),this.vtext="Put a 1/1 Oozeling into this lane.",this.bonus={play:this.ddp9(1,2,1,0)}}cslmV(t,e){const i=`${"COZ"}${this.level}`;f.birthCreature(i,"P",e.creature.owner,e.creature.lane)}dskC(){this.faction="N",this.rarity="C",this.name="Death Seeker",this.jr1=1,this.jr2=1,this.tribe.push("HM"),this.fixedImgCreat=!0,this.hints=["ST"];const t=this.boof51015;this.vtext=`Put a ${t}/${t} Spirit into this lane.`,this.bonus={play:this.ddp9(1,t*2,t,0)}}dskV(t,e){const i=`${"SPN"}${this.level}`;f.birthCreature(i,"P",e.creature.owner,e.creature.lane)}fstrC(){this.faction="N",this.rarity="R",this.name="Fell Strider",this.jr1=this.lValN([4,8,10]),this.jr2=this.boof369,this.tribe.push("ZB"),this.vtext=`Put a ${this.jr1}/${this.jr2} Zombie into this lane.`,this.bonus={play:this.ddp9(1,this.jr1+this.jr2,this.jr1,0)}}fstrV(t,e){const i=`${"ZST"}${this.level}`;f.birthCreature(i,"P",e.creature.owner,e.creature.lane)}fwlkC(){this.faction="N",this.rarity="C",this.name="Fell Walker",this.jr1=this.boof359,this.jr2=this.jr1,this.tribe.push("ZB"),this.vtext=`Put a ${this.jr1}/${this.jr1} Zombie into this lane.`,this.bonus={play:this.ddp9(1,this.jr1*2,this.jr1,0)}}fwlkV(t,e){const i=`${"ZMB"}${this.level}`;f.birthCreature(i,"P",e.creature.owner,e.creature.lane)}ffC(){if(this.faction="N",this.rarity="H",this.name="Fleshfiend",this.jr1=this.boof6812,this.jr2=this.jr1,this.tribe.push("AB"),this.venges=this.level>1,this.vtext=`Put a level ${this.level-1} ${this.name} into this lane.`,this.venges){const t=this.lValN([0,6,15]);this.bonus={play:this.ddp9(1,t*2,t,0)}}}ffV(t,e){const i=`${"FFD"}${this.level-1}`;f.birthCreature(i,"P",e.creature.owner,e.creature.lane)}ghsC(){this.faction="U",this.rarity="C",this.name="Glowhive Siren",this.jr1=this.boof3814,this.jr2=this.boof61117,this.tribe.push("IN"),this.vtext=`You gain ${this.boof124} to ${this.gghigh-1} health.`,this.bonus={play:this.ddp9(0,0,0,this.boof258)}}ghsV(t,e){const i=T.randInt(this.boof124,this.gghigh);S.healPlayer(t.ownerPlayerA,i)}get gghigh(){return this.lValN([5,9,13])}ggC(){this.faction="N",this.rarity="C",this.name="Graveborn Glutton",this.jr1=this.boof61117,this.jr2=this.boof3814,this.tribe.push("AB"),this.vtext=`Deal ${this.boof124} to ${this.gghigh-1} damage to the enemy player.`,this.bonus={play:this.ddp9(0,0,0,this.boof258)}}ggV(t,e){const i=T.randInt(this.boof124,this.gghigh);S.ddf3(!t.ownerPlayerA,i,this.code)}gromC(){this.faction="U",this.rarity="C",this.name="Grove Matriarch",this.jr1=this.boof4814,this.jr2=this.jr1+2,this.tribe.push("PL");const t=Z.minionBuff(this.level),e=Z.minionName(this.level);this.vtext=`Put a ${t}/${t} ${e} into this lane.`,this.bonus={play:this.ddp9(1,t*2,t,0)}}gromV(t,e){const i=Z.minionCode(this.level);f.birthCreature(i,"P",e.creature.owner,e.creature.lane)}mmeC(){this.faction="A",this.rarity="C",this.name="Metamind Explorer",this.jr1=this.boof3713,this.jr2=this.jr1+2,this.tribe.push("MM"),this.vtext=`Draw ${this.level} cards.`}mmeV(t,e){S.drawCard(t.ownerPlayerA,this.level)}nyozC(){this.faction="N",this.rarity="R",this.name="Nyrali Ooze",this.jr1=this.boof247,this.jr2=this.jr1,this.tribe.push("OZ");const t=this.level+this.jr1+1;this.vtext=`Put a ${t}/${t} Oozeling into this lane.`,this.bonus={play:this.ddp9(1,t*2,t,0)}}nyozV(t,e){const i=`${"OOZ"}${this.level}`;f.birthCreature(i,"P",e.creature.owner,e.creature.lane)}poxC(){if(this.faction="N",this.rarity="H",this.name="Progeny of Xith",this.jr1=this.boof246,this.jr2=this.jr1,this.tribe.push("AB"),this.hints=["DL"],this.venges=this.level<3,this.vtext=`Spawn a level ${this.level+1} ${this.name}.`,this.venges){const t=this.lValN([10,6,0]);this.bonus={play:this.ddp9(1,t*2,t,0)}}}poxV(t,e){const i=`${"POX"}${this.level+1}`;f.birthCreature(i,"S",e.creature.owner)}rszC(){this.faction="N",this.rarity="R",this.name="Runescarred Zombie",this.jr1=this.lValN([5,8,16]),this.jr2=this.boof359,this.tribe.push("ZB"),this.vtext=`Put a ${m.levelGateText(this.level,!0)}spell at random from your discard pile into your hand.`,this.bonus={play:this.ddp9(0,0,0,0,.25)}}rszV(t,e){const i=S.toPlayer(t.ownerPlayerA),s=p.target("TD");s.player=S.toTarget(i),s.card="S",s.level=w.ddf2(this.level);const h=w.deckByTarget(s);if(h.length>0){const d=h[T.randInt(0,h.length)];i.discard.splice(d[1],1),i.hand.push(d[0])}}spirmC(){this.faction="T",this.rarity="H",this.name="Spiritflame Mystic",this.jr1=this.boof6912,this.jr2=this.jr1-3,this.tribe.push("HM"),this.vtext=`Deal ${this.boof246} damage to each creature.`}spirmV(t,e){const i=this.boof246,s=M.tick();f.qActiveCreats().forEach(h=>h.hurtDirect(i,this.code,s))}vgfsC(){this.faction="N",this.rarity="C",this.name="Vengeful Spirit",this.jr1=this.boof357,this.jr2=this.jr1-2,this.tribe.push("ST"),this.hints=["OP"];const t=this.boof369n;this.vtext=`Give the opposing creature ${m.jr9(t,t)}.`,this.bonus={play:this.ddp9(0,t*-2,-t,0)}}vgfsV(t,e){const i=e.creature.opposed;if(i){const s=this.boof369n;i.buff(s,s)}}xhostC(){this.faction="N",this.rarity="C",this.name="Xithian Host",this.jr1=this.boof359,this.jr2=this.boof135,this.tribe.push("AB"),this.vtext=`Deal ${this.jr1} damage to the enemy player and you gain ${this.jr1} health.`,this.bonus={play:this.ddp9(0,0,0,this.jr1*2)}}xhostV(t,e){const i=this.jr1;S.ddf3(!t.ownerPlayerA,i,this.code),S.healPlayer(t.ownerPlayerA,i)}zimusC(){this.faction="N",this.rarity="L",this.name="Zimus, the Undying",this.jr1=this.boof51014,this.jr2=this.lValN([2,5,7]),this.tribe.push(this.level===1?"HM":"ZB"),this.venges=this.level>1,this.vtext=`Spawn a Zimus, the ${this.level===2?"Returned":"Undying"}.`,this.level<3?(this.hints=["LV"],this.level===2&&(this.bonus={play:this.ddp9(1,15,10,0)})):(this.hints=["ST"],this.bonus={play:this.ddp9(0,0,0,0,8)})}zimusV(t,e){let i;this.level===2?i=`${"ZTR"}2`:i=`${"ZTU"}3`,f.birthCreature(i,"S",t.ownerPlayerA)}}class se extends mt{lookup(t){return{["DIS"]:{c:()=>this.disnC(),p:i=>this.disnZ(i)},["DCH"]:{c:()=>this.dchantC(),p:i=>this.dchantZ(i)},["ESU"]:{c:()=>this.esrgC(),p:i=>this.esrgZ(i)},["HOX"]:{c:()=>this.howlC(),p:i=>this.howlZ(i)},["ITO"]:{c:()=>this.itorC(),p:i=>this.itorZ(i)},["MSP"]:{c:()=>this.mendC(),p:i=>this.mendZ(i)},["NEM"]:{c:()=>this.netherC(),p:i=>this.netherZ(i)}}[t]}cardCast(t,e){this.lookup(t).p(e)}playTarg;constructor(t){super(t),this.playTarg="X",this.lookup(this.cardCode()).c()}playTargets(){const t=super.playTargets();return t.push(p.playerActTarg(this.playTarg,"CARD",this.code,"")),t}handleAction(t){this.logSpell();const e=S.toPlayer(t.playerA);this.cardCast(this.cardCode(),e),x.spellCast()}disnC(){this.faction="T",this.rarity="R",this.name="Disintigrate",this.playTarg="E",this.text=`Deal 1 to  ${this.dshigh-1} damage to the enemy player.`}disnZ(t){S.ddf3(t,T.randInt(1,this.dshigh),this.code)}get dshigh(){return this.lValN([9,16,26])}dchantC(){this.faction="U",this.rarity="C",this.name="Druid's Chant",this.playTarg="F",this.text=`You gain ${this.boof81220} health.`}dchantZ(t){S.healPlayer(t,this.boof81220)}esrgC(){this.faction="A",this.rarity="R",this.name="Energy Surge",this.isFree=this.level>1,this.overload=this.level===3,this.level===1&&(this.hints=["LV"]),this.playTarg="F",this.text=`Draw ${this.level} card${this.level>1?"s":""}.`}esrgZ(t){S.drawCard(t,this.level)}howlC(){this.faction="N",this.rarity="R",this.name="Howl of Xith",this.maxLevel=1,this.playTarg="E",this.text="Deal X damage to the enemy player and gain X health, where X is three times your rank."}howlZ(t){const e=S.getActive(),i=e.rank*3;S.ddf3(t,i,this.code),S.healPlayer(e,i)}itorC(){this.faction="T",this.rarity="R",this.name="Ice Torrent",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]),this.playTarg="E",this.text=`Deal ${this.boof234} damage to the enemy player.`}itorZ(t){S.ddf3(t,this.boof234,this.code)}mendC(){this.faction="U",this.rarity="R",this.name="Mending Spring",this.playTarg="F",this.text=`You gain 1 to ${this.mendboof} Health.`}mendZ(t){S.healPlayer(t,T.randInt(1,this.mendboof+1))}get mendboof(){return this.lValN([10,20,40])}netherC(){this.faction="N",this.rarity="C",this.name="Nether Embrace",this.playTarg="E";const t=this.boof4712;this.text=`Deal ${t} damage to the enemy player. You gain ${t} heal`}netherZ(t){const e=this.boof4712;S.ddf3(t,e,this.code),S.healPlayer(!t.isPlayerA,e)}}class wr extends R{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Rageborn Hellion",this.jr1=this.boof469,this.jr2=this.jr1*2,this.tribe.push("FR","EL"),this.hints=["OL"],this.text=`When a friendly creature ${m.dbdtap()}, ${this.name} gets ${m.jr9(this.level,this.level)}.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("DM",this.code),i}ddf8(t){if(t.trigger.type==="DM"){const e=O.toDamage(t.event);return e.battle&&!e.isCreatTarg&&e.isCreatSrc&&e.srcCreat.owner===t.ownerPlayerA}return!1}jr8(t){f.jr5(t.creatId).buff(this.level,this.level),D.triggerDone()}}class Pt extends R{lookup(t){return{["AIV"]:{c:()=>this.avinvC(),r:i=>this.avinvR(i)},["BSP"]:{c:()=>this.bskphC(),r:i=>this.bskphR(i)},["CRC"]:{c:()=>this.crucC(),r:i=>this.crucR(i)},["ESK"]:{c:()=>this.ebknC(),r:i=>this.ebknR(i)},["FWC"]:{c:()=>this.fwcC(),r:i=>this.fwcR(i)},["FME"]:{c:()=>this.feggC(),r:i=>this.feggR(i)},["MMV"]:{c:()=>this.mmovC(),r:i=>this.mmovR(i)},["PSH"]:{c:()=>this.porshC(),r:i=>this.porshR(i)},["RGG"]:{c:()=>this.runegC(),r:i=>this.runegR(i)},["SSR"]:{c:()=>this.solrevC(),r:i=>this.solrevR(i)},["SSM"]:{c:()=>this.spshamC(),r:i=>this.spshamR(i)},["SSG"]:{c:()=>this.snoutC(),r:i=>this.snoutR(i)},["UGM"]:{c:()=>this.mantisC(),r:i=>this.mantisR(i)}}[t]}rtext="";constructor(t){super(t),this.lookup(this.cardCode()).c(),this.text="Gain Rank: "+this.rtext,this.rtext=""}image(t){return this.rarity==="T"?this.cardCode()==="FWC"?this.rawImage("MPH",t):super.fixedImage(t):super.image(t)}jr3(t,e){const i=super.jr3(t,e);return i.jr4("RU",this.code),i}ddf8(t){return t.trigger.type==="RU"?t.event.playerA===t.ownerPlayerA:!1}jr8(t){this.lookup(this.cardCode()).r(t),D.triggerDone()}avinvC(){this.faction="T",this.rarity="H",this.name="Avalanche Invoker",this.jr1=this.boof6914,this.jr2=this.jr1+1,this.tribe.push("ER","AS"),this.hints=["TL"],this.rtext=`Deal ${this.boof3612} damage to each non-Tempys creature.`}avinvR(t){const e=this.boof3612,i=M.tick();f.qActiveCreats().filter(s=>s.faction!=="T").forEach(s=>s.hurtDirect(e,this.code,i))}bskphC(){this.faction="N",this.rarity="C",this.name="Blightskull Phantasm",this.jr1=this.boof5814,this.jr2=this.boof61017,this.tribe.push("ST"),this.hints=["TL","OP"];const t=this.boof369n;this.rtext=`the opposing creature gets ${m.jr9(t,t)}.`}bskphR(t){const i=f.jr5(t.creatId).opposed;if(i){const s=this.boof369n;i.buff(s,s)}}crucC(){this.faction="A",this.rarity="R",this.name="Crucible Colossus",this.jr1=this.boof61016,this.jr2=this.jr1+2,this.tribe.push("RB"),this.initDefend=!0,this.hints=["TL"],this.rtext=`Negate Defender from ${this.name}.`}crucR(t){const e=f.jr5(t.creatId);e.negateDefender=!0}ebknC(){this.faction="N",this.rarity="H",this.name="Ebonskull Knight",this.jr1=this.lValN([9,13,18]),this.jr2=this.jr1-2,this.tribe.push("VP"),this.hints=["TL"],this.rtext=`Destroy ${this.name}.`}ebknR(t){const e=f.jr5(t.creatId);$.destroy(e,this.code)}fwcC(){this.faction="U",this.rarity="T",this.maxLevel=1,this.name="Feywing Chrysalis",this.jr1=0,this.jr2=3,this.tribe.push("CR"),this.initDefend=!0,this.rtext=`Replace ${this.name} with a 9/9 Feywing.`}fwcR(t){const e=f.jr5(t.creatId);f.birthCreature(`${"FWG"}1`,"R",e.owner,e.lane)}feggC(){this.faction="T",this.rarity="T",this.minLevel=this.level,this.maxLevel=this.level,this.name="Frostmane Egg",this.jr1=0,this.jr2=6,this.tribe.push("DG"),this.initDefend=!0,this.rtext=`Replace ${this.name} with a level ${this.level} Frostmane Dragon.`}feggR(t){const e=f.jr5(t.creatId);f.birthCreature(`${"FMD"}${this.level}`,"R",e.owner,e.lane)}mmovC(){this.faction="A",this.rarity="C",this.name="Metamind Overseer",this.jr1=this.boof5915,this.jr2=this.jr1+1,this.tribe.push("MM"),this.hints=["TL"],this.rtext="Draw 2 cards."}mmovR(t){S.drawCard(t.ownerPlayerA,2)}porshC(){this.faction="N",this.rarity="H",this.name="Portal Shade",this.jr1=this.boof5914,this.jr2=this.boof71118,this.tribe.push("ST"),this.rtext="Spawn a random creature that was destroyed this game."}porshR(t){const e=$.gravedigger();e&&f.birthCreature(e,"S",t.ownerPlayerA)}runegC(){this.faction="U",this.rarity="H",this.name="Runegrove Guardian",this.jr1=this.boof4814,this.jr2=this.jr1,this.tribe.push("PL"),this.hints=["TL"],this.rtext=`${this.name} gets ${m.jr9(this.jr1,this.jr1)}.`}runegR(t){f.jr5(t.creatId).buff(this.jr1,this.jr1)}solrevC(){this.faction="U",this.rarity="L",this.name="Solstice Reveler",this.jr1=this.boof4816,this.jr2=this.jr1,this.tribe.push("HM"),this.hints=["TL"];const t=this.solbof;this.rtext=`each friendly creature gets ${m.jr9(t,t,this.level===3)}${this.level===3?", and Breakthrough":""}.`}solrevR(t){const e=this.solbof;f.ddf1().forEach(i=>{i.buff(e,e),this.level===3&&(i.breakthrough=!0)})}get solbof(){return this.jr1/2}spshamC(){this.faction="T",this.rarity="C",this.name="Spiritfrost Shaman",this.jr1=this.boof71117,this.jr2=this.boof4610,this.tribe.push("HM"),this.hints=["TL"],this.rtext=`Deal ${this.boof579} damage to the enemy player.`}spshamR(t){S.ddf3(!t.ownerPlayerA,this.boof579,this.code)}snoutC(){this.faction="U",this.rarity="C",this.name="Stouthide Stegadon",this.jr1=this.boof4714,this.jr2=this.boof71117,this.tribe.push("DN"),this.hints=["TL"],this.rtext=`Heal ${this.snoutbof} damage from ${this.name}.`}snoutR(t){f.jr5(t.creatId).heal(this.snoutbof)}get snoutbof(){return this.level*10}mantisC(){this.faction="U",this.rarity="C",this.name="Umbraglim Mantis",this.jr1=this.boof6914,this.jr2=this.jr1-1,this.tribe.push("IN"),this.hints=["TL"],this.rtext=`You gain ${this.mantbof} health.`}mantisR(t){S.healPlayer(t.ownerPlayerA,this.mantbof)}get mantbof(){return this.lValN([8,10,12])}}class Dr extends R{constructor(t){super(t),this.faction="T",this.rarity="R",this.name="Riftlasher",this.jr1=this.boof359,this.jr2=this.boof61016,this.tribe.push("FR","EL"),this.text=`When ${this.name} ${m.dbdtap()} on your turn, you may deal that much damage to an enemy creature.`,this.bonus={exist:this.ddp9(0,this.jr1,0,0)}}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("DM",this.code);return s.interactive=!0,i}ddf8(t){if(t.trigger.type==="DM"){const e=t.event;return e.battle&&!e.isCreatTarg&&e.isCreatSrc&&e.srcId===t.creatId&&t.ownerPlayerA===S.getActiveB()}return!1}jr8(t){const e=t.event,i=w.toActions(p.crEnemyActTarg("CARD",this.code,T.enTil(t.creatId,e.dmg)));i.length>0?(i.push(C.noneEndTrigger()),C.ddf5(i)):D.triggerDone()}handleAction(t){const e=T.deTil(t.param);f.ddf6(t).hurtDirect(parseInt(e[1]),this.code),C.actionDone(!0)}}class xr extends Lt{jr3(t,e){const i=super.jr3(t,e);return i.jr4("AS",this.code),i}jr8(t){if(t.trigger.type==="AS"){let e=!0;for(;e;){const i=f.birthCreature(this.code,"S",t.ownerPlayerA);i?i.opposed&&(e=!1):e=!1}D.triggerDone()}else super.jr8(t)}}class Fr extends R{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Scourgeflame Sorcerer",this.jr1=this.boof358,this.jr2=this.boof5914,this.tribe.push("ZB");const e=`Destroy an enemy ${m.levelGateText(this.level+1,!0)}creature.`,i=this.level===3?": ":", destroy another friendly creature: ";this.text=`Activate${i}${e}`}canActivate(t){return this.enemies(t).length>0?this.level===3?!0:this.friends(t).length>0:!1}startActivation(t){C.ddf5(this.getCardActions(p.ddf4(),t))}handleAction(t){const e=T.deTil(t.param);if(e[1]==="P1")C.ddf5(this.getCardActions(t));else{const i=f.jr5(e[0]),s=M.tick();if(this.level<3){const d=f.jr5(e[2]);$.destroy(d,this.code,s)}const h=f.ddf6(t);$.destroy(h,this.code,s),i.endActivation()}}friends(t){const e=p.crFriendNotMeActTarg("CARD",t.id,this.code,T.enTil(t.id,"P1"));return w.toActions(e)}enemies(t,e=""){const i=p.crEnemyActTarg("CARD",this.code,T.enTil(t.id,"P2",e));return i.level=w.ddf2(this.level+1),w.toActions(i)}getCardActions(t,e){if(t.key==="ACTV"){const i=e??f.jr5(t.param);let s;return this.level===3?s=this.enemies(i):s=this.friends(i),s.push(C.cancelAction()),s}else if(t.key==="CARD"){const i=T.deTil(t.param),s=f.jr5(i[0]),h=f.ddf6(t),d=this.enemies(s,h.id);return d.push(C.cancelAction()),d}return super.getCardActions(t,e)}}class Pr extends R{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Seismic Adept",this.jr1=this.boof4712,this.jr2=this.boof61218,this.tribe.push("HM"),this.text="Activate: Move an enemy creature to another available enemy lane.",this.bonus={exist:this.level*.5}}canActivate(t){return this.enemies(t).length>0&&this.empties(t).length>0}startActivation(t){C.ddf5(this.getCardActions(p.ddf4(),t))}handleAction(t){const e=T.deTil(t.param);if(e[0]==="P1")C.ddf5(this.getCardActions(t));else{const i=f.jr5(e[1]);f.jr5(e[2]).move(t.lane),i.endActivation()}}empties(t,e=""){const i=p.emptyPlayerActTarg("E","CARD",this.code,T.enTil("P2",t.id,e));return w.toActions(i)}enemies(t){const e=p.crEnemyActTarg("CARD",this.code,T.enTil("P1",t.id));return w.toActions(e)}getCardActions(t,e){if(t.key==="ACTV"){const i=e??f.jr5(t.param),s=this.enemies(i);return s.push(C.cancelAction()),s}else if(t.key==="CARD"){const i=f.ddf6(t),s=T.deTil(t.param),h=f.jr5(s[1]),d=this.empties(h,i.id);return d.push(C.cancelAction()),d}return super.getCardActions(t,e)}}class Pe extends R{constructor(t){super(t),this.rarity="R",this.jr1=this.boof4612,this.jr2=this.boof61016;const e=this.cardCode();if(e==="SSS"?this.steel():e==="LSS"?this.life():e==="FSS"?this.flame():e==="DSS"&&this.dark(),this.level>1){const i=m.levelGateText(this.level-1);this.text=`When you play a ${i} ${m.factionText(this.faction)} card, you may ${this.tuxt}.`}else this.hints=["LV"];this.bonus={exist:this.level*.5},this.tuxt=""}tuxt="";dark(){this.faction="N",this.name="Darkshaper Savant",this.tribe.push("ZB");const t=-this.boof135;this.tuxt=`give an enemy creature ${m.jr9(t,t)}`}life(){this.faction="U",this.name="Lifeshaper Savant",this.tribe.push("SE");const t=this.boof135;this.tuxt=`give another friendly creature ${m.jr9(t,t)}`}steel(){this.faction="A",this.name="Steelshaper Savant",this.tribe.push("HM"),this.tuxt=`give another friendly creature Armor ${this.boof124}`}flame(){this.faction="T",this.name="Flameshaper Savant",this.tribe.push("HM"),this.tuxt=`deal ${this.boof147} damage to target creature or player`}jr3(t,e){const i=super.jr3(t,e);if(this.level>1){const s=i.jr4("PC",this.code);s.interactive=!0}return i}ddf8(t){if(t.trigger.type==="PC"){const e=t.event;if(e.playerA===t.ownerPlayerA){const i=W.getCard(e.cardCode);if(i.level<this.level&&i.faction===this.faction)return!0}}return!1}jr8(t){const e=p.crActTarg("CARD",this.code,""),i=[e,w.buttonTarget("NOTR")];if(this.faction==="N")e.player="E";else if(this.faction==="T"){e.hint=["HR"];const h=p.actionTarget("TP","CARD",this.code,"");h.hint=["HR"],i.push(h)}else e.notMe=t.creatId,e.player="F",this.faction==="A"&&(e.canArmor=!0);const s=w.toActions(i);s.length===1?D.triggerDone():C.ddf5(s)}handleAction(t){if(this.faction==="T"&&t.zone==="P")S.ddf3(t.playerA,this.level===3?7:4,this.code);else{const e=f.ddf6(t);if(this.faction==="A")e.addArmor(this.level===3?4:2);else if(this.faction==="T")e.hurtDirect(this.level===3?7:4,this.code);else{const i=(this.level===3?5:3)*(this.faction==="N"?-1:1);e.buff(i,i)}}C.actionDone(!0)}}class Br extends mt{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Spiritcleave",this.text=`Destroy a ${m.levelGateText(this.level+1,!0)}creature with the highest health among all creatures.${this.level===3?"~You gain health equal to that creature's health.":""}`}playTargets(){const t=super.playTargets();let e=-1;const i=f.qActiveCreats();i.forEach(d=>{d.health>e&&(e=d.health)});const s=i.filter(d=>d.health===e).map(d=>d.id),h=p.crActTarg("CARD",this.code,"");return h.level=w.ddf2(this.level+1),h.victims=T.enTil(...s),this.level<3&&(h.hint=["KL"]),t.push(h),t}handleAction(t){this.logSpell();const e=f.ddf6(t);$.destroy(e,this.code),this.level===3&&S.healPlayer(S.getActiveB(),e.health),x.spellCast()}}class Hr extends mt{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Spiritleash";const e=this.boof5814;this.text=`Destroy a friendly creature.~Give a creature ${m.jr9(e,e)}.`}playTargets(){const t=super.playTargets(),e=p.crFriendActTarg("CARD",this.code,"P1");return f.creatByTarget(e).length>0&&f.qActiveCreats().length>1&&t.push(e),t}handleAction(t){const e=T.deTil(t.param),i=f.ddf6(t);if(e[0]==="P1"){const s=p.crNotMeActTarg("CARD",i.id,this.code,T.enTil("P2",i.id));s.hint=["BF"];const h=w.toActions(s);h.push(C.cancelAction()),C.ddf5(h)}else{this.logSpell();const s=f.jr5(e[1]),h=this.boof5814;$.destroy(s,this.code),i.buff(h,h),x.spellCast()}}}class Nr extends R{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Spite Hydra",this.jr1=this.boof5914,this.jr2=this.jr1,this.tribe.push("HY"),this.text=`When ${this.name} ${m.dbdtac()}, this gets ${m.jr9(this.level,this.level)}.~Allied Tempys: Activate: Deal ${this.level} damage to another creature. This gets ${m.jr9(this.level,this.level)}.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("FR",this.code),i.jr4("DM",this.code),i}zapTargs(t){const e=p.crNotMeActTarg("CARD",t,this.code,t);return e.hint=["HR"],w.toActions([e,w.buttonTarget("CANC")])}canActivate(t){return this.zapTargs(t.id).length>1&&t.hasMod(t.id)}startActivation(t){C.ddf5(this.zapTargs(t.id))}ddf8(t){if(t.trigger.type==="DM"){const e=t.event;return e.battle&&e.isCreatTarg&&e.isCreatSrc&&e.srcId===t.creatId}return!1}handleAction(t){const e=f.ddf6(t),i=f.jr5(t.param);e.hurtDirect(this.level,this.code),i.buff(this.level,this.level),i.endActivation()}jr8(t){const e=f.jr5(t.creatId);t.trigger.type==="FR"?x.allied("T")&&(e.addMod(p.mod("AL",!0,e.id)),e.changed=!0):t.trigger.type==="DM"&&e.buff(this.level,this.level),D.triggerDone()}}class Mr extends R{constructor(t){super(t),this.faction="A",this.rarity="R",this.name="Statis Warden",this.jr1=this.boof5915,this.jr2=this.jr1+1,this.tribe.push("MM"),this.text="When you play a spell, give a friendly creature Defender until the end of the enemy player's next turn."}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("PC",this.code);return s.interactive=!0,i}handleAction(t){const e=f.ddf6(t),i=p.mod("DF",!0,t.param);i.expiry="EN",e.addMod(i),C.actionDone(!0)}ddf8(t){if(t.trigger.type==="PC"){const e=t.event;return e.playerA===t.ownerPlayerA&&W.getCard(e.cardCode).type==="S"}return!1}jr8(t){const e=p.crFriendNotMeActTarg("CARD",t.creatId,this.code,t.creatId);e.canDefender=!0;const i=w.toActions(e);i.length===0?D.triggerDone():(i.push(C.noneEndTrigger()),C.ddf5(i))}}class Rr extends R{constructor(t){super(t),this.faction="A",this.rarity="C",this.name="Steeleye Researcher",this.jr1=this.boof5915,this.jr2=this.jr1+1,this.tribe.push("HM"),this.hints=["RD"],this.bonus={play:.5},this.text=`Upgrade: You may ${m.daluac()}.`}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("UP",this.code);return s.interactive=!0,i}handleAction(t){x.levelAndDiscard(t),C.actionDone(!0)}jr8(t){const e=p.lvlHandActTarg(this.code,t.creatId),i=w.toActions(e);i.length>0?(i.push(C.noneEndTrigger()),C.ddf5(i)):D.triggerDone()}}class Er extends R{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Steelscale Dragon",this.jr1=this.boof4812,this.jr2=this.jr1+2,this.tribe.push("RB","DG"),this.initMobile=this.level;const e=this.boof246;this.addSp("M",e),this.text=`While each other friendly creature has Defender, ${this.name} gets ${m.jr9(this.jr1,0)}, Armor ${e}, and Breakthrough.`}jr3(t,e){const i=super.jr3(t,e),s=i.addEffect("DF",this.code);s.area="C";const h=i.addEffect("PS",this.code);return h.area="C",i}enforceEffect(t,e){const i=p.crNotMeTarg(e.id);if(i.player=S.toTarget(e.owner),f.creatByTarget(i).some(h=>!h.defender))e.removeModSafe(e.id);else{const h=p.mod("AT",this.jr1,e.id),d=p.mod("AR",this.boof246,e.id),g=p.mod("BT",!0,e.id);e.addModSafe(h),e.addModSafe(d),e.addModSafe(g)}}}class Ir extends R{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Storm Bringer",this.jr1=this.boof5814,this.jr2=this.boof61018,this.tribe.push("WN","EL");const e=this.boof246;this.addSp("D",e),this.bonus={exist:this.ddp9(0,e+2,0,0)},this.text=`At the start of each turn, ${this.name} moves to an available lane at random. Flank: Deal ${e} damage to the opposing creature.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("TS",this.code),i.jr4("FK",this.code),i}ddf8(t){return t.trigger.type==="TS"}jr8(t){if(t.trigger.type==="TS"){const e=f.emptyLanes(t.ownerPlayerA);e.length>0&&f.jr5(t.creatId).move(e[T.randInt(0,e.length)]),D.triggerDone()}else if(t.trigger.type==="FK"){const i=O.toCreature(t.event).creature.opposed;i&&i.hurtDirect(this.boof246,this.code),D.triggerDone()}else super.jr8(t)}}class Gr extends R{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Sulgrim, Herald of Force",this.jr1=15,this.jr2=15,this.tribe.push("GL"),this.addSp("M",6),this.text="Activate: Deal damage equal to a friendly creature's Armor to an enemy creature.~Forge: Each friendly creature gets Armor 6."}jr3(t,e){const i=super.jr3(t,e);return i.jr4("FR",this.code),i}canActivate(t){return this.enemies(t.id).length>0&&this.friends(t.id).length>0}startActivation(t){const e=this.friends(t.id);e.push(C.cancelAction()),C.ddf5(e)}handleAction(t){const e=T.deTil(t.param),i=f.ddf6(t);if(e[1]==="P1"){const s=this.enemies(e[0],i.id);s.push(C.cancelAction()),C.ddf5(s)}else if(e[1]==="P2"){const s=f.jr5(e[0]),h=f.jr5(e[2]);i.hurtDirect(h.armor,this.code),s.endActivation()}}jr8(t){f.ddf1().forEach(e=>e.addArmor(6)),D.triggerDone()}friends(t){const e=p.crFriendActTarg("CARD",this.code,T.enTil(t,"P1"));return e.hasArmor=!0,w.toActions(e)}enemies(t,e=""){const i=p.crEnemyActTarg("CARD",this.code,T.enTil(t,"P2",e));return w.toActions(i)}}class Lr extends R{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Synapsis Oracle",this.jr1=this.boof358,this.jr2=this.lValN([9,15,24]),this.tribe.push("HM"),this.hints=["OL"];let e;this.level===3?(this.text="Activate: Level up a card in your hand.",e=1):(this.text=`Activate: ${m.daluac(!0)}.`,e=.5),this.bonus={exist:e}}canActivate(t){return S.toPlayer(t.owner).hand.some(i=>W.getCard(i).canLevel())}startActivation(t){const e=p.lvlHandActTarg(this.code,t.id);e.hint?.push("DF"),C.ddf5(w.toActions([e,w.buttonTarget("CANC")]))}handleAction(t){const e=f.jr5(t.param),i=S.toPlayer(e.owner);this.level===3?i.hand[t.position]=W.getCard(t.card).levelUpCard():x.levelAndDiscard(t),e.endActivation()}}class $r extends bt{jr3(t,e){const i=super.jr3(t,e);return i.jr4("FR",this.code),i}jr8(t){if(t.trigger.type==="FR"){const e=t.ownerPlayerA?x.deathsA:x.deathsB;if(e>0){const i=M.tick();for(let s=0;s<e;s++)f.birthCreature("ZMB"+this.level,"S",t.ownerPlayerA,void 0,i)}D.triggerDone()}else super.jr8(t)}}class Or extends mt{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Thunderstomp";const e=this.boof5812;this.text=`Deal ${e} damage to an enemy creature.~Then, if there is a friendly Dinosaur, deal another ${e} damage to an enemy creature.`}playTargets(){const t=super.playTargets(),e=p.crEnemyActTarg("CARD",this.code,"P1");return t.push(e),t}handleAction(t){const e=T.deTil(t.param),i=this.boof5812,s=f.ddf6(t);e[0]==="P1"?(this.logSpell(),s.hurtDirect(i,this.code),this.dino()?C.ddf5(this.getCardActions(t)):x.spellCast()):(s.hurtDirect(i,this.code),x.spellCast())}dino(){const t=p.crFriendTarg();return t.tribe="DN",f.creatByTarget(t).length>0}getCardActions(t,e){return w.toActions(p.crEnemyActTarg("CARD",this.code,"P2"))}}class ri extends R{lookup(t){return{["SOL"]:{c:()=>this.stagC(),t:i=>this.stagT(i)},["WTK"]:{c:()=>this.tinkC(),t:i=>this.tinkT(i)}}[t]}mPlayer=0;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,e){const i=super.jr3(t,e);return i.jr4("TE",this.code),i}ddf8(t){return t.trigger.type==="TE"&&this.validPlayer(t)}jr8(t){this.lookup(this.cardCode()).t(t),D.triggerDone()}validPlayer(t){if(this.mPlayer===0)return!0;const e=t.event;return this.mPlayer===1?e.playerA===t.ownerPlayerA:e.playerA!==t.ownerPlayerA}stagC(){this.faction="U",this.rarity="C",this.name="Stag of Lys",this.jr1=this.boof5916,this.jr2=this.jr1,this.tribe.push("ST"),this.mPlayer=1;const t=this.boof246;this.text=`At the end of your turn, gain ${t} health.`}stagT(t){S.healPlayer(t.ownerPlayerA,this.boof246)}tinkC(){this.faction="A",this.rarity="H",this.name="War Tinker",this.jr1=this.level,this.jr2=this.boof4812,this.tribe.push("GN"),this.mPlayer=-1,this.bonus={exist:this.ddp6()},this.text=`At the end of the enemy player's turn, replace ${this.name} with a copy of a random Robot from your deck.`}tinkT(t){const e=p.target("DK");e.player=S.toTarget(t.ownerPlayerA),e.tribe="RB";const i=w.deckByTarget(e),s=i.length;if(s>0){const h=i[T.randInt(0,s)][0],d=f.jr5(t.creatId);f.birthCreature(h,"R",d.owner,d.lane)}}}class $t extends R{lookup(t){return{["DCS"]:{c:()=>this.delphC(),t:i=>this.delphT(i)},["GMP"]:{c:()=>this.gmpC(),t:i=>this.gmpT(i)},["LBL"]:{c:()=>this.lbcC(),t:i=>this.lbcT(i)},["SBF"]:{c:()=>this.sfangC(),t:i=>this.sfangT(i)},["SSE"]:{c:()=>this.sseC(),t:i=>this.sseT(i)},["SPD"]:{c:()=>this.spdC(),t:i=>this.spdT(i)},["SPM"]:{c:()=>this.spmC(),t:i=>this.spmT(i)},["TBA"]:{c:()=>this.tbaC(),t:i=>this.tbaT(i)},["VCG"]:{c:()=>this.vgC(),t:i=>this.vgT(i)},["WBG"]:{c:()=>this.woeC(),t:i=>this.woeT(i)},["ZSH"]:{c:()=>this.zyxC(),t:i=>this.zyxT(i)}}[t]}bothTurns=!1;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,e){const i=super.jr3(t,e);i.jr4("TS",this.code);const s=Mt.extractCardCode(this.code);return(s==="ZSH"||s==="SBF")&&(i.extraBattles=1),i}ddf8(t){return t.trigger.type==="TS"?this.bothTurns?!0:t.event.playerA===t.ownerPlayerA:!1}jr8(t){this.lookup(this.cardCode()).t(t),D.triggerDone()}delphC(){this.faction="A",this.rarity="L",this.name="Delpha, Chronosculptor",this.jr1=this.boof7914,this.jr2=this.jr1,this.tribe.push("HM"),this.level>1&&(this.hints=["OL"],this.bonus={exist:this.ddp9(0,9,4,0)},this.text=`At the start of your turn, level a ${this.level===2?"level 1 ":""}card in your hand at random.`)}delphT(t){if(this.level>1){const e=S.toPlayer(t.ownerPlayerA),i=e.hand.map((h,d)=>{const g=W.getCard(h);return{idx:d,lvl:g.level,nxt:g.canLevel()?g.levelUpCard():""}}).filter(h=>h.nxt&&(this.level===3||h.lvl===1)),s=i.length;if(s>0){const h=i[T.randInt(0,s)];e.hand[h.idx]=h.nxt}}}gmpC(){this.faction="A",this.rarity="L",this.name="Ghox, Metamind Paragon",this.jr1=this.boof4814,this.jr2=this.boof61218,this.tribe.push("MM"),this.hints=["OL"];const t=this.level===1?"":"s";this.bonus={exist:this.ddp9(0,0,0,0,this.level*.5)},this.text=`At the start of your turn, draw ${this.level} card${t}.`}gmpT(t){S.drawCard(t.ownerPlayerA,this.level)}lbcC(){this.faction="U",this.rarity="R",this.name="Lightbringer Cleric",this.jr1=this.boof51015,this.jr2=this.jr1,this.tribe.push("TK"),this.hints=["OL"],this.bonus={exist:this.ddp9(0,0,0,this.boof3610)},this.text=`At the start of your turn, you gain ${this.boof137} to ${this.boof5914-1} health.`}lbcT(t){S.healPlayer(t.ownerPlayerA,T.randInt(this.boof137,this.boof5914))}sfangC(){this.faction="T",this.rarity="H",this.name="Saberfang",this.jr1=this.boof246,this.jr2=1,this.initAggro=!0,this.tribe.push("CT"),this.text=`${this.name} battles an additional time on your turn.`}sfangT(t){const e=f.jr5(t.creatId);e.extraBattles+=1}sseC(){this.faction="U",this.rarity="L",this.name="Scatterspore Eidolon",this.jr1=8,this.jr2=this.jr1,this.tribe.push("PL"),this.hints=["DL"];const t=this.boof357,e=Z.minionName(this.level);this.bonus={exist:this.ddp9(1,t*2,t,0)},this.text=`At the start of your turn, Spawn a ${t}/${t} ${e}.`}sseT(t){const e=this.lValS(["SXD","SXP","SXT"])+this.level.toString();f.birthCreature(e,"S",t.ownerPlayerA)}spdC(){this.faction="U",this.rarity="R",this.name="Shardplate Delver",this.jr1=this.boof4612,this.jr2=this.jr1,this.tribe.push("DN"),this.hints=["OL"];const t=this.boof246;this.bonus={exist:this.ddp9(0,t*2,t,0)},this.text=`At the start of your turn, ${this.name} gets ${m.jr9(t,t)}.`}spdT(t){const e=this.boof246;f.jr5(t.creatId).buff(e,e)}spmC(){this.faction="U",this.rarity="L",this.name="Shardplate Mutant",this.jr1=this.boof91421,this.jr2=this.jr1,this.tribe.push("IN"),this.hints=["OP"],this.text="At the start of your turn, randomly discard down to two cards in your hand."}spmT(t){const e=S.toPlayer(t.ownerPlayerA);if(e.hand.length>2){let i=e.hand.slice(),s=[];for(;i.length>2;)s.push(i.splice(T.randInt(0,i.length),1)[0]);e.discard.push(...s),e.hand=i}}tbaC(){this.faction="U",this.rarity="L",this.name="Talisin, Bard of Abundance",this.jr1=this.lValN([8,12,16]),this.jr2=this.lValN([10,14,20]),this.tribe.push("SY"),this.bothTurns=this.lValB([!0,!0,!1]),this.hints=["OL"],this.level===3&&(this.bonus={exist:this.ddp6()}),this.text=`At the start of ${this.bothTurns?"your":"each player's"} turn, ${this.bothTurns?"you":"that player"} may play an additional card.`}tbaT(t){x.regularPlays+=1}vgC(){this.faction="T",this.rarity="C",this.name="Volcanic Giant",this.jr1=this.boof51015,this.jr2=this.jr1,this.tribe.push("ER","GT"),this.hints=["OL"],this.bonus={exist:this.ddp9(0,0,0,this.boof3610)},this.text=`At the start of your turn, deals ${this.boof137} to ${this.boof5914-1} damage to the enemy player.`}vgT(t){const e=T.randInt(this.boof137,this.boof5914);S.ddf3(!t.ownerPlayerA,e,this.code)}woeC(){this.faction="N",this.rarity="L",this.name="Woebringer",this.jr1=this.lValN([7,10,18]),this.jr2=this.boof5815,this.tribe.push("AB"),this.text=`At the start of your turn, destroy the ${this.level===3?"enemy ":""}creature with the lowest attack. If there is a tie, one is chosen at random.`}woeT(t){const e=p.crTarg();this.level===3&&(e.player=S.toTarget(!t.ownerPlayerA));const i=f.creatByTarget(e);let s=99999,h=[];i.forEach(g=>{g.attack===s?h.push(g):g.attack<s&&(s=g.attack,h=[g])});const d=h.length;if(d>0){const g=h[T.randInt(0,d)];$.destroy(g,this.code)}}zyxC(){this.faction="T",this.rarity="L",this.name="Zyx, Storm Herald",this.jr1=this.boof4712,this.jr2=this.lValN([6,9,20]),this.initMobile=1,this.tribe.push("LT","AS"),this.text="Zyx battles an additional time on your turn."}zyxT(t){const e=f.jr5(t.creatId);e.extraBattles+=1}}class Wr extends R{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Tuskin Sporelord",this.jr1=this.lValN([2,6,10]),this.jr2=this.lValN([10,14,18]),this.tribe.push("TK"),this.text=`Activate: Put a copy of friendly ${m.levelGateText(this.level,!0)}Plant into an available lane.`,this.bonus={exist:this.ddp6(this.level)/2}}canActivate(t){return this.emptySloots(t.id).length>0&&this.buddies(t.id).length>0}startActivation(t){const e=this.buddies(t.id);e.push(C.cancelAction()),C.ddf5(e)}handleAction(t){const e=T.deTil(t.param);if(e[0]==="P1"){const i=f.ddf6(t),s=this.emptySloots(e[1],i.code);s.push(C.cancelAction()),C.ddf5(s)}else{const i=f.jr5(e[1]);f.birthCreature(e[2],"P",i.owner,t.lane),i.endActivation()}}emptySloots(t,e=""){const i=p.emptyPlayerActTarg("F","CARD",this.code,T.enTil("P2",t,e));return w.toActions(i)}buddies(t){const e=p.crFriendActTarg("CARD",this.code,T.enTil("P1",t));return e.tribe="PL",e.level=w.ddf2(this.level),w.toActions(e)}}class si extends mt{constructor(t){super(t),this.faction="A",t==="PRI"+"1"?(this.rarity="R",this.name="Perilous Insight",this.maxLevel=1,this.overload=!0):(this.rarity="C",this.name="Metasight",this.maxLevel=2,this.isFree=this.level===2),this.text="Discard and level up two cards."}playTargets(){const t=super.playTargets();return t.push(this.targParty("P1")),t}handleAction(t){if(t.position<C.cardBeingPlayed.position&&(C.cardBeingPlayed.position-=1),t.param==="P1"){x.levelAndDiscard(t);const e=this.targParty("P2"),i=w.toActions(e);i.length===0?(this.logSpell(),x.spellCast()):C.ddf5(i)}else x.levelAndDiscard(t),this.logSpell(),x.spellCast()}targParty(t){const e=p.lvlHandActTarg(this.code,t);return e.deckPositionSkip=C.cardBeingPlayed.position,e}}class Be extends mt{lookup(t){return{["CFG"]:{c:()=>this.confC(),z:(i,s)=>this.confZ(i,s)},["CSG"]:{c:()=>this.cystgC(),z:(i,s)=>this.cystgZ(i,s)},["GRN"]:{c:()=>this.grenC(),z:(i,s)=>this.grenZ(i,s)},["TWG"]:{c:()=>this.twstrC(),z:(i,s)=>this.twstrZ(i,s)}}[t]}cardCast(t,e,i){this.lookup(t).z(e,i)}playTarg;constructor(t){super(t),this.playTarg=p.crActTarg("CARD",this.code,""),this.lookup(this.cardCode()).c()}playTargets(){const t=super.playTargets();return this.playTarg.param="P1",this.playTarg.notMe="",f.creatByTarget(this.playTarg).length>1&&t.push(this.playTarg),t}handleAction(t){const e=T.deTil(t.param),i=f.ddf6(t);if(e[0]==="P1"){this.playTarg.notMe=i.id,this.playTarg.param=T.enTil("P2",i.id);const s=w.toActions([this.playTarg,w.buttonTarget("CANC")]);C.ddf5(s)}else{this.logSpell();const s=f.jr5(e[1]);this.cardCast(this.cardCode(),s,i),x.spellCast()}}confC(){this.faction="T",this.rarity="C",this.name="Conflagrate",this.text=`Deal ${this.boof369} to two enemy creatures.`,this.playTarg.player="E"}confZ(t,e){const i=M.tick(),s=this.boof369;t.hurtDirect(s,this.code,i),e.hurtDirect(s,this.code,i)}cystgC(){this.faction="A",this.rarity="C",this.name="Cypien Steelgraft",this.text=`Two friendly creatures get Armor ${this.boof246}.`,this.playTarg.player="F",this.playTarg.canArmor=!0}cystgZ(t,e){const i=this.boof246;t.addArmor(i),e.addArmor(i)}grenC(){this.faction="N",this.rarity="C",this.name="Ghastly Renewal",this.text=`Give two friendly creatures Regenerate ${this.boof246}.`,this.playTarg.player="F",this.playTarg.canRegen=!0}grenZ(t,e){const i=this.boof246;t.addRegen(i),e.addRegen(i)}get tsboof(){return this.level+2}twstrC(){this.faction="U",this.rarity="C",this.name="Twinstrength";const t=this.tsboof;this.text=`Two friendly creatures get ${m.jr9(t,t)}.`,this.playTarg.player="F"}twstrZ(t,e){const i=this.tsboof;t.buff(i,i),e.buff(i,i)}}class Ur extends R{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Umbruk Icecrusher",this.jr1=this.boof61014,this.jr2=this.boof246,this.tribe.push("DN"),this.bonus={exist:this.ddp9(0,5,this.jr1+2,0)},this.text=`When ${this.name} ${m.dbdtap()}, deal that much damage to that player.~Allied Uterra: This gets ${m.jr9(2,2,!0)}, and Breakthrough.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("FR",this.code),i.jr4("DM",this.code),i}ddf8(t){if(t.trigger.type==="DM"){const e=t.event;return e.battle&&!e.isCreatTarg&&e.isCreatSrc&&e.srcId===t.creatId}return!1}jr8(t){if(t.trigger.type==="FR"){if(x.allied("U")){const e=f.jr5(t.creatId);e.breakthrough=!0,e.buff(2,2)}D.triggerDone()}else if(t.trigger.type==="DM"){const e=t.event;S.ddf3(e.target,e.dmg,this.code),D.triggerDone()}}}class Vr extends R{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Umbruk Lasher",this.jr1=this.boof71014,this.jr2=this.jr1-1,this.initBT=!0,this.tribe.push("DN"),this.text=`Allied Tempys: When ${this.name} ${m.dbdtap()} on your turn, you may deal that much damage to an enemy creature.`,this.bonus={exist:this.ddp9(0,this.jr1,0,0)}}jr3(t,e){const i=super.jr3(t,e);return i.jr4("FR",this.code),i}handleAction(t){f.ddf6(t).hurtDirect(parseInt(t.param),this.code),C.actionDone(!0)}ddf8(t){if(t.trigger.type==="DM"){const e=O.toDamage(t.event);return e.battle&&!e.isCreatTarg&&e.isCreatSrc&&e.srcId===t.creatId&&e.srcCreat.owner===S.getActiveB()}return!1}jr8(t){if(t.trigger.type==="FR"){if(x.allied("T")){const e=f.jr5(t.creatId),i=e.jr4("DM",this.code);i.interactive=!0,e.changed=!0}D.triggerDone()}else if(t.trigger.type==="DM"){const e=t.event,i=w.toActions(p.crEnemyActTarg("CARD",this.code,e.dmg.toString()));i.length>0?(i.push(C.noneEndTrigger()),C.ddf5(i)):D.triggerDone()}}}class He extends R{lookup(t){return{["CBB"]:{c:()=>this.cindC(),f:i=>this.cindF(i)},["EBW"]:{c:()=>this.ebwC(),f:i=>this.ebwF(i)},["IBR"]:{c:()=>this.ibrfC(),f:i=>this.ibrfF(i)},["SBI"]:{c:()=>this.sbiC(),f:i=>this.sbiF(i)}}[t]}targAction(t,e){this.lookup(t).f(e)}enemy=!1;ftext="";constructor(t){super(t),this.lookup(this.cardCode()).c(),this.text=`Forge: If you are rank ${this.level+1} or higher, `+this.ftext,this.ftext=""}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("FR",this.code);return s.interactive=!0,i}handleAction(t){const e=f.ddf6(t);this.targAction(this.cardCode(),e),C.actionDone(!0)}jr8(t){if(f.jr5(t.creatId).rank>this.level){const i=p.crActTarg("CARD",this.code,t.creatId);this.enemy?i.player="E":i.hint=["BF"];const s=w.toActions(i);s.length>0?C.ddf5(s):D.triggerDone()}else D.triggerDone()}ebwC(){this.faction="N",this.rarity="C",this.name="Ebonbound Warlord",this.jr1=this.boof3714,this.jr2=this.jr1+4,this.tribe.push("VP"),this.enemy=!0;const t=this.boof369n;this.ftext=`give an enemy creature ${m.jr9(t,t)}.`}ebwF(t){const e=this.boof369n;t.buff(e,e)}sbiC(){this.faction="U",this.rarity="C",this.name="Shardbound Invoker",this.jr1=this.boof4714,this.jr2=this.jr1+1,this.tribe.push("TK");const t=this.boof359;this.ftext=`give a creature ${m.jr9(t,t)}.`}sbiF(t){const e=this.boof359;t.buff(e,e)}cindC(){this.faction="T",this.rarity="C",this.name="Cinderbound Barbarian",this.jr1=this.boof3612,this.jr2=this.jr1,this.tribe.push("FR","AS");const t=this.boof6912;this.enemy=!0,this.ftext=`deal ${t} damage to an enemy creature.`}cindF(t){t.hurtDirect(this.boof6912,this.code)}ibrfC(){this.faction="A",this.rarity="C",this.name="Ironbound Reinforcements",this.jr1=this.lValN([3,6,8]),this.jr2=this.jr1*2,this.tribe.push("GN");const t=this.boof5812;this.ftext=`give a creature ${m.jr9(t,0)}.`}ibrfF(t){t.buff(this.boof5812,0)}}class zr extends R{constructor(t){super(t),this.faction="T",this.rarity="C",this.name="Uranti Elementalist",this.jr1=this.boof4712,this.jr2=this.jr1-1,this.tribe.push("YT"),this.text=`Forge: You may move another friendly creature to an available lane adjacent to ${this.name}.`}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("FR",this.code);return s.interactive=!0,i}jr8(t){const e=f.jr5(t.creatId);if(this.emptySloots(e).length>0){const i=p.crFriendNotMeActTarg("CARD",e.id,this.code,T.enTil("P1",e.id)),s=w.toActions(i);s.length>0?(s.push(C.noneEndTrigger()),C.ddf5(s)):D.triggerDone()}else D.triggerDone()}handleAction(t){const e=T.deTil(t.param);e[0]==="P1"?C.ddf5(this.getCardActions(t)):(f.jr5(e[1]).move(t.lane),C.actionDone(!0))}emptySloots(t,e=""){return C.emptyAdjacents(t,T.enTil("P2",e))}getCardActions(t,e){const i=T.deTil(t.param),s=f.ddf6(t),h=f.jr5(i[1]),d=this.emptySloots(h,s.id);return d.push(C.cancelAction()),d}}class Zr extends R{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Uranti Heartseeker",this.jr1=this.boof4915,this.jr2=this.jr1,this.initDefend=!0,this.tribe.push("YT"),this.addSp("D",this.jr1),this.text=`Activate: Deal ${this.jr1} damage to an enemy creature or player with exactly ${this.jr1} health.`}canActivate(t){return this.findVictims(t.id).length>0}startActivation(t){const e=this.findVictims(t.id);e.push(C.cancelAction()),C.ddf5(e)}handleAction(t){if(t.zone==="F")f.ddf6(t).hurtDirect(this.jr1,this.code);else{const i=t;S.ddf3(i.playerA,this.jr1,this.code)}f.jr5(t.param).endActivation()}findVictims(t){const e=this.jr1,i=p.crEnemyTarg(),h=f.creatByTarget(i).filter(g=>g.health===e).map(g=>p.fieldSelectAction("CARD",g.lane,g.owner)),d=S.toPlayer("E");return d.health===e&&h.push(p.playerSelectAction("CARD",d.isPlayerA)),h.forEach(g=>{g.host=this.code,g.param=t}),h}}class Yr extends R{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Vaerus, Herald of Fury",this.jr1=15,this.jr2=12,this.initMobile=2,this.tribe.push("DG"),this.hints=["OL"],this.text="Each friendly creature battles an additional time on each of your turns.",this.bonus={exist:this.ddp9(0,0,30,0)}}jr3(t,e){const i=super.jr3(t,e);return i.jr4("EF",this.code),i.jr4("TS",this.code),i}ddf8(t){if(t.event.code==="ENT"){const e=O.toCreature(t.event);return t.ownerPlayerA===e.creature.owner&&t.ownerPlayerA===S.getActiveB()}else if(t.event.code==="TRS")return t.event.playerA===t.ownerPlayerA;return!1}giveXtra(t,e){t.hasMod(e)||(t.extraBattles+=1,t.addMod(p.mod("TK",!0,e)))}jr8(t){if(t.event.code==="ENT"){const e=O.toCreature(t.event);e.creature.id===t.creatId?f.ddf1().forEach(i=>{this.giveXtra(i,t.creatId)}):bt.itBirthedFirst(e.creature.id,t.creatId)&&this.giveXtra(e.creature,t.creatId)}else t.event.code==="TRS"&&f.ddf1().forEach(e=>{e.extraBattles+=1,e.hasMod(t.creatId)||e.addMod(p.mod("TK",!0,t.creatId))});D.triggerDone()}}class I extends R{constructor(t){super(t),this.cardConstruct(this.cardCode())}cardConstruct(t){({["AEN"]:()=>this.anvenf(),["AGU"]:()=>this.avguard(),["BTH"]:()=>this.batthid(),["BBB"]:()=>this.bart(),["BLW"]:()=>this.blitwi(),["BWG"]:()=>this.brambleguard(),["CHY"]:()=>this.cavernhyd(),["CDC"]:()=>this.cindcol(),["CNM"]:()=>this.cindmy(),["CTG"]:()=>this.citg(),["CWK"]:()=>this.crag(),["DBP"]:()=>this.prowler(),["DMR"]:()=>this.raptor(),["DBR"]:()=>this.bearride(),["DTD"]:()=>this.dmaw(),["DSZ"]:()=>this.duskzomb(),["FWB"]:()=>this.fangbear(),["FWR"]:()=>this.ravager(),["FFG"]:()=>this.ffang(),["FMS"]:()=>this.firemane(),["FPR"]:()=>this.flop(),["FGA"]:()=>this.falpha(),["FGB"]:()=>this.fbeta(),["FGO"]:()=>this.fomega(),["FPM"]:()=>this.minot(),["FPS"]:()=>this.forgeplate(),["GGE"]:()=>this.geist(),["GGH"]:()=>this.ghast(),["GGS"]:()=>this.ggs(),["GCL"]:()=>this.glacial(),["IWC"]:()=>this.warcharger(),["LWY"]:()=>this.lwyrm(),["LHY"]:()=>this.lyshyd(),["KDC"]:()=>this.kadc(),["MRF"]:()=>this.marrow(),["MMI"]:()=>this.mmin(),["MMO"]:()=>this.mmop(),["NGW"]:()=>this.narg(),["NCW"]:()=>this.necrotic(),["NXC"]:()=>this.nexcore(),["NAM"]:()=>this.nyam(),["OBD"]:()=>this.battledroid(),["OSP"]:()=>this.oss(),["OSL"]:()=>this.ogsl(),["PRG"]:()=>this.perd(),["RHY"]:()=>this.ravh(),["RHC"]:()=>this.rime(),["RSP"]:()=>this.runprim(),["SCS"]:()=>this.scorp(),["SCD"]:()=>this.scout(),["SFT"]:()=>this.scrap(),["SBA"]:()=>this.sparkblade(),["SKB"]:()=>this.sparkbot(),["SBR"]:()=>this.sparkass(),["STM"]:()=>this.sparkman(),["SSN"]:()=>this.sfsent(),["SGI"]:()=>this.stonefist(),["SCL"]:()=>this.stormcall(),["SML"]:()=>this.lurker(),["TGS"]:()=>this.tsprout(),["TGN"]:()=>this.tgnome(),["TWS"]:()=>this.tscout(),["TWT"]:()=>this.tund(),["URD"]:()=>this.unrelenting(),["VBK"]:()=>this.vblock(),["VTC"]:()=>this.vtech(),["WTW"]:()=>this.waterwalk(),["WPD"]:()=>this.windprime(),["XCR"]:()=>this.xithcrush(),["XHU"]:()=>this.hulk(),["YWC"]:()=>this.yetiwar(),["ZIN"]:()=>this.zombinf()})[t]()}sist(){this.rarity="R",this.level===1?this.hints=["LV"]:this.consistent=!0}anvenf(){this.faction="A",this.rarity="C",this.name="Anvillon Enforcer",this.jr1=this.boof5711,this.jr2=this.jr1-1,this.initArmor=this.boof246,this.tribe.push("RB")}avguard(){this.faction="T",this.rarity="R",this.name="Avalanche Guardian",this.jr1=this.boof5915,this.jr2=this.lValN([8,15,23]),this.initMobile=1,this.initDefend=!0,this.tribe.push("IC","EL")}bart(){this.faction="U",this.rarity="H",this.name="Big Bad Bartok",this.jr1=this.level+8,this.jr2=this.jr1,this.consistent=!0,this.hints=["DL"],this.tribe.push("TG")}batthid(){this.faction="U",this.name="Batterhide",this.jr1=this.boof3814,this.jr2=this.jr1+3,this.sist(),this.initBT=!0,this.tribe.push("DN")}battledroid(){this.faction="A",this.rarity="H",this.name="Oreian Battledroid",this.jr1=this.lValN([5,7,17]),this.jr2=1,this.initArmor=this.jr1,this.tribe.push("RB")}bearride(){this.faction="U",this.rarity="C",this.name="Deepwood Bear Rider",this.jr1=this.lValN([5,16,18]),this.jr2=this.lValN([2,8,10]),this.tribe.push("LP")}blitwi(){this.faction="N",this.name="Blight Witch",this.jr1=this.lValN([2,5,9]),this.jr2=this.boof71117,this.sist(),this.initRegen=this.boof234,this.tribe.push("ZB")}brambleguard(){this.faction="U",this.rarity="C",this.name="Bramblewood Guardian",this.jr1=this.boof2612,this.jr2=this.lValN([9,14,24]),this.tribe.push("PL")}cavernhyd(){this.faction="U",this.rarity="C",this.name="Cavern Hydra",this.jr1=this.boof4711,this.jr2=this.boof71015,this.initRegen=this.boof135,this.tribe.push("HY")}cindcol(){this.faction="T",this.rarity="C",this.name="Cinder Colossus",this.jr1=this.lValN([3,13,24]),this.jr2=this.lValN([4,14,27]),this.initDefend=!0,this.level===1&&(this.hints=["LV"]),this.tribe.push("ER","EL")}cindmy(){this.faction="T",this.rarity="C",this.name="Cinder Mystic",this.jr1=this.lValN([4,11,21]),this.jr2=this.boof3714,this.tribe.push("FR","AS")}citg(){this.faction="A",this.rarity="C",this.name="Citadel Guard",this.jr1=this.lValN([8,12,25]),this.jr2=this.lValN([9,13,30]),this.initDefend=!0,this.tribe.push("RB")}crag(){this.faction="T",this.rarity="C",this.name="Crag Walker",this.jr1=this.lValN([7,12,18]),this.jr2=this.boof246,this.initMobile=1,this.tribe.push("DN")}dmaw(){this.faction="N",this.rarity="L",this.name="Duskmaw, Twilight Drake",this.jr1=this.boof61017,this.jr2=this.boof5915,this.initMobile=1,this.tribe.push("ST","DG")}duskzomb(){this.faction="N",this.rarity="C",this.name="Duskspire Zombie",this.jr1=this.lValN([2,5,16]),this.jr2=this.lValN([5,8,19]),this.initRegen=4,this.tribe.push("ZB")}falpha(){this.faction="A",this.rarity="C",this.name="Forge Guardian Alpha",this.jr1=this.lValN([4,8,20]),this.jr2=this.lValN([8,14,26]),this.initDefend=!0,this.tribe.push("RB","GD")}fangbear(){this.faction="U",this.rarity="C",this.name="Fangwood Bear",this.jr1=this.boof61016,this.jr2=this.jr1,this.tribe.push("BR")}fbeta(){this.faction="A",this.rarity="R",this.name="Forge Guardian Beta",this.jr1=this.lValN([5,8,20]),this.jr2=this.lValN([3,6,18]),this.initArmor=this.boof124,this.tribe.push("RB","GD")}ffang(){this.faction="U",this.rarity="C",this.name="Featherfang",this.jr1=this.boof61218,this.jr2=this.boof4812,this.tribe.push("DN")}firemane(){this.faction="T",this.rarity="C",this.name="Firemane Steed",this.jr1=this.lValN([3,6,16]),this.jr2=this.lValN([6,9,19]),this.initMobile=2,this.tribe.push("FR","EL")}flop(){this.faction="T",this.rarity="C",this.name="Flowstone Primordial",this.jr1=this.lValN([6,7,15]),this.jr2=this.jr1+1,this.tribe.push("FR","EL")}fomega(){this.faction="A",this.rarity="L",this.name="Forge Guardian Omega",this.jr1=this.boof255080,this.jr2=this.jr1,this.initMobile=this.boof124,this.initArmor=this.initMobile*10,this.initBT=!0,this.initAggro=!0,this.consistent=!0,this.tribe.push("RB","GD")}forgeplate(){this.faction="A",this.rarity="C",this.name="Forgeplate Sentry",this.jr1=this.boof4915,this.jr2=this.jr1,this.initArmor=this.boof135,this.tribe.push("RB")}ggs(){this.faction="N",this.rarity="C",this.name="Grimgaunt Spectre",this.jr1=this.lValN([3,11,14]),this.jr2=this.jr1,this.initMobile=1,this.hints=["LV"],this.tribe.push("GG")}geist(){this.faction="N",this.rarity="C",this.name="Grave Geist",this.jr1=this.boof71118,this.jr2=this.boof4711,this.tribe.push("ST")}ghast(){this.faction="N",this.rarity="C",this.name="Grave Ghast",this.jr2=this.boof71013,this.jr1=this.jr2-2,this.initRegen=this.boof246,this.tribe.push("ZB")}glacial(){this.faction="T",this.rarity="C",this.name="Glacial Colossus",this.jr1=this.boof61016,this.jr2=this.lValN([8,13,19]),this.tribe.push("IC","EL"),this.initDefend=!0}hulk(){this.faction="N",this.rarity="C",this.name="Xithian Hulk",this.jr1=this.boof4814,this.jr2=this.jr1+3,this.tribe.push("AB")}kadc(){this.faction="T",this.rarity="C",this.name="Kadras Colossus",this.jr1=this.lValN([6,11,13]),this.jr2=this.jr1,this.tribe.push("GT"),this.hints=["DL"]}lurker(){this.faction="U",this.rarity="C",this.name="Swampmoss Lurker",this.jr1=this.lValN([8,13,22]),this.jr2=this.lValN([4,6,15]),this.tribe.push("DN")}lwyrm(){this.faction="T",this.rarity="C",this.name="Lightning Wyrm",this.jr1=this.boof4711,this.jr2=this.boof258,this.tribe.push("LT","EL"),this.initAggro=!0}lyshyd(){this.faction="U",this.rarity="C",this.name="Lysian Hydra",this.jr1=this.boof5914,this.jr2=this.jr1+1,this.initRegen=this.level,this.tribe.push("HY")}marrow(){this.faction="N",this.rarity="C",this.name="Marrow Fiend",this.jr1=this.boof81117,this.jr2=this.lValN([1,5,13]),this.tribe.push("SK")}minot(){this.faction="A",this.name="Forgeplate Minotaur",this.jr1=this.lValN([2,8,16]),this.jr2=this.lValN([4,9,17]),this.sist(),this.initArmor=this.level,this.tribe.push("RB")}mmin(){this.faction="A",this.rarity="C",this.name="Metamind Infiltrator",this.jr1=this.boof5917,this.jr2=this.jr1-1,this.tribe.push("MM")}mmop(){this.faction="A",this.rarity="C",this.name="Metamind Operator",this.jr1=this.boof4610,this.jr2=this.lValN([10,14,18]),this.tribe.push("MM")}narg(){this.faction="T",this.rarity="C",this.name="Nargath Warrior",this.jr1=this.boof51014,this.jr2=this.jr1+1,this.tribe.push("ER","AS")}necrotic(){this.faction="N",this.rarity="C",this.name="Necrotic Wurm",this.jr1=this.lValN([4,7,18]),this.jr2=this.lValN([5,8,19]),this.tribe.push("WR")}nexcore(){this.faction="A",this.rarity="C",this.name="Nexus Core",this.jr1=0,this.jr2=this.lValN([15,25,40]),this.tribe.push("RB"),this.initDefend=!0}nyam(){this.faction="N",this.rarity="C",this.name="Nyrali Ambusher",this.jr1=this.boof71117,this.jr2=this.lValN([3,6,13]),this.tribe.push("OZ")}ogsl(){this.faction="U",this.rarity="C",this.name="Overgrown Spineleaf",this.jr1=this.lValN([6,12,16]),this.jr2=this.boof4812,this.tribe.push("PL")}oss(){this.faction="N",this.rarity="R",this.name="Ossuary Spirit",this.jr1=this.lValN([1,3,6]),this.jr2=this.boof91420,this.initRegen=this.jr1+2,this.tribe.push("ST")}perd(){this.faction="N",this.rarity="C",this.name="Perdition Guard",this.jr1=this.lValN([3,12,15]),this.jr2=this.jr1-1,this.tribe.push("NG")}prowler(){this.faction="U",this.rarity="C",this.name="Deepbranch Prowler",this.jr1=this.lValN([8,9,10]),this.jr2=this.jr1,this.tribe.push("CT"),this.hints=["DL"],this.initBT=!0}raptor(){this.faction="U",this.rarity="C",this.name="Deepmoss Raptor",this.jr1=this.lValN([2,13,16]),this.jr2=this.jr1,this.level===1&&(this.hints=["LV","RT"]),this.tribe.push("DN")}ravager(){this.faction="U",this.rarity="C",this.name="Fangwood Ravager",this.jr1=this.boof5917,this.jr2=this.jr1,this.tribe.push("BE")}ravh(){this.faction="U",this.rarity="C",this.name="Ravenous Hydra",this.jr1=this.boof5813,this.jr2=this.jr1+this.level,this.initRegen=this.level,this.initBT=!0,this.tribe.push("HY")}rime(){this.faction="T",this.rarity="C",this.name="Rimehorn Charger",this.jr1=this.lValN([5,8,10]),this.jr2=this.jr1+3,this.initMobile=1,this.hints=["DL"],this.tribe.push("RM")}runprim(){this.faction="T",this.name="Runestorm Primordial",this.jr1=this.boof3714,this.jr2=this.jr1-1,this.sist(),this.initAggro=!0,this.tribe.push("LT","EL")}scorp(){this.faction="N",this.rarity="C",this.name="Scavenger Scorpion",this.jr1=this.lValN([6,9,11]),this.jr2=this.jr1,this.initRegen=this.level,this.hints=["DL"],this.tribe.push("AB")}scout(){this.faction="A",this.rarity="H",this.name="Scout Drone",this.jr1=this.boof246,this.jr2=this.jr1,this.isFree=this.level>1,this.hints=[this.level===1?"LV":"DL"],this.tribe.push("RB")}scrap(){this.faction="A",this.rarity="H",this.name="Scrapforge Titan",this.jr1=this.lValN([1,5,20]),this.jr2=this.jr1,this.initArmor=this.lValN([1,5,10]),this.level===1&&(this.hints=["LV","RT"]),this.tribe.push("RB")}sfsent(){this.faction="A",this.rarity="C",this.name="Spiritforge Sentinel",this.jr1=this.lValN([3,6,9]),this.jr2=this.jr1*2,this.initArmor=this.lValN([1,2,6]),this.tribe.push("RB")}sparkbot(){this.faction="A",this.rarity="C",this.name="Spark Bot",this.jr1=this.boof5914,this.jr2=this.lValN([6,11,16]),this.tribe.push("RB")}sparkblade(){this.faction="A",this.rarity="C",this.name="Sparkblade Assassin",this.jr1=this.lValN([4,12,14]),this.jr2=this.lValN([5,13,15]),this.tribe.push("HM")}sparkass(){this.faction="T",this.rarity="C",this.name="Sparkbrand Asir",this.jr1=this.lValN([2,7,9]),this.jr2=this.lValN([6,11,13]),this.initAggro=!0,this.tribe.push("LT","AS")}sparkman(){this.faction="T",this.rarity="R",this.name="Sparktail Manticore",this.jr1=this.boof369,this.jr2=this.boof71116,this.initAggro=!0,this.initMobile=1,this.tribe.push("MT")}stonefist(){this.faction="T",this.rarity="C",this.name="Stonefist Giant",this.jr1=this.lValN([3,7,16]),this.jr2=this.lValN([6,10,24]),this.tribe.push("ER","EL")}stormcall(){this.faction="T",this.rarity="C",this.name="Storm Caller",this.jr1=this.lValN([8,11,14]),this.jr2=this.jr1-2,this.tribe.push("WN","AS")}tgnome(){this.faction="A",this.rarity="C",this.name="Technognome",this.jr1=this.lValN([3,9,19]),this.jr2=this.jr1,this.level===1&&(this.hints=["LV"]),this.tribe.push("GN")}tscout(){this.faction="A",this.rarity="C",this.name="Tower Scout",this.jr1=this.boof5915,this.jr2=this.jr1,this.initMobile=1,this.tribe.push("HM")}tund(){this.faction="A",this.rarity="C",this.name="Tundra Watcher",this.jr1=this.lValN([5,10,12]),this.jr2=this.lValN([8,11,13]),this.hints=["DL"],this.tribe.push("RB")}tsprout(){this.faction="U",this.rarity="C",this.name="Tanglesprout",this.jr1=this.boof7911,this.jr2=this.jr1+1,this.hints=["DL"],this.tribe.push("PL")}unrelenting(){this.faction="N",this.rarity="H",this.name="Unrelenting Dead",this.jr1=this.boof4814,this.jr2=this.jr1,this.initRegen=this.jr1,this.tribe.push("ZB")}vblock(){this.faction="A",this.rarity="R",this.name="Vault Blockade",this.jr1=0,this.jr2=this.boof135,this.initArmor=this.boof101520,this.initDefend=!0,this.tribe.push("RB")}vtech(){this.faction="A",this.rarity="C",this.name="Vault Technician",this.jr1=this.boof61218,this.jr2=this.lValN([3,9,15]),this.tribe.push("HM")}warcharger(){this.faction="A",this.rarity="C",this.name="Ionic Warcharger",this.jr1=this.boof4915,this.jr2=this.lValN([7,12,18]),this.initMobile=1,this.tribe.push("RB")}waterwalk(){this.faction="T",this.rarity="C",this.name="Water Walker",this.jr1=this.lValN([5,12,14]),this.jr2=this.lValN([2,9,11]),this.tribe.push("IC","AS")}windprime(){this.faction="T",this.rarity="C",this.name="Wind Primordial",this.jr2=this.boof4814,this.jr1=this.jr2+2,this.initMobile=this.level,this.tribe.push("WN","EL")}xithcrush(){this.faction="N",this.rarity="C",this.name="Xithian Crusher",this.jr1=this.lValN([4,10,16]),this.jr2=this.jr1+2,this.tribe.push("AB")}yetiwar(){this.faction="T",this.rarity="C",this.name="Yeti Warcaller",this.jr1=this.boof248,this.jr2=this.lValN([10,15,23]),this.tribe.push("YT")}zombinf(){this.faction="N",this.rarity="C",this.name="Zombie Infantry",this.jr1=this.boof61015,this.jr2=this.jr1-1,this.tribe.push("ZB")}}class Kr extends mt{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Varna's Pact";const e=this.lValS(["a","two","three"]),i=this.level===1?"":"s",s=this.level===1?"was":"were";this.text=`Put ${e} random creature${i} that ${s} destroyed this game into ${e} lane${i}.`}playTargets(){const t=super.playTargets();return t.push(this.fieldTarget("P1",[])),t}handleAction(t){const e=T.deTil(t.param);if(e[0]==="P1")if(this.level===1)this.endSpell([t.lane],t.playerA);else{const i=this.fieldTarget("P2",[t.lane]);C.ddf5(w.toActions(i))}else if(e[0]==="P2"){const i=[t.lane,parseInt(e[1])];if(this.level===2)this.endSpell(i,t.playerA);else{const s=this.fieldTarget("P3",i);C.ddf5(w.toActions(s))}}else this.endSpell([t.lane,parseInt(e[1]),parseInt(e[2])],t.playerA)}endSpell(t,e){this.logSpell();const i=M.tick();t.forEach(s=>{const h=$.gravedigger();h&&f.birthCreature(h,"R",e,s,i)}),x.spellCast()}fieldTarget(t,e){const i=p.actionTarget("TF","CARD",this.code,T.enTil(t,...e));return i.player="F",i.hint=["FL"],i.lanes=f.laneIdx.filter(s=>!e.includes(s)),i}}class Xr extends ge{jr3(t,e){const i=super.jr3(t,e);return i.jr4("LG",this.code),i}ddf8(t){const e=t.event;return t.trigger.type==="LG"&&t.ownerPlayerA===e.playerA}jr8(t){const e=t.event,i=this.boof124*e.healAmt;f.jr5(t.creatId).buff(i,i),D.triggerDone()}}class qr extends R{constructor(t){super(t),this.faction="U",this.rarity="R",this.name="Wildwood Sower",this.jr1=this.boof3612,this.jr2=this.lValN([6,11,18]),this.tribe.push("HM");const e=Z.minionBuff(this.level);this.text=`When you play a spell, you may put a ${e}/${e} ${Z.minionName(this.level)} into an available lane.`,this.bonus={exist:this.ddp9(1,e*2,e,0)*.5}}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("PC",this.code);return s.interactive=!0,i}handleAction(t){f.birthCreature(Z.minionCode(this.level),"P",t.playerA,t.lane),C.actionDone(!0)}ddf8(t){if(t.trigger.type==="PC"){const e=t.event;return e.playerA===t.ownerPlayerA&&W.getCard(e.cardCode).type==="S"}return!1}jr8(t){const e=p.emptyPlayerActTarg("F","CARD",this.code,""),i=w.toActions(e);i.length===0?D.triggerDone():(i.push(C.noneEndTrigger()),C.ddf5(i))}}class jr extends R{constructor(t){super(t),this.faction="T",this.rarity="C",this.name="Windcaller Shaman",this.jr1=this.boof3713,this.jr2=this.jr1+4,this.tribe.push("WN","AS"),this.text=`Forge: You may move another friendly ${m.levelGateText(this.level,!0)}creature to an available lane adjacent to ${this.name}.`}jr3(t,e){const i=super.jr3(t,e),s=i.jr4("FR",this.code);return s.interactive=!0,i}jr8(t){const e=f.jr5(t.creatId);if(this.emptySloots(e).length>0){const i=p.crFriendNotMeActTarg("CARD",e.id,this.code,T.enTil("P1",e.id));i.level=w.ddf2(this.level);const s=w.toActions(i);s.length>0?(s.push(C.noneEndTrigger()),C.ddf5(s)):D.triggerDone()}else D.triggerDone()}handleAction(t){const e=T.deTil(t.param);if(e[0]==="P1"){const i=f.ddf6(t),s=f.jr5(e[1]),h=this.emptySloots(s,i.id);h.push(C.cancelAction()),C.ddf5(h)}else f.jr5(e[1]).move(t.lane),C.actionDone(!0)}emptySloots(t,e=""){return C.emptyAdjacents(t,T.enTil("P2",e))}}class Jr extends R{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Xithian Rotfiend",this.jr1=this.lValN([7,12,20]),this.jr2=this.jr1+1,this.tribe.push("AB");const e=-this.boof135;this.text=`When ${this.name} becomes opposed, it gets ${m.jr9(e,e)}.`}jr3(t,e){const i=super.jr3(t,e);return i.jr4("EF",this.code),i.jr4("MV",this.code),i}ddf8(t){if(t.trigger.type==="EF"||t.trigger.type==="MV"){const e=O.toCreature(t.event);return t.trigger.creatId===e.creature.id&&t.trigger.type==="MV"||e.creature.owner!==t.ownerPlayerA}return!1}jr8(t){let e=!1;const i=f.jr5(t.creatId),s=O.toCreature(t.event);if((i.id===s.creature.id&&i.opposed||s.creature.lane===f.oppositeLane(i.lane))&&(e=!0),e){const h=-this.boof135;i.buff(h,h)}D.triggerDone()}}class Qr extends R{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Zombie Titan",this.jr1=this.boof4712,this.jr2=this.jr1,this.tribe.push("ZB");const e=this.boof234;this.text=`While ${this.name} is in a side lane, it gets ${m.jr9(e,e,!0)} and Regenerate ${this.level}.`}jr3(t,e){const i=super.jr3(t,e),s=i.addEffect("PS",this.code);return s.area="C",i}enforceEffect(t,e){if(e.lane===1||e.lane===5){const i=this.boof234;[p.mod("AT",i,e.id),p.mod("HL",i,e.id),p.mod("MH",i,e.id),p.mod("RG",this.level,e.id)].forEach(h=>{e.addModSafe(h)})}else e.removeModSafe(e.id)}}class _r{cardCache=new Map;mapper={["AAK"]:Fi,["ABB"]:Pi,["AGC"]:pt,["AGK"]:X,["AGP"]:ut,["AGW"]:G,["ASG"]:G,["AFO"]:ye,["ATG"]:zt,["ART"]:zt,["ATP"]:Se,["AGM"]:re,["ALG"]:me,["AHL"]:Ki,["ALS"]:me,["ATZ"]:G,["ARB"]:zt,["AEN"]:I,["APM"]:Bi,["AQE"]:G,["AGD"]:Hi,["AFS"]:ie,["ABR"]:Lt,["AFR"]:X,["AMY"]:Lt,["ABL"]:G,["ATT"]:bt,["AGU"]:I,["AIV"]:Pt,["BTH"]:I,["BTI"]:pt,["BTN"]:me,["BBB"]:I,["BLH"]:zt,["BSP"]:Pt,["BWK"]:re,["BLW"]:I,["BSR"]:pt,["BMY"]:Ni,["BSW"]:ht,["BWW"]:we,["BTM"]:G,["BOS"]:Z,["BAW"]:pt,["BWG"]:I,["BTR"]:X,["BWD"]:pe,["BSG"]:Ri,["BSS"]:X,["BTS"]:pe,["BST"]:ce,["BWT"]:Mi,["BRF"]:re,["BWH"]:Ei,["BRN"]:le,["BZD"]:X,["BFM"]:X,["BSM"]:Ii,["CDT"]:re,["CMF"]:$e,["CTL"]:ut,["CCS"]:ht,["CHY"]:I,["CHV"]:Gi,["CRS"]:ye,["COD"]:ut,["CTI"]:X,["CHA"]:pt,["CHH"]:X,["CHR"]:De,["CBB"]:He,["CDC"]:I,["CFB"]:Lt,["CNM"]:I,["CSW"]:X,["CTG"]:I,["CCT"]:Oe,["CFG"]:Be,["CGF"]:At,["CGL"]:ht,["CSU"]:G,["CCR"]:pt,["CSB"]:At,["CWK"]:I,["CRC"]:Pt,["CYC"]:zt,["COZ"]:Z,["CYS"]:At,["CTW"]:G,["CTV"]:G,["CAG"]:G,["CBS"]:G,["CIN"]:ge,["CSH"]:ht,["CSG"]:Be,["DFR"]:X,["DHW"]:zt,["DSS"]:Pe,["DCR"]:ut,["DSK"]:At,["DBA"]:X,["DBP"]:I,["DMR"]:I,["DBR"]:I,["DCS"]:$t,["DGZ"]:ut,["DNK"]:$i,["DBN"]:X,["DDS"]:Oi,["DIS"]:se,["DSV"]:Wi,["DDD"]:X,["DZA"]:Z,["DZD"]:De,["DBT"]:G,["DFB"]:Rt,["DMW"]:ie,["DCH"]:se,["DTD"]:I,["DSZ"]:I,["DYB"]:G,["DBQ"]:Ui,["DYS"]:Vi,["DYL"]:zi,["EBW"]:He,["ESK"]:Pt,["EHW"]:Zi,["ETN"]:G,["EWE"]:xe,["ENP"]:G,["ESU"]:se,["ENR"]:G,["EPD"]:ut,["EPH"]:Xi,["EPS"]:Lt,["ESG"]:qi,["ESC"]:pe,["ESP"]:ji,["EWT"]:X,["EHN"]:pe,["EFM"]:Lt,["EFP"]:Ji,["EXD"]:G,["FWB"]:I,["FWR"]:I,["FFG"]:I,["FST"]:At,["FWK"]:At,["FIN"]:G,["FRR"]:ut,["FVA"]:G,["FWG"]:Z,["FWC"]:Pt,["FFU"]:ht,["FLH"]:$e,["FMS"]:I,["FSM"]:ut,["FBC"]:Lt,["FBI"]:zt,["FFS"]:ht,["FLN"]:G,["FRI"]:pt,["FSS"]:Pe,["FLS"]:zt,["FSH"]:ht,["FFD"]:At,["FRV"]:pt,["FSP"]:bt,["FPR"]:I,["FFL"]:G,["FGA"]:I,["FGB"]:I,["FGD"]:bt,["FGG"]:ie,["FGO"]:I,["FOL"]:ye,["FPM"]:I,["FPS"]:I,["FFM"]:xe,["FMD"]:Qi,["FME"]:Pt,["FSK"]:_i,["FWT"]:X,["FZS"]:G,["FUN"]:Z,["GOS"]:tr,["GHS"]:ie,["GHB"]:Oe,["GHR"]:er,["GRN"]:Be,["GTH"]:G,["GSC"]:re,["GMP"]:$t,["GTT"]:ir,["GCL"]:I,["GCR"]:G,["GLF"]:pt,["GRW"]:pt,["GSW"]:X,["GVS"]:At,["GSS"]:X,["GBG"]:At,["GGE"]:I,["GGH"]:I,["GRP"]:rr,["GGD"]:Rt,["GGR"]:Rt,["GGP"]:Rt,["GGS"]:I,["GRM"]:ut,["GHT"]:pt,["GMR"]:At,["HMF"]:bt,["HTR"]:we,["HAR"]:G,["HFA"]:Ce,["HOD"]:bt,["HWM"]:ge,["HOX"]:se,["HGS"]:sr,["HTP"]:ar,["IBF"]:ut,["ITO"]:se,["IVS"]:ut,["IWC"]:I,["IHA"]:re,["IBR"]:He,["IMD"]:De,["IMA"]:X,["IZL"]:nr,["IZR"]:or,["IZK"]:zt,["IFL"]:le,["IFR"]:G,["JPK"]:G,["KDC"]:I,["KAW"]:zt,["KOD"]:ht,["KIW"]:hr,["KTS"]:Fe,["KKK"]:we,["LOD"]:ut,["LFA"]:lr,["LKP"]:cr,["LGT"]:X,["LBR"]:G,["LSK"]:le,["LWY"]:I,["LBD"]:X,["LSS"]:Pe,["LBL"]:$t,["LSP"]:ge,["LUC"]:xe,["LMV"]:X,["LHY"]:I,["LYR"]:le,["LYS"]:G,["MMH"]:pt,["MRF"]:I,["MOE"]:X,["MXW"]:pt,["MSP"]:se,["MMA"]:X,["MMX"]:At,["MMI"]:I,["MMO"]:I,["MMV"]:Pt,["MPH"]:G,["MSC"]:G,["MTS"]:si,["MTT"]:ur,["MML"]:dr,["MMW"]:fr,["MDE"]:ii,["MBP"]:ht,["MND"]:ht,["NNS"]:G,["NGB"]:pt,["NGW"]:I,["NSL"]:G,["NCF"]:G,["NCS"]:ht,["NCW"]:I,["NCV"]:G,["NSW"]:gr,["NDR"]:mr,["NEM"]:se,["NSH"]:ut,["NXA"]:pr,["NXC"]:I,["NXG"]:ht,["NXP"]:ei,["NXT"]:me,["NGT"]:Rt,["NGQ"]:yr,["NSD"]:Z,["NCL"]:ut,["NFF"]:ht,["NAM"]:I,["NOZ"]:At,["NSY"]:X,["ONN"]:br,["OXA"]:Ar,["OXM"]:X,["OXP"]:kr,["OOZ"]:Z,["OBB"]:vr,["OEX"]:G,["OWH"]:Tr,["OBD"]:I,["OFM"]:X,["OJC"]:bt,["OPK"]:X,["OSV"]:ce,["OWW"]:ie,["OHV"]:ht,["ODC"]:Cr,["OSP"]:I,["OSL"]:I,["OWF"]:ut,["OXS"]:Sr,["PHM"]:X,["PPM"]:ht,["PSM"]:X,["PLW"]:ut,["PRG"]:I,["PRI"]:si,["PHS"]:pt,["PTB"]:ut,["PSC"]:ht,["PSH"]:Pt,["PTR"]:G,["PSG"]:G,["PMS"]:G,["POX"]:At,["PYG"]:Oe,["PYS"]:ut,["RBH"]:wr,["ROK"]:ut,["RPT"]:Z,["RHY"]:I,["RTS"]:Lt,["RHU"]:ce,["RSC"]:Fe,["RLW"]:bt,["RFL"]:Dr,["RHC"]:I,["ROG"]:G,["RWC"]:pe,["RFA"]:Ce,["RSE"]:xr,["RBG"]:Ue,["RGG"]:Pt,["RSZ"]:At,["RSP"]:I,["RHW"]:bt,["SBF"]:$t,["SAP"]:G,["SPL"]:Z,["SVO"]:G,["SSE"]:$t,["SXP"]:Z,["SXD"]:Z,["SXT"]:Z,["STS"]:ut,["SCS"]:I,["SMD"]:X,["SFS"]:Fr,["SCD"]:I,["SFT"]:I,["SOC"]:G,["SOA"]:G,["SOD"]:G,["SOK"]:le,["SOT"]:G,["SDL"]:Z,["SAD"]:Pr,["SHG"]:G,["SBI"]:He,["SCC"]:Fe,["SPD"]:$t,["SPM"]:$t,["STD"]:pt,["SHS"]:re,["SGF"]:ht,["SKG"]:ei,["SSR"]:Pt,["SNB"]:G,["SNP"]:ut,["SRD"]:ut,["SSH"]:Se,["SRM"]:ht,["SRH"]:Rt,["SDN"]:X,["SHV"]:G,["SRP"]:G,["SGG"]:X,["SBA"]:I,["SKB"]:I,["SBR"]:I,["SKS"]:ce,["STM"]:I,["SBD"]:X,["SCV"]:Br,["SFM"]:At,["SSN"]:I,["SSM"]:Pt,["SLH"]:Hr,["SPN"]:Z,["SSI"]:ge,["SND"]:Fe,["SRV"]:Ue,["STR"]:G,["SPU"]:Z,["XYR"]:Z,["SPH"]:Nr,["SSA"]:ht,["STO"]:G,["SDR"]:bt,["SOL"]:ri,["SOV"]:G,["SHK"]:le,["SWR"]:Mr,["SER"]:Rr,["SFA"]:Ce,["STG"]:Er,["SSS"]:Pe,["SSK"]:X,["SWG"]:ce,["SWM"]:ht,["STN"]:G,["SGI"]:I,["SBG"]:Ir,["SCL"]:I,["SGA"]:Ce,["STP"]:G,["SSG"]:Pt,["SVH"]:Lt,["SIN"]:G,["SYL"]:X,["SEV"]:pt,["SML"]:I,["SYO"]:Lr,["TST"]:ut,["TBA"]:$t,["TGL"]:G,["TGS"]:I,["TPT"]:G,["TDW"]:bt,["TNL"]:$r,["TEX"]:ye,["TGN"]:I,["TSM"]:ye,["TUP"]:G,["TOT"]:G,["TAB"]:ii,["TGI"]:X,["TDS"]:De,["TSP"]:Or,["TPG"]:Se,["TMG"]:Se,["TBB"]:$e,["TOB"]:G,["TWS"]:I,["TVG"]:Yi,["TXS"]:G,["TFK"]:Z,["TFD"]:Z,["TFF"]:Z,["TCG"]:G,["TWT"]:I,["TRN"]:ut,["TGK"]:Ue,["TSL"]:Wr,["TTF"]:Z,["TWG"]:Be,["UGM"]:Pt,["UGL"]:X,["UIC"]:Ur,["ULR"]:Vr,["URD"]:I,["UBL"]:G,["UCM"]:ht,["UEM"]:zr,["UHS"]:Zr,["UIM"]:ht,["UWL"]:X,["UWS"]:X,["UIW"]:X,["UTM"]:X,["UTR"]:bt,["URB"]:Lt,["UPM"]:ie,["VRP"]:Kr,["VBK"]:I,["VTC"]:I,["VTW"]:ce,["VGN"]:At,["VND"]:X,["VNF"]:pt,["VNS"]:X,["VSK"]:G,["VCH"]:ut,["VGR"]:G,["VOB"]:G,["VCG"]:$t,["VES"]:Lt,["VYE"]:G,["WBY"]:pt,["WBU"]:pt,["WMR"]:ht,["WMM"]:G,["WTK"]:ri,["WTW"]:I,["WTA"]:Xr,["WWP"]:X,["WWR"]:ht,["WOD"]:ut,["WFM"]:ie,["WWS"]:qr,["WBH"]:xe,["WCS"]:jr,["WPD"]:I,["WFB"]:X,["WFS"]:ht,["WBG"]:$t,["XCR"]:I,["XDH"]:pt,["XHS"]:At,["XHU"]:I,["XRF"]:Jr,["XSH"]:ht,["XDV"]:we,["XRW"]:G,["YWC"]:I,["YNS"]:Rt,["ZPM"]:ht,["ZTR"]:Z,["ZTU"]:At,["ZIN"]:I,["ZBS"]:Z,["ZST"]:Z,["ZMT"]:Qr,["ZMB"]:Z,["ZSH"]:$t};makeCard(t){try{let e;if(t==="SOV3"?e=new Yr(t):t==="SOC3"?e=new X(t):t==="LOD3"?e=new Li(t):t==="GOS3"?e=new Gr(t):e=new this.mapper[Mt.extractCardCode(t)](t),e.type==="C"){const i=e;i.spice=[{icon:"A",num:i.jr1},{icon:"H",num:i.jr2}].concat(i.spice??[])}return e}catch(e){throw console.error("Make card screwed up on code: "+t),e}}getCard(t){let e=this.cardCache.get(t);return e||(e=this.makeCard(t),this.cardCache.set(t,e)),e}}const W=new _r;class ts{registry;constructor(){this.registry=[]}find(t){const e=this.registry.find(i=>i.action===t);if(e)return e;throw console.trace(),new Error("Attempted to find non-existing clicker")}entoggle(t,e){const i=this.find(t);i.enabled=e}add(t){this.registry.push(t)}get(t){return this.find(t)}remove(t){const e=this.registry.findIndex(i=>i.action===t);e>-1&&this.registry.splice(e,1)}removeAll(){this.registry=[]}enable(t){this.entoggle(t,!0)}disable(t){this.entoggle(t,!1)}hitTest(t,e,i){if(M.ui.animating)return;let s,h;this.scaleFactor===1?(s=t,h=e):(s=Math.round(t*this.scaleFactor),h=Math.round(e*this.scaleFactor));let d,g=T.clickMode;return g==="M"?d=i:i===it.ForceRight?d=it.Right:g==="T"?d=it.Left:d=it.Right,Ge.arrayHit(this.registry,s,h,d)}updateScale(t){t===1?this.scaleFactor=1:this.scaleFactor=1/t}scaleFactor=1}const J=new ts;class es{memLoad=!0;step="O";vsAI=!0;p1=this.dud();p2=this.dud();initConstructed(){this.step="O",this.memLoad&&(this.memLoad=!1,this.p1.mode=T.readStringStorage("cMode"+"A","CP"),this.p2.mode=T.readStringStorage("cMode"+"B","CP"),this.p1.mode==="LK"&&(this.p1.mode="CP"),this.p2.mode==="LK"&&(this.p2.mode="CP"),this.vsAI=T.readBoolStorage("cAI",!0)),dt.drawAll()}handleMenuPick(t,e){if(t==="CI"||t==="CV")this.vsAI=t==="CI",T.writeBoolStorage("cAI",this.vsAI);else if(t==="CN")this.ezDeck(this.p1)?this.ezDeck(this.p2)?this.launchConstructed():(this.step="B",C.ddf5(this.generateDeckPickerActions())):(this.step="A",C.ddf5(this.generateDeckPickerActions()));else{const i=e==="A"?this.p1:this.p2;t==="LK"?Yt.loadFromFile().then(s=>{typeof s=="string"?new Xe().iAmError(s):(i.deck=s,i.mode=t,T.writeStorage("cMode"+e,t),dt.drawAll())}):(i.mode=t,T.writeStorage("cMode"+e,t))}dt.drawAll()}ezDeck(t){return t.mode==="CP"?!1:(t.mode==="CR"?t.deck=Yt.randomStockDeck():t.mode==="CX"&&(t.deck=Yt.treatsAbound(!0)),!0)}handleDeckPick(t){const e=T.deTil(t.param),i=Yt.stockDeckByName(e[0],e[1]);this.step==="A"?(this.p1.deck=i,this.ezDeck(this.p2)?this.launchConstructed():(this.step="B",C.ddf5(this.generateDeckPickerActions()))):(this.p2.deck=i,this.launchConstructed())}generateDeckPickerActions(t=-1){const e=fe.map((i,s)=>{const h=p.basicAction("DSET");return h.param=s.toString(),h});if(t>-1){const i=fe[t],s=i.decks.map(h=>{const d=p.basicAction("DECK");return d.param=T.enTil(i.id,h.name),d});return e.concat(s)}return e}launchConstructed(){M.aiMode=this.vsAI,gt.setMode("G"),M.newGame(this.p1.deck.cards,this.p2.deck.cards)}replay(){M.newGame(this.p1.deck.cards,this.p2.deck.cards)}dud(){return{mode:"CP",deck:{cards:[],name:"",factions:[]}}}}const Dt=new es;class is{deathOrder=[];graveyard=[];reset(){this.graveyard=[],this.deathOrder=[]}purge(){this.deathOrder=[]}getState(){const t={dO:this.deathOrder,gY:this.graveyard};return JSON.stringify(t)}setState(t){const e=JSON.parse(t);this.deathOrder=e.dO,this.graveyard=e.gY}deathCheck(){const t=M.tick();f.qActiveCreats().forEach(s=>{s.health<1&&(m.new().crd(s.code).txt(" died.").go(),this.smite(s,t))});const e=S.toPlayer(!0),i=S.toPlayer(!1);(e.health<1||i.health<1)&&(e.health<i.health?M.winFlag=-1:M.winFlag=1),D.deathCheck=!0}deathProdder(t,e=void 0){t.health<1?this.deathOrder.push({creatId:t.id,time:e||M.tick()}):this.deathOrder.some(i=>i.creatId===t.id)&&(this.deathOrder=this.deathOrder.filter(i=>i.creatId!==t.id))}findDeathTime(t){const e=this.deathOrder.filter(i=>i.creatId===t).map(i=>i.time);if(e.length!==0)return Math.min(...e)}destroy(t,e,i=void 0){t.status==="A"?(m.new().crd(t.code).txt(" was destroyed by ").crd(e).txt(".").go(),this.smite(t,i)):(console.warn(`Attempted to destroy creature that was not active. Targ creat ${t.code}; Killer creat ${e}`),console.trace())}gravedigger(t="X"){if(t==="X"){const e=this.graveyard.length;return e===0?"":this.graveyard[T.randInt(0,e)].cardCode}else{const e=S.toBool(t),i=this.graveyard.filter(h=>h.owner===e),s=i.length;return s===0?"":i[T.randInt(0,s)].cardCode}}smite(t,e=void 0){t.status="D",this.deathOrder.push({creatId:t.id,time:e||M.tick()}),this.graveyard.push({cardCode:t.code,owner:t.owner}),D.addEvents(O.creature("DIE",t)),_t.positionChange(t.owner),t.owner?x.deathsA+=1:x.deathsB+=1}}const $=new is;class rs{get youi(){return M.ui}initDeck(t,e){this.youi.deckContents=t,this.youi.deckScroll=0,this.youi.deckSummary=e,gt.setMode("T")}get canPageDown(){return this.youi.deckContents.length-this.youi.deckScroll>15}get canPageUp(){return this.youi.deckScroll>0}paginate(t){t?this.youi.deckScroll+=15:this.youi.deckScroll-=15}visibleContent(){const t=this.youi.deckScroll;return this.youi.deckContents.slice(t,t+15)}generateContent(t,e,i){const s=w.cardByTarget(t,i);if(s.sort((h,d)=>{const g=h[0],y=d[0];return y===g?0:g>y?1:-1}),e){const h=s.length;let d=0,g="",y=0;const v=[];for(;d<h;)g===s[d][0]?y++:(d>0&&v.push({cardCode:g,sourceIdx:-1,cardCount:y}),g=s[d][0],y=1),d++;return h>0&&v.push({cardCode:g,sourceIdx:-1,cardCount:y}),v}else return s.map(h=>({cardCode:h[0],sourceIdx:h[1],cardCount:0}))}handleShowDeck(t){const e=S.getActive();this.showDeck(e,t.param==="VD")}handleDeckScroll(t){this.paginate(t.param==="D"),dt.drawAll()}showPlayerDeck(t){this.showDeck(t,!1)}showPlayerDiscard(t){this.showDeck(t,!1)}showCustomDeck(t,e){this.initDeck(t,!1);const i=this.rightClickers();C.ddf5(e.concat(i))}showDeck(t,e){const i=S.toPlayer(t);this.initDeck(this.generateContent(e?i.discard:i.deck,!0),!0);const s=C.cancelAction();s.key="CNCL",s.param="PM";const h=this.rightClickers();h.push(s),C.ddf5(h)}rightClickers(){return M.aiActive?[]:this.youi.deckContents.map((t,e)=>{const i=p.deckSelectAction("DEET",t.cardCode,e);return i.param=t.cardCode,i})}}const Bt=new rs;class ss{friends;friendText;get browseStack(){return M.ui.detailStack}n(t,e){return`${t}${e}`}allLevelFriendo(t,e){const i=Array.isArray(e)?e:[e];[1,2,3].forEach(s=>{this.friends[this.n(t,s)]=i.map(h=>this.n(h,s))})}plont(t){this.friends[this.n(t,1)]=[this.n("SDL",1)],this.friends[this.n(t,2)]=[this.n("SPL",2)],this.friends[this.n(t,3)]=[this.n("TFK",3)]}constructor(){const t=this.n("FWC",1);this.friends={[this.n("CGL",1)]:[this.n("CGF",1)],[this.n("DTD",1)]:[this.n("TOT",1)],[t]:[this.n("FWG",1)],[this.n("MPH",1)]:[t],[this.n("MPH",2)]:[t],[this.n("MPH",3)]:[t],[this.n("NGQ",4)]:[this.n("NSD",4)],[this.n("RHU",1)]:[this.n("RSC",1)],[this.n("SSE",1)]:[this.n("SXD",1)],[this.n("SSE",2)]:[this.n("SXP",2)],[this.n("SSE",3)]:[this.n("SXT",3)],[this.n("TGK",1)]:[this.n("SXD",1)],[this.n("TGK",2)]:[this.n("SPL",2)],[this.n("TGK",3)]:[this.n("TTF",3)],[this.n("TSL",1)]:[this.n("FUN",1)],[this.n("ZTU",2)]:[this.n("ZTR",2)]},this.allLevelFriendo("BLH","LWY"),this.allLevelFriendo("BTM","BOS"),this.allLevelFriendo("BWD","TFD"),this.plont("BTS"),this.allLevelFriendo("BWT","DNK"),this.allLevelFriendo("CSB","ZBS"),this.allLevelFriendo("CYS","COZ"),this.allLevelFriendo("DSK","SPN"),this.allLevelFriendo("DNK","BWT"),this.allLevelFriendo("DZD","DZA"),this.allLevelFriendo("DBQ","BRF"),this.allLevelFriendo("EPH","EPS"),this.allLevelFriendo("FST","ZST"),this.allLevelFriendo("FWK","ZMB"),this.allLevelFriendo("FGD",["FGA","FGB","FGG","FGO"]),this.allLevelFriendo("FGG","FGO"),this.allLevelFriendo("FMD","FME"),this.plont("GMR"),this.allLevelFriendo("IZL",["IFL","IFR","IZR"]),this.allLevelFriendo("IZR",["IFL","IFR","IZL"]),this.allLevelFriendo("IZK",["IFL","IFR","IZL","IZR"]),this.allLevelFriendo("NSW","SPN"),this.allLevelFriendo("NSH","NDR"),this.allLevelFriendo("NGQ","NSD"),this.allLevelFriendo("NFF","TFF"),this.allLevelFriendo("NOZ","OOZ"),this.plont("PTB"),this.allLevelFriendo("RWC","RPT"),this.plont("STS"),this.allLevelFriendo("SND","SPU"),this.allLevelFriendo("TNL","ZMB"),this.plont("WWS"),this.allLevelFriendo("YNS","XYR"),this.friendText={["BOS"]:[51,""],["BWT"]:[68,"Bron"],["BRF"]:[18,""],["CGF"]:[65,"Fiend"],["COZ"]:[31,""],["DNK"]:[8,""],["DZA"]:[59,"Dozer"],["EPS"]:[49,"Soldier"],["FWG"]:[44,""],["FWC"]:[28,"Chrysalis"],["FGA"]:[65,"Alpha"],["FGB"]:[77,"Beta"],["FGG"]:[53,"Gamma"],["FGO"]:[57,"Omega"],["FME"]:[78,"Egg"],["FUN"]:[49,""],["IZL"]:[42,"Av Flame"],["IZR"]:[44,"Av Frost"],["IFL"]:[65,"Flame"],["IFR"]:[67,"Frost"],["LWY"]:[65,"Wyrm"],["NDR"]:[3,""],["NSD"]:[40,""],["OOZ"]:[31,""],["RPT"]:[51,""],["RSC"]:[60,"Scout"],["SPL"]:[51,""],["SXP"]:[51,""],["SXD"]:[40,""],["SXT"]:[38,""],["SDL"]:[40,""],["SPN"]:[66,""],["SPU"]:[66,""],["XYR"]:[66,""],["TOT"]:[40,"Tendrils"],["TFK"]:[38,""],["TFD"]:[38,""],["TFF"]:[38,""],["TTF"]:[38,""],["ZTR"]:[32,"Returned"],["ZBS"]:[52,""],["ZST"]:[52,""],["ZMB"]:[52,""]}}get currentCard(){const t=this.browseStack;return t[t.length-1]}get friendos(){return this.friends[this.currentCard]??[]}get canGoBack(){return this.browseStack.length>1}init(t){if(!M.aiActive)if(M.ui.detailStack=[t],gt.mode!=="R"){gt.setMode("R");const e=p.basicAction("CNCL");e.zone=gt.baseMode==="G"?"B":"N",e.param="PM",C.ddf5([e])}else dt.drawAll()}changeLevel(t){const e=this.browseStack,i=e.length-1,s=e[i];e[i]=this.n(Mt.extractCardCode(s),t)}goBack(){this.browseStack.pop()}goToFriend(t){this.browseStack.push(t)}friendTxt(t){const e=this.friendText[t];return e||[3,"I am error"]}goBackAction(){const t=p.basicAction("DTUP");return t.param="DB",t}levelAction(t){const e=p.basicAction("DTUP");return e.param=T.enTil("DL",t),e}friendAction(t){const e=p.basicAction("DTUP");return e.param=T.enTil("DF",t),e}updateDetails(t){const e=T.deTil(t.param),i=e[0];i==="DB"?this.goBack():i==="DF"?this.goToFriend(e[1]):i==="DL"?this.changeLevel(parseInt(e[1])):console.error("Unknown detail arg",t)}}const Zt=new ss,Ve=[1,2,3,4].map(n=>n.toString());class as{rarityCache={["L"]:[],["H"]:[],["R"]:[],["C"]:[],["T"]:[]};faction1="X";faction2="X";factionLock=!1;picks=[];picksAsDeck=[];currentPack=[];scrollIdx=0;memLoad=!0;step="O";stats;vsAI=!0;legDraft=!1;fatPacks=!1;overdraft=!1;rarityFilters;setFilters;pAdeck=[];pBdeck=[];get aiPicking(){return this.vsAI&&this.step==="B"}packOdds=[];constructor(){this.rarityFilters=new Map(ne.map(t=>[t,!0])),this.setFilters=new Map(Ve.map(t=>[t,!0])),this.stats=new Qe}getRarity(t){return this.rarityFilters.get(t)??!0}toggleRarity(t){const e=!this.rarityFilters.get(t);return this.rarityFilters.set(t,e),e}getSet(t){return this.setFilters.get(t.toString())??!0}toggleSet(t){const e=t.toString(),i=!this.setFilters.get(e);return this.setFilters.set(e,i),i}get canPageDown(){return this.picksAsDeck.length-this.scrollIdx>15}get canPageUp(){return this.scrollIdx>0}paginate(t){t?this.scrollIdx+=15:this.scrollIdx-=15}initDraft(){this.step="O",this.memLoad&&(this.memLoad=!1,this.vsAI=T.readBoolStorage("dAI",!0),this.legDraft=T.readBoolStorage("legDraft",!1),this.fatPacks=T.readBoolStorage("fatPacks",!1),this.overdraft=T.readBoolStorage("overD",!1),Ve.forEach(t=>{this.setFilters.set(t,T.readBoolStorage("dSet"+t,!0))}),ne.forEach(t=>{this.rarityFilters.set(t,T.readBoolStorage("dRare"+t,!0))})),dt.drawAll()}setFArr(){let t=Ve.filter(e=>this.setFilters.get(e)).map(e=>parseInt(e));return t.length===4&&(t=[]),t}validRarities(){return ne.filter(t=>this.rarityFilters.get(t))}startDraftPicks(){const t=this.setFArr();ne.forEach(e=>{this.getRarity(e)?this.rarityCache[e]=Yt.getDeckCards([e],[],t):this.rarityCache[e]=[]}),ne.every(e=>this.rarityCache[e].length===0)&&(this.rarityCache["C"]=this.fun()),this.packOdds=this.fatPacks?[9,31,40]:[5,25,40],this.faction1="X",this.faction2="X",this.factionLock=!1,this.picks=[],this.picksAsDeck=[],this.scrollIdx=0,this.stats=new Qe,this.resumeDraft("")}resumeDraft(t){if(t){this.picks.push(t),this.picksAsDeck=this.picksToDeck();const s=this.overdraft?60:30;if(this.picks.length===s){this.step==="A"?(this.pAdeck=this.picksAsDeck.slice(),this.step="B",this.startDraftPicks()):(this.pBdeck=this.picksAsDeck.slice(),this.launchDraft());return}const h=W.getCard(t);if(this.aiPicking||this.stats.addStat(h.type,h.faction),!this.factionLock){const d=h.faction;if(this.faction1==="X")this.faction1=d;else if(d!==this.faction1){this.faction2=d,this.factionLock=!0;const g=this.setFArr();this.validRarities().forEach(y=>{this.rarityCache[y]=Yt.getDeckCards([y],[this.faction1,this.faction2],g)})}}}const e=this.generatePack().slice(-1*(6-this.picks.length%5)),i=this.fillPack(e);if(this.aiPicking)this.resumeDraft(i[i.length-1]);else{this.currentPack=i;const s=i.map((h,d)=>{const g=p.draftSelectAction("DRFT",d,!0);return g.param=h,g});C.ddf5(s)}}replay(){this.launchDraft()}picksToDeck(){const t=[];return this.picks.forEach(e=>{const i=t.findIndex(s=>s.card===e);i===-1?t.push({card:e,num:1}):t[i].num+=1}),t.sort((e,i)=>{const s=W.getCard(e.card+"1"),h=W.getCard(i.card+"1");return s.name.toLowerCase()<h.name.toLowerCase()?-1:1})}generatePack(){const t=this.validRarities();let e;if(this.picks.length===0&&this.legDraft&&t.includes("L"))return Array(6).fill("L");if(this.picks.length===0&&t.includes("H"))e=Array(6).fill("H"),t.includes("L")&&e.push(...this.boost("L"));else if(this.picks.length===0&&t.includes("R"))e=Array(6).fill("R"),t.includes("L")&&e.push(...this.boost("L"));else{const i=t[0]??"C";e=Array(6).fill(i),t.includes("R")&&(e[5]="R",e.push(...this.boost("R"))),t.includes("H")&&e.push(...this.boost("H")),t.includes("L")&&e.push(...this.boost("L"))}return e.slice(-6).reverse()}boost(t){const e=t==="R"?2:t==="H"?1:0,i=this.packOdds[e],s=[];let h=!0;for(;h;)T.randInt(0,99)<i?s.push(t):h=!1;return s}fillPack(t){const e=[];return t.forEach(i=>{const s=this.rarityCache[i].length;let h=!0;for(;h;){const d=this.rarityCache[i][T.randInt(0,s)];e.includes(d)||(e.push(d),h=!1)}}),e}handleMenuPick(t,e){if(t==="DI"||t==="DV")this.vsAI=t==="DI",T.writeBoolStorage("dAI",this.vsAI);else if(t==="DN")this.step="A",this.startDraftPicks();else if(t==="DR"){const i=e;T.writeBoolStorage("dRare"+e,this.toggleRarity(i))}else t==="DT"?T.writeBoolStorage("dSet"+e,this.toggleSet(e)):t==="LD"?(this.legDraft=!this.legDraft,T.writeBoolStorage("legDraft",this.legDraft)):t==="GP"?(this.fatPacks=!this.fatPacks,T.writeBoolStorage("fatPacks",this.fatPacks)):t==="OD"&&(this.overdraft=!this.overdraft,T.writeBoolStorage("overD",this.overdraft));dt.drawAll()}launchDraft(){M.aiMode=this.vsAI,gt.setMode("G"),M.newGame(this.pAdeck,this.pBdeck)}fun(){return[["ART","SVO","MPH","VSK","MSP","LYS"],["CAG","ATG","WMM","ESU","BWH","CBS"],["DHW","NCF","ROG","EXD","TPT","HOX"],["FLS","STP","BRN","TCG","AQE","VOB"]][T.randInt(0,4)]}}const ct=new as;class ns{async drawAll(){if(ot.simOn)return;const t=gt.mode;J.removeAll(),this.clearDetails(),t==="G"?(this.clearDeck(),await Promise.all([this.drawHand(S.getLocal()),this.drawPlayers(),this.drawField(),this.drawActions(C.activeActions)]),M.winFlag!==0?await this.drawGameOver():await this.drawCommonButtons(!0,!0,!0)):t==="R"?await this.drawDetails(C.activeActions):t==="T"?M.aiActive||await this.drawDeck(C.activeActions):t==="D"?await this.drawDraft(C.activeActions):t==="C"?await this.drawConstructed():t==="I"?await this.drawInfoMenu():t==="X"?await this.drawExit(C.activeActions):await this.drawMenu()}async drawGameOver(){await new Re().drawGameOver()}async drawHand(t){await new li().drawCards(t)}async drawField(){await new Ke().drawCards()}async drawPlayers(){await new Re().drawAllPlayers()}async drawDeck(t){const e=t.find(s=>s.zone==="B");e&&await new Ne().drawActions([e]);const i=new Cs;await i.drawCards(),await i.drawActions(t),await this.drawCommonButtons(!0,!0,!1)}async drawActions(t){if(ot.simOn)return;const e=new Ne;if(M.aiActive)await e.drawActions([]);else{tt.get("effects").clear();const s=new li,h=new Ke,d=new Re;await Promise.all([s.drawActions(t),h.drawActions(t),e.drawActions(t),d.drawActions(t)])}}async drawCombat(t){if(t.length===0)return;M.ui.animating=!0,tt.get("effects").clear(),await new Ke().drawFight(t),M.ui.animating=!1}async drawDraft(t){tt.get("effects").clear();const i=new ws,s=tt.get("game-ui");s.clear(),J.removeAll(),ct.step==="O"?await i.drawDraftMenu(s):(await new be().drawPickerPlayer(s,ct.step==="A",!1),await i.drawPack(t,s),await i.drawList(t,s),await i.drawStats(s),await this.drawCommonButtons(!0,!0,!1))}async drawMenu(){const t=new Ds,e=tt.get("game-ui");e.clear(),J.removeAll(),await t.drawMenu(e)}async drawInfoMenu(){const t=new be,e=tt.get("game-ui");e.clear(),J.removeAll(),await t.drawExtrasMenu(e)}async drawConstructed(){if(Dt.step==="O"){const t=new Xe,e=tt.get("game-ui");e.clear(),J.removeAll(),await t.drawConstrMenu(e)}else await this.drawDeckPick(C.activeActions)}async drawDeckPick(t){const e=new Xe,i=new be,s=tt.get("game-ui");s.clear(),J.removeAll(),await i.drawPickerPlayer(s,Dt.step==="A",Dt.vsAI),await e.drawSets(t,s),await e.drawList(t,s)}clearDetails(){tt.get("card").clear()}clearDeck(){tt.get("decklist").clear()}async drawDetails(t){await this.drawActions(t),await this.drawCommonButtons(!0,!0,!1),tt.get("card").clear();const i=new Ss,s=t.find(h=>h.key==="CNCL");s?await i.drawDetails(s):console.error("Attempted to show details view with no cancel action")}async drawCommonButtons(t,e,i){let s=979;const h=723,d=new Ye,g=tt.get("game-ui");if(i&&g.clear(),t&&(await d.makeIconButton(g,s,h,"EX"),s-=50),e){const y=T.clickMode;y!=="M"&&await d.makeIconButton(g,s,h,y==="I"?"TM":"DM")}}async drawExit(t){tt.get("decklist").clear();const i=tt.get("effects"),s=new de;await s.drawButton(i,151,488,t[1],"Quit Game",24,!1),await s.drawButton(i,478,488,t[0],"Resume",52,!1)}setBackground(t){const e="hide";this.allBackgrounds.forEach(i=>{const s=document.getElementById(i);t===i?s.classList.remove(e):s.classList.add(e)})}changeScale(t){this.clearAll();let e=T.options.scale;e===t&&(e="100");const i=t==="100"?1:.90625;J.updateScale(i);const s=`uiSize${e}`,h=`uiSize${t}`;this.allCanvases.forEach(y=>{tt.get(y).dom.classList.replace(s,h)}),this.allBackgrounds.forEach(y=>{document.getElementById(y).classList.replace(s,h)}),document.getElementById("solforge").classList.replace(`gameSize${e}`,`gameSize${t}`),document.getElementById("log").classList.replace(`logSize${e}`,`logSize${t}`),T.options.scale=t,T.writeStorage("scale",t)}clearAll(){this.allCanvases.forEach(t=>{tt.get(t).clear()})}allCanvases=["game-ui","field","player","hand","effects","decklist","card"];allBackgrounds=["playmat","blueface","mainmenu"]}const dt=new ns;class os{positionChange(t){f.creatByTarget().forEach(e=>{e.enforceEffects("PS",t)})}defenderChange(t){f.qActiveCreats().forEach(i=>{i.effects.filter(s=>s.watch==="DF").filter(s=>s.area==="C"&&i.owner===t||s.area==="A").forEach(s=>W.getCard(s.logicCode).enforceEffect(s,i))})}playerHealthChange(){f.qActiveCreats().forEach(t=>{t.enforceEffects("PH")})}enforceAllNonPositionCreatureEffects(){f.qActiveCreats().forEach(e=>{e.enforceEffects("AT"),e.enforceEffects("AR"),e.enforceEffects("CH"),e.enforceEffects("DF",e.owner)})}}const _t=new os;class hs{getC(t){return f.jr5(t)}creature(t,e){return{code:t,creatId:e.id}}damage(t,e,i,s,h,d){let g;return h instanceof Ie?g=h.id:g=h,{code:"DMG",battle:t,dmg:e,isCreatSrc:i,isCreatTarg:s,target:g,srcId:d?.id}}enterField(t){return{code:"ENT",creatId:t.id,forged:!1}}playCard(t,e){return{code:"PLC",playerA:e,cardCode:t}}player(t,e){return{code:t,playerA:e}}playerHeal(t,e){return{code:"PHL",playerA:t,healAmt:e}}replaced(t,e){return{code:"RPL",creatId:t.id,replCreatId:e.id}}toCreature(t){const e=t;return{code:e.code,creatId:e.creatId,creature:this.getC(e.creatId)}}toDamage(t){const e=t;let i,s,h;return e.isCreatTarg?h=this.getC(e.target):s=S.toPlayer(e.target),e.isCreatSrc&&(i=this.getC(e.srcId)),{code:e.code,battle:e.battle,dmg:e.dmg,isCreatSrc:e.isCreatSrc,srcId:e.srcId,target:e.target,isCreatTarg:e.isCreatTarg,srcCreat:i,hurtCreat:h,hurtPlayer:s}}toEnterField(t){const e=t;return{code:e.code,creatId:e.creatId,forged:e.forged,creature:this.getC(e.creatId)}}toReplaced(t){const e=t;return{code:e.code,creatId:e.creatId,creature:this.getC(e.creatId),replCreatId:e.replCreatId,replCreat:this.getC(e.replCreatId)}}}const O=new hs;class ls{field=[];birthOrder=[];laneIdx=[1,2,3,4,5];reset(){this.field=[],this.birthOrder=[]}purge(){this.field=this.field.filter(t=>t.status==="A"),this.birthOrder=[]}getState(){const t={field:this.field.map(e=>e.getState()),bO:this.birthOrder};return JSON.stringify(t)}setState(t){const e=JSON.parse(t);this.field=e.field.map(i=>new Ie(i)),this.birthOrder=e.bO}jr5(t){const e=this.searchById(t);if(e)return e;throw console.error("naughty creature id",t),new Error("Could not find creature by id")}creatByLane(t,e){const i=this.searchByLane(t,e);if(i)return i;throw console.error("naughty creature lane ",t,e),new Error("Could not find creature by lane")}ddf6(t){const e=this.searchByFSA(t);if(e)return e;throw console.error("naughty FSA",t),new Error("Could not find creature by FSA")}searchById(t){return this.field.find(e=>e.id===t)}searchByLane(t,e){return this.field.find(i=>i.lane===t&&i.owner===e&&i.status==="A")}searchByFSA(t){return this.searchByLane(t.lane,t.playerA)}creatByTarget(t){let e=this.field;if(t){if(t.player!=="X"){const i=S.toBool(t.player);e=e.filter(s=>s.owner===i)}if(t.creatStatus!=="A"){const i=this.creatStatusTargetToCS(t.creatStatus);e=e.filter(s=>s.status===i)}if(!T.isUn(t.lanes)){const i=w.lanesToArr(t.lanes);e=e.filter(s=>i.includes(s.lane))}if(T.isUn(t.maxAttack)||(e=e.filter(i=>i.attack<=t.maxAttack)),t.notMe&&(e=e.filter(i=>i.id!==t.notMe)),t.victims){const i=T.deTil(t.victims);e=e.filter(s=>i.includes(s.id))}if(t.tribe!=="AN"&&(e=e.filter(i=>i.isTribe(t.tribe))),t.canLevel&&(e=e.filter(i=>W.getCard(i.code).canLevel())),t.level!=="LA"){const i=w.levelTargetToLevel(t.level);e=e.filter(s=>i.includes(s.level))}t.cardCode&&(e=e.filter(i=>W.getCard(i.code).cardCode()===t.cardCode)),t.canDefender&&(e=e.filter(i=>!i.negateDefender)),t.hasDefender&&(e=e.filter(i=>i.defender)),t.canArmor&&(e=e.filter(i=>!i.negateArmor)),t.hasArmor&&(e=e.filter(i=>i.armor>0)),t.canMove&&(e=e.filter(i=>!i.negateMobility)),t.hasMobility&&(e=e.filter(i=>i.mobility>0)),t.hasPoison&&(e=e.filter(i=>i.poison>0)),t.canRegen&&(e=e.filter(i=>!i.negateRegen)),t.hasRegen&&(e=e.filter(i=>i.regen>0)),t.faction!=="X"&&(e=e.filter(i=>i.faction===t.faction))}return e}cst2cs={["A"]:()=>{throw new Error("goof passed any to field state target mapper")},["V"]:()=>"A",["D"]:()=>"D",["R"]:()=>"R"};creatStatusTargetToCS(t){return this.cst2cs[t]()}emptyLanes(t){return this.laneIdx.filter(e=>!this.field.find(s=>s.owner===t&&s.lane===e&&s.status==="A"))}oppositeLane(t){return 6-t}adjacentPositions(t){return[[2],[1,3],[2,4],[3,5],[4]][t-1]}canMove(t){return t.mobility>0&&t.mobilityAvailable&&(!t.sleeping||t.aggressive)?this.emptyLanes(t.owner).filter(e=>Math.abs(t.lane-e)<=t.mobility):[]}birthCreature(t,e,i,s=0,h=void 0){if(e==="S"){const v=this.emptyLanes(i);if(v.length===0)return;s=v[T.randInt(0,v.length)]}else if(e==="P"&&!this.emptyLanes(i).includes(s))return;const g=(typeof t=="string"?W.getCard(t):t).jr3(i,s);if(i===S.getActiveB()&&x.birthRegistrar(g.id),e==="F"||e==="R"){const v=f.searchByLane(s,i);if(v){const F=m.new().crd(v.code).txt(" was replaced");e==="R"?F.txt(" with ").crd(g.code).txt(".").go():F.txt(".").go(),v.status="R",D.addEvents(O.replaced(g,v))}}this.field.push(g);const y=O.enterField(g);return y.forged=e==="F",this.birthOrder.push({creatId:g.id,time:h||M.tick()}),D.addEvents(y),g.enforceEffects("PH"),_t.positionChange(i),g}findBirthTime(t){const e=this.birthOrder.filter(i=>i.creatId===t).map(i=>i.time);if(e.length!==0)return e.length>1&&console.warn("wery curious, more than one birth record for creat "+t),e[0]}qActiveCreats(){return this.creatByTarget(p.crTarg())}qPlayerCreats(t){const e=p.crTarg();return e.player=S.toTarget(t),this.creatByTarget(e)}ddf1(){return this.creatByTarget(p.crFriendTarg())}qEnemyCreats(){return this.creatByTarget(p.crEnemyTarg())}}const f=new ls;class cs{creatFightState(t,e){return t?e===1||t.defender||t.sleeping&&!t.aggressive?1:e===0?2:t.extraBattles>0?(t.extraBattles-=1,2):1:0}dukeItOut(t,e,i,s){if(t>0){let h=0;if(e>0){const d=t===2&&i.breakthrough;h=s.hurtBattle(i.attack,i,d)}else t===2&&(h=i.attack);h>0&&S.hurtPlayerBattle(!i.owner,h,i)}}fight(t){const e=!ot.simOn;e&&m.add("FIGHT!");let i=2,s=1;t&&(x.mainBattle=!1,i=0,s=0);const h=S.getActiveB(),d=[],g=[];f.laneIdx.forEach(v=>{const F=f.searchByLane(v,h),L=f.searchByLane(6-v,!h),z=this.creatFightState(F,i),rt=this.creatFightState(L,s);(z===2||rt===2)&&(g.push([z,rt,F,L],[rt,z,L,F]),z===2&&(x.ffs++,d.push([v,h])),rt===2&&d.push([f.oppositeLane(v),!h]))}),this.barking&&d.length>0&&e&&T.dogBark();let y;e?y=dt.drawCombat(d):y=Promise.resolve(),y.then(()=>{g.forEach(v=>this.dukeItOut(...v)),_t.playerHealthChange(),$.deathCheck(),D.type="C0",C.actionDone()})}barking=!0}const ai=new cs;class us{aiMode=!1;aiActive=!1;winFlag=0;ui=this.freshUI();idnum=0;clock=0;genId(){return this.idnum++,"@"+this.idnum.toString(36)}tick(){return this.clock++,this.clock}getState(){return{i:this.idnum,t:this.clock}}setState(t,e){this.idnum=t,this.clock=e}newGame(t,e){this.idnum=0,this.clock=0,ai.barking=T.options.bark,S.activePlayer=T.randInt(0,2)===0,this.aiActive=!S.activePlayer&&this.aiMode,S.isLocalA=this.aiMode||S.activePlayer,C.actionHistory=[],ot.turnSims=0,ot.turnTime=0,f.reset(),$.reset(),this.ui=this.freshUI(),x.firstTurn=!0,this.winFlag=0;const i=S.nameOSaurus();S.initPlayer(!0,t,"Forgy McGhee",25),S.initPlayer(!1,e,i[0],i[1]),m.setup(),m.add("Ready...FIGHT!"),x.startTurn()}freshUI(){return{handScrollLeft:0,detailStack:[],deckContents:[],deckScroll:0,deckSummary:!1,animating:!1}}}const M=new us;class ds{loglist;you=!0;localPlayerKey="";oppPlayerKey="";localPlayerSpan="";oppPlayerSpan="";constructor(){this.loglist=document.getElementById("loglist")}setup(){this.you=S.getLocalB(),this.localPlayerKey=this.you?"^pa":"^pb",this.oppPlayerKey=this.you?"^pb":"^pa",this.localPlayerSpan=this.span(S.toPlayer(this.you).name,"green"),this.oppPlayerSpan=this.span(S.toPlayer(!this.you).name,"red")}addLi(t){const e=document.createElement("li");e.innerHTML=t,this.loglist.appendChild(e),e.scrollIntoView({behavior:"smooth",block:"end"})}span(t,e,i=""){const s=i.length>0?` onclick="sfapi.details('${i}')"`:"";return`<span class="${e}"${s}>${t}</span>`}add(t){this.addLi(t)}clearAll(){this.loglist.innerHTML=""}new(){return new Ai}factMap={["A"]:"all",["N"]:"nek",["T"]:"tem",["U"]:"ute"};parseCards(t){let e=!0;for(;e;){const i=t.indexOf("^c");if(i===-1)e=!1;else{const s=t.slice(i+2,i+6);if(s==="POIS")t=t.replaceAll("^c"+s,this.span("Poison","green"));else{const h=W.getCard(s);t=t.replaceAll("^c"+s,this.span(`${h.name} ${h.level}`,this.factMap[h.faction],s))}}}return t}parse(t){const i=t.guts.replaceAll(this.localPlayerKey,this.localPlayerSpan).replaceAll(this.oppPlayerKey,this.oppPlayerSpan),s=this.parseCards(i);this.add(s)}cardText(t){let e;if(t.type==="C"){const i=t,s=[];i.initRegen>0&&s.push("Regenerate "+i.initRegen),i.initArmor>0&&s.push("Armor "+i.initArmor),i.initMobile>0&&s.push("Mobility "+i.initMobile),i.initBT&&s.push("Breakthrough"),i.initDefend&&s.push("Defender"),i.initAggro&&s.push("Aggressive"),i.consistent&&s.push("Consistent"),s.length>0&&s.push(""),e=s.join(". ")+t.text}else e=t.text;return(t.isFree?"Free. ":"")+(t.overload?"Overload. ":"")+e}cardTextSplit(t){const e=[];if(t.isFree&&e.push("Free"),t.consistent&&e.push("Consistent"),t.overload&&e.push("Overload"),t.type==="C"){const i=t;i.initRegen>0&&e.push("Regenerate "+i.initRegen),i.initArmor>0&&e.push("Armor "+i.initArmor),i.initMobile>0&&e.push("Mobility "+i.initMobile),i.initBT&&e.push("Breakthrough"),i.initDefend&&e.push("Defender"),i.initAggro&&e.push("Aggressive")}if(t.text.length>0&&e.push(...t.text.split("~")),t.level===1){const i=t.cardCode(),s=Je.find(h=>h[0]===i);if(s){let h;const d=s[1];d.length===2&&d[0]===d[1]?h="2x "+W.getCard(`${d[0]}1`).name:h=d.map(g=>W.getCard(`${g}1`).name).join(", "),e.push("Solbind: "+h)}}return e}factionText(t){switch(t){case "A":return"Alloyin";case "N":return"Nekrium";case "T":return"Tempys";case "U":return"Uterra";case "X":return""}}cardTypeText(t){return t==="C"?"Creature":"Spell"}rarityText(t){switch(t){case "C":return"Common";case "R":return"Rare";case "H":return"Heroic";case "L":return"Legendary";case "T":return"Token"}}levelGateText(t,e=!1){const i=e?" ":"";return t===1?`level 1${i}`:t===2?`level 2 or lower${i}`:""}jr9(t,e,i=!1){return t!==0&&e!==0?`${this.bufferson(t,!0)}${i?",":" and"} ${this.bufferson(e,!1)}`:t!==0?this.bufferson(t,!0):this.bufferson(e,!1)}bufferson(t,e){return`${t>0?"+":""}${t} ${e?"attack":"health"}`}dbdtac(t=-1){return`deals battle damage to a ${t===-1?"":this.levelGateText(t,!0)}creature`}dbdtap(){return"deals battle damage to a player"}daluac(t=!1){return(t?"D":"d")+"iscard and level up a card"}forglied(t){return t==="X"?"Forge":`Allied ${this.factionText(t)}`}fastName(t){t.length===3&&(console.warn("HEY a 3 char card code was passed to fastName, why?: "+t),t=`${t}1`);const e=W.getCard(t);return e.name+" "+e.level}pName(t){return t?"A":"B"}cardActionText(t){let e=`Card (${this.fastName(t.host)}) `;if(t.zone==="F"){const i=t,s=i.playerA?i.lane:6-i.lane,h=f.searchByFSA(i),d=h?this.fastName(h.code):"Empty";e+=`Lane ${s}${this.pName(i.playerA)} ${d}`}else if(t.zone==="H"){const i=t;e+=`Hand (${this.fastName(i.card)})`}else if(t.zone==="P"){const i=t;e+=`Player (${this.pName(i.playerA)})`}else t.zone==="R"?e+="Full Board":t.zone==="B"?e+="Button":t.zone==="N"&&(e+="Special");return e}actionText(t){switch(t.key){case "ACTV":return`Activate (${this.fastName(t.host)})`;case "CARD":return this.cardActionText(t);case "FITE":return"Fight";case "FORG":return`Forge to Lane ${6-t.lane}`;case "HDSC":return`Hand Discard (${this.fastName(t.host)})`;case "HPLY":const i=t;return`Play (${this.fastName(i.card)})`;case "MEND":return"Move End";case "MOVE":return"Move Start";case "NOTR":return"Pick None";case "ENDT":return"Donethanks";case "CANC":return"Cancel";default:return t.key}}tribeT={["AN"]:"Any",["AB"]:"Abomination",["AG"]:"Angel",["AS"]:"Asir",["BR"]:"Bear",["BE"]:"Beast",["CT"]:"Cat",["CR"]:"Chrysalis",["CY"]:"Cyborg",["DF"]:"Darkforged",["DM"]:"Demon",["DN"]:"Dinosaur",["DG"]:"Dragon",["DK"]:"Drakin",["DY"]:"Dryad",["ER"]:"Earth",["EL"]:"Elemental",["EN"]:"Energeist",["FY"]:"Fairy",["FR"]:"Fire",["FB"]:"Forgeborn",["FT"]:"Frost",["GT"]:"Giant",["GN"]:"Gnome",["GL"]:"Golem",["GG"]:"Grimgaunt",["GD"]:"Guardian",["HM"]:"Human",["HY"]:"Hydra",["IC"]:"Ice",["IN"]:"Insect",["LT"]:"Lightning",["LP"]:"Lupin",["MT"]:"Manticore",["MC"]:"Mech",["MM"]:"Metamind",["NG"]:"Naga",["OZ"]:"Ooze",["PX"]:"Phoenix",["PL"]:"Plant",["RM"]:"Ram",["RB"]:"Robot",["SY"]:"Satyr",["SE"]:"Seraph",["SH"]:"Shaman",["SS"]:"Shapeshifter",["SK"]:"Skeleton",["SN"]:"Snake",["SP"]:"Spider",["ST"]:"Spirit",["TG"]:"Tigrin",["TK"]:"Tuskin",["VP"]:"Vampire",["WD"]:"Wanderer",["WN"]:"Wind",["WF"]:"Wolf",["WR"]:"Wurm",["YT"]:"Yeti",["ZB"]:"Zombie"};tribeText(t){return this.tribeT[t]}}const m=new ds;class fs{handleMainMenuButton(t){t.param==="D"?(gt.setMode("D"),T.options.wasDrafting=!0,ct.initDraft()):t.param==="C"?(gt.setMode("C"),T.options.wasDrafting=!1,Dt.initConstructed()):t.param==="I"?(gt.setMode("I"),dt.drawAll()):window.open("deckbuilder.html")}handleMenuButton(t){const e=T.deTil(t.param),i=e[0];let s=!0;if(i==="RP")s=!1,m.clearAll(),T.options.wasDrafting?ct.replay():Dt.replay();else if(i==="MM")gt.setMode("M"),m.clearAll();else if(i==="CN"||i==="CP"||i==="CX"||i==="CR"||i==="CI"||i==="CV"||i==="LK")Dt.handleMenuPick(i,e[1]);else if(i==="DN"||i==="DR"||i==="DI"||i==="DV"||i==="LD"||i==="GP"||i==="OD"||i==="DT")ct.handleMenuPick(i,e[1]);else if(i==="HH")T.toggleOption("highHealth");else if(i==="CH")T.toggleOption("cheater");else if(i==="BB")T.toggleOption("bark");else if(t.param==="BC")T.toggleOption("bigCards");else if(i==="90"){const h=T.options.scale==="90"?"100":"90";dt.changeScale(h)}else i==="RU"?(s=!1,window.open("https://grousewood-games.github.io/solforge/docs/rules")):i==="FQ"?(s=!1,window.open("https://grousewood-games.github.io/solforge/docs/faq")):(s=!1,console.error("missing handler for menu button param "+t.param));s&&dt.drawAll()}handleUIButton(t){t.param==="DM"?(T.setClickMode("I"),dt.drawAll()):t.param==="TM"?(T.setClickMode("T"),dt.drawAll()):t.param==="EX"?(gt.setMode("X"),C.ddf5(this.generateExitActions())):console.error("missing handler for common button param "+t.param)}generateExitActions(){const t=p.basicAction("CANC");return t.param="PM",[t,p.menuButtonAction("MM")]}}const ze=new fs;class gs{stack=["M"];setMode(t){this.deetMode(t)||t==="X"?this.stack.push(t):(this.stack=[t],t==="G"?(tt.get("game-ui").clear(),dt.setBackground("playmat")):t==="D"||t==="C"||t==="I"?(tt.get("game-ui").clear(),dt.setBackground("blueface")):t==="M"&&(dt.clearAll(),dt.setBackground("mainmenu")))}popMode(){this.stack.pop()}get mode(){const t=this.stack;return t[t.length-1]}get isDetailMode(){return this.deetMode(this.mode)}get baseMode(){return this.stack[0]}deetMode(t){return t==="R"||t==="T"}}const gt=new gs;class ms{constructor(){this.loader=document.getElementById("fileupload"),this.loader.addEventListener("change",t=>this.loadInputHandler(t))}shuffleDeck(t){const e=S.toPlayer(t),i=[],s=[];if(e.deck.forEach(h=>{W.getCard(h).consistent?i.push(h):s.push(h)}),i.length===0)this.shuffle(e.deck);else{this.shuffle(s);const h=20-i.length,d=i.concat(s.slice(0,h));this.shuffle(d),e.deck=s.slice(h).concat(d)}}shuffle(t){const e=t.length,i=(s,h)=>{const d=t[s];t[s]=t[h],t[h]=d};if(e>0){let s,h;const d=e*4;for(let g=0;g<d;g++)s=T.randInt(0,e),h=T.randInt(0,e),i(s,h)}}randomDeck(t,e,i){const s=t===e;let h;return s?h=this.ripper(t,i,30):h=this.ripper(t,i,15).concat(this.ripper(e,i,15)),{cards:h,name:"Random Nonsense",factions:s?[t]:[t,e]}}testies(t){const e=this.ripper(this.randFaction(),3,15);return e.push({card:t,num:15}),{cards:e,name:"Test Fun",factions:[]}}testies2(t,e){return{cards:[{card:t,num:15},{card:e,num:15}],name:"Test Fun",factions:[]}}treatsAbound(t){const e=t?1:T.randInt(1,4);return this.randomDeck(this.randFaction(),this.randFaction(),e)}randFaction(){return ve[T.randInt(0,4)]}randomStockDeck(){const t=fe.map(i=>i.decks).flat(),e=T.randInt(0,t.length);return t[e]}stockDeckByName(t,e){let i;if(fe.some(s=>s.id===t?s.decks.some(h=>{h.name===e&&(i=h)}):!1),i)return i;throw new Error("Stock Deck not found: Set: "+t+"; Name: "+e)}ripper(t,e,i){const s=[[15,8,5],[30,15,10]],h=this.getDeckCards([],[t]),d=[],g=s[i===15?0:1][e-1];for(;d.length<g;){const v=T.randInt(0,h.length),F=h[v];d.find(L=>L===F)||d.push(F)}const y=d.map(v=>({card:v,num:e}));return e===2&&i===15&&(y[0].num=1),y}deckify(t){const e=t.map(i=>{const s=Je.find(h=>h[0]===i);return s?s[1]:[]}).flat();return t.concat(e).map(i=>`${i}1`)}parseDeck(t){const e=t.map(i=>Array(i.num).fill(i.card)).flat();return this.deckify(e)}validDeck(t){const e={};t.forEach(v=>{e[v.card]?e[v.card]+=v.num:e[v.card]=v.num});const i=Object.entries(e).map(v=>({card:v[0],num:v[1]})),s=i.map(v=>v.num).reduce((v,F)=>v+F,0);if(s!==30)return"Deck must have 30 cards, found "+s;const h=[];let d="";if(i.some(v=>{const F=Nt.findIndex(L=>L.crd===v.card);return F===-1?(d=v.card,!0):(h.push(Nt[F].fct),!1)}))return`Invalid card code: '${d}'`;let g=0;if(i.some(v=>v.num>3?(d=v.card,g=v.num,!0):!1))return`${g} copies of '${d}' ${m.fastName(d).slice(0,-2)}`;const y=[...new Set(h)];return y.length>2?"Deck must have two or less factions, found: "+y.join():""}getDeckCards(t=[],e=[],i=[]){return t.length===0&&e.length===0&&i.length===0?Nt.map(s=>s.crd):t.length>0&&e.length>0&&i.length===0?Nt.filter(s=>t.includes(s.rty)&&e.includes(s.fct)).map(s=>s.crd):t.length>0&&e.length===0&&i.length===0?Nt.filter(s=>t.includes(s.rty)).map(s=>s.crd):t.length===0&&e.length>0&&i.length===0?Nt.filter(s=>e.includes(s.fct)).map(s=>s.crd):t.length>0&&e.length>0&&i.length>0?Nt.filter(s=>t.includes(s.rty)&&e.includes(s.fct)&&i.includes(Math.floor(s.set))).map(s=>s.crd):t.length>0&&e.length===0&&i.length>0?Nt.filter(s=>t.includes(s.rty)&&i.includes(Math.floor(s.set))).map(s=>s.crd):t.length===0&&e.length>0&&i.length>0?Nt.filter(s=>e.includes(s.fct)&&i.includes(Math.floor(s.set))).map(s=>s.crd):Nt.filter(s=>i.includes(Math.floor(s.set))).map(s=>s.crd)}getCardFaction(t){const e=Nt.find(i=>i.crd===t);return e?e.fct:"X"}getCardRarity(t){const e=Nt.find(i=>i.crd===t);return e?e.rty:"T"}cardStats(){ve.forEach(t=>{const e=`${m.factionText(t)} total: ${this.getDeckCards(void 0,[t]).length}; `,i=ne.map(s=>`${m.rarityText(s)}: ${this.getDeckCards([s],[t]).length}`).join("; ");console.log(e+i)})}loadPromise=new Te;fileguts="";loader;async loadFromFile(){if(this.loadPromise=new Te,this.loader.click(),await this.loadPromise.getPromise(),this.fileguts==="")return"";if(this.fileguts.startsWith("!")){const s=this.fileguts.substring(1);return this.fileguts="",s}const t=JSON.parse(this.fileguts);this.fileguts="";const e=t.cards,i=this.validDeck(e);return i||t}readError(t){this.fileguts="!"+t,this.loadPromise.resolveMe()}loadInputHandler(t){const e=this.loader.files;if(e&&e.length>0){const s=e[0];var i=new FileReader;i.onload=h=>{try{var d=i.result;if(d){var g=JSON.parse(new TextDecoder("utf-8").decode(new Uint8Array(d)));g.cards&&Array.isArray(g.cards)&&!g.cards.some(y=>!(y&&typeof y.card=="string"&&Number.isInteger(y.num)))?(this.fileguts=JSON.stringify(g),this.loadPromise.resolveMe()):this.readError("File format is invalid.")}else this.readError("File read was empty.")}catch(y){console.error(y),this.readError("Error reading file.")}};try{i.readAsArrayBuffer(s)}catch{this.readError("Could not read file.")}}else this.loadPromise.resolveMe()}}const Yt=new ms;class ps{phase="ST";enterMainPhase(){M.aiActive&&ot.hitMainPhase(),this.phase="MN";const t=S.getActive(),e=this.getMainPhaseActions(t);C.ddf5(e)}async whatNext(){if(M.winFlag!==0){ot.simOn?(ot.simEndpoint(M.winFlag===1?"L":"W"),M.winFlag=0):(C.actionHistory=[],M.aiActive=!1,M.ui.animating=!1,await dt.drawAll());return}if(await dt.drawAll(),C.actionHistory.length>0)C.ddf5();else if(D.getNextTrigger())Ze.resolve(D.getNextTrigger());else if(!D.deathCheck)$.deathCheck(),this.whatNext();else if(D.events.length>0)D.startBatch();else switch(f.purge(),$.purge(),this.phase){case "MN":this.enterMainPhase();break;case "ET":this.phase="PT",D.addEvents(O.player("PTN",S.getActiveB())),Et.expireMods(),this.whatNext();break;case "PT":x.passTheTurn();break;case "WT":console.error("Hit unhandled waiting phase"),this.phase="MN",this.whatNext();break;case "ST":ot.simOn?ot.simEndpoint("T"):(this.phase="MN",ot.cheater()?T.sleep(500).then(()=>this.whatNext()):T.sleep(100).then(()=>this.whatNext()));break}}expireMods(){const t=f.creatByTarget(p.crTarg());let e=[];this.phase==="PT"?t.forEach(i=>{i.mods.forEach(s=>{s.expiry==="EN"?s.expiry="ET":s.expiry==="ET"&&e.push([i,s])})}):this.phase==="ST"&&t.forEach(i=>{i.mods.forEach(s=>{s.expiry==="SN"?s.expiry="ST":s.expiry==="ST"&&e.push([i,s])})}),e.length>0&&(e.forEach(i=>i[0].expireMod(i[1])),_t.enforceAllNonPositionCreatureEffects())}getMainPhaseActions(t){const e=this.getHandActions(t),i=this.getFieldActions(t);let s=x.mainBattle,h="M";return s||(s=f.ddf1().some(g=>g.extraBattles>0&&g.isActive&&!g.defender),h="E"),s&&e.push({key:"FITE",zone:"B",param:h,host:""}),s||e.push({key:"ENDT",zone:"B",param:"",host:""}),[e,i].flat()}getHandActions(t){const e=[...new Set(t.hand)],i=[],s=[];e.forEach(y=>{W.getCard(y).isFree?i.push(y):s.push(y)});const h=i.map(y=>[y,"FREE"]);x.freeCards.forEach(y=>{w.cardByTarget(s,y.condition).forEach(F=>{h.push([F[0],y.id]),s.splice(s.indexOf(F[0]),1)})}),h.push(...s.map(y=>[y,""]));const d=x.regularPlays>0;let g=t.hand.map((y,v)=>[y,v]);return d||(g=g.filter(y=>!s.includes(y[0]))),g.map(y=>{const v=h.find(F=>F[0]===y[0]);return v||console.error("No cost found for card"+y[0]),p.handSelectAction("HPLY",y[0],v[1],y[1])})}getFieldActions(t){const e=f.qPlayerCreats(t.isPlayerA),i=e.filter(h=>f.canMove(h).length>0).map(h=>p.fieldSelectAction("MOVE",h.lane,h.owner)),s=e.filter(h=>h.isActive&&h.activationAvailable?W.getCard(h.code).canActivate(h):!1).map(h=>{const d=p.fieldSelectAction("ACTV",h.lane,h.owner);return d.host=h.code,d.param=h.id,d});return i.forEach(h=>{const d=s.findIndex(g=>g.lane===h.lane);d>-1&&(s.splice(d,1),h.param="ACTV")}),i.concat(s)}}const Et=new ps;class ys{playerA;playerB;activePlayer;isLocalA;constructor(){this.playerA=this.newPlayer(!0),this.playerB=this.newPlayer(!1),this.activePlayer=!0,this.isLocalA=!0}getPlayerState(t){return{deck:t.deck,discard:t.discard,hand:t.hand,health:t.health,triggers:t.triggers,turn:t.turn,rank:t.rank}}setPlayerState(t,e){e.deck=t.deck,e.discard=t.discard,e.hand=t.hand,e.health=t.health,e.triggers=t.triggers,e.turn=t.turn,e.rank=t.rank}getState(){const t={pA:this.getPlayerState(this.playerA),pB:this.getPlayerState(this.playerB),actP:this.activePlayer};return JSON.stringify(t)}setState(t){const e=JSON.parse(t);this.setPlayerState(e.pA,this.playerA),this.setPlayerState(e.pB,this.playerB),this.activePlayer=e.actP}pt2pb={["X"]:()=>{throw new Error("goof passed any to player target boolean-o-fier")},["A"]:()=>!0,["B"]:()=>!1,["F"]:()=>this.getActiveB(),["E"]:()=>!this.getActiveB()};b2p(t){return t?this.playerA:this.playerB}toPlayer(t){return typeof t=="boolean"?this.b2p(t):typeof t=="string"?this.b2p(this.pt2pb[t]()):t}toBool(t){return typeof t=="boolean"?t:typeof t=="string"?this.pt2pb[t]():t.isPlayerA}toTarget(t){return typeof t=="string"?t:(typeof t=="boolean"?t:t.isPlayerA)?"A":"B"}getActive(){return this.b2p(this.activePlayer)}getActiveB(){return this.activePlayer}getLocal(){return this.b2p(this.isLocalA)}getLocalB(){return this.isLocalA}hurtPlayer(t,e){return e<1?0:(t.health-=e,e)}ddf3(t,e,i){const s=this.toPlayer(t),h=this.hurtPlayer(s,e);h>0&&(m.new().crd(i).txt(` dealt ${h} dmg to `).plr(s).txt(".").go(),D.addEvents(O.damage(!1,h,!1,!1,s.isPlayerA,void 0)),_t.playerHealthChange())}hurtPlayerBattle(t,e,i){const s=this.toPlayer(t),h=this.hurtPlayer(s,e);h>0&&(m.new().crd(i.code).txt(` dealt ${h} battle dmg to `).plr(s).txt(".").go(),D.addEvents(O.damage(!0,h,!0,!1,s.isPlayerA,i)))}healPlayer(t,e){const i=this.toPlayer(t);i.health+=e,m.new().plr(i).txt(` gained ${e} health.`).go(),D.addEvents(O.playerHeal(i.isPlayerA,e)),_t.playerHealthChange()}drawCard(t,e){const i=this.toPlayer(t);for(let s=0;s<e;s++){const h=i.deck.pop();h&&i.hand.push(h)}}newPlayer(t){return{hand:[],deck:[],discard:[],isPlayerA:t,health:120,name:"",nameOffset:0,triggers:[],turn:1,rank:1,avatar:Math.floor(Math.random()*17)}}initPlayer(t,e,i,s){const h=this.toPlayer(t);h.name=i,h.nameOffset=s,h.turn=1,h.rank=1,h.health=T.options.highHealth?360:120,h.discard=[],h.deck=Yt.parseDeck(e),h.triggers=[],Yt.shuffleDeck(h),h.hand=h.deck.splice(-5,5)}nameOSaurus(){const t=[["The Garmgunt",5],["Dr. Lucksack",15],["Sgt. Misplay",22],["Salty O'Teary",12],["M.V.P. Sprout",19],["Uncle Punchy",7],["Yesetherian",20],["Rubbish Asir",20],["Hogwash Druid",0],["Offal Savant",15],["Filth Knight",17],["Dirty Mystic",16],["Ether Buffoon",6],["Nexus Dimwit",12],["Hairy Poppins",11],["Al E. Gator",26],["Anita Bath",28],["Bennie Factor",9],["Chris P. Bacon",9],["Don Keigh",29],["Earl E. Bird",25],["Hugh Jass",34],["Jay Walker",28],["Barb Dwyer",22],["Robyn Banks",18],["Anna Graham",9],["Holly Graham",6],["Justin Case",26],["Sir Loins",39]],e=t[T.randInt(0,t.length)];return[e[0],e[1]+18]}}const S=new ys;class bs{stateStack=[];popCheck(){if(this.stateStack.length===0)throw new Error("Attempted to manipulate empty stack")}saveState(){const t={action:C.getState(),aiInPhase:ot.inPhase,batch:D.getState(),death:$.getState(),field:f.getState(),game:M.getState(),mode:JSON.stringify(gt.stack),phase:Et.phase,player:S.getState(),turn:x.getState()};this.stateStack.push(t)}restoreState(){this.popCheck();const t=this.stateStack[this.stateStack.length-1];C.setState(t.action),ot.inPhase=t.aiInPhase,D.setState(t.batch),$.setState(t.death),f.setState(t.field),M.setState(t.game.i,t.game.t),gt.stack=JSON.parse(t.mode),Et.phase=t.phase,S.setState(t.player),x.setState(t.turn)}popState(){this.popCheck(),this.stateStack.pop()}}const ue=new bs;class As{toActions(t){return(Array.isArray(t)?t:[t]).map(i=>{const s=this.actionTargGuts(i);return s.forEach(h=>{h.host=i.host,h.param=i.param,h.hint=i.hint}),s}).flat()}actionTargGuts(t){if(t.target==="TH")return this.deckByTarget(t).map(e=>p.handSelectAction(t.key,e[0],"",e[1]));if(t.target==="TF"){if(t.field==="O")return f.creatByTarget(t).map(e=>p.fieldSelectAction(t.key,e.lane,e.owner));{const e=t.player==="X"?[!0,!1]:[S.toBool(t.player)],i=T.isUn(t.lanes)?f.laneIdx:this.lanesToArr(t.lanes);if(t.field==="A")return e.map(s=>i.map(h=>p.fieldSelectAction(t.key,h,s))).flat();if(t.field==="E")return e.map(s=>f.emptyLanes(s).filter(h=>i.includes(h)).map(h=>p.fieldSelectAction(t.key,h,s))).flat()}}if(t.target==="TP")return t.player==="X"?[p.playerSelectAction(t.key,!0),p.playerSelectAction(t.key,!1)]:[p.playerSelectAction(t.key,S.toBool(t.player))];if(t.target==="TB")return[{key:t.key,zone:"B",host:t.host,param:""}];if(t.target==="TR")return[{key:t.key,zone:"R",host:t.host,param:""}];if(t.target==="TD")return[];throw new Error("Target encountered that doesnt have mappings to actions: "+t.target)}cardByTarget(t,e){let i=t.map((s,h)=>[s,h]);if(e){if(T.isUn(e.deckPositionSkip)||(i=i.filter(s=>s[1]!==e.deckPositionSkip)),e.faction!=="X"&&(i=i.filter(s=>W.getCard(s[0]).faction===e.faction)),e.tribe!=="AN"&&(i=i.filter(s=>{const h=W.getCard(s[0]);return h.type==="C"?h.isTribe(e.tribe):!1})),e.canLevel&&(i=i.filter(s=>W.getCard(s[0]).canLevel())),e.level!=="LA"){const s=w.levelTargetToLevel(e.level);i=i.filter(h=>{const d=parseInt(h[0].substring(3,4));return s.includes(d)})}if(e.card!=="A"){const s=e.card==="C"?"C":"S";i=i.filter(h=>W.getCard(h[0]).type===s)}e.cardCode&&(i=i.filter(s=>W.getCard(s[0]).cardCode()===e.cardCode))}return i}deckByTarget(t){const e=S.toPlayer(t.player);let i;if(t.target==="TH")i=e.hand;else if(t.target==="TD")i=e.discard;else if(t.target==="DK")i=e.deck;else throw new Error("bad target passed to deckByTarget: "+t.target);return this.cardByTarget(i,t)}buttonTarget(t,e="",i=""){return p.actionTarget("TB",t,e,i)}boardTarget(t,e){return p.actionTarget("TR",t,e,"")}ddf2(t){return t===1?"L1":t===2?"LN":"LA"}lt2l={["LA"]:()=>[1,2,3,4],["L1"]:()=>[1],["L2"]:()=>[2],["L3"]:()=>[3],["LN"]:()=>[1,2]};levelTargetToLevel(t){return this.lt2l[t]()}levelTargetTest(t,e){return this.levelTargetToLevel(t).includes(e)}levelTestCommon(t,e){return this.levelTargetTest(this.ddf2(e),t)}lanesToArr(t){return Array.isArray(t)?t:[t]}}const w=new As;class ks{ddf8(t){return t.trigger.type==="FR"?this.forgeTriggerTest(t,!1):t.trigger.type==="VN"?this.vengeanceTriggerTest(t):t.trigger.type==="FK"?this.flankTriggerTest(t):t.trigger.type==="AS"?this.forgeTriggerTest(t,!0):t.trigger.type==="UP"?this.upgradeTriggerTest(t):t.trigger.type==="DM"&&t.event.code==="DMG"||t.trigger.type==="EF"&&t.event.code==="ENT"||t.trigger.type==="DS"&&t.event.code==="DIE"||t.trigger.type==="PC"&&t.event.code==="PLC"||t.trigger.type==="MV"&&t.event.code==="MOV"||t.trigger.type==="RP"&&t.event.code==="RPL"||t.trigger.type==="LG"&&t.event.code==="PHL"||t.trigger.type==="TS"&&t.event.code==="TRS"||t.trigger.type==="TE"&&t.event.code==="TRE"||t.trigger.type==="PT"&&t.event.code==="PTN"||t.trigger.type==="RU"&&t.event.code==="RKU"?this.generalTriggerTest(t):!1}resolve(t){t.host==="C"?(t.trigger.interactive&&(D.iaTrigLane=f.jr5(t.creatId).lane),W.getCard(t.trigger.logicCode).jr8(t)):t.host==="P"?console.error("player hosted trigger encountered. No code!"):t.host==="H"?console.error("hand card hosted trigger encountered. No code!"):console.error("Encountered trigger reaction with mystery host ",t)}forgeTriggerTest(t,e){if(t.event.code==="ENT"){const i=t.event;if(i.forged){const s=f.jr5(t.creatId),h=s.id===i.creatId&&s.status==="A";return e&&h?!s.opposed:h}}return!1}upgradeTriggerTest(t){if(t.event.code==="RPL"){const e=t.event,i=f.searchById(t.creatId);if(i)return i.id===e.creatId;console.warn("Venegeance trigger test could not find its creature",t)}return!1}vengeanceTriggerTest(t){if(t.event.code==="DIE"){const e=t.event,i=f.searchById(t.creatId);if(i)return i.status==="D"&&i.id===e.creatId;console.warn("Venegeance trigger test could not find its creature",t)}return!1}flankTriggerTest(t){if(t.event.code==="MOV"){const e=t.event,i=f.jr5(t.creatId);return i.status==="A"&&i.id===e.creatId}return!1}generalTriggerTest(t){return W.getCard(t.trigger.logicCode).ddf8(t)}}const Ze=new ks;class vs{firstTurn=!0;mainBattle=!0;deathsA=0;deathsB=0;ffs=0;regularPlays=2;cardsPlayed=0;freeCards=[];newPre=[];newPost=[];getState(){const t={mB:this.mainBattle,dA:this.deathsA,dB:this.deathsB,cP:this.cardsPlayed,ffs:this.ffs,fC:this.freeCards,rP:this.regularPlays,n1:this.newPre,n2:this.newPost};return JSON.stringify(t)}setState(t){const e=JSON.parse(t);this.mainBattle=e.mB,this.deathsA=e.dA,this.deathsB=e.dB,this.cardsPlayed=e.cP,this.ffs=e.ffs,this.freeCards=e.fC,this.regularPlays=e.rP,this.newPre=e.n1,this.newPost=e.n2}resetTurnData(){this.mainBattle=!0,this.deathsA=0,this.deathsB=0,this.ffs=0,this.regularPlays=2,this.cardsPlayed=0,this.freeCards=[],this.newPre=[],this.newPost=[],this.firstTurn&&(this.firstTurn=!1,this.regularPlays=1)}forgeCard(t,e){const i=this.cardPlayed(e),s=S.getActive();m.new().txt("Forged ").crd(i.code).txt(".").go(),f.birthCreature(i,"F",s.isPlayerA,t.lane),C.actionDone()}levelAndDiscard(t){const e=W.getCard(t.card),i=S.getActive();return i.hand.splice(t.position,1),e.overload||i.discard.push(e.levelUpCard()),e}cardPlayed(t,e=!1){const i=this.levelAndDiscard(t),s=S.getActive();if(t.cost==="")this.regularPlays-=1;else if(t.cost!=="FREE"){const h=this.freeCards.findIndex(d=>d.id===t.cost);h>-1?this.freeCards.splice(h,1):console.error("Could not find free card rule!")}if(this.cardsPlayed+=1,!e){const h=O.playCard(t.card,s.isPlayerA);D.addEvents(h)}return i}spellCast(){this.cardPlayed(C.cardBeingPlayed),C.actionDone()}passTheTurn(){if(S.activePlayer=!S.activePlayer,Et.phase="WT",M.aiMode){if(!ot.simOn)if(M.aiActive=!M.aiActive,M.aiActive)ot.turnSims=0,ot.turnTime=0;else{const t=`Bot made ${this.calma(ot.turnSims)} pontifications in ${(ot.turnTime/1e3).toFixed(1)} seconds.`;m.new().txt(t).go()}}else S.isLocalA=S.activePlayer;this.startTurn()}calma(t){let e=t.toString();return e.length<4?e:e.length>6?e.slice(0,-6)+","+e.slice(-6,-3)+","+e.slice(-3):e.slice(0,-3)+","+e.slice(-3)}startTurn(){const t="------";ot.log&&M.aiActive&&M.aiMode&&console.log(t+" AI Turn Start "+t),m.new().txt(t).go(),m.new().plr(S.getActiveB()).txt(" starts turn.").go(),this.resetTurnData(),Et.phase="ST",D.addEvents(O.player("TRS",S.getActiveB())),Et.expireMods(),Et.whatNext()}endTurn(){const t=S.getActive();t.discard.push(...t.hand),t.hand=[],t.turn++;const e=t.turn>4;D.addEvents(O.player("TRE",t.isPlayerA)),e&&(t.turn=1,t.rank++,m.new().plr(t).txt(" hits Rank "+t.rank+".").go(),D.addEvents(O.player("RKU",t.isPlayerA)),t.deck.push(...t.discard),t.discard=[],Yt.shuffleDeck(t.isPlayerA)),f.qActiveCreats().forEach(i=>{i.extraBattles=0}),S.drawCard(t,5),Et.phase="ET",C.actionDone()}mobility(t){const e=f.jr5(t.param);e.mobilityAvailable=!1,e.move(t.lane),C.actionDone()}allied(t,e){const i=e??S.getActive(),s=p.target("TH");return s.player=S.toTarget(i),s.faction=t,w.deckByTarget(s).length>0}freeCard(t){const e=p.freeCard(t);return this.freeCards.push(e),e}birthRegistrar(t){this.mainBattle?this.newPre.push(t):this.newPost.push(t)}}const x=new vs;class ni{id;dom;context;width;height;constructor(t){if(this.id=t,this.dom=document.getElementById(t),!this.dom)throw new Error(`Could not find canvas id ${t}`);this.context=this.dom.getContext("2d"),this.width=this.dom.width,this.height=this.dom.height,this.context.textBaseline="top",this.context.shadowOffsetX=1,this.context.shadowOffsetY=1}show(){this.dom.hidden=!1}hide(){this.dom.hidden=!0}get visible(){return!this.dom.hidden}clear(){this.context.clearRect(0,0,this.width,this.height)}sprite(t,e,i){this.context.drawImage(t,e,i)}updateScale(t){this.context.scale(t,t)}}class Ht{getCanv(t){return t instanceof ni?t:tt.get(t)}async drawSprite(t,e,i,s,h={}){const d=this.getCanv(t).context,g=await T.getSprite(T.imgRoot+e);let y=1;h&&(y=h.alpha??1),y<1&&(d.globalAlpha=y),d.drawImage(g,i,s,g.naturalWidth,g.naturalHeight),y<1&&(d.globalAlpha=1)}async drawText(t,e,i,s,h={}){const d=this.getCanv(t).context,g=h.fontSize??24;T.pxRatio===2&&(s=this.retinaTextY(s,g)),d.fillStyle=h.colour||"#000000",d.font=`${g}px ${h.fontName||"cinzel"}`,d.shadowColor=h.shadow?"#000000":"#00000000",d.fillText(e,i,s),d.shadowColor="#00000000"}async spriteNumber(t,e,i,s,h,d){let g=i-this.numOffset(e,h);const y=[];e.toString().split("").forEach(v=>{y.push(this.drawSprite(t,this.numSpriteUrl(v,h,d),g,s)),g+=this.numSize(v,h)}),await Promise.all(y)}async drawHighlight(t,e,i,s,h,d="#00FF00"){const g=d.length===7?d.concat("aa"):d,y=this.getCanv(t);y.context.strokeStyle=g,y.context.beginPath(),y.context.rect(e,i,s,h),y.context.stroke()}hlColour(t){return t==="CANC"?"#FF0000":"#00FF00"}drawRarity(t,e,i,s){return this.drawSprite(t,`icons/rarity/new/${m.rarityText(e).toLowerCase()}.png`,i,s)}drawFaction(t,e,i,s){const h=e==="T"?2:0;return this.drawSprite(t,`icons/faction/${m.factionText(e).toLowerCase()}.png`,i+h,s+3)}retinaTextY(t,e){let i;return e<21?i=6:e<27?i=7:i=8,t-i}smallNumSize={"-":7,0:10,1:9,2:10,3:8,4:10,5:9,6:10,7:9,8:8,9:9};bigNumSize={"-":8,0:13,1:9,2:13,3:11,4:14,5:12,6:12,7:12,8:12,9:12};numSize(t,e){return e==="S"?this.smallNumSize[t]:this.bigNumSize[t]}numOffset(t,e){const i=t.toString().split("").reduce((s,h)=>s+this.numSize(h,e),0)-(e==="B"?2:1);return Math.floor(i/2)}numSpriteUrl(t,e,i){return`text/nums/${e}/${i}/${t}.png`}haze="#222222d8"}class de extends Ht{async drawButton(t,e,i,s,h,d=7,g=!1,y=!0){let v,F;g?(v="ui/button/menu_on.png",F="#d7fc03"):(v="ui/button/menu_off.png",F="#00DEF7");const L=this.buttonBounds(e,i);if(await this.drawSprite(t,v,L[0],L[1]),await this.drawText(t,h,L[0]+7+d,L[1]+24,{colour:F,fontSize:30}),!g||y){const z=new nt(s,...L,it.Both);J.add(z)}}async buttonMaker(t,e,i,s,h,d=7,g=!1,y=!0){const v={key:"MNBT",zone:"N",host:"",param:s};await this.drawButton(t,e,i,v,h,d,g,y)}buttonBounds(t,e){return[t-7,e-7,232,69]}}class Ye extends Ht{async makeIconButton(t,e,i,s){let d;d=`ui/button/ui_${s}.png`,await this.drawSprite(t,d,e,i);const g=p.basicAction("UIBT");g.param=s;const y=new nt(g,e,i,40,40,it.Both);J.add(y)}async makeVScroller(t,e,i,s,h){const d=this.vScrollHilightBounds(e,i);await this.drawSprite(t,`ui/arrow/${s?"up":"down"}.png`,e,i);const g={zone:"N",key:h,host:"",param:s?"U":"D"},y=new nt(g,...d,it.Both);J.add(y)}vScrollHilightBounds(t,e){return[t-3,e-3,40,27]}}class Ne extends Ht{async drawActions(t){if(gt.baseMode==="G"){const e=tt.get("effects"),i=t.filter(s=>s.zone==="B");if(i.length>1&&console.error("Two button actions encountered in one batch",i),i.length===0||M.aiActive||T.clickMode==="I"&&!gt.isDetailMode){const s=this.buttonBounds();await this.drawSprite(e,"ui/button/off.png",s[0],s[1])}else{const s=i[0],h=this.buttonBounds();await this.drawSprite(e,"ui/button/on.png",h[0],h[1]);let d;s.key==="CARD"?d=s.param:d=s.key,await this.drawSprite(e,`text/butt/${d}.png`,h[0]+23,h[1]+18);const g=this.highlightBounds(),y=new nt(s,...g);s.key==="CNCL"&&(y.mouse=it.Both),J.add(y)}}}buttonBounds(){return[856,406,160,63]}highlightBounds(){const t=this.buttonBounds(),e=5,i=[-1,-1,2,2];return t.map((s,h)=>s+e*i[h])}}class Kt extends Ht{async drawCard(t,e,i,s){const h=this.getCanv(e),d=this.extractStats(t),g=d.cardClass;if(await this.drawSprite(h,g.image(!1),i+14,s+35),await this.drawSprite(h,this.frameImg(g.level,g.faction,g.type,!1),i,s),await this.drawSprite(h,`text/card/${g.cardCode()}.png`,i+12,s+16),d.isCreature){const y=s+178;await this.spriteNumber(h,d.att,i+24,y,"S","Y"),await this.spriteNumber(h,d.hlt,i+127,y,"S","Y")}if(d.sleeping&&await this.drawSprite(h,"icons/effects/defensive.png",i+5,s+40,{alpha:.7}),d.iconList.length>0){const y=i+57-17*(d.iconList.length-1);await Promise.all(d.iconList.map(async(v,F)=>this.drawIcon(h,y+F*35,s+140,v[0],v[1])))}}async drawBigCard(t,e,i,s){const h=this.extractStats(e);if(await this.drawSprite(t,e.image(!0),i+38,s+117),await this.drawSprite(t,this.frameImg(e.level,e.faction,e.type,!0),i,s),e.rarity!=="T"&&await this.drawRarity(t,e.rarity,i+309,s+394),h.isCreature){const d=s+555;await this.spriteNumber(t,h.att,i+44,d,"B","Y"),await this.spriteNumber(t,h.hlt,i+325,d,"B","Y")}}async drawIcon(t,e,i,s,h=0){const d=this.getCanv(t);if(await this.drawSprite(d,`icons/effects/${s}.png`,e,i),h>0){const g=s==="poison"?12:9;await this.spriteNumber(d,h,e+17,i+g,"S","B")}}extractStats(t){let e,i=!1,s=0,h=0,d=!1,g=0,y=!1,v=!1,F=!1,L=!1,z=0,rt=0,U=0,j=!1,xt=!1;if(!(t instanceof Mt))i=!0,s=t.attack,h=t.health,d=t.sleeping&&!t.aggressive,g=t.regen,y=t.breakthrough,v=t.defender,F=t.aggressive,z=t.armor,rt=t.poison,U=t.mobility,L=t.changed,e=W.getCard(t.code);else{if(t.type==="C"){i=!0;const Tt=t;s=Tt.jr1,h=Tt.jr2,g=Tt.initRegen,y=Tt.initBT,v=Tt.initDefend,F=Tt.initAggro,z=Tt.initArmor,U=Tt.initMobile}j=t.overload,xt=t.consistent,e=t}const ft=[];return j&&ft.push(["overload",0]),xt&&ft.push(["consistent",0]),g>0&&ft.push(["regenerate",g]),y&&ft.push(["breakthrough",0]),v&&ft.push(["defender",0]),F&&ft.push(["aggressive",0]),z>0&&ft.push(["armor",z]),rt>0&&ft.push(["poison",rt]),U>0&&ft.push(["mobility",U]),L&&ft.push(["changed",0]),{cardClass:e,isCreature:i,iconList:ft,hlt:h,att:s,sleeping:d}}async drawHilight(t,e,i,s="#00FF00"){await super.drawHighlight(t,...this.highlightBounds(e,i),s)}cardBounds(t,e){return[t,e,150,205]}highlightBounds(t,e){const i=this.cardBounds(t,e),s=5,h=[-1,-1,2,2];return i.map((d,g)=>d+s*h[g])}frameImg(t,e,i,s){return`frames/${s?"big":"small"}/lvl${t}_${e}${i}.png`}levelImg(t){return`icons/frame/lvl${t}.png`}oldFrameImg(t){return`icons/frame/frame${t}.png`}factionImg(t){return`icons/faction/orb${t}.png`}}const oi=30,Me=540,hi=5;class li extends Ht{async drawCards(t){const e=tt.get("hand");e.clear();const i=new Kt,s=i.highlightBounds(0,0)[2]+hi;let h=oi;const d=this.paginatron(t);for(let g=d[0];g<=d[1];g++){const y=W.getCard(t.hand[g]);await i.drawCard(y,e,h,Me),h+=s}}async drawActions(t){const e=T.clickMode!=="I",i=tt.get("effects"),s=new Kt,h=s.highlightBounds(0,0)[2]+hi,d=new Gt(0,520,1e3,250),g=new Gt(0,520,1e3,250,it.Right),y=this.paginatron(S.getActive());await Promise.all(t.filter(v=>v.zone==="H").map(async v=>{const F=v;if(F.position>=y[0]&&F.position<=y[1]){const L=oi+(F.position-y[0])*h;if(v.key==="DEET"){const z=new nt(v,...s.highlightBounds(L,Me),it.Right);g.addChild(z)}else if(e){const z=new nt(v,...s.highlightBounds(L,Me));d.addChild(z),await s.drawHilight(i,L,Me,this.hlColour(F.key))}}})),e&&J.add(d),J.add(g),y[0]>0&&await this.makeScroller(i,!1),y[1]<y[2]&&await this.makeScroller(i,!0)}paginatron(t){let e=M.ui.handScrollLeft;return e>0&&t.hand.length-e<5&&(e=Math.max(0,t.hand.length-5),M.ui.handScrollLeft=e),[e,Math.min(e+4,t.hand.length-1),t.hand.length-1]}scrollHilightBounds(t,e){return[t-3,e-2,27,38]}async makeScroller(t,e){const i=e?894:856,s=726,h=this.scrollHilightBounds(i,s);await this.drawSprite(t,`ui/arrow/${e?"right":"left"}.png`,i,s),await this.drawHighlight(t,...h);const d={zone:"N",key:"SCRH",host:"",param:e?"R":"L"},g=new nt(d,...h,it.Both);J.add(g)}}class Ke extends Ht{fieldBoundary=[17,62,821,443];async drawCards(t){const e=S.getLocalB(),i=tt.get("field");i.clear();const s=new Kt,h=f.qActiveCreats().map(d=>{let g=0;t&&t.scrappers.some(v=>v[0]===d.lane&&v[1]===d.owner)&&(g=t.battlePhase);const y=this.coordCalc(d.lane,d.owner,e,g);return s.drawCard(d,i,...y)});if(await Promise.all(h),D.iaTrigLane>0){const d=this.coordCalc(D.iaTrigLane,S.getActiveB(),e),g=s.cardBounds(...d);await this.drawSprite(i,"icons/rewards/gold.png",g[0]+g[2]/2-10,g[1]+g[3]+8)}}async drawActions(t){const e=T.clickMode!=="I",i=S.getLocalB(),s=tt.get("effects"),h=new Kt,d=new Gt(...this.fieldBoundary),g=new Gt(...this.fieldBoundary,it.Right);await Promise.all(t.filter(y=>y.zone==="F"||y.zone==="R").map(async y=>{if(y.zone==="R"&&e){const v=new nt(y,...this.fieldBoundary);J.add(v),await this.drawHighlight(s,...this.fieldBoundary)}else{const v=y,F=this.coordCalc(v.lane,v.playerA,i);if(y.key==="DEET"){const L=new nt(y,...h.highlightBounds(...F),it.Right);g.addChild(L)}else if(e){const L=new nt(y,...h.highlightBounds(...F));d.addChild(L),await h.drawHilight(s,...F,this.hlColour(v.key))}}})),e&&d.childs.length>0&&J.add(d),g.childs.length>0&&J.add(g)}async drawFight(t){if(t.length>0){const e={battlePhase:1,scrappers:t},i=72;await new Ne().drawActions([]),await this.drawCards(e),await T.sleep(i),e.battlePhase=2,await this.drawCards(e),await T.sleep(i),e.battlePhase=3,await this.drawCards(e),await T.sleep(i),e.battlePhase=4,await this.drawCards(e),await T.sleep(i+70),e.battlePhase=3,await this.drawCards(e),await T.sleep(i),e.battlePhase=2,await this.drawCards(e),await T.sleep(i),e.battlePhase=1,await this.drawCards(e),await T.sleep(i)}}coordCalc(t,e,i,s=0){const h=i===e,d=166,g=5;let y,v,F;return[y,F,v]=h?[22,290,1]:[687,65,-1],[y+(t-1)*d*v,F+s*g*(-1*v)]}}class Re extends Ht{avatars=["barf","beee","behold","boof","crowley","darko","deert","eyebs","fine","furiousgeorge","ghoost","judge","kenta","nom","pupsky","skelly","stache"];async drawPlayer(t,e,i,s){const h=this.getCanv(e);await this.drawSprite(h,`avatar/${this.avatars[t.avatar]}.jpg`,i+46,s+48),await this.drawSprite(h,"ui/player_frame.png",i,s),await this.drawSprite(h,"ui/player_health.png",i+10,s+102),await this.spriteNumber(h,t.health,i+45,s+149,"B","G"),await this.drawText(h,`Turn: ${t.turn.toString()}   Rank: ${t.rank.toString()}`,i+25,s+210,{colour:"#f5f242",fontSize:20}),await this.drawText(h,t.name,i+t.nameOffset,s+185,{colour:"#42a4f5",fontSize:20})}async drawAllPlayers(){const t=tt.get("player");t.clear();const e=!M.aiActive,i=S.getLocal(),s=S.toPlayer(!i.isPlayerA);if(await this.drawPlayer(i,t,...this.playerOrigin(!0)),await this.drawPlayer(s,t,...this.playerOrigin(!1)),i.isPlayerA===S.getActiveB()){let h=862;const d=295,g=Array(x.regularPlays).fill("blue").concat(x.freeCards.map(v=>v.sourceCard)),y=[];g.forEach(v=>{let F;if(v==="blue")F=v;else if(F="green",e){const L={key:"DEET",zone:"N",host:"",param:v},z=new nt(L,h-1,d-1,28,41,it.Both);J.add(z)}y.push(this.drawSprite(t,`ui/${F}card.png`,h,d)),h+=30}),await Promise.all(y)}await this.drawDeckButton(t,i,!0,e),await this.drawDeckButton(t,i,!1,e)}async drawDeckButton(t,e,i,s){let h,d,g;if(i?(h=e.discard.length,d=935,g="T"):(h=e.deck.length,d=858,g="U"),await this.drawSprite(t,`ui/button/faction_${g}.png`,d,350),await this.spriteNumber(t,h,d+38,350+14,"S","Y"),h>0&&s){const v=p.basicAction("VWDK");v.param=i?"VD":"VR";const F=new nt(v,d,350,77,44,it.Both);J.add(F)}}async drawActions(t){if(T.clickMode==="I")return;const e=tt.get("effects"),i=S.getLocalB();await Promise.all(t.filter(s=>s.zone==="P").map(s=>{const h=s,d=this.playerOrigin(h.playerA===i),g=this.highlightBounds(...d),y=new nt(s,...g);return J.add(y),this.drawHighlight(e,...g)}))}playerOrigin(t){return[832,t?485:0]}playerBounds(t,e){return[t+18,e+18,170,170]}highlightBounds(t,e){return this.playerBounds(t,e)}async drawGameOver(){const t=tt.get("field"),e=94,i=S.getLocalB(),s=M.winFlag,h=i&&s===1||!i&&s===-1;await this.drawSprite(t,`ui/you-${h?"win":"lose"}.png`,e,89),J.removeAll();const d=new de,g=tt.get("effects");await d.drawButton(g,e+62,520,p.menuButtonAction("MM"),"Main Menu",20,!1),await d.drawButton(g,e+389,520,p.menuButtonAction("RP"),"Replay",55,!1)}async drawAiGear(t,e){const h=t%6,d=Math.floor(t/6),g=tt.get("effects"),y=`icons/rewards/${e?"gold":"silver"}.png`;await this.drawSprite(g,y,862+h*24,255+d*24)}hwhipe(){tt.get("effects").clear()}}const ci=15,ui=15,Ts=5;class Cs extends Ht{constructor(){super();const e=new Kt().highlightBounds(0,0);this.xOffset=e[2]+Ts,this.yOffset=e[3]+25}xOffset;yOffset;async drawCards(){const t=tt.get("decklist");t.clear(),t.context.fillStyle=this.haze,t.context.fillRect(0,0,849,T.gameHeight);const e=new Kt,s=Bt.visibleContent().map((h,d)=>{const g=W.getCard(h.cardCode),y=this.listXY(d);return e.drawCard(g,t,...y).then(()=>{if(h.cardCount>0)return this.drawCount(t,y[0]+62,y[1]+163,h.cardCount)})});await Promise.all(s)}async drawActions(t){const e=tt.get("decklist"),i=new Kt,s=new Ye,h=T.clickMode!=="I",d=Bt.visibleContent(),g=M.ui,y=g.deckScroll,v=y+15,L=g.deckSummary?it.Both:it.Right,z=new Gt(...this.deckBoundary()),rt=new Gt(...this.deckBoundary(),L),U=[];t.forEach(j=>{if(j.key==="DEET"){const xt=j;if(xt.position>=y&&xt.position<v){const ft=new nt(j,...i.highlightBounds(...this.listXY(xt.position-y)),L);rt.addChild(ft)}}else if(j.key==="CARD"&&h){const xt=j,ft=d.findIndex(Tt=>Tt.sourceIdx===xt.position);if(ft>-1){const Tt=this.listXY(ft-y),Ae=new nt(j,...i.highlightBounds(...Tt));z.addChild(Ae),U.push(i.drawHilight(e,...Tt,this.hlColour(j.key)))}}}),h&&z.childs.length>0&&J.add(z),rt.childs.length>0&&J.add(rt),Bt.canPageDown&&U.push(s.makeVScroller(e,319,723,!1,"SCRK")),Bt.canPageUp&&U.push(s.makeVScroller(e,487,723,!0,"SCRK")),await Promise.all(U)}async drawCount(t,e,i,s){await this.drawSprite(t,"ui/dullcard.png",e,i),await this.spriteNumber(t,s,e+13,i+13,"S","Y")}listXY(t){return[ci+t%5*this.xOffset,ui+Math.floor(t/5)*this.yOffset]}deckBoundary(){return[ci,ui,this.xOffset*5,this.yOffset*3]}}class Ss extends Ht{async drawDetails(t){const e=[],i=tt.get("card");i.clear(),i.context.fillStyle=this.haze,i.context.fillRect(0,0,849,T.gameHeight);const s=30,h=30,d=W.getCard(Zt.currentCard),g=new Kt;T.options.bigCards?e.push(g.drawBigCard(i,d,s,h)):e.push(g.drawCard(d,i,134,280));const y=435;let v=30;const F="#f5f242",L="#03fcfc",z=33,rt=23,U=28;let j=d.name;for(;j.length>0;){v+=36;let yt;if(j.length<rt)yt=j,j="";else{const Ut=j.lastIndexOf(" ",rt);yt=j.substring(0,Ut),j=j.substring(Ut+1)}e.push(this.drawText(i,yt,y,v,{colour:L,fontSize:28}))}v+=36,e.push(this.drawText(i,this.cardSummary(d),y,v,{colour:L,fontSize:20})),d.type==="C"&&(v+=30,e.push(this.drawText(i,this.tribeSummary(d),y,v,{colour:L,fontSize:20})));let xt=m.cardTextSplit(d);v+=40,xt.forEach(yt=>{for(;yt.length>0;){let Ut;if(yt.length<z)Ut=yt,yt="";else{const ae=yt.lastIndexOf(" ",z);Ut=yt.substring(0,ae),yt=yt.substring(ae+1)}e.push(this.drawText(i,Ut,y,v,{colour:F,fontSize:20})),v+=U}});const ft=this.levelFun(d),Tt=ft.length;if(ft.length>1){const yt=d.cardCode(),Ut=Tt===3?[19,147,270]:Tt===2?[78,216]:[0,98,196,294];ft.forEach((ae,Ee)=>{e.push(this.drawLevelButton(i,yt,ae,40+Ut[Ee],658,ae===d.level))})}const Ae=new de;let ke=0;const qe=513,je=697,di=74;gt.baseMode!=="G"&&(e.push(Ae.drawButton(i,qe,je,t,"Close",65,!1)),ke++);const Fs=new nt(t,s,h,377,603,it.Both);if(J.add(Fs),Zt.canGoBack){const yt=Zt.goBackAction();e.push(Ae.drawButton(i,qe,this.buttonY(je,ke,di),yt,"Back",72,!1)),ke++}Zt.friendos.forEach(yt=>{const Ut=W.getCard(yt),ae=Zt.friendAction(yt),Ee=Zt.friendTxt(Ut.cardCode());e.push(Ae.drawButton(i,qe,this.buttonY(je,ke,di),ae,Ee[1]||Ut.name,Ee[0],!1)),ke++}),await Promise.all(e)}buttonY(t,e,i){return t-e*i}cardSummary(t){const e=m.factionText(t.faction),i=m.rarityText(t.rarity),s=m.cardTypeText(t.type);return`${e}, ${i} ${s}`}tribeSummary(t){return t.tribe.map(e=>m.tribeText(e)).join(" ")}async drawLevelButton(t,e,i,s,h,d){if(await this.drawSprite(t,`icons/frame/level${i}.png`,s,h),!d){const F=Zt.levelAction(i),L=new nt(F,s-15,h-5,88,112,it.Both);J.add(L)}const y=W.getCard(`${e}${i}`).levelSpice(),v=[[-16,55],[41,55],[11,79]];await Promise.all(y.map((F,L)=>{const z=s+v[L][0],rt=h+v[L][1];if(F.icon==="A"||F.icon==="H"){let U,j;return F.icon==="A"?(U="icons/frame/attack.png",j=z+17):(U="icons/frame/health.png",j=z+16),this.drawSprite(t,U,z-1,rt-1).then(()=>this.spriteNumber(t,F.num,j,rt+10,"S","Y"))}else{let U=this.spiceIcon(F.icon);if(F.icon==="U"||F.icon==="D"||F.icon==="L"||F.icon==="N"){const j=`icons/effects/${U}.png`;return this.drawSprite(t,j,z-1,rt-1).then(()=>this.spriteNumber(t,F.num,z+16,rt+10,"S","B"))}else return new Kt().drawIcon(t,z,rt,U,F.num)}}))}spiceIcon(t){return t==="N"?"new":t==="D"?"damage":t==="U"?"buff":t==="V"?"mobility":t==="P"?"poison":t==="M"?"armor":t==="G"?"aggressive":t==="F"?"defender":t==="B"?"breakthrough":t==="R"?"regenerate":t==="L"?"life":t==="C"?"consistent":t==="O"?"overload":"whoops"}levelFun(t){return t.maxLevel===3?t.minLevel===1?[1,2,3]:[3]:t.maxLevel===t.minLevel?[t.minLevel]:t.maxLevel===4?[1,2,3,4]:[1,2]}}class ws extends Ht{packLeft=22;packTop=190;packBoundary=[this.packLeft-5,this.packTop-10,537,480];async drawPack(t,e){const i=new Kt,s=T.clickMode!=="I",h=[],d=new Gt(...this.packBoundary),g=new Gt(...this.packBoundary,it.Right);t.filter(v=>v.pack).forEach(v=>{const F=this.coordCalcPack(v.index);if(v.key==="DRFT"){const L=W.getCard(v.param+"1");if(h.push(i.drawCard(L,e,...F).then(()=>this.drawRarity(e,L.rarity,F[0]+112,F[1]+4))),s){const z=new nt(v,...i.highlightBounds(...F));d.addChild(z)}}else{const L=new nt(v,...i.highlightBounds(...F),it.Right);g.addChild(L)}}),s&&d.childs.length>0&&J.add(d),g.childs.length>0&&J.add(g),await Promise.all(h)}async drawList(t,e){let i=170;const s=570,h=[],d=ct.picksAsDeck,g=new Gt(s,i,600,600,it.Both),y=t,v=15,F=ct.scrollIdx;ct.canPageDown&&await this.makeScroller(e,!1),ct.canPageUp&&await this.makeScroller(e,!0),y.filter(L=>!L.pack).forEach(L=>{if(L.index>=F&&L.index<F+v){const z=W.getCard(L.param);h.push(this.drawFaction(e,z.faction,s,i),this.drawRarity(e,z.rarity,s+28,i),this.drawText(e,`${d[L.index].num}x ${z.name}`,s+65,i+7,{colour:"#f5f242"}));const rt=new nt(L,s,i-2,600,35,it.Both);g.addChild(rt),i+=35}}),await Promise.all(h),J.add(g)}coordCalcPack(t){const s=t%3,h=Math.floor(t/3);return[this.packLeft+s*176,this.packTop+h*235]}async makeScroller(t,e){const i=new Ye,s=522,h=720-(e?40:0);await i.makeVScroller(t,s,h,e,"SCRD")}async drawStats(t){const e=ct.stats;let i=this.packBoundary[0]+10;const s=this.packBoundary[1]+this.packBoundary[3]+20;await this.threeLine(t,i,s,["Creat:","Spell:","Total:"]),i+=75,await this.threeLine(t,i,s,e.getTotal()),await Promise.all(ve.map(h=>{const d=e.getFactTotal(h);if(d[2]===0)return[Promise.resolve()];{i+=75;const g=this.threeLine(t,i,s,d),y=this.drawFaction(t,h,i-8,s-39);return[g,y]}}).flat())}async threeLine(t,e,i,s){const h={colour:"#ffd865",fontSize:18,fontName:"serif"},d=30;await Promise.all(s.map((g,y)=>this.drawText(t,g.toString(),e,i+d*y,h)))}async drawDraftMenu(t){const e=new de,i=new be,s=240,h=80,d=45,g=34;let y=50,v=s;await i.headerText(y+28,v,"Opponent",t),v+=d,await e.buttonMaker(t,y,v,"DI","DUMB BOT",27,ct.vsAI,!1),v+=h,await e.buttonMaker(t,y,v,"DV","HUMAN",47,!ct.vsAI,!1),v+=h+16,await i.headerText(y+17,v,"Rarity Filter",t),v+=h-g-6,await this.rarityButton(t,y+20,v,"L",ct.getRarity("L")),await this.rarityButton(t,y+125,v,"H",ct.getRarity("H")),v+=h,await this.rarityButton(t,y+20,v,"R",ct.getRarity("R")),await this.rarityButton(t,y+125,v,"C",ct.getRarity("C")),v=s+d+h*5,await e.buttonMaker(t,y,v,"MM","MAIN MENU",16),y=404,v=s,await i.headerText(y+5,v,"Draft Modes",t),v+=d,await e.buttonMaker(t,y,v,"GP","GOOD PACKS",9,ct.fatPacks),v+=h,await e.buttonMaker(t,y,v,"LD","LEGENDARY",17,ct.legDraft),v+=h,await e.buttonMaker(t,y,v,"OD","OVERDRAFT",17,ct.overdraft),y=757,v=s,await i.headerText(y+76,v,"Sets",t),v+=d,await this.chestButton(t,y+3,v,1,ct.getSet(1)),await this.chestButton(t,y+124,v,2,ct.getSet(2)),v+=88,await this.chestButton(t,y+3,v,3,ct.getSet(3)),await this.chestButton(t,y+124,v,4,ct.getSet(4)),v=s+d+h*5,await e.buttonMaker(t,y,v,"DN","NEXT",68)}async rarityButton(t,e,i,s,h){const d={key:"MNBT",zone:"N",host:"",param:T.enTil("DR",s)},g=`ui/button/rarity_${s}${h?"y":"n"}.png`;await this.drawSprite(t,g,e,i);const y=new nt(d,e,i,75,65,it.Both);J.add(y)}async chestButton(t,e,i,s,h){const d={key:"MNBT",zone:"N",host:"",param:T.enTil("DT",s)},g=`icons/sets/Chest_Set${s}${h?"y":"n"}.png`;await this.drawSprite(t,g,e,i);const y=new nt(d,e,i,90,74,it.Both);J.add(y)}}class Xe extends Ht{async drawSets(t,e){let i=200;const s=100,h=[],d=new Gt(s,i,400,600);t.filter(g=>g.key==="DSET").forEach(g=>{const y=fe[parseInt(g.param)];h.push(this.drawText(e,y.name,s,i,{colour:"#f5f242"}),this.drawSprite(e,"icons/chest_small.png",s-48,i-5));const v=new nt(g,s,i-2,400,35,it.Both);d.addChild(v),i+=45}),J.add(d),await Promise.all(h)}async drawList(t,e){let i=170;const s=570,h=[],d=new Gt(s,i,600,600);t.filter(g=>g.key==="DECK").forEach(g=>{const y=T.deTil(g.param),v=Yt.stockDeckByName(y[0],y[1]);h.push(this.drawFaction(e,v.factions[0],s,i),this.drawText(e,v.name,s+65,i+7,{colour:"#f5f242"})),v.factions.length===2&&h.push(this.drawFaction(e,v.factions[1],s+28,i));const F=new nt(g,s,i-2,600,35,it.Both);d.addChild(F),i+=35}),await Promise.all(h),J.add(d)}packBoundary=[17,190,537,480];coordCalcPack(t){const s=t%3,h=Math.floor(t/3);return[22+s*176,200+h*235]}iAmError(t){const e=tt.get("game-ui");this.drawText(e,t,295,655,{colour:"#f5142e",fontSize:26})}async drawConstrMenu(t){const e=new de,i=new be,s=240,h=80,d=45;let g=50,y=s;await i.headerText(g+28,y,"Opponent",t),y+=d,await e.buttonMaker(t,g,y,"CI","DUMB BOT",27,Dt.vsAI,!1),y+=h,await e.buttonMaker(t,g,y,"CV","HUMAN",47,!Dt.vsAI,!1),y+=h*4,await e.buttonMaker(t,g,y,"MM","MAIN MENU",16),g=404,y=s,await i.headerText(g+46,y,"Player 1",t);const v=Dt.p1.mode;y+=d,await e.buttonMaker(t,g,y,T.enTil("CP","A"),"PRE-CON",39,v==="CP",!1),y+=h,await e.buttonMaker(t,g,y,T.enTil("CR","A"),"RANDOM",36,v==="CR",!1),y+=h,await e.buttonMaker(t,g,y,T.enTil("CX","A"),"SCRAMBLE",30,v==="CX",!1),y+=h,await e.buttonMaker(t,g,y,T.enTil("LK","A"),"LOAD FILE",32,v==="LK"),v==="LK"&&await this.drawFileDeck(t,g,y,Dt.p1.deck),g=757,y=s,await i.headerText(g+44,y,"Player 2",t);const F=Dt.p2.mode;y+=d,await e.buttonMaker(t,g,y,T.enTil("CP","B"),"PRE-CON",39,F==="CP",!1),y+=h,await e.buttonMaker(t,g,y,T.enTil("CR","B"),"RANDOM",36,F==="CR",!1),y+=h,await e.buttonMaker(t,g,y,T.enTil("CX","B"),"SCRAMBLE",30,F==="CX",!1),y+=h,await e.buttonMaker(t,g,y,T.enTil("LK","B"),"LOAD FILE",32,F==="LK"),F==="LK"&&await this.drawFileDeck(t,g,y,Dt.p2.deck),y+=h*2,await e.buttonMaker(t,g,y,"CN","NEXT",68)}async drawFileDeck(t,e,i,s){const h=i+89;await this.drawText(t,s.name.slice(0,20),e,i+70,{colour:"#f5f242",fontSize:18}),s.factions.length===1?await this.drawFaction(t,s.factions[0],e+96,h):(await this.drawFaction(t,s.factions[0],e+78,h),await this.drawFaction(t,s.factions[1],e+113,h))}}class be extends Ht{async drawExtrasMenu(t){const e=new de,i=240,s=80,h=45;let d=50,g=i;await this.headerText(d+28,g,"More Info",t),g+=h,await e.buttonMaker(t,d,g,"RU","RULES",66),g+=s,await e.buttonMaker(t,d,g,"FQ","INFO & FAQ",20),g+=s*3,await e.buttonMaker(t,d,g,"MM","MAIN MENU",16),d=404,g=i,await this.headerText(d+37,g,"UI Modes",t),g+=h,await e.buttonMaker(t,d,g,"90","90% SIZE",47,T.options.scale==="90"),g+=s,await e.buttonMaker(t,d,g,"BC","BIG CARDS",29,T.options.bigCards),d=757,g=i,await this.headerText(d+12,g,"Game Modes",t),g+=h,await e.buttonMaker(t,d,g,"HH","BIG HEALTH",20,T.options.highHealth),g+=s,await e.buttonMaker(t,d,g,"CH","CHEATER",37,T.options.cheater),g+=s,await e.buttonMaker(t,d,g,"BB","BATTLE BARK",13,T.options.bark),await this.drawText(t,"v0.6.0",494,730,{fontSize:16,colour:"#7b68ee"})}async headerText(t,e,i,s){await this.drawText(s,i,t,e,{colour:"#f5f242",fontSize:30})}async drawPickerPlayer(t,e,i){let s;e?s="Player 1":i?s="Dumb Bot":s="Player 2",await this.headerText(54,75,s,t)}}class Ds extends Ht{async drawMenu(t){let i=22;await this.drawSprite(t,"ui/button/constructed.png",778,i);const s=new nt(this.makeAction("C"),...this.buttHilightBounds(778,i),it.Both);J.add(s),i=148,await this.drawSprite(t,"ui/button/draft.png",778,i);const h=new nt(this.makeAction("D"),...this.buttHilightBounds(778,i),it.Both);J.add(h),i=508,await this.drawSprite(t,"ui/button/deck.png",778,i);const d=new nt(this.makeAction("B"),...this.buttHilightBounds(778,i),it.Both);J.add(d),i=634,await this.drawSprite(t,"ui/button/info.png",778,i);const g=new nt(this.makeAction("I"),...this.buttHilightBounds(778,i),it.Both);J.add(g),await this.drawSprite(t,"gwg/gwg_red.png",58,0)}buttBounds(t,e){return[t,e,242,113]}buttHilightBounds(t,e){const s=[-3,-3,6,6];return this.buttBounds(t,e).map((h,d)=>h+s[d])}makeAction(t){return{zone:"N",key:"MENU",host:"",param:t}}}class xs{gameWidth;gameHeight;spriteCache;dogAudio;_clickMode;pxRatio=1;options;imgRoot;constructor(){this.spriteCache={},this.imgRoot="./img/",this.gameWidth=1024,this.gameHeight=768,this.dogAudio=document.getElementById("dogbark"),this._clickMode="M",this.options={bark:!0,bigCards:!0,highHealth:!1,cheater:!1,wasDrafting:!1,scale:"100"}}randInt(t,e){return Math.floor(Math.random()*(e-t))+t}isUn(t){return typeof t>"u"}async sleep(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}async getSprite(t){return this.spriteCache[t]||(this.spriteCache[t]=this.imageLoader(t)),this.spriteCache[t]}async bulkLoadSprite(t){await Promise.all(t.map(e=>this.getSprite(`${this.imgRoot}${e}`)))}dogBark(){this.dogAudio.volume=.3,this.dogAudio.play()}enTil(...t){return t.join("~")}deTil(t){return t.split("~")}imageLoader(t){return new Promise(e=>{const i=new Image;i.onload=()=>{e(i)},i.src=t})}writeStorage(t,e){localStorage.setItem(t,e)}readStorage(t){return localStorage.getItem(t)}readStringStorage(t,e){const i=this.readStorage(t);return i===null?e:i}readBoolStorage(t,e){const i=this.readStorage(t);return i===null?e:i==="Y"}writeBoolStorage(t,e){this.writeStorage(t,e?"Y":"N")}restoreOptions(){const t=this.options;t.bark=this.readBoolStorage("bark",!0),t.bigCards=this.readBoolStorage("bigCards",!0),t.cheater=this.readBoolStorage("cheater",!1),t.highHealth=this.readBoolStorage("highHealth",!1),t.scale=this.readStringStorage("scale","100")}toggleOption(t){Game.options[t]=!Game.options[t],this.writeBoolStorage(t,Game.options[t])}setClickMode(t){this._clickMode=t}get clickMode(){return this._clickMode}}const T=new xs;window.onload=async()=>{await document.fonts.ready;let n=[];document.fonts.forEach(U=>{U.load(),n.push(U.loaded)}),await Promise.all(n),["game-ui","field","player","hand","effects","decklist","card"].forEach(U=>{tt.register(U)});const e=tt.get("effects");e.context.lineWidth=2,T.pxRatio=window.devicePixelRatio;let i;(U=>{U.Neutral="N",U.Cancel="C",U.Down="D"})(i||(i={}));let s=!0,h=800,d="N",g;try{document.createEvent("TouchEvent"),T.setClickMode("T"),s=!1}catch{}const y=()=>{g&&(clearTimeout(g),g=void 0)},v=(U,j,xt)=>{const ft=J.hitTest(U,j,xt);ft&&C.handleAction(ft)},F=U=>{v(U.pageX,U.pageY,U.button)},L=U=>{U.touches.length>1?(d="C",y()):d==="N"&&(d="D",g=setTimeout(()=>{d="C";const j=U.touches[0];v(j.pageX,j.pageY,it.ForceRight),g=void 0},h))},z=U=>{if(d==="D"){if(y(),d="N",U.changedTouches.length>0){const j=U.changedTouches[0];v(j.pageX,j.pageY,it.Left)}}else U.touches.length===0&&(d="N")},rt=document.getElementById("solforge");s?(rt.addEventListener("click",F),rt.addEventListener("contextmenu",U=>(U.preventDefault(),F(U),!1))):(rt.addEventListener("touchstart",L),rt.addEventListener("touchend",z)),window.sfapi={details:U=>{Zt.init(U)},setLog:U=>{ot.setLog(U)},peekAll:()=>{ot.peekAllCards()},peekDeck:()=>{ot.peekDecks()},dumb:()=>{console.log("Am I dumb? "+!ot.smart)}},T.restoreOptions(),T.options.scale!=="100"&&dt.changeScale(T.options.scale),dt.drawAll()}})();

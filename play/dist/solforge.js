(function(){"use strict";const De=["A","N","T","U"];const de=["C","R","H","L"];const Mt=[{crd:"AAK",fct:"T",rty:"L",set:1,typ:"C"},{crd:"ABB",fct:"N",rty:"R",set:4,typ:"C"},{crd:"AGC",fct:"A",rty:"C",set:1,typ:"C"},{crd:"AGK",fct:"A",rty:"L",set:2.1,typ:"C"},{crd:"AGP",fct:"A",rty:"C",set:1.1,typ:"S"},{crd:"AGW",fct:"A",rty:"R",set:4,typ:"S"},{crd:"ASG",fct:"T",rty:"R",set:1,typ:"S"},{crd:"AFO",fct:"A",rty:"C",set:2.1,typ:"C"},{crd:"ATG",fct:"A",rty:"C",set:2,typ:"C"},{crd:"ART",fct:"U",rty:"H",set:2.1,typ:"C"},{crd:"ATP",fct:"U",rty:"H",set:3,typ:"C"},{crd:"AGM",fct:"T",rty:"L",set:2.2,typ:"C"},{crd:"ALG",fct:"A",rty:"R",set:1,typ:"C"},{crd:"AHL",fct:"A",rty:"H",set:1,typ:"C"},{crd:"ALS",fct:"A",rty:"H",set:2,typ:"C"},{crd:"ATZ",fct:"A",rty:"C",set:4,typ:"S"},{crd:"ARB",fct:"A",rty:"H",set:4,typ:"C"},{crd:"AEN",fct:"A",rty:"C",set:2,typ:"C"},{crd:"APM",fct:"A",rty:"H",set:2,typ:"C"},{crd:"AQE",fct:"T",rty:"C",set:1,typ:"S"},{crd:"AGD",fct:"U",rty:"L",set:1,typ:"C"},{crd:"AFS",fct:"A",rty:"L",set:1,typ:"C"},{crd:"ABR",fct:"T",rty:"C",set:2,typ:"C"},{crd:"AFR",fct:"T",rty:"H",set:3.1,typ:"C"},{crd:"AMY",fct:"T",rty:"C",set:1,typ:"C"},{crd:"ABL",fct:"T",rty:"R",set:1,typ:"S"},{crd:"ATT",fct:"T",rty:"L",set:4.1,typ:"C"},{crd:"AGU",fct:"T",rty:"R",set:2.1,typ:"C"},{crd:"AIV",fct:"T",rty:"H",set:1,typ:"C"},{crd:"BTH",fct:"U",rty:"R",set:3,typ:"C"},{crd:"BTI",fct:"A",rty:"C",set:4,typ:"C"},{crd:"BTN",fct:"A",rty:"H",set:1,typ:"C"},{crd:"BBB",fct:"U",rty:"H",set:4,typ:"C"},{crd:"BLH",fct:"T",rty:"L",set:2,typ:"C"},{crd:"BSP",fct:"N",rty:"C",set:2.2,typ:"C"},{crd:"BWK",fct:"N",rty:"R",set:1,typ:"C"},{crd:"BLW",fct:"N",rty:"R",set:3,typ:"C"},{crd:"BSR",fct:"N",rty:"R",set:1,typ:"C"},{crd:"BMY",fct:"T",rty:"H",set:2.1,typ:"C"},{crd:"BSW",fct:"T",rty:"C",set:3,typ:"C"},{crd:"BWW",fct:"T",rty:"H",set:4,typ:"C"},{crd:"BTM",fct:"U",rty:"H",set:1,typ:"S"},{crd:"BAW",fct:"U",rty:"R",set:2,typ:"C"},{crd:"BWG",fct:"U",rty:"C",set:1,typ:"C"},{crd:"BTR",fct:"U",rty:"H",set:3.1,typ:"C"},{crd:"BWD",fct:"U",rty:"C",set:2,typ:"C"},{crd:"BSG",fct:"A",rty:"L",set:1,typ:"C"},{crd:"BSS",fct:"A",rty:"L",set:1,typ:"C"},{crd:"BTS",fct:"U",rty:"C",set:1.1,typ:"C"},{crd:"BST",fct:"T",rty:"L",set:4,typ:"C"},{crd:"BWT",fct:"U",rty:"L",set:4.2,typ:"C"},{crd:"BWH",fct:"A",rty:"R",set:1,typ:"S"},{crd:"BRN",fct:"T",rty:"R",set:3,typ:"S"},{crd:"BZD",fct:"N",rty:"R",set:2,typ:"C"},{crd:"BFM",fct:"N",rty:"H",set:2.3,typ:"C"},{crd:"BSM",fct:"T",rty:"H",set:2,typ:"C"},{crd:"CDT",fct:"U",rty:"R",set:1,typ:"C"},{crd:"CMF",fct:"N",rty:"R",set:4,typ:"C"},{crd:"CTL",fct:"T",rty:"L",set:1,typ:"S"},{crd:"CCS",fct:"N",rty:"C",set:3,typ:"C"},{crd:"CHY",fct:"U",rty:"C",set:1,typ:"C"},{crd:"CHV",fct:"N",rty:"L",set:2,typ:"C"},{crd:"CRS",fct:"A",rty:"R",set:3,typ:"C"},{crd:"COD",fct:"T",rty:"R",set:4,typ:"S"},{crd:"CTI",fct:"N",rty:"C",set:1.1,typ:"C"},{crd:"CHA",fct:"U",rty:"R",set:2.1,typ:"C"},{crd:"CHH",fct:"U",rty:"C",set:2,typ:"C"},{crd:"CHR",fct:"U",rty:"L",set:1,typ:"C"},{crd:"CBB",fct:"T",rty:"C",set:3,typ:"C"},{crd:"CDC",fct:"T",rty:"C",set:2,typ:"C"},{crd:"CFB",fct:"T",rty:"H",set:1,typ:"C"},{crd:"CNM",fct:"T",rty:"C",set:2,typ:"C"},{crd:"CSW",fct:"T",rty:"L",set:2.3,typ:"C"},{crd:"CTG",fct:"A",rty:"C",set:3,typ:"C"},{crd:"CCT",fct:"T",rty:"R",set:2,typ:"C"},{crd:"CFG",fct:"T",rty:"C",set:2,typ:"S"},{crd:"CGL",fct:"N",rty:"H",set:3,typ:"C"},{crd:"CSU",fct:"N",rty:"R",set:1,typ:"S"},{crd:"CCR",fct:"N",rty:"C",set:1,typ:"C"},{crd:"CSB",fct:"N",rty:"C",set:2,typ:"C"},{crd:"CWK",fct:"T",rty:"C",set:3,typ:"C"},{crd:"CRC",fct:"A",rty:"R",set:2,typ:"C"},{crd:"CYC",fct:"N",rty:"H",set:2,typ:"C"},{crd:"CYS",fct:"N",rty:"C",set:4,typ:"C"},{crd:"CTW",fct:"N",rty:"C",set:1,typ:"S"},{crd:"CTV",fct:"U",rty:"H",set:1,typ:"S"},{crd:"CAG",fct:"A",rty:"R",set:1,typ:"S"},{crd:"CBS",fct:"A",rty:"C",set:2.1,typ:"S"},{crd:"CIN",fct:"A",rty:"R",set:1.1,typ:"C"},{crd:"CSH",fct:"A",rty:"C",set:3,typ:"C"},{crd:"CSG",fct:"A",rty:"C",set:2,typ:"S"},{crd:"DFR",fct:"N",rty:"H",set:2,typ:"C"},{crd:"DHW",fct:"N",rty:"R",set:1,typ:"C"},{crd:"DSS",fct:"N",rty:"R",set:1,typ:"C"},{crd:"DCR",fct:"N",rty:"R",set:2,typ:"S"},{crd:"DSK",fct:"N",rty:"C",set:1,typ:"C"},{crd:"DBA",fct:"U",rty:"H",set:1,typ:"C"},{crd:"DBP",fct:"U",rty:"C",set:1,typ:"C"},{crd:"DMR",fct:"U",rty:"C",set:2,typ:"C"},{crd:"DBR",fct:"U",rty:"C",set:1,typ:"C"},{crd:"DCS",fct:"A",rty:"L",set:2,typ:"C"},{crd:"DGZ",fct:"A",rty:"R",set:2,typ:"S"},{crd:"DBN",fct:"N",rty:"C",set:4,typ:"C"},{crd:"DDS",fct:"A",rty:"H",set:4.2,typ:"S"},{crd:"DIS",fct:"T",rty:"R",set:1,typ:"S"},{crd:"DSV",fct:"U",rty:"R",set:2,typ:"S"},{crd:"DDD",fct:"N",rty:"L",set:1,typ:"C"},{crd:"DZD",fct:"U",rty:"L",set:3,typ:"C"},{crd:"DBT",fct:"N",rty:"H",set:1,typ:"S"},{crd:"DFB",fct:"N",rty:"R",set:1,typ:"C"},{crd:"DMW",fct:"A",rty:"L",set:1.1,typ:"C"},{crd:"DCH",fct:"U",rty:"C",set:1,typ:"S"},{crd:"DTD",fct:"N",rty:"L",set:4.2,typ:"C"},{crd:"DSZ",fct:"N",rty:"C",set:2,typ:"C"},{crd:"DYB",fct:"U",rty:"R",set:2,typ:"S"},{crd:"DBQ",fct:"N",rty:"H",set:3,typ:"C"},{crd:"DYS",fct:"N",rty:"R",set:3,typ:"S"},{crd:"DYL",fct:"U",rty:"L",set:3,typ:"C"},{crd:"EBW",fct:"N",rty:"C",set:3,typ:"C"},{crd:"ESK",fct:"N",rty:"H",set:2,typ:"C"},{crd:"EHW",fct:"U",rty:"L",set:1,typ:"C"},{crd:"ETN",fct:"A",rty:"C",set:1,typ:"S"},{crd:"EWE",fct:"T",rty:"H",set:2,typ:"C"},{crd:"ENP",fct:"A",rty:"H",set:1,typ:"S"},{crd:"ESU",fct:"A",rty:"R",set:1,typ:"S"},{crd:"ENR",fct:"U",rty:"C",set:1,typ:"S"},{crd:"EPD",fct:"N",rty:"H",set:1,typ:"S"},{crd:"EPH",fct:"A",rty:"L",set:4.2,typ:"C"},{crd:"ESG",fct:"A",rty:"H",set:4.1,typ:"C"},{crd:"ESC",fct:"A",rty:"H",set:2,typ:"C"},{crd:"ESP",fct:"U",rty:"H",set:2.3,typ:"C"},{crd:"EWT",fct:"U",rty:"R",set:2,typ:"C"},{crd:"EHN",fct:"U",rty:"C",set:1,typ:"C"},{crd:"EFM",fct:"T",rty:"L",set:2.1,typ:"C"},{crd:"EFP",fct:"T",rty:"L",set:1,typ:"C"},{crd:"EXD",fct:"N",rty:"H",set:1,typ:"S"},{crd:"FWB",fct:"U",rty:"C",set:2.3,typ:"C"},{crd:"FWR",fct:"U",rty:"C",set:1,typ:"C"},{crd:"FFG",fct:"U",rty:"C",set:4,typ:"C"},{crd:"FST",fct:"N",rty:"R",set:4,typ:"C"},{crd:"FWK",fct:"N",rty:"C",set:1,typ:"C"},{crd:"FIN",fct:"U",rty:"C",set:1,typ:"S"},{crd:"FRR",fct:"U",rty:"H",set:1,typ:"S"},{crd:"FVA",fct:"T",rty:"H",set:1,typ:"S"},{crd:"FFU",fct:"T",rty:"H",set:1,typ:"C"},{crd:"FLH",fct:"T",rty:"C",set:4,typ:"C"},{crd:"FMS",fct:"T",rty:"C",set:2,typ:"C"},{crd:"FSM",fct:"T",rty:"H",set:1,typ:"S"},{crd:"FBC",fct:"T",rty:"L",set:1,typ:"C"},{crd:"FBI",fct:"T",rty:"H",set:2.2,typ:"C"},{crd:"FFS",fct:"T",rty:"R",set:2,typ:"C"},{crd:"FLN",fct:"T",rty:"R",set:2,typ:"S"},{crd:"FRI",fct:"T",rty:"C",set:3,typ:"C"},{crd:"FSS",fct:"T",rty:"R",set:1,typ:"C"},{crd:"FLS",fct:"T",rty:"C",set:1,typ:"C"},{crd:"FSH",fct:"T",rty:"R",set:1,typ:"C"},{crd:"FFD",fct:"N",rty:"H",set:1,typ:"C"},{crd:"FRV",fct:"N",rty:"H",set:3,typ:"C"},{crd:"FSP",fct:"A",rty:"L",set:1,typ:"C"},{crd:"FPR",fct:"T",rty:"C",set:2.1,typ:"C"},{crd:"FFL",fct:"A",rty:"C",set:1,typ:"S"},{crd:"FGA",fct:"A",rty:"C",set:1,typ:"C"},{crd:"FGB",fct:"A",rty:"R",set:1,typ:"C"},{crd:"FGD",fct:"A",rty:"H",set:3,typ:"C"},{crd:"FGG",fct:"A",rty:"H",set:1,typ:"C"},{crd:"FOL",fct:"A",rty:"H",set:3.1,typ:"C"},{crd:"FPM",fct:"A",rty:"R",set:3,typ:"C"},{crd:"FPS",fct:"A",rty:"C",set:1,typ:"C"},{crd:"FFM",fct:"T",rty:"H",set:3,typ:"C"},{crd:"FMD",fct:"T",rty:"L",set:3,typ:"C"},{crd:"FSK",fct:"T",rty:"C",set:2.3,typ:"S"},{crd:"FWT",fct:"U",rty:"H",set:1,typ:"C"},{crd:"FZS",fct:"T",rty:"R",set:1,typ:"S"},{crd:"GOS",fct:"A",rty:"L",set:4,typ:"S"},{crd:"GHS",fct:"U",rty:"C",set:2.2,typ:"C"},{crd:"GHB",fct:"U",rty:"R",set:1,typ:"C"},{crd:"GHR",fct:"U",rty:"H",set:4.2,typ:"C"},{crd:"GRN",fct:"N",rty:"C",set:2,typ:"S"},{crd:"GTH",fct:"N",rty:"C",set:1,typ:"S"},{crd:"GSC",fct:"U",rty:"C",set:1,typ:"C"},{crd:"GMP",fct:"A",rty:"L",set:1,typ:"C"},{crd:"GTT",fct:"T",rty:"L",set:2,typ:"C"},{crd:"GCL",fct:"T",rty:"C",set:1,typ:"C"},{crd:"GCR",fct:"T",rty:"C",set:2,typ:"S"},{crd:"GLF",fct:"N",rty:"C",set:2,typ:"C"},{crd:"GRW",fct:"N",rty:"C",set:1,typ:"C"},{crd:"GSW",fct:"N",rty:"C",set:2,typ:"C"},{crd:"GVS",fct:"U",rty:"C",set:2,typ:"C"},{crd:"GSS",fct:"U",rty:"C",set:1,typ:"C"},{crd:"GBG",fct:"N",rty:"C",set:1,typ:"C"},{crd:"GGE",fct:"N",rty:"C",set:2,typ:"C"},{crd:"GGH",fct:"N",rty:"C",set:1,typ:"C"},{crd:"GRP",fct:"N",rty:"R",set:1,typ:"S"},{crd:"GGD",fct:"N",rty:"L",set:1,typ:"C"},{crd:"GGR",fct:"N",rty:"L",set:3,typ:"C"},{crd:"GGP",fct:"N",rty:"H",set:1,typ:"C"},{crd:"GGS",fct:"N",rty:"C",set:1,typ:"C"},{crd:"GRM",fct:"N",rty:"R",set:2,typ:"S"},{crd:"GHT",fct:"U",rty:"C",set:1,typ:"C"},{crd:"GMR",fct:"U",rty:"C",set:1,typ:"C"},{crd:"HMF",fct:"T",rty:"H",set:3,typ:"C"},{crd:"HTR",fct:"U",rty:"L",set:1,typ:"C"},{crd:"HAR",fct:"A",rty:"C",set:1,typ:"C"},{crd:"HFA",fct:"N",rty:"H",set:1,typ:"C"},{crd:"HOD",fct:"T",rty:"R",set:3,typ:"C"},{crd:"HWM",fct:"A",rty:"L",set:1,typ:"C"},{crd:"HOX",fct:"N",rty:"R",set:4,typ:"S"},{crd:"HGS",fct:"N",rty:"R",set:1,typ:"S"},{crd:"HTP",fct:"U",rty:"C",set:1,typ:"C"},{crd:"IBF",fct:"T",rty:"R",set:1,typ:"S"},{crd:"ITO",fct:"T",rty:"R",set:2,typ:"S"},{crd:"IVS",fct:"N",rty:"C",set:4,typ:"S"},{crd:"IWC",fct:"A",rty:"C",set:1,typ:"C"},{crd:"IHA",fct:"A",rty:"L",set:2,typ:"C"},{crd:"IBR",fct:"A",rty:"C",set:3,typ:"C"},{crd:"IMD",fct:"A",rty:"L",set:3,typ:"C"},{crd:"IMA",fct:"A",rty:"L",set:2.3,typ:"C"},{crd:"IZK",fct:"T",rty:"L",set:3,typ:"C"},{crd:"JPK",fct:"A",rty:"C",set:1,typ:"S"},{crd:"KDC",fct:"T",rty:"C",set:3,typ:"C"},{crd:"KAW",fct:"T",rty:"L",set:1.1,typ:"C"},{crd:"KOD",fct:"N",rty:"L",set:1,typ:"C"},{crd:"KIW",fct:"A",rty:"L",set:3,typ:"C"},{crd:"KTS",fct:"U",rty:"H",set:4,typ:"C"},{crd:"KKK",fct:"T",rty:"L",set:2,typ:"C"},{crd:"LOD",fct:"U",rty:"L",set:4,typ:"S"},{crd:"LFA",fct:"T",rty:"H",set:4,typ:"C"},{crd:"LKP",fct:"U",rty:"L",set:1,typ:"C"},{crd:"LGT",fct:"N",rty:"R",set:2.3,typ:"C"},{crd:"LBD",fct:"U",rty:"H",set:1,typ:"C"},{crd:"LSS",fct:"U",rty:"R",set:1,typ:"C"},{crd:"LBL",fct:"U",rty:"R",set:1,typ:"C"},{crd:"LBR",fct:"T",rty:"C",set:1,typ:"S"},{crd:"LSK",fct:"T",rty:"C",set:1,typ:"S"},{crd:"LWY",fct:"T",rty:"C",set:1,typ:"C"},{crd:"LSP",fct:"A",rty:"C",set:1,typ:"C"},{crd:"LUC",fct:"T",rty:"L",set:4.2,typ:"C"},{crd:"LMV",fct:"N",rty:"L",set:1,typ:"C"},{crd:"LHY",fct:"U",rty:"C",set:2,typ:"C"},{crd:"LYR",fct:"U",rty:"C",set:4,typ:"S"},{crd:"LYS",fct:"U",rty:"R",set:3,typ:"S"},{crd:"MMH",fct:"T",rty:"C",set:1,typ:"C"},{crd:"MRF",fct:"N",rty:"C",set:1,typ:"C"},{crd:"MOE",fct:"T",rty:"H",set:1,typ:"C"},{crd:"MXW",fct:"A",rty:"C",set:1,typ:"C"},{crd:"MSP",fct:"U",rty:"R",set:2,typ:"S"},{crd:"MMA",fct:"A",rty:"C",set:1,typ:"C"},{crd:"MMX",fct:"A",rty:"C",set:2,typ:"C"},{crd:"MMI",fct:"A",rty:"C",set:4,typ:"C"},{crd:"MMO",fct:"A",rty:"C",set:2,typ:"C"},{crd:"MMV",fct:"A",rty:"C",set:2.2,typ:"C"},{crd:"MPH",fct:"U",rty:"H",set:3,typ:"S"},{crd:"MSC",fct:"A",rty:"H",set:1,typ:"S"},{crd:"MTS",fct:"A",rty:"C",set:1.1,typ:"S"},{crd:"MTT",fct:"A",rty:"C",set:2,typ:"S"},{crd:"MML",fct:"U",rty:"H",set:2,typ:"C"},{crd:"MMW",fct:"U",rty:"L",set:2.2,typ:"C"},{crd:"MDE",fct:"N",rty:"C",set:4,typ:"C"},{crd:"MBP",fct:"U",rty:"H",set:1,typ:"C"},{crd:"MND",fct:"A",rty:"R",set:1,typ:"C"},{crd:"NNS",fct:"A",rty:"R",set:3,typ:"S"},{crd:"NGB",fct:"T",rty:"C",set:1,typ:"C"},{crd:"NGW",fct:"T",rty:"C",set:4,typ:"C"},{crd:"NSL",fct:"U",rty:"R",set:1,typ:"S"},{crd:"NCF",fct:"N",rty:"C",set:4,typ:"S"},{crd:"NCS",fct:"N",rty:"R",set:1,typ:"C"},{crd:"NCW",fct:"N",rty:"C",set:1,typ:"C"},{crd:"NCV",fct:"N",rty:"C",set:1,typ:"S"},{crd:"NEM",fct:"N",rty:"C",set:1,typ:"S"},{crd:"NSW",fct:"N",rty:"L",set:3,typ:"C"},{crd:"NSH",fct:"N",rty:"L",set:2.3,typ:"S"},{crd:"NXA",fct:"A",rty:"L",set:3.1,typ:"C"},{crd:"NXC",fct:"A",rty:"C",set:1,typ:"C"},{crd:"NXG",fct:"A",rty:"H",set:3,typ:"C"},{crd:"NXP",fct:"A",rty:"C",set:1,typ:"C"},{crd:"NXT",fct:"A",rty:"H",set:2,typ:"C"},{crd:"NGT",fct:"N",rty:"R",set:2,typ:"C"},{crd:"NGQ",fct:"U",rty:"L",set:4.1,typ:"C"},{crd:"NCL",fct:"U",rty:"R",set:1.1,typ:"S"},{crd:"NFF",fct:"U",rty:"L",set:2,typ:"C"},{crd:"NAM",fct:"N",rty:"C",set:3,typ:"C"},{crd:"NOZ",fct:"N",rty:"R",set:2,typ:"C"},{crd:"NSY",fct:"N",rty:"C",set:2.1,typ:"C"},{crd:"ONN",fct:"N",rty:"H",set:1.1,typ:"S"},{crd:"OXA",fct:"A",rty:"H",set:2.3,typ:"C"},{crd:"OXM",fct:"A",rty:"R",set:2,typ:"C"},{crd:"OXP",fct:"N",rty:"H",set:2,typ:"C"},{crd:"OBB",fct:"T",rty:"R",set:3,typ:"S"},{crd:"OEX",fct:"A",rty:"H",set:3,typ:"S"},{crd:"OWH",fct:"T",rty:"H",set:3,typ:"C"},{crd:"OBD",fct:"A",rty:"H",set:1,typ:"C"},{crd:"OFM",fct:"A",rty:"R",set:2.1,typ:"C"},{crd:"OJC",fct:"A",rty:"H",set:1.1,typ:"C"},{crd:"OPK",fct:"A",rty:"R",set:2,typ:"C"},{crd:"OSV",fct:"A",rty:"H",set:4,typ:"C"},{crd:"OWW",fct:"A",rty:"L",set:1,typ:"C"},{crd:"OHV",fct:"N",rty:"R",set:2,typ:"C"},{crd:"ODC",fct:"U",rty:"L",set:2,typ:"C"},{crd:"OSP",fct:"N",rty:"R",set:2,typ:"C"},{crd:"OSL",fct:"U",rty:"C",set:3,typ:"C"},{crd:"OWF",fct:"A",rty:"H",set:2,typ:"S"},{crd:"OXS",fct:"U",rty:"R",set:1,typ:"C"},{crd:"PHM",fct:"A",rty:"R",set:2,typ:"C"},{crd:"PPM",fct:"A",rty:"R",set:1,typ:"C"},{crd:"PSM",fct:"A",rty:"L",set:2.2,typ:"C"},{crd:"PLW",fct:"A",rty:"R",set:4,typ:"S"},{crd:"PRG",fct:"N",rty:"C",set:4,typ:"C"},{crd:"PRI",fct:"A",rty:"R",set:3,typ:"S"},{crd:"PHS",fct:"A",rty:"R",set:2.2,typ:"C"},{crd:"PTB",fct:"U",rty:"H",set:1,typ:"S"},{crd:"PSC",fct:"U",rty:"R",set:2,typ:"C"},{crd:"PSH",fct:"N",rty:"H",set:4,typ:"C"},{crd:"PTR",fct:"A",rty:"R",set:2,typ:"S"},{crd:"PSG",fct:"U",rty:"R",set:1,typ:"S"},{crd:"PMS",fct:"T",rty:"C",set:1,typ:"S"},{crd:"POX",fct:"N",rty:"H",set:4.2,typ:"C"},{crd:"PYG",fct:"T",rty:"H",set:1,typ:"C"},{crd:"PYS",fct:"T",rty:"C",set:1.1,typ:"S"},{crd:"RBH",fct:"T",rty:"L",set:1,typ:"C"},{crd:"ROK",fct:"T",rty:"L",set:3.1,typ:"S"},{crd:"RHY",fct:"U",rty:"C",set:3,typ:"C"},{crd:"RTS",fct:"T",rty:"C",set:2.2,typ:"C"},{crd:"RLW",fct:"U",rty:"H",set:1,typ:"C"},{crd:"RHU",fct:"A",rty:"L",set:4.1,typ:"C"},{crd:"RFL",fct:"T",rty:"R",set:1,typ:"C"},{crd:"RHC",fct:"T",rty:"C",set:1,typ:"C"},{crd:"ROG",fct:"N",rty:"H",set:1,typ:"S"},{crd:"RWC",fct:"U",rty:"C",set:4,typ:"C"},{crd:"RFA",fct:"U",rty:"H",set:1,typ:"C"},{crd:"RSE",fct:"T",rty:"H",set:4.1,typ:"C"},{crd:"RBG",fct:"U",rty:"H",set:2,typ:"C"},{crd:"RGG",fct:"U",rty:"H",set:1,typ:"C"},{crd:"RSZ",fct:"N",rty:"R",set:1.1,typ:"C"},{crd:"RSP",fct:"T",rty:"R",set:3,typ:"C"},{crd:"RHW",fct:"N",rty:"C",set:3,typ:"C"},{crd:"SBF",fct:"T",rty:"H",set:4,typ:"C"},{crd:"SAP",fct:"A",rty:"C",set:2,typ:"S"},{crd:"SVO",fct:"U",rty:"C",set:2.1,typ:"S"},{crd:"SSE",fct:"U",rty:"L",set:2.1,typ:"C"},{crd:"STS",fct:"U",rty:"C",set:3,typ:"S"},{crd:"SCS",fct:"N",rty:"C",set:1,typ:"C"},{crd:"SMD",fct:"T",rty:"L",set:1,typ:"C"},{crd:"SFS",fct:"N",rty:"L",set:1,typ:"C"},{crd:"SCD",fct:"A",rty:"H",set:1,typ:"C"},{crd:"SFT",fct:"A",rty:"H",set:1,typ:"C"},{crd:"SOC",fct:"N",rty:"L",set:4,typ:"S"},{crd:"SOA",fct:"A",rty:"C",set:3,typ:"S"},{crd:"SOD",fct:"U",rty:"C",set:3,typ:"S"},{crd:"SOK",fct:"T",rty:"C",set:3,typ:"S"},{crd:"SOT",fct:"N",rty:"C",set:3,typ:"S"},{crd:"SAD",fct:"T",rty:"H",set:1,typ:"C"},{crd:"SHG",fct:"N",rty:"L",set:2,typ:"S"},{crd:"SBI",fct:"U",rty:"C",set:3,typ:"C"},{crd:"SCC",fct:"U",rty:"C",set:4,typ:"C"},{crd:"SPD",fct:"U",rty:"R",set:1,typ:"C"},{crd:"SPM",fct:"U",rty:"L",set:1,typ:"C"},{crd:"STD",fct:"A",rty:"H",set:2.2,typ:"C"},{crd:"SHS",fct:"U",rty:"R",set:2.2,typ:"C"},{crd:"SGF",fct:"N",rty:"H",set:2.2,typ:"C"},{crd:"SKG",fct:"A",rty:"C",set:2,typ:"C"},{crd:"SSR",fct:"U",rty:"L",set:2,typ:"C"},{crd:"SNB",fct:"A",rty:"C",set:2.3,typ:"S"},{crd:"SNP",fct:"A",rty:"H",set:1,typ:"S"},{crd:"SRD",fct:"U",rty:"C",set:1,typ:"S"},{crd:"SSH",fct:"U",rty:"H",set:4,typ:"C"},{crd:"SRM",fct:"N",rty:"H",set:4,typ:"C"},{crd:"SRH",fct:"N",rty:"C",set:2.3,typ:"C"},{crd:"SDN",fct:"N",rty:"L",set:1,typ:"C"},{crd:"SHV",fct:"N",rty:"H",set:1,typ:"S"},{crd:"SRP",fct:"N",rty:"L",set:4,typ:"S"},{crd:"SGG",fct:"N",rty:"H",set:4,typ:"C"},{crd:"SBA",fct:"A",rty:"C",set:1,typ:"C"},{crd:"SKB",fct:"A",rty:"C",set:1,typ:"C"},{crd:"SBR",fct:"T",rty:"C",set:2,typ:"C"},{crd:"SKS",fct:"T",rty:"C",set:4,typ:"C"},{crd:"STM",fct:"T",rty:"R",set:4,typ:"C"},{crd:"SBD",fct:"U",rty:"C",set:2.1,typ:"C"},{crd:"SCV",fct:"N",rty:"R",set:3,typ:"S"},{crd:"SFM",fct:"T",rty:"H",set:1,typ:"C"},{crd:"SSN",fct:"A",rty:"C",set:2.2,typ:"C"},{crd:"SSM",fct:"T",rty:"C",set:2.2,typ:"C"},{crd:"SLH",fct:"N",rty:"C",set:2,typ:"S"},{crd:"SRV",fct:"N",rty:"R",set:2.2,typ:"C"},{crd:"SSI",fct:"A",rty:"R",set:4,typ:"C"},{crd:"SND",fct:"U",rty:"R",set:4,typ:"C"},{crd:"STR",fct:"N",rty:"R",set:2,typ:"S"},{crd:"SPH",fct:"N",rty:"H",set:4.1,typ:"C"},{crd:"SSA",fct:"N",rty:"H",set:2.1,typ:"C"},{crd:"STO",fct:"U",rty:"R",set:2,typ:"S"},{crd:"SDR",fct:"U",rty:"R",set:1,typ:"C"},{crd:"SOL",fct:"U",rty:"C",set:4,typ:"C"},{crd:"SOV",fct:"T",rty:"L",set:4,typ:"S"},{crd:"SHK",fct:"T",rty:"H",set:1,typ:"S"},{crd:"SWR",fct:"A",rty:"R",set:1,typ:"C"},{crd:"SER",fct:"A",rty:"C",set:4,typ:"C"},{crd:"SFA",fct:"A",rty:"H",set:1,typ:"C"},{crd:"STG",fct:"A",rty:"L",set:2,typ:"C"},{crd:"SSS",fct:"A",rty:"R",set:1,typ:"C"},{crd:"SSK",fct:"A",rty:"C",set:3,typ:"C"},{crd:"SWG",fct:"A",rty:"C",set:4,typ:"C"},{crd:"SWM",fct:"A",rty:"R",set:2,typ:"C"},{crd:"STN",fct:"T",rty:"R",set:2,typ:"S"},{crd:"SGI",fct:"T",rty:"C",set:1,typ:"C"},{crd:"SBG",fct:"T",rty:"L",set:1,typ:"C"},{crd:"SCL",fct:"T",rty:"C",set:1,typ:"C"},{crd:"SGA",fct:"T",rty:"H",set:1,typ:"C"},{crd:"STP",fct:"T",rty:"C",set:4,typ:"S"},{crd:"SSG",fct:"U",rty:"C",set:2,typ:"C"},{crd:"SVH",fct:"U",rty:"C",set:2.3,typ:"C"},{crd:"SIN",fct:"U",rty:"C",set:1.1,typ:"S"},{crd:"SYL",fct:"U",rty:"H",set:2.2,typ:"C"},{crd:"SEV",fct:"N",rty:"L",set:3.1,typ:"C"},{crd:"SML",fct:"U",rty:"C",set:1,typ:"C"},{crd:"SYO",fct:"A",rty:"L",set:1,typ:"C"},{crd:"TST",fct:"T",rty:"C",set:2,typ:"S"},{crd:"TBA",fct:"U",rty:"L",set:1,typ:"C"},{crd:"TGL",fct:"U",rty:"R",set:3,typ:"S"},{crd:"TGS",fct:"U",rty:"C",set:2,typ:"C"},{crd:"TPT",fct:"N",rty:"C",set:2.1,typ:"S"},{crd:"TDW",fct:"N",rty:"R",set:1.1,typ:"C"},{crd:"TNL",fct:"N",rty:"L",set:4.1,typ:"C"},{crd:"TEX",fct:"A",rty:"C",set:4,typ:"C"},{crd:"TGN",fct:"A",rty:"C",set:2,typ:"C"},{crd:"TSM",fct:"A",rty:"C",set:1,typ:"C"},{crd:"TUP",fct:"A",rty:"R",set:1,typ:"S"},{crd:"TAB",fct:"T",rty:"C",set:4,typ:"C"},{crd:"TGI",fct:"T",rty:"R",set:2,typ:"C"},{crd:"TDS",fct:"U",rty:"L",set:1.1,typ:"C"},{crd:"TSP",fct:"T",rty:"H",set:4.2,typ:"S"},{crd:"TPG",fct:"N",rty:"H",set:3.1,typ:"C"},{crd:"TMG",fct:"U",rty:"R",set:3,typ:"C"},{crd:"TBB",fct:"T",rty:"R",set:4,typ:"C"},{crd:"TOB",fct:"N",rty:"R",set:1,typ:"S"},{crd:"TWS",fct:"A",rty:"C",set:2,typ:"C"},{crd:"TVG",fct:"A",rty:"R",set:1.1,typ:"C"},{crd:"TXS",fct:"U",rty:"C",set:1,typ:"S"},{crd:"TCG",fct:"T",rty:"C",set:2.1,typ:"S"},{crd:"TWT",fct:"A",rty:"C",set:3,typ:"C"},{crd:"TRN",fct:"T",rty:"H",set:2,typ:"S"},{crd:"TGK",fct:"U",rty:"R",set:4,typ:"C"},{crd:"TSL",fct:"U",rty:"H",set:3,typ:"C"},{crd:"TWG",fct:"U",rty:"C",set:2,typ:"S"},{crd:"UGM",fct:"U",rty:"C",set:2.2,typ:"C"},{crd:"UGL",fct:"T",rty:"R",set:2,typ:"C"},{crd:"UIC",fct:"T",rty:"H",set:2.3,typ:"C"},{crd:"ULR",fct:"U",rty:"H",set:2,typ:"C"},{crd:"URD",fct:"N",rty:"H",set:1,typ:"C"},{crd:"UBL",fct:"T",rty:"R",set:1,typ:"S"},{crd:"UCM",fct:"T",rty:"R",set:1,typ:"C"},{crd:"UEM",fct:"T",rty:"C",set:4,typ:"C"},{crd:"UHS",fct:"T",rty:"H",set:2,typ:"C"},{crd:"UIM",fct:"T",rty:"C",set:2,typ:"C"},{crd:"UWL",fct:"T",rty:"H",set:2,typ:"C"},{crd:"UWS",fct:"T",rty:"R",set:2.3,typ:"C"},{crd:"UIW",fct:"A",rty:"L",set:4,typ:"C"},{crd:"UTM",fct:"U",rty:"C",set:2,typ:"C"},{crd:"UTR",fct:"U",rty:"H",set:2,typ:"C"},{crd:"URB",fct:"U",rty:"L",set:2.3,typ:"C"},{crd:"UPM",fct:"U",rty:"L",set:1,typ:"C"},{crd:"VRP",fct:"N",rty:"L",set:2,typ:"S"},{crd:"VBK",fct:"A",rty:"R",set:2,typ:"C"},{crd:"VTC",fct:"A",rty:"C",set:1,typ:"C"},{crd:"VTW",fct:"A",rty:"R",set:4,typ:"C"},{crd:"VGN",fct:"N",rty:"C",set:1,typ:"C"},{crd:"VND",fct:"U",rty:"R",set:4,typ:"C"},{crd:"VNF",fct:"U",rty:"R",set:1.1,typ:"C"},{crd:"VNS",fct:"U",rty:"H",set:2,typ:"C"},{crd:"VSK",fct:"U",rty:"C",set:4,typ:"S"},{crd:"VCH",fct:"U",rty:"H",set:4.1,typ:"S"},{crd:"VGR",fct:"U",rty:"C",set:2,typ:"S"},{crd:"VOB",fct:"T",rty:"R",set:4,typ:"S"},{crd:"VCG",fct:"T",rty:"C",set:1,typ:"C"},{crd:"VES",fct:"N",rty:"L",set:2.1,typ:"C"},{crd:"VYE",fct:"N",rty:"C",set:2,typ:"S"},{crd:"WBY",fct:"T",rty:"R",set:2,typ:"C"},{crd:"WBU",fct:"T",rty:"C",set:1.1,typ:"C"},{crd:"WMR",fct:"A",rty:"H",set:2.1,typ:"C"},{crd:"WTK",fct:"A",rty:"H",set:4,typ:"C"},{crd:"WMM",fct:"A",rty:"H",set:1,typ:"C"},{crd:"WTW",fct:"T",rty:"C",set:1,typ:"C"},{crd:"WTA",fct:"U",rty:"L",set:4,typ:"C"},{crd:"WWP",fct:"U",rty:"H",set:1.1,typ:"C"},{crd:"WWR",fct:"U",rty:"C",set:3,typ:"C"},{crd:"WOD",fct:"U",rty:"R",set:4,typ:"S"},{crd:"WFM",fct:"T",rty:"H",set:1.1,typ:"C"},{crd:"WWS",fct:"U",rty:"R",set:1,typ:"C"},{crd:"WBH",fct:"T",rty:"R",set:1.1,typ:"C"},{crd:"WCS",fct:"T",rty:"C",set:1,typ:"C"},{crd:"WPD",fct:"T",rty:"C",set:1,typ:"C"},{crd:"WFB",fct:"N",rty:"C",set:1.1,typ:"C"},{crd:"WFS",fct:"N",rty:"H",set:1,typ:"C"},{crd:"WBG",fct:"N",rty:"L",set:1.1,typ:"C"},{crd:"XCR",fct:"N",rty:"C",set:2,typ:"C"},{crd:"XDH",fct:"N",rty:"R",set:3,typ:"C"},{crd:"XHS",fct:"N",rty:"C",set:2.2,typ:"C"},{crd:"XHU",fct:"N",rty:"C",set:1,typ:"C"},{crd:"XRF",fct:"N",rty:"C",set:2,typ:"C"},{crd:"XSH",fct:"N",rty:"L",set:1,typ:"C"},{crd:"XDV",fct:"N",rty:"H",set:1,typ:"C"},{crd:"XRW",fct:"N",rty:"H",set:2,typ:"S"},{crd:"YWC",fct:"T",rty:"C",set:2,typ:"C"},{crd:"YNS",fct:"N",rty:"L",set:2.2,typ:"C"},{crd:"ZPM",fct:"T",rty:"R",set:1.1,typ:"C"},{crd:"ZTU",fct:"N",rty:"L",set:1,typ:"C"},{crd:"ZIN",fct:"N",rty:"C",set:1,typ:"C"},{crd:"ZMT",fct:"N",rty:"C",set:3,typ:"C"},{crd:"ZSH",fct:"T",rty:"L",set:1,typ:"C"}],Qe=[["ASQ",["SLG","SLG"]],["CGL",["CGF"]],["DHC",["DYF"]],["DTD",["TOT"]],["FGD",["FGA","FGB","FGG"]],["IBA",["AVB"]],["IZK",["IFL","IFR"]],["RHU",["RSC"]],["SLS",["MMY"]],["TSL",["FUN"]],["WHR",["WHC"]]];class _e{raw={["C"]:{["A"]:0,["N"]:0,["T"]:0,["U"]:0},["S"]:{["A"]:0,["N"]:0,["T"]:0,["U"]:0}};addStat(t,i){this.raw[t][i]++}g(t,i){return this.raw[t][i]}typeSum(t){return De.map(i=>this.g(t,i)).reduce((i,e)=>i+e,0)}getTotal(){const t=this.typeSum("C"),i=this.typeSum("S");return[t,i,t+i]}getFactTotal(t){const i=this.g("C",t),e=this.g("S",t);return[i,e,i+e]}}const l=(n,t)=>({card:n,num:t}),fi={name:"Official 1 - 3",id:"SBE1",decks:[{name:"Alloyin Starter",factions:["A"],cards:[l("SYO",1),l("BSS",1),l("SFT",2),l("SNP",2),l("TSM",2),l("SSS",2),l("ALG",2),l("MXW",3),l("TUP",3),l("FPS",3),l("MND",3),l("IWC",3),l("SKB",3)]},{name:"Nekrium Starter",factions:["N"],cards:[l("SFS",1),l("GGD",1),l("FFD",3),l("EPD",2),l("CCR",2),l("HGS",2),l("DSS",2),l("BWK",2),l("GBG",3),l("DSK",3),l("GRP",3),l("VGN",3),l("XHU",3)]},{name:"Tempys Starter",factions:["T"],cards:[l("FBC",1),l("RBH",1),l("CFB",3),l("FSM",2),l("FSH",2),l("FSS",2),l("PMS",2),l("RFL",2),l("UBL",3),l("WPD",3),l("SGI",3),l("AMY",3),l("WCS",3)]},{name:"Uterra Starter",factions:["U"],cards:[l("UPM",1),l("EHW",1),l("FRR",3),l("SPD",2),l("HTP",2),l("LSS",2),l("SDR",2),l("SRD",2),l("FWR",3),l("DBP",3),l("GHT",3),l("GSS",3),l("TXS",3)]},{name:"Cruel Corrosion",factions:["A","N"],cards:[l("IHA",1),l("WBG",1),l("OXP",1),l("DFR",1),l("APM",1),l("SNP",1),l("GRM",2),l("ETN",2),l("DHW",2),l("OXM",2),l("AEN",2),l("ATG",2),l("CTI",2),l("CTW",2),l("FPS",2),l("GRW",2),l("MTT",2),l("SAP",2)]},{name:"Death March",factions:["N","T"],cards:[l("ZTU",1),l("VRP",1),l("GGP",1),l("EPD",1),l("DBT",1),l("BSM",1),l("TDW",2),l("NGT",2),l("UBL",2),l("FWK",2),l("BZD",2),l("CSB",2),l("SLH",2),l("MMH",2),l("LSK",2),l("GBG",2),l("CFG",2),l("DSK",2)]},{name:"Dinosaurs!",factions:["T","U"],cards:[l("TDS",1),l("SSR",1),l("FRR",1),l("ULR",1),l("UTR",1),l("BTM",1),l("UGL",2),l("EHN",2),l("SPD",2),l("GHB",2),l("FLN",2),l("SML",2),l("RFL",2),l("OXS",2),l("UTM",2),l("TWG",2),l("ENR",2),l("DBP",2)]},{name:"Wyvern's Wrath",factions:["T","U"],cards:[l("CSW",1),l("SMD",1),l("FRR",1),l("UIC",1),l("CFB",1),l("UGL",2),l("FSH",2),l("FLN",2),l("WPD",1),l("TWG",2),l("TCG",2),l("TGS",2),l("SML",2),l("SVH",1),l("SCL",2),l("RTS",1),l("FWB",2),l("ENR",2),l("ABR",2)]},{name:"Ironmind Intuition",factions:["A","N"],cards:[l("IMA",1),l("GMP",1),l("OXA",1),l("EPD",1),l("OJC",1),l("ESU",2),l("OXM",2),l("MMA",2),l("SAP",1),l("AFO",2),l("GBG",2),l("CTW",2),l("SRH",1),l("TSM",2),l("SLH",1),l("MTT",1),l("DCR",1),l("DFB",1),l("BSR",1),l("LGT",1),l("XRF",2),l("MMX",1)]},{name:"Nethershriek Negation",factions:["N","T"],cards:[l("SBG",1),l("NSH",1),l("FFU",1),l("EWE",1),l("BFM",1),l("WBH",1),l("UWS",1),l("TGI",2),l("RFL",2),l("GRM",1),l("ASG",1),l("YWC",2),l("XRF",2),l("WPD",2),l("WCS",2),l("WBU",2),l("TCG",1),l("FSK",1),l("SLH",2),l("CFG",1),l("RTS",2)]},{name:"Ridgeback's Rage",factions:["A","U"],cards:[l("URB",1),l("AGK",1),l("ESP",1),l("FRR",1),l("NXT",1),l("ALG",1),l("FGB",1),l("PHS",2),l("TUP",1),l("EWT",2),l("PTR",1),l("VBK",1),l("AGC",1),l("AEN",2),l("ETN",1),l("FPS",2),l("MXW",2),l("GHT",1),l("TWG",2),l("SNB",1),l("SML",1),l("JPK",1),l("ENR",1),l("IWC",1)]},{name:"Spare Parts",factions:["N"],cards:[l("SEV",1),l("SHG",1),l("TPG",1),l("CGL",1),l("FRV",1),l("HFA",2),l("XDH",1),l("GRM",1),l("SCV",1),l("DFB",2),l("EBW",2),l("GBG",2),l("GLF",2),l("XHS",2),l("SOT",1),l("XRF",2),l("SCS",1),l("ZMT",1),l("SLH",1),l("VYE",1),l("XCR",2),l("XHU",1)]},{name:"Future Forged",factions:["A"],cards:[l("NXA",1),l("IMD",1),l("FOL",1),l("SFA",2),l("SFT",1),l("SCD",1),l("CAG",1),l("ESU",1),l("NNS",1),l("FPM",1),l("PRI",1),l("SSS",1),l("CTG",1),l("TSM",2),l("IWC",1),l("MMA",2),l("TGN",2),l("MTT",1),l("SKG",1),l("AFO",1),l("MMV",1),l("TWS",1),l("SBA",2),l("SSK",1),l("JPK",1)]},{name:"Burning Rage",factions:["T"],cards:[l("ROK",1),l("KKK",1),l("MOE",1),l("AFR",1),l("FBI",1),l("FSS",2),l("FLN",2),l("CCT",2),l("BRN",2),l("WPD",2),l("SSM",2),l("SOK",1),l("RTS",2),l("FSK",2),l("CWK",2),l("CFG",2),l("BSW",2),l("FMS",2)]},{name:"Awakened Fury",factions:["U"],cards:[l("DZD",1),l("SSE",1),l("BTR",1),l("TSL",1),l("MPH",1),l("CDT",1),l("DYB",1),l("BTH",2),l("TMG",2),l("BWD",2),l("RHY",2),l("SBD",2),l("GMR",2),l("STS",1),l("OSL",2),l("SBI",2),l("LYS",2),l("TGS",2),l("SOD",2)]}]},gi={name:"Official 4",id:"SBE2",decks:[{name:"Titan's Assault",factions:["N","T"],cards:[l("ATT",1),l("TNL",1),l("RSE",1),l("SPH",1),l("SCV",2),l("ABB",2),l("TBB",2),l("BRN",2),l("FLN",2),l("CMF",2),l("XDH",2),l("FST",2),l("TAB",2),l("MDE",2),l("FSK",2),l("FLH",2),l("CBB",2)]},{name:"Verdant Fortress",factions:["A","U"],cards:[l("NGQ",1),l("RHU",1),l("VCH",1),l("ESG",1),l("PLW",2),l("NNS",2),l("SND",2),l("WOD",2),l("IBR",2),l("BWD",2),l("SBI",2),l("RWC",2),l("TEX",2),l("SER",2),l("SWG",2),l("SCC",2),l("DYB",2)]},{name:"Umbruk Uprising",factions:["T","U"],cards:[l("LUC",1),l("BWT",1),l("GHR",1),l("TSP",1),l("WBH",1),l("COD",1),l("SDR",1),l("ZPM",1),l("OXS",1),l("WOD",1),l("RWC",2),l("SSG",2),l("VGR",2),l("CFG",2),l("UEM",2),l("FFG",2),l("UGL",2),l("DMR",2),l("RTS",2),l("CWK",2)]},{name:"Onyxium Twilight",factions:["A","N"],cards:[l("EPH",1),l("DTD",1),l("POX",1),l("DDS",1),l("OHV",1),l("PHS",1),l("DFB",1),l("TDW",1),l("CAG",1),l("ALG",1),l("TUP",2),l("CTW",2),l("XCR",2),l("SSK",2),l("SRH",2),l("ATG",2),l("MTT",2),l("SLH",2),l("GLF",2),l("AFO",2)]}]},mi={name:"Set 1 & 2 Tournies",id:"T1309",decks:[{name:"Axel: Lifegain",factions:["T","U"],cards:[l("AGD",3),l("EHW",3),l("FRR",3),l("FIN",1),l("UPM",1),l("LKP",2),l("BTM",2),l("LBL",3),l("GSS",3),l("RFA",3),l("GHB",3),l("EFP",3)]},{name:"Derk: Metaminds",factions:["A"],cards:[l("OJC",3),l("DMW",3),l("MMV",3),l("JPK",3),l("MMO",3),l("GMP",3),l("ALS",3),l("MMA",3),l("SFA",3),l("BTN",3)]},{name:"Foxhull: Grow Wide",factions:["U"],cards:[l("DBP",3),l("EHW",2),l("FRR",3),l("FWT",3),l("UPM",3),l("LKP",2),l("BTM",3),l("HTR",2),l("LBD",2),l("RFA",3),l("GHB",2),l("SDR",2)]},{name:"Hectares: Dino Attack",factions:["A","U"],cards:[l("ALS",3),l("TDS",3),l("FRR",3),l("WWP",3),l("SML",2),l("BSG",3),l("JPK",2),l("ODC",3),l("NXT",2),l("WMM",3),l("GHB",3)]},{name:"Klaven: Mono-N",factions:["N"],cards:[l("SCS",3),l("ROG",1),l("GGP",1),l("GGD",3),l("WFS",1),l("DSS",3),l("ZTU",1),l("GBG",3),l("HFA",3),l("EXD",1),l("EPD",1),l("BSR",1),l("MRF",2),l("HGS",3),l("GTH",3)]},{name:"Phoenyx: Free Spell Dmg",factions:["T","U"],cards:[l("SHK",3),l("MOE",3),l("FRR",3),l("LSK",3),l("FFU",3),l("UBL",3),l("WWS",3),l("FSS",3),l("ENR",3),l("MMH",3)]},{name:"Technogeek5000: Grow Wide",factions:["N","U"],cards:[l("DBP",2),l("EHW",2),l("FRR",3),l("HTP",2),l("UPM",3),l("LKP",2),l("GHT",3),l("GGP",2),l("LBD",1),l("EPD",2),l("DBT",2),l("SPD",3),l("SDR",3)]},{name:"Thematik: Level Up",factions:["A","T"],cards:[l("IWC",3),l("FSS",3),l("ETN",1),l("WPD",2),l("FSM",1),l("AHL",1),l("UBL",3),l("SMD",2),l("BTN",3),l("LSK",1),l("MMH",3),l("FFU",1),l("TSM",3),l("ALG",3)]},{name:"TinyGrimes: NT Shapers",factions:["N","T"],cards:[l("DSS",3),l("FSS",3),l("EPD",2),l("GTH",3),l("FSM",1),l("MOE",1),l("UBL",3),l("GGP",3),l("GBG",1),l("LSK",3),l("HGS",1),l("CTW",1),l("SHK",3),l("GGD",1),l("DBT",1)]}]},pi={name:"The Forge",id:"TG10",decks:[{name:"DarkSoulSP: Grim Debuff",factions:["N","U"],cards:[l("BWK",3),l("TDS",2),l("FRR",3),l("WWP",3),l("GGP",3),l("GGD",3),l("DBT",1),l("WFS",3),l("CTW",3),l("EPD",3),l("GHB",3)]},{name:"ErrorAsh: Burn",factions:["N","T"],cards:[l("UBL",2),l("EFM",2),l("FBI",3),l("ESK",3),l("FLN",3),l("EFP",3),l("MOE",3),l("FSS",3),l("SHK",3),l("EPD",3),l("CHV",2)]},{name:"ErrorAsh: Farmer Tarsus",factions:["N","U"],cards:[l("WWS",3),l("DYB",3),l("FRR",3),l("SYL",3),l("EPD",3),l("SSE",2),l("NSH",2),l("TDW",3),l("NFF",2),l("CHR",2),l("LKP",2),l("EXD",2)]},{name:"ErrorAsh: Necro Mobiltiy",factions:["N","T"],cards:[l("NSH",2),l("SMD",2),l("DDD",3),l("TDW",3),l("VRP",3),l("WCS",3),l("BSM",3),l("SHG",2),l("TGI",2),l("EPD",3),l("FVA",2),l("DBT",1),l("TRN",1)]},{name:"Hans: Yetis",factions:["T","U"],cards:[l("UWL",3),l("FFU",3),l("WBY",3),l("UIM",3),l("WBU",3),l("SSR",1),l("TRN",1),l("GTT",1),l("GCR",3),l("FRR",3),l("UBL",3),l("WWP",3)]},{name:"MingisTheKing: Mobility",factions:["N","T"],cards:[l("DDD",3),l("DBT",3),l("EPD",3),l("EFP",3),l("GGP",3),l("LSK",3),l("SHK",3),l("UBL",3),l("WCS",3),l("ZTU",3)]},{name:"Noetherian: Shambler",factions:["N","U"],cards:[l("XSH",3),l("SPM",3),l("FRR",3),l("ODC",3),l("SSE",3),l("ESK",3),l("TGS",3),l("XRF",3),l("VRP",3),l("URB",3)]},{name:"Noetherian: Tempo",factions:["T","U"],cards:[l("RBH",3),l("TDS",3),l("FRR",3),l("WWP",3),l("EFP",3),l("AMY",2),l("FVA",2),l("ENR",3),l("ZSH",3),l("EHW",3),l("GHB",2)]},{name:"Piquadore: Zombies",factions:["N","T"],cards:[l("BWK",2),l("KOD",2),l("CYC",3),l("GRM",3),l("VYE",3),l("XRW",3),l("MOE",2),l("ZTU",3),l("BSM",3),l("EPD",3),l("DSS",3)]},{name:"Stautmeister: Yeti Mobility",factions:["T","U"],cards:[l("AGM",3),l("TDS",2),l("FRR",3),l("WWP",3),l("CSW",3),l("FLN",3),l("EFP",2),l("UWL",3),l("WBY",2),l("WCS",2),l("EHW",2),l("SHS",2)]},{name:"Technonaut: Steelscale",factions:["A","T"],cards:[l("UHS",2),l("FLN",3),l("STG",3),l("CRC",3),l("SHK",3),l("EFP",2),l("WMR",2),l("WMM",3),l("JPK",3),l("SMD",3),l("FVA",3)]},{name:"Technonaut: Woebringer",factions:["N","T"],cards:[l("LSK",2),l("WBG",3),l("EPD",3),l("DDD",3),l("SHK",3),l("EFP",3),l("ZTU",2),l("GGD",2),l("GGP",3),l("CTW",3),l("DBT",3)]},{name:"Zrandles: Metaminds",factions:["A","N"],cards:[l("DMW",3),l("GMP",3),l("MMA",3),l("MMV",2),l("TDW",3),l("VRP",3),l("EPD",3),l("SHG",2),l("OJC",2),l("ESK",2),l("CHV",2),l("CTW",2)]},{name:"Zrandles: Tempo",factions:["N","T"],cards:[l("CTW",1),l("GCR",1),l("CFG",1),l("FZS",1),l("FBI",3),l("MOE",3),l("EFP",3),l("LSK",3),l("FLN",3),l("SHK",3),l("RTS",3),l("GGP",3),l("UBL",2)]}]},yi={name:"Set 1 Fundecks",id:"FUN1",decks:[{name:"Frankenbomb",factions:["N"],cards:[l("DFB",3),l("BSR",3),l("HGS",3),l("HFA",3),l("FFD",3),l("XSH",3),l("XHU",3),l("WBG",3),l("GBG",3),l("CTI",3)]},{name:"Hangry Beasts",factions:["T","U"],cards:[l("TBA",3),l("SVH",3),l("MBP",2),l("FSH",3),l("RBH",3),l("FBC",3),l("LBR",2),l("CFB",3),l("AAK",3),l("KKK",2),l("FRR",1),l("FIN",1),l("IBF",1)]},{name:"Metamind Zapper",factions:["A","T"],cards:[l("MMA",3),l("DMW",3),l("GMP",3),l("SYO",3),l("KAW",3),l("SHK",3),l("CTL",2),l("CAG",2),l("MSC",2),l("MTS",2),l("ASG",2),l("ESU",2)]},{name:"Plant Party",factions:["N","U"],cards:[l("CTV",3),l("TDW",3),l("BTS",3),l("CHR",3),l("GMR",3),l("KOD",2),l("LKP",2),l("SHV",2),l("DBA",2),l("CCR",2),l("PTB",2),l("FIN",1),l("DBT",2)]},{name:"Voltron",factions:["A"],cards:[l("FGA",3),l("FGB",3),l("FGD",3),l("FGG",3),l("AFS",3),l("BSS",3),l("PRI",3),l("TUP",2),l("JPK",2),l("BWH",2),l("SFT",3)]},{name:"Do Fear The Reaper",factions:["A","N"],cards:[l("CTI",3),l("DFR",3),l("GRW",3),l("LGT",3),l("OXM",3),l("OXP",3),l("PHM",3),l("CTW",2),l("NNS",2),l("OXA",2),l("SDN",3)]},{name:"Muadib",factions:["N","U"],cards:[l("DBA",3),l("DYL",3),l("GSW",3),l("LBD",3),l("MMW",3),l("NCW",3),l("SRV",3),l("LBL",2),l("MSP",2),l("VYE",2),l("SBD",3)]},{name:"Triassic Park",factions:["T","U"],cards:[l("URB",3),l("UTR",3),l("UTM",3),l("ULR",3),l("UIC",3),l("UGL",3),l("RTS",3),l("BRN",2),l("LBR",2),l("IBF",2),l("GHB",3)]},{name:"Whacky Whinds",factions:["N","T"],cards:[l("DDD",3),l("WBH",3),l("HMF",3),l("WCS",3),l("GGP",3),l("SAD",3),l("SDN",3),l("EWE",3),l("SBG",3),l("ZSH",3)]},{name:"WWP 4 Victory",factions:["A","U"],cards:[l("WWP",3),l("EHN",2),l("SDR",2),l("HTR",2),l("MML",2),l("HTP",2),l("SHS",3),l("MND",2),l("NXC",2),l("CDT",2),l("PTB",2),l("SVO",2),l("MPH",2),l("SYO",2)]},{name:"Braaiins",factions:["N"],cards:[l("XDV",3),l("XRW",3),l("ONN",2),l("SLH",2),l("FWK",2),l("BWK",2),l("URD",2),l("TPG",2),l("DSS",2),l("KOD",2),l("ZMT",2),l("RSZ",2),l("BLW",2),l("CSB",2)]},{name:"Wanderin",factions:["N","U"],cards:[l("LYS",3),l("STR",2),l("MBP",2),l("OSL",2),l("RLW",3),l("SSR",1),l("SVO",2),l("SSE",2),l("RHW",3),l("SYL",2),l("TGS",2),l("TMG",3),l("XDH",3)]},{name:"Walls",factions:["A","T"],cards:[l("CDC",3),l("CTG",3),l("CRC",3),l("DCS",3),l("FRI",3),l("FGA",2),l("OBB",3),l("FVA",2),l("TGN",2),l("OWH",3),l("STN",3)]},{name:"Snakes In A Lane",factions:["A","U"],cards:[l("AFO",3),l("DSV",3),l("PSC",3),l("SHS",3),l("STO",3),l("NCL",2),l("VNF",3),l("LYS",2),l("SVO",1),l("VNS",3),l("TXS",2),l("ART",2)]},{name:"Benny & Izzy",factions:["A","T"],cards:[l("BRN",3),l("EFM",2),l("IZK",3),l("JPK",1),l("MTT",1),l("NNS",1),l("OBB",2),l("OWF",2),l("OEX",3),l("PRI",2),l("PTR",1),l("TST",1),l("FLS",2),l("BLH",3),l("SHK",3)]}]},Ae=[fi,gi,mi,pi,yi];class bi{state;constructor(t){this.state=t}get adjacent(){return g.adjacentPositions(this.lane)}get attack(){return this.state.attack+this.modSum("AT")}get activationAvailable(){return this.state.negateActivate?!1:this.state.activationAvailable}set activationAvailable(t){this.state.activationAvailable=t}get aggressive(){return this.state.aggressive||this.modBool("AG")}set aggressive(t){this.state.aggressive=t}get armor(){return this.negateArmor?0:this.state.armor+this.modSum("AR")}get armorDmg(){return this.state.armorDmg}set armorDmg(t){this.state.armorDmg=t}get bonus(){return this.state.bonus}set bonus(t){this.state.bonus=t}get breakthrough(){return this.state.breakthrough||this.modBool("BT")}set breakthrough(t){this.state.breakthrough=t}get changed(){return this.state.changed||this.negateDefender||this.negateArmor||this.negateActivate||this.negateMobility||this.negateRegen||this.state.triggers.some(t=>t.changes)}set changed(t){this.state.changed=t}get code(){return this.state.code}get defender(){return this.negateDefender?!1:this.state.defender||this.modBool("DF")}set defender(t){this.negateDefender||(this.state.defender=t,this.enforceEffects("DF"))}get effects(){return this.state.effects}get extraBattles(){return this.state.extraBattles}set extraBattles(t){this.state.extraBattles=t}get faction(){return O.getCard(this.code).faction}get health(){return this.state.health+this.modSum("HL")}get id(){return this.state.id}get isActive(){return!this.sleeping||this.aggressive}isTribe(t){return O.getCard(this.code).isTribe(t)}get lane(){return this.state.lane}get level(){return O.getCard(this.code).level}get maxHealth(){return this.state.maxHealth+this.modSum("MH")}get mobility(){return this.negateMobility?0:this.state.mobility+this.modSum("MB")}get mobilityAvailable(){return this.state.mobilityAvailable}set mobilityAvailable(t){this.state.mobilityAvailable=t}get mods(){return this.state.mods}get negateActivate(){return this.state.negateActivate}set negateActivate(t){this.state.negateActivate=t}get negateArmor(){return this.state.negateArmor||this.modBool("NA")}set negateArmor(t){this.state.negateArmor=t,this.enforceEffects("AR")}get negateDefender(){return this.state.negateDefender||this.modBool("ND")}set negateDefender(t){this.state.negateDefender=t,this.enforceEffects("DF")}get negateMobility(){return this.state.negateMobility||this.modBool("NM")}set negateMobility(t){this.state.negateMobility=t}get negateRegen(){return this.state.negateRegen||this.modBool("NM")}set negateRegen(t){this.state.negateRegen=t}get opposed(){const t=c.crTarg();return t.player=k.toTarget(!this.owner),t.lanes=g.oppositeLane(this.lane),g.creatByTarget(t)[0]}get owner(){return this.state.owner}get poison(){return this.state.poison+this.modSum("PN")}get rank(){return k.toPlayer(this.owner).rank}get regen(){return this.negateRegen?0:this.state.regen+this.modSum("RG")}get sleeping(){return this.state.sleeping}set sleeping(t){this.state.sleeping=t}get status(){return this.state.status}set status(t){this.state.status=t}get triggers(){return this.state.triggers}buff(t,i,e=void 0){t!==0&&(this.state.attack+=t,this.enforceEffects("AT")),i!==0&&(this.state.health+=i,this.state.maxHealth+=i,this.enforceEffects("CH"),U.deathProdder(this,e))}addArmor(t){if(!this.negateArmor){const i=this.state.armor+t;this.state.armor=Math.max(0,i),this.enforceEffects("AR")}}addMobility(t){if(!this.negateMobility){const i=this.state.mobility+t;this.state.mobility=Math.max(0,i)}}addPoison(t){const i=this.state.poison+t;this.state.poison=Math.max(0,i)}addRegen(t){if(!this.negateRegen){const i=this.state.regen+t;this.state.regen=Math.max(0,i)}}heal(t){if(t===0)return 0;const i=Math.min(this.health+t,this.maxHealth)-this.health;return this.state.health+=i,i}setHealth(t){this.state.health=t}hurt(t,i=!1){if(t<1)return[0,0];const e=Math.max(Math.min(t,this.armor-this.armorDmg),0);let a=t-e,h=this.health-a;this.state.armorDmg+=e;let u=0;return i&&h<0&&(u=a-this.health,a=this.health),a>0&&(this.state.health-=a),[a,u]}hurtBattle(t,i,e=!1){const a=this.hurt(t,e);return a[0]>0&&E.addEvents(c.damageEvent(!0,a[0],!0,!0,this,i)),a[1]}hurtDirect(t,i,e=void 0){const a=this.hurt(t,!1);return a[0]>0&&(y.new().crd(i).txt(` dealt ${t} dmg to `).crd(this.code).txt(".").go(),E.addEvents(c.damageEvent(!1,a[0],!1,!0,this,void 0)),U.deathProdder(this,e)),a[0]}modIdx(t){return this.mods.findIndex(i=>i.granter===t)}modEffectPropagator(t){t.type==="AT"?this.enforceEffects("AT"):t.type==="HL"?(this.enforceEffects("CH"),U.deathProdder(this)):t.type==="AR"||t.type==="NA"?this.enforceEffects("AR"):(t.type==="DF"||t.type==="ND")&&this.enforceEffects("DF")}modSum(t){return this.mods.filter(i=>i.type===t).map(i=>i.value).reduce((i,e)=>i+e,0)}modBool(t){return this.mods.some(i=>i.type===t&&i.value===1)}hasMod(t){return this.modIdx(t)>-1}addMod(t){this.mods.push(t),this.modEffectPropagator(t)}addModSafe(t){this.mods.findIndex(e=>e.granter===t.granter&&e.type===t.type)===-1&&this.addMod(t)}removeMod(t){const i=this.state.mods.filter(e=>e.granter===t);this.state.mods=this.state.mods.filter(e=>e.granter!==t),i.forEach(e=>this.modEffectPropagator(e))}removeModSafe(t){this.hasMod(t)&&this.removeMod(t)}expireMod(t){this.state.mods.splice(this.state.mods.indexOf(t),1)}endActivation(){this.state.activationAvailable=!1,U.deathCheck(),C.actionDone()}move(t){this.state.lane=t,ee.positionChange(this.owner),E.addEvents(c.creatureEvent("MOV",this))}addEffect(t,i){const e=c.effect(t,i);return this.effects.push(e),e}enforceEffects(t,i=!1){this.effects.filter(e=>e.watch===t).filter(e=>e.area==="A"||e.area==="C"&&this.owner===i).forEach(e=>O.getCard(e.logicCode).enforceEffect(e,this))}jr4(t,i){const e=c.trigger(t,i);return e.cardCode=this.code,e.creatId=this.id,this.triggers.push(e),e}removeTrigger(t){const i=this.triggers.indexOf(t);i>-1?this.triggers.splice(i,1):console.error("Wery curious, could not find trigger to remove",t)}wipeAll(){this.state.mods=[],this.state.triggers=[],this.state.effects=[],this.state.hints=[],this.state.armor=0,this.state.mobility=0,this.state.poison=0,this.state.regen=0,this.state.aggressive=!1,this.state.defender=!1,this.state.breakthrough=!1,this.state.defender=!1,this.state.negateDefender=!1,this.state.negateArmor=!1,this.state.bonus=0,this.state.changed=!0,this.state.negateActivate=!0,g.creatByTarget(c.crTarg()).forEach(t=>{t.removeMod(this.id),t.enforceEffects("PS",this.owner)}),this.enforceEffects("AT"),this.enforceEffects("AR"),this.enforceEffects("CH"),ee.defenderChange(this.owner)}get hints(){return this.state.hints}aiHints(){return this.hints}}var J=(n=>(n[n.Never=-999]="Never",n[n.Horrid=-2]="Horrid",n[n.Bad=-1]="Bad",n[n.Noice=1]="Noice",n[n.Grand=2]="Grand",n))(J||{});const ae=10218;class c{static creatureState(t,i){return{activationAvailable:!0,aggressive:!1,armor:0,armorDmg:0,attack:0,bonus:0,breakthrough:!1,changed:!1,code:"",defender:!1,effects:[],extraBattles:0,health:0,hints:[],id:"",lane:i,maxHealth:0,mobility:0,mobilityAvailable:!0,mods:[],negateActivate:!1,negateArmor:!1,negateDefender:!1,negateMobility:!1,negateRegen:!1,owner:t,poison:0,regen:0,sleeping:!0,status:"A",triggers:[]}}static effect(t,i){return{area:"A",watch:t,logicCode:i}}static freeCard(t){return{id:v.genId(),condition:c.target("TH"),sourceCard:t}}static mod(t,i,e=""){return{type:t,value:typeof i=="boolean"?i?1:0:i,granter:e,expiry:"NN"}}static trigger(t,i){return{type:t,logicCode:i,cardCode:"",creatId:"",customCode:"",interactive:!1,changes:!1}}static triggerReaction(t,i,e,a){return{event:t,ownerPlayerA:e,creatId:"",cardCode:"",trigger:i,host:a}}static basicAction(t){return{zone:"N",actionKey:t,hostCard:"",param:""}}static fieldSelectAction(t,i=-1,e=!0){return{zone:"F",actionKey:t,playerA:e,lane:i,hostCard:"",param:""}}static deckSelectAction(t,i,e){return{zone:"N",actionKey:t,card:i,position:e,hostCard:"",param:""}}static handSelectAction(t,i="",e="",a=-1){return{zone:"H",actionKey:t,card:i,cost:e,position:a,hostCard:"",param:""}}static playerSelectAction(t,i){return{zone:"P",actionKey:t,playerA:i,hostCard:"",param:""}}static draftSelectAction(t,i,e){return{zone:"N",actionKey:t,index:i,pack:e,hostCard:"",param:""}}static ddf4(){return{zone:"N",actionKey:"ACTV",hostCard:"",param:""}}static menuButtonAction(t){return{zone:"N",actionKey:"MNBT",hostCard:"",param:t}}static creatureEvent(t,i){return{code:t,creature:i}}static enterFieldEvent(t){return{code:"ENT",creature:t,forged:!1}}static replacedEvent(t,i){return{code:"RPL",creature:t,replacedCreat:i}}static playCardEvent(t,i){const e=c.playerEvent("PLC",i);return e.cardCode=t,e}static playerEvent(t,i){return{code:t,playerA:i}}static playerHealEvent(t,i,e){return{code:t,playerA:i,healAmt:e}}static damageEvent(t,i,e,a,h,u){return{code:"DMG",battle:t,dmg:i,creatureSrc:e,creatureTarg:a,target:h,source:u}}static actionifier(t,i,e,a){const h=t;return h.actionKey=i,h.hostCard=e,h.param=a,h}static target(t){return{target:t,level:"LA",canLevel:!1,faction:"X",player:"X",card:"A",field:"A",creatStatus:"A",tribe:"AN",notMe:"",hasArmor:!1,canArmor:!1,hasDefender:!1,canDefender:!1,hasMobility:!1,canMove:!1,hasPoison:!1,hasRegen:!1,canRegen:!1,cardCode:"",victims:""}}static actionTarget(t,i,e,a){return c.actionifier(c.target(t),i,e,a)}static crTarg(){const t=c.target("TF");return t.field="O",t.creatStatus="V",t}static crActTarg(t,i,e){return c.actionifier(c.crTarg(),t,i,e)}static crNotMeTarg(t){const i=c.target("TF");return i.field="O",i.creatStatus="V",i.notMe=t,i}static crNotMeActTarg(t,i,e,a){return c.actionifier(c.crNotMeTarg(i),t,e,a)}static crFriendTarg(){const t=c.crTarg();return t.player="F",t}static crFriendActTarg(t,i,e){return c.actionifier(c.crFriendTarg(),t,i,e)}static crFriendNotMeTarg(t){const i=c.crNotMeTarg(t);return i.player="F",i}static crFriendNotMeActTarg(t,i,e,a){return c.actionifier(c.crFriendNotMeTarg(i),t,e,a)}static crEnemyTarg(){const t=c.crTarg();return t.player="E",t}static crEnemyActTarg(t,i,e){return c.actionifier(c.crEnemyTarg(),t,i,e)}static playerTarg(t){const i=c.target("TP");return i.player=k.toTarget(t),i}static playerActTarg(t,i,e,a){return c.actionifier(c.playerTarg(t),i,e,a)}static lvlHandActTarg(t,i){const e=this.actionTarget("TH","CARD",t,i);return e.player="F",e.canLevel=!0,e}static emptyTarg(){const t=c.target("TF");return t.field="E",t}static emptyActTarg(t,i,e){return c.actionifier(c.emptyTarg(),t,i,e)}static emptyPlayerTarg(t){const i=c.emptyTarg();return i.player=k.toTarget(t),i}static emptyPlayerActTarg(t,i,e,a){return c.actionifier(c.emptyPlayerTarg(t),i,e,a)}static underHint(t){return t===1?"UL1":t===2?"UL2":"UL3"}static alliedHint(t){if(t==="A")return "ALA";if(t==="N")return "ALN";if(t==="T")return "ALT";if(t==="U")return "ALU";throw new Error("non faction passed to allied hint")}static actionEval(t,i,e){const a=e??[];return{type:i,hints:Array.isArray(a)?a:[a],vectors:[],action:t,final:!0,bonus:0}}static ddp5(t){const i=c.actionEval(t,"PS");return i.final=!1,i}static ddp7(t,i,e,a){const h=c.actionEval(t,"ST",a),u=c.ddp1(i,e);return u.destroy=!0,h.vectors=[u],h}static ddp8(t,i,e){return c.ddp7(t,i.owner,i.lane,e)}static ddp2(t,i,e,a={},h){const u=c.actionEval(t,"ST",h);return u.vectors=[c.ddp1(i,e,a)],u}static ddp3(t,i,e={},a){return c.ddp2(t,i.owner,i.lane,e,a)}static actionEvalBuffN(t,i,e,a=0,h=0,u){return c.ddp2(t,i,e,{att:a,hlt:h},u)}static actionEvalBuffC(t,i,e=0,a=0,h){return c.ddp3(t,i,{att:e,hlt:a},h)}static ddp4(t,i,e,a,h=!1){const u=c.actionEval(t,"PC"),m=O.getCard(a);u.hints=m.aiHints();const b=c.evalVectorCreatureFromClass(m,i,e);return b.type="R",u.vectors.push(b),h&&(u.bonus=m.bonusPlay()),u}static evalVectorEmpty(t,i){return{shape:"B",type:"E",playerA:t,lane:i,destroy:!1,dirDmg:0,moveTo:0,health:0,attack:0,aggressive:!1,armor:0,armorDmg:0,breakthrough:!1,defender:!1,negateDefender:!1,poison:0,regen:0,sleeping:!1,bonus:0}}static evalVectorCreatureFromCode(t,i,e){const a=O.getCard(t);return c.evalVectorCreatureFromClass(a,i,e)}static evalVectorCreatureFromClass(t,i,e){const a=t.jr3(i,e);return c.evalVectorCreature(a)}static evalVectorCreature(t){return{shape:"B",type:"C",playerA:t.owner,lane:t.lane,destroy:!1,dirDmg:0,moveTo:0,health:t.health,attack:t.attack,aggressive:t.aggressive,armor:t.armor,armorDmg:t.armorDmg,breakthrough:t.breakthrough,defender:t.defender,negateDefender:t.negateDefender,poison:t.poison,regen:t.regen,sleeping:t.sleeping,bonus:t.bonus}}static evalVectorPlayerLife(t,i){const e=c.evalVectorEmpty(t,0);return e.shape="P",e.type="M",e.health=i,e}static evalVectorPlayerDmg(t,i){const e=c.evalVectorEmpty(t,0);return e.shape="P",e.type="M",e.dirDmg=i,e}static evalVectorPlayer(t){const i=c.evalVectorEmpty(t,0);return i.shape="P",i.type="P",i}static ddp1(t,i,e){const a=c.evalVectorEmpty(t,i);return a.type="M",e&&(a.attack=e.att??0,a.health=e.hlt??0,a.armor=e.arm??0,a.regen=e.rgn??0,a.poison=e.psn??0,a.dirDmg=e.dmg??0,a.defender=e.def??!1,a.breakthrough=e.brt??!1,a.aggressive=e.agr??!1,a.negateDefender=e.noD??!1),a}}class Pt{constructor(t){this.code=t,this.level=parseInt(t.substring(3))}code;consistent=!1;faction="X";cardCode(){return Pt.extractCardCode(this.code)}image(t){return this.type==="S"?this.fixedImage(t):this.leveledImage(t)}leveledImage(t){return this.rawImage(this.code,t)}fixedImage(t){return this.rawImage(this.cardCode(),t)}rawImage(t,i){return`card/${i?"b":"s"}/${this.faction}/${t}.jpg`}isFree=!1;level;maxLevel=3;minLevel=1;name="";overload=!1;rarity="T";text="";get type(){return "C"}hints;aiHints(){return this.hints??[]}bonus;bonusPlay(){return this?.bonus?.play??0}bonusExist(){return this?.bonus?.exist??0}canLevel(){return this.level<this.maxLevel}enforceEffect(t,i){console.error("Effect without an enforcement routine",t)}ddf7(t){return t.actionKey==="NOTR"?(console.warn("I encountered a none end trigger in CardBase evaluateAction!!"),c.actionEval(t,"NO")):(console.warn(`Request for ${y.fastName(this.code)} actions evaluation ended up in baseclass: `,t),c.actionEval(t,"NT"))}getCardActions(t,i){return console.error(`Request for ${y.fastName(this.code)} actions ended up in baseclass: `,t),[]}handleAction(t){console.error("Custom card action did not have handler written for it.",t.actionKey)}levelSpice(){return[]}levelUpCard(){return this.canLevel()?`${this.cardCode()}${this.level+1}`:this.code}lValB(t){return t[this.level-1]}lValN(t){return t[this.level-1]}lValS(t){return t[this.level-1]}playTargets(){return[]}ddf8(t){return!1}jr8(t){throw new Error(`Unhandled trigger resolve in card ${this.code}, trigger ${t.trigger.type}`)}ddp9(t,i,e,a,h=0){return Rt.ddp9(t,i,e,a,h)}ddp6(t=0){const i=this.avgCreatureStats(t);return this.ddp9(1,i[0]+i[1],i[0],0,0)}avgCreatureStats(t=0){const i=t===0?this.level:t,e=[[4,8,14],[7,11,17]];let a;i===1?a=[1,0,0]:i===2?a=[.5,.5,0]:a=[.2,.4,.4];let h=0,u=0;return[0,1,2].forEach(m=>{h+=a[m]*e[0][m],u+=a[m]*e[1][m]}),[h,u]}static extractCardCode(t){return t.substring(0,3)}get boof123n(){return this.level*-1}get boof124(){return this.lValN([1,2,4])}get boof135(){return this.lValN([1,3,5])}get boof137(){return this.lValN([1,3,7])}get boof147(){return this.lValN([1,4,7])}get boof234(){return this.level+1}get boof235(){return this.lValN([2,3,5])}get boof236(){return this.lValN([2,3,6])}get boof246(){return this.level*2}get boof246n(){return this.level*-2}get boof247(){return this.lValN([2,4,7])}get boof247n(){return this.lValN([-2,-4,-7])}get boof248(){return this.lValN([2,4,8])}get boof258(){return this.lValN([2,5,8])}get boof2510(){return this.lValN([2,5,10])}get boof2612(){return this.lValN([2,6,12])}get boof357(){return this.lValN([3,5,7])}get boof358(){return this.lValN([3,5,8])}get boof359(){return this.lValN([3,5,9])}get boof3510(){return this.lValN([3,5,10])}get boof3612(){return this.lValN([3,6,12])}get boof369(){return this.level*3}get boof369n(){return this.level*-3}get boof3610(){return this.lValN([3,6,10])}get boof3711(){return this.lValN([3,7,11])}get boof3712(){return this.lValN([3,7,12])}get boof3713(){return this.lValN([3,7,13])}get boof3714(){return this.lValN([3,7,14])}get boof3814(){return this.lValN([3,8,14])}get boof468(){return this.lValN([4,6,8])}get boof469(){return this.lValN([4,6,9])}get boof4610(){return this.lValN([4,6,10])}get boof4612(){return this.lValN([4,6,12])}get boof4710(){return this.lValN([4,7,10])}get boof4711(){return this.lValN([4,7,11])}get boof4712(){return this.lValN([4,7,12])}get boof4713(){return this.lValN([4,7,13])}get boof4714(){return this.lValN([4,7,14])}get boof4812(){return this.level*4}get boof4812n(){return this.level*-4}get boof4813(){return this.lValN([4,8,13])}get boof4814(){return this.lValN([4,8,14])}get boof4815(){return this.lValN([4,8,15])}get boof4816(){return this.lValN([4,8,16])}get boof4914(){return this.lValN([4,9,14])}get boof4915(){return this.lValN([4,9,15])}get boof579(){return this.lValN([5,7,9])}get boof5711(){return this.lValN([5,7,11])}get boof5714(){return this.lValN([5,7,14])}get boof5812(){return this.lValN([5,8,12])}get boof5813(){return this.lValN([5,8,13])}get boof5814(){return this.lValN([5,8,14])}get boof5815(){return this.lValN([5,8,15])}get boof5914(){return this.lValN([5,9,14])}get boof5915(){return this.lValN([5,9,15])}get boof5916(){return this.lValN([5,9,16])}get boof5917(){return this.lValN([5,9,17])}get boof51014(){return this.lValN([5,10,14])}get boof51015(){return this.level*5}get boof51020(){return this.lValN([5,10,20])}get boof6812(){return this.lValN([6,8,12])}get boof6814(){return this.lValN([6,8,14])}get boof6912(){return this.lValN([6,9,12])}get boof6914(){return this.lValN([6,9,14])}get boof6915(){return this.lValN([6,9,15])}get boof6916(){return this.lValN([6,9,16])}get boof61014(){return this.lValN([6,10,14])}get boof61015(){return this.lValN([6,10,15])}get boof61016(){return this.lValN([6,10,16])}get boof61017(){return this.lValN([6,10,17])}get boof61018(){return this.lValN([6,10,18])}get boof61117(){return this.lValN([6,11,17])}get boof61218(){return this.lValN([6,12,18])}get boof61224(){return this.lValN([6,12,24])}get boof7911(){return this.lValN([7,9,11])}get boof7914(){return this.lValN([7,9,14])}get boof71013(){return this.lValN([7,10,13])}get boof71014(){return this.lValN([7,10,14])}get boof71015(){return this.lValN([7,10,15])}get boof71116(){return this.lValN([7,11,16])}get boof71117(){return this.lValN([7,11,17])}get boof71118(){return this.lValN([7,11,18])}get boof81116(){return this.lValN([8,11,16])}get boof81117(){return this.lValN([8,11,17])}get boof81217(){return this.lValN([8,12,17])}get boof81220(){return this.lValN([8,12,20])}get boof81318(){return this.lValN([8,13,18])}get boof91420(){return this.lValN([9,14,20])}get boof91421(){return this.lValN([9,14,21])}get boof101520(){return this.lValN([10,15,20])}get boof255080(){return this.lValN([25,50,80])}}class M extends Pt{constructor(t){super(t)}jr2=0;jr1=0;initAggro=!1;initArmor=0;initBT=!1;initDefend=!1;initMobile=0;initRegen=0;tribe=[];isTribe(t){return(Array.isArray(t)?t:[t]).every(e=>this.tribe.includes(e))}jr3(t,i){const e=c.creatureState(t,i);return e.id=v.genId(),e.code=this.code,e.health=this.jr2,e.attack=this.jr1,e.maxHealth=e.health,e.regen=this.initRegen,e.breakthrough=this.initBT,e.defender=this.initDefend,e.aggressive=this.initAggro,e.armor=this.initArmor,e.mobility=this.initMobile,e.hints=this.aiHints(),e.bonus=this.bonusExist(),new bi(e)}playTargets(){const t=super.playTargets(),i=c.actionTarget("TF","FORG",this.code,"");return i.player="F",t.push(i),t}canActivate(t){return!1}startActivation(t){console.error("encountered activation request for creature with no activate",t)}levelSpice(){return[{icon:"A",num:this.jr1},{icon:"H",num:this.jr2}]}}class gt extends Pt{constructor(t){super(t)}get type(){return "S"}logSpell(){y.new().txt("Casted ").crd(this.code).txt(".").go()}}class vi{log=!1;aiPlayer;constructor(t){this.aiPlayer=t}lNum(t){return t.toFixed(1)}weighEval(t){let i=0;switch(t.type){case "PC":i=this.weighPlacement(t);break;case "ST":i=this.weighStatChange(t);break;case "DC":i=this.weighDiscard(t);break;case "MC":i=this.weighMove(t);break;case "NR":i=J.Never;break;case "FT":break;case "DT":const e=x.turn;(e.regularPlays>0||e.freeCards.length>0)&&(i-=J.Horrid);break;case "NT":break;case "PS":break;case "NO":break;default:console.error("Final type with no weighting switch: "+t.type),i=-2}return i+t.bonus}weighPlacement(t){let i=0;const e=t.action,a=g.searchByFSA(e),h=g.searchByLane(g.oppositeLane(e.lane),!e.playerA),u=t.hints.includes("RD");if(a){const b=a.aiHints().includes("RT");b&&u?i+=this.logHint(J.Grand,"Replacement Supercombo"):b?i+=this.logHint(J.Noice,"Likes being replaced"):u?i+=this.logHint(J.Noice,"Upgrade"):t.hints.includes("RE")||(x.turn.mainBattle?i+=this.logHint(J.Bad,"Replace creature post-battle"):i+=this.logHint(J.Never,"Replace creature pre-battle"))}else u&&(i+=this.logHint(J.Bad,"Upgrade ignored"));return i+=this.weighOpposition(t,h),i+=this.weighLanePlacement(t,e.lane,e.playerA),t.hints.includes("SD")&&(i+=this.weighSacrificeDemand(t)),i+=this.weighRank(t),i}weighStatChange(t){let i=0;return t.hints.includes("SD")&&(i+=this.weighSacrificeDemand(t)),i}weighDestroy(t){let i=0;const e=t.action;return g.ddf6(e).owner===this.aiPlayer?t.hints.includes("ST")?i+=J.Noice:i+=J.Horrid:i+=J.Noice,i}weighDmg(t){return 0}weighDiscard(t){let i=0,e;t.action.actionKey==="HDSC"?(x.turn.mainBattle||(i+=this.logHint(J.Horrid,"Discard pre-battle")),e=t.action.hostCard):(i+=this.logHint(J.Noice,"Levelling effect encouragement"),e=t.action.card);const h=O.getCard(e).aiHints();return h.includes("LV")?i+=this.logHint(J.Noice,"Good card to level"):h.includes("DL")&&(i+=this.logHint(J.Horrid,"Bad card to level")),i}weighMove(t){let i=0;const e=t.action,a=g.jr5(e.param),h=a.owner===this.aiPlayer?1:-1,u=this.weighLanePlacement(t,a.lane,a.owner),b=this.weighLanePlacement(t,e.lane,a.owner)-u,S=g.searchByLane(g.oppositeLane(a.lane),!a.owner),F=this.weighOpposition(t,S),R=g.searchByLane(g.oppositeLane(e.lane),!a.owner),rt=this.weighOpposition(t,R)-F;let V=0;R&&(t.hints.includes("FH")?V=this.logHint(J.Noice,"Flank Hurt"):t.hints.includes("FK")&&w.levelTestCommon(R.level,a.level)&&(V=this.logHint(J.Grand*2,"Flank Kill")));const q=(b+rt+V)*h;return i+this.logHint(q,"Move Summary with Allegiance mod")}weighLanePlacement(t,i,e){let a=0;const h=t.hints.includes("NX"),u=t.hints.includes("SL"),m=t.hints.includes("LJ");if(h?i===3?a+=this.logHint(J.Noice,"Nexus"):a+=this.logHint(J.Bad,"Nexus ignored"):u&&(i===1||i===5?a+=this.logHint(J.Noice,"Sidelane"):a+=this.logHint(J.Bad,"Sidelane ignored")),m){const b=c.crTarg();b.player=k.toTarget(e),b.lanes=g.adjacentPositions(i);const S=g.creatByTarget(b).length;S>0&&(a+=this.logHint(J.Noice*S,"Likes adjacents, found "+S))}return a}weighOpposition(t,i){let e=0;const a=t.hints.includes("OL"),h=t.hints.includes("OP");if(i){const u=i.aiHints(),m=u.includes("OL"),b=u.includes("OP");h?m?e+=this.logHint(J.Grand,"Likes opposition, enemy hates it"):b||(e+=this.logHint(J.Noice,"Likes opposition")):a&&(b?e+=this.logHint(J.Horrid,"Hates opposition, enemy loves it"):m||(e+=this.logHint(J.Bad,"Hates opposition")))}else h?e+=this.logHint(J.Bad,"Hates open lane"):a&&(e+=this.logHint(J.Grand,"Loves open lane"));return e}weighSacrificeDemand(t){let i=J.Never,e="No good sacrifice targets";const a=(h,u)=>{i<h&&(i=h,e=u)};return g.qPlayerCreats(this.aiPlayer).forEach(h=>{h.hints.includes("ST")?a(J.Grand*2,"Sacrifice target found"):Rt.ddp9(1,Rt.creatValueFormula(h),h.attack,0)<2?a(J.Grand,"Weak creature considered for sacrifice"):a(J.Horrid,"Innapropriate creature considered for sacrifice")}),this.logHint(i,e),i}weighRank(t){let i=0,e=0;t.hints.every(u=>u==="UL1"?(e=1,!1):u==="UL2"?(e=2,!1):u==="UL3"?(e=3,!1):!0);const a=t.hints.includes("DL"),h=t.hints.includes("RH");if(h||a||e>0){const u=k.toPlayer(this.aiPlayer).rank;e>0&&(u>e?i+=this.logHint(J.Noice,"Underlevel bonus"):i+=this.logHint(J.Horrid,"Underlevel discouraged")),a&&u===1&&(i+=this.logHint(J.Horrid*2,"Bad scaling rank 1 discouraged")),h&&(i+=this.logHint(J.Noice*(u-1),"Wery interesting, a Scale rank buff happened"))}return i}logHint(t,i){return this.log&&console.log("Hint: "+i+"; Val: "+this.lNum(t)),t}logHintStarter(t,i){}}class se{paStats;pbStats;constructor(t,i){this.paStats=t,this.pbStats=i}allStats(){return[this.paStats,this.pbStats]}playerStats(t){return t?this.paStats:this.pbStats}deltaStats(t){const i=this.playerStats(t),e=this.playerStats(!t);return se.deltafier(i,e)}static deltafier(t,i){const e=se.blankStats(!0);return e.creatCount=t.creatCount-i.creatCount,e.creatValue=t.creatValue-i.creatValue,e.threatValue=t.threatValue-i.threatValue,e.playerHealth=t.playerHealth-i.playerHealth,e}static blankStats(t){return{side:t,creatCount:0,creatValue:0,threatValue:0,playerHealth:0}}}class Rt{guts;constructor(t){this.guts=t}static fromState(){const t=g.qActiveCreats(),i=[!0,!1],e=i.map(h=>g.laneIdx.map(u=>{const m=t.find(b=>b.owner===h&&b.lane===u);return m?c.evalVectorCreature(m):c.evalVectorEmpty(h,u)})).flat(),a=i.map(h=>{const u=k.toPlayer(h),m=c.evalVectorPlayer(h);return m.health=u.health,m});return e.push(...a),new Rt(e)}static ddp9(t,i,e,a,h=0){return Rt.ddp9Nugget(t,i,e,a,h)[0]}static ddp9Nugget(t,i,e,a,h=0){const u=t/3,m=i/10,b=e/5,S=a/5;return[u+m+b+S+h,u,m,b,S,h]}static creatValueFormula(t){return t.health+Math.max(0,t.attack)+t.bonus+t.regen+t.armor-t.poison}clone(){return new Rt(structuredClone(this.guts))}boardStats(){const t=[!0,!1].map(i=>this.guts.filter(e=>e.playerA===i)).map(i=>{const e=se.blankStats(i[0].playerA),a=i.filter(h=>h.type==="C");return e.creatCount=a.length,e.playerHealth=i[5].health,e.creatValue=this.creatSum(a,Rt.creatValueFormula),e.threatValue=this.creatSum(a,h=>{if(h.defender)return 0;{const u=this.guts[this.findLaneIndex(6-h.lane,!h.playerA)];let m=0;if(u.type==="E"?m=h.attack:h.breakthrough&&(m=h.attack-u.health),m<1)return 0;if(m<6)return m;{const b=this.scalingBonus(m);return m+(h.sleeping&&!h.aggressive?b/2:b)}}}),e});return new se(t[0],t[1])}scalingBonus(t){let i=!0,e=0,a=6,h=1;const u=6;for(;i;)t>a+u?(e+=h*u,a+=u,h++):(e+=h*(t-a),i=!1);return e}weighState(t,i,e){const a=this.boardStats(),h=a.playerStats(!e).playerHealth;if(h<1&&h<a.playerStats(e).playerHealth)return{formula:1e3,stats:["0","0","0","DEAD"],fParts:["0","0","0","KILL"]};const u=t.deltaStats(e),m=i.deltaStats(e),b=a.deltaStats(e),S=se.deltafier(b,m),F=se.deltafier(b,u),R=Rt.ddp9Nugget(F.creatCount,F.creatValue,Math.max(F.threatValue,S.threatValue),F.playerHealth);return{formula:R[0],fParts:R.slice(1,-1).map(X=>X.toFixed(1)),stats:[F.creatCount,F.creatValue,F.threatValue,F.playerHealth].map(X=>X.toFixed(1))}}creatSum(t,i){return t.map(e=>i(e)).reduce((e,a)=>e+a,0)}findLaneIndex(t,i){return t+(i?-1:4)}findVectorIdx(t){return t.shape==="B"?this.findLaneIndex(t.lane,t.playerA):t.playerA?10:11}getBaseVector(t){return this.guts[this.findVectorIdx(t)]}replaceBaseVector(t){const i=this.findVectorIdx(t);this.guts[i]=t}applyVectors(t){t.forEach(e=>{switch(e.type){case "M":if(e.shape==="B")if(e.destroy)this.replaceBaseVector(c.evalVectorEmpty(e.playerA,e.lane));else{const h=this.getBaseVector(e);if(h.type!=="E"){if(e.moveTo){const u=c.evalVectorEmpty(e.playerA,e.lane);h.lane=e.moveTo,this.replaceBaseVector(h),this.replaceBaseVector(u)}else if(this.applyCreatVector(h,e),e.dirDmg){const u=Math.min(e.dirDmg,h.armor-h.armorDmg);h.armorDmg+=u,h.health-=e.dirDmg-u}}}else{const h=this.getBaseVector(e);h.health+=e.health,e.dirDmg&&(h.health-=e.dirDmg)}break;case "R":const a=c.evalVectorEmpty(e.playerA,e.lane);this.applyCreatVector(a,e),a.type="C",this.replaceBaseVector(a);break;case "P":break;default:console.warn("BoardEval is applying vectors, encountered unexpected vector type:",e)}}),this.guts.filter(e=>e.shape==="B"&&e.health<1).forEach(e=>this.replaceBaseVector(c.evalVectorEmpty(e.playerA,e.lane)))}battleState(t){return t.type==="E"?0:t.defender||t.sleeping&&!t.aggressive?1:2}battleVector(t,i,e,a){const h=[];if(t>0){let u=0;const m=Math.max(e.attack,0);if(i>0){const b=t===2&&e.breakthrough,S=Math.max(Math.min(m,a.armor-a.armorDmg),0);let F=m-S;if(b&&F>a.health&&(u=F-a.health,F=a.health),S>0||F>0){const R=c.ddp1(a.playerA,a.lane);R.health=-F,R.armorDmg=S,h.push(R)}}else t===2&&(u=m);u>0&&h.push(c.evalVectorPlayerLife(a.playerA,-u))}return h}applyCombat(){const t=g.laneIdx.map(i=>{const e=this.guts[i-1],a=this.guts[10-i],h=this.battleState(e),u=this.battleState(a);return h===2||u===2?this.battleVector(h,u,e,a).concat(this.battleVector(u,h,a,e)):[]}).flat();this.applyVectors(t)}applyTurnEnd(t,i){const e=!t,a=!i,h=this.guts.filter(u=>u.shape==="B"&&(e||u.playerA===a)&&u.poison>0).map(u=>{const m=u.regen-Math.max(0,u.poison-u.armor),b=c.ddp1(u.playerA,u.lane);return b.health=m,b}).filter(u=>u.health!==0);this.applyVectors(h)}applyCreatVector(t,i){t.health+=i.health,t.attack+=this.doubleOrNossing(t.attack,i.attack),t.armor+=i.armor,t.armorDmg+=i.armorDmg,t.poison+=this.doubleOrNossing(t.poison,i.poison),t.regen+=i.regen,t.aggressive=i.aggressive,t.breakthrough=i.breakthrough,t.defender=i.defender,t.negateDefender=i.negateDefender}doubleOrNossing(t,i){if(i>=ae&&i<ae+4){const e=i-ae;return t*e}else return i}}var et=(n=>(n[n.Left=0]="Left",n[n.Both=1]="Both",n[n.Right=2]="Right",n[n.ForceRight=3]="ForceRight",n))(et||{});class $e{action;hitTest(t,i,e){}enabled=!0;mouse=0;validButton(t){return this.mouse===1||this.mouse===t}static arrayHit(t,i,e,a){let h,u=0;const m=t.length;for(;h===void 0&&u<m;)h=t[u].hitTest(i,e,a),u++;return h}}class nt extends $e{originX;originY;endX;endY;constructor(t,i,e,a,h,u=0){super(),this.action=t,this.originX=i,this.originY=e,this.endX=i+a,this.endY=e+h,this.mouse=u}hitTest(t,i,e){if(!(!this.enabled||!this.validButton(e)))return this.originX<=t&&this.endX>=t&&this.originY<=i&&this.endY>=i?this.action:void 0}}class $t extends nt{constructor(t,i,e,a,h=0){super({zone:"N",actionKey:"BNDL",hostCard:"",param:""},t,i,e,a,h)}childs=[];addChild(t){this.childs.push(t)}clear(){this.childs=[]}hitTest(t,i,e){if(super.hitTest(t,i,e))return $e.arrayHit(this.childs,t,i,e)}}class Ai{guts="";txt(t){return this.guts+=t,this}plr(t){const i=k.toBool(t);return this.guts+="^p"+(i?"a":"b"),this}crd(t){return this.guts+="^c"+t,this}go(){y.parse(this)}}class ki{log=!1;aiPlayer=!1;actEval;constructor(){this.actEval=new vi(this.aiPlayer),this.actEval.log=this.log}setLog(t){this.log=t,this.actEval.log=t}lNum(t){return t<-100?"NUNS":t>100?"KILL":t.toFixed(1)}whiffActions=["CANC","DEET","SCRH"];evaluateActions(t,i=""){const e=t.filter(a=>this.whiffActions.indexOf(a.actionKey)===-1);return e.forEach(a=>{switch(a.actionKey){case "ACTV":case "CARD":const h=O.getCard(a.hostCard),u=h.ddf7(a);if(u.final)a.evals=[[u]];else{const dt=h.getCardActions(a);a.evals=this.evalSmoosh(this.evaluateActions(dt,i+"--"),u)}break;case "FORG":const m=a,b=c.ddp4(a,m.playerA,m.lane,m.hostCard,!0);a.evals=[[b]];break;case "HDSC":a.evals=[[c.actionEval(a,"DC")]];break;case "HPLY":const S=a,F=Pt.extractCardCode(S.card);if(F==="MTS"||F==="MTT"||F==="PRI"||F==="OBB")a.evals=[[c.actionEval(a,"NR")]];else{const dt=C.getPlayCardActions(S);a.evals=this.evalSmoosh(this.evaluateActions(dt))}break;case "MEND":const R=c.actionEval(a,"MC"),X=g.jr5(a.param),rt=a;R.hints=X.aiHints();const V=c.ddp1(X.owner,X.lane);V.moveTo=rt.lane,R.vectors.push(V),a.evals=[[R]];break;case "MOVE":const q=C.getMoveCardActions(a);a.evals=this.evalSmoosh(this.evaluateActions(q));break;case "NOTR":a.evals=[[c.actionEval(a,"NO")]];break;case "FITE":a.evals=[[c.actionEval(a,"FT")]];break;case "ENDT":a.evals=[[c.actionEval(a,"DT")]];break;default:a.evals=[],console.error("Encountered action that AI could not evaluate:",a)}}),e}evalSmoosh(t,i){const e=t.map(a=>a.evals||[]).flat();return i?e.map(a=>[i,...a]):e}processAction(t){const i=[];if(this.log){if(t.length>0&&t[0].actionKey==="FORG")console.log("Choices: Forge (Lanes 5 to 1) "+y.fastName(t[0].hostCard)+", Discard");else{const R=t.map(X=>y.actionText(X)).join("; ");console.log("Choices: "+R)}console.groupCollapsed("Choice Details")}const e=this.evaluateActions(t),a=Rt.fromState(),h=a.boardStats();let u=-9999;const m=e.map(R=>{const X=[];this.log&&console.groupCollapsed("Details: "+y.actionText(R));let rt=-9999;if(R.evals?.forEach(V=>{if(this.log){const It=R.actionKey==="HPLY"||R.actionKey==="MOVE"?0:1,be=V.slice(It).map(ve=>y.actionText(ve.action)).join(", ")||"Single Link Chain";console.groupCollapsed("Chain "+be)}let q=0;V.forEach((It,be)=>{this.log&&console.groupCollapsed("Hints for Link "+be);const ve=this.actEval.weighEval(It);q+=ve,this.log&&(console.log("Hint total: "+this.lNum(ve)),console.groupEnd())});const dt=a.clone(),lt=V.map(It=>It.vectors).flat();dt.applyVectors(lt);const yt=dt.boardStats(),xt=!x.turn.mainBattle;xt&&dt.applyCombat(),dt.applyTurnEnd(xt,this.aiPlayer);const jt=dt.weighState(h,yt,this.aiPlayer),le=q+jt.formula;if(le>rt&&(rt=le),this.log){const It=this.lNum(le);X.push(It),console.log("Chain Weight: "+It+" | Hints: "+this.lNum(q)+" | Board: "+this.lNum(jt.formula)),this.logStats("Board Change: ",jt.stats),this.logStats("Board Formul: ",jt.fParts),console.groupEnd()}}),rt>u&&(u=rt),this.log){const V=this.lNum(rt);i.push(V),console.log("Chain Summary: "+X.join(" | ")),console.log("Best chain weight: "+V),console.groupEnd()}return{action:R,weight:rt}}),b=u-.6,S=m.filter(R=>R.weight>b),F=S[v.randInt(0,S.length)].action;v.sleep(500).then(()=>{this.log&&(console.groupEnd(),console.log("WINNER: "+y.actionText(F)+";  SUMMARY: "+i.join(" | "))),C.handleAction(F)})}logStats(t,i){const a=["Crt Cnt","Crt Val","Threat","P Health"].map((h,u)=>`${h}: ${this.numNum(i[u])}`).join(", ");console.log(t+a)}numNum(t){return t.length>6?t.charAt(0)==="-"?"NUNS":"KILL":t.padEnd(4)}jr7(t,i=3){return`${t}${i}`}jr6(t,i){const e=v.randInt(0,i.length),a=i[e];return i.splice(e,1),g.birthCreature(t,"F",this.aiPlayer,a)}cheater(){if(!(x.aiMode&&x.aiActive&&v.options.cheater))return!1;const t=k.toPlayer(this.aiPlayer),i=k.toPlayer(!this.aiPlayer),e=i.health-t.health;let a=0;e>85?a=3:e>65?a=2:e>45&&(a=1);const h=g.emptyLanes(this.aiPlayer);if(a===0||h.length===0)return!1;y.new().plr(this.aiPlayer).txt(" is a cheaty cheaterton.").go();let u=0;if(a===1){if(x.turn.regularPlays-=1,u=v.randInt(0,13),u===0)this.jr6(this.jr7("HTR"),h);else if(u===1)this.jr6(this.jr7("AGM"),h).addRegen(8);else if(u===2){const m=this.jr6(this.jr7("YNS"),h);m.buff(0,15),m.addRegen(4)}else if(u===3)this.jr6(this.jr7("TBA"),h);else if(u===4)this.jr6(this.jr7("DCS"),h);else if(u===5)this.jr6(this.jr7("GGP"),h).addRegen(8);else if(u===6){const m=this.jr6(this.jr7("WFM"),h);m.aggressive=!0}else if(u===7){const m=this.jr6(this.jr7("FFU"),h);m.aggressive=!0}else if(u===8){const m=this.jr6(this.jr7("URB"),h);m.aggressive=!0}else if(u===9){const m=this.jr6(this.jr7("KOD"),h);m.aggressive=!0,m.addRegen(6)}else if(u===10)this.jr6(this.jr7("AGK"),h).addArmor(3);else if(u===11){const m=this.jr6(this.jr7("PSC"),h);m.aggressive=!0}else if(u===12){const m=this.jr6(this.jr7("SAD"),h);m.aggressive=!0}}else if(a===2)if(x.turn.regularPlays-=1,u=v.randInt(0,17),u===0){const m=this.jr6(this.jr7("NDR"),h);m.aggressive=!0}else if(u===1){const m=this.jr6(this.jr7("CSW"),h);m.aggressive=!0}else if(u===2)this.jr6(this.jr7("GGD"),h).addRegen(6);else if(u===3)this.jr6(this.jr7("EFP"),h);else if(u===4)this.jr6(this.jr7("ZTU"),h);else if(u===5){const m=this.jr6(this.jr7("DDD"),h);m.aggressive=!0}else if(u===6)this.jr6(this.jr7("RBH"),h).addRegen(8);else if(u===7)this.jr6(this.jr7("SFT"),h);else if(u===8)this.jr6(this.jr7("GTT"),h);else if(u===9)this.jr6(this.jr7("SMD"),h);else if(h.length===5)this.jr6(this.jr7("DFB"),h),[1,2,3,4].forEach(m=>this.jr6(this.jr7("XHS"),h));else if(h.length===4)this.jr6(this.jr7("LMV"),h);else if(h.length===3)this.jr6(this.jr7("LHY"),h),this.jr6(this.jr7("SVH"),h),this.jr6(this.jr7("DBA"),h);else if(h.length===2)this.jr6(this.jr7("UTR"),h),this.jr6(this.jr7("TDS"),h);else if(t.turn===4)this.jr6(this.jr7("SSR"),h);else if(t.turn===1)this.jr6(this.jr7("ESK"),h);else{const m=this.jr6(this.jr7("XSH"),h);m.aggressive=!0}else if(a===3)if(u=v.randInt(0,20),u===0){const m=this.jr6(this.jr7("IHA",4),h);m.aggressive=!0}else if(u===1)this.jr6(this.jr7("CHR"),h);else if(u===2)this.jr6(this.jr7("FGO",1),h);else if(u===3)this.jr6(this.jr7("CHV",4),h);else if(u===4)this.jr6(this.jr7("KKK",4),h);else if(t.health<20){const m=this.jr6(this.jr7("ODC",4),h);m.aggressive=!0}else if(h.length===5){const m=v.randInt(0,4);if(m===0)[1,2,3,4,5].forEach(b=>this.jr6(this.jr7("UWL",2),h));else if(m===1)[1,2].forEach(b=>this.jr6(this.jr7("DFB"),h)),[1,2,3].forEach(b=>this.jr6(this.jr7("FFD"),h));else if(m===2)[1,2,3,4,5].forEach(b=>this.jr6(this.jr7("BWK"),h));else if(m===3){this.jr6(this.jr7("SBG"),h),this.jr6(this.jr7("EWE"),h);const b=this.jr6(this.jr7("BMY"),h);b.defender=!0,b.aggressive=!0}}else if(i.health>350)t.health<180&&k.healPlayer(t,180-t.health),this.jr6(this.jr7("AGD"),h);else if(i.health>250)this.jr6(this.jr7("FGO"),h);else if(h.length===4){const m=v.randInt(0,3);m===0?(this.jr6(this.jr7("AGK"),h),[1,2,3].forEach(b=>this.jr6(this.jr7("VBK"),h))):m===1?(this.jr6(this.jr7("TDS"),h),this.jr6(this.jr7("TDS"),h),this.jr6(this.jr7("UTR"),h)):m===2&&[1,2,3,4].forEach(b=>this.jr6(this.jr7("CDC"),h))}else if(h.length===3)if(v.randInt(0,2)){this.jr6(this.jr7("SDR"),h),this.jr6(this.jr7("SDR"),h);const m=this.jr6(this.jr7("UPM"),h);m.aggressive=!0}else{this.jr6(this.jr7("SDL"),h);const m=this.jr6(this.jr7("NFF"),h);m.aggressive=!0}else if(h.length===2)this.jr6(this.jr7("SPM"),h),this.jr6(this.jr7("SPM"),h);else{const m=this.jr6(this.jr7("NXC"),h);m.buff(10,0),m.aggressive=!0,m.addMobility(2),m.addRegen(5)}return t.health<30&&k.healPlayer(t,50-t.health),!0}}const Ee=new ki;class Ti{handleAction(t){if(t.actionKey==="DEET"){Kt.init(t.param);return}if(t.actionKey==="HPLY"){this.playCardSelect(t);return}if(t.actionKey==="FORG"){L.forgeCard(t,this.cardBeingPlayed);return}if(t.actionKey==="FITE"){si.fight(t.param==="M");return}if(t.actionKey==="ENDT"){L.endTurn();return}if(t.actionKey==="MOVE"){this.mobilitySelect(t);return}if(t.actionKey==="MEND"){L.mobility(t);return}if(t.actionKey==="HDSC"){const i=this.cardBeingPlayed;i.cost="",L.cardPlayed(i,!0),this.actionDone();return}if(t.actionKey==="ACTV"){const i=g.jr5(t.param);O.getCard(i.code).startActivation(i);return}if(t.actionKey==="NOTR"){t.param==="PM"&&pt.popMode(),this.actionDone(!0);return}if(t.actionKey==="CARD"){O.getCard(t.hostCard).handleAction(t);return}if(t.actionKey==="CANC"||t.actionKey==="CNCL"){t.param==="PM"&&pt.popMode(),this.actionHistory.pop(),this.ddf5();return}if(t.actionKey==="DTUP"){Kt.updateDetails(t),ut.drawAll();return}if(t.actionKey==="VWDK"){Ht.handleShowDeck(t);return}if(t.actionKey==="SCRK"){Ht.handleDeckScroll(t);return}if(t.actionKey==="SCRH"){t.param==="R"?x.ui.handScrollLeft+=1:x.ui.handScrollLeft-=1,ut.drawAll();return}if(t.actionKey==="DRFT"){ht.resumeDraft(t.param);return}if(t.actionKey==="SCRD"){ht.paginate(t.param==="D"),ut.drawAll();return}if(t.actionKey==="UIBT"){Ze.handleUIButton(t);return}if(t.actionKey==="MENU"){Ze.handleMainMenuButton(t);return}if(t.actionKey==="MNBT"){Ze.handleMenuButton(t);return}if(t.actionKey==="DSET"){this.ddf5(Et.generateDeckPickerActions(parseInt(t.param)));return}if(t.actionKey==="DECK"){Et.handleDeckPick(t);return}}ddf5(t){let i;if(t){const e=this.generateDetailActions();i=t.concat(e),this.actionHistory.push(i)}else i=this.actionHistory[this.actionHistory.length-1];x.aiActive?Ee.processAction(i):ut.drawAll()}currPlayHandAction;get cardBeingPlayed(){if(this.currPlayHandAction)return this.currPlayHandAction;throw new Error("Attempted to read current card being played, nothing exists")}actionHistory=[];get activeActions(){const t=this.actionHistory.length;return t===0?[]:this.actionHistory[t-1]}actionDone(t=!1){this.currPlayHandAction=void 0,this.actionHistory=[],j.removeAll(),ut.drawActions([]),t?E.triggerDone():pe.whatNext()}playCardSelect(t){this.currPlayHandAction=t;const i=this.getPlayCardActions(t);this.ddf5(i)}getPlayCardActions(t){if(t.actionKey!=="HPLY")throw new Error("Unexpected action passed to getPlayCardActions: "+t.actionKey);const e=O.getCard(t.card).playTargets();x.getRegularPlays()>0&&e.push(w.buttonTarget("HDSC",t.card));const a=w.toActions(e);return a.push(c.handSelectAction("CANC",t.card,"",t.position)),a}mobilitySelect(t){const i=this.getMoveCardActions(t);this.ddf5(i)}getMoveCardActions(t){if(t.actionKey!=="MOVE")throw new Error("Unexpected action passed to getMoveCardActions: "+t.actionKey);const i=g.ddf6(t);let e=[];if(t.param==="ACTV"){const a=c.actionTarget("TB","ACTV",i.code,i.id);e=w.toActions(a)}return e.push(c.fieldSelectAction("CANC",t.lane,t.playerA)),g.canMove(i).map(a=>{const h=c.fieldSelectAction("MEND",a,t.playerA);return h.param=i.id,h}).concat(e)}noneEndTrigger(){return w.toActions(w.buttonTarget("NOTR"))[0]}cancelAction(){return w.toActions(w.buttonTarget("CANC"))[0]}emptyAdjacents(t,i){const e=i||t.id,a=c.emptyPlayerActTarg("F","CARD",t.code,e);return a.lanes=t.adjacent,w.toActions(a)}generateDetailActions(){const t=pt.mode;if(x.aiActive)return[];if(t==="G"){const i=k.getLocal().hand.map((a,h)=>{const u=c.handSelectAction("DEET",a,"",h);return u.param=a,u}),e=g.qActiveCreats().map(a=>{const h=c.fieldSelectAction("DEET",a.lane,a.owner);return h.param=a.code,h});return i.concat(e)}else if(t==="D"){const i=ht.currentPack.map((a,h)=>{const u=c.draftSelectAction("DEET",h,!0);return u.param=`${a}1`,u}),e=ht.picksAsDeck.map((a,h)=>{const u=c.draftSelectAction("DEET",h,!1);return u.param=`${a.card}1`,u});return i.concat(e)}return[]}}const C=new Ti;class Ci{startBatch(){this.deathCheck=!1,this.type==="C0"?this.type="C1":this.type==="C1"?this.type="C2":this.type==="C2"&&(this.type="N0");const t=this.type;let i;if(t==="N0")i=x.batch.events.slice(),x.batch.events=[];else{const a=x.batch.events.filter(u=>u.code==="DIE"),h=x.batch.events.filter(u=>u.code!=="DIE");t==="C1"?(i=h,x.batch.events=a):(i=a,x.batch.events=h)}const e=this.generateTriggers(i);x.batch.triggerActions=this.sortTriggers(e),pe.whatNext()}generateTriggers(t){let i;const e=t.map(a=>{a.code==="TRS"&&(i=a);const h=x.field.map(m=>m.triggers.map(b=>{const S=c.triggerReaction(a,b,m.owner,"C");return S.creatId=m.id,S.cardCode=m.code,S}).filter(b=>Ke.ddf8(b))).flat(),u=[!0,!1].map(m=>k.toPlayer(m).triggers.map(S=>c.triggerReaction(a,S,m,"P")).filter(S=>Ke.ddf8(S))).flat();return h.concat(u)}).flat();return i&&this.handleTurnStart(i),e}sortTriggers(t){const i=k.getActiveB(),e=t.filter(u=>!u.trigger.interactive&&u.ownerPlayerA===i),a=t.filter(u=>!u.trigger.interactive&&u.ownerPlayerA!==i);return t.filter(u=>u.trigger.interactive&&u.ownerPlayerA===i).concat(a,e)}handleTurnStart(t){const i=k.getActiveB();g.qPlayerCreats(i).filter(a=>a.sleeping).forEach(a=>{a.sleeping=!1});const e=Date.now();g.qActiveCreats().forEach(a=>{a.owner===t.playerA&&(a.activationAvailable=!0,a.mobilityAvailable=!0,a.sleeping=!1),a.armorDmg=0,a.poison>0&&a.hurtDirect(a.poison,"POIS",e),a.regen>0&&a.heal(a.regen),U.deathProdder(a,e)})}getNextTrigger(){const t=x.batch.triggerActions;if(t.length!==0)return t[t.length-1]}triggerDone(){const t=x.batch.triggerActions;t.length===0?console.error("batch.triggerDone() was called when there is no trigger actions"):(t.pop(),x.batch.iatLane=0),pe.whatNext()}addEvents(...t){x.batch.events.push(...t)}get deathCheck(){return x.batch.deathCheck}set deathCheck(t){x.batch.deathCheck=t}get type(){return x.batch.type}set type(t){x.batch.type=t}get iaTrigLane(){return x.batch.iatLane}}const E=new Ci;class Si{registry;constructor(){this.registry={}}register(t){if(this.registry[t])throw new Error(`Double registration of canvas ${t}`);this.registry[t]=new oi(t)}get(t){return this.registry[t]}}const it=new Si;class wi extends M{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Abraxas, Avatar of Kadras",this.jr1=this.boof4712,this.jr2=this.lValN([7,11,21]),this.tribe.push("HY"),this.hints=["LJ"];const i=this.lValS(["Give an adjacent creature","Each adjacent creature gets","Each other friendly creature gets"]);this.text=`Activate: ${i} 2x attack this turn.`}targ(t){const i=c.crFriendNotMeActTarg("CARD",t.id,this.code,t.id);return this.level<3&&(i.lanes=t.adjacent),i}canActivate(t){return g.creatByTarget(this.targ(t)).length>0}startActivation(t){if(this.level===1)C.ddf5(this.getCardActions(c.ddf4(),t));else{const i=this.targ(t);g.creatByTarget(i).forEach(e=>{this.applyMod(e,t.id)}),t.endActivation()}}handleAction(t){const i=g.ddf6(t),e=g.jr5(t.param);this.applyMod(i,e.id),e.endActivation()}getCardActions(t,i){if(t.actionKey==="ACTV"){this.level>1&&console.error("Abraxis asking for activate actions after level 1. Something in your code is wrong");const e=i??g.jr5(t.param),a=this.targ(e);return w.toActions([a,w.buttonTarget("CANC")])}return super.getCardActions(t,i)}ddf7(t){const i=ae+1,e=c.actionEval(t,"ST");if(t.actionKey==="ACTV")if(this.level>1){const a=g.jr5(t.param);let h;this.level===3?h=g.laneIdx.filter(u=>u!==a.lane):h=a.adjacent,e.vectors=h.map(u=>c.ddp1(a.owner,u,{att:i}))}else return c.ddp5(t);else{const a=t;e.vectors.push(c.ddp1(a.playerA,a.lane,{att:i}))}return e}applyMod(t,i){const e=c.mod("AT",t.attack,i);e.expiry="ET",t.addMod(e)}}class Di extends M{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Abyssal Brute",this.jr1=this.boof4712,this.jr2=this.jr1,this.tribe.push("ZB"),this.hints=["SL"],this.text=`When ${this.name} or another friendly creature enters a side lane, that creature gets ${y.jr9(this.level,this.level,!0)} and Regenerate ${this.level}.`,this.bonus={exist:this.ddp9(0,this.level*3,this.level,0)*.4}}jr3(t,i){const e=super.jr3(t,i);return e.jr4("EF",this.code),e.jr4("MV",this.code),e}ddf8(t){if(t.trigger.type==="EF"||t.trigger.type==="MV"){const i=t.event,e=i.creature.lane;return(e===1||e===5)&&i.creature.owner===t.ownerPlayerA}return!1}jr8(t){const i=t.event;i.creature.buff(this.level,this.level),i.creature.addRegen(this.level),E.triggerDone()}}class Ei extends M{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Apocrymancer",this.jr1=this.boof3713,this.jr2=this.jr1+3,this.tribe.push("HM"),this.text="When you play an Alloyin spell, you may discard and level up a card."}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("PC",this.code);return a.interactive=!0,e}handleAction(t){L.levelAndDiscard(t),C.actionDone(!0)}ddf8(t){if(t.event.code==="PLC"){const i=t.event;if(i.playerA===t.ownerPlayerA){const e=O.getCard(i.cardCode);if(e.type==="S"&&e.faction==="A")return!0}}return!1}jr8(t){const i=c.lvlHandActTarg(this.code,t.creatId);C.ddf5(w.toActions([i,w.buttonTarget("NOTR")]))}ddf7(t){return t.actionKey==="CARD"?c.actionEval(t,"DC"):super.ddf7(t)}}class xi extends M{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Arboris, Grove Dragon",this.jr1=this.lValN([5,9,20]),this.jr2=this.jr1,this.tribe.push("DG");const i=this.boof;this.text=`While you have over 120 health, Arboris gets ${y.jr9(i,i)}.`}jr3(t,i){const e=super.jr3(t,i);return e.addEffect("PH",this.code),e}enforceEffect(t,i){if(k.toPlayer(i.owner).health>120&&i.status==="A"){const a=this.boof;i.addModSafe(c.mod("HL",a,i.id)),i.addModSafe(c.mod("MH",a,i.id)),i.addModSafe(c.mod("AT",a,i.id))}else i.removeModSafe(i.id)}get boof(){return this.lValN([4,8,80])}}class xe extends M{constructor(t){super(t),this.rarity="H",this.jr1=this.level+2,this.jr2=this.jr1;const i=this.cardCode();i==="SFA"?this.steel():i==="RFA"?this.root():i==="HFA"?this.hell():i==="SGA"&&this.storm(),this.hints=["P1",c.alliedHint(this.faction)],this.text=`Forge: ${this.name} gets ${y.jr9(this.level,this.level)} for each ${y.factionText(this.faction)} card in your hand.`}hell(){this.faction="N",this.name="Hellforged Avatar",this.initRegen=this.level,this.tribe.push("AB")}root(){this.faction="U",this.name="Rootforged Avatar",this.initBT=!0,this.tribe.push("HM")}steel(){this.faction="A",this.name="Steelforged Avatar",this.initArmor=this.level,this.tribe.push("CY")}storm(){this.faction="T",this.name="Stormforged Avatar",this.initMobile=this.level,this.tribe.push("MT")}jr3(t,i){const e=super.jr3(t,i);return e.jr4("FR",this.code),e}jr8(t){const i=t.event,e=k.toPlayer(t.ownerPlayerA).hand.filter(a=>O.getCard(a).faction===this.faction).length;if(e>0){const a=e*this.level;i.creature.buff(a,a)}E.triggerDone()}}class W extends M{imgKey="";lookup(t){return{["BOS"]:()=>this.fixedSapling(3),["COZ"]:()=>this.cooze(),["DZA"]:()=>this.dozer(),["FWG"]:()=>this.feywing(),["FUN"]:()=>this.funguy(),["NSD"]:()=>this.fixedSeedling(1),["OOZ"]:()=>this.nooze(),["RPT"]:()=>this.raptor(),["SPL"]:()=>this.minion(),["SXP"]:()=>this.fixedSapling(5),["SXD"]:()=>this.fixedSeedling(3),["SXT"]:()=>this.fixedTreefolk(7),["SDL"]:()=>this.minion(),["SPN"]:()=>this.nekSpirit(),["SPU"]:()=>this.uspirit(),["XYR"]:()=>this.yuruSpirit(),["TFK"]:()=>this.minion(),["TFD"]:()=>this.fixedTreefolk(this.boof5714),["TFF"]:()=>this.tfFight(),["TTF"]:()=>this.fixedTreefolk(3),["ZTR"]:()=>this.zimus(),["ZBS"]:()=>this.threeZomb(),["ZST"]:()=>this.strideZomb(),["ZMB"]:()=>this.commonZomb()}[t]}constructor(t){super(t),this.rarity="T";const i=this.cardCode();this.imgKey=i,this.minLevel=this.level,this.maxLevel=this.level,this.lookup(i)()}image(t){return this.rawImage(this.imgKey,t)}fixedNekSpirit(t){this.faction="N",this.rarity="T",this.name="Spirit",this.tribe.push("ST"),this.jr1=t,this.jr2=t,this.imgKey=`${"SPN"}${this.level}`}nekSpirit(){this.fixedNekSpirit(this.boof51015)}yuruSpirit(){this.fixedNekSpirit(this.boof5814)}oozer(t){this.faction="N",this.rarity="T",this.name="Oozeling",this.tribe.push("OZ"),this.jr2=this.jr1,this.imgKey=t?"???":"OOZ"}nooze(){this.jr1=this.boof4711,this.oozer(!1)}cooze(){this.jr1=1,this.oozer(!1)}minion(){this.jr1=W.minionBuff(this.level),this.plont(),this.name=W.minionName(this.level)}static minionCode(t){return(t===1?"SDL":t===2?"SPL":"TFK")+t}static minionName(t){return t===1?"Seedling":t===2?"Sapling":"Treefolk"}static minionBuff(t){return t===1?1:t===2?3:5}plont(){this.faction="U",this.jr2=this.jr1,this.tribe.push("PL")}fixedSapling(t){this.jr1=t,this.plont(),this.name=W.minionName(2),this.imgKey="SPL"}fixedSeedling(t){this.jr1=t,this.plont(),this.name=W.minionName(1),this.imgKey="SDL"}fixedTreefolk(t){this.jr1=t,this.plont(),this.name=W.minionName(3),this.imgKey="TFK"}tfFight(){this.jr1=this.boof91421,this.plont(),this.name=W.minionName(3),this.imgKey="TFK"}dozer(){this.faction="U",this.name="Dozer, the Awakened",this.jr1=this.level*3+6,this.jr2=this.jr1,this.initAggro=!0,this.initBT=!0,this.tribe.push("BR"),this.imgKey=this.code,this.text=`${this.name} enters play with health equal to the Dozer, the Dormant it replaced.`}feywing(){this.faction="U",this.name="Feywing",this.jr1=9,this.jr2=this.jr1,this.initMobile=1,this.tribe.push("DG")}funguy(){this.name="Funguy",this.jr1=this.lValN([6,12,14]),this.plont(),this.minLevel=1,this.maxLevel=3,this.hints=["DL"]}raptor(){this.faction="U",this.name="Raptor",this.jr1=1,this.jr2=1,this.tribe.push("DN")}uspirit(){this.faction="U",this.name="Spirit",this.jr1=this.boof4610,this.jr2=this.lValN([3,4,6]),this.tribe.push("ST")}zimus(){this.faction="N",this.rarity="L",this.name="Zimus, the Returned",this.tribe.push("ZB"),this.jr1=10,this.jr2=5,this.imgKey=`${"ZTU"}2`}zomb(t,i){this.faction="N",this.rarity="T",this.name="Zombie",this.tribe.push("ZB"),this.jr1=t,this.jr2=i,this.imgKey="ZMB"}commonZomb(){const t=this.boof359;this.zomb(t,t)}threeZomb(){this.zomb(3,3)}strideZomb(){this.zomb(this.lValN([4,8,10]),this.boof369)}}class ct extends gt{lookup(t){return{["AGP"]:{c:()=>this.apulseC(),z:()=>this.apulseZ(),e:e=>this.apulseE(e)},["CTL"]:{c:()=>this.ctlC(),z:()=>this.ctlZ(),e:e=>this.ctlE(e)},["COD"]:{c:()=>this.chontC(),z:()=>this.chontZ(),e:e=>this.chontE(e)},["DCR"]:{c:()=>this.dcurC(),z:()=>this.dcurZ(),e:e=>this.dcurE(e)},["DGZ"]:{c:()=>this.digiC(),z:()=>this.digiZ(),e:e=>this.digiE(e)},["EPD"]:{c:()=>this.epiC(),z:()=>this.epiZ(),e:e=>this.epiE(e)},["FRR"]:{c:()=>this.roarC(),z:()=>this.roarZ(),e:e=>this.roarE(e)},["FSM"]:{c:()=>this.fstormC(),z:()=>this.fstormZ(),e:e=>this.fstormE(e)},["GRM"]:{c:()=>this.mealC(),z:()=>this.mealZ(),e:e=>this.mealE(e)},["IBF"]:{c:()=>this.ibfC(),z:()=>this.ibfZ(),e:e=>this.ibfE(e)},["IVS"]:{c:()=>this.infvC(),z:()=>this.infvZ(),e:e=>this.infvE(e)},["LOD"]:{c:()=>this.lashC(),z:()=>this.lashZ(),e:e=>this.lashE(e)},["NSH"]:{c:()=>this.shriekC(),z:()=>this.shriekZ(),e:e=>this.shriekE(e)},["NCL"]:{c:()=>this.noxC(),z:()=>this.noxZ(),e:e=>this.noxE(e)},["OWF"]:{c:()=>this.oforceC(),z:()=>this.oforceZ(),e:e=>this.oforceE(e)},["PLW"]:{c:()=>this.palwC(),z:()=>this.palwZ(),e:e=>this.palwE(e)},["PTB"]:{c:()=>this.phyC(),z:()=>this.phyZ(),e:e=>this.phyE(e)},["PYS"]:{c:()=>this.pyreC(),z:()=>this.pyreZ(),e:e=>this.pyreE(e)},["ROK"]:{c:()=>this.rokC(),z:()=>this.rokZ(),e:e=>this.rokE(e)},["STS"]:{c:()=>this.stsC(),z:()=>this.stsZ(),e:e=>this.stsE(e)},["SNP"]:{c:()=>this.pulseC(),z:()=>this.pulseZ(),e:e=>this.pulseE(e)},["SRD"]:{c:()=>this.sradC(),z:()=>this.sradZ(),e:e=>this.sradE(e)},["TST"]:{c:()=>this.talinC(),z:()=>this.talinZ(),e:e=>this.talinE(e)},["TRN"]:{c:()=>this.turnbC(),z:()=>this.turnbZ(),e:e=>this.turnbE(e)},["VCH"]:{c:()=>this.verdC(),z:()=>this.verdZ(),e:e=>this.verdE(e)},["WOD"]:{c:()=>this.wdenC(),z:()=>this.wdenZ(),e:e=>this.wdenE(e)}}[t]}constructor(t){super(t),this.lookup(this.cardCode()).c()}image(t){return this.cardCode()==="NSH"?this.leveledImage(t):this.fixedImage(t)}playTargets(){const t=super.playTargets(),i=w.boardTarget("CARD",this.code);return t.push(i),t}handleAction(t){this.logSpell(),this.lookup(this.cardCode()).z(),L.spellCast()}ddf7(t){return this.lookup(this.cardCode()).e(t)}apulseC(){this.faction="A",this.rarity="C",this.name="Aegis Pulse",this.text=`Each friendly creature gets Armor ${this.boof234}.`}apulseZ(){const t=this.boof234;g.ddf1().forEach(i=>{i.addArmor(t)})}apulseE(t){const i=c.actionEval(t,"ST"),e=k.getActiveB(),a=this.boof234;return i.vectors=g.laneIdx.map(h=>c.ddp1(e,h,{arm:a})),i}get ctlboof(){return(this.level-1)*2}ctlC(){this.faction="T",this.rarity="L",this.name="Call the Lightning";const t=this.level>1?` gets ${y.jr9(this.ctlboof,0)} this turn. Those creatures`:"";this.text=`Each friendly creature${t} battles an additional time this turn.`}ctlZ(){const t=this.ctlboof;g.ddf1().forEach(i=>{const e=c.mod("AT",t,this.code);e.expiry="ET",i.addMod(e),i.extraBattles+=1})}ctlE(t){const i=c.actionEval(t,"ST"),e=k.getActiveB(),a=this.ctlboof;return i.vectors=g.laneIdx.map(h=>c.ddp1(e,h,{att:a})),i}chontC(){this.faction="T",this.rarity="R",this.name="Chant of Dragonwatch",this.maxLevel=1,this.text="Deal X damaage to each enemy creature, where X is your rank."}chontZ(){const t=k.getActive().rank,i=Date.now();g.qEnemyCreats().forEach(e=>{e.hurtDirect(t,this.code,i)})}chontE(t){const i=k.getActive(),e=i.rank,a=c.actionEval(t,"ST");return a.vectors=g.laneIdx.map(h=>c.ddp1(!i.isPlayerA,h,{dmg:e})),a}dcurC(){this.faction="N",this.rarity="R",this.name="Death Current";const t=this.lValS(["a level 2 or lower","an","two"]);this.text=`Destroy ${t} enemy creature at random.`}dcurZ(){const t=this.dCurrHunter(),i=t.length;if(i>0){const e=v.randInt(0,i),a=Date.now();U.destroy(t[e],this.code,a),this.level===3&&i>1&&(t.splice(e,1),U.destroy(t[v.randInt(0,i-1)],this.code,a))}}dcurE(t){let i;const e=this.dCurrHunter(),a=e.length;if(a>0){const h=v.randInt(0,a);if(i=c.ddp8(t,e[h]),this.level===3&&a>1){e.splice(h,1);const u=c.ddp1(e[0].owner,v.randInt(0,a-1));u.destroy=!0,i.vectors.push(u)}}else i=c.actionEval(t,"NR");return i}dCurrHunter(){const t=c.crEnemyTarg();return t.level=w.ddf2(this.level+1),g.creatByTarget(t)}digiC(){this.faction="A",this.rarity="R",this.name="Digitize",this.text=`Each enemy creature gets ${y.jr9(this.boof4812n,0)}.`}digiZ(){const t=this.boof4812n;g.qEnemyCreats().forEach(i=>{i.buff(t,0)})}digiE(t){const i=c.actionEval(t,"ST"),e=!k.getActiveB(),a=this.boof4812n;return i.vectors=g.laneIdx.map(h=>c.ddp1(e,h,{att:a})),i}epiC(){this.faction="N",this.rarity="H",this.name="Epidemic";const t=this.boof246n;this.text=`Each enemy creature gets ${y.jr9(t,t)}.`}epiZ(){const t=this.boof246n,i=c.crEnemyTarg();g.creatByTarget(i).forEach(e=>{e.buff(t,t)})}epiE(t){const i=c.actionEval(t,"ST"),e=!k.getActiveB(),a=this.boof246n;return i.vectors=g.laneIdx.map(h=>c.ddp1(e,h,{att:a,hlt:a})),i}roarC(){this.faction="U",this.rarity="H",this.name="Ferocious Roar";const t=this.boof235;this.text=`Each friendly creature gets ${y.jr9(t,t,this.level===3)}${this.level===3?", and Breakthrough":""}.`}roarZ(){const t=this.boof235;g.ddf1().forEach(i=>{i.buff(t,t),this.level===3&&(i.breakthrough=!0)})}roarE(t){const i=c.actionEval(t,"ST"),e=k.getActiveB(),a=this.boof235,h=this.level===3;return i.vectors=g.laneIdx.map(u=>c.ddp1(e,u,{att:a,hlt:a,brt:h})),i}get fszap(){return this.level+4}fstormC(){this.faction="T",this.rarity="H",this.name="Firestorm",this.text=`Deal ${this.fszap} damage to each creature.`}fstormZ(){const t=this.fszap,i=Date.now();g.qActiveCreats().forEach(e=>{e.hurtDirect(t,this.code,i)})}fstormE(t){const i=c.actionEval(t,"ST"),e=this.fszap;return i.vectors=[!0,!1].map(a=>g.laneIdx.map(h=>c.ddp1(a,h,{dmg:e}))).flat(),i}mealC(){this.faction="N",this.rarity="R",this.name="Group Meal";const t=this.boof234;this.text=`Each enemy creature gets ${y.jr9(-1*t,0)}. Each friendly creature gets ${y.jr9(t,0)}.`}mealZ(){const t=this.boof234,i=k.getActiveB();g.qActiveCreats().forEach(e=>{const a=e.owner===i?t:-1*t;e.buff(a,0)})}mealE(t){const i=c.actionEval(t,"ST"),e=this.boof234,a=k.getActiveB();return i.vectors=[!0,!1].map(h=>g.laneIdx.map(u=>c.ddp1(h,u,{att:h===a?e:-e}))).flat(),i}ibfC(){this.faction="T",this.rarity="R",this.name="Iceborn Fortitude",this.text=`Each friendly creature gets ${y.jr9(0,this.boof3510)}.`}ibfZ(){const t=this.boof3510,i=c.crFriendTarg();g.creatByTarget(i).forEach(e=>{e.buff(0,t)})}ibfE(t){const i=c.actionEval(t,"ST"),e=k.getActiveB(),a=this.boof3510;return i.vectors=g.laneIdx.map(h=>c.ddp1(e,h,{hlt:a})),i}infvC(){this.faction="N",this.rarity="C",this.name="Infernal Visage";const t=this.boof246;this.text=`Each friendly creature in a side lane gets ${y.jr9(t,t,!0)} and Regenerate ${this.level}.`}infvZ(){const t=this.boof246,i=c.crFriendTarg();i.lanes=[1,5],g.creatByTarget(i).forEach(e=>{e.buff(t,t),e.addRegen(this.level)})}infvE(t){const i=c.actionEval(t,"ST"),e=k.getActiveB(),a=this.boof246;return i.vectors=[1,5].map(h=>c.ddp1(e,h,{att:a,hlt:a,rgn:this.level})),i}lashC(){this.faction="U",this.rarity="L",this.name="Lash of Demara",this.text=`Each enemy creature gets Poison ${this.level+2}.`}lashZ(){const t=this.level+2;g.qEnemyCreats().forEach(i=>{i.addPoison(t)})}lashE(t){const i=c.actionEval(t,"ST"),e=!k.getActiveB(),a=this.level+2;return i.vectors=g.laneIdx.map(h=>c.ddp1(e,h,{psn:a})),i}shriekC(){this.faction="N",this.rarity="L",this.name="Nethershriek";const t=this.boof4815;this.text=`Spawn a ${t}/${t} Netherdrake.`}shriekZ(){g.birthCreature(`${"NDR"}${this.level}`,"S",k.getActiveB())}shriekE(t){const i=k.getActiveB(),e=g.emptyLanes(i);if(e.length===0)return c.actionEval(t,"NR");{const a=c.ddp4(t,i,e[v.randInt(0,e.length)],`${"NDR"}${this.level}`);return a.type="ST",a.hints.push("ENF"),a}}noxC(){this.faction="U",this.rarity="R",this.name="Noxious Cloud",this.text=`Each enemy creature gets Poison ${this.boof246}.`}noxZ(){const t=this.boof246;g.qEnemyCreats().forEach(i=>{i.addPoison(t)})}noxE(t){const i=c.actionEval(t,"ST"),e=!k.getActiveB(),a=this.boof246;return i.vectors=g.laneIdx.map(h=>c.ddp1(e,h,{psn:a})),i}oforceC(){this.faction="A",this.rarity="H",this.name="Overwhelming Force",this.text="Each friendly creature gets "+(this.level===3?"2x attack.":`${y.jr9(this.boof369,0)}.`)}oforceZ(){if(this.level===3)g.ddf1().forEach(t=>{t.buff(t.attack,0)});else{const t=this.boof369;g.ddf1().forEach(i=>{i.buff(t,0)})}}oforceE(t){const i=c.actionEval(t,"ST"),e=k.getActiveB(),a=this.lValN([3,6,ae+1]);return i.vectors=g.laneIdx.map(h=>c.ddp1(e,h,{att:a})),i}palwC(){this.faction="A",this.rarity="R",this.name="Palladium Wave",this.maxLevel=1,this.text=`Each enemy creature gets ${y.jr9(-1,0).replaceAll("1","X")}, where X is two times your rank.`}palwZ(){const t=-2*k.getActive().rank;g.qEnemyCreats().forEach(i=>{i.buff(t,0)})}palwE(t){const i=k.getActive(),e=-2*i.rank,a=c.actionEval(t,"ST");return a.vectors=g.laneIdx.map(h=>c.ddp1(!i.isPlayerA,h,{att:e})),a}phyC(){this.faction="U",this.rarity="H",this.name="Phytobomb";const t=W.minionBuff(this.level);this.text=`Put a ${t}/${t} ${W.minionName(this.level)} into each players available lanes.`}phyZ(){const t=W.minionCode(this.level),i=Date.now();[!0,!1].forEach(e=>{g.emptyLanes(e).forEach(a=>{g.birthCreature(t,"P",e,a,i)})})}phyE(t){const i=W.minionCode(this.level),e=c.actionEval(t,"ST");return e.vectors=[!0,!1].map(a=>g.emptyLanes(a).map(h=>{const u=c.evalVectorCreatureFromCode(i,a,h);return u.type="R",u})).flat(),e}pyreC(){this.faction="T",this.rarity="C",this.name="Pyre Song",this.text=`Each friendly creature deals ${this.level} damage to each enemy creature.`}pyreZ(){const t=this.level,i=Date.now(),e=g.qEnemyCreats();g.ddf1().forEach(a=>{e.forEach(h=>{h.hurtDirect(t,a.code,i)})})}pyreE(t){const i=c.actionEval(t,"ST"),e=!k.getActiveB(),a=this.level*g.ddf1().length;return i.vectors=g.laneIdx.map(h=>c.ddp1(e,h,{dmg:a})),i}rokC(){this.faction="T",this.rarity="L",this.name="Rage of Kadras",this.overload=!0,this.maxLevel=1,this.text="Each friendly Tempys creature gets +1 attack and deals damage equal to its attack to the creature opposing it."}rokZ(){const t=Date.now(),i=c.crFriendTarg();i.faction="T",g.creatByTarget(i).forEach(e=>{e.buff(1,0);const a=e.opposed;a&&a.hurtDirect(e.attack,e.code,t)})}rokE(t){const i=c.actionEval(t,"ST"),e=c.crFriendTarg();return e.faction="T",i.vectors=g.creatByTarget(e).map(a=>{const h=c.ddp1(a.owner,a.lane,{att:1}),u=a.opposed;return u?[h,c.ddp1(u.owner,u.lane,{dmg:a.attack+1})]:[h]}).flat(),i}get spboof(){return(this.level+1)*-2}pulseC(){this.faction="A",this.rarity="H",this.name="Sonic Pulse",this.text=`Each enemy creature gets ${y.jr9(this.spboof,0)}.`}pulseZ(){const t=this.spboof;g.qEnemyCreats().forEach(i=>{i.buff(t,0)})}pulseE(t){const i=c.actionEval(t,"ST"),e=!k.getActiveB(),a=this.spboof;return i.vectors=g.laneIdx.map(h=>c.ddp1(e,h,{att:a})),i}sradC(){this.faction="U",this.rarity="C",this.name="Soothing Radiance",this.text=`Heal ${this.boof61224} damage from each friendly creature.`}sradZ(){const t=this.boof61224;g.ddf1().forEach(i=>{i.heal(t)})}sradE(t){const i=c.actionEval(t,"ST"),e=k.getActiveB(),a=this.boof3612;return i.vectors=g.laneIdx.map(h=>c.ddp1(e,h,{hlt:a})),i}stsC(){this.faction="U",this.rarity="C",this.name="Scatter the Seeds";const t=W.minionBuff(this.level);this.text=`Spawn three ${t}/${t} ${W.minionName(this.level)}s.`}stsZ(){const t=W.minionCode(this.level),i=Date.now();[1,2,3].forEach(e=>{g.birthCreature(t,"S",k.getActiveB(),void 0,i)})}stsE(t){const i=c.actionEval(t,"ST"),e=Math.min(3,g.emptyLanes(k.getActiveB()).length),a=W.minionBuff(this.level),h=this.ddp9(1,a+a,a,0);return i.bonus=h*e,i}talinC(){this.faction="T",this.rarity="C",this.name="Talin Stampede",this.text=`Each friendly Tempys creature gets ${y.jr9(this.boof5814,0)} this turn.`}talinZ(){const t=this.boof5814;this.talinTarg().forEach(i=>{const e=c.mod("AT",t);e.expiry="ET",i.addMod(e)})}talinE(t){const i=c.actionEval(t,"ST"),e=k.getActiveB(),a=this.boof5814;return i.vectors=this.talinTarg().map(h=>c.ddp1(e,h.lane,{att:a})),i}talinTarg(){const t=c.crFriendTarg();return t.faction="T",g.creatByTarget(t)}turnbC(){this.faction="T",this.rarity="H",this.name="Turnabout",this.isFree=this.level===3;const t=this.boof235;this.text=`Each creature gets ${y.jr9(t,-1*t)} this turn.`}turnbZ(){const t=this.boof235,i=-1*t;g.qActiveCreats().forEach(e=>{const a=c.mod("AT",t),h=c.mod("HL",i),u=c.mod("MH",i);a.expiry="ET",h.expiry="ET",u.expiry="ET",e.addMod(a),e.addMod(h),e.addMod(u)})}turnbE(t){const i=c.actionEval(t,"ST"),e=this.boof235,a=-1*e;return i.vectors=[!0,!1].map(h=>g.laneIdx.map(u=>c.ddp1(h,u,{att:e,hlt:a}))).flat(),i}verdC(){this.faction="U",this.rarity="H",this.name="Verdant Charge";const t=this.verdb;this.text=`Each friendly creature gets ${y.jr9(t,t,!0)} and Regenerate ${t}.`}verdZ(){const t=this.verdb;g.ddf1().forEach(i=>{i.buff(t,t),i.addRegen(t)})}verdE(t){const i=c.actionEval(t,"ST"),e=k.getActiveB(),a=this.verdb;return i.vectors=g.laneIdx.map(h=>c.ddp1(e,h,{att:a,hlt:a,rgn:a})),i}get verdb(){return this.lValN([1,3,6])}wdenC(){this.faction="U",this.rarity="R",this.name="Whispers of Dendris",this.maxLevel=1,this.text=`Each friendly creature gets ${y.jr9(1,1).replaceAll("1","X")}, where X is your rank.`}wdenZ(){const t=k.getActive().rank;g.ddf1().forEach(i=>{i.buff(t,t)})}wdenE(t){const i=k.getActive(),e=i.rank,a=c.actionEval(t,"ST");return a.vectors=g.laneIdx.map(h=>c.ddp1(i.isPlayerA,h,{att:e,hlt:e})),a}}class Fi extends M{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Borean Mystic",this.jr1=this.boof4814,this.jr2=this.boof71118,this.tribe.push("WN","AS"),this.text=`Activate: Move another friendly creature to an available lane adjacent to ${this.name}.`}canActivate(t){return this.emptySloots(t).length>0&&this.buddies(t.id).length>0}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){const i=v.deTil(t.param);if(i[0]==="P1")C.ddf5(this.getCardActions(t));else{const e=g.jr5(i[1]);g.jr5(i[2]).move(t.lane),e.endActivation()}}getCardActions(t,i){if(t.actionKey==="ACTV"){const e=i??g.jr5(t.param),a=this.buddies(e.id);return a.push(C.cancelAction()),a}else if(t.actionKey==="CARD"){const e=g.ddf6(t),a=v.deTil(t.param),h=g.jr5(a[1]),u=this.emptySloots(h,e.id);return u.push(C.cancelAction()),u}return super.getCardActions(t,i)}ddf7(t){if(t.actionKey==="ACTV")return c.ddp5(t);{const i=v.deTil(t.param);if(i[0]==="P1")return c.ddp5(t);{const e=c.actionEval(t,"ST"),a=t,h=g.jr5(i[2]),u=c.ddp1(h.owner,h.lane);return u.moveTo=a.lane,e.vectors.push(u),e}}}emptySloots(t,i=""){return C.emptyAdjacents(t,v.enTil("P2",t.id,i))}buddies(t){return w.toActions(c.crFriendNotMeActTarg("CARD",t,this.code,v.enTil("P1",t)))}}class Pi extends M{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Bron, Wild Tamer",this.jr1=this.boof4712,this.jr2=this.jr1,this.tribe.push("TK"),this.hints=["OL","LKV"];const i=this.boof357;this.bonus={exist:this.ddp9(0,i*2,0,0)},this.text=`Upgrade Dinosaur: Replace Bron with a level ${this.level} Dino Knight.~When this ${y.dbdtap()}, heal ${i} damage from each other friendly creature.`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("UP",this.code),e.jr4("DM",this.code),e}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&!i.creatureTarg&&i.creatureSrc&&i.source.id===t.creatId}return!1}jr8(t){if(t.trigger.type==="UP"){const e=t.event.replacedCreat;e.isTribe("DN")&&g.birthCreature("DNK"+this.level,"R",e.owner,e.lane),E.triggerDone()}else if(t.trigger.type==="DM"){const i=this.boof357,e=c.crNotMeTarg(t.creatId);e.player=k.toTarget(t.ownerPlayerA),g.creatByTarget(e).forEach(h=>h.heal(i)),E.triggerDone()}}}class Bi extends M{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Brightsteel Gargoyle",this.jr1=this.boof61016,this.jr2=this.jr1,this.initMobile=1,this.tribe.push("RB"),this.text=`At the end of your turn, ${this.name} gets Armor ${this.boof2510} and Defender until the end of the next turn.`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("PT",this.code),e}ddf8(t){return t.trigger.type==="PT"?t.event.playerA===t.ownerPlayerA:!1}jr8(t){const i=c.mod("AR",this.boof2510,t.creatId),e=c.mod("DF",!0,t.creatId);i.expiry="ET",e.expiry="ET";const a=g.jr5(t.creatId);a.addMod(i),a.addMod(e),E.triggerDone()}}class Hi extends gt{constructor(t){super(t),this.faction="A",this.rarity="R",this.name="Bullwark Bash",this.text=`Deal damage equal to ${this.level>1?this.level+"x ":""}the Armor on a friendly creature to an enemy creature.`}playTargets(){const t=super.playTargets();if(this.enemyTargActions().length>0){const i=c.crFriendActTarg("CARD",this.code,"P1");i.hasArmor=!0,t.push(i)}return t}handleAction(t){const i=v.deTil(t.param);if(i[0]==="P1")C.ddf5(this.getCardActions(t));else{this.logSpell();const e=g.ddf6(t),a=g.jr5(i[1]);e.hurtDirect(a.armor*this.level,this.code),L.spellCast()}}enemyTargActions(t=""){const i=c.crEnemyActTarg("CARD",this.code,v.enTil("P2",t));return w.toActions(i)}getCardActions(t){const i=g.ddf6(t),e=this.enemyTargActions(i.id);return e.push(C.cancelAction()),e}ddf7(t){const i=v.deTil(t.param);if(i[0]==="P1")return c.ddp5(t);{const e=t,a=g.jr5(i[1]);return c.ddp2(t,e.playerA,e.lane,{dmg:a.armor*this.level})}}}class Ni extends M{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Byzerak Spitemage",this.jr1=this.boof369,this.jr2=this.level,this.initAggro=!0,this.tribe.push("HM"),this.hints=["ALN"],this.bonus={play:this.level*.5},this.text=`Allied Nekrium: When ${this.name} ${y.dbdtac(this.level)}, destroy it.`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("FR",this.code),e}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&i.creatureSrc&&i.creatureTarg&&i.dmg>0&&i.source.id===t.creatId&&w.levelTestCommon(i.target.level,this.level)}else return!1}jr8(t){if(t.trigger.type==="FR"&&L.allied("N")){const i=g.jr5(t.creatId);i.jr4("DM",this.code),i.hints.push("BX"),i.changed=!0}else if(t.trigger.type==="DM"){const e=t.event.target;e.status==="A"&&U.destroy(e,this.code)}E.triggerDone()}}class Mi extends M{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Cercee, Hand of Varna",this.jr1=this.lValN([1,3,5,7]),this.jr2=this.lValN([6,10,20,40]),this.tribe.push("FB"),this.initMobile=1,this.maxLevel=4,this.level===4?this.hints=["OL","LKV","BX"]:this.hints=["OP","BX"];const i=this.level===4?`When ${this.name} ${y.dbdtap()}, deal damamge to that player equal to their health.~`:"";this.text=i+`When ${this.name} ${y.dbdtac(this.level)}, destroy that creature.`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("DM",this.code),e}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;if(i.battle&&i.creatureSrc&&i.source.id===t.creatId){if(this.level===4)return!0;if(i.creatureTarg){const e=i.target;return w.levelTestCommon(e.level,this.level)}}}return!1}jr8(t){const i=t.event;if(i.creatureTarg){const e=i.target;e.status==="A"&&U.destroy(e,this.code)}else{const e=k.toPlayer(i.target);k.ddf3(e,e.health,this.code)}E.triggerDone()}}class ot extends M{lookup(t){return{["BSW"]:{c:()=>this.bswC(),a:(e,a)=>this.bswA(e,a),t:e=>this.bswT(e),e:(e,a)=>this.bswE(e,a)},["CCS"]:{c:()=>this.ccsC(),a:(e,a)=>this.ccsA(e,a),t:e=>this.ccsT(e),e:(e,a)=>this.ccsE(e,a)},["CGL"]:{c:()=>this.clordC(),a:(e,a)=>this.clordA(e,a),t:e=>this.clordT(e),e:(e,a)=>this.clordE(e,a)},["CSH"]:{c:()=>this.cswC(),a:(e,a)=>this.cswA(e,a),t:e=>this.cswT(e),e:(e,a)=>this.cswE(e,a)},["FFU"]:{c:()=>this.ffuC(),a:(e,a)=>this.ffuA(e,a),t:e=>this.ffuT(e),e:(e,a)=>this.ffuE(e,a)},["FFS"]:{c:()=>this.ffsC(),a:(e,a)=>this.ffsA(e,a),t:e=>this.ffsT(e),e:(e,a)=>this.ffsE(e,a)},["FSH"]:{c:()=>this.fssC(),a:(e,a)=>this.fssA(e,a),t:e=>this.fssT(e),e:(e,a)=>this.fssE(e,a)},["KOD"]:{c:()=>this.kodC(),a:(e,a)=>this.kodA(e,a),t:e=>this.kodT(e),e:(e,a)=>this.kodE(e,a)},["LOD"]:{c:()=>this.lashC(),a:(e,a)=>this.lashA(e,a),t:e=>this.lashT(e),e:(e,a)=>this.lashE(e,a)},["MBP"]:{c:()=>this.mbpC(),a:(e,a)=>this.mbpA(e,a),t:e=>this.mbpT(e),e:(e,a)=>this.mbpE(e,a)},["MND"]:{c:()=>this.mndC(),a:(e,a)=>this.mndA(e,a),t:e=>this.mndT(e),e:(e,a)=>this.mndE(e,a)},["NCS"]:{c:()=>this.ncsC(),a:(e,a)=>this.ncsA(e,a),t:e=>this.ncsT(e),e:(e,a)=>this.ncsE(e,a)},["NXG"]:{c:()=>this.nxgC(),a:(e,a)=>this.nxgA(e,a),t:e=>this.nxgT(e),e:(e,a)=>this.nxgE(e,a)},["NFF"]:{c:()=>this.nffC(),a:(e,a)=>this.nffA(e,a),t:e=>this.nffT(e),e:(e,a)=>this.nffE(e,a)},["OHV"]:{c:()=>this.orghC(),a:(e,a)=>this.orghA(e,a),t:e=>this.orghT(e),e:(e,a)=>this.orghE(e,a)},["PPM"]:{c:()=>this.ppmC(),a:(e,a)=>this.ppmA(e,a),t:e=>this.ppmT(e),e:(e,a)=>this.ppmE(e,a)},["PSC"]:{c:()=>this.pcoilC(),a:(e,a)=>this.pcoilA(e,a),t:e=>this.pcoilT(e),e:(e,a)=>this.pcoilE(e,a)},["SGF"]:{c:()=>this.siggyC(),a:(e,a)=>this.siggyA(e,a),t:e=>this.siggyT(e),e:(e,a)=>this.siggyE(e,a)},["SRM"]:{c:()=>this.srmdC(),a:(e,a)=>this.srmdA(e,a),t:e=>this.srmdT(e),e:(e,a)=>this.srmdE(e,a)},["SSA"]:{c:()=>this.ssaC(),a:(e,a)=>this.ssaA(e,a),t:e=>this.ssaT(e),e:(e,a)=>this.ssaE(e,a)},["SWM"]:{c:()=>this.swmC(),a:(e,a)=>this.swmA(e,a),t:e=>this.swmT(e),e:(e,a)=>this.swmE(e,a)},["UCM"]:{c:()=>this.ucmC(),a:(e,a)=>this.ucmA(e,a),t:e=>this.ucmT(e),e:(e,a)=>this.ucmE(e,a)},["UIM"]:{c:()=>this.uimC(),a:(e,a)=>this.uimA(e,a),t:e=>this.uimT(e),e:(e,a)=>this.uimE(e,a)},["WMR"]:{c:()=>this.warmC(),a:(e,a)=>this.warmA(e,a),t:e=>this.warmT(e),e:(e,a)=>this.warmE(e,a)},["WWR"]:{c:()=>this.wwrC(),a:(e,a)=>this.wwrA(e,a),t:e=>this.wwrT(e),e:(e,a)=>this.wwrE(e,a)},["WFS"]:{c:()=>this.wfsC(),a:(e,a)=>this.wfsA(e,a),t:e=>this.wfsT(e),e:(e,a)=>this.wfsE(e,a)},["XSH"]:{c:()=>this.shambC(),a:(e,a)=>this.shambA(e,a),t:e=>this.shambT(e),e:(e,a)=>this.shambE(e,a)},["ZPM"]:{c:()=>this.zpmC(),a:(e,a)=>this.zpmA(e,a),t:e=>this.zpmT(e),e:(e,a)=>this.zpmE(e,a)}}[t]}targAction(t,i,e){this.lookup(t).a(i,e)}actTargets(t,i){return this.lookup(t).t(i)}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const e=super.jr3(t,i);return this.doubleActivator()&&(e.jr4("TS",this.code),this.addExtraActivate(e)),e}ddf7(t){if(t.actionKey==="ACTV")return c.ddp5(t);{const i=t,e=g.jr5(t.param);return this.lookup(this.cardCode()).e(i,e)}}canActivate(t){return w.toActions(this.actTargets(this.cardCode(),t)).length>0}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){const i=g.ddf6(t),e=g.jr5(t.param);this.targAction(this.cardCode(),i,e),e.endActivation(),this.doubleActivator()&&e.hasMod(e.id)&&(e.removeMod(e.id),e.activationAvailable=!0,pe.whatNext())}makeCreatTarg(t){return c.crActTarg("CARD",this.code,t.id)}makeOtherCreatTarg(t){const i=this.makeCreatTarg(t);return i.notMe=t.id,i}doubleActivator(){return this.code==="CGL"+"3"||this.code==="XSH"+"3"}addExtraActivate(t){const i=c.mod("EA",!0,t.id);i.expiry="ET",t.addMod(i)}ddf8(t){return Pt.extractCardCode(t.trigger.logicCode)==="KOD"&&(t.trigger.type==="PT"||t.trigger.type==="VN")?!0:t.trigger.type==="TS"&&this.doubleActivator()?t.event.playerA===t.ownerPlayerA:super.ddf8(t)}jr8(t){if(t.trigger.type==="VN"){const i=t.event;g.birthCreature(i.creature.code,"S",t.ownerPlayerA),E.triggerDone()}else if(t.trigger.type==="PT"){const i=t.trigger.customCode,e=g.jr5(t.creatId);e.triggers.filter(h=>h.customCode===i).forEach(h=>e.removeTrigger(h)),E.triggerDone()}else if(t.trigger.type==="TS"){const i=g.jr5(t.creatId);this.addExtraActivate(i),E.triggerDone()}}getCardActions(t,i){const e=i??g.jr5(t.param);return w.toActions([this.actTargets(this.cardCode(),e),w.buttonTarget("CANC")])}bswC(){this.faction="T",this.rarity="C",this.name="Borean Stormweaver",this.jr1=this.boof4816,this.jr2=this.lValN([6,10,20]),this.tribe.push("GT");const t=this.boof234;this.text=`Activate: Deal ${t} damage to a creature.`}bswT(t){return this.makeCreatTarg(t)}bswA(t,i){t.hurtDirect(this.boof234,this.code)}bswE(t,i){return c.ddp2(t,t.playerA,t.lane,{dmg:this.boof234})}ccsC(){this.faction="N",this.rarity="C",this.name="Catacomb Spider",this.jr1=this.boof4815,this.jr2=this.lValN([5,10,16]),this.tribe.push("SP");const t=this.boof246;this.text=`Activate:  Give another creature Regenerate ${t}.`}ccsT(t){const i=this.makeOtherCreatTarg(t);return i.canRegen=!0,i}ccsA(t,i){t.addRegen(this.boof246)}ccsE(t,i){return c.ddp2(t,t.playerA,t.lane,{rgn:this.boof246})}clordC(){this.faction="N",this.rarity="H",this.name="Contagion Lord",this.jr1=this.boof4914,this.jr2=this.jr1+3,this.tribe.push("AB"),this.text="Activate, destroy a friendly Abomination: You may play an additional card this turn.",this.level===3&&(this.text+="~You may use this ability twice per turn.")}clordT(t){const i=this.makeCreatTarg(t);return i.player="F",i.tribe="AB",i}clordA(t,i){U.destroy(t,this.code),x.turn.regularPlays+=1}clordE(t,i){const e=c.ddp7(t,t.playerA,t.lane,"SD");return e.bonus=this.ddp6(this.level),e}cswC(){this.faction="A",this.rarity="C",this.name="Cypien Shieldwarden",this.jr1=this.boof4610,this.jr2=this.boof61016,this.tribe.push("HM");const t=this.boof246;this.text=`Activate: Give a creature Armor ${t} this turn.`}cswT(t){const i=this.makeCreatTarg(t);return i.canArmor=!0,i}cswA(t,i){const e=c.mod("AR",this.boof246,i.id);e.expiry="ET",t.addMod(e)}cswE(t,i){return c.ddp2(t,t.playerA,t.lane,{arm:this.boof246})}ffuC(){this.faction="T",this.rarity="H",this.name="Firefist Uranti",this.jr1=this.boof357,this.jr2=this.boof71116,this.tribe.push("FR","YT"),this.text=`Activate: Deal damage equal to ${this.name}'s attack to a creature.`}ffuT(t){return this.makeCreatTarg(t)}ffuA(t,i){t.hurtDirect(i.attack,this.code)}ffuE(t,i){return c.ddp2(t,t.playerA,t.lane,{dmg:i.attack})}ffsC(){this.faction="T",this.rarity="R",this.name="Flamefury Shaman",this.jr1=this.boof369,this.jr2=this.boof81116,this.tribe.push("HM"),this.text=`Activate: Grant another creature ${y.jr9(this.jr1,0)} this turn.`}ffsT(t){return this.makeOtherCreatTarg(t)}ffsA(t,i){const e=c.mod("AT",this.jr1,i.id);e.expiry="ET",t.addMod(e)}ffsE(t,i){return c.actionEvalBuffN(t,t.playerA,t.lane,this.jr1)}fssC(){this.faction="T",this.rarity="R",this.name="Flamestoke Shaman",this.jr1=this.boof61218,this.jr2=this.boof3712,this.tribe.push("HM"),this.text=`Activate: Grant an adjacent ${y.levelGateText(this.level,!0)}creature Aggressive.`}fssT(t){const i=this.makeCreatTarg(t);return i.level=w.ddf2(this.level),i.lanes=t.adjacent,i.player=k.toTarget(t.owner),i}fssA(t,i){t.aggressive=!0}fssE(t,i){return c.ddp2(t,t.playerA,t.lane,{agr:!0})}kodC(){this.faction="N",this.rarity="L",this.name="Keeper of the Damned",this.jr1=this.boof5815,this.jr2=this.boof61017,this.tribe.push("ZB"),this.text=`Activate: another friendly ${y.levelGateText(this.level,!0)}creature gets "Vengeance: Spawn this" this turn.`}kodT(t){const i=this.makeOtherCreatTarg(t);return i.level=w.ddf2(this.level),i.player=k.toTarget(t.owner),i}kodA(t,i){const e=t.jr4("VN",this.code);e.customCode=i.id,e.changes=!0;const a=t.jr4("PT",this.code);a.customCode=i.id}kodE(t,i){const e=c.ddp2(t,t.playerA,t.lane,void 0,"LZ");return e.bonus=2,e}lashC(){this.faction="U",this.rarity="L",this.name="Demara, Herald of Affliction",this.jr1=14,this.jr2=20,this.tribe.push("NG"),this.hints=["ENS"],this.text="Activate: Give an enemy creature with Poison Defender.~Forge: Each enemy creature gets Poison 6."}lashT(t){const i=this.makeCreatTarg(t);return i.player="E",i.hasPoison=!0,i.canDefender=!0,i}lashA(t,i){t.defender=!0}lashE(t,i){return c.ddp2(t,t.playerA,t.lane,{noD:!0})}mbpC(){this.faction="U",this.rarity="H",this.name="Mossbeard Patriarch",this.jr1=this.boof137,this.jr2=this.boof81220,this.tribe.push("PL"),this.text=`Activate: Give another creature ${y.jr9(0,this.boof468)}.`}mbpT(t){return this.makeOtherCreatTarg(t)}mbpA(t,i){t.buff(0,this.boof468)}mbpE(t,i){return c.actionEvalBuffN(t,t.playerA,t.lane,0,this.boof468)}mndC(){this.faction="A",this.rarity="R",this.name="Munitions Drone",this.jr1=this.boof137,this.jr2=this.boof6814,this.tribe.push("RB"),this.text=`Activate: Give another creature ${y.jr9(this.boof357,0)}.`}mndT(t){return this.makeOtherCreatTarg(t)}mndA(t,i){t.buff(this.boof357,0)}mndE(t,i){return c.actionEvalBuffN(t,t.playerA,t.lane,this.boof357)}ncsC(){this.faction="N",this.rarity="R",this.name="Necroslime",this.jr1=this.boof4814,this.jr2=this.jr1,this.tribe.push("OZ");const t=this.boof248;this.text=`Activate, deal 3 damage to another friendly creature: ${this.name} gets ${y.jr9(t,t)}.`}ncsT(t){const i=this.makeOtherCreatTarg(t);return i.player="F",i}ncsA(t,i){const e=this.boof248;t.hurtDirect(3,this.code),i.buff(e,e)}ncsE(t,i){const e=this.boof248,a=c.actionEvalBuffC(t,i,e,e);return a.vectors.push(c.ddp1(t.playerA,t.lane,{dmg:3})),a}nxgC(){this.faction="A",this.rarity="H",this.name="Nexus Gunner",this.jr1=this.boof51015,this.jr2=this.jr1,this.tribe.push("HM"),this.text=`Activate: Give a creature ${y.jr9(this.jr1,0)}. Use this ability only if ${this.name} is in the center lane.`}nxgT(t){const i=this.makeCreatTarg(t);return t.lane!==3&&(i.cardCode="???"),i}nxgA(t,i){t.buff(this.jr1,0)}nxgE(t,i){return c.actionEvalBuffN(t,t.playerA,t.lane,this.jr1,0)}nffC(){this.faction="U",this.rarity="L",this.name="Nuada, Faith's Flourish",this.jr1=this.boof246,this.jr2=this.lValN([10,17,25]),this.initDefend=!0,this.tribe.push("TK");const t=this.boof91421;this.text=`Activate: Replace a friendly Plant with a ${t}/${t} Treefolk.`}nffT(t){const i=this.makeCreatTarg(t);return i.player="F",i.tribe="PL",i}nffA(t,i){g.birthCreature(`${"TFF"}${this.level}`,"R",i.owner,t.lane)}nffE(t,i){const e=c.ddp4(t,t.playerA,t.lane,`${"TFF"}${this.level}`);return e.hints=["RE"],e}orghC(){this.faction="N",this.rarity="R",this.name="Organ Harvester",this.jr1=this.lValN([2,6,9]),this.jr2=this.jr1+1,this.tribe.push("AB"),this.text=`Activate, destroy ${this.name}: Destroy a ${y.levelGateText(this.level,!0)}creature.`}orghT(t){const i=this.makeOtherCreatTarg(t);return i.level=w.ddf2(this.level),i}orghA(t,i){const e=Date.now();U.destroy(t,this.code,e),U.destroy(i,this.code,e)}orghE(t,i){const e=c.ddp7(t,t.playerA,t.lane),a=c.ddp1(i.owner,i.lane);return a.destroy=!0,e.vectors.push(a),e}ppmC(){this.faction="A",this.rarity="R",this.name="Palladium Pulsemage",this.jr1=this.lValN([2,8,12]),this.jr2=this.lValN([7,12,15]),this.tribe.push("HM"),this.text=`Activate: give a creature ${y.jr9(this.boof4812n,0)} this turn.`}ppmT(t){return this.makeCreatTarg(t)}ppmA(t,i){const e=c.mod("AT",this.boof4812n,i.id);e.expiry="ET",t.addMod(e)}ppmE(t,i){return c.actionEvalBuffN(t,t.playerA,t.lane,this.boof4812n)}pcoilC(){this.faction="U",this.rarity="R",this.name="Poisoncoil",this.jr1=this.boof357,this.jr2=this.boof71013,this.initDefend=!0,this.tribe.push("SN"),this.text=`Activate: Give another creature Poison ${this.boof135}.`}pcoilT(t){return this.makeOtherCreatTarg(t)}pcoilA(t,i){t.addPoison(this.boof135)}pcoilE(t,i){return c.ddp2(t,t.playerA,t.lane,{psn:this.boof135})}siggyC(){this.faction="N",this.rarity="H",this.name="Sigmund Fraud",this.jr1=this.boof357,this.jr2=this.lValN([9,14,19]),this.initDefend=!0,this.tribe.push("AB");const t=this.boof4812;this.text=`Activate, destroy another friendly creature: Deal ${t} damage to the enemy player and you gain ${t} health.`}siggyT(t){const i=this.makeOtherCreatTarg(t);return i.player="F",i}siggyA(t,i){U.destroy(t,this.code);const e=this.boof4812;k.ddf3(!i.owner,e,this.code),k.healPlayer(i.owner,e)}siggyE(t,i){const e=c.ddp7(t,t.playerA,t.lane,"SD"),a=this.boof4812;return e.vectors.push(c.evalVectorPlayerDmg(!i.owner,a),c.evalVectorPlayerLife(i.owner,a)),e}srmdC(){this.faction="N",this.rarity="H",this.name="Sorrow Maiden",this.jr1=this.boof4814,this.jr2=this.jr1+2,this.tribe.push("HM"),this.bonus={exist:this.ddp6()},this.text=`Activate: Destroy an enemy creature with ${this.jr1} or less attack.`}srmdT(t){const i=this.makeCreatTarg(t);return i.player="E",i.maxAttack=this.jr1,i}srmdA(t,i){U.destroy(t,this.code)}srmdE(t,i){return c.ddp7(t,t.playerA,t.lane)}ssaC(){this.faction="N",this.rarity="H",this.name="Spitesower Acolyte",this.jr1=this.boof234,this.jr2=this.lValN([8,14,22]),this.tribe.push("HM");const t=this.boof246n;this.text=`Activate, deal ${-t} damage to ${this.name}: Give a creature ${y.jr9(t,t)}.`}ssaT(t){return this.makeCreatTarg(t)}ssaA(t,i){const e=this.boof246n,a=Date.now();i.hurtDirect(-e,this.code,a),t.buff(e,e,a)}ssaE(t,i){const e=this.boof246n,a=c.actionEvalBuffN(t,t.playerA,t.lane,e,e);return a.vectors.push(c.ddp1(i.owner,i.lane,{dmg:-e})),a}swmC(){this.faction="A",this.rarity="R",this.name="Steelwelder Medic",this.jr1=this.lValN([3,5,13]),this.jr2=this.boof61014,this.tribe.push("HM"),this.text=`Activate: Give another creature Armor ${this.level}.`}swmT(t){const i=this.makeOtherCreatTarg(t);return i.canArmor=!0,i}swmA(t,i){t.addArmor(this.level)}swmE(t,i){return c.ddp2(t,t.playerA,t.lane,{arm:this.level})}ucmC(){this.faction="T",this.rarity="R",this.name="Uranti Cryomancer",this.jr1=this.boof247,this.jr2=this.lValN([8,13,17]),this.tribe.push("IC","YT"),this.text=`Activate: Deal ${this.boof135} damage to a creature.`}ucmT(t){return this.makeCreatTarg(t)}ucmA(t,i){t.hurtDirect(this.boof135,this.code)}ucmE(t,i){return c.ddp2(t,t.playerA,t.lane,{dmg:this.boof135})}uimC(){this.faction="T",this.rarity="C",this.name="Uranti Icemage",this.jr1=this.lValN([2,5,9]),this.jr2=this.lValN([8,13,20]),this.tribe.push("IC","YT"),this.text="Activate: Negate Defender this turn."}uimT(t){return this.makeCreatTarg(t)}uimA(t,i){const e=c.mod("ND",!0,i.id);e.expiry="ET",t.addMod(e)}uimE(t,i){return c.ddp2(t,t.playerA,t.lane,{noD:!0})}warmC(){this.faction="A",this.rarity="H",this.name="War Merchant",this.jr1=this.boof468,this.jr2=this.jr1,this.initDefend=!0,this.tribe.push("HM"),this.text=`Activate: Give a creature in a center lane ${y.jr9(this.jr1,this.level===3?this.jr1:0)}.`}warmT(t){const i=this.makeCreatTarg(t);return i.lanes=3,i}warmA(t,i){t.buff(this.jr1,this.level===3?this.jr1:0)}warmE(t,i){return c.actionEvalBuffN(t,t.playerA,t.lane,this.jr1,this.level===3?this.jr1:0)}wwrC(){this.faction="U",this.rarity="C",this.name="Weirwood Ranger",this.jr1=this.boof51015,this.jr2=this.jr1-1,this.tribe.push("HM"),this.text=`Activate: Give another creature ${y.jr9(this.level,this.level)}.`}wwrT(t){return this.makeOtherCreatTarg(t)}wwrA(t,i){t.buff(this.level,this.level)}wwrE(t,i){return c.actionEvalBuffN(t,t.playerA,t.lane,this.level,this.level)}wfsC(){this.faction="N",this.rarity="H",this.name="Witherfrost Succubus",this.jr1=this.boof147,this.jr2=this.boof61018,this.tribe.push("DM");const t=-this.boof357;this.text=`Activate: Give a creature ${y.jr9(t,t)} this turn.`}wfsT(t){return this.makeCreatTarg(t)}wfsA(t,i){const e=-this.boof357,a=c.mod("AT",e,i.id);a.expiry="ET",t.addMod(a);const h=c.mod("HL",e,i.id);h.expiry="ET",t.addMod(h);const u=c.mod("MH",e,i.id);u.expiry="ET",t.addMod(u)}wfsE(t,i){const e=-this.boof357;return c.actionEvalBuffN(t,t.playerA,t.lane,e,e)}shambC(){this.faction="N",this.rarity="L",this.name="Xithian Shambler",this.jr1=this.boof369,this.jr2=this.jr1+1,this.tribe.push("AB");let t="",i=1;this.level===3&&(t="~You may use this ability twice per turn.",i=2),this.text=`Activate, destroy an adjacent creature: ${this.name} moves into that creature's lane, then gets +attack and +health equal to that creature's attack and health.${t}`,this.hints=["LJ"];const e=this.avgCreatureStats();this.bonus={exist:this.ddp9(-1,e[0]+e[1],e[0],0)*i}}shambT(t){const i=c.crFriendActTarg("CARD",this.code,t.id);return i.lanes=t.adjacent,i}shambA(t,i){const e=t.attack,a=t.health;U.destroy(t,this.code),i.move(t.lane),i.buff(e,a)}shambE(t,i){const e=g.ddf6(t),a=c.actionEvalBuffC(t,i,e.attack,e.health),h=c.ddp1(e.owner,e.lane);h.destroy=!0;const u=c.ddp1(i.owner,i.lane);return u.moveTo=t.lane,a.vectors.push(h,u),a}zpmC(){this.faction="T",this.rarity="R",this.name="Zephyr Mage",this.jr1=this.boof4813,this.jr2=this.boof61017,this.tribe.push("WN","AS"),this.text=`Activate: Give another ${y.levelGateText(this.level,!0)}creature Mobility ${this.level}.`}zpmT(t){const i=this.makeOtherCreatTarg(t);return i.level=w.ddf2(this.level),i.canMove=!0,i}zpmA(t,i){t.addMobility(this.level)}zpmE(t,i){const e=c.ddp2(t,t.playerA,t.lane);return e.bonus=.5,e}}class Ve extends M{lookup(t){return{["CMF"]:{c:()=>this.aconC(),f:(e,a)=>this.aconF(e,a),e:e=>this.aconE(e)},["FLH"]:{c:()=>this.flhC(),f:(e,a)=>this.flhF(e,a),e:e=>this.flhE(e)},["TBB"]:{c:()=>this.tbbC(),f:(e,a)=>this.tbbF(e,a),e:e=>this.tbbE(e)}}[t]}targAction(t,i,e){this.lookup(t).f(i,e)}targEval(t,i){return this.lookup(t).e(i)}playTarg;optional=!1;notme=!1;ftext="";constructor(t){super(t),this.playTarg=c.crActTarg("CARD",this.code,""),this.lookup(this.cardCode()).c(),this.text="Assault: "+this.ftext,this.ftext=""}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("AS",this.code);return a.interactive=!0,e}handleAction(t){const i=g.ddf6(t),e=g.jr5(t.param);this.targAction(this.cardCode(),i,e),C.actionDone(!0)}jr8(t){this.notme&&(this.playTarg.notMe=t.creatId);const i=w.toActions(this.playTarg);i.length>0?(i.forEach(e=>{e.param=t.creatId}),this.optional&&i.push(C.noneEndTrigger()),C.ddf5(i)):E.triggerDone()}ddf7(t){return this.targEval(this.cardCode(),t)}aconC(){this.faction="N",this.rarity="R",this.name="Calamity Fiend",this.jr1=this.boof4814,this.jr2=this.lValN([5,10,16]),this.tribe.push("DM"),this.hints=["ENS","OL"];const t=this.boof234;this.bonus={play:this.ddp9(0,2*t,t,0)},this.playTarg.player="E",this.ftext=`Give an enemy creature ${y.jr9(-t,-t)}.`}aconF(t,i){const e=-this.boof234;t.buff(e,e)}aconE(t){const i=-this.boof234;return c.actionEvalBuffN(t,t.playerA,t.lane,i,i)}flhC(){this.faction="T",this.rarity="C",this.name="Firelight Hunter",this.jr1=this.boof468,this.jr2=this.jr1-2,this.tribe.push("HM"),this.hints=["ENS","OL"],this.bonus={play:this.ddp9(0,this.jr1,0,0)},this.playTarg.player="E",this.ftext=`Deal ${this.jr1} to an enemy creature.`}flhF(t,i){t.hurtDirect(this.jr1,this.code)}flhE(t){return c.ddp2(t,t.playerA,t.lane,{dmg:this.jr1})}tbbC(){this.faction="T",this.rarity="R",this.name="Totembound Berserker",this.jr1=this.boof81318,this.jr2=this.lValN([2,4,10]),this.tribe.push("GT"),this.hints=["ENS","OL"],this.playTarg.player="E",this.playTarg.level=w.ddf2(this.level),this.optional=!0,this.ftext=`You may move an enemy ${y.levelGateText(this.level,!0)}creature to the space opposing ${this.name}.`}tbbF(t,i){i.opposed||t.move(g.oppositeLane(i.lane))}tbbE(t){const i=g.jr5(t.param),e=c.actionEval(t,"MC"),a=c.ddp1(t.playerA,t.lane);return a.moveTo=g.oppositeLane(i.lane),e.vectors.push(a),e}}class mt extends M{lookup(t){return{["AGC"]:{c:()=>this.aconC(),f:(e,a)=>this.aconF(e,a),e:e=>this.aconE(e)},["BTI"]:{c:()=>this.binvC(),f:(e,a)=>this.binvF(e,a),e:e=>this.binvE(e)},["BSR"]:{c:()=>this.bsrC(),f:(e,a)=>this.bsrF(e,a),e:e=>this.bsrE(e)},["BAW"]:{c:()=>this.bawC(),f:(e,a)=>this.bawF(e,a),e:e=>this.bawE(e)},["CHA"]:{c:()=>this.chaC(),f:(e,a)=>this.chaF(e,a),e:e=>this.chaE(e)},["CCR"]:{c:()=>this.ccC(),f:(e,a)=>this.ccF(e,a),e:e=>this.ccE(e)},["FRI"]:{c:()=>this.friC(),f:(e,a)=>this.friF(e,a),e:e=>this.friE(e)},["FRV"]:{c:()=>this.freavC(),f:(e,a)=>this.freavF(e,a),e:e=>this.freavE(e)},["GLF"]:{c:()=>this.gfiendC(),f:(e,a)=>this.gfiendF(e,a),e:e=>this.gfiendE(e)},["GRW"]:{c:()=>this.grwC(),f:(e,a)=>this.grwF(e,a),e:e=>this.grwE(e)},["GHT"]:{c:()=>this.grhC(),f:(e,a)=>this.grhF(e,a),e:e=>this.grhE(e)},["MMH"]:{c:()=>this.houndC(),f:(e,a)=>this.houndF(e,a),e:e=>this.houndE(e)},["MXW"]:{c:()=>this.mtxC(),f:(e,a)=>this.mtxF(e,a),e:e=>this.mtxE(e)},["NGB"]:{c:()=>this.ngbC(),f:(e,a)=>this.ngbF(e,a),e:e=>this.ngbE(e)},["PHS"]:{c:()=>this.phxsC(),f:(e,a)=>this.phxsF(e,a),e:e=>this.phxsE(e)},["STD"]:{c:()=>this.stdC(),f:(e,a)=>this.stdF(e,a),e:e=>this.stdE(e)},["SEV"]:{c:()=>this.surzC(),f:(e,a)=>this.surzF(e,a),e:e=>this.surzE(e)},["VNF"]:{c:()=>this.vnfC(),f:(e,a)=>this.vnfF(e,a),e:e=>this.vnfE(e)},["WBY"]:{c:()=>this.wbyC(),f:(e,a)=>this.wbyF(e,a),e:e=>this.wbyE(e)},["WBU"]:{c:()=>this.wbuC(),f:(e,a)=>this.wbuF(e,a),e:e=>this.wbuE(e)},["XDH"]:{c:()=>this.dogsC(),f:(e,a)=>this.dogsF(e,a),e:e=>this.dogsE(e)}}[t]}targAction(t,i,e){this.lookup(t).f(i,e)}targEval(t,i){return this.lookup(t).e(i)}playTarg;optional=!1;notme=!1;ftext="";forges=!0;constructor(t){super(t),this.playTarg=c.crActTarg("CARD",this.code,""),this.lookup(this.cardCode()).c(),this.forges&&(this.text="Forge: "+this.ftext),this.ftext=""}jr3(t,i){const e=super.jr3(t,i);if(this.forges){const a=e.jr4("FR",this.code);a.interactive=!0}return e}handleAction(t){const i=g.ddf6(t),e=g.jr5(t.param);this.targAction(this.cardCode(),i,e),C.actionDone(!0)}jr8(t){this.notme&&(this.playTarg.notMe=t.creatId);const i=w.toActions(this.playTarg);i.length>0?(i.forEach(e=>{e.param=t.creatId}),this.optional&&i.push(C.noneEndTrigger()),C.ddf5(i)):E.triggerDone()}ddf7(t){return this.targEval(this.cardCode(),t)}aconC(){this.faction="A",this.rarity="C",this.name="Aegis Conscript",this.jr1=this.boof3612,this.jr2=this.boof6915,this.tribe.push("HM"),this.hints=["FRO"],this.bonus={play:this.ddp9(0,this.boof248,0,0)},this.playTarg.canArmor=!0,this.playTarg.player="F",this.ftext=`Give a friendly creature Armor ${this.boof124}.`}aconF(t,i){t.addArmor(this.boof124)}aconE(t){return c.ddp2(t,t.playerA,t.lane,{arm:this.boof124})}binvC(){this.faction="A",this.rarity="C",this.name="Battletech Inventor",this.jr1=this.boof369,this.jr2=this.jr1,this.tribe.push("MM"),this.hints=["ENS"],this.playTarg.player="E",this.ftext=`Give an enemy creature ${y.jr9(-this.jr1,0)}.`,this.bonus={play:this.ddp9(0,this.jr1,this.jr1,0)}}binvF(t,i){t.buff(-this.jr1,0)}binvE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,-this.jr1)}bsrC(){if(this.faction="N",this.rarity="R",this.name="Bonescythe Reaver",this.jr1=this.boof5813,this.jr2=this.boof3712,this.tribe.push("AB"),this.hints=["ENS"],this.bonus={play:this.ddp6()},this.forges=this.level>1,this.forges){const t=this.level-1;this.hints=["ENS"],this.bonus={play:this.ddp6(t)},this.playTarg.level=w.ddf2(t),this.playTarg.player="E",this.ftext=`You may destroy a ${y.levelGateText(t)} enemy creature.`,this.optional=!0}else this.hints=["LV"]}bsrF(t,i){U.destroy(t,this.code)}bsrE(t){return c.ddp7(t,t.playerA,t.lane)}bawC(){this.faction="U",this.rarity="R",this.name="Brambleaxe Warrior",this.jr1=this.boof61014,this.jr2=this.jr1-4,this.tribe.push("HM"),this.hints=["FRO"];const t=this.avgCreatureStats()[0];this.bonus={play:this.ddp9(0,0,t,t)},this.ftext="Give a creature Breakthrough this turn."}bawF(t,i){const e=c.mod("BT",!0,i.id);e.expiry="ET",t.addMod(e)}bawE(t){return c.ddp2(t,t.playerA,t.lane,{brt:!0})}chaC(){this.faction="U",this.rarity="R",this.name="Chistlehearth Archer",this.jr1=this.boof2510,this.jr2=this.jr1+7,this.tribe.push("HM"),this.hints=["ENS"];const t=this.boof4816;this.bonus={play:this.ddp9(0,t/2,0,0)},this.playTarg.player="E",this.playTarg.hasMobility=!0,this.ftext=`Deal ${t} damage to an enemy creature with Mobility. Negate Mobility from that creature.`}chaF(t,i){t.hurtDirect(this.boof4816,this.code),t.negateMobility=!0}chaE(t){return c.ddp2(t,t.playerA,t.lane,{dmg:this.boof4816})}ccC(){this.faction="N",this.rarity="C",this.name="Corpse Crawler",this.jr1=this.boof81220,this.jr2=this.jr1+1,this.tribe.push("AB"),this.hints=["SD"],this.playTarg.player="F",this.ftext="Destroy a friendly creature."}ccF(t,i){U.destroy(t,this.code)}ccE(t){return c.ddp7(t,t.playerA,t.lane,"SD")}friC(){this.faction="T",this.rarity="C",this.name="Flamerift Instigator",this.jr1=this.lValN([7,12,17]),this.jr2=this.jr1-5,this.tribe.push("GT"),this.ftext="Negate Defender from a creature."}friF(t,i){t.negateDefender=!0}friE(t){return c.ddp2(t,t.playerA,t.lane,{noD:!0})}freavC(){if(this.faction="N",this.rarity="H",this.name="Fleshreaver",this.jr1=this.boof6915,this.jr2=this.boof235,this.tribe.push("AB"),this.forges=this.level>1,this.forges){const t=this.level-1;this.hints=["ENS"],this.bonus={play:this.ddp6(t)},this.consistent=!0,this.playTarg.level=w.ddf2(t),this.playTarg.player="E",this.ftext=`You may destroy a ${y.levelGateText(t)} enemy creature.`,this.optional=!0}else this.hints=["LV"]}freavF(t,i){U.destroy(t,this.code)}freavE(t){return c.ddp7(t,t.playerA,t.lane)}get fiendBof(){return this.lValN([-1,-2,-5])}gfiendC(){this.faction="N",this.rarity="C",this.name="Gloomfiend",this.jr1=this.boof4812,this.jr2=this.jr1,this.tribe.push("AB"),this.hints=["ENS"],this.playTarg.player="E";const t=this.fiendBof;this.ftext=`You may give an enemy creature ${y.jr9(t,t)}.`,this.optional=!0,this.bonus={play:this.ddp9(0,-2*t,-t,0)}}gfiendF(t,i){const e=this.fiendBof;t.buff(e,e)}gfiendE(t){const i=this.fiendBof;return c.actionEvalBuffN(t,t.playerA,t.lane,i,i)}grwC(){this.faction="N",this.rarity="C",this.name="Gloomreaper Witch",this.jr1=this.boof5915,this.jr2=this.jr1,this.tribe.push("HM"),this.hints=["ENS"],this.bonus={play:this.ddp6()/4};const t=this.boof147;this.playTarg.maxAttack=t,this.playTarg.player="E",this.ftext=`You may destroy an enemy creature with ${t} or less attack.`,this.optional=!0}grwF(t,i){U.destroy(t,this.code)}grwE(t){return c.ddp7(t,t.playerA,t.lane)}grhC(){this.faction="U",this.rarity="C",this.name="Grove Huntress",this.jr1=this.boof4711,this.jr2=this.jr1-1,this.tribe.push("HM"),this.playTarg.player="F";const t=this.boof135;this.ftext=`Give a friendly creature ${y.jr9(t,t)}.`,this.bonus={play:this.ddp9(0,t*2,t,0)}}grhF(t,i){const e=this.boof135;t.buff(e,e)}grhE(t){const i=this.boof135;return c.actionEvalBuffN(t,t.playerA,t.lane,i,i)}houndC(){this.faction="T",this.rarity="C",this.name="Magma Hound",this.jr1=this.boof4813,this.jr2=this.jr1-1,this.tribe.push("ER","EL"),this.hints=["ENS"];const t=this.boof246;this.optional=!0,this.playTarg.player="E",this.ftext=`You may deal ${t} damage to an enemy creature.`,this.bonus={play:this.ddp9(0,t,0,0)}}houndF(t,i){t.hurtDirect(this.boof246,this.code)}houndE(t){return c.ddp2(t,t.playerA,t.lane,{dmg:this.boof246})}mtxC(){this.faction="A",this.rarity="C",this.name="Matrix Warden",this.jr1=this.lValN([3,8,12]),this.jr2=this.jr1,this.tribe.push("RB");const t=this.boof3510;this.playTarg.player="F",this.ftext=`Give a friendly creature ${y.jr9(t,0)}.`,this.bonus={play:this.ddp9(0,t,t,0)}}mtxF(t,i){t.buff(this.boof3510,0)}mtxE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,this.boof3510)}ngbC(){this.faction="T",this.rarity="C",this.name="Nargath Bruiser",this.jr1=this.boof5814,this.jr2=this.jr1-1,this.tribe.push("ER","AS");const t=this.boof248;this.playTarg.player="F",this.ftext=`Give a friendly creature ${y.jr9(0,t)}.`,this.bonus={play:this.ddp9(0,t,0,0)}}ngbF(t,i){t.buff(0,this.boof248)}ngbE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,0,this.boof248)}phxsC(){this.faction="A",this.rarity="R",this.name="Phalanx Squadron",this.jr1=this.boof3714,this.jr2=this.boof61117,this.tribe.push("HM"),this.hints=["FRO"],this.playTarg.hasArmor=!0,this.playTarg.player="F";const t=this.boof234;this.ftext=`Give a friendly creature with Armor ${y.jr9(t,t)}.`,this.bonus={play:this.ddp9(0,t,t/2,0)}}phxsF(t,i){const e=this.boof234;t.buff(e,e)}phxsE(t){const i=this.boof234;return c.actionEvalBuffN(t,t.playerA,t.lane,i,i)}stdC(){this.faction="A",this.rarity="H",this.name="Shardthief Druid",this.jr1=this.boof5813,this.jr2=this.boof81318,this.tribe.push("MM"),this.hints=["ENS"],this.playTarg.canRegen,this.playTarg.player="E",this.ftext=`Negate and remove all Regenerate from an enemy creature. ${this.name} gets that much Renerate.`,this.bonus={play:this.ddp9(0,2,0,0)}}stdF(t,i){const e=t.regen;t.negateRegen=!0,i.addRegen(e)}stdE(t){const i=g.ddf6(t);return c.ddp3(t,i,{rgn:-i.regen})}surzC(){this.faction="N",this.rarity="L",this.name="Suruzal, Emissary of Varna",this.jr1=this.boof4814,this.jr2=this.jr1-1,this.tribe.push("HM"),this.optional=!0,this.playTarg.player="F",this.playTarg.level=w.ddf2(this.level),this.ftext=`You may destroy another friendly ${y.levelGateText(this.level,!0)}creature. If you do, spawn a copy of it.`}surzF(t,i){const e=Date.now();U.destroy(t,this.code,e),g.birthCreature(t.code,"S",i.owner,void 0,e)}surzE(t){const i=g.ddf6(t),e=O.getCard(i.code),a=e.jr3(t.playerA,t.lane),h=c.ddp7(t,t.playerA,t.lane);return h.bonus=Rt.creatValueFormula(a)+1+e.bonusExist(),h}vnfC(){this.faction="U",this.rarity="R",this.name="Venomfang",this.jr1=this.boof61014,this.jr2=this.jr1-2,this.tribe.push("SN");const t=this.boof246;this.playTarg.player="E",this.ftext=`Give an enemy creature Poison ${t}.`,this.bonus={play:this.ddp9(0,t,0,0)}}vnfF(t,i){t.addPoison(this.boof246)}vnfE(t){return c.ddp2(t,t.playerA,t.lane,{psn:this.boof246})}wbyC(){this.faction="T",this.rarity="R",this.name="Wallbreaker Yeti",this.jr1=this.boof4712,this.jr2=this.boof71116,this.tribe.push("ER","YT"),this.hints=["ENS"],this.bonus={play:this.ddp6()/4},this.playTarg.player="E",this.playTarg.level=w.ddf2(this.level),this.playTarg.hasDefender=!0,this.ftext=`You may destroy a ${y.levelGateText(this.level,!0)}enemy creature with Defender.`,this.optional=!0}wbyF(t,i){U.destroy(t,this.code)}wbyE(t){return c.ddp7(t,t.playerA,t.lane)}wbuC(){this.faction="T",this.rarity="C",this.name="Warbringer Uranti",this.jr1=this.boof3711,this.jr2=this.jr1,this.tribe.push("LT","YT"),this.hints=["FRO"];const t=this.boof4812;this.notme=!0,this.playTarg.player="F",this.ftext=`Give another friendly creature ${y.jr9(t,0)} this turn.`,this.bonus={play:this.ddp9(0,t,t,0)}}wbuF(t,i){const e=c.mod("AT",this.boof4812,i.id);e.expiry="ET",t.addMod(e)}wbuE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,this.boof4812)}dogsC(){this.faction="N",this.rarity="R",this.name="Xithian Direhound",this.jr1=4,this.jr2=4,this.tribe.push("AB"),this.hints=["ENS"],this.overload=!0,this.maxLevel=1,this.optional=!0,this.playTarg.player="E",this.ftext=`You may give an enemy creature ${y.jr9(-4,-4)}.`,this.bonus={play:this.ddp9(0,8,4,0)}}dogsF(t,i){t.buff(-4,-4)}dogsE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,-4,-4)}}class $ extends gt{lookup(t){return{["AGW"]:{c:()=>this.awingC(),z:e=>this.awingZ(e),e:e=>this.awingE(e)},["ASG"]:{c:()=>this.asurgeC(),z:e=>this.asurgeZ(e),e:e=>this.asurgeE(e)},["ATZ"]:{c:()=>this.anatC(),z:e=>this.anatZ(e),e:e=>this.anatE(e)},["AQE"]:{c:()=>this.aqatC(),z:e=>this.aqatZ(e),e:e=>this.aqatE(e)},["ABL"]:{c:()=>this.ablC(),z:e=>this.ablZ(e),e:e=>this.ablE(e)},["BTM"]:{c:()=>this.botC(),z:e=>this.botZ(e),e:e=>this.botE(e)},["CSU"]:{c:()=>this.csurgeC(),z:e=>this.csurgeZ(e),e:e=>this.csurgeE(e)},["CTW"]:{c:()=>this.cullC(),z:e=>this.cullZ(e),e:e=>this.cullE(e)},["CTV"]:{c:()=>this.cultC(),z:e=>this.cultZ(e),e:e=>this.cultE(e)},["CAG"]:{c:()=>this.cypaC(),z:e=>this.cypaZ(e),e:e=>this.cypaE(e)},["CBS"]:{c:()=>this.cypbC(),z:e=>this.cypbZ(e),e:e=>this.cypbE(e)},["DBT"]:{c:()=>this.dreadC(),z:e=>this.dreadZ(e),e:e=>this.dreadE(e)},["DYB"]:{c:()=>this.drybC(),z:e=>this.drybZ(e),e:e=>this.drybE(e)},["ETN"]:{c:()=>this.elnC(),z:e=>this.elnZ(e),e:e=>this.elnE(e)},["ENP"]:{c:()=>this.enpC(),z:e=>this.enpZ(e),e:e=>this.enpE(e)},["ENR"]:{c:()=>this.rageC(),z:e=>this.rageZ(e),e:e=>this.rageE(e)},["EXD"]:{c:()=>this.expdmC(),z:e=>this.expdmZ(e),e:e=>this.expdmE(e)},["FIN"]:{c:()=>this.feralC(),z:e=>this.feralZ(e),e:e=>this.feralE(e)},["FVA"]:{c:()=>this.fervassC(),z:e=>this.fervassZ(e),e:e=>this.fervassE(e)},["FLN"]:{c:()=>this.flncC(),z:e=>this.flncZ(e),e:e=>this.flncE(e)},["FFL"]:{c:()=>this.ffldC(),z:e=>this.ffldZ(e),e:e=>this.ffldE(e)},["FZS"]:{c:()=>this.frozC(),z:e=>this.frozZ(e),e:e=>this.frozE(e)},["GTH"]:{c:()=>this.ghastC(),z:e=>this.ghastZ(e),e:e=>this.ghastE(e)},["GCR"]:{c:()=>this.crushC(),z:e=>this.crushZ(e),e:e=>this.crushE(e)},["HAR"]:{c:()=>this.hartC(),z:e=>this.hartZ(e),e:e=>this.hartE(e)},["IFR"]:{c:()=>this.izftC(),z:e=>this.izftZ(e),e:e=>this.izftE(e)},["JPK"]:{c:()=>this.jpC(),z:e=>this.jpZ(e),e:e=>this.jpE(e)},["LBR"]:{c:()=>this.lbrandC(),z:e=>this.lbrandZ(e),e:e=>this.lbrandE(e)},["LYS"]:{c:()=>this.shartC(),z:e=>this.shartZ(e),e:e=>this.shartE(e)},["MPH"]:{c:()=>this.morphC(),z:e=>this.morphZ(e),e:e=>this.morphE(e)},["MSC"]:{c:()=>this.sculptC(),z:e=>this.sculptZ(e),e:e=>this.sculptE(e)},["NNS"]:{c:()=>this.nanoC(),z:e=>this.nanoZ(e),e:e=>this.nanoE(e)},["NSL"]:{c:()=>this.natselC(),z:e=>this.natselZ(e),e:e=>this.natselE(e)},["NCF"]:{c:()=>this.nflayC(),z:e=>this.nflayZ(e),e:e=>this.nflayE(e)},["NCV"]:{c:()=>this.nviveC(),z:e=>this.nviveZ(e),e:e=>this.nviveE(e)},["OEX"]:{c:()=>this.oexpC(),z:e=>this.oexpZ(e),e:e=>this.oexpE(e)},["PTR"]:{c:()=>this.pwtorC(),z:e=>this.pwtorZ(e),e:e=>this.pwtorE(e)},["PSG"]:{c:()=>this.psurgeC(),z:e=>this.psurgeZ(e),e:e=>this.psurgeE(e)},["PMS"]:{c:()=>this.pslamC(),z:e=>this.pslamZ(e),e:e=>this.pslamE(e)},["ROG"]:{c:()=>this.rotgC(),z:e=>this.rotgZ(e),e:e=>this.rotgE(e)},["SAP"]:{c:()=>this.sapC(),z:e=>this.sapZ(e),e:e=>this.sapE(e)},["SVO"]:{c:()=>this.soathC(),z:e=>this.soathZ(e),e:e=>this.soathE(e)},["SOC"]:{c:()=>this.scythC(),z:e=>this.scythZ(e),e:e=>this.scythE(e)},["SOA"]:{c:()=>this.soaC(),z:e=>this.soaZ(e),e:e=>this.soaE(e)},["SOD"]:{c:()=>this.sodC(),z:e=>this.sodZ(e),e:e=>this.sodE(e)},["SOT"]:{c:()=>this.sotC(),z:e=>this.sotZ(e),e:e=>this.sotE(e)},["SHG"]:{c:()=>this.shgrC(),z:e=>this.shgrZ(e),e:e=>this.shgrE(e)},["SNB"]:{c:()=>this.snbC(),z:e=>this.snbZ(e),e:e=>this.snbE(e)},["SHV"]:{c:()=>this.sharvC(),z:e=>this.sharvZ(e),e:e=>this.sharvE(e)},["SRP"]:{c:()=>this.sreapC(),z:e=>this.sreapZ(e),e:e=>this.sreapE(e)},["STR"]:{c:()=>this.sttorC(),z:e=>this.sttorZ(e),e:e=>this.sttorE(e)},["STO"]:{c:()=>this.sptorC(),z:e=>this.sptorZ(e),e:e=>this.sptorE(e)},["SOV"]:{c:()=>this.sovC(),z:e=>this.sovZ(e),e:e=>this.sovE(e)},["STN"]:{c:()=>this.stbrnC(),z:e=>this.stbrnZ(e),e:e=>this.stbrnE(e)},["STP"]:{c:()=>this.ssperC(),z:e=>this.ssperZ(e),e:e=>this.ssperE(e)},["SIN"]:{c:()=>this.sinC(),z:e=>this.sinZ(e),e:e=>this.sinE(e)},["TGL"]:{c:()=>this.tanglC(),z:e=>this.tanglZ(e),e:e=>this.tanglE(e)},["TPT"]:{c:()=>this.tpactC(),z:e=>this.tpactZ(e),e:e=>this.tpactE(e)},["TUP"]:{c:()=>this.tugC(),z:e=>this.tugZ(e),e:e=>this.tugE(e)},["TOT"]:{c:()=>this.totsC(),z:e=>this.totsZ(e),e:e=>this.totsE(e)},["TOB"]:{c:()=>this.blightC(),z:e=>this.blightZ(e),e:e=>this.blightE(e)},["TXS"]:{c:()=>this.sporeC(),z:e=>this.sporeZ(e),e:e=>this.sporeE(e)},["TCG"]:{c:()=>this.tremcC(),z:e=>this.tremcZ(e),e:e=>this.tremcE(e)},["VSK"]:{c:()=>this.vensC(),z:e=>this.vensZ(e),e:e=>this.vensE(e)},["VGR"]:{c:()=>this.vgraC(),z:e=>this.vgraZ(e),e:e=>this.vgraE(e)},["VOB"]:{c:()=>this.vobC(),z:e=>this.vobZ(e),e:e=>this.vobE(e)},["VYE"]:{c:()=>this.vembC(),z:e=>this.vembZ(e),e:e=>this.vembE(e)},["UBL"]:{c:()=>this.uboltC(),z:e=>this.uboltZ(e),e:e=>this.uboltE(e)},["WMM"]:{c:()=>this.warC(),z:e=>this.warZ(e),e:e=>this.warE(e)},["XRW"]:{c:()=>this.xwillC(),z:e=>this.xwillZ(e),e:e=>this.xwillE(e)}}[t]}cardCast(t,i){this.lookup(t).z(i)}castEval(t,i){return this.lookup(t).e(i)}playTarg;constructor(t){super(t),this.playTarg=c.crActTarg("CARD",this.code,""),this.lookup(this.cardCode()).c()}playTargets(){const t=super.playTargets();return this.cardCode()==="NSL"&&g.creatByTarget(c.crFriendTarg()).length<5||t.push(this.playTarg),t}handleAction(t){this.logSpell();const i=g.ddf6(t);this.cardCast(this.cardCode(),i),L.spellCast()}ddf7(t){return this.castEval(this.cardCode(),t)}ddf8(t){const i=Pt.extractCardCode(t.trigger.logicCode);if(i==="TOB"&&t.trigger.type==="DM"){const e=t.event;if(e.battle&&e.creatureTarg&&e.creatureSrc&&e.source.id===t.creatId)return this.level===3?!0:O.getCard(e.target.code).level<=this.level}else if((i==="ABL"||i==="OEX"||i==="VOB")&&t.trigger.type==="DM"){const e=t.event;return e.battle&&!e.creatureTarg&&e.creatureSrc&&e.source.id===t.creatId}else if((i==="FZS"||i==="IFR")&&t.trigger.type==="DM"){const e=t.event;if(e.creatureTarg&&e.target.id===t.creatId)return!0}else if(i==="DYB"&&t.trigger.type==="EF"){const e=t.event;return t.trigger.creatId!==e.creature.id&&e.creature.owner===t.ownerPlayerA}else if(i==="FVA"&&t.trigger.type==="FK"||i==="ROG"&&t.trigger.type==="DS"||i==="SHG"&&(t.trigger.type==="PT"||t.trigger.type==="VN")||(i==="IFR"||i==="OEX")&&t.trigger.type==="PT")return!0;return!1}jr8(t){const i=Pt.extractCardCode(t.trigger.logicCode);if(i==="TOB"){const a=t.event.target;U.destroy(a,this.code)}else if(i==="ABL")g.jr5(t.creatId).buff(this.level,this.level);else if(i==="FVA"){const e=g.jr5(t.creatId),a=g.searchByLane(g.oppositeLane(e.lane),!e.owner);a&&a.hurtDirect(this.boof3612,e.code)}else if(i==="FZS"||i==="IFR"&&t.trigger.type==="DM"){const e=g.jr5(t.creatId);e.status==="A"&&U.destroy(e,this.code)}else if(i==="ROG"||i==="DYB")g.jr5(t.creatId).buff(this.level,this.level);else if(i==="SHG"){if(t.trigger.type==="VN"){const e=t.event;g.birthCreature(e.creature.code,"S",t.ownerPlayerA)}else if(t.trigger.type==="PT"){const e=t.trigger.customCode,a=g.jr5(t.creatId);a.triggers.filter(u=>u.customCode===e).forEach(u=>a.removeTrigger(u))}}else if(i==="IFR"&&t.trigger.type==="PT"){const e=v.deTil(t.trigger.customCode),a=e[1];if(e[0]==="P2")t.trigger.customCode=v.enTil("P1",a);else{const h=g.jr5(t.creatId),u=h.triggers.find(m=>m.customCode===a);u&&h.removeTrigger(u),h.removeTrigger(t.trigger)}}else if(i==="OEX"){if(t.trigger.type==="DM"){const e=t.event,a=g.qEnemyCreats(),h=a.length,u=Date.now();let m;h>0&&(this.level===1?m=[a[v.randInt(0,h)]]:this.level===2?(m=a.splice(v.randInt(0,h),1),a.length>0&&m.push(a[v.randInt(0,h-1)])):m=a,m.forEach(b=>b.hurtDirect(e.dmg,this.code,u)))}else if(t.trigger.type==="PT"){const e=t.trigger.customCode,a=g.jr5(t.creatId);a.triggers.filter(u=>u.customCode===e).forEach(u=>a.removeTrigger(u))}}else if(i==="VOB"){const e=t.event;e.source.hurtDirect(e.dmg,this.code)}else super.jr8(t);E.triggerDone()}awingC(){this.faction="A",this.rarity="R",this.name="Aegis Wings",this.text=`Give a creature ${y.jr9(this.boof369,0)}. Then if that creature has the highest attack, it also gets Mobility 1 and Armor ${this.boof246}.`}awingZ(t){t.buff(this.boof369,0);const i=t.attack;this.bigchad(i)&&(t.addMobility(1),t.addArmor(this.boof246))}awingE(t){const i=g.ddf6(t),e=this.boof369,a=i.attack+e,h=this.bigchad(a)?this.boof246:0;return c.ddp2(t,t.playerA,t.lane,{att:e,arm:h},"GM")}bigchad(t){return g.qActiveCreats().every(i=>i.attack<=t)}asurgeC(){this.faction="T",this.rarity="R",this.name="Aerial Surge",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]),this.playTarg.canMove=!0,this.text=`Give a creature Mobility ${this.level}.`}asurgeZ(t){t.addMobility(this.level)}asurgeE(t){return c.actionEval(t,"ST","GM")}anatC(){this.faction="A",this.rarity="C",this.name="Anatomize",this.text=`Give a creature ${y.jr9(-this.boof4816,0)}.~You may play an additional ${this.name} this turn.`}anatZ(t){t.buff(-this.boof4816,0);const i=L.freeCard(this.code);i.condition.cardCode="ATZ"}anatE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,-this.boof4816)}aqatC(){this.faction="T",this.rarity="C",this.name="Aquatic Embrace",this.text=`Give a creature ${y.jr9(0,this.boof51015)}.`}aqatZ(t){t.buff(0,this.boof51015)}aqatE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,0,this.boof51015)}ablC(){this.faction="T",this.rarity="R",this.name="Asir's Blessing",this.text=`Give a creature "When this creature ${y.dbdtap()}, it gets ${y.jr9(this.level,this.level)}."`}ablZ(t){t.changed=!0,t.jr4("DM",this.code),t.hints.push("OL")}ablE(t){const i=c.actionEval(t,"ST","OL");return i.bonus=.5,i}botC(){this.faction="U",this.rarity="H",this.name="Botanimate",this.text=`Replace an enemy ${y.levelGateText(this.level,!0)}creature with a 3/3 Sapling.`,this.playTarg.player="E",this.playTarg.level=w.ddf2(this.level)}botZ(t){g.birthCreature(`${"BOS"}${this.level}`,"R",t.owner,t.lane)}botE(t){const i=c.ddp4(t,t.playerA,t.lane,`${"BOS"}${this.level}`);return i.hints=["RE"],i}csurgeC(){this.faction="N",this.rarity="R",this.name="Contagion Surge",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]);const t=this.boof123n;this.text=`Give a creature ${y.jr9(t,t)}.`}csurgeZ(t){const i=this.boof123n;t.buff(i,i)}csurgeE(t){const i=this.boof123n;return c.actionEvalBuffN(t,t.playerA,t.lane,i,i)}cullC(){this.faction="N",this.rarity="C",this.name="Cull the Weak";const t=this.boof4814;this.text=`Destroy a creature with ${t} or less attack.`,this.playTarg.maxAttack=t}cullZ(t){U.destroy(t,this.code)}cullE(t){return c.ddp7(t,t.playerA,t.lane)}cultC(){this.faction="U",this.rarity="H",this.name="Cultivate";const t=this.boof91421;this.text=`Replace a friendly Plant with a ${t}/${t} Treefolk.`,this.playTarg.player="F",this.playTarg.tribe="PL"}cultZ(t){g.birthCreature(`${"TFF"}${this.level}`,"R",t.owner,t.lane)}cultE(t){const i=c.ddp4(t,t.playerA,t.lane,`${"TFF"}${this.level}`);return i.hints=["RE"],i}cypaC(){this.faction="A",this.rarity="R",this.name="Cypien Augmentation",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]);const t=this.boof246;this.text=`Give a creature in a center lane ${y.jr9(t,t)}.`,this.playTarg.lanes=3}cypaZ(t){const i=this.boof246;t.buff(i,i)}cypaE(t){const i=this.boof246;return c.actionEvalBuffN(t,t.playerA,t.lane,i,i)}cypbC(){this.faction="A",this.rarity="C",this.name="Cypien Battlesuit",this.text=`Give an Alloyin creature ${y.jr9(this.boof51015,0)} and Armor ${this.boof124}.`,this.playTarg.faction="A"}cypbZ(t){t.buff(this.boof51015,0),t.addArmor(this.boof124)}cypbE(t){return c.ddp2(t,t.playerA,t.lane,{att:this.boof51015,arm:this.boof124})}dreadC(){this.faction="N",this.rarity="H",this.name="Dreadbolt",this.hints=["LV"],this.text=`Destroy a ${y.levelGateText(this.level,!0)}creature.`,this.playTarg.level=w.ddf2(this.level)}dreadZ(t){U.destroy(t,this.code)}dreadE(t){return c.ddp7(t,t.playerA,t.lane)}drybC(){this.faction="U",this.rarity="R",this.name="Dryad's Boon",this.text=`Give a creature ${y.jr9(this.level,this.level,!0)}, and "When another friendly creature enters play, this gets ${y.jr9(this.level,this.level)}."`}drybZ(t){t.buff(this.level,this.level),t.changed=!0,t.jr4("EF",this.code),t.hints.push("BF")}drybE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,this.level,this.level,"BF")}enpC(){this.faction="A",this.rarity="H",this.name="Energy Prison",this.isFree=this.level===3,this.text=`Give a ${y.levelGateText(this.level,!0)}creature Defender.`,this.playTarg.canDefender=!0}enpZ(t){t.defender=!0}enpE(t){return c.ddp2(t,t.playerA,t.lane,{def:!0})}elnC(){this.faction="A",this.rarity="C",this.name="Electro Net",this.text=`Give a creature ${y.jr9(-this.boof51015,0)}.`}elnZ(t){t.buff(-this.boof51015,0)}elnE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,-this.boof51015)}rageC(){this.faction="U",this.rarity="C",this.name="Enrage";const t=this.boof3612;this.text=`Give a creature ${y.jr9(t,t)}.`}rageZ(t){const i=this.boof3612;t.buff(i,i)}rageE(t){const i=this.boof3612;return c.actionEvalBuffN(t,t.playerA,t.lane,i,i)}expdmC(){this.faction="N",this.rarity="H",this.name="Explosive Demise",this.text=`Destroy a friendly ${y.levelGateText(this.level+1,!0)}creature.~Deal damage equal to its attack to the enemy player.${this.level===3?"~You gain that much health.":""}`,this.playTarg.level=w.ddf2(this.level+1),this.playTarg.player="F"}expdmZ(t){const i=t.attack;U.destroy(t,this.code),k.ddf3("E",i,this.code),this.level===3&&k.healPlayer("F",i)}expdmE(t){const i=g.ddf6(t),e=c.ddp8(t,i);return e.vectors.push(c.evalVectorPlayerDmg(!i.owner,i.attack)),this.level===3&&e.vectors.push(c.evalVectorPlayerDmg(i.owner,i.attack)),e}get fiboof(){return this.lValN([1,3,8])}feralC(){this.faction="U",this.rarity="C",this.name="Feral Instinct";const t=this.fiboof;this.text=`Give a creature ${y.jr9(t,t,!0)} and Breakthrough.`}feralZ(t){const i=this.fiboof;t.breakthrough=!0,t.buff(i,i)}feralE(t){const i=this.fiboof;return c.ddp2(t,t.playerA,t.lane,{att:i,hlt:i,brt:!0})}fervassC(){this.faction="T",this.rarity="H",this.name="Fervent Assault",this.playTarg.player="F",this.text=`Give a friendly creature Mobility ${this.level} and "Flank: Deal ${this.boof3612} damage to the opposing creature.`}fervassZ(t){t.changed=!0,t.addMobility(this.level),t.jr4("FK",this.code),t.hints.push("FH")}fervassE(t){return c.actionEval(t,"ST","FH")}flncC(){this.faction="T",this.rarity="R",this.name="Flame Lance";const t=this.boof579;this.text=`Deal ${t} damage to an enemy creature and ${t} damage to the enemy player.`,this.playTarg.player="E"}flncZ(t){const i=this.boof579;t.hurtDirect(i,this.code),k.ddf3("E",i,this.code)}flncE(t){const i=this.boof579,e=c.ddp2(t,t.playerA,t.lane,{dmg:i});return e.vectors.push(c.evalVectorPlayerDmg(t.playerA,i)),e}ffldC(){this.faction="A",this.rarity="C",this.name="Forcefield",this.playTarg.canArmor=!0,this.text=`Give a creature Armor ${this.boof51020} this turn.`}ffldZ(t){const i=c.mod("AR",this.boof51020,this.code);i.expiry="ET",t.addMod(i)}ffldE(t){return c.ddp2(t,t.playerA,t.lane,{arm:this.boof51020})}frozC(){this.faction="T",this.rarity="R",this.name="Frozen Solid",this.playTarg.level=w.ddf2(this.level),this.text=`Give a ${y.levelGateText(this.level,!0)}creature "When this is dealt damage, destroy it".`}frozZ(t){t.changed=!0,t.jr4("DM",this.code),t.hints.push("DD")}frozE(t){return c.actionEval(t,"ST","DD")}ghastC(){this.faction="N",this.rarity="C",this.name="Ghastly Touch";const t=-this.boof3612;this.text=`Give a creature ${y.jr9(t,t)}.`}ghastZ(t){const i=-this.boof3612;t.buff(i,i)}ghastE(t){const i=-this.boof3612;return c.actionEvalBuffN(t,t.playerA,t.lane,i,i)}crushC(){this.faction="T",this.rarity="C",this.name="Glacial Crush",this.isFree=this.level>1,this.isFree||(this.hints=["LV"]),this.playTarg.player="E",this.playTarg.hasDefender=!0,this.text=`Destroy an enemy creature with Defender.${this.level===3?" Deal damage equal to its health to the enemy player.":""}`}crushZ(t){const i=t.health;U.destroy(t,this.code),this.level===3&&k.ddf3(t.owner,i,this.code)}crushE(t){const i=g.ddf6(t),e=c.ddp8(t,i);return this.level===3&&e.vectors.push(c.evalVectorPlayerDmg(i.owner,i.health)),e}hartC(){this.faction="A",this.rarity="C",this.name="Heavy Artillery",this.text=`Give a creature ${y.jr9(this.boof51015,0)}.`}hartZ(t){t.buff(this.boof51015,0)}hartE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,this.boof51015)}izftC(){this.faction="T",this.rarity="T",this.name="Iztek's Frost",this.isFree=this.level===3,this.playTarg.level=w.ddf2(this.level+1),this.text=`Until the end of the next turn, give a ${y.levelGateText(this.level+1,!0)}creature "When this is dealt damage, destroy it".`}izftZ(t){const i=v.genId(),e=t.jr4("DM",this.code);e.changes=!0,e.customCode=i;const a=t.jr4("PT",this.code);a.customCode=v.enTil("P2",i),t.hints.push("DD")}izftE(t){return c.actionEval(t,"ST","DD")}jpC(){this.faction="A",this.rarity="C",this.name="Jet Pack",this.text=`Give a creature ${y.jr9(this.boof369,0)} and Mobility 1.`}jpZ(t){t.buff(this.boof369,0),t.addMobility(1)}jpE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,this.boof369,void 0,"GM")}lbrandC(){this.faction="T",this.rarity="C",this.name="Lightning Brand",this.playTarg.level=w.ddf2(this.level+1),this.text=`Give a ${y.levelGateText(this.level+1)}creature ${y.jr9(this.boof124,0)} and Aggressive this turn.`}lbrandZ(t){const i=c.mod("AT",this.boof124,this.code),e=c.mod("AG",!0,this.code);i.expiry="ET",e.expiry="ET",t.addMod(i),t.addMod(e)}lbrandE(t){return c.ddp2(t,t.playerA,t.lane,{att:this.boof124,agr:!0})}shartC(){this.faction="U",this.rarity="R",this.name="Lysian Shard",this.overload=!0,this.maxLevel=1,this.text=`Give a creature ${y.jr9(6,6)}.`}shartZ(t){t.buff(6,6)}shartE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,6,6)}morphC(){this.faction="U",this.rarity="H",this.name="Metamorphosis",this.text=`Replace a ${y.levelGateText(this.level,!0)}creature with a 0/3 Feywing Chrysalis.`,this.playTarg.level=w.ddf2(this.level)}morphZ(t){g.birthCreature(`${"FWC"}1`,"R",t.owner,t.lane)}morphE(t){const i=c.ddp4(t,t.playerA,t.lane,`${"FWC"}1`);return i.hints=["RE"],i}sculptC(){this.faction="A",this.rarity="H",this.name="Metasculpt",this.isFree=this.level===3,this.playTarg.level=w.ddf2(this.level+1),this.text=`Remove all abilities from a ${y.levelGateText(this.level+1,!0)}creature.`}sculptZ(t){t.wipeAll()}sculptE(t){return c.actionEval(t,"ST","NT")}nanoC(){this.faction="A",this.rarity="R",this.name="Nanoswarm",this.playTarg.level=w.ddf2(this.level),this.text=`Give a ${y.levelGateText(this.level,!0)}creature ${y.jr9(-this.boof51015,0)} and remove all abilities from it.`}nanoZ(t){t.buff(-this.boof51015,0),t.wipeAll()}nanoE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,-this.boof51015,0,"NT")}natselC(){this.faction="U",this.rarity="R",this.name="Natural Selection",this.text=`If there is a friendly creature in each lane, destroy a ${y.levelGateText(this.level,!0)}creature.`,this.playTarg.level=w.ddf2(this.level)}natselZ(t){U.destroy(t,this.code)}natselE(t){return c.ddp7(t,t.playerA,t.lane)}nflayC(){this.faction="N",this.rarity="C",this.name="Necroflay";const t=-this.boof3711;this.text=`Give a creature ${y.jr9(t,t)}.~You may play an additional ${this.name} this turn.`}nflayZ(t){const i=-this.boof3711;t.buff(i,i);const e=L.freeCard(this.code);e.condition.cardCode="NCF"}nflayE(t){const i=-this.boof3711;return c.actionEvalBuffN(t,t.playerA,t.lane,i,i)}nviveC(){this.faction="N",this.rarity="C",this.name="Necrovive",this.playTarg.canRegen=!0,this.text=`Give a creature Regenerate ${this.boof3612}.`}nviveZ(t){t.addRegen(this.boof3612)}nviveE(t){return c.ddp2(t,t.playerA,t.lane,{rgn:this.boof3612})}oexpC(){this.faction="A",this.rarity="H",this.name="Oratek Explosives",this.playTarg.player="F",this.hints=["ALT"];const t=this.lValS(["an enemy creature at random","up to two enemy creatures at random","each enemy creature"]);this.text=`Give a friendly creature ${y.jr9(5,0)}.~Allied Tempys: This turn, when that creature ${y.dbdtap()}, deal that much damage to ${t}.`}oexpZ(t){if(t.buff(5,0),L.allied("T")){const i=v.genId(),e=t.jr4("DM",this.code);e.changes=!0,e.customCode=i;const a=t.jr4("PT",this.code);a.customCode=i,t.hints.push("OL")}}oexpE(t){const i=c.actionEvalBuffN(t,t.playerA,t.lane,5,0,"OL");return i.bonus=.5,i}pwtorC(){this.faction="A",this.rarity="R",this.name="Power Torrent",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]),this.text=`Give a creature ${y.jr9(this.boof234,0)}.`}pwtorZ(t){t.buff(this.boof234,0)}pwtorE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,this.boof234)}psurgeC(){this.faction="U",this.rarity="R",this.name="Primal Surge",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]),this.text=`Give a creature ${y.jr9(this.level,this.level)}.`}psurgeZ(t){t.buff(this.level,this.level)}psurgeE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,this.level,this.level)}pslamC(){this.faction="T",this.rarity="C",this.name="Primordial Slam",this.text=`Give a creature ${y.jr9(this.boof71116,0)} this turn.`}pslamZ(t){const i=c.mod("AT",this.boof71116,this.code);i.expiry="ET",t.addMod(i)}pslamE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,this.boof71116)}rotgC(){this.faction="N",this.rarity="H",this.name="Rite of the Grimgaunt",this.text=`Give a creature "When a creature is destroyed, this gets ${y.jr9(this.level,this.level)}."`}rotgZ(t){t.changed=!0,t.jr4("DS",this.code),t.hints.push("BD")}rotgE(t){return c.actionEval(t,"ST","BD")}sapC(){this.faction="A",this.rarity="C",this.name="Sap",this.playTarg.level=w.ddf2(this.level),this.text=`Reduce a ${y.levelGateText(this.level,!0)}creature's attack to 0.`}sapZ(t){t.buff(-t.attack,0)}sapE(t){const i=g.ddf6(t);return c.actionEvalBuffC(t,i,-i.attack)}soathC(){this.faction="U",this.rarity="C",this.name="Savage Oath",this.level===1&&(this.hints=["LV"]);const t=this.saboof;this.text=`Give an Uterra creature ${y.jr9(t,t,!0)} and Breakthrough.`,this.playTarg.faction="U"}soathZ(t){const i=this.saboof;t.buff(i,i),t.breakthrough=!0}soathE(t){const i=this.saboof;return c.ddp2(t,t.playerA,t.lane,{att:i,hlt:i,brt:!0})}get saboof(){return this.lValN([2,6,15])}scythC(){this.faction="N",this.rarity="L",this.name="Scythe of Chiron",this.hints=["ENS"];const t=this.boof246;this.playTarg.player="F",this.text=`Each enemy creature gets ${y.jr9(-t,0)}. Give a friendly creature ${y.jr9(t,0)} for each enemy creature.`}scythZ(t){const i=-this.boof246,e=g.qEnemyCreats();e.forEach(a=>{a.buff(i,0)}),e.length>0&&t.buff(-i*e.length,0)}scythE(t){const i=-this.boof246,e=g.qEnemyCreats(),a=c.actionEvalBuffN(t,t.playerA,t.lane,-i*e.length);return e.forEach(h=>{a.vectors.push(c.ddp1(h.owner,h.lane,{att:i}))}),a}soaC(){this.faction="A",this.rarity="C",this.name="Seal of Anvillon",this.level===1?this.hints=["LV"]:this.consistent=!0,this.text=`Give a creature ${y.jr9(this.ubzap,0)}.`}soaZ(t){t.buff(this.ubzap,0)}soaE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,this.ubzap)}sodC(){this.faction="U",this.rarity="C",this.name="Seal of Deepwood",this.level===1?this.hints=["LV"]:this.consistent=!0;const t=this.derpboof;this.text=`Give a creature ${y.jr9(t,t)}.`}sodZ(t){const i=this.derpboof;t.buff(i,i)}sodE(t){const i=this.derpboof;return c.actionEvalBuffN(t,t.playerA,t.lane,i,i)}get derpboof(){return this.lValN([1,6,12])}sotC(){this.faction="N",this.rarity="C",this.name="Seal of Tarsus",this.level===1?this.hints=["LV"]:this.consistent=!0;const t=this.tars;this.text=`Give a creature ${y.jr9(t,t)}.`}sotZ(t){const i=this.tars;t.buff(i,i)}sotE(t){const i=this.tars;return c.actionEvalBuffN(t,t.playerA,t.lane,i,i)}get tars(){return this.lValN([-2,-8,-16])}shgrC(){this.faction="N",this.rarity="L",this.name="Shallow Grave",this.isFree=this.level===3,this.playTarg.level=w.ddf2(this.level+1),this.text=`Give a ${y.levelGateText(this.level+1,!0)}friendly creature "Vengeance: Spawn this" this turn.`}shgrZ(t){const i=v.genId(),e=t.jr4("VN",this.code);e.customCode=i,e.changes=!0;const a=t.jr4("PT",this.code);a.customCode=i,t.hints.push("LZ")}shgrE(t){return c.actionEval(t,"ST","LZ")}sinC(){this.faction="U",this.rarity="C",this.name="Strength In Numbers",this.text=`Give a creature ${y.jr9(this.level,this.level)} for each friendly creature.`}sinZ(t){const i=this.level*g.ddf1().length;t.buff(i,i)}sinE(t){const i=this.level*g.ddf1().length;return c.actionEvalBuffN(t,t.playerA,t.lane,i,i)}get snbboof(){return-1*(this.level+7)}snbC(){this.faction="A",this.rarity="C",this.name="Sonic Burst",this.text=`Give a creature ${y.jr9(this.snbboof,0)}.`}snbZ(t){t.buff(this.snbboof,0)}snbE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,this.snbboof)}sharvC(){this.faction="N",this.rarity="H",this.name="Soul Harvest";const t=this.lValS(["an additional level 1 card","an additional card","two additional cards"]);this.text=`Destroy a friendly creature. You may play ${t} this turn.`,this.playTarg.player="F"}sharvZ(t){if(U.destroy(t,this.code),this.level===1){const i=L.freeCard(this.code);i.condition.level=w.ddf2(1)}else x.turn.regularPlays+=this.level-1}sharvE(t){return c.ddp7(t,t.playerA,t.lane,["FRC","SD"])}sreapC(){this.faction="N",this.rarity="L",this.name="Soulreap";const t=this.boof248;this.text=`Destroy an enemy creature with ${t} or less attack. Then Spawn a copy of it.`,this.playTarg.player="E",this.playTarg.maxAttack=t}sreapZ(t){U.destroy(t,this.code),g.birthCreature(t.code,"S",!t.owner)}sreapE(t){const i=g.ddf6(t),e=O.getCard(i.code),a=c.ddp7(t,t.playerA,t.lane);return a.bonus=Rt.ddp9(1,e.jr1+e.jr2+e.initArmor+e.initRegen,e.jr1,0,e.bonusExist()),a}sttorC(){this.faction="N",this.rarity="R",this.name="Spirit Torrent",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]),this.text=`Give a creature Regenerate ${this.boof234}.`,this.playTarg.canRegen=!0}sttorZ(t){t.addRegen(this.boof234)}sttorE(t){return c.ddp2(t,t.playerA,t.lane,{rgn:this.boof234})}sptorC(){this.faction="U",this.rarity="R",this.name="Spore Torrent",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]),this.text=`Give a creature Poison ${this.boof234}.`}sptorZ(t){t.addPoison(this.boof234)}sptorE(t){return c.ddp2(t,t.playerA,t.lane,{psn:this.boof234})}sovC(){this.faction="T",this.rarity="L",this.name="Staff of Vaerus",this.text=`Give a friendly ${y.levelGateText(this.level+1,!0)}creature Mobility ${this.level}. That creature battles an additional time this turn.`,this.playTarg.level=w.ddf2(this.level+1),this.playTarg.player="F"}sovZ(t){t.extraBattles+=1,t.addMobility(this.level)}sovE(t){const i=this.boof579;return c.ddp2(t,t.playerA,t.lane,{att:i,hlt:i,noD:!0})}stbrnC(){this.faction="T",this.rarity="R",this.name="Stone Brand";const t=this.boof579;this.text=`Give a creature with Defender ${y.jr9(t,t,!0)} and Negate Defender from it.`,this.playTarg.hasDefender=!0}stbrnZ(t){const i=this.boof579;t.buff(i,i),t.negateDefender=!0}stbrnE(t){const i=this.boof579;return c.ddp2(t,t.playerA,t.lane,{att:i,hlt:i,noD:!0})}ssperC(){this.faction="T",this.rarity="C",this.name="Stormspear",this.text=`Deal ${this.sspb} to a creature.~You may play an additional ${this.name} this turn.`}ssperZ(t){t.hurtDirect(this.sspb,this.code);const i=L.freeCard(this.code);i.condition.cardCode="STP"}ssperE(t){return c.ddp2(t,t.playerA,t.lane,{dmg:this.sspb})}get sspb(){return this.lValN([3,8,12])}tanglC(){this.faction="U",this.rarity="R",this.name="Tangle";const t=this.level===3?" You gain health equal to that creature's attack.":"";this.text=`Destroy a ${y.levelGateText(this.level+1,!0)}creature with Mobility.${t}`,this.playTarg.level=w.ddf2(this.level+1),this.playTarg.hasMobility=!0}tanglZ(t){U.destroy(t,this.code),this.level===3&&k.healPlayer("F",t.attack)}tanglE(t){const i=g.ddf6(t),e=c.ddp8(t,i);return this.level===3&&e.vectors.push(c.evalVectorPlayerDmg(k.getActiveB(),i.attack)),e}tpactC(){this.faction="N",this.rarity="C",this.name="Tarsian Pact";const t=this.boof235;this.text=`Give a Nekrium creature ${y.jr9(t,t,!0)} and Regenerate ${t}.`,this.playTarg.faction="N"}tpactZ(t){const i=this.boof235;t.buff(i,i),t.addRegen(i)}tpactE(t){const i=this.boof235;return c.ddp2(t,t.playerA,t.lane,{att:i,hlt:i,rgn:i})}tugC(){this.faction="A",this.rarity="R",this.name="Tech Upgrade",this.playTarg.tribe="RB",this.text=`Give a Robot ${y.jr9(this.boof4612,0)} and Armor ${this.boof236}.`}tugZ(t){t.addArmor(this.boof236),t.buff(this.boof4612,0)}tugE(t){return c.ddp2(t,t.playerA,t.lane,{att:this.boof4612,arm:this.boof236})}totsC(){this.faction="N",this.rarity="T",this.name="Tendrils Of Twilight",this.isFree=!0;const t=-this.boof7911;this.text=`Give an enemy creature ${y.jr9(-1,-1)}.~If that creature is opposing a friendly Duskmaw, give that creature ${y.jr9(t,t)} instead.`,this.playTarg.player="E"}totsZ(t){const i=this.duskBof(t);t.buff(i,i)}totsE(t){const i=g.ddf6(t),e=this.duskBof(i);return c.actionEvalBuffN(t,t.playerA,t.lane,e,e)}duskBof(t){const i=t.opposed;let e=!1;return i&&(e=Pt.extractCardCode(i.code)==="DTD"),e?-this.boof7911:-1}blightC(){this.faction="N",this.rarity="R",this.name="Touch Of Blight",this.text=`Give a creature "When this creature ${y.dbdtac(this.level)}, destroy that creature."`}blightZ(t){t.changed=!0,t.jr4("DM",this.code),t.hints.push("BX")}blightE(t){return c.actionEval(t,"ST","BX")}get tspois(){return this.lValN([5,7,12])}sporeC(){this.faction="U",this.rarity="C",this.name="Toxic Spores",this.text=`Give a creature Poison ${this.tspois}.`}sporeZ(t){t.addPoison(this.tspois)}sporeE(t){return c.ddp2(t,t.playerA,t.lane,{psn:this.tspois})}tremcC(){this.faction="T",this.rarity="C",this.name="Tremorcharge",this.text=`Give a Tempys creature ${y.jr9(0,this.boof4812)} and Mobility ${this.level}.`,this.playTarg.faction="T"}tremcZ(t){t.buff(0,this.boof4812),t.addMobility(this.level)}tremcE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,void 0,this.boof4812,"GM")}uboltC(){this.faction="T",this.rarity="R",this.name="Uranti Bolt",this.text=`Deal ${this.ubzap} damage to a creature.~It gets Defender until the end of the next turn.`}uboltZ(t){t.hurtDirect(this.ubzap,this.code);const i=c.mod("DF",!0,this.code);i.expiry="EN",t.addMod(i)}uboltE(t){return c.ddp2(t,t.playerA,t.lane,{dmg:this.ubzap,def:!0})}get ubzap(){return this.lValN([3,10,20])}vensC(){this.faction="U",this.rarity="C",this.name="Venomstrike",this.text=`Give a creature Poison ${this.boof468}.~You may play an additional ${this.name} this turn.`}vensZ(t){t.addPoison(this.boof468);const i=L.freeCard(this.code);i.condition.cardCode="VSK"}vensE(t){return c.ddp2(t,t.playerA,t.lane,{psn:this.boof468})}vgraC(){this.faction="U",this.rarity="C",this.name="Verdant Grace",this.playTarg.player="F",this.text=`Heal ${this.boof101520} damage from a friendly creature and ${this.boof246} health from each other friendly creature.`}vgraZ(t){t.heal(this.boof101520);const i=this.boof246;g.creatByTarget(c.crFriendNotMeTarg(t.id)).forEach(e=>{e.heal(i)})}vgraE(t){const i=this.boof246,e=g.ddf6(t),a=c.actionEvalBuffC(t,e,0,this.boof101520),h=g.creatByTarget(c.crFriendNotMeTarg(e.id)).map(u=>{const m=c.ddp1(u.owner,u.lane);return m.health=i,m});return a.vectors.push(...h),a}vobC(){this.faction="T",this.rarity="R",this.name="Violent Outburst",this.level===3?this.isFree=!0:this.hints=["LV"],this.text=`Give a ${y.levelGateText(this.level+1,!0)}creature Aggressive and, "When this creature ${y.dbdtap()}, it also deals that much damage to itself."`}vobZ(t){t.aggressive=!0,t.changed=!0,t.jr4("DM",this.code)}vobE(t){return c.ddp2(t,t.playerA,t.lane,{agr:!0})}vembC(){this.faction="N",this.rarity="C",this.name="Vyric's Embrace";const t=this.boof468,i=t*-1;this.text=`Give a creature ${y.jr9(i,i)}.~You gain ${t} health.`}vembZ(t){const i=this.boof468,e=-i;t.buff(e,e),k.healPlayer(k.getActive(),i)}vembE(t){const i=this.boof468,e=-i,a=c.actionEvalBuffN(t,t.playerA,t.lane,e,e);return a.vectors.push(c.evalVectorPlayerLife(k.getActiveB(),i)),a}warC(){this.faction="A",this.rarity="H",this.name="Warmonger Mod";let t=this.level,i=3;this.level===1&&(this.playTarg.level="LN",i=2,t=2),this.text=`Give a ${y.levelGateText(i,!0)}creature ${t}x attack.`}warZ(t){const i=this.level===3?2:1;t.buff(t.attack*i,0)}warE(t){const i=this.level===3?2:1;return c.actionEvalBuffN(t,t.playerA,t.lane,ae+i)}xwillC(){this.faction="N",this.rarity="H",this.name="Xrath's Will";const t=this.boof3612;this.text=`Destroy an enemy creature with ${t} or less attack.~You may play an additional Zombie this turn.`,this.playTarg.player="E",this.playTarg.maxAttack=t}xwillZ(t){U.destroy(t,this.code);const i=L.freeCard(this.code);i.condition.tribe="ZB"}xwillE(t){return c.ddp7(t,t.playerA,t.lane,"FRZ")}}class Fe extends M{lookup(t){return{["ATP"]:{c:()=>this.phagC(),t:()=>this.phagT(),f:(e,a)=>this.phagF(e,a),e:e=>this.phagE(e)},["SSH"]:{c:()=>this.sshmC(),t:()=>this.sshmT(),f:(e,a)=>this.sshmF(e,a),e:e=>this.sshmE(e)},["TPG"]:{c:()=>this.pillC(),t:()=>this.pillT(),f:(e,a)=>this.pillF(e,a),e:e=>this.pillE(e)},["TMG"]:{c:()=>this.grootC(),t:()=>this.grootT(),f:(e,a)=>this.grootF(e,a),e:e=>this.grootE(e)}}[t]}forgTargets(t){return this.lookup(t).t()}forgAction(t,i,e){this.lookup(t).f(i,e)}forgEval(t,i){return this.lookup(t).e(i)}optional=!0;ftext="";constructor(t){super(t),this.lookup(this.cardCode()).c(),this.text="Forge: "+this.ftext,this.ftext=""}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("FR",this.code);return a.interactive=!0,e}handleAction(t){const i=g.jr5(t.param);this.forgAction(this.cardCode(),t.position,i),pt.popMode(),C.actionDone(!0)}jr8(t){const i=this.forgTargets(this.cardCode());if(i.length>0){const e=i.map(a=>{const h=c.deckSelectAction("CARD",a.cardCode,a.sourceIdx);return h.param=t.creatId,h.hostCard=this.code,h});if(this.optional){const a=C.noneEndTrigger();a.param="PM",e.push(a)}Ht.showCustomDeck(i,e)}else E.triggerDone()}ddf7(t){return this.forgEval(this.cardCode(),t)}phagC(){this.faction="U",this.rarity="H",this.name="Aetherphage",this.jr1=this.lValN([7,10,16]),this.jr2=this.boof3612,this.tribe.push("IN"),this.ftext=`Look at the ${y.levelGateText(this.level,!0)}spells in the enemy player's hand and choose one. The enemy player discards the chosen spell.`}phagT(){const t=k.toPlayer(!k.getActiveB()),i=c.target("TH");return i.player=k.toTarget(t),i.level=w.ddf2(this.level),i.card="S",Ht.generateContent(t.hand,!1,i)}phagF(t,i){const e=k.toPlayer(!i.owner),a=e.hand[t];e.hand.splice(t,1),e.discard.push(a)}phagE(t){const i=c.actionEval(t,"ST");return i.bonus=.5,i}sshmC(){this.faction="U",this.rarity="H",this.name="Soothsayer Hermit",this.jr1=this.boof61016,this.jr2=this.jr1-1,this.tribe.push("LP"),this.ftext=`You may put a ${y.levelGateText(this.level)} creature from your discard pile into your hand.`}sshmT(){const t=k.getActive(),i=c.target("TD");return i.player=k.toTarget(t),i.card="C",i.level=w.ddf2(this.level),Ht.generateContent(t.discard,!1,i)}sshmF(t,i){const e=k.toPlayer(i.owner),a=e.discard.splice(t,1);e.hand.push(a[0])}sshmE(t){const i=c.actionEval(t,"ST");return i.bonus=.5,i}pillC(){this.faction="N",this.rarity="H",this.name="Tomb Pillager",this.jr1=this.boof5915,this.jr2=this.jr1+1,this.tribe.push("ZB"),this.consistent=this.level>1,this.ftext="You may banish a Nekrium card from your discard pile."}pillT(){const t=k.getActive(),i=c.target("TD");return i.player=k.toTarget(t),i.faction="N",Ht.generateContent(t.discard,!1,i)}pillF(t,i){k.toPlayer(i.owner).discard.splice(t,1)}pillE(t){const i=c.actionEval(t,"ST");return i.bonus=.5,i}grootC(){this.faction="U",this.rarity="R",this.name="Toorgmai Guardian",this.jr1=this.boof4711,this.jr2=this.jr1,this.tribe.push("PL");const t=this.boof358;this.bonus={play:this.ddp9(0,t+t,t,0)/2},this.ftext=`You may banish a Plant from your discard pile. If you do, ${this.name} gets ${y.jr9(t,t)}.`}grootT(){const t=k.getActive(),i=c.target("TD");return i.player=k.toTarget(t),i.tribe="PL",Ht.generateContent(t.discard,!1,i)}grootF(t,i){k.toPlayer(i.owner).discard.splice(t,1);const a=this.boof358;i.buff(a,a)}grootE(t){const i=c.actionEval(t,"ST");return i.bonus=.5,i}}class Ri extends ot{jr3(t,i){const e=super.jr3(t,i);return e.jr4("FR",this.code),e}jr8(t){g.qEnemyCreats().forEach(i=>{i.addPoison(6)}),E.triggerDone()}}class Li extends M{constructor(t){super(t),this.faction="U",this.rarity="T",this.name="Dino Knight",this.jr1=this.lValN([8,12,18]),this.jr2=this.jr1,this.tribe.push("DN"),this.initAggro=!0,this.initBT=!0,this.maxLevel=this.level,this.minLevel=this.level;const i=this.boof357;this.text=`When this ${y.dbdtap()}, heal ${i} damage from each other friendly creature.~Vengeance: Put a level ${this.level} Bron, Wild Tamer into this lane.`}image(t){return this.fixedImage(t)}jr3(t,i){const e=super.jr3(t,i);return e.jr4("VN",this.code),e.jr4("DM",this.code),e}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&!i.creatureTarg&&i.creatureSrc&&i.source.id===t.creatId}return!1}jr8(t){if(t.trigger.type==="VN"){const i=g.jr5(t.creatId);g.birthCreature("BWT"+this.level,"P",i.owner,i.lane),E.triggerDone()}else if(t.trigger.type==="DM"){const i=this.boof357,e=c.crNotMeTarg(t.creatId);e.player=k.toTarget(t.ownerPlayerA),g.creatByTarget(e).forEach(h=>h.heal(i)),E.triggerDone()}}}class Ii extends gt{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Discordant Strike",this.hints=["ALN"];const i=-this.boof4610;this.text=`Give an enemy creature ${y.jr9(i,0)}.~Allied Nekrium: Give an enemy creature ${y.jr9(0,i)}.`}playTargets(){const t=super.playTargets(),i=c.crEnemyActTarg("CARD",this.code,"P1");return t.push(i),t}handleAction(t){const i=v.deTil(t.param),e=-this.boof4610,a=g.ddf6(t);i[0]==="P1"?(this.logSpell(),a.buff(e,0),L.allied("N")?C.ddf5(this.getCardActions(t)):L.spellCast()):(a.buff(0,e),L.spellCast())}getCardActions(t,i){return w.toActions(c.crEnemyActTarg("CARD",this.code,"P2"))}ddf7(t){const i=v.deTil(t.param),e=-this.boof4610;if(i[0]==="P1"){const a=c.actionEvalBuffN(t,t.playerA,t.lane,e,0);return L.allied("N")&&(a.final=!1),a}else return c.actionEvalBuffN(t,t.playerA,t.lane,0,e)}}class Gi extends gt{constructor(t){super(t),this.faction="U",this.rarity="R",this.name="Dissolve",this.isFree=this.level===3,this.text=`Double the Poison on ${this.level===1?"an":"each"} enemy creature.`}playTargets(){const t=super.playTargets(),i=this.poisTarg();return this.level===1?t.push(i):g.creatByTarget(i).length>0&&t.push(w.boardTarget("CARD",this.code)),t}handleAction(t){if(this.logSpell(),this.level===1){const i=g.ddf6(t);i.addPoison(i.poison)}else g.creatByTarget(this.poisTarg()).forEach(e=>{e.addPoison(e.poison)});L.spellCast()}poisTarg(){const t=c.crEnemyActTarg("CARD",this.code,"");return t.hasPoison=!0,t}ddf7(t){const i=ae+1,e=c.actionEval(t,"ST"),a=!k.getActiveB();let h;return t.zone==="R"?h=g.laneIdx:h=[t.lane],e.vectors=h.map(u=>c.ddp1(a,u,{psn:i})),e}}class $i extends M{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Dysian Broodqueen",this.jr1=this.boof248,this.jr2=this.boof61117,this.tribe.push("NG"),this.hints=["ALU"];const i=`Destroy an enemy ${y.levelGateText(this.level,!0)}creature.`;this.text=`Activate, destroy another friendly creature: ${i}~Allied Uterra: Put a ${this.level}/${this.level} Broodfang into an available lane.`,this.bonus={play:this.ddp9(1,this.level*2,this.level,0)}}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("FR",this.code);return a.interactive=!0,e}canActivate(t){return this.enemies(t.id).length>0&&this.friends(t.id).length>0}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){const i=v.deTil(t.param);if(i[1]==="P1")C.ddf5(this.getCardActions(t));else if(i[1]==="P2"){const e=g.jr5(i[0]),a=Date.now(),h=g.jr5(i[2]);U.destroy(h,this.code,a);const u=g.ddf6(t);U.destroy(u,this.code,a),e.endActivation()}else g.birthCreature(`${"BRF"}${this.level}`,"P",t.playerA,t.lane),C.actionDone(!0)}jr8(t){if(L.allied("U")){const i=c.emptyPlayerActTarg("F","CARD",this.code,t.trigger.creatId),e=w.toActions(i);e.length>0?C.ddf5(e):E.triggerDone()}else E.triggerDone()}friends(t){const i=c.crFriendNotMeActTarg("CARD",t,this.code,v.enTil(t,"P1"));return w.toActions(i)}enemies(t,i=""){const e=c.crEnemyActTarg("CARD",this.code,v.enTil(t,"P2",i));return e.level=w.ddf2(this.level),w.toActions(e)}getCardActions(t,i){if(t.actionKey==="ACTV"){const e=i?i.id:t.param,a=this.friends(e);return a.push(C.cancelAction()),a}else if(t.actionKey==="CARD"){const e=v.deTil(t.param),a=g.ddf6(t),h=this.enemies(e[0],a.id);return h.push(C.cancelAction()),h}return super.getCardActions(t,i)}ddf7(t){if(t.actionKey==="ACTV")return c.ddp5(t);{const i=v.deTil(t.param),e=t;if(i[1]==="P1")return c.ddp5(t);if(i[1]==="P2"){const a=c.ddp7(t,e.playerA,e.lane),h=g.jr5(i[2]),u=c.ddp1(h.owner,h.lane);return u.destroy=!0,a.vectors.push(u),a}else return c.ddp4(t,e.playerA,e.lane,`${"BRF"}${this.level}`)}}}class Vi extends gt{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Dysian Siphon",this.hints=["ALU"];const i=this.boof357;this.text=`Give an enemy creature ${y.jr9(-i,-i)}.~Allied Uterra: Give a friendly creature ${y.jr9(i,i)}. `}playTargets(){const t=super.playTargets(),i=c.crEnemyActTarg("CARD",this.code,"P1");return t.push(i),t}handleAction(t){const i=v.deTil(t.param),e=this.boof357;if(i[0]==="P1"){const a=this.getCardActions(t);L.allied("U")&&a.length>1?C.ddf5(a):(this.logSpell(),g.ddf6(t).buff(-e,-e),L.spellCast())}else{this.logSpell();const a=g.ddf6(t);g.jr5(i[1]).buff(-e,-e),a.buff(e,e),L.spellCast()}}getCardActions(t,i){const e=g.ddf6(t),a=this.friendTargActions(e.id);return a.push(C.cancelAction()),a}ddf7(t){const i=v.deTil(t.param),e=this.boof357;if(i[0]==="P1")return L.allied("U")&&this.friendTargActions().length>1?c.ddp5(t):c.actionEvalBuffN(t,t.playerA,t.lane,-e,-e);{const a=c.actionEval(t,"ST"),h=g.ddf6(t),u=g.jr5(i[1]);return a.vectors.push(c.ddp1(u.owner,u.lane,{att:-e,hlt:-e}),c.ddp1(h.owner,h.lane,{att:e,hlt:e})),a}}friendTargActions(t=""){const i=c.crFriendActTarg("CARD",this.code,v.enTil("P2",t));return w.toActions(i)}}class Oi extends M{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Dysian Sludge",this.jr1=this.boof51015,this.jr2=this.jr1,this.tribe.push("OZ"),this.hints=["ALN","HH","OP"];const i=-this.boof135;this.text=`Forge: If you have health over 120, you may put a copy of ${this.name} into another lane.~When this enters play, if you have a Nekrium card in hand, the opposing creathure gets ${y.jr9(i,i)}.`}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("FR",this.code);return a.interactive=!0,a.customCode=e.id,e.jr4("EF",this.code),e}ddf8(t){return t.trigger.type==="EF"&&t.event.creature.id===t.creatId}jr8(t){const i=t.event;if(i.forged&&i.creature.id===t.trigger.customCode)if(k.getActive().health>120){const e=c.actionTarget("TF","CARD",this.code,"");e.player="F",e.lanes=g.laneIdx.filter(h=>h!==i.creature.lane);const a=w.toActions(e);a.push(C.noneEndTrigger()),C.ddf5(a)}else E.triggerDone();else{const e=i.creature.opposed;if(e&&L.allied("N",i.creature.owner)){const a=-this.boof135;e.buff(a,a)}E.triggerDone()}}handleAction(t){g.birthCreature(this.code,"R",t.playerA,t.lane),C.actionDone(!0)}}class Ui extends M{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Echowisp",this.jr1=this.lValN([7,8,10]),this.jr2=this.boof135,this.tribe.push("ST"),this.level===3?(this.text="Forge: Put a copy of Echowisp into each available lane.",this.hints=["EML"]):(this.text="Forge: You may put a copy of Echowisp into an adjacent lane.",this.hints=["EMA"])}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("FR",this.code);return a.interactive=this.level<3,e}jr8(t){const i=c.emptyPlayerActTarg("F","CARD",this.code,t.trigger.creatId);if(this.level<3){const a=g.jr5(t.trigger.creatId);i.lanes=a.adjacent}let e=w.toActions(i);if(e.length>0)if(this.level<3)C.ddf5([C.noneEndTrigger(),...e]);else{const a=Date.now();e.forEach(h=>g.birthCreature(this.code,"P",h.playerA,h.lane,a)),E.triggerDone()}else E.triggerDone()}handleAction(t){g.birthCreature(this.code,"P",t.playerA,t.lane),C.actionDone(!0)}ddf7(t){return c.ddp4(t,t.playerA,t.lane,this.code)}}class Wi extends M{lookup(t){return{["TVG"]:{c:()=>this.tvgC(),m:e=>this.tvgM(e)}}[t]}createMods(t,i){return this.lookup(t).m(i)}armThreshold=0;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const e=super.jr3(t,i),a=e.addEffect("AR",this.code);return a.area="A",e}enforceEffect(t,i){this.armThreshold<=i.armor?this.createMods(this.cardCode(),i).forEach(e=>{i.addModSafe(e)}):i.removeModSafe(i.id)}tvgC(){this.faction="A",this.rarity="R",this.name="Tower Vanguard",this.jr1=this.lValN([3,6,11]),this.jr2=this.lValN([7,13,21]),this.tribe.push("RB"),this.hints=["LKA"],this.armThreshold=1;const t=this.boof247;this.text=`While ${this.name} has Armor, it gets ${y.jr9(t,0)}.`,this.bonus={play:this.ddp9(0,t,t,0)}}tvgM(t){return[c.mod("AT",this.boof247,t.id)]}}class ke extends M{lookup(t){return{["CIN"]:{c:()=>this.cyinC(),m:e=>this.cyinM(e)},["HWM"]:{c:()=>this.hlwmC(),m:e=>this.hlwmM(e)},["LSP"]:{c:()=>this.lspC(),m:e=>this.lspM(e)},["SSI"]:{c:()=>this.ssinC(),m:e=>this.ssinM(e)},["WTA"]:{c:()=>this.weguC(),m:e=>this.weguM(e)}}[t]}createMods(t,i){return this.lookup(t).m(i)}attThreshold=0;constructor(t){super(t),this.lookup(this.cardCode()).c(),this.hints=["ATH"]}jr3(t,i){const e=super.jr3(t,i);return e.addEffect("AT",this.code),e}enforceEffect(t,i){this.attThreshold<=i.attack?this.createMods(this.cardCode(),i).forEach(e=>{i.addModSafe(e)}):i.removeModSafe(i.id)}cyinC(){this.faction="A",this.rarity="R",this.name="Cypien Infiltrator",this.jr1=this.boof61117,this.jr2=this.jr1-1,this.tribe.push("HM"),this.attThreshold=this.lValN([7,14,21]),this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets Breakthrough.`}cyinM(t){return[c.mod("BT",!0,t.id)]}hlwmC(){this.faction="A",this.rarity="L",this.name="Hinterland Watchman",this.jr1=this.lValN([4,7,15]),this.jr2=this.lValN([7,10,20]),this.tribe.push("MC"),this.attThreshold=this.boof51020;const t=this.lValS(["Mobility 3","Armor 5 and Mobility 3","Armor 5, Breakthrough, Aggressive, Mobility 3, and Regenerate 5"]);this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets ${t}.`,this.bonus={exist:this.ddp9(0,this.lValN([1,9,17]),0,0)*2}}hlwmM(t){const i=[c.mod("MB",3,t.id)];return this.level>1&&i.push(c.mod("AR",5,t.id)),this.level===3&&(i.push(c.mod("BT",!0,t.id)),i.push(c.mod("AG",!0,t.id)),i.push(c.mod("RG",5,t.id))),i}lspC(){this.faction="A",this.rarity="C",this.name="Lightshield Patrol",this.jr1=this.lValN([4,7,15]),this.jr2=this.boof51020,this.tribe.push("HM"),this.attThreshold=this.jr2,this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets Armor ${this.boof234}.`}lspM(t){return[c.mod("AR",this.boof234,t.id)]}ssinC(){this.faction="A",this.rarity="R",this.name="Spiritsteel Infiltrator",this.jr1=this.boof4815,this.jr2=this.jr1+3,this.tribe.push("EN"),this.attThreshold=this.boof51020,this.text=`While ${this.name} has ${this.attThreshold} or more attack, it gets Mobility ${this.level} and Armor ${this.boof246}.`}ssinM(t){return[c.mod("MB",this.level,t.id),c.mod("AR",this.boof246,t.id)]}weguC(){this.faction="U",this.rarity="L",this.name="Wegu, the Ancient",this.jr1=0,this.jr2=1,this.tribe.push("PL"),this.initDefend=!0,this.attThreshold=this.lValN([10,25,100]);const t=this.boof124,i=this.level===3?"it gets Breakthrough and ":"";this.text=`When you gain health, Wegu gets ${y.jr9(t,t)} for each health you gained.~While Wegu has ${this.attThreshold} or more attack, ${i}Negate Defender from it.`}weguM(t){const i=[c.mod("ND",!0,t.id)];return this.level===3&&i.push(c.mod("BT",!0,t.id)),i}}class ti extends M{friendNotMe(t){const i=c.crNotMeTarg(t.id);return i.player=k.toTarget(t.owner),i}friendNone(t){const i=c.crTarg();return i.player=k.toTarget(t.owner),i.lanes=[],i}jr3(t,i){const e=super.jr3(t,i),a=e.addEffect("PS",this.code);return a.area="C",e}enforcementActive(t){return t.status==="A"}applyEffect(t,i,e){const a=this.friendNotMe(t),h=g.creatByTarget(a),u=g.creatByTarget(e);h.forEach(m=>{u.includes(m)?m.addModSafe(i):m.removeModSafe(t.id)})}}class Pe extends ti{lookup(t){return{["BWW"]:{c:()=>this.bwwC(),m:e=>this.bwwM(e),t:e=>this.bwwT(e)},["HTR"]:{c:()=>this.hrtC(),m:e=>this.hrtM(e),t:e=>this.hrtT(e)},["KKK"]:{c:()=>this.kkkC(),m:e=>this.kkkM(e),t:e=>this.kkkT(e)},["XDV"]:{c:()=>this.xdvC(),m:e=>this.xdvM(e),t:e=>this.xdvT(e)}}[t]}createMod(t,i){return this.lookup(t).m(i)}effTargs(t,i){return this.lookup(t).t(i)}constructor(t){super(t),this.lookup(this.cardCode()).c()}enforceEffect(t,i){const e=this.cardCode(),a=this.createMod(e,i),h=this.enforcementActive(i)?this.effTargs(e,i):this.friendNone(i);this.applyEffect(i,a,h)}bwwC(){this.faction="T",this.rarity="H",this.name="Borean Windweaver",this.jr1=this.boof6914,this.jr2=this.jr1-1,this.initMobile=this.level,this.tribe.push("WN","AS"),this.hints=["FRS"],this.text=`Each other friendly creature gets Mobility ${this.level}.`}bwwM(t){return c.mod("MB",this.level,t.id)}bwwT(t){return this.friendNotMe(t)}hrtC(){this.faction="U",this.rarity="L",this.name="Heart Tree",this.jr1=0,this.jr2=this.lValN([10,15,30]),this.initRegen=this.boof246,this.initDefend=!0,this.tribe.push("PL"),this.hints=["FRS"],this.text=`Each other friendly creature gets Regenerate ${this.initRegen}.`,this.bonus={exist:this.ddp9(0,this.initRegen,0,0)*2}}hrtM(t){return c.mod("RG",this.initRegen,t.id)}hrtT(t){return this.friendNotMe(t)}kkkC(){if(this.faction="T",this.rarity="L",this.name="Korok, Khan of Kadras",this.jr1=this.lValN([4,7,12,18]),this.jr2=this.lValN([7,12,18,26]),this.initAggro=!0,this.tribe.push("FB"),this.maxLevel=4,this.level>1){const t=this.lValS(["","friendly level 1","friendly level 2 or lower","other friendly"]);this.text=`Each ${t} creature gets Aggressive.`,this.hints=["FRS"],this.bonus={exist:(this.level-1)*.5}}}kkkM(t){return c.mod("AG",!0,t.id)}kkkT(t){const i=this.friendNotMe(t);return this.level===1?i.lanes=[]:i.level=w.ddf2(this.level-1),i}xdvC(){this.faction="N",this.rarity="H",this.name="Xrath, Dreadnight Of Varna",this.jr1=this.boof5914,this.jr2=this.jr1+1,this.initRegen=this.boof248,this.tribe.push("ZB"),this.text=`Each other friendly Zombie gets Regenerate ${this.initRegen}`,this.bonus={exist:this.ddp9(0,this.initRegen,0,0)}}xdvM(t){return c.mod("RG",this.initRegen,t.id)}xdvT(t){const i=this.friendNotMe(t);return i.tribe="ZB",i}}class zi extends M{lookup(t){return{["AHL"]:{c:()=>this.ahlC(),m:e=>this.ahlM(e)}}[t]}createMods(t,i){return this.lookup(t).m(i)}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const e=super.jr3(t,i),a=e.addEffect("PS",this.code);return a.area="C",e}enforceEffect(t,i){const e=c.crNotMeTarg(i.id);e.player=k.toTarget(i.owner),g.creatByTarget(e).length===0?this.createMods(this.cardCode(),i).forEach(h=>{i.addModSafe(h)}):i.removeModSafe(i.id)}ahlC(){this.faction="A",this.rarity="H",this.name="Alloyin Highlander",this.jr1=this.lValN([5,7,10]),this.jr2=this.boof6914,this.tribe.push("HM"),this.text=`While ${this.name} is your only friendly creature, it gets ${y.jr9(this.boof4812,0)} and Armor ${this.boof248}.`}ahlM(t){return[c.mod("AT",this.boof4812,t.id),c.mod("AR",this.boof248,t.id)]}}class ei extends M{lookup(t){return{["NXP"]:{c:()=>this.nxpC(),m:e=>this.nxpM(e)},["SKG"]:{c:()=>this.skgC(),m:e=>this.skgM(e)}}[t]}createMods(t,i){return this.lookup(t).m(i)}constructor(t){super(t),this.lookup(this.cardCode()).c(),this.hints=["NX"]}jr3(t,i){const e=super.jr3(t,i),a=e.addEffect("PS",this.code);return a.area="C",e}enforceEffect(t,i){i.lane===3?this.createMods(this.cardCode(),i).forEach(e=>{i.addModSafe(e)}):i.removeModSafe(i.id)}nxpC(){this.faction="A",this.rarity="C",this.name="Nexus Pilot",this.jr1=this.boof358,this.jr2=this.boof4710,this.tribe.push("HM"),this.text=`While ${this.name} is in the center lane, it gets ${y.jr9(this.jr1,this.jr2)}.`,this.bonus={play:this.ddp9(0,this.jr1+this.jr2,this.jr1,0)}}nxpM(t){return[c.mod("AT",this.jr1,t.id),c.mod("HL",this.jr2,t.id),c.mod("MH",this.jr2,t.id)]}skgC(){this.faction="A",this.rarity="C",this.name="Skyknight Glider",this.jr1=this.boof5916,this.jr2=this.jr1+1,this.tribe.push("HM"),this.text=`While ${this.name} is in the center lane, it gets Mobility 2.`}skgM(t){return[c.mod("MB",2,t.id)]}}class Oe extends M{lookup(t){return{["CCT"]:{c:()=>this.cctC(),m:e=>this.cctM(e)},["GHB"]:{c:()=>this.ghbC(),m:e=>this.ghbM(e)},["PYG"]:{c:()=>this.pygC(),m:e=>this.pygM(e)}}[t]}createMods(t,i){return this.lookup(t).m(i)}likesOpposed=!1;constructor(t){super(t),this.lookup(this.cardCode()).c(),this.hints=[this.likesOpposed?"OP":"OL"]}jr3(t,i){const e=super.jr3(t,i),a=e.addEffect("PS",this.code);return a.area="A",e}enforceEffect(t,i){!!i.opposed===this.likesOpposed?this.createMods(this.cardCode(),i).forEach(e=>{i.addModSafe(e)}):i.removeModSafe(i.id)}cctC(){this.faction="T",this.rarity="R",this.name="Cloudcleaver Titan",this.jr1=this.boof4812,this.jr2=this.lValN([7,10,16]),this.tribe.push("WN","GT"),this.initMobile=this.level;const t=this.boof246;this.bonus={play:this.ddp9(0,t,t,0)},this.text=`While ${this.name} is unopposed, it gets ${y.jr9(t,0)}.`}cctM(t){return[c.mod("AT",this.boof246,t.id)]}ghbC(){this.faction="U",this.rarity="R",this.name="Gemhide Basher",this.jr1=this.lValN([5,10,16]),this.jr2=this.lValN([3,7,10]),this.tribe.push("DN"),this.likesOpposed=!0,this.text=`While ${this.name} is opposed, it gets Aggressive.`}ghbM(t){return[c.mod("AG",!0,t.id)]}pygC(){this.faction="T",this.rarity="H",this.name="Pyre Giant",this.jr1=this.boof468,this.jr2=this.boof234,this.tribe.push("FR","GT"),this.initAggro=!0,this.bonus={play:this.ddp9(0,this.jr1,this.jr1,0)},this.text=`While ${this.name} is unopposed, it gets ${y.jr9(this.jr1,0)}.`}pygM(t){return[c.mod("AT",this.jr1,t.id)]}}class Te extends ti{lookup(t){return{["ALG"]:{c:()=>this.algnC(),m:e=>this.algnM(e)},["ALS"]:{c:()=>this.alstC(),m:e=>this.alstM(e)},["BTN"]:{c:()=>this.btcC(),m:e=>this.btcM(e)},["NXA"]:{c:()=>this.aeroC(),m:e=>this.aeroM(e)},["NXT"]:{c:()=>this.ntcC(),m:e=>this.ntcM(e)}}[t]}createMod(t,i){return this.lookup(t).m(i)}constructor(t){super(t),this.lookup(this.cardCode()).c(),this.hints=this.nexus?["NX"]:["LJ"]}nexus=!1;enforcementActive(t){return super.enforcementActive(t)?this.nexus?t.lane===3:!0:!1}enforceEffect(t,i){const e=this.cardCode(),a=this.createMod(e,i);let h;this.enforcementActive(i)?(h=this.friendNotMe(i),this.nexus?h.lanes=[1,2,4,5]:h.lanes=i.adjacent):h=this.friendNone(i),this.applyEffect(i,a,h)}algnC(){this.faction="A",this.rarity="R",this.name="Alloyin General",this.jr1=this.boof246,this.jr2=this.boof81318,this.tribe.push("HM"),this.text=`Adjacent creatures gets ${y.jr9(this.jr1,0)}.`,this.bonus={exist:this.ddp9(0,this.jr1,this.jr1,0)}}algnM(t){return c.mod("AT",this.jr1,t.id)}alstC(){this.faction="A",this.rarity="H",this.name="Alloyin Strategist",this.jr1=this.boof4814,this.jr2=this.jr1+1,this.initMobile=this.level,this.tribe.push("HM");const t=this.boof246;this.text=`Adjacent creatures gets ${y.jr9(t,0)}.`,this.bonus={exist:this.ddp9(0,t,t,0)}}alstM(t){return c.mod("AT",this.boof246,t.id)}btcC(){this.faction="A",this.rarity="H",this.name="Battle Techtician",this.jr1=this.boof3714,this.jr2=this.boof71117,this.tribe.push("HM"),this.nexus=!0;const t=this.boof248;this.text=`While ${this.name} is in the center lane, each other friendly creature gets ${y.jr9(t,0)}.`,this.bonus={exist:this.ddp9(0,t,t,0)*2}}btcM(t){return c.mod("AT",this.boof248,t.id)}aeroC(){this.faction="A",this.rarity="L",this.name="Nexus Aeronaut",this.jr1=this.boof4814,this.jr2=this.jr1+2,this.tribe.push("HM"),this.initMobile=1;const t=this.boof236;this.nexus=!0,this.text=`While ${this.name} is in the center lane, each other friendly creature gets ${y.jr9(t,0)}. Otherwise this gets Armor ${t}.`,this.bonus={exist:this.ddp9(0,t,t,0)*2}}aeroM(t){return c.mod("AT",this.boof236,t.id)}ntcC(){this.faction="A",this.rarity="H",this.name="Nexus Techtician",this.jr2=this.boof6916,this.jr1=this.jr2-3,this.tribe.push("HM"),this.nexus=!0;const t=this.boof235;this.text=`While ${this.name} is in the center lane, each other friendly creature gets Armor ${this.boof235}.`,this.bonus={exist:this.ddp9(0,t,0,0)*4}}ntcM(t){return c.mod("AR",this.boof235,t.id)}}class Ce extends M{cardConstruct(t){({["BWD"]:()=>this.bwdC(),["BTS"]:()=>this.btsC(),["ESC"]:()=>this.escarC(),["EHN"]:()=>this.ethhC(),["RWC"]:()=>this.roamC()})[t]()}targAction(t){g.birthCreature(this.spawnCode,"P",t.playerA,t.lane)}adjacent=!1;optional=!1;needsEmpty=!1;spawnCode="";ftext="";allied="X";constructor(t){super(t),this.cardConstruct(this.cardCode());const i=y.forglied(this.allied);this.text=i+": "+this.ftext}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("FR",this.code);return a.interactive=!0,e}jr8(t){if(this.allied==="X"||L.allied(this.allied)){const i=g.jr5(t.creatId),e=c.emptyPlayerActTarg("F","CARD",this.code,t.creatId);this.needsEmpty||(e.field="A",e.lanes=g.laneIdx.filter(h=>h!==i.lane)),this.adjacent&&(e.lanes=i.adjacent);const a=w.toActions(e);a.length>0?(this.optional&&a.push(C.noneEndTrigger()),C.ddf5(a)):E.triggerDone()}else E.triggerDone()}handleAction(t){this.targAction(t),C.actionDone(!0)}ddf7(t){return c.ddp4(t,t.playerA,t.lane,this.spawnCode)}bwdC(){this.faction="U",this.rarity="C",this.name="Branchweaver Druid",this.jr1=1,this.jr2=1,this.tribe.push("HM"),this.hints=["EMO"],this.spawnCode=`${"TFD"}${this.level}`,this.optional=!0;const t=this.boof5714;this.ftext=`You may put a ${t}/${t} ${W.minionName(3)} into another lane.`}btsC(){this.faction="U",this.rarity="C",this.name="Brighttusk Sower",this.jr1=this.lValN([6,8,10]),this.jr2=this.jr1,this.tribe.push("TK"),this.hints=["EMA"],this.spawnCode=W.minionCode(this.level),this.optional=!0,this.adjacent=!0;const t=W.minionBuff(this.level);this.ftext=`You may put a ${t}/${t} ${W.minionName(this.level)} into an adjacent lane.`}escarC(){this.faction="A",this.rarity="H",this.name="Esperian Scarab",this.jr1=this.lValN([3,4,7]),this.jr2=this.boof5711,this.initArmor=this.boof135,this.tribe.push("RB"),this.allied="U",this.hints=["EMO","ALU"],this.spawnCode=this.code,this.optional=!0,this.ftext=`You may but a copy of ${this.name} into another lane.`}ethhC(){this.faction="U",this.rarity="C",this.name="Ether Hounds",this.jr1=this.boof369,this.jr2=this.jr1,this.tribe.push("ST"),this.needsEmpty=!0,this.hints=["EMO"],this.spawnCode=this.code,this.ftext="Put a copy of this into an available lane."}roamC(){this.faction="U",this.rarity="C",this.name="Roaming Warclaw",this.jr1=this.boof61016,this.jr2=this.jr1-3,this.tribe.push("DN"),this.hints=["EMO"],this.spawnCode=`${"RPT"}${this.level}`,this.optional=!0,this.ftext="You may put a 1/1 Raptor into another lane."}}class Zi extends M{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Epoch Hawk",this.jr1=this.boof469,this.jr2=this.boof71117,this.tribe.push("MC"),this.hints=["EMO"];const i=this.boof4710;this.text=`While you have 6 or more cards in hand, this gets "Activate: Put a ${i}/${i} Epoch Soldier into an available lane."`}canActivate(t){return k.toPlayer(t.owner).hand.length>5&&g.emptyLanes(t.owner).length>0}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){const i=g.jr5(t.param);g.birthCreature(this.soldier,"P",t.playerA,t.lane),i.endActivation()}getCardActions(t,i){const e=i??g.jr5(t.param),a=c.emptyPlayerActTarg(e.owner,"CARD",this.code,e.id),h=w.toActions(a);return h.push(C.cancelAction()),h}ddf7(t){if(t.actionKey==="ACTV")return c.ddp5(t);{const i=t;return c.ddp4(t,i.playerA,i.lane,this.soldier)}}ddf8(t){return t.trigger.type==="TE"}jr8(t){k.drawCard(t.ownerPlayerA,1);const i=k.toPlayer(t.ownerPlayerA),e=i.triggers.findIndex(a=>a.customCode===t.trigger.customCode);e>-1&&i.triggers.splice(e,1),E.triggerDone()}get soldier(){return "EPS"+this.level}}class Ki extends M{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Esperian Sage",this.jr1=this.boof3510,this.jr2=this.boof124,this.tribe.push("HM"),this.hints=["ALU"],this.bonus={play:this.ddp9(1,this.jr1+this.jr2,this.jr1,0,.5)*.5},this.text=`When ${this.name} enters play, discard and level up a card.~Allied Uterra: You may put a copy of this into another lane.`}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("FR",this.code);a.interactive=!0;const h=e.jr4("EF",this.code);return h.interactive=!0,e}handleAction(t){if(t.zone==="H")L.levelAndDiscard(t);else{const i=t;g.birthCreature(this.code,"R",i.playerA,i.lane)}C.actionDone(!0)}ddf8(t){return t.event.code==="ENT"?t.event.creature.id===t.creatId:!1}jr8(t){if(t.trigger.type==="FR")if(L.allied("U")){const i=g.jr5(t.creatId),e=c.actionTarget("TF","CARD",this.code,t.creatId);e.player="F",e.lanes=g.laneIdx.filter(h=>h!==i.lane);const a=w.toActions(e);a.push(C.noneEndTrigger()),C.ddf5(a)}else E.triggerDone();else{const i=c.lvlHandActTarg(this.code,t.creatId),e=w.toActions(i);e.length>0?C.ddf5(e):E.triggerDone()}}ddf7(t){if(t.zone==="H")return c.actionEval(t,"DC");{const i=t;return c.ddp4(t,i.playerA,i.lane,this.code)}}}class Yi extends M{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Esperian Steelplate",this.jr1=this.boof369,this.jr2=this.boof6916,this.tribe.push("IN"),this.hints=["ALA"],this.text=`Activate: Heal ${this.boof358} damage from each other friendly creature.~Allied Alloyin: Armor ${this.boof247}.`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("FR",this.code),e}canActivate(t){const i=c.crFriendNotMeTarg(t.id);return g.creatByTarget(i).length>0}startActivation(t){const i=this.boof358,e=c.crFriendNotMeTarg(t.id);g.creatByTarget(e).forEach(a=>{a.heal(i)}),t.endActivation()}jr8(t){L.allied("A")&&g.jr5(t.creatId).addArmor(this.boof247),E.triggerDone()}}class Xi extends M{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Everflame Phoenix",this.jr1=this.lValN([7,0,22]),this.jr2=this.lValN([6,1,15]),this.tribe.push("PX"),this.initMobile=this.lValN([1,0,2]),this.level===2?(this.initDefend=!0,this.text=`When you gain a rank, replace ${this.name} with a level 3 ${this.name}.`,this.hints=["RH","LV"],this.bonus={exist:this.ddp9(1,37,22,0)}):this.level===3&&(this.text=`Vengeance: Put a level 2 ${this.name} into this lane.`,this.bonus={exist:this.ddp9(1,1,0,0)})}jr3(t,i){const e=super.jr3(t,i);return this.level===2?e.jr4("RU",this.code):this.level===3&&e.jr4("VN",this.code),e}ddf8(t){return t.trigger.type==="RU"?t.event.playerA===t.ownerPlayerA:super.ddf8(t)}jr8(t){if(t.trigger.type==="RU"){const i=g.jr5(t.creatId);g.birthCreature(`${"EFP"}3`,"R",i.owner,i.lane)}else if(t.trigger.type==="VN"){const e=t.event.creature;g.birthCreature(`${"EFP"}2`,"P",e.owner,e.lane)}E.triggerDone()}}class qi extends M{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Frostmane Dragon",this.jr1=this.lValN([6,9,13]),this.jr2=this.jr1+1,this.tribe.push("IC","DG"),this.initMobile=2,this.text=`At the start of your turn, if ${this.name} was Forged last turn, you may put a Level ${this.level} Frostmane egg into an available lane.`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("FR",this.code),e}handleAction(t){g.birthCreature(`${"FME"}${this.level}`,"P",t.playerA,t.lane),C.actionDone(!0)}ddf8(t){return t.trigger.type==="TS"?t.event.playerA===t.ownerPlayerA:!1}jr8(t){const i=g.jr5(t.creatId);if(t.event.code==="ENT"){const e=i.jr4("TS",this.code);e.interactive=!0,e.changes=!0,e.customCode=i.id,E.triggerDone()}else if(t.event.code==="TRS"){const e=t.trigger.customCode,a=i.triggers.find(m=>m.customCode===e);a&&i.removeTrigger(a);const h=c.emptyPlayerActTarg("F","CARD",this.code,""),u=w.toActions(h);u.length===0?E.triggerDone():(u.push(C.noneEndTrigger()),C.ddf5(u))}}ddf7(t){return c.ddp4(t,t.playerA,t.lane,`${"FME"}${this.level}`)}}class ji extends gt{constructor(t){super(t),this.faction="T",this.rarity="C",this.name="Frostshatter Strike";const i=this.boof4711;this.text=`Deal ${i} damage to an enemy creature.~Give a friendly creature ${y.jr9(i,0)} this turn.`}playTargets(){const t=super.playTargets();return this.friends().length>0&&t.push(c.crEnemyActTarg("CARD",this.code,"P1")),t}handleAction(t){const i=v.deTil(t.param);if(i[0]==="P1")C.ddf5(this.getCardActions(t));else{this.logSpell();const e=g.ddf6(t),a=g.jr5(i[1]),h=this.boof4711;a.hurtDirect(h,this.code);const u=c.mod("AT",h,this.code);u.expiry="ET",e.addMod(u),L.spellCast()}}friends(t=""){const i=c.crFriendActTarg("CARD",this.code,v.enTil("P2",t));return w.toActions(i)}getCardActions(t,i){const e=g.ddf6(t),a=this.friends(e.id);return a.push(C.cancelAction()),a}ddf7(t){const i=v.deTil(t.param);if(i[0]==="P1")return c.ddp5(t);{const e=this.boof359,a=c.actionEvalBuffN(t,t.playerA,t.lane,e),h=g.jr5(i[1]);return a.vectors.push(c.ddp1(h.owner,h.lane,{dmg:e})),a}}}class Ji extends gt{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Gauntlets of Sulgrim";const i=this.boof2510;this.text=`Give a friendly creature Armor ${i}, then deal damage equal to its Armor to an enemy creature.`}playTargets(){const t=super.playTargets();if(this.baddies().length>0){const i=c.crFriendActTarg("CARD",this.code,"P1");i.canArmor=!0,t.push(i)}return t}handleAction(t){const i=v.deTil(t.param);if(i[0]==="P1")C.ddf5(this.getCardActions(t));else{this.logSpell();const e=g.ddf6(t),a=g.jr5(i[1]),h=this.boof2510;a.addArmor(h),e.hurtDirect(a.armor,this.code),L.spellCast()}}baddies(t=""){return w.toActions(c.crEnemyActTarg("CARD",this.code,v.enTil("P2",t)))}getCardActions(t,i){if(t.actionKey==="CARD"){const e=g.ddf6(t),a=C.cancelAction(),h=this.baddies(e.id);return h.push(a),h}return super.getCardActions(t,i)}ddf7(t){const i=v.deTil(t.param);if(i[0]==="P1")return c.ddp5(t);{const e=g.jr5(i[1]),a=this.boof2510,h=c.ddp3(t,e,{arm:a});return h.vectors.push(c.ddp1(t.playerA,t.lane,{dmg:e.armor+a})),h}}}class Qi extends M{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Gemhide Ravager",this.jr1=this.boof5915,this.jr2=this.jr1+1,this.tribe.push("DN"),this.hints=["OL","ALT","ATH","LKV"],this.bonus={exist:this.ddp9(0,0,0,this.jr1)},this.text=`When ${this.name} ${y.dbdtap()}, you gain that much health.~Allied Tempys: Mobility ${this.level}.`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("FR",this.code),e.jr4("DM",this.code),e}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&!i.creatureTarg&&i.creatureSrc&&i.source.id===t.creatId}return!1}jr8(t){if(t.trigger.type==="FR")L.allied("T")&&g.jr5(t.creatId).addMobility(this.level),E.triggerDone();else if(t.trigger.type==="DM"){const i=t.event;k.healPlayer(t.ownerPlayerA,i.dmg),E.triggerDone()}}}class _i extends M{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Glaceus, Tundra Tyrant",this.jr1=this.boof5916,this.jr2=this.jr1+2,this.tribe.push("IC","EL"),this.hints=["TL"];const i=`Gain Rank: each enemy ${y.levelGateText(this.level,!0)}creature gets "When this is dealt damage, destroy it."`,e=this.level===3?"At the start of each turn, deal 1 damage to each enemy creature.~":"";this.text=e+i}jr3(t,i){const e=super.jr3(t,i);return e.jr4("RU",this.code),this.level===3&&e.jr4("TS",this.code),e}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;if(i.creatureTarg&&i.target.id===t.creatId)return!0}return t.trigger.type==="RU"?t.event.playerA===t.ownerPlayerA:t.trigger.type==="TS"}jr8(t){if(t.trigger.type==="RU"){const i=c.crEnemyTarg();i.level=w.ddf2(this.level),g.creatByTarget(i).forEach(e=>{e.jr4("DM",this.code),e.hints.push("DD"),e.changed=!0})}else if(t.trigger.type==="TS"){const i=Date.now();g.qEnemyCreats().forEach(e=>{e.hurtDirect(1,this.code,i)})}else if(t.trigger.type==="DM"){const i=g.jr5(t.creatId);i.status==="A"&&U.destroy(i,this.code)}E.triggerDone()}}class tr extends gt{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Grave Pact",this.isFree=this.level===3,this.text=`Destroy a friendly creature.~Destroy an ${y.levelGateText(this.level+1,!0)}enemy creature.`}playTargets(){const t=super.playTargets();if(this.enemyTargActions().length>0){const i=c.crFriendActTarg("CARD",this.code,"P1");t.push(i)}return t}handleAction(t){const i=v.deTil(t.param);if(i[0]==="P1")C.ddf5(this.getCardActions(t));else{this.logSpell();const e=g.ddf6(t),a=g.jr5(i[1]),h=Date.now();U.destroy(a,this.code,h),U.destroy(e,this.code,h),L.spellCast()}}enemyTargActions(t=""){const i=c.crEnemyActTarg("CARD",this.code,v.enTil("P2",t));return i.level=w.ddf2(this.level+1),w.toActions(i)}getCardActions(t,i){const e=g.ddf6(t),a=this.enemyTargActions(e.id);return a.push(C.cancelAction()),a}ddf7(t){const i=v.deTil(t.param);if(i[0]==="P1")return c.ddp5(t);{const e=g.jr5(i[1]),a=c.ddp8(t,e,"SD"),h=c.ddp1(t.playerA,t.lane);return h.destroy=!0,a.vectors.push(h),a}}}class er extends gt{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Hungering Strike";const i=this.boof359;this.text=`Give a friendly creature +${i} attack.~Give an enemy creature -${i} attack.`}playTargets(){const t=super.playTargets();if(this.enemyTargActions().length>0){const i=c.crFriendActTarg("CARD",this.code,"P1");t.push(i)}return t}handleAction(t){const i=v.deTil(t.param);if(i[0]==="P1")C.ddf5(this.getCardActions(t));else{this.logSpell();const e=g.ddf6(t),a=g.jr5(i[1]),h=this.boof359;a.buff(h,0),e.buff(-h,0),L.spellCast()}}getCardActions(t,i){const e=g.ddf6(t),a=this.enemyTargActions(e.id);return a.push(C.cancelAction()),a}ddf7(t){const i=v.deTil(t.param);if(i[0]==="P1")return c.ddp5(t);{const e=c.actionEval(t,"ST"),a=g.ddf6(t),h=g.jr5(i[1]),u=this.boof359;return e.vectors.push(c.ddp1(a.owner,a.lane,{att:-u}),c.ddp1(h.owner,h.lane,{att:u})),e}}enemyTargActions(t=""){const i=c.crEnemyActTarg("CARD",this.code,v.enTil("P2",t));return w.toActions(i)}}class ir extends M{constructor(t){super(t),this.faction="U",this.rarity="C",this.name="Hunting Pack",this.jr1=this.boof3612,this.jr2=this.boof248,this.tribe.push("WF"),this.hints=["EML"],this.text=`When ${this.name} enters play, you have a 50% chance to put a copy of ${this.name} into an available lane.`}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("EF",this.code);return a.interactive=!0,e}handleAction(t){g.birthCreature(this.code,"P",t.playerA,t.lane),C.actionDone(!0)}ddf8(t){return t.trigger.type==="EF"&&t.event.creature.id===t.creatId}jr8(t){if(v.randInt(0,2)===1){const e=c.emptyPlayerActTarg("F","CARD",this.code,""),a=c.actionTarget("TB","NOTR",this.code,""),h=w.toActions([e,a]);h.length===1?E.triggerDone():C.ddf5(h)}else E.triggerDone()}ddf7(t){return c.ddp4(t,t.playerA,t.lane,this.code)}}class rr extends M{image(t){return super.fixedImage(t)}constructor(t){super(t),this.faction="T",this.rarity="T",this.name="Iztek, Avatar of Flame",this.jr1=this.lValN([7,12,20]),this.jr2=this.boof6915,this.tribe.push("FR","EL"),this.initAggro=!0,this.text=`When Iztek ${y.dbdtap()}, deal that much damage to that player again.~When you play Iztek's Frost, replace this with a level ${this.level} Iztek, Avatar of Frost.`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("PC",this.code),e.jr4("DM",this.code),e}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&!i.creatureTarg&&i.creatureSrc&&i.source.id===t.creatId}else if(t.trigger.type==="PC"){const i=t.event;if(i.playerA===t.ownerPlayerA)return O.getCard(i.cardCode).cardCode()==="IFR"}return!1}jr8(t){if(t.trigger.type==="DM"){const i=t.event;k.ddf3(!t.ownerPlayerA,i.dmg,this.code)}else if(t.trigger.type==="PC"){const i=g.jr5(t.trigger.creatId);g.birthCreature(`${"IZR"}${this.level}`,"R",i.owner,i.lane)}E.triggerDone()}}class ar extends M{image(t){return super.fixedImage(t)}constructor(t){super(t),this.faction="T",this.rarity="T",this.name="Iztek, Avatar of Frost",this.jr1=this.boof6915,this.jr2=this.lValN([7,12,20]),this.tribe.push("IC","EL"),this.initAggro=!0;const i=this.boof2510;this.text=`When you play Iztek's Flame, replace this with a level ${this.level} Iztek, Avatar of Flame.~Activate: Deal ${i} damage to a creature.`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("PC",this.code),e}ddf7(t){if(t.actionKey==="ACTV")return c.ddp5(t);{const i=t;return c.ddp2(i,i.playerA,i.lane,{dmg:this.boof2510})}}canActivate(t){return!0}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){const i=g.ddf6(t),e=g.jr5(t.param);i.hurtDirect(this.boof2510,this.code),e.endActivation()}ddf8(t){const i=t.event;return i.playerA===t.ownerPlayerA?O.getCard(i.cardCode).cardCode()==="IFL":!1}jr8(t){const i=g.jr5(t.trigger.creatId);g.birthCreature(`${"IZL"}${this.level}`,"R",i.owner,i.lane),E.triggerDone()}getCardActions(t,i){const e=i??g.jr5(t.param);return w.toActions([c.crActTarg("CARD",this.code,e.id),w.buttonTarget("CANC")])}}class sr extends M{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Killion, Infinity Warden",this.maxLevel=4,this.jr1=this.lValN([6,9,16,22]),this.jr2=this.lValN([3,7,14,20]),this.tribe.push("FB");let i;this.level<3?i=`a ${y.levelGateText(this.level)} card in your`:this.level===3?i="a card in your hand and":i="each card in your hand, deck, and",this.text=`Forge: Level up ${i} discard pile.`}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("FR",this.code);return a.interactive=this.level<4,e}handleAction(t){const i=k.getActive();if(t.zone==="N"){const e=O.getCard(i.discard[t.position]);i.discard[t.position]=e.levelUpCard(),pt.popMode(),C.actionDone(!0)}else{const e=O.getCard(i.hand[t.position]);i.hand[t.position]=e.levelUpCard(),this.discardLevel(!0)}}jr8(t){if(this.level<3)this.discardLevel(!1);else if(this.level===3){const i=w.toActions(c.lvlHandActTarg(this.code,""));i.length>0?C.ddf5(i):this.discardLevel(!1)}else{const i=k.getActive();this.levelDeck(i.deck),this.levelDeck(i.hand),this.levelDeck(i.discard),E.triggerDone()}}ddf7(t){return c.actionEval(t,"DC")}discardLevel(t){const i=k.getActive(),e=c.target("TD");e.player=k.toTarget(i),e.level=w.ddf2(this.level),e.canLevel=!0;const a=Ht.generateContent(i.discard,!1,e);if(a.length>0){const h=a.map(u=>{const m=c.deckSelectAction("CARD",u.cardCode,u.sourceIdx);return m.hostCard=this.code,m});Ht.showCustomDeck(a,h)}else t?C.actionDone(!0):E.triggerDone()}levelDeck(t){t.map(e=>{const a=O.getCard(e);return a.canLevel()?a.levelUpCard():e}).forEach((e,a)=>t[a]=e)}}class nr extends M{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Lavafused Asir",this.jr1=this.boof369,this.jr2=this.jr1*2,this.tribe.push("FR","AS"),this.text=`While a friendly creature is unopposed, gets ${y.jr9(this.jr1,0)}.`,this.hints=["OL"];const i=this.avgCreatureStats()[0];this.bonus={exist:this.ddp9(0,i,i,0)}}jr3(t,i){const e=super.jr3(t,i),a=e.addEffect("PS",this.code);return a.area="A",e}enforceEffect(t,i){const e=c.crTarg(),a=i.status!=="A";e.player=k.toTarget(i.owner);const h=g.creatByTarget(e),u=c.mod("AT",this.jr1,i.id);h.forEach(m=>{m.opposed||a?m.removeModSafe(i.id):m.addModSafe(u)})}}class or extends M{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Leafkin Progenitor",this.jr1=this.boof3711,this.jr2=this.jr1,this.tribe.push("PL"),this.level===3?(this.text=`Activate: Put a level 1 ${this.name} into an adjacent available lane.`,this.bonus={exist:this.ddp9(1,6,3,0)}):(this.text=`Activate: Replace this with a level ${this.level+1} ${this.name}.`,this.bonus={exist:this.ddp9(0,12*this.level,6*this.level,0)})}canActivate(t){return this.level===3?C.emptyAdjacents(t,"").length>0:!0}startActivation(t){this.level===3?C.ddf5(this.getCardActions(c.ddf4(),t)):(g.birthCreature(this.leafCode(this.level+1),"R",t.owner,t.lane),t.endActivation())}handleAction(t){const i=g.jr5(t.param);g.birthCreature(this.leafCode(1),"P",t.playerA,t.lane),i.endActivation()}getCardActions(t,i){const e=i??g.jr5(t.param),a=C.emptyAdjacents(e,"");return a.push(C.cancelAction()),a}ddf7(t){if(t.actionKey==="ACTV"){if(this.level===3)return c.ddp5(t);{const i=g.jr5(t.param),e=c.ddp4(t,i.owner,i.lane,this.leafCode(this.level+1));return e.hints=["RE"],e}}else{const i=t;return c.ddp4(t,i.playerA,i.lane,this.leafCode(1))}}leafCode(t){return`${"LKP"}${t}`}}class Se extends M{cardConstruct(t){({["AFO"]:()=>this.aetorC(),["CRS"]:()=>this.scootC(),["FOL"]:()=>this.forcC(),["TEX"]:()=>this.texC(),["TSM"]:()=>this.tsmithC()})[t]()}targAction(t,i,e){({["AFO"]:(h,u)=>this.doNossing(h,u),["CRS"]:(h,u)=>this.doNossing(h,u),["FOL"]:(h,u)=>this.doNossing(h,u),["TEX"]:(h,u)=>this.doNossing(h,u),["TSM"]:(h,u)=>this.doNossing(h,u)})[t](i,e)}playTarg;optional=!1;ftext="";forgeLevels=[1,2,3,4];constructor(t){super(t),this.playTarg=c.lvlHandActTarg(this.code,""),this.cardConstruct(this.cardCode()),this.forgeLevels.includes(this.level)&&(this.text="Forge: "+this.ftext)}jr3(t,i){const e=super.jr3(t,i);if(this.forgeLevels.includes(this.level)){const a=e.jr4("FR",this.code);a.interactive=!0}return e}handleAction(t){L.levelAndDiscard(t);const i=g.jr5(t.param);this.targAction(this.cardCode(),t,i),C.actionDone(!0)}jr8(t){const i=w.toActions(this.playTarg);i.length>0?(i.forEach(e=>{e.param=t.creatId}),this.optional&&i.push(C.noneEndTrigger()),C.ddf5(i)):E.triggerDone()}doNossing(t,i){}ddf7(t){return c.actionEval(t,"DC")}aetorC(){this.faction="A",this.rarity="C",this.name="Aetherforge Oracle",this.jr1=this.boof61218,this.jr2=this.boof246,this.tribe.push("HM"),this.optional=!0,this.playTarg.card="S",this.ftext="You may discard and level up a spell.",this.bonus={play:.5}}scootC(){this.faction="A",this.rarity="R",this.name="Cerebral Scout",this.jr1=this.boof51015,this.jr2=this.boof3712,this.tribe.push("MM"),this.optional=!0,this.playTarg.tribe="MM",this.ftext="You may discard and level up a Metamind.",this.bonus={play:.5}}forcC(){this.faction="A",this.rarity="H",this.name="Forge Oracle",this.jr1=this.lValN([1,10,20]),this.jr2=this.jr1,this.tribe.push("ST"),this.playTarg.faction="A",this.optional=!0,this.ftext="You may discard an Alloyin card and level it.",this.level===1?(this.hints=["LV"],this.bonus={play:1}):(this.consistent=!0,this.bonus={play:.3})}texC(){this.faction="A",this.rarity="C",this.name="Tech Explorer",this.jr1=this.lValN([1,8,18]),this.jr2=this.jr1+2,this.tribe.push("GN"),this.level===1&&(this.hints=["LV"]),this.optional=!0,this.playTarg.card="C",this.ftext="You may discard and level up a creature.",this.bonus={play:.5}}tsmithC(){this.faction="A",this.rarity="C",this.name="Technosmith",this.jr1=this.boof5915,this.jr2=this.jr1-1,this.tribe.push("HM"),this.optional=!0,this.ftext=`You may ${y.daluac()}.`,this.bonus={play:.5}}}class hr extends gt{constructor(t){super(t),this.faction="A",this.rarity="C",this.name="Metatransfer",this.text=`Give a creature ${y.jr9(-this.boof579,0)}.~Discard and level up a card.`}playTargets(){const t=super.playTargets();return t.push(c.crActTarg("CARD",this.code,"P1")),t}handleAction(t){const i=v.deTil(t.param);if(i[0]==="P1"){const e=g.ddf6(t),a=c.lvlHandActTarg(this.code,v.enTil("P2",e.id));a.deckPositionSkip=C.cardBeingPlayed.position;const h=w.toActions(a);h.length===0?(this.logSpell(),e.buff(-this.boof579,0),L.spellCast()):(h.push(C.cancelAction()),C.ddf5(h))}else{this.logSpell(),g.jr5(i[1]).buff(-this.boof579,0);const a=t;a.position<C.cardBeingPlayed.position&&(C.cardBeingPlayed.position-=1),L.levelAndDiscard(a),L.spellCast()}}ddf7(t){if(v.deTil(t.param)[0]==="P1"){const e=t,a=c.actionEvalBuffN(t,e.playerA,e.lane,-this.boof579);return a.bonus=.5,a}else return c.actionEval(t,"DC")}}class lr extends M{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Mimicleaf",this.jr1=this.lValN([2,5,11]),this.jr2=this.jr1,this.tribe.push("PL"),this.text=`Activate: Put a level ${this.level} ${this.name} into an adjacent available lane.`}canActivate(t){return C.emptyAdjacents(t,"").length>0}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){const i=g.jr5(t.param);g.birthCreature(i.code,"P",t.playerA,t.lane),i.endActivation()}getCardActions(t,i){const e=i??g.jr5(t.param),a=C.emptyAdjacents(e,"");return a.push(C.cancelAction()),a}ddf7(t){if(t.actionKey==="ACTV")return c.ddp5(t);{const i=t;return c.ddp4(t,i.playerA,i.lane,this.code)}}}class cr extends M{constructor(t){if(super(t),this.faction="U",this.rarity="L",this.name="Mimicwurm",this.jr1=7,this.jr2=this.jr1,this.tribe.push("WR"),this.level>1){this.hints=[this.level===2?"EMO":"EML"];const i=this.level-1;this.bonus={play:this.ddp9(i,14*i,7*i,0)}}this.text=this.lValS(["","Forge: You may put a level 1 Mimicwurm into another lane.","Forge: You may put a level 2 Mimicwurm into another lane. Then you may put a level 1 Mimicwurm into another lane."])}jr3(t,i){const e=super.jr3(t,i);if(this.level>1){const a=e.jr4("FR",this.code);a.interactive=!0}return e}handleAction(t){v.deTil(t.param)[0]==="P1"?this.level===3?(this.wurmsign(2,t),C.ddf5(this.getCardActions(t))):(this.wurmsign(1,t),C.actionDone(!0)):(this.wurmsign(1,t),C.actionDone(!0))}jr8(t){C.ddf5(this.fieldActions("P1",[t.event.creature.lane]))}fieldActions(t,i){const e=c.actionTarget("TF","CARD",this.code,v.enTil(t,i[0]));e.player="F",e.lanes=g.laneIdx.filter(h=>!i.includes(h));const a=w.toActions(e);return a.push(C.noneEndTrigger()),a}wurmsign(t,i){g.birthCreature(this.wurmCode(t),"R",i.playerA,i.lane)}wurmCode(t){return`${"MMW"}${t}`}getCardActions(t,i){const e=v.deTil(t.param),a=[t.lane,parseInt(e[1])];return this.fieldActions("P2",a)}ddf7(t){const i=v.deTil(t.param),e=this.level===2||i[0]==="P2"?1:2,a=c.ddp4(t,t.playerA,t.lane,this.wurmCode(e));return a.final=e===1,a.hints=["RE"],a}}class ge extends gt{lookup(t){return{["BRN"]:{c:()=>this.boutC(),z:(e,a)=>this.burner(e,a,8),e:e=>this.burnerEval(e,8)},["IFL"]:{c:()=>this.izfmC(),z:(e,a)=>this.burner(e,a,this.boof6915),e:e=>this.burnerEval(e,this.boof6915)},["LSK"]:{c:()=>this.lspkC(),z:(e,a)=>this.burner(e,a,this.boof6812),e:e=>this.burnerEval(e,this.boof6812)},["LYR"]:{c:()=>this.rainC(),z:(e,a)=>this.rainZ(e,a),e:e=>this.rainE(e)},["SOK"]:{c:()=>this.sealkC(),z:(e,a)=>this.burner(e,a,this.sealzap),e:e=>this.burnerEval(e,this.sealzap)},["SHK"]:{c:()=>this.shkC(),z:(e,a)=>this.shkZ(e,a),e:e=>this.shkE(e)}}[t]}cardCast(t,i,e){this.lookup(t).z(i,e)}castEval(t,i){return this.lookup(t).e(i)}playTarg;burner(t,i,e){i?t.hurtDirect(e,this.code):k.ddf3(t,e,this.code)}burnerEval(t,i){const e=c.actionEval(t,"ST");if(t.zone==="P")e.vectors.push(c.evalVectorPlayerDmg(t.playerA,i));else{const a=t;e.vectors.push(c.ddp1(a.playerA,a.lane,{dmg:i}))}return e}burnText(t){return`Deal ${t} damage to a creature or player.`}constructor(t){super(t),this.playTarg=c.crActTarg("CARD",this.code,""),this.lookup(this.cardCode()).c()}playTargets(){const t=super.playTargets();return t.push(this.playTarg),t.push(c.actionTarget("TP","CARD",this.code,"")),t}handleAction(t){this.logSpell();let i,e;t.zone==="P"?(i=!1,e=t.playerA):(e=g.ddf6(t),i=!0),this.cardCast(this.cardCode(),e,i),L.spellCast()}ddf7(t){return this.castEval(this.cardCode(),t)}boutC(){this.faction="T",this.rarity="R",this.name="Burnout",this.overload=!0,this.maxLevel=1,this.text=this.burnText(8)}izfmC(){this.faction="T",this.rarity="T",this.name="Iztek's Flame",this.text=this.burnText(this.boof6915)}lspkC(){this.faction="T",this.rarity="C",this.name="Lightning Spark",this.text=this.burnText(this.boof6812)}rainC(){this.faction="U",this.rarity="C",this.name="Lysian Rain",this.text=`Give a creature or player +${this.boof7911} health.`}rainZ(t,i){const e=this.boof7911;i?t.buff(0,e):k.healPlayer(t,e)}rainE(t){const i=this.boof7911,e=c.actionEval(t,"ST");if(t.zone==="P")e.vectors.push(c.evalVectorPlayerLife(t.playerA,i));else{const a=t;e.vectors.push(c.ddp1(a.playerA,a.lane,{hlt:i}))}return e}sealkC(){this.faction="T",this.rarity="C",this.name="Seal of Kadras",this.level<3&&(this.hints=["LV"]),this.consistent=this.level>1,this.text=this.burnText(this.sealzap)}get sealzap(){return this.lValN([1,2,25])}shkC(){this.faction="T",this.rarity="H",this.name="Static Shock",this.text=`${this.burnText(this.boof124)} You may play an additional ${y.levelGateText(this.level,!0)}spell this turn.`}shkZ(t,i){this.burner(t,i,this.boof124);const e=L.freeCard(this.code);e.condition.level=w.ddf2(this.level),e.condition.card="S"}shkE(t){const i=this.boof124,e=this.burnerEval(t,i);return e.bonus=1,e}}class ur extends M{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Nefrax, the Soulweaver",this.jr1=this.boof4712,this.jr2=this.lValN([10,15,25]),this.tribe.push("HM");const i=this.boof51015;this.text=`Activate: Put a ${i}/${i} Spirit into an available lane.~Forge: Destroy a friendly creature.`,this.bonus={play:this.ddp9(1,i*2,i,0)}}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("FR",this.code);return a.interactive=!0,e}canActivate(t){return this.empties(t).length>0}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){const i=v.deTil(t.param);if(i[0]==="P1"){const e=g.jr5(i[1]);g.birthCreature(`${"SPN"}${this.level}`,"P",t.playerA,t.lane),e.endActivation()}else{const e=g.ddf6(t);U.destroy(e,this.code),C.actionDone(!0)}}jr8(t){const i=c.crFriendActTarg("CARD",this.code,""),e=w.toActions(i);C.ddf5(e)}empties(t){const i=c.emptyPlayerActTarg("F","CARD",this.code,v.enTil("P1",t.id));return w.toActions(i)}getCardActions(t,i){if(t.actionKey==="ACTV"){const e=i??g.jr5(t.param);let a;return a=this.empties(e),a.push(C.cancelAction()),a}return super.getCardActions(t,i)}ddf7(t){if(t.actionKey==="ACTV")return c.ddp5(t);{const i=v.deTil(t.param),e=t;return i[0]==="P1"?c.ddp4(t,e.playerA,e.lane,`${"SPN"}${this.level}`):c.ddp7(t,e.playerA,e.lane)}}}class dr extends M{constructor(t){super(t),this.faction="N",this.rarity="T",this.name="Netherdrake",this.jr1=this.boof4815,this.jr2=this.jr1,this.initMobile=this.lValN([0,0,1]),this.tribe.push("DG"),this.hints=["FK"],this.text=`When this enters play or moves into a lane, destroy the opposing ${y.levelGateText(this.level,!0)}creature.`}image(t){return this.rawImage(`${"NSH"}${this.level}`,t)}jr3(t,i){const e=super.jr3(t,i);return e.jr4("FK",this.code),e.jr4("EF",this.code),e}ddf8(t){return t.trigger.type==="EF"&&t.event.creature.id===t.creatId}jr8(t){const e=t.event.creature.opposed;e&&w.levelTestCommon(e.level,this.level)&&U.destroy(e,this.code),E.triggerDone()}}class fr extends Te{enforceEffect(t,i){i.lane===3?i.removeModSafe(i.id):i.addModSafe(c.mod("AR",this.boof236,i.id)),super.enforceEffect(t,i)}}class gr extends M{constructor(t){super(t),this.faction="U",this.rarity="L",this.name="Nova, Grove Queen",this.jr1=this.lValN([3,5,10,14]),this.jr2=this.lValN([7,10,15,19]),this.tribe.push("FB"),this.maxLevel=4;const i=this.nbuf,e=this.lValS(["an adjacent","each adjacent","each","each"]);this.text=`Forge: Put a 1/1 Seedling into ${e} available space.~When a friendly creature is replaced, Nova gets ${y.jr9(i,i)}.`,this.bonus={play:2},this.hints=this.level<3?["EMA"]:["EML"]}get nbuf(){return this.lValN([1,3,5,10])}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("FR",this.code);return this.level===1&&(a.interactive=!0),e.jr4("RP",this.code),e}ddf8(t){if(t.event.code==="RPL"){const i=t.event;return t.creatId!==i.replacedCreat.id&&t.ownerPlayerA===i.replacedCreat.owner}return!1}jr8(t){const i=g.jr5(t.creatId);if(t.event.code==="RPL"){const e=this.nbuf;i.buff(e,e),E.triggerDone()}else{const e="NSD"+this.level,a=g.emptyLanes(t.ownerPlayerA);if(this.level>1){const h=this.level===2?i.adjacent.filter(m=>a.includes(m)):a,u=Date.now();h.forEach(m=>{const b=g.birthCreature(e,"P",i.owner,m,u);b&&b.hints.push("RT")}),E.triggerDone()}else{const h=i.adjacent.filter(u=>a.includes(u));if(h.length===0)E.triggerDone();else if(h.length===1){const u=g.birthCreature(e,"P",i.owner,h[0]);u&&u.hints.push("RT"),E.triggerDone()}else{const u=C.emptyAdjacents(i,"");C.ddf5(u)}}}}handleAction(t){g.birthCreature("NSD"+this.level,"P",t.playerA,t.lane),C.actionDone(!0)}ddf7(t){return c.ddp4(t,t.playerA,t.lane,"NSD"+this.level)}}class mr extends gt{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Omnomnom";const i=this.boof246,e=i*-1;this.text=`Give a friendly Zombie ${y.jr9(i,i,!0)}, and Regenerate ${i}.~Then give an enemy non-Zombie ${y.jr9(e,e)}.`}playTargets(){const t=super.playTargets();if(this.nonZombies().length>0){const i=c.crFriendActTarg("CARD",this.code,"P1");i.tribe="ZB",t.push(i)}return t}handleAction(t){const i=v.deTil(t.param);if(i[0]==="P1")C.ddf5(this.getCardActions(t));else{this.logSpell();const e=g.ddf6(t),a=g.jr5(i[1]),h=this.boof246;a.buff(h,h),a.addRegen(h),e.buff(-h,-h),L.spellCast()}}nonZombies(t=""){const i=c.crEnemyActTarg("CARD",this.code,v.enTil("P2",t));return w.toActions(i).filter(e=>{const a=e;return!g.ddf6(a).isTribe("ZB")})}getCardActions(t,i){if(t.actionKey==="CARD"){const e=g.ddf6(t),a=C.cancelAction(),h=this.nonZombies(e.id);return h.push(a),h}return super.getCardActions(t,i)}ddf7(t){const i=v.deTil(t.param);if(i[0]==="P1")return c.ddp5(t);{const e=g.jr5(i[1]),a=this.boof246,h=c.ddp3(t,e,{att:a,hlt:a,rgn:a});return h.vectors.push(c.ddp1(t.playerA,t.lane,{att:-a,hlt:-a})),h}}}class pr extends M{constructor(t){super(t),this.faction="A",this.rarity="H",this.name="Onyxium Allomancer",this.jr1=this.boof248,this.jr2=this.boof61016,this.tribe.push("HM"),this.hints=["ALN","OL"];const i=this.boof358;this.text=`Activate: Discard and level up a card.~Allied Nekrium: Regenerate ${i}.`,this.bonus={exist:this.ddp9(0,i,0,0,.5)}}jr3(t,i){const e=super.jr3(t,i);return e.jr4("FR",this.code),e}canActivate(t){return k.toPlayer(t.owner).hand.some(e=>O.getCard(e).canLevel())}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){const i=g.jr5(t.param);L.levelAndDiscard(t),i.endActivation()}jr8(t){L.allied("N")&&g.jr5(t.creatId).addRegen(this.boof358),E.triggerDone()}getCardActions(t,i){if(t.actionKey==="ACTV"){const e=i??g.jr5(t.param),a=c.lvlHandActTarg(this.code,e.id);return w.toActions([a,w.buttonTarget("CANC")])}return super.getCardActions(t,i)}ddf7(t){return t.actionKey==="ACTV"?c.ddp5(t):c.actionEval(t,"DC")}}class yr extends M{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Onyxium Phantasm",this.jr1=this.boof246,this.jr2=this.lValN([9,12,19]),this.initRegen=this.boof124,this.tribe.push("ST"),this.text=`Allied Alloyin: Activate: Give a creature ${y.jr9(this.boof4812n,0)}`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("FR",this.code),e}canActivate(t){return t.hasMod(t.id)}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){const i=g.jr5(t.param);g.ddf6(t).buff(this.boof4812n,0),i.endActivation()}jr8(t){if(L.allied("A")){const i=g.jr5(t.creatId);i.addMod(c.mod("AL",!0,i.id)),i.changed=!0}E.triggerDone()}getCardActions(t,i){if(t.actionKey==="ACTV"){const e=i??g.jr5(t.param),a=c.crActTarg("CARD",this.code,e.id),h=w.toActions(a);return h.push(C.cancelAction()),h}return super.getCardActions(t,i)}ddf7(t){if(t.actionKey==="ACTV")return c.ddp5(t);{const i=t;return c.actionEvalBuffN(t,i.playerA,i.lane,this.boof4812n)}}}class br extends gt{constructor(t){super(t),this.faction="T",this.rarity="R",this.name="Oratek Battlebrand",this.hints=["ALA"];const i=this.boof71013;this.text=`Deal ${i} damage to a creature.~Allied Alloyin: You may discard a card and level it.`}playTargets(){const t=super.playTargets();return t.push(c.crActTarg("CARD",this.code,"")),t}handleAction(t){if(t.zone==="F"){this.logSpell();const i=t;if(g.ddf6(i).hurtDirect(this.boof71013,this.code),L.allied("A")){const a=this.levelActs();a.length===1?L.spellCast():C.ddf5(a)}else L.spellCast()}else if(t.zone==="H"){const i=t;i.position<C.cardBeingPlayed.position&&(C.cardBeingPlayed.position-=1),L.levelAndDiscard(i),L.spellCast()}else t.zone==="B"&&t.param==="NOTR"?L.spellCast():super.handleAction(t)}ddf7(t){return c.actionEval(t,"DC")}levelActs(){const t=c.actionTarget("TB","CARD",this.code,"NOTR"),i=c.lvlHandActTarg(this.code,"");return i.deckPositionSkip=C.cardBeingPlayed.position,w.toActions([i,t])}}class vr extends M{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Oratek Warhammer",this.jr1=this.boof3713,this.jr2=this.lValN([8,12,19]),this.initMobile=this.level,this.tribe.push("FR","AS"),this.hints=["OL","LKV","ALA"],this.text=`Allied Alloyin: When ${this.name} ${y.dbdtap()} on your turn, you may discard and level up a card.`,this.bonus={exist:.5}}jr3(t,i){const e=super.jr3(t,i);return e.jr4("FR",this.code),e}handleAction(t){L.levelAndDiscard(t),C.actionDone(!0)}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&!i.creatureTarg&&i.creatureSrc&&i.source.id===t.creatId&&i.source.owner===k.getActiveB()}return!1}jr8(t){if(t.trigger.type==="FR"){if(L.allied("A")){const i=g.jr5(t.creatId),e=i.jr4("DM",this.code);e.interactive=!0,i.changed=!0}E.triggerDone()}else if(t.trigger.type==="DM"){const i=w.toActions(c.lvlHandActTarg(this.code,""));i.length>0?(i.push(C.noneEndTrigger()),C.ddf5(i)):E.triggerDone()}}ddf7(t){return c.actionEval(t,"DC")}}class Ue extends M{hitCreature;constructor(t,i){super(t),this.hitCreature=i}jr3(t,i){const e=super.jr3(t,i);return e.jr4("DM",this.code),e}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&i.creatureTarg===this.hitCreature&&i.creatureSrc&&i.source.id===t.creatId}return!1}}class Ar extends Ue{constructor(t){super(t,!1),this.faction="U",this.rarity="L",this.name="Oros, Deepwood's Chosen",this.jr1=this.lValN([7,11,16,0]),this.jr2=this.jr1,this.initBT=!0,this.maxLevel=4,this.tribe.push("FB"),this.hints=["OL","LKV"];const i=`When Oros ${y.dbdtap()}, you gain that much health.`,e=this.level===4?"Oros gets +attack and +health equal to your health.~":"";this.text=e+i}jr3(t,i){const e=super.jr3(t,i);return this.level===4&&e.addEffect("PH",this.code),e}jr8(t){const i=t.event;k.healPlayer(t.ownerPlayerA,i.dmg),E.triggerDone()}enforceEffect(t,i){const e=k.toPlayer(i.owner).health;i.status==="A"&&(i.removeModSafe(i.id),i.addModSafe(c.mod("HL",e,i.id)),i.addModSafe(c.mod("MH",e,i.id)),i.addModSafe(c.mod("AT",e,i.id)))}}class kr extends M{constructor(t){super(t),this.faction="U",this.rarity="R",this.name="Oxidon Spitter",this.jr1=this.boof7914,this.jr2=this.boof3510,this.tribe.push("DN"),this.l3=this.level===3,this.text=`Forge: Negate Armor from ${this.l3?"each":"an"} enemy creature.`}l3;jr3(t,i){const e=super.jr3(t,i),a=e.jr4("FR",this.code);return a.interactive=!this.l3,e}jr8(t){if(this.l3)g.creatByTarget(c.crEnemyTarg()).forEach(i=>{i.negateArmor=!0}),E.triggerDone();else{const i=c.crEnemyActTarg("CARD",this.code,""),e=w.toActions(i);e.length>0?C.ddf5(e):E.triggerDone()}}handleAction(t){const i=g.ddf6(t);i.negateArmor=!0,C.actionDone(!0)}ddf7(t){const i=g.ddf6(t);return c.ddp3(t,i,{arm:-i.armor})}}class ne extends M{lookup(t){return{["AFS"]:{c:()=>this.afsC(),a:e=>this.afsA(e),t:e=>this.afsT(e),e:e=>this.afsE(e)},["DMW"]:{c:()=>this.drixC(),a:e=>this.drixA(e),t:e=>this.drixT(e),e:e=>this.drixE(e)},["FGG"]:{c:()=>this.fggC(),a:e=>this.fggA(e),t:e=>this.fggT(e),e:e=>this.fggE(e)},["GHS"]:{c:()=>this.mvpC(),a:e=>this.mvpA(e),t:e=>this.mvpT(e),e:e=>this.mvpE(e)},["OWW"]:{c:()=>this.owwC(),a:e=>this.owwA(e),t:e=>this.owwT(e),e:e=>this.owwE(e)},["UPM"]:{c:()=>this.upakC(),a:e=>this.upakA(e),t:e=>this.upakT(e),e:e=>this.upakE(e)},["WFM"]:{c:()=>this.wfmC(),a:e=>this.wfmA(e),t:e=>this.wfmT(e),e:e=>this.wfmE(e)}}[t]}runAct(t,i){this.lookup(t).a(i)}testAct(t,i){return this.lookup(t).t(i)}constructor(t){super(t),this.lookup(this.cardCode()).c()}canActivate(t){return this.testAct(this.cardCode(),t)}startActivation(t){this.runAct(this.cardCode(),t),t.endActivation()}ddf7(t){return this.lookup(this.cardCode()).e(t)}evalAfterPlayCards(t){return x.turn.regularPlays>0||x.turn.freeCards.length>0?c.actionEval(t,"NR"):c.actionEval(t,"ST")}afsC(){this.faction="A",this.rarity="L",this.name="Arcflight Squadron",this.jr1=this.boof4710,this.jr2=this.jr1+2,this.tribe.push("RB"),this.hints=["OL"],this.text=`Activate: You may play an additional ${y.levelGateText(this.level,!0)}Robot this turn.`}afsT(t){return!0}afsA(t){const i=L.freeCard(this.code);i.condition.tribe="RB",i.condition.level=w.ddf2(this.level)}afsE(t){return c.actionEval(t,"ST")}drixC(){this.faction="A",this.rarity="L",this.name="Drix, the Mindwelder",this.jr1=this.boof3612,this.jr2=this.lValN([6,12,21]),this.tribe.push("MM"),this.text=`Activate, discard your hand: Each friendly Metamind gets ${y.jr9(this.level,0)} for each card discarded this way.`}drixT(t){return k.getActive().hand.length>0}drixA(t){const i=k.toPlayer(t.owner),e=i.hand.length*this.level;i.discard.push(...i.hand),i.hand=[];const a=c.crFriendTarg();a.tribe="MM",g.creatByTarget(a).forEach(h=>{h.buff(e,0)})}drixE(t){return this.evalAfterPlayCards(t)}fggC(){this.faction="A",this.rarity="H",this.name="Forge Guardian Gamma",this.jr1=this.boof4816,this.jr2=this.jr1,this.tribe.push("RB","GD");const t=this.boof255080;this.text=`Activate, destroy five friendly Robot Guardians: Put a ${t}/${t} Forge Guardian Omega into this lane.`}fggT(t){return g.creatByTarget(this.fggTarg()).length===5}fggA(t){const i=t.lane,e=t.owner,a=Date.now();g.creatByTarget(this.fggTarg()).forEach(h=>U.destroy(h,this.code,a)),g.birthCreature(`${"FGO"}${this.level}`,"P",e,i)}fggTarg(){const t=c.crFriendTarg();return t.tribe="GD",t}fggE(t){const i=g.jr5(t.param),e=c.ddp4(t,i.owner,i.lane,`${"FGO"}${this.level}`);return e.hints=["RE"],e.bonus=100,e.type="ST",e}mvpC(){this.faction="U",this.rarity="C",this.name="Gemheart Sprout",this.jr1=this.boof357,this.jr2=this.jr1+this.level,this.initDefend=!0,this.tribe.push("PL"),this.text=`Activate: You gain health equal to ${this.level}x the number of friendly creatures.`}mvpT(t){return!0}mvpA(t){const i=g.ddf1().length;k.healPlayer(t.owner,i*this.level)}mvpE(t){return this.evalAfterPlayCards(t)}owwC(){this.faction="A",this.rarity="L",this.name="Oreian Warwalker",this.jr1=this.boof359,this.jr2=this.boof61018,this.tribe.push("RB"),this.text=`Activate: ${this.name} gets ${this.owwbuff+1}x attack.`}owwT(t){return!0}owwA(t){t.buff(t.attack*this.owwbuff,0)}get owwbuff(){return this.lValN([1,1,2])}owwE(t){return this.evalAfterPlayCards(t)}upakC(){this.faction="U",this.rarity="L",this.name="Uterra Packmaster",this.jr1=this.boof6914,this.jr2=this.jr1,this.tribe.push("HM");const t=this.boof124;this.text=`Activate: each other friendly Uterra creature gets ${y.jr9(t,t)}.`}upakT(t){return g.creatByTarget(this.upakTarg(t.id)).length>0}upakA(t){const i=this.boof124;g.creatByTarget(this.upakTarg(t.id)).forEach(e=>{e.buff(i,i)})}upakTarg(t){const i=c.crFriendNotMeTarg(t);return i.faction="U",i}upakE(t){return this.evalAfterPlayCards(t)}wfmC(){this.faction="T",this.rarity="H",this.name="Wildfire Maiden",this.jr1=this.boof4610,this.jr2=this.boof5814,this.tribe.push("FR","AS"),this.text=`Activate, destroy ${this.name}: Deal damage equal to its attack to each enemy creature.`}wfmT(t){return!0}wfmA(t){const i=Date.now();g.creatByTarget(c.crEnemyTarg()).forEach(e=>{e.hurtDirect(t.attack,this.code,i)}),U.destroy(t,this.code)}wfmE(t){const i=g.jr5(t.param),e=c.ddp8(t,i),a=!i.owner;return e.vectors.push(...g.laneIdx.map(h=>c.ddp1(a,h,{dmg:i.attack}))),e}}class ii extends M{lookup(t){return{["MDE"]:{c:()=>this.misdC(),f:e=>this.misdF(e)},["TAB"]:{c:()=>this.thraC(),f:e=>this.thraF(e)}}[t]}cardForge(t,i){this.lookup(t).f(i)}ftext="";constructor(t){super(t),this.lookup(this.cardCode()).c(),this.text="Assault: "+this.ftext,this.ftext=""}jr3(t,i){const e=super.jr3(t,i);return e.jr4("AS",this.code),e}jr8(t){this.cardForge(this.cardCode(),t),E.triggerDone()}misdC(){this.faction="N",this.rarity="C",this.name="Misery Demon",this.jr1=this.boof5915,this.jr2=this.boof2510,this.tribe.push("DM"),this.hints=["OL"];const t=this.level+3;this.bonus={play:this.ddp9(0,0,0,t*2)},this.ftext=`Deal ${t} damage to the enemy player and gain ${t} health.`}misdF(t){const i=this.level+3;k.ddf3(!t.ownerPlayerA,i,this.code),k.healPlayer(t.ownerPlayerA,i)}thraC(){this.faction="T",this.rarity="C",this.name="Thranik Ambusher",this.jr1=this.boof5813,this.jr2=this.jr1,this.tribe.push("DK"),this.hints=["OL"];const t=this.boof234;this.bonus={play:this.ddp9(0,t+t,t,0)},this.ftext=`${this.name} gets ${y.jr9(t,t)}.`}thraF(t){const i=this.boof234;g.jr5(t.creatId).buff(i,i)}}class vt extends M{lookup(t){return{["ATT"]:{c:()=>this.atorC(),t:(e,a)=>this.atorT(e,a),b:(e,a)=>this.atorB(e,a)},["FGD"]:{c:()=>this.fgdC(),t:(e,a)=>this.fgdT(e,a),b:(e,a)=>this.fgdB(e,a)},["FSP"]:{c:()=>this.fspC(),t:(e,a)=>this.fspT(e,a),b:(e,a)=>this.fspB(e,a)},["HMF"]:{c:()=>this.hamfC(),t:(e,a)=>this.hamfT(e,a),b:(e,a)=>this.hamfB(e,a)},["HOD"]:{c:()=>this.haroldC(),t:(e,a)=>this.ocarT(e,a),b:(e,a)=>this.haroldB(e,a)},["OJC"]:{c:()=>this.ocarC(),t:(e,a)=>this.ocarT(e,a),b:(e,a)=>this.ocarB(e,a)},["RLW"]:{c:()=>this.restwandC(),t:(e,a)=>this.restwandT(e,a),b:(e,a)=>this.restwandB(e,a)},["RHW"]:{c:()=>this.ruthwandC(),t:(e,a)=>this.restwandT(e,a),b:(e,a)=>this.ruthwandB(e,a)},["SDR"]:{c:()=>this.spdryC(),t:(e,a)=>this.spdryT(e,a),b:(e,a)=>this.spdryB(e,a)},["TDW"]:{c:()=>this.tdwC(),t:(e,a)=>this.tdwT(e,a),b:(e,a)=>this.tdwB(e,a)},["TNL"]:{c:()=>this.tnlC(),t:(e,a)=>this.tnlT(e,a),b:(e,a)=>this.tnlB(e,a)},["UTR"]:{c:()=>this.urexC(),t:(e,a)=>this.urexT(e,a),b:(e,a)=>this.urexB(e,a)}}[t]}testBirth(t,i){return this.lookup(t).t(i,i.event)}actBirth(t,i){this.lookup(t).b(i,i.event)}iTrigger=!0;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const e=super.jr3(t,i);return this.iTrigger&&e.jr4("EF",this.code),e}ddf8(t){return t.event.code==="ENT"?this.testBirth(this.cardCode(),t):!1}jr8(t){this.actBirth(this.cardCode(),t),E.triggerDone()}atorC(){this.faction="T",this.rarity="L",this.name="Ator, Thunder Titan",this.jr1=this.boof6914,this.jr2=this.jr1-1,this.tribe.push("GT"),this.text=`Each another friendly ${y.levelGateText(this.level,!0)}creature gets Assault: Aggressive.`,this.bonus={exist:.5}}atorT(t,i){const e=i.creature;return i.forged&&t.trigger.creatId!==e.id&&e.owner===t.ownerPlayerA&&w.levelTargetTest(w.ddf2(this.level),e.level)&&!e.opposed}atorB(t,i){i.creature.aggressive=!0}fgdC(){this.faction="A",this.rarity="H",this.name="Forge Guardian Delta",this.jr1=this.boof71117,this.jr2=this.jr1,this.tribe.push("RB","GD");const t=this.boof255080;this.text=`When ${this.name} enters play, if there is a friendly Alpha Beta, and Gamma, put a ${t}/${t} Forge Guardian Omega in your discard pile.`}fgdT(t,i){return i.creature.id===t.creatId}fgdB(t,i){const e=c.crTarg();e.player=k.toTarget(t.ownerPlayerA);const a=g.creatByTarget(e).map(h=>h.code.slice(0,3));a.includes("FGA")&&a.includes("FGB")&&a.includes("FGG")&&k.toPlayer(t.ownerPlayerA).discard.push("FGO"+this.level)}fspC(){if(this.faction="A",this.rarity="L",this.name="Flowsteel Prototype",this.jr1=this.lValN([3,6,8]),this.jr2=this.lValN([8,15,20]),this.tribe.push("SS"),this.hints=["P1"],this.iTrigger=this.level>1,this.iTrigger){const t=y.levelGateText(this.level-1);this.text=`When you Forge a ${t} creature, ${this.name} gets +attack equal to that creature's attack.`;const i=this.avgCreatureStats(this.level-1);this.bonus={exist:this.ddp9(0,i[0],i[0],0)*.5}}}fspT(t,i){return!!(i.forged&&i.creature.owner===t.ownerPlayerA&&O.getCard(i.creature.code).level<this.level)}fspB(t,i){g.jr5(t.trigger.creatId).buff(i.creature.attack,0)}hamfC(){this.faction="T",this.rarity="H",this.name="Hammerfang",this.jr1=this.boof51015,this.jr2=this.jr1,this.tribe.push("YT"),this.text=`When an enemy creature enters play opposing ${this.name}, move this to an available space at random.`}hamfT(t,i){const e=g.jr5(t.creatId);return i.creature.owner!==t.ownerPlayerA&&e.lane===g.oppositeLane(i.creature.lane)}hamfB(t,i){const e=g.emptyLanes(t.ownerPlayerA),a=e.length;a>0&&g.jr5(t.creatId).move(e[v.randInt(0,a)])}haroldC(){this.faction="T",this.rarity="R",this.name="Herald of Destruction",this.jr1=this.boof369,this.jr2=this.lValN([9,12,18]),this.tribe.push("FR","AS"),this.text=`When an enemy creature enters play, if it wasn't Forged, deal damage equal to ${this.name}'s attack to the enemy player.`,this.bonus={exist:this.ddp9(0,0,0,this.jr1)*.5}}haroldB(t,i){if(vt.itBirthedFirst(i.creature.id,t.creatId)){const e=g.jr5(t.creatId);k.ddf3(!e.owner,e.attack,this.code)}}ocarC(){this.faction="A",this.rarity="H",this.name="Oreian Justicar",this.jr1=this.boof5814,this.jr2=this.boof81220,this.tribe.push("HM");const t=this.ocarbuff;this.text=`When an enemy creature enters play, if it wasn't Forged, it gets ${y.jr9(t,0)}.`,this.bonus={exist:this.ddp9(0,t,t,0)*-.5}}ocarT(t,i){return i.creature.owner!==t.ownerPlayerA&&!i.forged}ocarB(t,i){vt.itBirthedFirst(i.creature.id,t.creatId)&&i.creature.buff(this.ocarbuff,0)}get ocarbuff(){return this.lValN([-5,-10,-20])}restwandC(){this.faction="U",this.rarity="H",this.name="Restless Wanderers",this.jr1=this.boof51014,this.jr2=this.boof3610,this.tribe.push("ST","WD");const t=this.boof369;this.text=`When another friendly Spirit Wanderer enters play, ${this.name} gets ${y.jr9(t,t)}.`}restwandT(t,i){return t.trigger.creatId!==i.creature.id&&i.creature.owner===t.ownerPlayerA?i.creature.isTribe("WD"):!1}restwandB(t,i){const e=g.jr5(t.trigger.creatId),a=this.boof369;e.buff(a,a)}ruthwandC(){this.faction="N",this.rarity="C",this.name="Ruthless Wanderers",this.jr1=this.boof3610,this.jr2=this.boof51014,this.tribe.push("ST","WD");const t=-this.boof369;this.text=`When another friendly Spirit Wanderer enters play, the creature opposing this gets ${y.jr9(t,t)}.`}ruthwandB(t,i){const a=g.jr5(t.trigger.creatId).opposed;if(a){const h=-this.boof369;a.buff(h,h)}}spdryC(){this.faction="U",this.rarity="R",this.name="Spring Dryad",this.jr1=this.boof469,this.jr2=this.jr1,this.tribe.push("DY"),this.hints=["P1"],this.text=`When a friendly creature enters play, ${this.name} gets ${y.jr9(this.level,this.level)}.`,this.bonus={exist:this.ddp9(0,this.level*2,this.level,0)}}spdryT(t,i){return t.trigger.creatId!==i.creature.id&&i.creature.owner===t.ownerPlayerA}spdryB(t,i){g.jr5(t.trigger.creatId).buff(this.level,this.level)}tdwC(){this.faction="N",this.rarity="R",this.name="Tarsus Deathweaver",this.jr1=this.boof5915,this.jr2=this.jr1,this.tribe.push("HM");const t=this.boof246;this.text=`When a friendly creature enters play, if it wasn't Forged, it gets ${y.jr9(t,t)}.`,this.bonus={exist:this.ddp9(0,t*2,t,0)*.5}}tdwT(t,i){return t.trigger.creatId!==i.creature.id&&i.creature.owner===t.ownerPlayerA&&!i.forged}tdwB(t,i){if(vt.itBirthedFirst(i.creature.id,t.creatId)){const e=this.boof246;i.creature.buff(e,e)}}tnlC(){this.faction="N",this.rarity="L",this.name="Tarsus Necrolord",this.jr1=this.boof4812,this.jr2=this.jr1,this.tribe.push("HM");const t=this.boof124,i=this.boof359;this.text=`Forge: Spawn a ${i}/${i} Zombie for each friendly creature that was destroyed this turn.~When a friendly Zombie enters play, ${this.name} gets ${y.jr9(t,t)}.`}tnlT(t,i){return i.creature.owner===t.ownerPlayerA?i.creature.isTribe("ZB"):!1}tnlB(t,i){const e=g.jr5(t.trigger.creatId),a=this.boof124;e.buff(a,a)}urexC(){this.faction="U",this.rarity="H",this.name="Uterradon Rex",this.jr1=this.boof4813,this.jr2=this.boof71118,this.tribe.push("DN");const t=this.boof124;this.text=`When another friendly Dinosaur enters play, it gets ${y.jr9(t,t)}.`,this.bonus={exist:this.ddp9(0,t*2,t,0)*.5}}urexT(t,i){return t.trigger.creatId!==i.creature.id&&i.creature.owner===t.ownerPlayerA&&i.creature.isTribe("DN")}urexB(t,i){if(vt.itBirthedFirst(i.creature.id,t.creatId)){const e=this.boof124;i.creature.buff(e,e)}}static itBirthedFirst(t,i){if(t===i)return!0;let e=!1;const a=U.findDeathTime(i);if(v.isUn(a))e=!0;else{const h=g.findBirthTime(t);(v.isUn(h)||h<=a)&&(e=!0)}return e}}class oe extends Ue{lookup(t){return{["AGM"]:{c:()=>this.agamC(),h:(e,a,h,u)=>this.agamH(e,a,h,u)},["BWK"]:{c:()=>this.blwalkC(),h:(e,a,h,u)=>this.blwalkH(e,a,h,u)},["BRF"]:{c:()=>this.bfangC(),h:(e,a,h,u)=>this.bfangH(e,a,h,u)},["CDT"]:{c:()=>this.cadtC(),h:(e,a,h,u)=>this.cadtH(e,a,h,u)},["GSC"]:{c:()=>this.gcobC(),h:(e,a,h,u)=>this.gcobH(e,a,h,u)},["IHA"]:{c:()=>this.ibhaC(),h:(e,a,h,u)=>this.ibhaH(e,a,h,u)},["SHS"]:{c:()=>this.shimfC(),h:(e,a,h,u)=>this.shimfH(e,a,h,u)}}[t]}image(t){return this.rarity==="T"?this.fixedImage(t):this.leveledImage(t)}cardConstruct(t){this.hints=["OP"],this.lookup(t).c()}creatHit(t,i,e,a,h){this.lookup(t).h(i,e,a,h)}constructor(t){super(t,!0),this.cardConstruct(this.cardCode())}jr8(t){const i=t.event,e=i.source,a=i.target;e?this.creatHit(this.cardCode(),t,i,e,a):y.add("ERROR couldnt find creature - "+this.name),E.triggerDone()}agamC(){this.faction="T",this.rarity="L",this.name="Agamemnon",this.jr1=this.boof4814,this.jr2=this.lValN([8,12,18]),this.level>1&&(this.initMobile=1,this.initAggro=this.level===3),this.tribe.push("GT"),this.text=`When ${this.name} ${y.dbdtac()} on your turn, this battles again.`}agamH(t,i,e,a){t.ownerPlayerA===k.getActiveB()&&(e.extraBattles+=1)}blwalkC(){this.faction="N",this.rarity="R",this.name="Blight Walker",this.jr1=this.boof137,this.jr2=this.lValN([5,10,17]),this.tribe.push("ZB"),this.text=`When ${this.name} ${y.dbdtac(this.level)}, destroy that creature.`,this.hints.push("BX")}blwalkH(t,i,e,a){a.status==="A"&&w.levelTestCommon(a.level,this.level)&&U.destroy(a,this.code)}bfangC(){this.faction="U",this.rarity="T",this.name="Broodfang",this.jr1=this.level,this.jr2=this.level,this.maxLevel=this.level,this.minLevel=this.level,this.tribe.push("SN"),this.text=this.poisonText(this.jr1)}bfangH(t,i,e,a){a.addPoison(this.jr1)}poisonText(t){return`When ${this.name} ${y.dbdtac()}, give that creature gets Poison ${t}.`}cadtC(){this.faction="U",this.rarity="R",this.name="Cadaverous Thicket",this.jr1=this.boof135,this.jr2=this.lValN([7,12,22]),this.tribe.push("PL"),this.text=this.poisonText(this.jr1)}cadtH(t,i,e,a){a.addPoison(this.jr1)}gcobC(){this.faction="U",this.rarity="C",this.name="Ghostscale Cobra",this.jr1=this.boof4610,this.jr2=this.boof135,this.tribe.push("SN"),this.text=this.poisonText(this.jr1)}gcobH(t,i,e,a){a.addPoison(this.jr1)}ibhaC(){this.faction="A",this.rarity="L",this.name="Ironbeard, Hammer of Anvillon",this.jr1=this.lValN([4,7,12,15]),this.jr2=this.lValN([7,11,17,25]),this.initArmor=this.lValN([1,3,5,20]),this.tribe.push("FB"),this.maxLevel=4;const t=this.level===4?"'s attack gets reduced to 0":` gets ${y.jr9(this.boof246n,0)}`;this.text=`When Ironbeard ${y.dbdtac()}, that creature${t}, and moves to an available enemy lane at random.`}ibhaH(t,i,e,a){if(a.status==="A"){const h=this.level===4?a.attack*-1:this.boof246n;a.buff(h,0);const u=g.emptyLanes(a.owner),m=u.length;m>0&&a.move(u[v.randInt(0,m)])}}shimfC(){this.faction="U",this.rarity="R",this.name="Shimmerfang Serpent",this.jr1=this.boof357,this.jr2=this.boof61016,this.tribe.push("SN"),this.text=`When ${this.name} ${y.dbdtac()}, that creatures gets that much Poison.`,this.hints.push("ATH")}shimfH(t,i,e,a){a.addPoison(i.dmg)}}class Vt extends Ue{lookup(t){return{["ABR"]:{c:()=>this.ashbC(),h:(e,a,h)=>this.ashyH(e,a,h)},["AMY"]:{c:()=>this.ashmC(),h:(e,a,h)=>this.ashyH(e,a,h)},["CFB"]:{c:()=>this.cfbC(),h:(e,a,h)=>this.cfbH(e,a,h)},["EPS"]:{c:()=>this.epsdC(),h:(e,a,h)=>this.epsdH(e,a,h)},["EFM"]:{c:()=>this.efmC(),h:(e,a,h)=>this.efmH(e,a,h)},["FBC"]:{c:()=>this.fbcC(),h:(e,a,h)=>this.fbcH(e,a,h)},["RTS"]:{c:()=>this.rzstC(),h:(e,a,h)=>this.rzstH(e,a,h)},["RSE"]:{c:()=>this.rselC(),h:(e,a,h)=>this.rselH(e,a,h)},["SVH"]:{c:()=>this.strhyC(),h:(e,a,h)=>this.strhyH(e,a,h)},["URB"]:{c:()=>this.uridC(),h:(e,a,h)=>this.uridH(e,a,h)},["VES"]:{c:()=>this.veskC(),h:(e,a,h)=>this.veskH(e,a,h)}}[t]}cardConstruct(t){this.hints=["OP","LKV"],this.lookup(t).c()}creatHit(t,i,e,a){this.lookup(t).h(i,e,a)}bothTurns=!0;constructor(t){super(t,!1),this.cardConstruct(this.cardCode())}jr8(t){const i=t.event,e=i.source;e&&(this.bothTurns||e.owner===k.getActiveB())?this.creatHit(this.cardCode(),t,i,e):y.add("ERROR couldnt find creature - "+this.name),E.triggerDone()}ashyC(){this.faction="T",this.rarity="C",this.tribe.push("FR","AS");const t=this.boof124;this.text=`When ${this.name} ${y.dbdtap()}, it gets ${y.jr9(t,t)}.`}ashyH(t,i,e){const a=this.boof124;e.buff(a,a)}ashbC(){this.name="Ashurian Brawler",this.jr1=this.boof7911,this.jr2=this.jr1,this.ashyC()}ashmC(){this.name="Ashurian Mystic",this.jr1=this.boof3610,this.jr2=this.boof5812,this.initAggro=!0,this.ashyC()}cfbC(){this.faction="T",this.rarity="H",this.name="Cinderfist Brawler",this.jr1=this.boof71014,this.jr2=this.boof357,this.tribe.push("FR","AS"),this.text=`When ${this.name} ${y.dbdtap()}, deal that much damage to that player again.`}cfbH(t,i,e){k.ddf3(!e.owner,i.dmg,e.code)}epsdC(){this.faction="A",this.rarity="T",this.name="Epoch Soldier",this.minLevel=this.level,this.maxLevel=this.level,this.jr1=this.boof4710,this.jr2=this.jr1,this.tribe.push("HM"),this.bothTurns=!1,this.text=`When ${this.name} ${y.dbdtap()} on your turn, draw a card at the end of the turn.`}epsdH(t,i,e){const a=c.trigger("TE","EPH"+this.level);a.customCode=v.genId(),k.toPlayer(t.ownerPlayerA).triggers.push(a)}efmC(){this.faction="T",this.rarity="L",this.name="Everflame Mystic",this.jr1=this.boof5813,this.jr2=this.jr1+1,this.tribe.push("FR","AS"),this.text=`When ${this.name} ${y.dbdtap()} on your turn, you may play ${this.lValS(["one","two","three"])} spells this turn.`}efmH(t,i,e){if(k.getActiveB()===e.owner)for(let a=0;a<this.level;a++){const h=L.freeCard(this.code);h.condition.card="S"}}fbcC(){this.faction="T",this.rarity="L",this.name="Flameblade Champion",this.jr1=this.boof4712,this.jr2=this.boof5916,this.tribe.push("FR","EL"),this.hints.push("ENF"),this.text=`When ${this.name} ${y.dbdtap()}, deal that much damage to each enemy creature.`}fbcH(t,i,e){const a=Date.now();g.qPlayerCreats(!e.owner).forEach(h=>h.hurtDirect(i.dmg,this.code,a))}rzstC(){this.faction="T",this.rarity="C",this.name="Razortooth Stalker",this.jr1=this.boof4812,this.jr2=this.jr1+1,this.initMobile=1,this.tribe.push("DN");const t=this.boof235;this.text=`When ${this.name} ${y.dbdtap()}, it gets ${y.jr9(t,t)}.`}rzstH(t,i,e){const a=this.boof235;e.buff(a,a)}rselC(){this.faction="T",this.rarity="H",this.name="Rumblestone Elemental",this.jr1=this.boof246,this.jr2=this.level,this.initAggro=!0,this.tribe.push("ER","EL"),this.hints=["OL"],this.bonus={play:this.ddp9(1,this.jr1,this.jr1,0)},this.text=`When ${this.name} ${y.dbdtap()}, deal that much damage to itself as well.~Assault: Spawn a copy of ${this.name}. Then repeat this for each copy.`}rselH(t,i,e){e.hurtDirect(i.dmg,this.code)}strhyC(){this.faction="U",this.rarity="C",this.name="Stranglevine Hydra",this.jr1=this.boof5815,this.jr2=this.jr1+1,this.tribe.push("HY"),this.text=`When ${this.name} ${y.dbdtap()}, it gets Regenerate ${this.level}.`}strhyH(t,i,e){e.addRegen(this.level)}uridC(){this.faction="U",this.rarity="L",this.name="Uterradon Ridgeback",this.jr1=this.boof71117,this.jr2=this.boof4713,this.initBT=!0,this.tribe.push("DN"),this.hints.push("FRS"),this.bothTurns=!1;const t=this.boof124;this.text=`When ${this.name} ${y.dbdtap()} on your turn, each friendly creature gets ${y.jr9(t,t,this.level===3)}${this.level===3?", and Breakthrough":""}.`}uridH(t,i,e){const a=this.boof124,h=this.level===3;g.ddf1().forEach(u=>{u.buff(a,a),h&&(u.breakthrough=!0)})}veskC(){this.faction="N",this.rarity="L",this.name="Vyric Ebonskull",this.jr1=this.boof3713,this.jr2=this.boof71117,this.tribe.push("VP"),this.text=`When Vyric ${y.dbdtap()}, destroy an enemy ${y.levelGateText(this.level,!0)} creature at random.${this.level===3?" Then Spawn a copy of that creature.":""}`}veskH(t,i,e){const a=c.crTarg();a.player=k.toTarget(i.target),a.level=w.ddf2(this.level);const h=g.creatByTarget(a);if(h.length>0){const u=Date.now(),m=h[v.randInt(0,h.length)];U.destroy(m,this.code,u),this.level===3&&g.birthCreature(m.code,"S",e.owner,void 0,u)}}}class Be extends M{lookup(t){return{["CHR"]:{c:()=>this.crgC(),d:(e,a,h)=>this.crgD(e,a,h)},["DZD"]:{c:()=>this.dozC(),d:(e,a,h)=>this.dozD(e,a,h)},["IMD"]:{c:()=>this.eddieC(),d:(e,a,h)=>this.eddieD(e,a,h)},["TDS"]:{c:()=>this.tsrC(),d:(e,a,h)=>this.tsrD(e,a,h)}}[t]}constructor(t){super(t),this.lookup(this.cardCode()).c()}cares=!0;cardDamaged(t,i){const e=i.event,a=e.target;this.lookup(t).d(i,a,e)}image(t){return this.cardCode()==="DZD"?this.fixedImage(t):super.image(t)}jr3(t,i){const e=super.jr3(t,i);return this.cares&&e.jr4("DM",this.code),e}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.creatureTarg&&i.target.id===t.creatId}return!1}jr8(t){this.cardDamaged(this.cardCode(),t),E.triggerDone()}crgC(){this.faction="U",this.rarity="L",this.name="Chrogias",this.jr1=this.lValN([1,0,40]),this.jr2=this.lValN([1,15,40]),this.tribe.push("PL"),this.level===1?(this.hints=["LV","ST"],this.bonus={play:1},this.cares=!1):this.level===2?(this.initRegen=2,this.initDefend=!0,this.bonus={play:1}):this.level===3&&(this.initBT=!0,this.initRegen=5),this.level>1&&(this.hints=["DLK"],this.text="When Chrogias is dealt damage, you gain that much health.")}crgD(t,i,e){k.healPlayer(t.ownerPlayerA,e.dmg)}dozC(){this.faction="U",this.rarity="L",this.name="Dozer, the Dormant",this.jr1=0,this.jr2=this.level*3+6,this.tribe.push("BR"),this.initDefend=!0,this.hints=["DLK"],this.text=`When ${this.name} is dealt damage and survives, replace it with a ${this.jr2}/${this.jr2} Dozer, the Awakened`}dozD(t,i,e){if(i.health>0&&i.status==="A"){const a=g.birthCreature(`${"DZA"}${this.level}`,"R",i.owner,i.lane);a&&a.setHealth(i.health)}}eddieC(){this.faction="A",this.rarity="L",this.name="Iron Maiden",this.jr1=this.lValN([1,3,30]),this.jr2=this.jr1,this.tribe.push("RB"),this.consistent=this.level>1,this.level===3?(this.initBT=!0,this.hints=["DLK","LKR"],this.text="When Iron Maiden is dealt damage, deal that much damage to the enemy player."):(this.cares=!1,this.hints=["LV","ST"],this.bonus={play:1})}eddieD(t,i,e){k.ddf3(!t.ownerPlayerA,e.dmg,this.code)}tsrC(){this.faction="U",this.rarity="L",this.name="Thundersaur",this.jr1=0,this.jr2=this.level*12,this.tribe.push("DN"),this.initBT=!0,this.hints=["DLK","LKR"],this.bonus={play:this.ddp9(0,0,this.jr2/2,0)},this.text=`When ${this.name} is dealt damage, it gets +1 attack for each damage dealt.`}tsrD(t,i,e){i.buff(e.dmg,0)}}class Lt extends M{lookup(t){return{["DFB"]:{c:()=>this.dfbC(),d:e=>this.dfbD(e)},["GGD"]:{c:()=>this.ggdC(),d:e=>this.ggdD(e)},["GGR"]:{c:()=>this.ggdrC(),d:e=>this.ggdrD(e)},["GGP"]:{c:()=>this.ggpC(),d:e=>this.ggpD(e)},["NGT"]:{c:()=>this.ngauntC(),d:e=>this.ngauntD(e)},["SRH"]:{c:()=>this.sharvC(),d:e=>this.sharvD(e)},["YNS"]:{c:()=>this.yuruC(),d:e=>this.yuruD(e)}}[t]}creatDied(t,i){this.lookup(t).d(i)}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const e=super.jr3(t,i);return e.jr4("DS",this.code),e}ddf8(t){return t.trigger.type==="DS"}jr8(t){this.creatDied(this.cardCode(),t),E.triggerDone()}dfbC(){this.faction="N",this.rarity="R",this.name="Dr. Frankenbaum",this.jr1=this.boof6914,this.jr2=this.jr1-1,this.tribe.push("AB");const t=this.boof234;this.text=`When a friendly Abomination is destroyed, deal ${t} damage to the enemy player.`,this.bonus={exist:this.ddp9(0,0,0,t*2)}}dfbD(t){const i=g.jr5(t.creatId),a=t.event.creature;(i.id===a.id||a.owner===i.owner&&a.isTribe("AB")&&Lt.itDiedFirst(a.id,i.id))&&k.ddf3(!i.owner,this.boof234,this.code)}ggdC(){this.faction="N",this.rarity="L",this.name="Grimgaunt Devourer",this.jr1=this.boof579,this.jr2=this.jr1-2,this.tribe.push("GG"),this.hints=["OL"],this.text=`When a creature is destroyed, ${this.name} gets ${y.jr9(this.level,this.level)}.`,this.bonus={exist:this.ddp9(0,this.level*2,this.level,0)*2}}ggdD(t){g.jr5(t.creatId).buff(this.level,this.level)}get doomb(){return this.lValN([1,1,2])}ggdrC(){this.faction="N",this.rarity="L",this.name="Grimgaunt Doomrider",this.jr1=this.boof4712,this.jr2=this.jr1+2,this.tribe.push("GG");const t=this.doomb;this.text=`When a friendly creature is destroyed, ${this.name} moves to that creatures lane and gets ${y.jr9(t,t)}. Then give the opposing creature ${y.jr9(-t,-t)}.`,this.bonus={exist:this.ddp9(0,t*4,t*2,0)}}ggdrD(t){const i=g.jr5(t.creatId),a=t.event.creature;if(a.owner===i.owner&&i.id!==a.id&&Lt.itDiedFirst(a.id,i.id)&&!g.searchByLane(a.lane,a.owner)){const u=this.doomb;i.move(a.lane),i.buff(u,u);const m=i.opposed;m&&m.buff(-u,-u)}}ggpC(){this.faction="N",this.rarity="H",this.name="Grimgaunt Predator",this.jr1=this.boof5914,this.jr2=this.jr1,this.initMobile=1,this.tribe.push("GG"),this.hints=["OP"];const t=this.boof246;this.text=`When the opposing creature is destroyed, ${this.name} gets ${y.jr9(t,t)}.`,this.bonus={exist:this.ddp9(0,2*t,t,0)}}ggpD(t){const i=g.jr5(t.creatId),e=g.oppositeLane(i.lane),a=t.event;if(a.creature.owner!==i.owner&&a.creature.lane===e){const h=this.boof246;i.buff(h,h)}}ngauntC(){this.faction="N",this.rarity="R",this.name="Nightgaunt",this.jr1=this.boof4815,this.jr2=this.jr1+1,this.tribe.push("GG"),this.text=`When a creature is destroyed, ${this.name} gets Regenerate 1.`,this.bonus={exist:this.ddp9(0,4,0,0)}}ngauntD(t){g.jr5(t.creatId).addRegen(1)}sharvC(){this.faction="N",this.rarity="C",this.name="Sorrow Harvester",this.jr1=this.boof4814,this.jr2=this.jr1+2,this.tribe.push("AB"),this.text="When a friendly Abomination is destroyed on your turn, draw a card.",this.bonus={exist:.25}}sharvD(t){const e=t.event.creature;e.owner===t.ownerPlayerA&&e.isTribe("AB")&&k.getActiveB()===t.ownerPlayerA&&Lt.itDiedFirst(e.id,t.creatId)&&k.drawCard(t.ownerPlayerA,1)}yuruC(){this.faction="N",this.rarity="L",this.name="Yuru, the Necrosage",this.jr1=3,this.jr2=this.jr1,this.initDefend=!0,this.tribe.push("HM"),this.hints=["LJ"];const t=this.boof5814;this.text=`When an adjacent non-Spirit creature is destroyed, put a ${t}/${t} Spirit into that lane.`,this.bonus={exist:this.ddp9(1,t*2,t,0)}}yuruD(t){const i=g.jr5(t.creatId),a=t.event.creature;a.owner===i.owner&&i.adjacent.includes(a.lane)&&!a.isTribe("ST")&&Lt.itDiedFirst(a.id,i.id)&&g.birthCreature(`${"XYR"}${this.level}`,"P",i.owner,a.lane)}static itDiedFirst(t,i){if(t===i)return!0;let e=!1;const a=U.findDeathTime(i);if(v.isUn(a))e=!0;else{const h=U.findDeathTime(t);(v.isUn(h)||h<=a)&&(e=!0)}return e}}class Z extends M{lookup(t){return{["AGK"]:{c:()=>this.agknitC(),f:e=>this.agknitF(e)},["AFR"]:{c:()=>this.afsC(),f:e=>this.afsF(e)},["BTR"]:{c:()=>this.bwtC(),f:e=>this.bwtF(e)},["BSS"]:{c:()=>this.bssC(),f:e=>this.bssF(e)},["BZD"]:{c:()=>this.bzdrC(),f:e=>this.bzdrF(e)},["BFM"]:{c:()=>this.bfmC(),f:e=>this.bfmF(e)},["CTI"]:{c:()=>this.charnC(),f:e=>this.charnF(e)},["CHH"]:{c:()=>this.chihC(),f:e=>this.chihF(e)},["CSW"]:{c:()=>this.chickenC(),f:e=>this.chickenF(e)},["DFR"]:{c:()=>this.dfrC(),f:e=>this.dfrF(e)},["DBA"]:{c:()=>this.dbaC(),f:e=>this.dbaF(e)},["DBN"]:{c:()=>this.drbC(),f:e=>this.drbF(e)},["DDD"]:{c:()=>this.dddC(),f:e=>this.dddF(e)},["EWT"]:{c:()=>this.espwrC(),f:e=>this.espwrF(e)},["FWT"]:{c:()=>this.fwtC(),f:e=>this.fwtF(e)},["GSW"]:{c:()=>this.gwurmC(),f:e=>this.gwurmF(e)},["GSS"]:{c:()=>this.gsC(),f:e=>this.gsF(e)},["IMA"]:{c:()=>this.iracoC(),f:e=>this.iracoF(e)},["LGT"]:{c:()=>this.legtitC(),f:e=>this.legtitF(e)},["LBD"]:{c:()=>this.lbdC(),f:e=>this.lbdF(e)},["LMV"]:{c:()=>this.lyrC(),f:e=>this.lyrF(e)},["MOE"]:{c:()=>this.moeC(),f:e=>this.moeF(e)},["MMA"]:{c:()=>this.mmaC(),f:e=>this.mmaF(e)},["NSY"]:{c:()=>this.nysymC(),f:e=>this.nysymF(e)},["OXM"]:{c:()=>this.onxmarC(),f:e=>this.onxmarF(e)},["OFM"]:{c:()=>this.ofmC(),f:e=>this.ofmF(e)},["OPK"]:{c:()=>this.orpC(),f:e=>this.orpF(e)},["PHM"]:{c:()=>this.phmC(),f:e=>this.phmF(e)},["PSM"]:{c:()=>this.palsC(),f:e=>this.palsF(e)},["SMD"]:{c:()=>this.scorchC(),f:e=>this.scorchF(e)},["SOC"]:{c:()=>this.scythC(),f:e=>this.scythF(e)},["SDN"]:{c:()=>this.souldrC(),f:e=>this.souldrF(e)},["SGG"]:{c:()=>this.ssggC(),f:e=>this.ssggF(e)},["SBD"]:{c:()=>this.sbdC(),f:e=>this.sbdF(e)},["SSK"]:{c:()=>this.sssC(),f:e=>this.sssF(e)},["SYL"]:{c:()=>this.lotusC(),f:e=>this.lotusF(e)},["TGI"]:{c:()=>this.tgiC(),f:e=>this.tgiF(e)},["UGL"]:{c:()=>this.umglidC(),f:e=>this.umglidF(e)},["UWL"]:{c:()=>this.uwarC(),f:e=>this.uwarF(e)},["UWS"]:{c:()=>this.ustokeC(),f:e=>this.ustokeF(e)},["UIW"]:{c:()=>this.uiwC(),f:e=>this.uiwF(e)},["UTM"]:{c:()=>this.umaulC(),f:e=>this.umaulF(e)},["VND"]:{c:()=>this.vdrkC(),f:e=>this.vdrkF(e)},["VNS"]:{c:()=>this.vnsC(),f:e=>this.vnsF(e)},["WWP"]:{c:()=>this.wwpC(),f:e=>this.wwpF(e)},["WFB"]:{c:()=>this.wfbC(),f:e=>this.wfbF(e)}}[t]}cardForge(t,i){this.lookup(t).f(i)}ftext="";forges=!0;flanks=!1;allied="X";constructor(t){super(t),this.lookup(this.cardCode()).c();let i="";this.flanks&&(i="Flank"),this.forges&&(i?i="Forge/"+i:i=y.forglied(this.allied)),i&&(this.text=i+": "+this.ftext),this.ftext=""}jr3(t,i){const e=super.jr3(t,i);return this.forges&&e.jr4("FR",this.code),this.flanks&&e.jr4("FK",this.code),e}jr8(t){this.cardForge(this.cardCode(),t),E.triggerDone()}agknitC(){this.faction="A",this.rarity="L",this.name="Aegis Knight",this.jr1=this.boof5814,this.jr2=this.jr1,this.tribe.push("HM"),this.initArmor=this.lValN([1,2,5]),this.hints=["P2","OP"],this.bonus={play:this.ddp9(0,this.initArmor*2,0,0)},this.ftext="Each friendly creature deals damage equal to its Armor to the opposing creature"}agknitF(t){const i=c.crFriendTarg();i.hasArmor=!0;const e=Date.now();g.creatByTarget(i).forEach(a=>{a.opposed&&a.opposed.hurtDirect(a.armor,a.code,e)})}afsC(){this.faction="T",this.rarity="H",this.name="Ashurian Flamesculptor",this.jr1=this.boof5915,this.jr2=this.boof3610,this.tribe.push("FR","AS"),this.forges=this.level>1,this.consistent=this.forges,this.ftext=`You may play an additional ${y.levelGateText(this.level-1)} Tempys spell this turn.`,this.forges&&(this.bonus={play:this.ddp9(0,0,0,0,(this.level-1)/2)})}afsF(t){const i=L.freeCard(this.code);i.condition.card="S",i.condition.level=w.ddf2(this.level-1),i.condition.faction="T"}bwtC(){if(this.faction="U",this.rarity="H",this.name="Bramblewood Tracker",this.jr1=this.boof3712,this.jr2=this.jr1+3,this.tribe.push("HM"),this.forges=this.level>1,this.forges){const t=this.level-1;this.ftext=`You may play an additional ${y.levelGateText(t)} Uterra creature this turn.`,this.bonus={play:this.ddp6(t)},this.consistent=!0}else this.hints=["LV"]}bwtF(t){const i=L.freeCard(this.code);i.condition.card="C",i.condition.faction="U",i.condition.level=w.ddf2(this.level-1)}bssC(){this.faction="A",this.rarity="L",this.name="Brightsteel Sentinal",this.jr1=this.boof4914,this.jr2=this.jr1+1,this.tribe.push("RB"),this.hints=["P2","OP"];const t=this.boof51015;this.bonus={play:this.ddp9(0,t*1.5,0,0)},this.ftext=`Each friendly Robot gets Armor ${t} this turn.`}bssF(t){const i=this.boof51015,e=c.crFriendTarg();e.tribe="RB",e.canArmor=!0,g.creatByTarget(e).forEach(h=>{const u=c.mod("AR",i,t.creatId);u.expiry="ET",h.addMod(u)})}bzdrC(){this.faction="N",this.rarity="R",this.name="Byzerak Drake",this.jr1=this.boof4814,this.jr2=this.jr1+2,this.initRegen=this.level,this.allied="T",this.tribe.push("DG"),this.hints=["ALT"],this.ftext=`Mobility ${this.level}.`}bzdrF(t){L.allied(this.allied)&&g.jr5(t.creatId).addMobility(this.level)}bfmC(){this.faction="N",this.rarity="H",this.name="Byzerak Frostmaiden",this.jr1=this.boof135,this.jr2=this.boof91420,this.tribe.push("HM"),this.hints=["ALT","OP","FH"],this.flanks=!0;const t=this.boof246;this.ftext=`If ${this.name} is opposed, the opposing creature gets ${y.jr9(-1*t,0)} and this gets ${y.jr9(t,0)}.~Allied Tempys: Mobility ${this.level}.`;const i=this.ddp9(0,t*2,t*2,0);this.bonus={play:i,exist:i/2}}bfmF(t){const e=t.event.creature;t.trigger.type==="FR"&&L.allied("T")&&e.addMobility(this.level);const a=e.opposed;if(a){const h=this.boof246;a.buff(-1*h,0),e.buff(h,0)}}charnC(){this.faction="N",this.rarity="C",this.name="Charnel Titan",this.jr1=this.boof359,this.jr2=this.boof5814,this.tribe.push("AB");const t=this.boof357;this.ftext=`If there is an enemy creature with ${t} or less attack, ${this.name} gets ${y.jr9(t,t)}.`,this.bonus={play:this.ddp9(0,2*t,t,0)/2}}charnF(t){const i=this.boof357,e=c.crEnemyTarg();e.maxAttack=i,g.creatByTarget(e).length>0&&g.jr5(t.creatId).buff(i,i)}chihC(){this.faction="U",this.rarity="C",this.name="Chistlehearth Hunter",this.jr1=this.lValN([2,6,11]),this.jr2=this.boof81217,this.tribe.push("HM"),this.hints=["P2","FRF"],this.ftext=`${this.name} gets ${y.jr9(1,0)} for each other friendly creature.`,this.bonus={play:this.ddp9(0,2,2,0)}}chihF(t){const i=g.ddf1().length;i>1&&g.jr5(t.creatId).buff(i-1,0)}chickenC(){this.faction="T",this.rarity="L",this.name="Cindersmoke Wyvern",this.jr1=this.boof3610,this.jr2=this.lValN([7,12,17]),this.tribe.push("DG"),this.initMobile=this.boof124,this.hints=["FH"],this.forges=!1,this.flanks=!0,this.ftext="Deal damage equal to its attack to the opposing creature. If there is no opposing creature, deal that damage to the enemy player instead.",this.bonus={exist:this.ddp9(0,this.jr1,this.jr1,0)}}chickenF(t){const i=t.event,e=i.creature.attack,a=i.creature.opposed;a?a.hurtDirect(e,this.code):k.ddf3(!t.ownerPlayerA,e,this.code)}dfrC(){this.faction="N",this.rarity="H",this.name="Darkfrost Reaper",this.jr1=this.boof6916,this.jr2=this.boof3713,this.tribe.push("SK"),this.ftext="Destroy each creature with 1 or less attack.",this.bonus={play:this.ddp6()/5}}dfrF(t){const i=c.crTarg();i.maxAttack=1;const e=g.creatByTarget(i),a=Date.now();e.forEach(h=>{U.destroy(h,this.code,a)})}dbaC(){this.faction="U",this.rarity="H",this.name="Deepbranch Ancient",this.jr1=this.boof4812,this.jr2=this.jr1,this.tribe.push("HY"),this.hints=["FRF"],this.ftext=`If there is a friendly creature in each lane, ${this.name} gets ${y.jr9(this.jr1,this.jr2)}.`,this.bonus={play:this.ddp9(0,this.jr1*2,this.jr1,0)/4}}dbaF(t){g.ddf1().length===5&&g.jr5(t.creatId).buff(this.jr1,this.jr2)}drbC(){this.faction="N",this.rarity="C",this.name="Dirge Banshee",this.jr1=this.boof248,this.jr2=this.boof61016,this.tribe.push("ST"),this.hints=["OP"],this.flanks=!0;const t=this.boof246;this.ftext=`If ${this.name} is opposed, the opposing creature gets ${y.jr9(-t,0)} and this gets ${y.jr9(t,0)}.`,this.bonus={play:this.ddp9(0,t*2,t*2,0)}}drbF(t){const i=t.event,e=i.creature.opposed;if(e){const a=this.boof246;e.buff(-a,0),i.creature.buff(a,0)}}dddC(){this.faction="N",this.rarity="L",this.name="Doomwing, Dire Drake",this.jr1=this.boof61018,this.jr2=this.lValN([2,6,10]),this.initMobile=this.level,this.tribe.push("DG"),this.hints=["FK"],this.forges=!1,this.flanks=!0,this.ftext=`Destroy the opposing ${y.levelGateText(this.level,!0)}creature.`,this.bonus={exist:this.ddp6()/2}}dddF(t){const e=t.event.creature.opposed;e&&w.levelTestCommon(e.level,this.level)&&U.destroy(e,this.code)}espwrC(){this.faction="U",this.rarity="R",this.name="Esperian Wartusk",this.jr1=this.boof5916,this.jr2=this.jr1-1,this.initBT=!0,this.allied="A",this.tribe.push("TK"),this.hints=["ALA"];const t=this.boof124;this.ftext=`Armor ${t}.`,this.bonus={play:this.ddp9(0,t,0,0)}}espwrF(t){L.allied(this.allied)&&g.jr5(t.creatId).addArmor(this.boof124)}fwtC(){this.faction="U",this.rarity="H",this.name="Frostwild Tracker",this.jr1=this.boof4712,this.jr2=this.boof248,this.tribe.push("TG"),this.forges=this.level>1;const t=this.level-1;this.ftext=`You may play an additional ${y.levelGateText(t)} creature this turn.`,this.level>1?this.bonus={play:this.ddp6(t)}:this.hints=["LV"]}fwtF(t){const i=L.freeCard(this.code);i.condition.card="C",i.condition.level=w.ddf2(this.level-1)}gwurmC(){this.faction="N",this.rarity="C",this.name="Gloomspire Wurm",this.jr1=this.boof4813,this.jr2=this.jr1,this.tribe.push("WR"),this.hints=["ENN"],this.ftext=`If there are no enemy creatures, ${this.name} gets ${y.jr9(4,4)}.`}gwurmF(t){g.qEnemyCreats().length===0&&g.jr5(t.creatId).buff(4,4)}gsC(){this.faction="U",this.rarity="C",this.name="Glowstride Stag",this.jr1=this.boof5812,this.jr2=this.jr1+this.level,this.tribe.push("ST");const t=this.boof51015;this.ftext=`You gain ${t} health.`,this.bonus={play:this.ddp9(0,0,0,t)}}gsF(t){const i=this.boof51015;k.healPlayer(t.ownerPlayerA,i),y.add("Glowstride flexed for "+i)}iracoC(){this.faction="A",this.rarity="L",this.name="Ironmind Acolyte",this.jr1=this.boof61015,this.jr2=this.jr1-2,this.tribe.push("GN"),this.hints=["P1"],this.ftext="If you have five or more cards in your hand, you may play an additional card this turn.",this.bonus={play:this.ddp6()/5}}iracoF(t){k.toPlayer(t.ownerPlayerA).hand.length>4&&(x.turn.regularPlays+=1)}legtitC(){this.faction="N",this.rarity="R",this.name="Legion Titan",this.jr1=this.boof4812,this.jr2=this.jr1,this.tribe.push("ZB"),this.hints=["ENF"],this.ftext=`${this.name} gets ${y.jr9(this.level,this.level)} for each enemy creature with ${this.boof357} or less attack.`,this.bonus={play:this.ddp9(0,this.level*2,this.level,0)/2}}legtitF(t){const i=c.crEnemyTarg();i.maxAttack=this.boof357;const e=g.creatByTarget(i);if(e.length>0){const a=this.level*e.length;g.jr5(t.creatId).buff(a,a)}}lbdC(){this.faction="U",this.rarity="H",this.name="Lifeblood Dryad",this.jr1=this.lValN([4,7,9]),this.jr2=this.jr1,this.tribe.push("DY"),this.hints=["FRF"];const t=this.boof236;this.ftext=`If there is a friendly creature in each lane, each other friendly creature gets ${y.jr9(t,t)}`,this.bonus={play:this.ddp9(0,t*2,t,0)}}lbdF(t){const i=g.creatByTarget(c.crFriendNotMeTarg(t.creatId));if(i.length===4){const e=this.boof236;i.forEach(a=>a.buff(e,e))}}lyrC(){this.faction="N",this.rarity="L",this.name="Lyria, Muse of Varna",this.jr1=this.boof5815,this.jr2=this.boof4714,this.tribe.push("HM"),this.forges=this.level>1,this.ftext=this.level===2?"Spawn a random creature that was destroyed this game.":"Put a random creature that was destroyed this game into each of your available lanes.",this.forges?(this.hints=["EML"],this.bonus={play:this.ddp6(1)*(this.level-1)}):this.hints=["LV"]}lyrF(t){if(this.level===2){const i=U.gravedigger();i&&g.birthCreature(i,"S",t.ownerPlayerA)}else if(this.level===3){const i=g.emptyLanes(t.ownerPlayerA),e=i.map(a=>U.gravedigger());if(i.length>0&&e[0]){const a=Date.now();i.forEach((h,u)=>{g.birthCreature(e[u],"P",t.ownerPlayerA,h,a)})}}}moeC(){this.faction="T",this.rarity="H",this.name="Master of Elements",this.jr1=this.boof5917,this.jr2=this.jr1,this.tribe.push("HM"),this.forges=this.level>1,this.ftext=`You may play an additional ${y.levelGateText(this.level-1)} spell this turn.`,this.forges&&(this.bonus={play:this.ddp9(0,0,0,0,(this.level-1)/2)})}moeF(t){const i=L.freeCard(this.code);i.condition.card="S",i.condition.level=w.ddf2(this.level-1)}mmaC(){this.faction="A",this.rarity="C",this.name="Metamind Adept",this.jr1=this.boof5915,this.jr2=this.boof4813,this.tribe.push("MM");const t=this.level===1?"":"s";this.ftext=`Draw ${this.level} card${t}.`,this.bonus={play:this.ddp9(0,0,0,0,this.level/4)}}mmaF(t){k.drawCard(t.ownerPlayerA,this.level)}nysymC(){this.faction="N",this.rarity="C",this.name="Nyrali Symbiote",this.jr1=this.boof51015,this.jr2=this.jr1,this.tribe.push("OZ"),this.hints=["OP"];const t=this.boof246;this.ftext=`If ${this.name} is opposed, it gets Regenerate ${t}.`,this.bonus={play:this.ddp9(0,t,0,0)}}nysymF(t){const i=t.event;i.creature.opposed&&i.creature.addRegen(this.boof246)}ofmC(){this.faction="A",this.rarity="R",this.name="Oreian Fieldmarshal",this.jr1=this.boof5914,this.jr2=this.jr1-2,this.tribe.push("HM"),this.hints=["FRS"];const t=this.boof135;this.ftext=`Each other friendly creature gets ${y.jr9(t,0)}.`,this.bonus={play:this.ddp9(0,t*2,t*2,0)}}ofmF(t){const i=this.boof135;g.creatByTarget(c.crFriendNotMeTarg(t.creatId)).forEach(a=>{a.buff(i,0)})}orpC(){this.faction="A",this.rarity="R",this.name="Oreian Peacekeeper",this.jr1=this.boof4816,this.jr2=this.boof248,this.tribe.push("RB"),this.hints=["OP"],this.ftext=`${this.name} gets Armor ${this.jr1} this turn.`,this.bonus={play:this.ddp9(0,this.jr1,0,0)}}orpF(t){const i=g.jr5(t.creatId),e=c.mod("AR",this.jr1,t.creatId);e.expiry="ET",i.addMod(e)}onxmarC(){this.faction="A",this.rarity="R",this.name="Onyxium Marauder",this.jr1=this.boof4714,this.jr2=this.lValN([6,9,17]),this.initArmor=this.level,this.allied="N",this.tribe.push("HM"),this.hints=["ALN"],this.ftext=`Regenerate ${this.level}.`,this.bonus={play:this.ddp9(0,this.level,0,0)}}onxmarF(t){L.allied(this.allied)&&g.jr5(t.creatId).addRegen(this.level)}phmC(){this.faction="A",this.rarity="R",this.name="Palladium Hindermind",this.jr1=this.boof2612,this.jr2=this.boof61016,this.tribe.push("HM"),this.hints=["ENF"],this.ftext=`Each enemy creature gets ${y.jr9(this.boof123n,0)}.`;const t=this.level*2;this.bonus={play:this.ddp9(0,t,t,0)}}phmF(t){const i=this.boof123n;g.qEnemyCreats().forEach(e=>{e.buff(i,0)})}palsC(){this.faction="A",this.rarity="L",this.name="Palladium Simulacrum",this.jr1=this.boof4816,this.jr2=this.boof248,this.initMobile=this.level-1,this.tribe.push("SS"),this.hints=["NX"],this.flanks=!0,this.ftext=`If ${this.name} is in the center lane, Spawn a copy.`,this.bonus={play:this.ddp9(1,this.jr1+this.jr2,this.jr1,0)}}palsF(t){t.event.creature.lane===3&&g.birthCreature(this.code,"S",t.ownerPlayerA)}scorchC(){this.faction="T",this.rarity="L",this.name="Scorchmane Dragon",this.jr1=this.lValN([0,12,24]),this.jr2=this.boof61224,this.tribe.push("DG"),this.initDefend=this.level===1,this.initMobile=this.level-1,this.forges=this.level>1,this.ftext="Deal 5 damage to "+(this.level===2?"the opposing creature.":"each enemy creature and player."),this.level===1?this.hints=["LV"]:this.level===2?(this.hints=["OP"],this.bonus={play:this.ddp9(0,5,0,0)}):this.bonus={play:this.ddp9(0,10,0,5)}}scorchF(t){const i=t.event,e=!t.ownerPlayerA;if(this.level===2){const a=i.creature.opposed;a&&a.hurtDirect(5,this.code)}else if(this.level===3){const a=Date.now();g.qPlayerCreats(e).forEach(h=>h.hurtDirect(5,this.code,a)),k.ddf3(e,5,this.code)}}scythC(){this.faction="N",this.rarity="L",this.name="Chiron, Herald of Torment",this.jr1=12,this.jr2=6,this.tribe.push("DM"),this.hints=["ENS"],this.ftext=`Each enemy creature gets ${y.jr9(-6,0)} and ${this.name} gets ${y.jr9(6,0)} for each enemy creature.`}scythF(t){const i=g.qEnemyCreats();i.forEach(e=>{e.buff(-6,0)}),i.length>0&&g.jr5(t.creatId).buff(6*i.length,0)}souldrC(){this.faction="N",this.rarity="L",this.name="Soul Drinker",this.jr1=1,this.jr2=this.boof4814,this.initMobile=this.level===3?1:0,this.tribe.push("VP"),this.hints=["OP"],this.flanks=this.level===3,this.ftext=`The opposing creature's attack gets reduced to 0 and ${this.name} gains that much attack.`;const t=this.avgCreatureStats()[0]*2;this.bonus={play:this.ddp9(0,t,t,0)}}souldrF(t){const i=t.event,e=i.creature.opposed;if(e){const a=e.attack;i.creature.buff(a,0),e.buff(-1*a,0)}}ssggC(){this.faction="N",this.rarity="H",this.name="Soulscourge Grimgaunt",this.jr1=this.level+1,this.jr2=this.jr1,this.tribe.push("GG"),this.ftext=`${this.name} gets ${y.jr9(this.jr1,this.jr2)} for each creature that was destroyed this turn.`}ssggF(t){const i=this.jr1*x.turn.creaturesKilled;i>0&&g.jr5(t.creatId).buff(i,i)}sbdC(){this.faction="U",this.rarity="C",this.name="Spiritbloom Dryad",this.jr1=this.boof6812,this.jr2=this.jr1+this.level,this.tribe.push("DY"),this.ftext=`Each player gains ${this.boof468} health.`}sbdF(t){const i=this.boof468;k.healPlayer(!0,i),k.healPlayer(!1,i)}sssC(){this.faction="A",this.rarity="C",this.name="Steelskin Spelunker",this.jr1=this.boof5814,this.jr2=this.boof61018,this.tribe.push("HM"),this.ftext=`If there is another friendly creature in the center lane, that creature gets Armor ${this.boof124}`}sssF(t){const i=g.searchByLane(3,t.ownerPlayerA);i&&i.id!==t.creatId&&!i.negateArmor&&i.addArmor(this.boof124)}lotusC(){this.faction="U",this.rarity="H",this.name="Stygian Lotus",this.jr1=this.boof468,this.jr2=this.jr1-1,this.tribe.push("PL"),this.hints=["ENF","EML","OP"],this.ftext=`If ${this.name} is opposed, spawn a copy of it. Then repeat this for each copy.`,this.bonus={play:this.ddp9(1,this.jr1+this.jr2,this.jr1,0)}}lotusF(t){if(t.event.creature.opposed){let e=!0;for(;e;){const a=g.emptyLanes(t.ownerPlayerA),h=a.length;if(h===0)e=!1;else{const u=a[v.randInt(0,h)];g.birthCreature(this.code,"P",t.ownerPlayerA,u).opposed||(e=!1)}}}}tgiC(){this.faction="T",this.rarity="R",this.name="Thundergale Invoker",this.jr1=this.boof3711,this.jr2=this.jr1,this.tribe.push("WN","GT"),this.hints=["LJ"],this.ftext=`Each creature adjacent to ${this.name} moves one lane away if possible.`}tgiF(t){const i=g.jr5(t.creatId),e=i.lane,a=i.owner;if(e>2){const h=g.searchByLane(e-1,a);h&&(g.searchByLane(e-2,a)||h.move(e-2))}if(e<4){const h=g.searchByLane(e+1,a);h&&(g.searchByLane(e+2,a)||h.move(e+2))}}umglidC(){this.faction="T",this.rarity="R",this.name="Umbruk Glider",this.jr1=this.boof71117,this.jr2=this.jr1-4,this.initMobile=this.level,this.allied="U",this.tribe.push("DN"),this.hints=["ALU"],this.ftext="Breakthrough."}umglidF(t){if(L.allied(this.allied)){const i=g.jr5(t.creatId);i.breakthrough=!0}}uwarC(){this.faction="T",this.rarity="H",this.name="Uranti Warlord",this.jr1=this.boof3713,this.jr2=this.boof71117,this.tribe.push("FR","YT"),this.hints=["OP"],this.ftext=`Each friendly Yeti deals ${this.jr1} damage to the opposing creature.`,this.bonus={play:this.ddp9(0,this.jr1,0,0)}}uwarF(t){const i=c.crFriendTarg();i.tribe="YT";const e=g.creatByTarget(i),a=Date.now();e.forEach(h=>{const u=h.opposed;u&&u.hurtDirect(this.jr1,h.code,a)})}ustokeC(){this.faction="T",this.rarity="R",this.name="Uranti Warstoker",this.jr1=this.boof6812,this.jr2=this.jr1-1,this.tribe.push("YT"),this.ftext=`Each other friendly Yeti get  ${y.jr9(this.stokeboof,0)} this turn.`}ustokeF(t){const i=c.crFriendNotMeTarg(t.creatId);i.tribe="YT";const e=g.creatByTarget(i),a=this.stokeboof;e.forEach(h=>{const u=c.mod("AT",a,t.creatId);u.expiry="ET",h.addMod(u)})}get stokeboof(){return this.lValN([3,4,6])}uiwC(){this.faction="A",this.rarity="L",this.name="Uriel Ironwing",this.jr1=this.lValN([6,8,13]),this.jr2=this.boof81117,this.initMobile=this.level,this.tribe.push("AG"),this.hints=["OP","FH"],this.flanks=!0;const t=this.boof246n,i=this.level===3?" If that creature has 0 or less attack, destroy it.":"";this.ftext=`The opposing creature gets ${y.jr9(t,0)}.${i}`;const e=this.ddp9(0,t,t,0);this.bonus={exist:e}}uiwF(t){const a=t.event.creature.opposed;a&&(a.buff(this.boof246n,0),this.level===3&&a.attack<1&&U.destroy(a,this.code))}umaulC(){this.faction="U",this.rarity="C",this.name="Uterradon Mauler",this.jr1=this.boof4712,this.jr2=this.jr1,this.tribe.push("DN"),this.hints=["OP"];const t=this.boof246;this.ftext=`If ${this.name} is opposed, it gets ${y.jr9(t,t)}.`,this.bonus={play:this.ddp9(0,t*2,t,0)}}umaulF(t){const i=t.event;if(i.creature.opposed){const e=this.boof246;i.creature.buff(e,e)}}vdrkC(){this.faction="U",this.rarity="R",this.name="Venomdrinker",this.jr1=this.lValN([5,9,13]),this.jr2=this.jr1,this.tribe.push("NG"),this.ftext=`${this.name} gets ${y.jr9(1,1).replaceAll("1","X")}, where X is the total amount of Poison on each enemy creature.`}vdrkF(t){const i=g.qEnemyCreats();let e=0;i.forEach(a=>{e+=a.poison}),e>0&&g.jr5(t.creatId).buff(e,e)}vnsC(){this.faction="U",this.rarity="H",this.name="Venomous Netherscale",this.jr1=this.boof4713,this.jr2=this.jr1+4,this.tribe.push("NG"),this.ftext=`Double the Poison on each enemy creature${this.level===3?" and the enemy player":""}.`}vnsF(t){const i=c.crEnemyTarg();i.hasPoison=!0,g.creatByTarget(i).forEach(a=>{a.addPoison(a.poison)})}wwpC(){this.faction="U",this.rarity="H",this.name="Weirwood Patriarch",this.jr1=this.boof5714,this.jr2=this.lValN([7,10,17]),this.tribe.push("HM"),this.hints=["P2"];const t=this.boof235;this.ftext=`Each friendly creature with ${this.boof357} or less attack gets ${y.jr9(t,t)}.`,this.bonus={play:this.ddp9(0,t,t,0)}}wwpF(t){const i=this.boof235,e=c.crFriendNotMeTarg(t.creatId);e.maxAttack=this.boof357,g.creatByTarget(e).forEach(a=>a.buff(i,i))}wfbC(){this.faction="N",this.rarity="C",this.name="Witherfrost Banshee",this.jr1=this.boof3612,this.jr2=this.jr1,this.tribe.push("ST"),this.hints=["OP"],this.flanks=!0;const t=this.boof247n;this.ftext=`The opposing creature gets ${y.jr9(t,t)}.`,this.bonus={play:this.ddp9(0,t*2,t,0)}}wfbF(t){const e=t.event.creature.opposed;if(e){const a=this.boof247n;e.buff(a,a)}}}class We extends M{lookup(t){return{["RBG"]:{c:()=>this.rbgC(),g:(e,a)=>this.rbgG(e,a)},["SRV"]:{c:()=>this.sprvC(),g:(e,a)=>this.sprvG(e,a)},["TGK"]:{c:()=>this.tgkC(),g:(e,a)=>this.tgkG(e,a)}}[t]}onGain(t,i){this.lookup(t).g(i,i.event)}hPlayer=0;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const e=super.jr3(t,i);return e.jr4("LG",this.code),e}ddf8(t){return t.trigger.type==="LG"&&this.validPlayer(t)}jr8(t){this.onGain(this.cardCode(),t),E.triggerDone()}validPlayer(t){if(this.hPlayer===0)return!0;const i=t.event;return this.hPlayer===1?t.ownerPlayerA===i.playerA:t.ownerPlayerA!==i.playerA}rbgC(){this.faction="U",this.rarity="H",this.name="Runebark Guardian",this.jr1=this.boof5916,this.jr2=this.jr1,this.tribe.push("HM"),this.hPlayer=1;const t=this.boof135;this.text=`When you gain health, ${this.name} gets ${y.jr9(t,t)}.`,this.bonus={exist:this.ddp9(0,t*2,t,0)*.5}}rbgG(t,i){const e=g.jr5(t.creatId),a=this.boof135;e.buff(a,a)}sprvC(){this.faction="N",this.rarity="R",this.name="Spirit Reaver",this.jr1=this.boof4814,this.jr2=this.jr1+2,this.tribe.push("DM"),this.hPlayer=-1;const t=this.boof234;this.text=`When an enemy player gains health, ${this.name} gets ${y.jr9(t,t)}.`,this.bonus={exist:this.ddp9(0,t*2,t,0)*.5}}sprvG(t,i){const e=g.jr5(t.creatId),a=this.boof234;e.buff(a,a)}tgkC(){this.faction="U",this.rarity="R",this.name="Tuskin Grovekeeper",this.jr1=this.boof6912,this.jr2=this.jr1,this.tribe.push("TK"),this.hPlayer=1,this.text=`When you gain health, Spawn a 3/3 ${W.minionName(this.level)}.`,this.bonus={exist:this.ddp9(1,6,3,0)*.5}}tgkG(t,i){const e=this.lValS(["SXD","SPL","TTF"])+this.level;g.birthCreature(e,"S",t.ownerPlayerA)}}class He extends M{lookup(t){return{["EWE"]:{c:()=>this.eweC(),m:(e,a)=>this.eweM(e,a)},["FFM"]:{c:()=>this.ffmC(),m:(e,a)=>this.ffmM(e,a)},["LUC"]:{c:()=>this.lugC(),m:(e,a)=>this.lugM(e,a)},["WBH"]:{c:()=>this.wbhC(),m:(e,a)=>this.wbhM(e,a)}}[t]}onMove(t,i){this.lookup(t).m(i,i.event)}mPlayer=0;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const e=super.jr3(t,i);return e.jr4("MV",this.code),e}ddf8(t){return t.trigger.type==="MV"&&this.validPlayer(t)}jr8(t){this.onMove(this.cardCode(),t),E.triggerDone()}validPlayer(t){if(this.mPlayer===0)return!0;const i=t.event;return this.mPlayer===1?t.ownerPlayerA===i.creature.owner:t.ownerPlayerA!==i.creature.owner}eweC(){this.faction="T",this.rarity="H",this.name="Emberwind Evoker",this.jr1=this.boof4914,this.jr2=this.jr1+2,this.tribe.push("HM"),this.mPlayer=1;const t=this.boof124;this.text=`When a friendly creature moves, it gets ${y.jr9(t,t)}.`,this.bonus={exist:this.ddp9(0,t*2,t,0)}}eweM(t,i){const e=this.boof124;i.creature.buff(e,e)}ffmC(){this.faction="T",this.rarity="H",this.name="Frostfang Maiden",this.jr1=this.boof5814,this.jr2=this.jr1+this.level,this.tribe.push("HM"),this.initMobile=this.level,this.mPlayer=1;const t=this.ffbof;this.text=`When a friendly creature moves, deal ${t} to the creature opposing it.`,this.bonus={exist:this.ddp9(0,t,0,0)}}ffmM(t,i){const e=i.creature.opposed;e&&e.hurtDirect(this.ffbof,this.code)}get ffbof(){return this.level+2}lugC(){this.faction="T",this.rarity="L",this.name="Lug, Uranti Charger",this.jr1=this.boof359,this.jr2=this.lValN([9,13,19]),this.level===3&&(this.initMobile=1),this.tribe.push("YT"),this.mPlayer=1,this.text="When a friendly creature moves on your turn, Lug battles an additional time.",this.bonus={exist:this.ddp9(0,0,0,this.jr1)}}lugM(t,i){if(t.ownerPlayerA===k.getActiveB()){const e=g.jr5(t.creatId);e.extraBattles+=1}}wbhC(){this.faction="T",this.rarity="R",this.name="Windborn Hellion",this.jr1=this.boof4812,this.jr2=this.boof81217,this.tribe.push("WN","EL"),this.mPlayer=1,this.text=`When a friendly creature moves, ${this.name} gets ${y.jr9(this.level,this.level)}.`,this.bonus={exist:this.ddp9(0,this.level*2,this.level,0)}}wbhM(t,i){g.jr5(t.creatId).buff(this.level,this.level)}}class Zt extends M{lookup(t){return{["ATG"]:{c:()=>this.agrdC(),t:(e,a)=>this.spellMyTurn(e,a),p:(e,a)=>this.agrdP(e,a)},["ART"]:{c:()=>this.arootC(),t:(e,a)=>this.factionSpellMyTurn(e,a,"U"),p:(e,a)=>this.arootP(e,a)},["ARB"]:{c:()=>this.arbysC(),t:(e,a)=>this.enemyPlayed(e,a),p:(e,a)=>this.arbysP(e,a)},["BLH"]:{c:()=>this.bblhC(),t:(e,a)=>this.spellMyTurn(e,a),p:(e,a)=>this.bblhP(e,a)},["CYC"]:{c:()=>this.ccC(),t:(e,a)=>this.factionSpellMyTurn(e,a,"N"),p:(e,a)=>this.ccP(e,a)},["DHW"]:{c:()=>this.dhwC(),t:(e,a)=>this.spellMyTurn(e,a),p:(e,a)=>this.dhwP(e,a)},["FBI"]:{c:()=>this.fbiC(),t:(e,a)=>this.factionSpellMyTurn(e,a,"T"),p:(e,a)=>this.fbiP(e,a)},["FLS"]:{c:()=>this.flspkC(),t:(e,a)=>this.spellMyTurn(e,a),p:(e,a)=>this.flspkP(e,a)},["IZK"]:{c:()=>this.izzyC(),t:(e,a)=>this.izzyT(e,a),p:(e,a)=>this.izzyP(e,a)},["KAW"]:{c:()=>this.kasC(),t:(e,a)=>this.spellMyTurn(e,a),p:(e,a)=>this.kasP(e,a)}}[t]}testPlay(t,i){return this.lookup(t).t(i,i.event)}actPlay(t,i){this.lookup(t).p(i,i.event)}triggerLevels=[1,2,3,4];constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const e=super.jr3(t,i);return this.triggerLevels.includes(this.level)&&e.jr4("PC",this.code),e}ddf8(t){return t.event.code==="PLC"?this.testPlay(this.cardCode(),t):t.event.code==="TRE"&&this.cardCode()==="BLH"}jr8(t){if(t.event.code==="PLC")this.actPlay(this.cardCode(),t);else{const i=g.jr5(t.creatId);U.destroy(i,this.code)}E.triggerDone()}spellMyTurn(t,i){return i.playerA===t.ownerPlayerA&&O.getCard(i.cardCode).type==="S"}factionSpellMyTurn(t,i,e){if(i.playerA===t.ownerPlayerA){const a=O.getCard(i.cardCode);if(a.type==="S"&&a.faction===e)return!0}return!1}enemyPlayed(t,i){return i.playerA!==t.ownerPlayerA}agrdC(){this.faction="A",this.rarity="C",this.name="Aetherguard",this.jr1=this.boof6814,this.jr2=this.jr1-1,this.tribe.push("RB"),this.bonus={exist:this.ddp9(0,this.level,0,0)},this.text=`When you play a spell, ${this.name} gets Armor ${this.level}.`}agrdP(t,i){g.jr5(t.trigger.creatId).addArmor(this.level)}arootC(){this.faction="U",this.rarity="H",this.name="Aether Root",this.jr1=this.boof3610,this.jr2=this.jr1,this.tribe.push("PL");const t=this.boof234;this.text=`When you play an Uterra spell, ${this.name} gets ${y.jr9(t,t)}.`,this.bonus={exist:this.ddp9(0,t*2,t,0)*.5}}arootP(t,i){const e=g.jr5(t.trigger.creatId),a=this.boof234;e.buff(a,a)}arbysC(){this.faction="A",this.rarity="H",this.name="Anvillon Arbiter",this.jr1=this.boof3714,this.jr2=this.jr1+3,this.initArmor=1,this.tribe.push("RB"),this.text="When the enemy player plays their second card in a turn, that player discards their hand."}arbysP(t,i){if(x.turn.cardsPlayed>1){const e=k.getActive();e.discard.push(...e.hand),e.hand=[]}}bblhC(){this.faction="T",this.rarity="L",this.name="Binben, Lightning Herald",this.jr1=this.boof61017,this.jr2=this.boof468,this.tribe.push("LT","AS");const t=this.boof4711,i=this.boof258;this.text=`When you play a spell, Spawn a ${t}/${i} Lightning Wyrm. At the end of your turn, destroy it.`,this.bonus={exist:this.ddp9(1,t+i,t,0)*.5}}bblhP(t,i){const e=g.birthCreature(`${"LWY"}${this.level}`,"S",t.ownerPlayerA);if(e){const a=e.jr4("TE",this.code);a.changes=!0}}ccC(){this.faction="N",this.rarity="H",this.name="Crypt Conjurer",this.jr1=this.boof258,this.jr2=this.lValN([8,14,20]),this.tribe.push("VP"),this.text=`When you play a Nekrium spell, deal ${this.jr1} damage to the enemy player and you gain ${this.jr1} health.`,this.bonus={exist:this.ddp9(0,0,0,this.jr1)}}ccP(t,i){k.ddf3(!t.ownerPlayerA,this.jr1,t.cardCode),k.healPlayer(t.ownerPlayerA,this.jr1)}dhwC(){this.faction="N",this.rarity="R",this.name="Darkheart Wanderer",this.jr1=this.boof3612,this.jr2=this.boof81116,this.tribe.push("HM");const t=this.boof124;this.text=`When you play a spell, ${this.name} gets Regenerate ${t}.`,this.bonus={exist:this.ddp9(0,t,0,0)}}dhwP(t,i){g.jr5(t.trigger.creatId).addRegen(this.boof124)}fbiC(){this.faction="T",this.rarity="H",this.name="Flamebreak Invoker",this.jr1=this.boof4814,this.jr2=this.jr1+2,this.tribe.push("FR","GT"),this.text=`When you play a Tempys spell, deal ${this.level} damage to each enemy creature.`,this.bonus={exist:this.ddp9(0,this.level*2,0,0)*.5}}fbiP(t,i){const e=Date.now();g.qEnemyCreats().forEach(a=>{a.hurtDirect(this.level,this.code,e)})}flspkC(){this.faction="T",this.rarity="C",this.name="Flame Speaker",this.jr1=this.lValN([2,6,13]),this.jr2=this.level*6,this.tribe.push("HM");const t=this.boof235;this.text=`When you play a spell, deal ${t} damage to the enemy player.`,this.bonus={exist:this.ddp9(0,0,0,t)*.5}}flspkP(t,i){k.ddf3(!t.ownerPlayerA,this.boof235,t.cardCode)}izzyC(){this.faction="T",this.rarity="L",this.name="Iztek, Khan of Arrachtor",this.jr1=this.boof6915,this.jr2=this.jr1,this.tribe.push("IC","FR","AS"),this.text=`When you play Iztek's Frost, replace this with a level ${this.level} Iztek, Avatar of Frost.~When you play Iztek's Flame, replace this with a level ${this.level} Iztek, Avatar of Flame.`}izzyT(t,i){if(i.playerA===t.ownerPlayerA){const a=O.getCard(i.cardCode).cardCode();if(a==="IFL"||a==="IFR")return!0}return!1}izzyP(t,i){const e=g.jr5(t.trigger.creatId),h=O.getCard(i.cardCode).cardCode()==="IFL"?"IZL":"IZR";g.birthCreature(`${h}${this.level}`,"R",e.owner,e.lane)}kasC(){this.faction="T",this.rarity="L",this.name="Kas, Arcweaver",this.jr1=this.boof4814,this.jr2=this.jr1,this.tribe.push("LT","AS"),this.hints=["OL","LKV"],this.text="When you play a spell, Kas battles an additional time this turn.",this.bonus={exist:this.ddp9(0,this.jr1,this.jr1,0)*.5}}kasP(t,i){const e=g.jr5(t.trigger.creatId);e.extraBattles+=1}}class Ne extends M{lookup(t){return{["KTS"]:{c:()=>this.kitC(),r:(e,a)=>this.kitR(e,a)},["RSC"]:{c:()=>this.scootC(),r:(e,a)=>this.scootR(e,a)},["SCC"]:{c:()=>this.shcrC(),r:(e,a)=>this.shcrR(e,a)},["SND"]:{c:()=>this.ssdC(),r:(e,a)=>this.ssdR(e,a)}}[t]}actReplace(t,i){this.lookup(t).r(i,i.event)}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const e=super.jr3(t,i);return e.jr4("RP",this.code),e}ddf8(t){if(t.event.code==="RPL"){const i=t.event;return t.creatId===i.replacedCreat.id}return!1}jr8(t){this.actReplace(this.cardCode(),t),E.triggerDone()}kitC(){this.faction="U",this.rarity="H",this.name="Kitaru Sprite",this.jr1=this.boof358,this.jr2=this.boof71117,this.tribe.push("FY"),this.hints=["RT"],this.text=`When this is replaced, Spawn a ${this.name}.`}kitR(t,i){g.birthCreature(this.code,"S",t.ownerPlayerA)}scootC(){this.faction="A",this.rarity="T",this.name="Relic Scout",this.jr1=this.level,this.jr2=this.level,this.initArmor=this.level,this.isFree=!0,this.tribe.push("RB"),this.hints=["RT"],this.text=`When ${this.name} is replaced, the creature that replaces it gets ${y.jr9(this.level,this.level,!0)} and Armor ${this.level}.`}scootR(t,i){i.creature.buff(this.level,this.level),i.creature.addArmor(this.level)}shcrC(){this.faction="U",this.rarity="C",this.name="Shardclaw Crusher",this.jr1=this.boof5812,this.jr2=this.jr1,this.tribe.push("IN"),this.hints=["RT"],this.text=`When ${this.name} is replaced, the creature that replaces it gets ${y.jr9(this.jr1,this.jr1)}.`}shcrR(t,i){i.creature.buff(this.jr1,this.jr1)}ssdC(){this.faction="U",this.rarity="R",this.name="Spiritstone Druid",this.jr1=this.boof4610,this.jr2=this.lValN([3,4,6]),this.tribe.push("TG"),this.hints=["RT","EMA"],this.text=`When ${this.name} is replaced, put a ${this.jr1}/${this.jr2} Spirit into each adjacent available lane.`}ssdR(t,i){const e=i.replacedCreat.adjacent,a=g.emptyLanes(t.ownerPlayerA),h=Date.now();e.forEach(u=>{a.includes(u)&&g.birthCreature("SPU"+this.level,"P",t.ownerPlayerA,u,h)})}}class me extends M{lookup(t){return{["BST"]:{c:()=>this.brimC(),u:(e,a)=>this.brimR(e,a)},["OSV"]:{c:()=>this.scavC(),u:(e,a)=>this.scavR(e,a)},["RHU"]:{c:()=>this.tiaC(),u:(e,a)=>this.tiaR(e,a)},["SKS"]:{c:()=>this.spsoC(),u:(e,a)=>this.spsoR(e,a)},["SWG"]:{c:()=>this.stgrC(),u:(e,a)=>this.stgrR(e,a)},["VTW"]:{c:()=>this.weldC(),u:(e,a)=>this.weldR(e,a)}}[t]}actUpgrade(t,i){this.lookup(t).u(i,i.event)}constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const e=super.jr3(t,i);return e.jr4("UP",this.code),e}jr8(t){this.actUpgrade(this.cardCode(),t),E.triggerDone()}brimC(){this.faction="T",this.rarity="L",this.name="Brimstone Tyrant",this.jr1=this.boof6916,this.jr2=this.jr1,this.tribe.push("FR","EL"),this.hints=["RD","ENF","EML"];const t=this.boof468;this.bonus={play:this.ddp9(0,t,0,0)},this.text=`Upgrade: Deal ${t} damage to each other creature.`}brimR(t,i){const e=Date.now(),a=this.boof468;g.creatByTarget(c.crNotMeTarg(t.creatId)).forEach(h=>h.hurtDirect(a,this.code,e))}scavC(){this.faction="A",this.rarity="H",this.name="Oreian Scavenger",this.jr1=this.boof6916,this.jr2=1,this.tribe.push("RB"),this.hints=["RD"],this.bonus={play:this.ddp9(0,this.jr1,0,0)},this.text=`Upgrade: ${this.name} gets Armor ${this.jr1}.`}scavR(t,i){i.creature.addArmor(this.jr1)}tiaC(){this.faction="A",this.rarity="L",this.name="Relic Hunter",this.jr1=this.boof5915,this.jr2=this.jr1,this.initBT=!0,this.tribe.push("HM"),this.hints=["RD"],this.bonus={play:this.ddp6()},this.text=`Upgrade: ${this.name} gets +attack and +health equal to the creature it replaced.`}tiaR(t,i){i.creature.buff(i.replacedCreat.attack,i.replacedCreat.health)}spsoC(){this.faction="T",this.rarity="C",this.name="Sparksoul",this.jr1=this.boof6915,this.jr2=this.jr1-1,this.tribe.push("LT","EL"),this.hints=["RD"],this.text=`Upgrade: ${this.name} gets Aggressive.`}spsoR(t,i){i.creature.aggressive=!0}stgrC(){this.faction="A",this.rarity="C",this.name="Steelwatch Guard",this.jr1=this.boof4711,this.jr2=this.jr1,this.tribe.push("RB"),this.hints=["RD"],this.bonus={play:this.ddp9(0,this.jr1,this.jr1,0)},this.text=`Upgrade: ${this.name} gets ${y.jr9(this.jr1,this.jr1)}.`}stgrR(t,i){i.creature.buff(this.jr1,this.jr1)}weldC(){this.faction="A",this.rarity="R",this.name="Vault Welder",this.jr1=this.boof71118,this.jr2=this.lValN([9,14,22]),this.initDefend=!0,this.tribe.push("RB"),this.hints=["RD"],this.text=`Upgrade: Negate Defender from ${this.name}.`}weldR(t,i){i.creature.negateDefender=!0}}class At extends M{lookup(t){return{["CGF"]:{c:()=>this.cfiendC(),v:e=>this.cfiendV(e)},["CSB"]:{c:()=>this.corpsC(),v:e=>this.corpsV(e)},["CYS"]:{c:()=>this.cslmC(),v:e=>this.cslmV(e)},["DSK"]:{c:()=>this.dskC(),v:e=>this.dskV(e)},["FST"]:{c:()=>this.fstrC(),v:e=>this.fstrV(e)},["FWK"]:{c:()=>this.fwlkC(),v:e=>this.fwlkV(e)},["FFD"]:{c:()=>this.ffC(),v:e=>this.ffV(e)},["GVS"]:{c:()=>this.ghsC(),v:e=>this.ghsV(e)},["GBG"]:{c:()=>this.ggC(),v:e=>this.ggV(e)},["GMR"]:{c:()=>this.gromC(),v:e=>this.gromV(e)},["MMX"]:{c:()=>this.mmeC(),v:e=>this.mmeV(e)},["NOZ"]:{c:()=>this.nyozC(),v:e=>this.nyozV(e)},["POX"]:{c:()=>this.poxC(),v:e=>this.poxV(e)},["RSZ"]:{c:()=>this.rszC(),v:e=>this.rszV(e)},["SFM"]:{c:()=>this.spirmC(),v:e=>this.spirmV(e)},["VGN"]:{c:()=>this.vgfsC(),v:e=>this.vgfsV(e)},["XHS"]:{c:()=>this.xhostC(),v:e=>this.xhostV(e)},["ZTU"]:{c:()=>this.zimusC(),v:e=>this.zimusV(e)}}[t]}cardVengeance(t,i){this.lookup(t).v(i)}vtext="";venges=!0;fixedImgCreat=!1;constructor(t){super(t),this.lookup(this.cardCode()).c(),this.venges&&(this.text="Vengeance: "+this.vtext),this.vtext=""}image(t){return this.fixedImgCreat?this.fixedImage(t):super.image(t)}jr3(t,i){const e=super.jr3(t,i);return this.venges&&e.jr4("VN",this.code),e}jr8(t){this.cardVengeance(this.cardCode(),t),E.triggerDone()}cfiendC(){this.faction="N",this.rarity="T",this.name="Contagion Fiend",this.jr1=this.boof234,this.jr2=this.boof5812,this.tribe.push("AB"),this.hints=["ENF"],this.fixedImgCreat=!0;const t=-this.level;this.vtext=`Each enemy creature gets ${y.jr9(t,t)}.`}cfiendV(t){const i=-this.level,e=Date.now(),a=c.crTarg();a.player=k.toTarget(!t.ownerPlayerA),g.creatByTarget(a).forEach(h=>h.buff(i,i,e))}corpsC(){this.faction="N",this.rarity="C",this.name="Corpulent Shambler",this.jr1=this.lValN([5,7,15]),this.jr2=this.jr1,this.tribe.push("ZB"),this.vtext="Put a 3/3 Zombie into this lane.",this.bonus={play:this.ddp9(1,6,3,0)}}corpsV(t){const i=t.event,e=`${"ZBS"}${this.level}`;g.birthCreature(e,"P",i.creature.owner,i.creature.lane)}cslmC(){this.faction="N",this.rarity="C",this.name="Crypt Slime",this.jr1=this.boof5915,this.jr2=this.jr1,this.tribe.push("OZ"),this.vtext="Put a 1/1 Oozeling into this lane.",this.bonus={play:this.ddp9(1,2,1,0)}}cslmV(t){const i=t.event,e=`${"COZ"}${this.level}`;g.birthCreature(e,"P",i.creature.owner,i.creature.lane)}dskC(){this.faction="N",this.rarity="C",this.name="Death Seeker",this.jr1=1,this.jr2=1,this.tribe.push("HM"),this.fixedImgCreat=!0,this.hints=["ST"];const t=this.boof51015;this.vtext=`Put a ${t}/${t} Spirit into this lane.`,this.bonus={play:this.ddp9(1,t*2,t,0)}}dskV(t){const i=t.event,e=`${"SPN"}${this.level}`;g.birthCreature(e,"P",i.creature.owner,i.creature.lane)}fstrC(){this.faction="N",this.rarity="R",this.name="Fell Strider",this.jr1=this.lValN([4,8,10]),this.jr2=this.boof369,this.tribe.push("ZB"),this.vtext=`Put a ${this.jr1}/${this.jr2} Zombie into this lane.`,this.bonus={play:this.ddp9(1,this.jr1+this.jr2,this.jr1,0)}}fstrV(t){const i=t.event,e=`${"ZST"}${this.level}`;g.birthCreature(e,"P",i.creature.owner,i.creature.lane)}fwlkC(){this.faction="N",this.rarity="C",this.name="Fell Walker",this.jr1=this.boof359,this.jr2=this.jr1,this.tribe.push("ZB"),this.vtext=`Put a ${this.jr1}/${this.jr1} Zombie into this lane.`,this.bonus={play:this.ddp9(1,this.jr1*2,this.jr1,0)}}fwlkV(t){const i=t.event,e=`${"ZMB"}${this.level}`;g.birthCreature(e,"P",i.creature.owner,i.creature.lane)}ffC(){if(this.faction="N",this.rarity="H",this.name="Fleshfiend",this.jr1=this.boof6812,this.jr2=this.jr1,this.tribe.push("AB"),this.venges=this.level>1,this.vtext=`Put a level ${this.level-1} ${this.name} into this lane.`,this.venges){const t=this.lValN([0,6,15]);this.bonus={play:this.ddp9(1,t*2,t,0)}}}ffV(t){const i=t.event,e=`${"FFD"}${this.level-1}`;g.birthCreature(e,"P",i.creature.owner,i.creature.lane)}ghsC(){this.faction="U",this.rarity="C",this.name="Glowhive Siren",this.jr1=this.boof3814,this.jr2=this.boof61117,this.tribe.push("IN"),this.vtext=`You gain ${this.boof124} to ${this.gghigh-1} health.`,this.bonus={play:this.ddp9(0,0,0,this.boof258)}}ghsV(t){const i=v.randInt(this.boof124,this.gghigh);k.healPlayer(t.ownerPlayerA,i)}get gghigh(){return this.lValN([5,9,13])}ggC(){this.faction="N",this.rarity="C",this.name="Graveborn Glutton",this.jr1=this.boof61117,this.jr2=this.boof3814,this.tribe.push("AB"),this.vtext=`Deal ${this.boof124} to ${this.gghigh-1} damage to the enemy player.`,this.bonus={play:this.ddp9(0,0,0,this.boof258)}}ggV(t){const i=v.randInt(this.boof124,this.gghigh);k.ddf3(!t.ownerPlayerA,i,this.code)}gromC(){this.faction="U",this.rarity="C",this.name="Grove Matriarch",this.jr1=this.boof4814,this.jr2=this.jr1+2,this.tribe.push("PL");const t=W.minionBuff(this.level),i=W.minionName(this.level);this.vtext=`Put a ${t}/${t} ${i} into this lane.`,this.bonus={play:this.ddp9(1,t*2,t,0)}}gromV(t){const i=t.event,e=W.minionCode(this.level);g.birthCreature(e,"P",i.creature.owner,i.creature.lane)}mmeC(){this.faction="A",this.rarity="C",this.name="Metamind Explorer",this.jr1=this.boof3713,this.jr2=this.jr1+2,this.tribe.push("MM"),this.vtext=`Draw ${this.level} cards.`,this.bonus={play:this.ddp9(0,0,0,0,this.level/4)}}mmeV(t){k.drawCard(t.ownerPlayerA,this.level)}nyozC(){this.faction="N",this.rarity="R",this.name="Nyrali Ooze",this.jr1=this.boof247,this.jr2=this.jr1,this.tribe.push("OZ");const t=this.level+this.jr1+1;this.vtext=`Put a ${t}/${t} Oozeling into this lane.`,this.bonus={play:this.ddp9(1,t*2,t,0)}}nyozV(t){const i=t.event,e=`${"OOZ"}${this.level}`;g.birthCreature(e,"P",i.creature.owner,i.creature.lane)}poxC(){if(this.faction="N",this.rarity="H",this.name="Progeny of Xith",this.jr1=this.boof246,this.jr2=this.jr1,this.tribe.push("AB"),this.hints=["DL"],this.level===1&&this.hints.push("ST"),this.venges=this.level<3,this.vtext=`Spawn a level ${this.level+1} ${this.name}.`,this.venges){const t=this.lValN([10,6,0]);this.bonus={play:this.ddp9(1,t*2,t,0)}}}poxV(t){const i=t.event,e=`${"POX"}${this.level+1}`;g.birthCreature(e,"S",i.creature.owner)}rszC(){this.faction="N",this.rarity="R",this.name="Runescarred Zombie",this.jr1=this.lValN([5,8,16]),this.jr2=this.boof359,this.tribe.push("ZB"),this.vtext=`Put a ${y.levelGateText(this.level,!0)}spell at random from your discard pile into your hand.`,this.bonus={play:this.ddp9(0,0,0,0,.25)}}rszV(t){const i=k.toPlayer(t.ownerPlayerA),e=c.target("TD");e.player=k.toTarget(i),e.card="S",e.level=w.ddf2(this.level);const a=w.deckByTarget(e);if(a.length>0){const h=a[v.randInt(0,a.length)];i.discard.splice(h[1],1),i.hand.push(h[0])}}spirmC(){this.faction="T",this.rarity="H",this.name="Spiritflame Mystic",this.jr1=this.boof6912,this.jr2=this.jr1-3,this.tribe.push("HM"),this.hints=["ENF","EML","OP"],this.vtext=`Deal ${this.boof246} damage to each creature.`}spirmV(t){const i=this.boof246,e=Date.now();g.qActiveCreats().forEach(a=>a.hurtDirect(i,this.code,e))}vgfsC(){this.faction="N",this.rarity="C",this.name="Vengeful Spirit",this.jr1=this.boof357,this.jr2=this.jr1-2,this.tribe.push("ST"),this.hints=["OP"];const t=this.boof369n;this.vtext=`Give the opposing creature ${y.jr9(t,t)}.`,this.bonus={play:this.ddp9(0,t*-2,-t,0)}}vgfsV(t){const e=t.event.creature.opposed;if(e){const a=this.boof369n;e.buff(a,a)}}xhostC(){this.faction="N",this.rarity="C",this.name="Xithian Host",this.jr1=this.boof359,this.jr2=this.boof135,this.tribe.push("AB"),this.vtext=`Deal ${this.jr1} damage to the enemy player and you gain ${this.jr1} health.`,this.bonus={play:this.ddp9(0,0,0,this.jr1*2)}}xhostV(t){const i=this.jr1;k.ddf3(!t.ownerPlayerA,i,this.code),k.healPlayer(t.ownerPlayerA,i)}zimusC(){this.faction="N",this.rarity="L",this.name="Zimus, the Undying",this.jr1=this.boof51014,this.jr2=this.lValN([2,5,7]),this.tribe.push(this.level===1?"HM":"ZB"),this.venges=this.level>1,this.vtext=`Spawn a Zimus, the ${this.level===2?"Returned":"Undying"}.`,this.level<3?(this.hints=["LV"],this.level===2&&(this.bonus={play:this.ddp9(1,15,10,0)})):(this.hints=["ST"],this.bonus={play:this.ddp9(0,0,0,0,8)})}zimusV(t){let i;this.level===2?i=`${"ZTR"}2`:i=`${"ZTU"}3`,g.birthCreature(i,"S",t.ownerPlayerA)}}class he extends gt{lookup(t){return{["DIS"]:{c:()=>this.disnC(),p:e=>this.disnZ(e),e:e=>this.disnE(e)},["DCH"]:{c:()=>this.dchantC(),p:e=>this.dchantZ(e),e:e=>this.dchantE(e)},["ESU"]:{c:()=>this.esrgC(),p:e=>this.esrgZ(e),e:e=>this.esrgE(e)},["HOX"]:{c:()=>this.howlC(),p:e=>this.howlZ(e),e:e=>this.howlE(e)},["ITO"]:{c:()=>this.itorC(),p:e=>this.itorZ(e),e:e=>this.itorE(e)},["MSP"]:{c:()=>this.mendC(),p:e=>this.mendZ(e),e:e=>this.mendE(e)},["NEM"]:{c:()=>this.netherC(),p:e=>this.netherZ(e),e:e=>this.netherE(e)}}[t]}cardCast(t,i){this.lookup(t).p(i)}playTarg;constructor(t){super(t),this.playTarg="X",this.lookup(this.cardCode()).c()}playTargets(){const t=super.playTargets();return t.push(c.playerActTarg(this.playTarg,"CARD",this.code,"")),t}handleAction(t){this.logSpell();const i=k.toPlayer(t.playerA);this.cardCast(this.cardCode(),i),L.spellCast()}ddf7(t){return this.lookup(this.cardCode()).e(t)}disnC(){this.faction="T",this.rarity="R",this.name="Disintigrate",this.playTarg="E",this.text=`Deal 1 to  ${this.dshigh-1} damage to the enemy player.`}disnZ(t){k.ddf3(t,v.randInt(1,this.dshigh),this.code)}get dshigh(){return this.lValN([9,16,26])}disnE(t){const i=c.actionEval(t,"ST");return i.vectors=[c.evalVectorPlayerDmg(t.playerA,this.dshigh/2)],i}dchantC(){this.faction="U",this.rarity="C",this.name="Druid's Chant",this.playTarg="F",this.text=`You gain ${this.boof81220} health.`}dchantZ(t){k.healPlayer(t,this.boof81220)}dchantE(t){const i=c.actionEval(t,"ST");return i.vectors=[c.evalVectorPlayerLife(t.playerA,this.boof81220)],i}esrgC(){this.faction="A",this.rarity="R",this.name="Energy Surge",this.isFree=this.level>1,this.overload=this.level===3,this.level===1&&(this.hints=["LV"]),this.playTarg="F",this.text=`Draw ${this.level} card${this.level>1?"s":""}.`}esrgZ(t){k.drawCard(t,this.level)}esrgE(t){return c.actionEval(t,"ST")}howlC(){this.faction="N",this.rarity="R",this.name="Howl of Xith",this.maxLevel=1,this.playTarg="E",this.text="Deal X damage to the enemy player and gain X health, where X is three times your rank."}howlZ(t){const i=k.getActive(),e=i.rank*3;k.ddf3(t,e,this.code),k.healPlayer(i,e)}howlE(t){const i=k.toPlayer(!t.playerA),e=i.rank*3,a=c.actionEval(t,"ST");return a.vectors=[c.evalVectorPlayerDmg(t.playerA,e),c.evalVectorPlayerLife(i.isPlayerA,e)],a}itorC(){this.faction="T",this.rarity="R",this.name="Ice Torrent",this.isFree=this.level>1,this.level===1&&(this.hints=["LV"]),this.playTarg="E",this.text=`Deal ${this.boof234} damage to the enemy player.`}itorZ(t){k.ddf3(t,this.boof234,this.code)}itorE(t){const i=c.actionEval(t,"ST");return i.vectors=[c.evalVectorPlayerDmg(t.playerA,this.boof234)],i}mendC(){this.faction="U",this.rarity="R",this.name="Mending Spring",this.playTarg="F",this.text=`You gain 1 to ${this.mendboof} Health.`}mendZ(t){k.healPlayer(t,v.randInt(1,this.mendboof+1))}get mendboof(){return this.lValN([10,20,40])}mendE(t){const i=c.actionEval(t,"ST");return i.vectors=[c.evalVectorPlayerLife(t.playerA,this.mendboof/2)],i}netherC(){this.faction="N",this.rarity="C",this.name="Nether Embrace",this.playTarg="E";const t=this.boof4712;this.text=`Deal ${t} damage to the enemy player. You gain ${t} heal`}netherZ(t){const i=this.boof4712;k.ddf3(t,i,this.code),k.healPlayer(!t.isPlayerA,i)}netherE(t){const i=this.boof4712,e=c.actionEval(t,"ST");return e.vectors=[c.evalVectorPlayerLife(!t.playerA,i),c.evalVectorPlayerDmg(t.playerA,i)],e}}class Tr extends M{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Rageborn Hellion",this.jr1=this.boof469,this.jr2=this.jr1*2,this.tribe.push("FR","EL"),this.hints=["OL","LKV"],this.text=`When a friendly creature ${y.dbdtap()}, ${this.name} gets ${y.jr9(this.level,this.level)}.`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("DM",this.code),e}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&!i.creatureTarg&&i.creatureSrc&&i.source.owner===t.ownerPlayerA}return!1}jr8(t){g.jr5(t.creatId).buff(this.level,this.level),E.triggerDone()}}class Bt extends M{lookup(t){return{["AIV"]:{c:()=>this.avinvC(),r:e=>this.avinvR(e)},["BSP"]:{c:()=>this.bskphC(),r:e=>this.bskphR(e)},["CRC"]:{c:()=>this.crucC(),r:e=>this.crucR(e)},["ESK"]:{c:()=>this.ebknC(),r:e=>this.ebknR(e)},["FWC"]:{c:()=>this.fwcC(),r:e=>this.fwcR(e)},["FME"]:{c:()=>this.feggC(),r:e=>this.feggR(e)},["MMV"]:{c:()=>this.mmovC(),r:e=>this.mmovR(e)},["PSH"]:{c:()=>this.porshC(),r:e=>this.porshR(e)},["RGG"]:{c:()=>this.runegC(),r:e=>this.runegR(e)},["SSR"]:{c:()=>this.solrevC(),r:e=>this.solrevR(e)},["SSM"]:{c:()=>this.spshamC(),r:e=>this.spshamR(e)},["SSG"]:{c:()=>this.snoutC(),r:e=>this.snoutR(e)},["UGM"]:{c:()=>this.mantisC(),r:e=>this.mantisR(e)}}[t]}rtext="";constructor(t){super(t),this.lookup(this.cardCode()).c(),this.text="Gain Rank: "+this.rtext,this.rtext=""}image(t){return this.rarity==="T"?this.cardCode()==="FWC"?this.rawImage("MPH",t):super.fixedImage(t):super.image(t)}jr3(t,i){const e=super.jr3(t,i);return e.jr4("RU",this.code),e}ddf8(t){return t.trigger.type==="RU"?t.event.playerA===t.ownerPlayerA:!1}jr8(t){this.lookup(this.cardCode()).r(t),E.triggerDone()}avinvC(){this.faction="T",this.rarity="H",this.name="Avalanche Invoker",this.jr1=this.boof6914,this.jr2=this.jr1+1,this.tribe.push("ER","AS"),this.hints=["TL"],this.rtext=`Deal ${this.boof3612} damage to each non-Tempys creature.`}avinvR(t){const i=this.boof3612,e=Date.now();g.qActiveCreats().filter(a=>a.faction!=="T").forEach(a=>a.hurtDirect(i,this.code,e))}bskphC(){this.faction="N",this.rarity="C",this.name="Blightskull Phantasm",this.jr1=this.boof5814,this.jr2=this.boof61017,this.tribe.push("ST"),this.hints=["TL","OP"];const t=this.boof369n;this.rtext=`the opposing creature gets ${y.jr9(t,t)}.`}bskphR(t){const e=g.jr5(t.creatId).opposed;if(e){const a=this.boof369n;e.buff(a,a)}}crucC(){this.faction="A",this.rarity="R",this.name="Crucible Colossus",this.jr1=this.boof61016,this.jr2=this.jr1+2,this.tribe.push("RB"),this.initDefend=!0,this.hints=["TL"],this.rtext=`Negate Defender from ${this.name}.`}crucR(t){const i=g.jr5(t.creatId);i.negateDefender=!0}ebknC(){this.faction="N",this.rarity="H",this.name="Ebonskull Knight",this.jr1=this.lValN([9,13,18]),this.jr2=this.jr1-2,this.tribe.push("VP"),this.hints=["TL"],this.rtext=`Destroy ${this.name}.`}ebknR(t){const i=g.jr5(t.creatId);U.destroy(i,this.code)}fwcC(){this.faction="U",this.rarity="T",this.maxLevel=1,this.name="Feywing Chrysalis",this.jr1=0,this.jr2=3,this.tribe.push("CR"),this.initDefend=!0,this.rtext=`Replace ${this.name} with a 9/9 Feywing.`}fwcR(t){const i=g.jr5(t.creatId);g.birthCreature(`${"FWG"}1`,"R",i.owner,i.lane)}feggC(){this.faction="T",this.rarity="T",this.minLevel=this.level,this.maxLevel=this.level,this.name="Frostmane Egg",this.jr1=0,this.jr2=6,this.tribe.push("DG"),this.initDefend=!0,this.rtext=`Replace ${this.name} with a level ${this.level} Frostmane Dragon.`}feggR(t){const i=g.jr5(t.creatId);g.birthCreature(`${"FMD"}${this.level}`,"R",i.owner,i.lane)}mmovC(){this.faction="A",this.rarity="C",this.name="Metamind Overseer",this.jr1=this.boof5915,this.jr2=this.jr1+1,this.tribe.push("MM"),this.hints=["TL"],this.rtext="Draw 2 cards."}mmovR(t){k.drawCard(t.ownerPlayerA,2)}porshC(){this.faction="N",this.rarity="H",this.name="Portal Shade",this.jr1=this.boof5914,this.jr2=this.boof71118,this.tribe.push("ST"),this.bonus={exist:this.ddp6()},this.rtext="Spawn a random creature that was destroyed this game."}porshR(t){const i=U.gravedigger();i&&g.birthCreature(i,"S",t.ownerPlayerA)}runegC(){this.faction="U",this.rarity="H",this.name="Runegrove Guardian",this.jr1=this.boof4814,this.jr2=this.jr1,this.tribe.push("PL"),this.hints=["TL"],this.rtext=`${this.name} gets ${y.jr9(this.jr1,this.jr1)}.`}runegR(t){g.jr5(t.creatId).buff(this.jr1,this.jr1)}solrevC(){this.faction="U",this.rarity="L",this.name="Solstice Reveler",this.jr1=this.boof4816,this.jr2=this.jr1,this.tribe.push("HM"),this.hints=["TL","FRS"];const t=this.solbof;this.rtext=`each friendly creature gets ${y.jr9(t,t,this.level===3)}${this.level===3?", and Breakthrough":""}.`}solrevR(t){const i=this.solbof;g.ddf1().forEach(e=>{e.buff(i,i),this.level===3&&(e.breakthrough=!0)})}get solbof(){return this.jr1/2}spshamC(){this.faction="T",this.rarity="C",this.name="Spiritfrost Shaman",this.jr1=this.boof71117,this.jr2=this.boof4610,this.tribe.push("HM"),this.hints=["TL"],this.rtext=`Deal ${this.boof579} damage to the enemy player.`}spshamR(t){k.ddf3(!t.ownerPlayerA,this.boof579,this.code)}snoutC(){this.faction="U",this.rarity="C",this.name="Stouthide Stegadon",this.jr1=this.boof4714,this.jr2=this.boof71117,this.tribe.push("DN"),this.hints=["TL"],this.rtext=`Heal ${this.snoutbof} damage from ${this.name}.`}snoutR(t){g.jr5(t.creatId).heal(this.snoutbof)}get snoutbof(){return this.level*10}mantisC(){this.faction="U",this.rarity="C",this.name="Umbraglim Mantis",this.jr1=this.boof6914,this.jr2=this.jr1-1,this.tribe.push("IN"),this.hints=["TL"],this.rtext=`You gain ${this.mantbof} health.`}mantisR(t){k.healPlayer(t.ownerPlayerA,this.mantbof)}get mantbof(){return this.lValN([8,10,12])}}class Cr extends M{constructor(t){super(t),this.faction="T",this.rarity="R",this.name="Riftlasher",this.jr1=this.boof359,this.jr2=this.boof61016,this.tribe.push("FR","EL"),this.hints=["OL","LKV","ATH"],this.text=`When ${this.name} ${y.dbdtap()} on your turn, you may deal that much damage to an enemy creature.`,this.bonus={exist:this.ddp9(0,this.jr1,0,0)}}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("DM",this.code);return a.interactive=!0,e}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&!i.creatureTarg&&i.creatureSrc&&i.source.id===t.creatId&&t.ownerPlayerA===k.getActiveB()}return!1}jr8(t){const i=t.event,e=w.toActions(c.crEnemyActTarg("CARD",this.code,v.enTil(t.creatId,i.dmg)));e.length>0?(e.push(C.noneEndTrigger()),C.ddf5(e)):E.triggerDone()}handleAction(t){const i=v.deTil(t.param);g.ddf6(t).hurtDirect(parseInt(i[1]),this.code),C.actionDone(!0)}ddf7(t){const i=v.deTil(t.param);return c.ddp2(t,t.playerA,t.lane,{dmg:parseInt(i[1])})}}class Sr extends Vt{jr3(t,i){const e=super.jr3(t,i);return e.jr4("AS",this.code),e}jr8(t){if(t.trigger.type==="AS"){let i=!0;for(;i;){const e=g.birthCreature(this.code,"S",t.ownerPlayerA);e?e.opposed&&(i=!1):i=!1}E.triggerDone()}else super.jr8(t)}}class wr extends M{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Scourgeflame Sorcerer",this.jr1=this.boof358,this.jr2=this.boof5914,this.tribe.push("ZB");const i=`Destroy an enemy ${y.levelGateText(this.level+1,!0)}creature.`,e=this.level===3?": ":", destroy another friendly creature: ";this.text=`Activate${e}${i}`}canActivate(t){return this.enemies(t).length>0?this.level===3?!0:this.friends(t).length>0:!1}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){const i=v.deTil(t.param);if(i[1]==="P1")C.ddf5(this.getCardActions(t));else{const e=g.jr5(i[0]),a=Date.now();if(this.level<3){const u=g.jr5(i[2]);U.destroy(u,this.code,a)}const h=g.ddf6(t);U.destroy(h,this.code,a),e.endActivation()}}friends(t){const i=c.crFriendNotMeActTarg("CARD",t.id,this.code,v.enTil(t.id,"P1"));return w.toActions(i)}enemies(t,i=""){const e=c.crEnemyActTarg("CARD",this.code,v.enTil(t.id,"P2",i));return e.level=w.ddf2(this.level+1),w.toActions(e)}getCardActions(t,i){if(t.actionKey==="ACTV"){const e=i??g.jr5(t.param);let a;return this.level===3?a=this.enemies(e):a=this.friends(e),a.push(C.cancelAction()),a}else if(t.actionKey==="CARD"){const e=v.deTil(t.param),a=g.jr5(e[0]),h=g.ddf6(t),u=this.enemies(a,h.id);return u.push(C.cancelAction()),u}return super.getCardActions(t,i)}ddf7(t){if(t.actionKey==="ACTV")return c.ddp5(t);{const i=v.deTil(t.param);if(i[1]==="P1")return c.ddp5(t);{const e=t,a=c.ddp7(t,e.playerA,e.lane);if(this.level<3){const h=g.jr5(i[2]),u=c.ddp1(h.owner,h.lane);u.destroy=!0,a.vectors.push(u)}return a}}}}class Dr extends M{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Seismic Adept",this.jr1=this.boof4712,this.jr2=this.boof61218,this.tribe.push("HM"),this.text="Activate: Move an enemy creature to another available enemy lane.",this.bonus={exist:this.level*.5}}canActivate(t){return this.enemies(t).length>0&&this.empties(t).length>0}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){const i=v.deTil(t.param);if(i[0]==="P1")C.ddf5(this.getCardActions(t));else{const e=g.jr5(i[1]);g.jr5(i[2]).move(t.lane),e.endActivation()}}empties(t,i=""){const e=c.emptyPlayerActTarg("E","CARD",this.code,v.enTil("P2",t.id,i));return w.toActions(e)}enemies(t){const i=c.crEnemyActTarg("CARD",this.code,v.enTil("P1",t.id));return w.toActions(i)}getCardActions(t,i){if(t.actionKey==="ACTV"){const e=i??g.jr5(t.param),a=this.enemies(e);return a.push(C.cancelAction()),a}else if(t.actionKey==="CARD"){const e=g.ddf6(t),a=v.deTil(t.param),h=g.jr5(a[1]),u=this.empties(h,e.id);return u.push(C.cancelAction()),u}return super.getCardActions(t,i)}ddf7(t){if(t.actionKey==="ACTV")return c.ddp5(t);{const i=v.deTil(t.param);if(i[0]==="P1")return c.ddp5(t);{const e=c.actionEval(t,"ST"),a=t,h=g.jr5(i[2]),u=c.ddp1(h.owner,h.lane);return u.moveTo=a.lane,e.vectors.push(u),e}}}}class Me extends M{constructor(t){super(t),this.rarity="R",this.jr1=this.boof4612,this.jr2=this.boof61016;const i=this.cardCode();if(i==="SSS"?this.steel():i==="LSS"?this.life():i==="FSS"?this.flame():i==="DSS"&&this.dark(),this.level>1){const e=y.levelGateText(this.level-1);this.text=`When you play a ${e} ${y.factionText(this.faction)} card, you may ${this.tuxt}.`}else this.hints=["LV"];this.bonus={exist:this.level*.5},this.tuxt=""}tuxt="";dark(){this.faction="N",this.name="Darkshaper Savant",this.tribe.push("ZB");const t=-this.boof135;this.tuxt=`give an enemy creature ${y.jr9(t,t)}`}life(){this.faction="U",this.name="Lifeshaper Savant",this.tribe.push("SE");const t=this.boof135;this.tuxt=`give another friendly creature ${y.jr9(t,t)}`}steel(){this.faction="A",this.name="Steelshaper Savant",this.tribe.push("HM"),this.tuxt=`give another friendly creature Armor ${this.boof124}`}flame(){this.faction="T",this.name="Flameshaper Savant",this.tribe.push("HM"),this.tuxt=`deal ${this.boof147} damage to target creature or player`}jr3(t,i){const e=super.jr3(t,i);if(this.level>1){const a=e.jr4("PC",this.code);a.interactive=!0}return e}ddf8(t){if(t.trigger.type==="PC"){const i=t.event;if(i.playerA===t.ownerPlayerA){const e=O.getCard(i.cardCode);if(e.level<this.level&&e.faction===this.faction)return!0}}return!1}jr8(t){const i=c.crActTarg("CARD",this.code,""),e=[i,w.buttonTarget("NOTR")];this.faction==="N"?i.player="E":this.faction==="T"?e.push(c.actionTarget("TP","CARD",this.code,"")):(i.notMe=t.creatId,i.player="F",this.faction==="A"&&(i.canArmor=!0));const a=w.toActions(e);a.length===1?E.triggerDone():C.ddf5(a)}handleAction(t){if(this.faction==="T"&&t.zone==="P")k.ddf3(t.playerA,this.level===3?7:4,this.code);else{const i=g.ddf6(t);if(this.faction==="A")i.addArmor(this.level===3?4:2);else if(this.faction==="T")i.hurtDirect(this.level===3?7:4,this.code);else{const e=(this.level===3?5:3)*(this.faction==="N"?-1:1);i.buff(e,e)}}C.actionDone(!0)}ddf7(t){const i=c.actionEval(t,"ST");if(t.zone==="P")i.vectors.push(c.evalVectorPlayerDmg(t.playerA,this.level===3?7:4));else{const e=t,a={dmg:0,att:0,hlt:0,arm:0};if(this.faction==="A")a.arm=this.level===3?4:2;else if(this.faction==="T")a.dmg=this.level===3?7:4;else{const h=(this.level===3?5:3)*(this.faction==="N"?-1:1);a.att=h,a.hlt=h}i.vectors.push(c.ddp1(e.playerA,e.lane,a))}return i}}class Er extends gt{constructor(t){super(t),this.faction="N",this.rarity="R",this.name="Spiritcleave",this.text=`Destroy a ${y.levelGateText(this.level+1,!0)}creature with the highest health among all creatures.${this.level===3?"~You gain health equal to that creature's health.":""}`}playTargets(){const t=super.playTargets();let i=-1;const e=g.qActiveCreats();e.forEach(u=>{u.health>i&&(i=u.health)});const a=e.filter(u=>u.health===i).map(u=>u.id),h=c.crActTarg("CARD",this.code,"");return h.level=w.ddf2(this.level+1),h.victims=v.enTil(...a),t.push(h),t}handleAction(t){this.logSpell();const i=g.ddf6(t);U.destroy(i,this.code),this.level===3&&k.healPlayer(k.getActiveB(),i.health),L.spellCast()}ddf7(t){return c.ddp7(t,t.playerA,t.lane)}}class xr extends gt{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Spiritleash";const i=this.boof5814;this.text=`Destroy a friendly creature.~Give a creature ${y.jr9(i,i)}.`}playTargets(){const t=super.playTargets(),i=c.crFriendActTarg("CARD",this.code,"P1");return g.creatByTarget(i).length>0&&g.qActiveCreats().length>1&&t.push(i),t}handleAction(t){const i=v.deTil(t.param);if(i[0]==="P1")C.ddf5(this.getCardActions(t));else{this.logSpell();const e=g.ddf6(t),a=g.jr5(i[1]),h=this.boof5814;U.destroy(a,this.code),e.buff(h,h),L.spellCast()}}getCardActions(t,i){const e=g.ddf6(t),a=w.toActions(c.crNotMeActTarg("CARD",e.id,this.code,v.enTil("P2",e.id)));return a.push(C.cancelAction()),a}ddf7(t){const i=v.deTil(t.param);if(i[0]==="P1")return c.ddp5(t);{const e=g.jr5(i[1]),a=c.ddp8(t,e,"SD"),h=this.boof5814;return a.vectors.push(c.ddp1(t.playerA,t.lane,{att:h,hlt:h})),a}}}class Fr extends M{constructor(t){super(t),this.faction="N",this.rarity="H",this.name="Spite Hydra",this.jr1=this.boof5914,this.jr2=this.jr1,this.tribe.push("HY"),this.hints=["OP","ALT","LKR","LKV"],this.bonus={exist:this.ddp9(0,this.level*4,this.level*2,0)},this.text=`When ${this.name} ${y.dbdtac()}, this gets ${y.jr9(this.level,this.level)}.~Allied Tempys: Activate: Deal ${this.level} damage to another creature. This gets ${y.jr9(this.level,this.level)}.`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("FR",this.code),e.jr4("DM",this.code),e}getCardActions(t,i){const e=i??g.jr5(t.param);return w.toActions([c.crNotMeActTarg("CARD",e.id,this.code,e.id),w.buttonTarget("CANC")])}ddf7(t){if(t.actionKey==="ACTV")return c.ddp5(t);{const i=t;return c.ddp2(t,i.playerA,i.lane,{dmg:this.level})}}canActivate(t){return this.getCardActions(c.ddf4(),t).length>1&&t.hasMod(t.id)}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&i.creatureTarg&&i.creatureSrc&&i.source.id===t.creatId}return!1}handleAction(t){const i=g.ddf6(t),e=g.jr5(t.param);i.hurtDirect(this.level,this.code),e.buff(this.level,this.level),e.endActivation()}jr8(t){const i=g.jr5(t.creatId);t.trigger.type==="FR"?L.allied("T")&&(i.addMod(c.mod("AL",!0,i.id)),i.changed=!0):t.trigger.type==="DM"&&i.buff(this.level,this.level),E.triggerDone()}}class Pr extends M{constructor(t){super(t),this.faction="A",this.rarity="R",this.name="Statis Warden",this.jr1=this.boof5915,this.jr2=this.jr1+1,this.tribe.push("MM"),this.text="When you play a spell, give a friendly creature Defender until the end of the enemy player's next turn."}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("PC",this.code);return a.interactive=!0,e}handleAction(t){const i=g.ddf6(t),e=c.mod("DF",!0,t.param);e.expiry="EN",i.addMod(e),C.actionDone(!0)}ddf8(t){if(t.trigger.type==="PC"){const i=t.event;return i.playerA===t.ownerPlayerA&&O.getCard(i.cardCode).type==="S"}return!1}jr8(t){const i=c.crFriendNotMeActTarg("CARD",t.creatId,this.code,t.creatId);i.canDefender=!0;const e=w.toActions(i);e.length===0?E.triggerDone():(e.push(C.noneEndTrigger()),C.ddf5(e))}ddf7(t){return c.ddp2(t,t.playerA,t.lane,{def:!0})}}class Br extends M{constructor(t){super(t),this.faction="A",this.rarity="C",this.name="Steeleye Researcher",this.jr1=this.boof5915,this.jr2=this.jr1+1,this.tribe.push("HM"),this.bonus={play:.5},this.text=`Upgrade: You may ${y.daluac()}.`}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("UP",this.code);return a.interactive=!0,e}handleAction(t){L.levelAndDiscard(t),C.actionDone(!0)}jr8(t){const i=c.lvlHandActTarg(this.code,t.creatId),e=w.toActions(i);e.length>0?(e.push(C.noneEndTrigger()),C.ddf5(e)):E.triggerDone()}ddf7(t){return c.actionEval(t,"DC")}}class Hr extends M{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Steelscale Dragon",this.jr1=this.boof4812,this.jr2=this.jr1+2,this.tribe.push("RB","DG"),this.initMobile=this.level,this.text=`While each other friendly creature has Defender, ${this.name} gets ${y.jr9(this.jr1,0)}, Armor ${this.boof246}, and Breakthrough.`}jr3(t,i){const e=super.jr3(t,i),a=e.addEffect("DF",this.code);a.area="C";const h=e.addEffect("PS",this.code);return h.area="C",e}enforceEffect(t,i){const e=c.crNotMeTarg(i.id);if(e.player=k.toTarget(i.owner),g.creatByTarget(e).some(h=>!h.defender))i.removeModSafe(i.id);else{const h=c.mod("AT",this.jr1,i.id),u=c.mod("AR",this.boof246,i.id),m=c.mod("BT",!0,i.id);i.addModSafe(h),i.addModSafe(u),i.addModSafe(m)}}}class Nr extends M{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Storm Bringer",this.jr1=this.boof5814,this.jr2=this.boof61018,this.tribe.push("WN","EL"),this.hints=["FH"];const i=this.boof246;this.bonus={exist:this.ddp9(0,i+2,0,0)},this.text=`At the start of each turn, ${this.name} moves to an available lane at random. Flank: Deal ${i} damage to the opposing creature.`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("TS",this.code),e.jr4("FK",this.code),e}ddf8(t){return t.trigger.type==="TS"}jr8(t){if(t.trigger.type==="TS"){const i=g.emptyLanes(t.ownerPlayerA);i.length>0&&g.jr5(t.creatId).move(i[v.randInt(0,i.length)]),E.triggerDone()}else if(t.trigger.type==="FK"){const e=t.event.creature.opposed;e&&e.hurtDirect(this.boof246,this.code),E.triggerDone()}else super.jr8(t)}}class Mr extends M{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Sulgrim, Herald of Force",this.jr1=15,this.jr2=15,this.tribe.push("GL"),this.hints=["FRS"],this.text="Activate: Deal damage equal to a friendly creature's Armoor to an enemy creature.~Forge: Each friendly creature gets Armor 6.",this.bonus={play:this.ddp9(0,12,0,0)}}jr3(t,i){const e=super.jr3(t,i);return e.jr4("FR",this.code),e}canActivate(t){return this.enemies(t.id).length>0&&this.friends(t.id).length>0}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){const i=v.deTil(t.param);if(i[1]==="P1")C.ddf5(this.getCardActions(t));else if(i[1]==="P2"){const e=g.jr5(i[0]),a=g.jr5(i[2]);g.ddf6(t).hurtDirect(a.armor,this.code),e.endActivation()}}jr8(t){g.ddf1().forEach(i=>i.addArmor(6)),E.triggerDone()}friends(t){const i=c.crFriendActTarg("CARD",this.code,v.enTil(t,"P1"));return i.hasArmor=!0,w.toActions(i)}enemies(t,i=""){const e=c.crEnemyActTarg("CARD",this.code,v.enTil(t,"P2",i));return w.toActions(e)}getCardActions(t,i){if(t.actionKey==="ACTV"){const e=i?i.id:t.param,a=this.friends(e);return a.push(C.cancelAction()),a}else if(t.actionKey==="CARD"){const e=v.deTil(t.param),a=g.ddf6(t),h=this.enemies(e[0],a.id);return h.push(C.cancelAction()),h}return super.getCardActions(t,i)}ddf7(t){if(t.actionKey==="ACTV")return c.ddp5(t);{const i=v.deTil(t.param),e=t;if(i[1]==="P1")return c.ddp5(t);{const a=g.jr5(i[2]);return c.ddp2(t,e.playerA,e.lane,{dmg:a.armor})}}}}class Rr extends M{constructor(t){super(t),this.faction="A",this.rarity="L",this.name="Synapsis Oracle",this.jr1=this.boof358,this.jr2=this.lValN([9,15,24]),this.tribe.push("HM"),this.hints=["OL"];let i;this.level===3?(this.text="Activate: Level up a card in your hand.",i=1):(this.text=`Activate: ${y.daluac(!0)}.`,i=.5),this.bonus={exist:i}}canActivate(t){return k.toPlayer(t.owner).hand.some(e=>O.getCard(e).canLevel())}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){const i=g.jr5(t.param),e=k.toPlayer(i.owner);this.level===3?e.hand[t.position]=O.getCard(t.card).levelUpCard():L.levelAndDiscard(t),i.endActivation()}getCardActions(t,i){if(t.actionKey==="ACTV"){const e=i??g.jr5(t.param),a=c.lvlHandActTarg(this.code,e.id);return w.toActions([a,w.buttonTarget("CANC")])}return super.getCardActions(t,i)}ddf7(t){return t.actionKey==="ACTV"?c.ddp5(t):c.actionEval(t,"DC")}}class Lr extends vt{jr3(t,i){const e=super.jr3(t,i);return e.jr4("FR",this.code),e}jr8(t){if(t.trigger.type==="FR"){const i=x.turn.creaturesKilled;if(i>0){const e=Date.now();for(let a=0;a<i;a++)g.birthCreature("ZMB"+this.level,"S",t.ownerPlayerA,void 0,e)}E.triggerDone()}else super.jr8(t)}}class Ir extends gt{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Thunderstomp";const i=this.boof5812;this.text=`Deal ${i} damage to an enemy creature.~Then, if there is a friendly Dinosaur, deal another ${i} damage to an enemy creature.`}playTargets(){const t=super.playTargets(),i=c.crEnemyActTarg("CARD",this.code,"P1");return t.push(i),t}handleAction(t){const i=v.deTil(t.param),e=this.boof5812,a=g.ddf6(t);i[0]==="P1"?(this.logSpell(),a.hurtDirect(e,this.code),this.dino()?C.ddf5(this.getCardActions(t)):L.spellCast()):(a.hurtDirect(e,this.code),L.spellCast())}dino(){const t=c.crFriendTarg();return t.tribe="DN",g.creatByTarget(t).length>0}getCardActions(t,i){return w.toActions(c.crEnemyActTarg("CARD",this.code,"P2"))}ddf7(t){const i=v.deTil(t.param),e=c.ddp2(t,t.playerA,t.lane,{dmg:this.boof5812});return i[0]==="P1"&&this.dino()&&(e.final=!1),e}}class ri extends M{lookup(t){return{["SOL"]:{c:()=>this.stagC(),t:e=>this.stagT(e)},["WTK"]:{c:()=>this.tinkC(),t:e=>this.tinkT(e)}}[t]}mPlayer=0;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const e=super.jr3(t,i);return e.jr4("TE",this.code),e}ddf8(t){return t.trigger.type==="TE"&&this.validPlayer(t)}jr8(t){this.lookup(this.cardCode()).t(t),E.triggerDone()}validPlayer(t){if(this.mPlayer===0)return!0;const i=t.event;return this.mPlayer===1?i.playerA===t.ownerPlayerA:i.playerA!==t.ownerPlayerA}stagC(){this.faction="U",this.rarity="C",this.name="Stag of Lys",this.jr1=this.boof5916,this.jr2=this.jr1,this.tribe.push("ST"),this.mPlayer=1;const t=this.boof246;this.bonus={exist:this.ddp9(0,0,0,t)},this.text=`At the end of your turn, gain ${t} health.`}stagT(t){k.healPlayer(t.ownerPlayerA,this.boof246)}tinkC(){this.faction="A",this.rarity="H",this.name="War Tinker",this.jr1=this.level,this.jr2=this.boof4812,this.tribe.push("GN"),this.mPlayer=-1,this.bonus={exist:this.ddp6()},this.text=`At the end of the enemy player's turn, replace ${this.name} with a copy of a random Robot from your deck.`}tinkT(t){const i=c.target("DK");i.player=k.toTarget(t.ownerPlayerA),i.tribe="RB";const e=w.deckByTarget(i),a=e.length;if(a>0){const h=e[v.randInt(0,a)][0],u=g.jr5(t.creatId);g.birthCreature(h,"R",u.owner,u.lane)}}}class Ot extends M{lookup(t){return{["DCS"]:{c:()=>this.delphC(),t:e=>this.delphT(e)},["GMP"]:{c:()=>this.gmpC(),t:e=>this.gmpT(e)},["LBL"]:{c:()=>this.lbcC(),t:e=>this.lbcT(e)},["SBF"]:{c:()=>this.sfangC(),t:e=>this.sfangT(e)},["SSE"]:{c:()=>this.sseC(),t:e=>this.sseT(e)},["SPD"]:{c:()=>this.spdC(),t:e=>this.spdT(e)},["SPM"]:{c:()=>this.spmC(),t:e=>this.spmT(e)},["TBA"]:{c:()=>this.tbaC(),t:e=>this.tbaT(e)},["VCG"]:{c:()=>this.vgC(),t:e=>this.vgT(e)},["WBG"]:{c:()=>this.woeC(),t:e=>this.woeT(e)},["ZSH"]:{c:()=>this.zyxC(),t:e=>this.zyxT(e)}}[t]}bothTurns=!1;constructor(t){super(t),this.lookup(this.cardCode()).c()}jr3(t,i){const e=super.jr3(t,i);e.jr4("TS",this.code);const a=Pt.extractCardCode(this.code);return(a==="ZSH"||a==="SBF")&&(e.extraBattles=1),e}ddf8(t){return t.trigger.type==="TS"?this.bothTurns?!0:t.event.playerA===t.ownerPlayerA:!1}jr8(t){this.lookup(this.cardCode()).t(t),E.triggerDone()}delphC(){this.faction="A",this.rarity="L",this.name="Delpha, Chronosculptor",this.jr1=this.boof7914,this.jr2=this.jr1,this.tribe.push("HM"),this.level>1&&(this.hints=["OL"],this.bonus={exist:this.ddp9(0,9,4,0)},this.text=`At the start of your turn, level a ${this.level===2?"level 1 ":""}card in your hand at random.`)}delphT(t){if(this.level>1){const i=k.toPlayer(t.ownerPlayerA),e=i.hand.map((h,u)=>{const m=O.getCard(h);return{idx:u,lvl:m.level,nxt:m.canLevel()?m.levelUpCard():""}}).filter(h=>h.nxt&&(this.level===3||h.lvl===1)),a=e.length;if(a>0){const h=e[v.randInt(0,a)];i.hand[h.idx]=h.nxt}}}gmpC(){this.faction="A",this.rarity="L",this.name="Ghox, Metamind Paragon",this.jr1=this.boof4814,this.jr2=this.boof61218,this.tribe.push("MM"),this.hints=["OL"];const t=this.level===1?"":"s";this.bonus={exist:this.ddp9(0,0,0,0,this.level*.5)},this.text=`At the start of your turn, draw ${this.level} card${t}.`}gmpT(t){k.drawCard(t.ownerPlayerA,this.level)}lbcC(){this.faction="U",this.rarity="R",this.name="Lightbringer Cleric",this.jr1=this.boof51015,this.jr2=this.jr1,this.tribe.push("TK"),this.hints=["OL"],this.bonus={exist:this.ddp9(0,0,0,this.boof3610)},this.text=`At the start of your turn, you gain ${this.boof137} to ${this.boof5914-1} health.`}lbcT(t){k.healPlayer(t.ownerPlayerA,v.randInt(this.boof137,this.boof5914))}sfangC(){this.faction="T",this.rarity="H",this.name="Saberfang",this.jr1=this.boof246,this.jr2=1,this.initAggro=!0,this.tribe.push("CT"),this.hints=["OL","ATH"],this.text=`${this.name} battles an additional time on your turn.`}sfangT(t){const i=g.jr5(t.creatId);i.extraBattles+=1}sseC(){this.faction="U",this.rarity="L",this.name="Scatterspore Eidolon",this.jr1=8,this.jr2=this.jr1,this.tribe.push("PL"),this.hints=["OL","EMO","DL"];const t=this.boof357,i=W.minionName(this.level);this.bonus={exist:this.ddp9(1,t*2,t,0)},this.text=`At the start of your turn, Spawn a ${t}/${t} ${i}.`}sseT(t){const i=this.lValS(["SXD","SXP","SXT"])+this.level.toString();g.birthCreature(i,"S",t.ownerPlayerA)}spdC(){this.faction="U",this.rarity="R",this.name="Shardplate Delver",this.jr1=this.boof4612,this.jr2=this.jr1,this.tribe.push("DN"),this.hints=["OL"];const t=this.boof246;this.bonus={exist:this.ddp9(0,t*2,t,0)},this.text=`At the start of your turn, ${this.name} gets ${y.jr9(t,t)}.`}spdT(t){const i=this.boof246;g.jr5(t.creatId).buff(i,i)}spmC(){this.faction="U",this.rarity="L",this.name="Shardplate Mutant",this.jr1=this.boof91421,this.jr2=this.jr1,this.tribe.push("IN"),this.hints=["OP"],this.text="At the start of your turn, randomly discard down to two cards in your hand."}spmT(t){const i=k.toPlayer(t.ownerPlayerA);if(i.hand.length>2){let e=i.hand.slice(),a=[];for(;e.length>2;)a.push(e.splice(v.randInt(0,e.length),1)[0]);i.discard.push(...a),i.hand=e}}tbaC(){this.faction="U",this.rarity="L",this.name="Talisin, Bard of Abundance",this.jr1=this.lValN([8,12,16]),this.jr2=this.lValN([10,14,20]),this.tribe.push("SY"),this.bothTurns=this.lValB([!0,!0,!1]),this.hints=["OL"],this.level===3&&(this.bonus={exist:this.ddp6()}),this.text=`At the start of ${this.bothTurns?"your":"each player's"} turn, ${this.bothTurns?"you":"that player"} may play an additional card.`}tbaT(t){x.turn.regularPlays+=1}vgC(){this.faction="T",this.rarity="C",this.name="Volcanic Giant",this.jr1=this.boof51015,this.jr2=this.jr1,this.tribe.push("ER","GT"),this.hints=["OL"],this.bonus={exist:this.ddp9(0,0,0,this.boof3610)},this.text=`At the start of your turn, deals ${this.boof137} to ${this.boof5914-1} damage to the enemy player.`}vgT(t){const i=v.randInt(this.boof137,this.boof5914);k.ddf3(!t.ownerPlayerA,i,this.code)}woeC(){this.faction="N",this.rarity="L",this.name="Woebringer",this.jr1=this.lValN([7,10,18]),this.jr2=this.boof5815,this.tribe.push("AB"),this.text=`At the start of your turn, destroy the ${this.level===3?"enemy ":""}creature with the lowest attack. If there is a tie, one is chosen at random.`}woeT(t){const i=c.crTarg();this.level===3&&(i.player=k.toTarget(!t.ownerPlayerA));const e=g.creatByTarget(i);let a=99999,h=[];e.forEach(m=>{m.attack===a?h.push(m):m.attack<a&&(a=m.attack,h=[m])});const u=h.length;if(u>0){const m=h[v.randInt(0,u)];U.destroy(m,this.code)}}zyxC(){this.faction="T",this.rarity="L",this.name="Zyx, Storm Herald",this.jr1=this.boof4712,this.jr2=this.lValN([6,9,20]),this.initMobile=1,this.tribe.push("LT","AS"),this.hints=["OL","ATH","LKV"],this.text="Zyx battles an additional time on your turn."}zyxT(t){const i=g.jr5(t.creatId);i.extraBattles+=1}}class Gr extends M{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Tuskin Sporelord",this.jr1=this.lValN([2,6,10]),this.jr2=this.lValN([10,14,18]),this.tribe.push("TK"),this.text=`Activate: Put a copy of friendly ${y.levelGateText(this.level,!0)}Plant into an available lane.`,this.bonus={exist:this.ddp6(this.level)/2}}canActivate(t){return this.emptySloots(t.id).length>0&&this.buddies(t.id).length>0}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){const i=v.deTil(t.param);if(i[0]==="P1")C.ddf5(this.getCardActions(t));else{const e=g.jr5(i[1]);g.birthCreature(i[2],"P",e.owner,t.lane),e.endActivation()}}getCardActions(t,i){if(t.actionKey==="ACTV"){const e=i??g.jr5(t.param),a=this.buddies(e.id);return a.push(C.cancelAction()),a}else if(t.actionKey==="CARD"){const e=g.ddf6(t),a=v.deTil(t.param),h=this.emptySloots(a[1],e.code);return h.push(C.cancelAction()),h}return super.getCardActions(t,i)}ddf7(t){if(t.actionKey==="ACTV")return c.ddp5(t);{const i=v.deTil(t.param);if(i[0]==="P1")return c.ddp5(t);{const e=t;return c.ddp4(t,e.playerA,e.lane,i[2])}}}emptySloots(t,i=""){const e=c.emptyPlayerActTarg("F","CARD",this.code,v.enTil("P2",t,i));return w.toActions(e)}buddies(t){const i=c.crFriendActTarg("CARD",this.code,v.enTil("P1",t));return i.tribe="PL",i.level=w.ddf2(this.level),w.toActions(i)}}class ai extends gt{constructor(t){super(t),this.faction="A",t==="PRI"+"1"?(this.rarity="R",this.name="Perilous Insight",this.maxLevel=1,this.overload=!0):(this.rarity="C",this.name="Metasight",this.maxLevel=2,this.isFree=this.level===2),this.text="Discard and level up two cards."}playTargets(){const t=super.playTargets();return t.push(this.targParty("P1")),t}handleAction(t){if(t.position<C.cardBeingPlayed.position&&(C.cardBeingPlayed.position-=1),t.param==="P1"){L.levelAndDiscard(t);const i=this.targParty("P2"),e=w.toActions(i);e.length===0?(this.logSpell(),L.spellCast()):C.ddf5(e)}else L.levelAndDiscard(t),this.logSpell(),L.spellCast()}targParty(t){const i=c.lvlHandActTarg(this.code,t);return i.deckPositionSkip=C.cardBeingPlayed.position,i}}class Re extends gt{lookup(t){return{["CFG"]:{c:()=>this.confC(),z:(e,a)=>this.confZ(e,a),e:(e,a,h)=>this.confE(e,a,h)},["CSG"]:{c:()=>this.cystgC(),z:(e,a)=>this.cystgZ(e,a),e:(e,a,h)=>this.cystgE(e,a,h)},["GRN"]:{c:()=>this.grenC(),z:(e,a)=>this.grenZ(e,a),e:(e,a,h)=>this.grenE(e,a,h)},["TWG"]:{c:()=>this.twstrC(),z:(e,a)=>this.twstrZ(e,a),e:(e,a,h)=>this.twstrE(e,a,h)}}[t]}cardCast(t,i,e){this.lookup(t).z(i,e)}playTarg;constructor(t){super(t),this.playTarg=c.crActTarg("CARD",this.code,""),this.lookup(this.cardCode()).c()}playTargets(){const t=super.playTargets();return this.playTarg.param="P1",this.playTarg.notMe="",g.creatByTarget(this.playTarg).length>1&&t.push(this.playTarg),t}handleAction(t){const i=v.deTil(t.param);if(i[0]==="P1")C.ddf5(this.getCardActions(t));else{this.logSpell();const e=g.ddf6(t),a=g.jr5(i[1]);this.cardCast(this.cardCode(),a,e),L.spellCast()}}getCardActions(t){const i=g.ddf6(t);return this.playTarg.notMe=i.id,this.playTarg.param=v.enTil("P2",i.id),w.toActions([this.playTarg,w.buttonTarget("CANC")])}ddf7(t){const i=v.deTil(t.param);if(i[0]==="P1")return c.ddp5(t);{const e=g.ddf6(t),a=g.jr5(i[1]);return this.lookup(this.cardCode()).e(t,a,e)}}confC(){this.faction="T",this.rarity="C",this.name="Conflagrate",this.text=`Deal ${this.boof369} to two enemy creatures.`,this.playTarg.player="E"}confZ(t,i){const e=Date.now(),a=this.boof369;t.hurtDirect(a,this.code,e),i.hurtDirect(a,this.code,e)}confE(t,i,e){const a=this.boof369,h=c.actionEval(t,"ST");return h.vectors=[c.ddp1(i.owner,i.lane,{dmg:a}),c.ddp1(e.owner,e.lane,{dmg:a})],h}cystgC(){this.faction="A",this.rarity="C",this.name="Cypien Steelgraft",this.text=`Two friendly creatures get Armor ${this.boof246}.`,this.playTarg.player="F",this.playTarg.canArmor=!0}cystgZ(t,i){const e=this.boof246;t.addArmor(e),i.addArmor(e)}cystgE(t,i,e){const a=this.boof246,h=c.actionEval(t,"ST");return h.vectors=[c.ddp1(i.owner,i.lane,{arm:a}),c.ddp1(e.owner,e.lane,{arm:a})],h}grenC(){this.faction="N",this.rarity="C",this.name="Ghastly Renewal",this.text=`Give two friendly creatures Regenerate ${this.boof246}.`,this.playTarg.player="F",this.playTarg.canRegen=!0}grenZ(t,i){const e=this.boof246;t.addRegen(e),i.addRegen(e)}grenE(t,i,e){const a=this.boof246,h=c.actionEval(t,"ST");return h.vectors=[c.ddp1(i.owner,i.lane,{rgn:a}),c.ddp1(e.owner,e.lane,{rgn:a})],h}get tsboof(){return this.level+2}twstrC(){this.faction="U",this.rarity="C",this.name="Twinstrength";const t=this.tsboof;this.text=`Two friendly creatures get ${y.jr9(t,t)}.`,this.playTarg.player="F"}twstrZ(t,i){const e=this.tsboof;t.buff(e,e),i.buff(e,e)}twstrE(t,i,e){const a=this.tsboof,h=c.actionEval(t,"ST");return h.vectors=[c.ddp1(i.owner,i.lane,{att:a,hlt:a}),c.ddp1(e.owner,e.lane,{att:a,hlt:a})],h}}class $r extends M{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Umbruk Icecrusher",this.jr1=this.boof61014,this.jr2=this.boof246,this.tribe.push("DN"),this.hints=["OL","ALU","ATH","LKV"],this.bonus={exist:this.ddp9(0,5,this.jr1+2,0)},this.text=`When ${this.name} ${y.dbdtap()}, deal that much damage to that player.~Allied Uterra: This gets ${y.jr9(2,2,!0)}, and Breakthrough.`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("FR",this.code),e.jr4("DM",this.code),e}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&!i.creatureTarg&&i.creatureSrc&&i.source.id===t.creatId}return!1}jr8(t){if(t.trigger.type==="FR"){if(L.allied("U")){const i=g.jr5(t.creatId);i.breakthrough=!0,i.buff(2,2)}E.triggerDone()}else if(t.trigger.type==="DM"){const i=t.event;k.ddf3(i.target,i.dmg,this.code),E.triggerDone()}}}class Vr extends M{constructor(t){super(t),this.faction="U",this.rarity="H",this.name="Umbruk Lasher",this.jr1=this.boof71014,this.jr2=this.jr1-1,this.initBT=!0,this.tribe.push("DN"),this.hints=["OL","LKV","ATH","ALT"],this.text=`Allied Tempys: When ${this.name} ${y.dbdtap()} on your turn, you may deal that much damage to an enemy creature.`,this.bonus={exist:this.ddp9(0,this.jr1,0,0)}}jr3(t,i){const e=super.jr3(t,i);return e.jr4("FR",this.code),e}handleAction(t){g.ddf6(t).hurtDirect(parseInt(t.param),this.code),C.actionDone(!0)}ddf8(t){if(t.trigger.type==="DM"){const i=t.event;return i.battle&&!i.creatureTarg&&i.creatureSrc&&i.source.id===t.creatId&&i.source.owner===k.getActiveB()}return!1}jr8(t){if(t.trigger.type==="FR"){if(L.allied("T")){const i=g.jr5(t.creatId),e=i.jr4("DM",this.code);e.interactive=!0,i.changed=!0}E.triggerDone()}else if(t.trigger.type==="DM"){const i=t.event,e=w.toActions(c.crEnemyActTarg("CARD",this.code,i.dmg.toString()));e.length>0?(e.push(C.noneEndTrigger()),C.ddf5(e)):E.triggerDone()}}ddf7(t){return c.ddp2(t,t.playerA,t.lane,{dmg:parseInt(t.param)})}}class Le extends M{lookup(t){return{["CBB"]:{c:()=>this.cindC(),f:e=>this.cindF(e),e:e=>this.cindE(e)},["EBW"]:{c:()=>this.ebwC(),f:e=>this.ebwF(e),e:e=>this.ebwE(e)},["IBR"]:{c:()=>this.ibrfC(),f:e=>this.ibrfF(e),e:e=>this.ibrfE(e)},["SBI"]:{c:()=>this.sbiC(),f:e=>this.sbiF(e),e:e=>this.sbiE(e)}}[t]}targAction(t,i){this.lookup(t).f(i)}targEval(t,i){return this.lookup(t).e(i)}enemy=!1;ftext="";constructor(t){super(t),this.hints=[c.underHint(this.level)],this.lookup(this.cardCode()).c(),this.text=`Forge: If you are rank ${this.level+1} or higher, `+this.ftext,this.ftext=""}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("FR",this.code);return a.interactive=!0,e}handleAction(t){const i=g.ddf6(t);this.targAction(this.cardCode(),i),C.actionDone(!0)}jr8(t){if(g.jr5(t.creatId).rank>this.level){const e=c.crActTarg("CARD",this.code,t.creatId);this.enemy&&(e.player="E");const a=w.toActions(e);a.length>0?C.ddf5(a):E.triggerDone()}else E.triggerDone()}ddf7(t){return this.targEval(this.cardCode(),t)}ebwC(){this.faction="N",this.rarity="C",this.name="Ebonbound Warlord",this.jr1=this.boof3714,this.jr2=this.jr1+4,this.tribe.push("VP"),this.hints.push("ENS"),this.enemy=!0;const t=this.boof369n;this.ftext=`give an enemy creature ${y.jr9(t,t)}.`,this.bonus={play:this.ddp9(0,-2*t,-t,0)}}ebwF(t){const i=this.boof369n;t.buff(i,i)}ebwE(t){const i=this.boof369n;return c.actionEvalBuffN(t,t.playerA,t.lane,i,i)}sbiC(){this.faction="U",this.rarity="C",this.name="Shardbound Invoker",this.jr1=this.boof4714,this.jr2=this.jr1+1,this.tribe.push("TK");const t=this.boof359;this.ftext=`give a creature ${y.jr9(t,t)}.`,this.bonus={play:this.ddp9(0,t*2,t,0)}}sbiF(t){const i=this.boof359;t.buff(i,i)}sbiE(t){const i=this.boof359;return c.actionEvalBuffN(t,t.playerA,t.lane,i,i)}cindC(){this.faction="T",this.rarity="C",this.name="Cinderbound Barbarian",this.jr1=this.boof3612,this.jr2=this.jr1,this.tribe.push("FR","AS"),this.hints.push("ENS");const t=this.boof6912;this.enemy=!0,this.ftext=`deal ${t} damage to an enemy creature.`,this.bonus={play:this.ddp9(0,t,0,0)}}cindF(t){t.hurtDirect(this.boof6912,this.code)}cindE(t){return c.ddp2(t,t.playerA,t.lane,{dmg:this.boof6912})}ibrfC(){this.faction="A",this.rarity="C",this.name="Ironbound Reinforcements",this.jr1=this.lValN([3,6,8]),this.jr2=this.jr1*2,this.tribe.push("GN");const t=this.boof5812;this.ftext=`give a creature ${y.jr9(t,0)}.`,this.bonus={play:this.ddp9(0,t,t,0)}}ibrfF(t){t.buff(this.boof5812,0)}ibrfE(t){return c.actionEvalBuffN(t,t.playerA,t.lane,this.boof5812)}}class Or extends M{constructor(t){super(t),this.faction="T",this.rarity="C",this.name="Uranti Elementalist",this.jr1=this.boof4712,this.jr2=this.jr1-1,this.tribe.push("YT"),this.hints=["FRO","EMA"],this.text=`Forge: You may move another friendly creature to an available lane adjacent to ${this.name}.`,this.bonus={play:.7}}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("FR",this.code);return a.interactive=!0,e}jr8(t){const i=g.jr5(t.creatId);if(this.emptySloots(i).length>0){const e=c.crFriendNotMeActTarg("CARD",i.id,this.code,v.enTil("P1",i.id)),a=w.toActions(e);a.length>0?(a.push(C.noneEndTrigger()),C.ddf5(a)):E.triggerDone()}else E.triggerDone()}handleAction(t){const i=v.deTil(t.param);i[0]==="P1"?C.ddf5(this.getCardActions(t)):(g.jr5(i[1]).move(t.lane),C.actionDone(!0))}emptySloots(t,i=""){return C.emptyAdjacents(t,v.enTil("P2",i))}getCardActions(t,i){const e=v.deTil(t.param),a=g.ddf6(t),h=g.jr5(e[1]),u=this.emptySloots(h,a.id);return u.push(C.cancelAction()),u}ddf7(t){const i=v.deTil(t.param);if(i[0]==="P1")return c.ddp5(t);{const e=c.actionEval(t,"ST"),a=g.jr5(i[1]),h=c.ddp1(a.owner,a.lane);return h.moveTo=t.lane,e.vectors.push(h),e}}}class Ur extends M{constructor(t){super(t),this.faction="T",this.rarity="H",this.name="Uranti Heartseeker",this.jr1=this.boof4915,this.jr2=this.jr1,this.initDefend=!0,this.tribe.push("YT"),this.text=`Activate: Deal ${this.jr1} damage to an enemy creature or player with exactly ${this.jr1} health.`}canActivate(t){return this.findVictims(t.id).length>0}startActivation(t){C.ddf5(this.getCardActions(c.ddf4(),t))}handleAction(t){if(t.zone==="F")g.ddf6(t).hurtDirect(this.jr1,this.code);else{const e=t;k.ddf3(e.playerA,this.jr1,this.code)}g.jr5(t.param).endActivation()}findVictims(t){const i=this.jr1,e=c.crEnemyTarg(),h=g.creatByTarget(e).filter(m=>m.health===i).map(m=>c.fieldSelectAction("CARD",m.lane,m.owner)),u=k.toPlayer("E");return u.health===i&&h.push(c.playerSelectAction("CARD",u.isPlayerA)),h.forEach(m=>{m.hostCard=this.code,m.param=t}),h}ddf7(t){if(t.actionKey==="ACTV")return c.ddp5(t);{const i=this.jr1,e=c.actionEval(t,"ST");if(t.zone==="P")e.vectors.push(c.evalVectorPlayerDmg(t.playerA,i)),e.bonus=9999;else{const a=t;e.vectors.push(c.ddp1(a.playerA,a.lane,{dmg:i}))}return e}}getCardActions(t,i){const e=i??g.jr5(t.param),a=this.findVictims(e.id);return a.push(C.cancelAction()),a}}class Wr extends M{constructor(t){super(t),this.faction="T",this.rarity="L",this.name="Vaerus, Herald of Fury",this.jr1=15,this.jr2=12,this.initMobile=2,this.tribe.push("DG"),this.hints=["OL","FRS"],this.text="Each friendly creature battles an additional time on each of your turns.",this.bonus={exist:this.ddp9(0,0,30,0)}}jr3(t,i){const e=super.jr3(t,i);return e.jr4("EF",this.code),e.jr4("TS",this.code),e}ddf8(t){if(t.event.code==="ENT"){const i=t.event;return t.ownerPlayerA===i.creature.owner&&t.ownerPlayerA===k.getActiveB()}else if(t.event.code==="TRS")return t.event.playerA===t.ownerPlayerA;return!1}giveXtra(t,i){t.hasMod(i)||(t.extraBattles+=1,t.addMod(c.mod("TK",!0,i)))}jr8(t){if(t.event.code==="ENT"){const i=t.event;i.creature.id===t.creatId?g.ddf1().forEach(e=>{this.giveXtra(e,t.creatId)}):vt.itBirthedFirst(i.creature.id,t.creatId)&&this.giveXtra(i.creature,t.creatId)}else t.event.code==="TRS"&&g.ddf1().forEach(i=>{i.extraBattles+=1,i.hasMod(t.creatId)||i.addMod(c.mod("TK",!0,t.creatId))});E.triggerDone()}}class G extends M{constructor(t){super(t),this.cardConstruct(this.cardCode())}cardConstruct(t){({["AEN"]:()=>this.anvenf(),["AGU"]:()=>this.avguard(),["BTH"]:()=>this.batthid(),["BBB"]:()=>this.bart(),["BLW"]:()=>this.blitwi(),["BWG"]:()=>this.brambleguard(),["CHY"]:()=>this.cavernhyd(),["CDC"]:()=>this.cindcol(),["CNM"]:()=>this.cindmy(),["CTG"]:()=>this.citg(),["CWK"]:()=>this.crag(),["DBP"]:()=>this.prowler(),["DMR"]:()=>this.raptor(),["DBR"]:()=>this.bearride(),["DTD"]:()=>this.dmaw(),["DSZ"]:()=>this.duskzomb(),["FWB"]:()=>this.fangbear(),["FWR"]:()=>this.ravager(),["FFG"]:()=>this.ffang(),["FMS"]:()=>this.firemane(),["FPR"]:()=>this.flop(),["FGA"]:()=>this.falpha(),["FGB"]:()=>this.fbeta(),["FGO"]:()=>this.fomega(),["FPM"]:()=>this.minot(),["FPS"]:()=>this.forgeplate(),["GGE"]:()=>this.geist(),["GGH"]:()=>this.ghast(),["GGS"]:()=>this.ggs(),["GCL"]:()=>this.glacial(),["IWC"]:()=>this.warcharger(),["LWY"]:()=>this.lwyrm(),["LHY"]:()=>this.lyshyd(),["KDC"]:()=>this.kadc(),["MRF"]:()=>this.marrow(),["MMI"]:()=>this.mmin(),["MMO"]:()=>this.mmop(),["NGW"]:()=>this.narg(),["NCW"]:()=>this.necrotic(),["NXC"]:()=>this.nexcore(),["NAM"]:()=>this.nyam(),["OBD"]:()=>this.battledroid(),["OSP"]:()=>this.oss(),["OSL"]:()=>this.ogsl(),["PRG"]:()=>this.perd(),["RHY"]:()=>this.ravh(),["RHC"]:()=>this.rime(),["RSP"]:()=>this.runprim(),["SCS"]:()=>this.scorp(),["SCD"]:()=>this.scout(),["SFT"]:()=>this.scrap(),["SBA"]:()=>this.sparkblade(),["SKB"]:()=>this.sparkbot(),["SBR"]:()=>this.sparkass(),["STM"]:()=>this.sparkman(),["SSN"]:()=>this.sfsent(),["SGI"]:()=>this.stonefist(),["SCL"]:()=>this.stormcall(),["SML"]:()=>this.lurker(),["TGS"]:()=>this.tsprout(),["TGN"]:()=>this.tgnome(),["TWS"]:()=>this.tscout(),["TWT"]:()=>this.tund(),["URD"]:()=>this.unrelenting(),["VBK"]:()=>this.vblock(),["VTC"]:()=>this.vtech(),["WTW"]:()=>this.waterwalk(),["WPD"]:()=>this.windprime(),["XCR"]:()=>this.xithcrush(),["XHU"]:()=>this.hulk(),["YWC"]:()=>this.yetiwar(),["ZIN"]:()=>this.zombinf()})[t]()}sist(){this.rarity="R",this.level===1?this.hints=["LV"]:this.consistent=!0}anvenf(){this.faction="A",this.rarity="C",this.name="Anvillon Enforcer",this.jr1=this.boof5711,this.jr2=this.jr1-1,this.initArmor=this.boof246,this.tribe.push("RB")}avguard(){this.faction="T",this.rarity="R",this.name="Avalanche Guardian",this.jr1=this.boof5915,this.jr2=this.lValN([8,15,23]),this.initMobile=1,this.initDefend=!0,this.tribe.push("IC","EL")}bart(){this.faction="U",this.rarity="H",this.name="Big Bad Bartok",this.jr1=this.level+8,this.jr2=this.jr1,this.consistent=!0,this.hints=["DL"],this.tribe.push("TG")}batthid(){this.faction="U",this.name="Batterhide",this.jr1=this.boof3814,this.jr2=this.jr1+3,this.sist(),this.initBT=!0,this.tribe.push("DN")}battledroid(){this.faction="A",this.rarity="H",this.name="Oreian Battledroid",this.jr1=this.lValN([5,7,17]),this.jr2=1,this.initArmor=this.jr1,this.tribe.push("RB")}bearride(){this.faction="U",this.rarity="C",this.name="Deepwood Bear Rider",this.jr1=this.lValN([5,16,18]),this.jr2=this.lValN([2,8,10]),this.tribe.push("LP")}blitwi(){this.faction="N",this.name="Blight Witch",this.jr1=this.lValN([2,5,9]),this.jr2=this.boof71117,this.sist(),this.initRegen=this.boof234,this.tribe.push("ZB")}brambleguard(){this.faction="U",this.rarity="C",this.name="Bramblewood Guardian",this.jr1=this.boof2612,this.jr2=this.lValN([9,14,24]),this.tribe.push("PL")}cavernhyd(){this.faction="U",this.rarity="C",this.name="Cavern Hydra",this.jr1=this.boof4711,this.jr2=this.boof71015,this.initRegen=this.boof135,this.tribe.push("HY")}cindcol(){this.faction="T",this.rarity="C",this.name="Cinder Colossus",this.jr1=this.lValN([3,13,24]),this.jr2=this.lValN([4,14,27]),this.initDefend=!0,this.level===1&&(this.hints=["LV"]),this.tribe.push("ER","EL")}cindmy(){this.faction="T",this.rarity="C",this.name="Cinder Mystic",this.jr1=this.lValN([4,11,21]),this.jr2=this.boof3714,this.tribe.push("FR","AS")}citg(){this.faction="A",this.rarity="C",this.name="Citadel Guard",this.jr1=this.lValN([8,12,25]),this.jr2=this.lValN([9,13,30]),this.initDefend=!0,this.tribe.push("RB")}crag(){this.faction="T",this.rarity="C",this.name="Crag Walker",this.jr1=this.lValN([7,12,18]),this.jr2=this.boof246,this.initMobile=1,this.tribe.push("DN")}dmaw(){this.faction="N",this.rarity="L",this.name="Duskmaw, Twilight Drake",this.jr1=this.boof61017,this.jr2=this.boof5915,this.initMobile=1,this.tribe.push("ST","DG")}duskzomb(){this.faction="N",this.rarity="C",this.name="Duskspire Zombie",this.jr1=this.lValN([2,5,16]),this.jr2=this.lValN([5,8,19]),this.initRegen=4,this.tribe.push("ZB")}falpha(){this.faction="A",this.rarity="C",this.name="Forge Guardian Alpha",this.jr1=this.lValN([4,8,20]),this.jr2=this.lValN([8,14,26]),this.initDefend=!0,this.tribe.push("RB","GD")}fangbear(){this.faction="U",this.rarity="C",this.name="Fangwood Bear",this.jr1=this.boof61016,this.jr2=this.jr1,this.tribe.push("BR")}fbeta(){this.faction="A",this.rarity="R",this.name="Forge Guardian Beta",this.jr1=this.lValN([5,8,20]),this.jr2=this.lValN([3,6,18]),this.initArmor=this.boof124,this.tribe.push("RB","GD")}ffang(){this.faction="U",this.rarity="C",this.name="Featherfang",this.jr1=this.boof61218,this.jr2=this.boof4812,this.tribe.push("DN")}firemane(){this.faction="T",this.rarity="C",this.name="Firemane Steed",this.jr1=this.lValN([3,6,16]),this.jr2=this.lValN([6,9,19]),this.initMobile=2,this.tribe.push("FR","EL")}flop(){this.faction="T",this.rarity="C",this.name="Flowstone Primordial",this.jr1=this.lValN([6,7,15]),this.jr2=this.jr1+1,this.tribe.push("FR","EL")}fomega(){this.faction="A",this.rarity="L",this.name="Forge Guardian Omega",this.jr1=this.boof255080,this.jr2=this.jr1,this.initMobile=this.boof124,this.initArmor=this.initMobile*10,this.initBT=!0,this.initAggro=!0,this.consistent=!0,this.tribe.push("RB","GD")}forgeplate(){this.faction="A",this.rarity="C",this.name="Forgeplate Sentry",this.jr1=this.boof4915,this.jr2=this.jr1,this.initArmor=this.boof135,this.tribe.push("RB")}ggs(){this.faction="N",this.rarity="C",this.name="Grimgaunt Spectre",this.jr1=this.lValN([3,11,14]),this.jr2=this.jr1,this.initMobile=1,this.hints=["LV"],this.tribe.push("GG")}geist(){this.faction="N",this.rarity="C",this.name="Grave Geist",this.jr1=this.boof71118,this.jr2=this.boof4711,this.tribe.push("ST")}ghast(){this.faction="N",this.rarity="C",this.name="Grave Ghast",this.jr2=this.boof71013,this.jr1=this.jr2-2,this.initRegen=this.boof246,this.tribe.push("ZB")}glacial(){this.faction="T",this.rarity="C",this.name="Glacial Colossus",this.jr1=this.boof61016,this.jr2=this.lValN([8,13,19]),this.tribe.push("IC","EL"),this.initDefend=!0}hulk(){this.faction="N",this.rarity="C",this.name="Xithian Hulk",this.jr1=this.boof4814,this.jr2=this.jr1+3,this.tribe.push("AB")}kadc(){this.faction="T",this.rarity="C",this.name="Kadras Colossus",this.jr1=this.lValN([6,11,13]),this.jr2=this.jr1,this.tribe.push("GT"),this.hints=["DL"]}lurker(){this.faction="U",this.rarity="C",this.name="Swampmoss Lurker",this.jr1=this.lValN([8,13,22]),this.jr2=this.lValN([4,6,15]),this.tribe.push("DN")}lwyrm(){this.faction="T",this.rarity="C",this.name="Lightning Wyrm",this.jr1=this.boof4711,this.jr2=this.boof258,this.tribe.push("LT","EL"),this.initAggro=!0}lyshyd(){this.faction="U",this.rarity="C",this.name="Lysian Hydra",this.jr1=this.boof5914,this.jr2=this.jr1+1,this.initRegen=this.level,this.tribe.push("HY")}marrow(){this.faction="N",this.rarity="C",this.name="Marrow Fiend",this.jr1=this.boof81117,this.jr2=this.lValN([1,5,13]),this.tribe.push("SK")}minot(){this.faction="A",this.name="Forgeplate Minotaur",this.jr1=this.lValN([2,8,16]),this.jr2=this.lValN([4,9,17]),this.sist(),this.initArmor=this.level,this.tribe.push("RB")}mmin(){this.faction="A",this.rarity="C",this.name="Metamind Infiltrator",this.jr1=this.boof5917,this.jr2=this.jr1-1,this.tribe.push("MM")}mmop(){this.faction="A",this.rarity="C",this.name="Metamind Operator",this.jr1=this.boof4610,this.jr2=this.lValN([10,14,18]),this.tribe.push("MM")}narg(){this.faction="T",this.rarity="C",this.name="Nargath Warrior",this.jr1=this.boof51014,this.jr2=this.jr1+1,this.tribe.push("ER","AS")}necrotic(){this.faction="N",this.rarity="C",this.name="Necrotic Wurm",this.jr1=this.lValN([4,7,18]),this.jr2=this.lValN([5,8,19]),this.tribe.push("WR")}nexcore(){this.faction="A",this.rarity="C",this.name="Nexus Core",this.jr1=0,this.jr2=this.lValN([15,25,40]),this.tribe.push("RB"),this.initDefend=!0}nyam(){this.faction="N",this.rarity="C",this.name="Nyrali Ambusher",this.jr1=this.boof71117,this.jr2=this.lValN([3,6,13]),this.tribe.push("OZ")}ogsl(){this.faction="U",this.rarity="C",this.name="Overgrown Spineleaf",this.jr1=this.lValN([6,12,16]),this.jr2=this.boof4812,this.tribe.push("PL")}oss(){this.faction="N",this.rarity="R",this.name="Ossuary Spirit",this.jr1=this.lValN([1,3,6]),this.jr2=this.boof91420,this.initRegen=this.jr1+2,this.tribe.push("ST")}perd(){this.faction="N",this.rarity="C",this.name="Perdition Guard",this.jr1=this.lValN([3,12,15]),this.jr2=this.jr1-1,this.tribe.push("NG")}prowler(){this.faction="U",this.rarity="C",this.name="Deepbranch Prowler",this.jr1=this.lValN([8,9,10]),this.jr2=this.jr1,this.tribe.push("CT"),this.hints=["DL"],this.initBT=!0}raptor(){this.faction="U",this.rarity="C",this.name="Deepmoss Raptor",this.jr1=this.lValN([2,13,16]),this.jr2=this.jr1,this.hints=["LV","ST"],this.tribe.push("DN")}ravager(){this.faction="U",this.rarity="C",this.name="Fangwood Ravager",this.jr1=this.boof5917,this.jr2=this.jr1,this.tribe.push("BE")}ravh(){this.faction="U",this.rarity="C",this.name="Ravenous Hydra",this.jr1=this.boof5813,this.jr2=this.jr1+this.level,this.initRegen=this.level,this.initBT=!0,this.tribe.push("HY")}rime(){this.faction="T",this.rarity="C",this.name="Rimehorn Charger",this.jr1=this.lValN([5,8,10]),this.jr2=this.jr1+3,this.initMobile=1,this.hints=["DL"],this.tribe.push("RM")}runprim(){this.faction="T",this.name="Runestorm Primordial",this.jr1=this.boof3714,this.jr2=this.jr1-1,this.sist(),this.initAggro=!0,this.tribe.push("LT","EL")}scorp(){this.faction="N",this.rarity="C",this.name="Scavenger Scorpion",this.jr1=this.lValN([6,9,11]),this.jr2=this.jr1,this.initRegen=this.level,this.hints=["DL"],this.tribe.push("AB")}scout(){this.faction="A",this.rarity="H",this.name="Scout Drone",this.jr1=this.boof246,this.jr2=this.jr1,this.isFree=this.level>1,this.hints=[this.level===1?"LV":"DL"],this.tribe.push("RB")}scrap(){this.faction="A",this.rarity="H",this.name="Scrapforge Titan",this.jr1=this.lValN([1,5,20]),this.jr2=this.jr1,this.initArmor=this.lValN([1,5,10]),this.level===1&&(this.hints=["LV","ST"],this.bonus={play:1}),this.tribe.push("RB")}sfsent(){this.faction="A",this.rarity="C",this.name="Spiritforge Sentinel",this.jr1=this.lValN([3,6,9]),this.jr2=this.jr1*2,this.initArmor=this.lValN([1,2,6]),this.tribe.push("RB")}sparkbot(){this.faction="A",this.rarity="C",this.name="Spark Bot",this.jr1=this.boof5914,this.jr2=this.lValN([6,11,16]),this.tribe.push("RB")}sparkblade(){this.faction="A",this.rarity="C",this.name="Sparkblade Assassin",this.jr1=this.lValN([4,12,14]),this.jr2=this.lValN([5,13,15]),this.tribe.push("HM")}sparkass(){this.faction="T",this.rarity="C",this.name="Sparkbrand Asir",this.jr1=this.lValN([2,7,9]),this.jr2=this.lValN([6,11,13]),this.initAggro=!0,this.tribe.push("LT","AS")}sparkman(){this.faction="T",this.rarity="R",this.name="Sparktail Manticore",this.jr1=this.boof369,this.jr2=this.boof71116,this.initAggro=!0,this.initMobile=1,this.tribe.push("MT")}stonefist(){this.faction="T",this.rarity="C",this.name="Stonefist Giant",this.jr1=this.lValN([3,7,16]),this.jr2=this.lValN([6,10,24]),this.tribe.push("ER","EL")}stormcall(){this.faction="T",this.rarity="C",this.name="Storm Caller",this.jr1=this.lValN([8,11,14]),this.jr2=this.jr1-2,this.tribe.push("WN","AS")}tgnome(){this.faction="A",this.rarity="C",this.name="Technognome",this.jr1=this.lValN([3,9,19]),this.jr2=this.jr1,this.level===1&&(this.hints=["LV"]),this.tribe.push("GN")}tscout(){this.faction="A",this.rarity="C",this.name="Tower Scout",this.jr1=this.boof5915,this.jr2=this.jr1,this.initMobile=1,this.tribe.push("HM")}tund(){this.faction="A",this.rarity="C",this.name="Tundra Watcher",this.jr1=this.lValN([5,10,12]),this.jr2=this.lValN([8,11,13]),this.hints=["DL"],this.tribe.push("RB")}tsprout(){this.faction="U",this.rarity="C",this.name="Tanglesprout",this.jr1=this.boof7911,this.jr2=this.jr1+1,this.hints=["DL"],this.tribe.push("PL")}unrelenting(){this.faction="N",this.rarity="H",this.name="Unrelenting Dead",this.jr1=this.boof4814,this.jr2=this.jr1,this.initRegen=this.jr1,this.tribe.push("ZB")}vblock(){this.faction="A",this.rarity="R",this.name="Vault Blockade",this.jr1=0,this.jr2=this.boof135,this.initArmor=this.boof101520,this.initDefend=!0,this.tribe.push("RB")}vtech(){this.faction="A",this.rarity="C",this.name="Vault Technician",this.jr1=this.boof61218,this.jr2=this.lValN([3,9,15]),this.tribe.push("HM")}warcharger(){this.faction="A",this.rarity="C",this.name="Ionic Warcharger",this.jr1=this.boof4915,this.jr2=this.lValN([7,12,18]),this.initMobile=1,this.tribe.push("RB")}waterwalk(){this.faction="T",this.rarity="C",this.name="Water Walker",this.jr1=this.lValN([5,12,14]),this.jr2=this.lValN([2,9,11]),this.tribe.push("IC","AS")}windprime(){this.faction="T",this.rarity="C",this.name="Wind Primordial",this.jr2=this.boof4814,this.jr1=this.jr2+2,this.initMobile=this.level,this.tribe.push("WN","EL")}xithcrush(){this.faction="N",this.rarity="C",this.name="Xithian Crusher",this.jr1=this.lValN([4,10,16]),this.jr2=this.jr1+2,this.tribe.push("AB")}yetiwar(){this.faction="T",this.rarity="C",this.name="Yeti Warcaller",this.jr1=this.boof248,this.jr2=this.lValN([10,15,23]),this.tribe.push("YT")}zombinf(){this.faction="N",this.rarity="C",this.name="Zombie Infantry",this.jr1=this.boof61015,this.jr2=this.jr1-1,this.tribe.push("ZB")}}class zr extends gt{constructor(t){super(t),this.faction="N",this.rarity="L",this.name="Varna's Pact";const i=this.lValS(["a","two","three"]),e=this.level===1?"":"s",a=this.level===1?"was":"were";this.text=`Put ${i} random creature${e} that ${a} destroyed this game into ${i} lane${e}.`}playTargets(){const t=super.playTargets();return t.push(this.fieldTarget("P1",[])),t}handleAction(t){const i=v.deTil(t.param);if(i[0]==="P1")this.level===1?this.endSpell([t.lane],t.playerA):C.ddf5(this.getCardActions(t));else if(i[0]==="P2"){const e=[t.lane,parseInt(i[1])];this.level===2?this.endSpell(e,t.playerA):C.ddf5(this.getCardActions(t))}else this.endSpell([t.lane,parseInt(i[1]),parseInt(i[2])],t.playerA)}endSpell(t,i){this.logSpell();const e=Date.now();t.forEach(a=>{const h=U.gravedigger();h&&g.birthCreature(h,"R",i,a,e)}),L.spellCast()}fieldTarget(t,i){const e=c.actionTarget("TF","CARD",this.code,v.enTil(t,...i));return e.player="F",e.lanes=g.laneIdx.filter(a=>!i.includes(a)),e}getCardActions(t,i){const e=v.deTil(t.param);let a;if(e[0]==="P1")a=this.fieldTarget("P2",[t.lane]);else{const h=[t.lane,parseInt(e[1])];a=this.fieldTarget("P3",h)}return w.toActions(a)}ddf7(t){const e=v.deTil(t.param)[0],a=c.ddp4(t,t.playerA,t.lane,`${"XHU"}1`);return a.final=this.level===1&&e==="P1"||this.level===2&&e==="P2"||this.level===3&&e==="P3",a.hints=["RE"],a}}class Zr extends ke{jr3(t,i){const e=super.jr3(t,i);return e.jr4("LG",this.code),e}ddf8(t){const i=t.event;return t.trigger.type==="LG"&&t.ownerPlayerA===i.playerA}jr8(t){const i=t.event,e=this.boof124*i.healAmt;g.jr5(t.creatId).buff(e,e),E.triggerDone()}}class Kr extends M{constructor(t){super(t),this.faction="U",this.rarity="R",this.name="Wildwood Sower",this.jr1=this.boof3612,this.jr2=this.lValN([6,11,18]),this.tribe.push("HM"),this.hints=["EMO"];const i=W.minionBuff(this.level);this.text=`When you play a spell, you may put a ${i}/${i} ${W.minionName(this.level)} into an available lane.`,this.bonus={exist:this.ddp9(1,i*2,i,0)*.5}}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("PC",this.code);return a.interactive=!0,e}handleAction(t){g.birthCreature(W.minionCode(this.level),"P",t.playerA,t.lane),C.actionDone(!0)}ddf8(t){if(t.trigger.type==="PC"){const i=t.event;return i.playerA===t.ownerPlayerA&&O.getCard(i.cardCode).type==="S"}return!1}jr8(t){const i=c.emptyPlayerActTarg("F","CARD",this.code,""),e=w.toActions(i);e.length===0?E.triggerDone():(e.push(C.noneEndTrigger()),C.ddf5(e))}ddf7(t){return c.ddp4(t,t.playerA,t.lane,W.minionCode(this.level))}}class Yr extends M{constructor(t){super(t),this.faction="T",this.rarity="C",this.name="Windcaller Shaman",this.jr1=this.boof3713,this.jr2=this.jr1+4,this.tribe.push("WN","AS"),this.hints=["FRO","EMA"],this.text=`Forge: You may move another friendly ${y.levelGateText(this.level,!0)}creature to an available lane adjacent to ${this.name}.`,this.bonus={play:this.lValN([.25,.5,1])}}jr3(t,i){const e=super.jr3(t,i),a=e.jr4("FR",this.code);return a.interactive=!0,e}jr8(t){const i=g.jr5(t.creatId);if(this.emptySloots(i).length>0){const e=c.crFriendNotMeActTarg("CARD",i.id,this.code,v.enTil("P1",i.id));e.level=w.ddf2(this.level);const a=w.toActions(e);a.length>0?(a.push(C.noneEndTrigger()),C.ddf5(a)):E.triggerDone()}else E.triggerDone()}handleAction(t){const i=v.deTil(t.param);i[0]==="P1"?C.ddf5(this.getCardActions(t)):(g.jr5(i[1]).move(t.lane),C.actionDone(!0))}emptySloots(t,i=""){return C.emptyAdjacents(t,v.enTil("P2",i))}getCardActions(t,i){const e=v.deTil(t.param),a=g.ddf6(t),h=g.jr5(e[1]),u=this.emptySloots(h,a.id);return u.push(C.cancelAction()),u}ddf7(t){const i=v.deTil(t.param);if(i[0]==="P1")return c.ddp5(t);{const e=c.actionEval(t,"ST"),a=g.jr5(i[1]),h=c.ddp1(a.owner,a.lane);return h.moveTo=t.lane,e.vectors.push(h),e}}}class Xr extends M{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Xithian Rotfiend",this.jr1=this.lValN([7,12,20]),this.jr2=this.jr1+1,this.tribe.push("AB"),this.hints=["OL"];const i=-this.boof135;this.text=`When ${this.name} becomes opposed, it gets ${y.jr9(i,i)}.`}jr3(t,i){const e=super.jr3(t,i);return e.jr4("EF",this.code),e.jr4("MV",this.code),e}ddf8(t){if(t.trigger.type==="EF"||t.trigger.type==="MV"){const i=t.event;return t.trigger.creatId===i.creature.id&&t.trigger.type==="MV"||i.creature.owner!==t.ownerPlayerA}return!1}jr8(t){let i=!1;const e=g.jr5(t.creatId),a=t.event;if((e.id===a.creature.id&&e.opposed||a.creature.lane===g.oppositeLane(e.lane))&&(i=!0),i){const h=-this.boof135;e.buff(h,h)}E.triggerDone()}}class qr extends M{constructor(t){super(t),this.faction="N",this.rarity="C",this.name="Zombie Titan",this.jr1=this.boof4712,this.jr2=this.jr1,this.tribe.push("ZB");const i=this.boof234;this.text=`While ${this.name} is in a side lane, it gets ${y.jr9(i,i,!0)} and Regenerate ${this.level}.`,this.bonus={play:this.ddp9(0,i*2+this.level,i,0)},this.hints=["SL"]}jr3(t,i){const e=super.jr3(t,i),a=e.addEffect("PS",this.code);return a.area="C",e}enforceEffect(t,i){if(i.lane===1||i.lane===5){const e=this.boof234;[c.mod("AT",e,i.id),c.mod("HL",e,i.id),c.mod("MH",e,i.id),c.mod("RG",this.level,i.id)].forEach(h=>{i.addModSafe(h)})}else i.removeModSafe(i.id)}}class jr{cardCache={};mapper={["AAK"]:wi,["ABB"]:Di,["AGC"]:mt,["AGK"]:Z,["AGP"]:ct,["AGW"]:$,["ASG"]:$,["AFO"]:Se,["ATG"]:Zt,["ART"]:Zt,["ATP"]:Fe,["AGM"]:oe,["ALG"]:Te,["AHL"]:zi,["ALS"]:Te,["ATZ"]:$,["ARB"]:Zt,["AEN"]:G,["APM"]:Ei,["AQE"]:$,["AGD"]:xi,["AFS"]:ne,["ABR"]:Vt,["AFR"]:Z,["AMY"]:Vt,["ABL"]:$,["ATT"]:vt,["AGU"]:G,["AIV"]:Bt,["BTH"]:G,["BTI"]:mt,["BTN"]:Te,["BBB"]:G,["BLH"]:Zt,["BSP"]:Bt,["BWK"]:oe,["BLW"]:G,["BSR"]:mt,["BMY"]:Fi,["BSW"]:ot,["BWW"]:Pe,["BTM"]:$,["BOS"]:W,["BAW"]:mt,["BWG"]:G,["BTR"]:Z,["BWD"]:Ce,["BSG"]:Bi,["BSS"]:Z,["BTS"]:Ce,["BST"]:me,["BWT"]:Pi,["BRF"]:oe,["BWH"]:Hi,["BRN"]:ge,["BZD"]:Z,["BFM"]:Z,["BSM"]:Ni,["CDT"]:oe,["CMF"]:Ve,["CTL"]:ct,["CCS"]:ot,["CHY"]:G,["CHV"]:Mi,["CRS"]:Se,["COD"]:ct,["CTI"]:Z,["CHA"]:mt,["CHH"]:Z,["CHR"]:Be,["CBB"]:Le,["CDC"]:G,["CFB"]:Vt,["CNM"]:G,["CSW"]:Z,["CTG"]:G,["CCT"]:Oe,["CFG"]:Re,["CGF"]:At,["CGL"]:ot,["CSU"]:$,["CCR"]:mt,["CSB"]:At,["CWK"]:G,["CRC"]:Bt,["CYC"]:Zt,["COZ"]:W,["CYS"]:At,["CTW"]:$,["CTV"]:$,["CAG"]:$,["CBS"]:$,["CIN"]:ke,["CSH"]:ot,["CSG"]:Re,["DFR"]:Z,["DHW"]:Zt,["DSS"]:Me,["DCR"]:ct,["DSK"]:At,["DBA"]:Z,["DBP"]:G,["DMR"]:G,["DBR"]:G,["DCS"]:Ot,["DGZ"]:ct,["DNK"]:Li,["DBN"]:Z,["DDS"]:Ii,["DIS"]:he,["DSV"]:Gi,["DDD"]:Z,["DZA"]:W,["DZD"]:Be,["DBT"]:$,["DFB"]:Lt,["DMW"]:ne,["DCH"]:he,["DTD"]:G,["DSZ"]:G,["DYB"]:$,["DBQ"]:$i,["DYS"]:Vi,["DYL"]:Oi,["EBW"]:Le,["ESK"]:Bt,["EHW"]:Ui,["ETN"]:$,["EWE"]:He,["ENP"]:$,["ESU"]:he,["ENR"]:$,["EPD"]:ct,["EPH"]:Zi,["EPS"]:Vt,["ESG"]:Ki,["ESC"]:Ce,["ESP"]:Yi,["EWT"]:Z,["EHN"]:Ce,["EFM"]:Vt,["EFP"]:Xi,["EXD"]:$,["FWB"]:G,["FWR"]:G,["FFG"]:G,["FST"]:At,["FWK"]:At,["FIN"]:$,["FRR"]:ct,["FVA"]:$,["FWG"]:W,["FWC"]:Bt,["FFU"]:ot,["FLH"]:Ve,["FMS"]:G,["FSM"]:ct,["FBC"]:Vt,["FBI"]:Zt,["FFS"]:ot,["FLN"]:$,["FRI"]:mt,["FSS"]:Me,["FLS"]:Zt,["FSH"]:ot,["FFD"]:At,["FRV"]:mt,["FSP"]:vt,["FPR"]:G,["FFL"]:$,["FGA"]:G,["FGB"]:G,["FGD"]:vt,["FGG"]:ne,["FGO"]:G,["FOL"]:Se,["FPM"]:G,["FPS"]:G,["FFM"]:He,["FMD"]:qi,["FME"]:Bt,["FSK"]:ji,["FWT"]:Z,["FZS"]:$,["FUN"]:W,["GOS"]:Ji,["GHS"]:ne,["GHB"]:Oe,["GHR"]:Qi,["GRN"]:Re,["GTH"]:$,["GSC"]:oe,["GMP"]:Ot,["GTT"]:_i,["GCL"]:G,["GCR"]:$,["GLF"]:mt,["GRW"]:mt,["GSW"]:Z,["GVS"]:At,["GSS"]:Z,["GBG"]:At,["GGE"]:G,["GGH"]:G,["GRP"]:tr,["GGD"]:Lt,["GGR"]:Lt,["GGP"]:Lt,["GGS"]:G,["GRM"]:ct,["GHT"]:mt,["GMR"]:At,["HMF"]:vt,["HTR"]:Pe,["HAR"]:$,["HFA"]:xe,["HOD"]:vt,["HWM"]:ke,["HOX"]:he,["HGS"]:er,["HTP"]:ir,["IBF"]:ct,["ITO"]:he,["IVS"]:ct,["IWC"]:G,["IHA"]:oe,["IBR"]:Le,["IMD"]:Be,["IMA"]:Z,["IZL"]:rr,["IZR"]:ar,["IZK"]:Zt,["IFL"]:ge,["IFR"]:$,["JPK"]:$,["KDC"]:G,["KAW"]:Zt,["KOD"]:ot,["KIW"]:sr,["KTS"]:Ne,["KKK"]:Pe,["LOD"]:ct,["LFA"]:nr,["LKP"]:or,["LGT"]:Z,["LBR"]:$,["LSK"]:ge,["LWY"]:G,["LBD"]:Z,["LSS"]:Me,["LBL"]:Ot,["LSP"]:ke,["LUC"]:He,["LMV"]:Z,["LHY"]:G,["LYR"]:ge,["LYS"]:$,["MMH"]:mt,["MRF"]:G,["MOE"]:Z,["MXW"]:mt,["MSP"]:he,["MMA"]:Z,["MMX"]:At,["MMI"]:G,["MMO"]:G,["MMV"]:Bt,["MPH"]:$,["MSC"]:$,["MTS"]:ai,["MTT"]:hr,["MML"]:lr,["MMW"]:cr,["MDE"]:ii,["MBP"]:ot,["MND"]:ot,["NNS"]:$,["NGB"]:mt,["NGW"]:G,["NSL"]:$,["NCF"]:$,["NCS"]:ot,["NCW"]:G,["NCV"]:$,["NSW"]:ur,["NDR"]:dr,["NEM"]:he,["NSH"]:ct,["NXA"]:fr,["NXC"]:G,["NXG"]:ot,["NXP"]:ei,["NXT"]:Te,["NGT"]:Lt,["NGQ"]:gr,["NSD"]:W,["NCL"]:ct,["NFF"]:ot,["NAM"]:G,["NOZ"]:At,["NSY"]:Z,["ONN"]:mr,["OXA"]:pr,["OXM"]:Z,["OXP"]:yr,["OOZ"]:W,["OBB"]:br,["OEX"]:$,["OWH"]:vr,["OBD"]:G,["OFM"]:Z,["OJC"]:vt,["OPK"]:Z,["OSV"]:me,["OWW"]:ne,["OHV"]:ot,["ODC"]:Ar,["OSP"]:G,["OSL"]:G,["OWF"]:ct,["OXS"]:kr,["PHM"]:Z,["PPM"]:ot,["PSM"]:Z,["PLW"]:ct,["PRG"]:G,["PRI"]:ai,["PHS"]:mt,["PTB"]:ct,["PSC"]:ot,["PSH"]:Bt,["PTR"]:$,["PSG"]:$,["PMS"]:$,["POX"]:At,["PYG"]:Oe,["PYS"]:ct,["RBH"]:Tr,["ROK"]:ct,["RPT"]:W,["RHY"]:G,["RTS"]:Vt,["RHU"]:me,["RSC"]:Ne,["RLW"]:vt,["RFL"]:Cr,["RHC"]:G,["ROG"]:$,["RWC"]:Ce,["RFA"]:xe,["RSE"]:Sr,["RBG"]:We,["RGG"]:Bt,["RSZ"]:At,["RSP"]:G,["RHW"]:vt,["SBF"]:Ot,["SAP"]:$,["SPL"]:W,["SVO"]:$,["SSE"]:Ot,["SXP"]:W,["SXD"]:W,["SXT"]:W,["STS"]:ct,["SCS"]:G,["SMD"]:Z,["SFS"]:wr,["SCD"]:G,["SFT"]:G,["SOC"]:$,["SOA"]:$,["SOD"]:$,["SOK"]:ge,["SOT"]:$,["SDL"]:W,["SAD"]:Dr,["SHG"]:$,["SBI"]:Le,["SCC"]:Ne,["SPD"]:Ot,["SPM"]:Ot,["STD"]:mt,["SHS"]:oe,["SGF"]:ot,["SKG"]:ei,["SSR"]:Bt,["SNB"]:$,["SNP"]:ct,["SRD"]:ct,["SSH"]:Fe,["SRM"]:ot,["SRH"]:Lt,["SDN"]:Z,["SHV"]:$,["SRP"]:$,["SGG"]:Z,["SBA"]:G,["SKB"]:G,["SBR"]:G,["SKS"]:me,["STM"]:G,["SBD"]:Z,["SCV"]:Er,["SFM"]:At,["SSN"]:G,["SSM"]:Bt,["SLH"]:xr,["SPN"]:W,["SSI"]:ke,["SND"]:Ne,["SRV"]:We,["STR"]:$,["SPU"]:W,["XYR"]:W,["SPH"]:Fr,["SSA"]:ot,["STO"]:$,["SDR"]:vt,["SOL"]:ri,["SOV"]:$,["SHK"]:ge,["SWR"]:Pr,["SER"]:Br,["SFA"]:xe,["STG"]:Hr,["SSS"]:Me,["SSK"]:Z,["SWG"]:me,["SWM"]:ot,["STN"]:$,["SGI"]:G,["SBG"]:Nr,["SCL"]:G,["SGA"]:xe,["STP"]:$,["SSG"]:Bt,["SVH"]:Vt,["SIN"]:$,["SYL"]:Z,["SEV"]:mt,["SML"]:G,["SYO"]:Rr,["TST"]:ct,["TBA"]:Ot,["TGL"]:$,["TGS"]:G,["TPT"]:$,["TDW"]:vt,["TNL"]:Lr,["TEX"]:Se,["TGN"]:G,["TSM"]:Se,["TUP"]:$,["TOT"]:$,["TAB"]:ii,["TGI"]:Z,["TDS"]:Be,["TSP"]:Ir,["TPG"]:Fe,["TMG"]:Fe,["TBB"]:Ve,["TOB"]:$,["TWS"]:G,["TVG"]:Wi,["TXS"]:$,["TFK"]:W,["TFD"]:W,["TFF"]:W,["TCG"]:$,["TWT"]:G,["TRN"]:ct,["TGK"]:We,["TSL"]:Gr,["TTF"]:W,["TWG"]:Re,["UGM"]:Bt,["UGL"]:Z,["UIC"]:$r,["ULR"]:Vr,["URD"]:G,["UBL"]:$,["UCM"]:ot,["UEM"]:Or,["UHS"]:Ur,["UIM"]:ot,["UWL"]:Z,["UWS"]:Z,["UIW"]:Z,["UTM"]:Z,["UTR"]:vt,["URB"]:Vt,["UPM"]:ne,["VRP"]:zr,["VBK"]:G,["VTC"]:G,["VTW"]:me,["VGN"]:At,["VND"]:Z,["VNF"]:mt,["VNS"]:Z,["VSK"]:$,["VCH"]:ct,["VGR"]:$,["VOB"]:$,["VCG"]:Ot,["VES"]:Vt,["VYE"]:$,["WBY"]:mt,["WBU"]:mt,["WMR"]:ot,["WMM"]:$,["WTK"]:ri,["WTW"]:G,["WTA"]:Zr,["WWP"]:Z,["WWR"]:ot,["WOD"]:ct,["WFM"]:ne,["WWS"]:Kr,["WBH"]:He,["WCS"]:Yr,["WPD"]:G,["WFB"]:Z,["WFS"]:ot,["WBG"]:Ot,["XCR"]:G,["XDH"]:mt,["XHS"]:At,["XHU"]:G,["XRF"]:Xr,["XSH"]:ot,["XDV"]:Pe,["XRW"]:$,["YWC"]:G,["YNS"]:Lt,["ZPM"]:ot,["ZTR"]:W,["ZTU"]:At,["ZIN"]:G,["ZBS"]:W,["ZST"]:W,["ZMT"]:qr,["ZMB"]:W,["ZSH"]:Ot};makeCard(t){try{return t==="SOV3"?new Wr(t):t==="SOC3"?new Z(t):t==="LOD3"?new Ri(t):t==="GOS3"?new Mr(t):new this.mapper[Pt.extractCardCode(t)](t)}catch(i){throw console.error("Make card screwed up on code: "+t),i}}getCard(t){return this.cardCache[t]||(this.cardCache[t]=this.makeCard(t)),this.cardCache[t]}}const O=new jr;class Jr{registry;constructor(){this.registry=[]}find(t){const i=this.registry.find(e=>e.action===t);if(i)return i;throw console.trace(),new Error("Attempted to find non-existing clicker")}entoggle(t,i){const e=this.find(t);e.enabled=i}add(t){this.registry.push(t)}get(t){return this.find(t)}remove(t){const i=this.registry.findIndex(e=>e.action===t);i>-1&&this.registry.splice(i,1)}removeAll(){this.registry=[]}enable(t){this.entoggle(t,!0)}disable(t){this.entoggle(t,!1)}hitTest(t,i,e){if(x.ui.animating)return;let a,h;this.scaleFactor===1?(a=t,h=i):(a=Math.round(t*this.scaleFactor),h=Math.round(i*this.scaleFactor));let u,m=v.clickMode;return m==="M"?u=e:e===et.ForceRight?u=et.Right:m==="T"?u=et.Left:u=et.Right,$e.arrayHit(this.registry,a,h,u)}updateScale(t){t===1?this.scaleFactor=1:this.scaleFactor=1/t}scaleFactor=1}const j=new Jr;class Qr{memLoad=!0;step="O";vsAI=!0;p1=this.dud();p2=this.dud();initConstructed(){this.step="O",this.memLoad&&(this.memLoad=!1,this.p1.mode=v.readStringStorage("cMode"+"A","CP"),this.p2.mode=v.readStringStorage("cMode"+"B","CP"),this.p1.mode==="LK"&&(this.p1.mode="CP"),this.p2.mode==="LK"&&(this.p2.mode="CP"),this.vsAI=v.readBoolStorage("cAI",!0)),ut.drawAll()}handleMenuPick(t,i){if(t==="CI"||t==="CV")this.vsAI=t==="CI",v.writeBoolStorage("cAI",this.vsAI);else if(t==="CN")this.ezDeck(this.p1)?this.ezDeck(this.p2)?this.launchConstructed():(this.step="B",C.ddf5(this.generateDeckPickerActions())):(this.step="A",C.ddf5(this.generateDeckPickerActions()));else{const e=i==="A"?this.p1:this.p2;t==="LK"?Yt.loadFromFile().then(a=>{typeof a=="string"?new Je().iAmError(a):(e.deck=a,e.mode=t,v.writeStorage("cMode"+i,t),ut.drawAll())}):(e.mode=t,v.writeStorage("cMode"+i,t))}ut.drawAll()}ezDeck(t){return t.mode==="CP"?!1:(t.mode==="CR"?t.deck=Yt.randomStockDeck():t.mode==="CX"&&(t.deck=Yt.treatsAbound(!0)),!0)}handleDeckPick(t){const i=v.deTil(t.param),e=Yt.stockDeckByName(i[0],i[1]);this.step==="A"?(this.p1.deck=e,this.ezDeck(this.p2)?this.launchConstructed():(this.step="B",C.ddf5(this.generateDeckPickerActions()))):(this.p2.deck=e,this.launchConstructed())}generateDeckPickerActions(t=-1){const i=Ae.map((e,a)=>{const h=c.basicAction("DSET");return h.param=a.toString(),h});if(t>-1){const e=Ae[t],a=e.decks.map(h=>{const u=c.basicAction("DECK");return u.param=v.enTil(e.id,h.name),u});return i.concat(a)}return i}launchConstructed(){x.aiMode=this.vsAI,pt.setMode("G"),x.newGame(this.p1.deck.cards,this.p2.deck.cards)}replay(){x.newGame(this.p1.deck.cards,this.p2.deck.cards)}dud(){return{mode:"CP",deck:{cards:[],name:"",factions:[]}}}}const Et=new Qr;class _r{deathCheck(){const t=Date.now();g.qActiveCreats().forEach(a=>{a.health<1&&(y.new().crd(a.code).txt(" died.").go(),this.smite(a,t))});const i=k.toPlayer(!0),e=k.toPlayer(!1);(i.health<1||e.health<1)&&(i.health<e.health?x.winFlag=-1:x.winFlag=1),E.deathCheck=!0}deathProdder(t,i=void 0){t.health<1?x.deathOrder.push({creatId:t.id,time:i||Date.now()}):x.deathOrder.some(e=>e.creatId===t.id)&&(x.deathOrder=x.deathOrder.filter(e=>e.creatId!==t.id))}findDeathTime(t){const i=x.deathOrder.filter(e=>e.creatId===t).map(e=>e.time);if(i.length!==0)return Math.min(...i)}destroy(t,i,e=void 0){t.status==="A"?(y.new().crd(t.code).txt(" was destroyed by ").crd(i).txt(".").go(),this.smite(t,e)):(console.warn(`Attempted to destroy creature that was not active. Targ creat ${t.code}; Killer creat ${i}`),console.trace())}gravedigger(t="X"){if(t==="X"){const i=x.graveyard.length;return i===0?"":x.graveyard[v.randInt(0,i)].cardCode}else{const i=k.toBool(t),e=x.graveyard.filter(h=>h.owner===i),a=e.length;return a===0?"":e[v.randInt(0,a)].cardCode}}smite(t,i=void 0){t.status="D",x.deathOrder.push({creatId:t.id,time:i||Date.now()}),x.graveyard.push({cardCode:t.code,owner:t.owner}),E.addEvents(c.creatureEvent("DIE",t)),ee.positionChange(t.owner),x.turn.creaturesKilled+=1}}const U=new _r;class ta{get youi(){return x.ui}initDeck(t,i){this.youi.deckContents=t,this.youi.deckScroll=0,this.youi.deckSummary=i,pt.setMode("T")}get canPageDown(){return this.youi.deckContents.length-this.youi.deckScroll>15}get canPageUp(){return this.youi.deckScroll>0}paginate(t){t?this.youi.deckScroll+=15:this.youi.deckScroll-=15}visibleContent(){const t=this.youi.deckScroll;return this.youi.deckContents.slice(t,t+15)}generateContent(t,i,e){const a=w.cardByTarget(t,e);if(a.sort((h,u)=>{const m=h[0],b=u[0];return b===m?0:m>b?1:-1}),i){const h=a.length;let u=0,m="",b=0;const S=[];for(;u<h;)m===a[u][0]?b++:(u>0&&S.push({cardCode:m,sourceIdx:-1,cardCount:b}),m=a[u][0],b=1),u++;return h>0&&S.push({cardCode:m,sourceIdx:-1,cardCount:b}),S}else return a.map(h=>({cardCode:h[0],sourceIdx:h[1],cardCount:0}))}handleShowDeck(t){const i=k.getActive();this.showDeck(i,t.param==="VD")}handleDeckScroll(t){this.paginate(t.param==="D"),ut.drawAll()}showPlayerDeck(t){this.showDeck(t,!1)}showPlayerDiscard(t){this.showDeck(t,!1)}showCustomDeck(t,i){this.initDeck(t,!1);const e=this.rightClickers();C.ddf5(i.concat(e))}showDeck(t,i){const e=k.toPlayer(t);this.initDeck(this.generateContent(i?e.discard:e.deck,!0),!0);const a=C.cancelAction();a.actionKey="CNCL",a.param="PM";const h=this.rightClickers();h.push(a),C.ddf5(h)}rightClickers(){return this.youi.deckContents.map((t,i)=>{const e=c.deckSelectAction("DEET",t.cardCode,i);return e.param=t.cardCode,e})}}const Ht=new ta;class ea{friends;friendText;get browseStack(){return x.ui.detailStack}n(t,i){return`${t}${i}`}allLevelFriendo(t,i){const e=Array.isArray(i)?i:[i];[1,2,3].forEach(a=>{this.friends[this.n(t,a)]=e.map(h=>this.n(h,a))})}plont(t){this.friends[this.n(t,1)]=[this.n("SDL",1)],this.friends[this.n(t,2)]=[this.n("SPL",2)],this.friends[this.n(t,3)]=[this.n("TFK",3)]}constructor(){const t=this.n("FWC",1);this.friends={[this.n("CGL",1)]:[this.n("CGF",1)],[this.n("DTD",1)]:[this.n("TOT",1)],[t]:[this.n("FWG",1)],[this.n("MPH",1)]:[t],[this.n("MPH",2)]:[t],[this.n("MPH",3)]:[t],[this.n("NGQ",4)]:[this.n("NSD",4)],[this.n("RHU",1)]:[this.n("RSC",1)],[this.n("SSE",1)]:[this.n("SXD",1)],[this.n("SSE",2)]:[this.n("SXP",2)],[this.n("SSE",3)]:[this.n("SXT",3)],[this.n("TGK",1)]:[this.n("SXD",1)],[this.n("TGK",2)]:[this.n("SPL",2)],[this.n("TGK",3)]:[this.n("TTF",3)],[this.n("TSL",1)]:[this.n("FUN",1)],[this.n("ZTU",2)]:[this.n("ZTR",2)]},this.allLevelFriendo("BLH","LWY"),this.allLevelFriendo("BTM","BOS"),this.allLevelFriendo("BWD","TFD"),this.plont("BTS"),this.allLevelFriendo("BWT","DNK"),this.allLevelFriendo("CSB","ZBS"),this.allLevelFriendo("CYS","COZ"),this.allLevelFriendo("DSK","SPN"),this.allLevelFriendo("DNK","BWT"),this.allLevelFriendo("DZD","DZA"),this.allLevelFriendo("DBQ","BRF"),this.allLevelFriendo("EPH","EPS"),this.allLevelFriendo("FST","ZST"),this.allLevelFriendo("FWK","ZMB"),this.allLevelFriendo("FGD",["FGA","FGB","FGG","FGO"]),this.allLevelFriendo("FGG","FGO"),this.allLevelFriendo("FMD","FME"),this.plont("GMR"),this.allLevelFriendo("IZL",["IFL","IFR","IZR"]),this.allLevelFriendo("IZR",["IFL","IFR","IZL"]),this.allLevelFriendo("IZK",["IFL","IFR","IZL","IZR"]),this.allLevelFriendo("NSW","SPN"),this.allLevelFriendo("NSH","NDR"),this.allLevelFriendo("NGQ","NSD"),this.allLevelFriendo("NFF","TFF"),this.allLevelFriendo("NOZ","OOZ"),this.plont("PTB"),this.allLevelFriendo("RWC","RPT"),this.plont("STS"),this.allLevelFriendo("SND","SPU"),this.allLevelFriendo("TNL","ZMB"),this.plont("WWS"),this.allLevelFriendo("YNS","XYR"),this.friendText={["BOS"]:[51,""],["BWT"]:[68,"Bron"],["BRF"]:[18,""],["CGF"]:[65,"Fiend"],["COZ"]:[31,""],["DNK"]:[8,""],["DZA"]:[59,"Dozer"],["EPS"]:[49,"Soldier"],["FWG"]:[44,""],["FWC"]:[28,"Chrysalis"],["FGA"]:[65,"Alpha"],["FGB"]:[77,"Beta"],["FGG"]:[53,"Gamma"],["FGO"]:[57,"Omega"],["FME"]:[78,"Egg"],["FUN"]:[49,""],["IZL"]:[42,"Av Flame"],["IZR"]:[44,"Av Frost"],["IFL"]:[65,"Flame"],["IFR"]:[67,"Frost"],["LWY"]:[65,"Wyrm"],["NDR"]:[3,""],["NSD"]:[40,""],["OOZ"]:[31,""],["RPT"]:[51,""],["RSC"]:[60,"Scout"],["SPL"]:[51,""],["SXP"]:[51,""],["SXD"]:[40,""],["SXT"]:[38,""],["SDL"]:[40,""],["SPN"]:[66,""],["SPU"]:[66,""],["XYR"]:[66,""],["TOT"]:[40,"Tendrils"],["TFK"]:[38,""],["TFD"]:[38,""],["TFF"]:[38,""],["TTF"]:[38,""],["ZTR"]:[32,"Returned"],["ZBS"]:[52,""],["ZST"]:[52,""],["ZMB"]:[52,""]}}get currentCard(){const t=this.browseStack;return t[t.length-1]}get friendos(){return this.friends[this.currentCard]??[]}get canGoBack(){return this.browseStack.length>1}init(t){if(x.ui.detailStack=[t],pt.mode!=="R"){pt.setMode("R");const i=c.basicAction("CNCL");i.zone=pt.baseMode==="G"?"B":"N",i.param="PM",C.ddf5([i])}else ut.drawAll()}changeLevel(t){const i=this.browseStack,e=i.length-1,a=i[e];i[e]=this.n(Pt.extractCardCode(a),t)}goBack(){this.browseStack.pop()}goToFriend(t){this.browseStack.push(t)}friendTxt(t){const i=this.friendText[t];return i||[3,"I am error"]}goBackAction(){const t=c.basicAction("DTUP");return t.param="DB",t}levelAction(t){const i=c.basicAction("DTUP");return i.param=v.enTil("DL",t),i}friendAction(t){const i=c.basicAction("DTUP");return i.param=v.enTil("DF",t),i}updateDetails(t){const i=v.deTil(t.param),e=i[0];e==="DB"?this.goBack():e==="DF"?this.goToFriend(i[1]):e==="DL"?this.changeLevel(parseInt(i[1])):console.error("Unknown detail arg",t)}}const Kt=new ea,ze=[1,2,3,4].map(n=>n.toString());class ia{rarityCache={["L"]:[],["H"]:[],["R"]:[],["C"]:[],["T"]:[]};faction1="X";faction2="X";factionLock=!1;picks=[];picksAsDeck=[];currentPack=[];scrollIdx=0;memLoad=!0;step="O";stats;vsAI=!0;legDraft=!1;fatPacks=!1;overdraft=!1;rarityFilters;setFilters;pAdeck=[];pBdeck=[];get aiPicking(){return this.vsAI&&this.step==="B"}packOdds=[];constructor(){this.rarityFilters=new Map(de.map(t=>[t,!0])),this.setFilters=new Map(ze.map(t=>[t,!0])),this.stats=new _e}getRarity(t){return this.rarityFilters.get(t)??!0}toggleRarity(t){const i=!this.rarityFilters.get(t);return this.rarityFilters.set(t,i),i}getSet(t){return this.setFilters.get(t.toString())??!0}toggleSet(t){const i=t.toString(),e=!this.setFilters.get(i);return this.setFilters.set(i,e),e}get canPageDown(){return this.picksAsDeck.length-this.scrollIdx>15}get canPageUp(){return this.scrollIdx>0}paginate(t){t?this.scrollIdx+=15:this.scrollIdx-=15}initDraft(){this.step="O",this.memLoad&&(this.memLoad=!1,this.vsAI=v.readBoolStorage("dAI",!0),this.legDraft=v.readBoolStorage("legDraft",!1),this.fatPacks=v.readBoolStorage("fatPacks",!1),this.overdraft=v.readBoolStorage("overD",!1),ze.forEach(t=>{this.setFilters.set(t,v.readBoolStorage("dSet"+t,!0))}),de.forEach(t=>{this.rarityFilters.set(t,v.readBoolStorage("dRare"+t,!0))})),ut.drawAll()}setFArr(){let t=ze.filter(i=>this.setFilters.get(i)).map(i=>parseInt(i));return t.length===4&&(t=[]),t}validRarities(){return de.filter(t=>this.rarityFilters.get(t))}startDraftPicks(){const t=this.setFArr();de.forEach(i=>{this.getRarity(i)?this.rarityCache[i]=Yt.getDeckCards([i],[],t):this.rarityCache[i]=[]}),de.every(i=>this.rarityCache[i].length===0)&&(this.rarityCache["C"]=this.fun()),this.packOdds=this.fatPacks?[9,31,40]:[5,25,40],this.faction1="X",this.faction2="X",this.factionLock=!1,this.picks=[],this.picksAsDeck=[],this.scrollIdx=0,this.stats=new _e,this.resumeDraft("")}resumeDraft(t){if(t){this.picks.push(t),this.picksAsDeck=this.picksToDeck();const a=this.overdraft?60:30;if(this.picks.length===a){this.step==="A"?(this.pAdeck=this.picksAsDeck.slice(),this.step="B",this.startDraftPicks()):(this.pBdeck=this.picksAsDeck.slice(),this.launchDraft());return}const h=O.getCard(t);if(this.aiPicking||this.stats.addStat(h.type,h.faction),!this.factionLock){const u=h.faction;if(this.faction1==="X")this.faction1=u;else if(u!==this.faction1){this.faction2=u,this.factionLock=!0;const m=this.setFArr();this.validRarities().forEach(b=>{this.rarityCache[b]=Yt.getDeckCards([b],[this.faction1,this.faction2],m)})}}}const i=this.generatePack().slice(-1*(6-this.picks.length%5)),e=this.fillPack(i);if(this.aiPicking)this.resumeDraft(e[e.length-1]);else{this.currentPack=e;const a=e.map((h,u)=>{const m=c.draftSelectAction("DRFT",u,!0);return m.param=h,m});C.ddf5(a)}}replay(){this.launchDraft()}picksToDeck(){const t=[];return this.picks.forEach(i=>{const e=t.findIndex(a=>a.card===i);e===-1?t.push({card:i,num:1}):t[e].num+=1}),t.sort((i,e)=>{const a=O.getCard(i.card+"1"),h=O.getCard(e.card+"1");return a.name.toLowerCase()<h.name.toLowerCase()?-1:1})}generatePack(){const t=this.validRarities();let i;if(this.picks.length===0&&this.legDraft&&t.includes("L"))return Array(6).fill("L");if(this.picks.length===0&&t.includes("H"))i=Array(6).fill("H"),t.includes("L")&&i.push(...this.boost("L"));else if(this.picks.length===0&&t.includes("R"))i=Array(6).fill("R"),t.includes("L")&&i.push(...this.boost("L"));else{const e=t[0]??"C";i=Array(6).fill(e),t.includes("R")&&(i[5]="R",i.push(...this.boost("R"))),t.includes("H")&&i.push(...this.boost("H")),t.includes("L")&&i.push(...this.boost("L"))}return i.slice(-6).reverse()}boost(t){const i=t==="R"?2:t==="H"?1:0,e=this.packOdds[i],a=[];let h=!0;for(;h;)v.randInt(0,99)<e?a.push(t):h=!1;return a}fillPack(t){const i=[];return t.forEach(e=>{const a=this.rarityCache[e].length;let h=!0;for(;h;){const u=this.rarityCache[e][v.randInt(0,a)];i.includes(u)||(i.push(u),h=!1)}}),i}handleMenuPick(t,i){if(t==="DI"||t==="DV")this.vsAI=t==="DI",v.writeBoolStorage("dAI",this.vsAI);else if(t==="DN")this.step="A",this.startDraftPicks();else if(t==="DR"){const e=i;v.writeBoolStorage("dRare"+i,this.toggleRarity(e))}else t==="DT"?v.writeBoolStorage("dSet"+i,this.toggleSet(i)):t==="LD"?(this.legDraft=!this.legDraft,v.writeBoolStorage("legDraft",this.legDraft)):t==="GP"?(this.fatPacks=!this.fatPacks,v.writeBoolStorage("fatPacks",this.fatPacks)):t==="OD"&&(this.overdraft=!this.overdraft,v.writeBoolStorage("overD",this.overdraft));ut.drawAll()}launchDraft(){x.aiMode=this.vsAI,pt.setMode("G"),x.newGame(this.pAdeck,this.pBdeck)}fun(){return[["ART","SVO","MPH","VSK","MSP","LYS"],["CAG","ATG","WMM","ESU","BWH","CBS"],["DHW","NCF","ROG","EXD","TPT","HOX"],["FLS","STP","BRN","TCG","AQE","VOB"]][v.randInt(0,4)]}}const ht=new ia;class ra{async drawAll(){const t=pt.mode;j.removeAll(),this.clearDetails(),t==="G"?(this.clearDeck(),await Promise.all([this.drawHand(k.getLocal()),this.drawPlayers(),this.drawField(),this.drawActions(C.activeActions)]),x.winFlag!==0?await this.drawGameOver():await this.drawCommonButtons(!0,!0,!0)):t==="R"?await this.drawDetails(C.activeActions):t==="T"?await this.drawDeck(C.activeActions):t==="D"?await this.drawDraft(C.activeActions):t==="C"?await this.drawConstructed():t==="I"?await this.drawInfoMenu():t==="X"?await this.drawExit(C.activeActions):await this.drawMenu()}async drawGameOver(){await new je().drawGameOver()}async drawHand(t){await new ci().drawCards(t)}async drawField(){await new qe().drawCards()}async drawPlayers(){await new je().drawAllPlayers()}async drawDeck(t){const i=t.find(a=>a.zone==="B");i&&await new Xe().drawActions([i]);const e=new ba;await e.drawCards(),await e.drawActions(t),await this.drawCommonButtons(!0,!0,!1)}async drawActions(t){const i=new Xe;if(x.aiActive)await i.drawActions([]);else{it.get("effects").clear();const a=new ci,h=new qe,u=new je;await Promise.all([a.drawActions(t),h.drawActions(t),i.drawActions(t),u.drawActions(t)])}}async drawCombat(t){if(t.length===0)return;x.ui.animating=!0,it.get("effects").clear(),await new qe().drawFight(t),x.ui.animating=!1}async drawDraft(t){it.get("effects").clear();const e=new Aa,a=it.get("game-ui");a.clear(),j.removeAll(),ht.step==="O"?await e.drawDraftMenu(a):(await new we().drawPickerPlayer(a,ht.step==="A",!1),await e.drawPack(t,a),await e.drawList(t,a),await e.drawStats(a),await this.drawCommonButtons(!0,!0,!1))}async drawMenu(){const t=new ka,i=it.get("game-ui");i.clear(),j.removeAll(),await t.drawMenu(i)}async drawInfoMenu(){const t=new we,i=it.get("game-ui");i.clear(),j.removeAll(),await t.drawExtrasMenu(i)}async drawConstructed(){if(Et.step==="O"){const t=new Je,i=it.get("game-ui");i.clear(),j.removeAll(),await t.drawConstrMenu(i)}else await this.drawDeckPick(C.activeActions)}async drawDeckPick(t){const i=new Je,e=new we,a=it.get("game-ui");a.clear(),j.removeAll(),await e.drawPickerPlayer(a,Et.step==="A",Et.vsAI),await i.drawSets(t,a),await i.drawList(t,a)}clearDetails(){it.get("card").clear()}clearDeck(){it.get("decklist").clear()}async drawDetails(t){await this.drawActions(t),await this.drawCommonButtons(!0,!0,!1),it.get("card").clear();const e=new va,a=t.find(h=>h.actionKey==="CNCL");a?await e.drawDetails(a):console.error("Attempted to show details view with no cancel action")}async drawCommonButtons(t,i,e){let a=979;const h=723,u=new Ye,m=it.get("game-ui");if(e&&m.clear(),t&&(await u.makeIconButton(m,a,h,"EX"),a-=50),i){const b=v.clickMode;b!=="M"&&await u.makeIconButton(m,a,h,b==="I"?"TM":"DM")}}async drawExit(t){it.get("decklist").clear();const e=it.get("effects"),a=new ye;await a.drawButton(e,151,488,t[1],"Quit Game",24,!1),await a.drawButton(e,478,488,t[0],"Resume",52,!1)}setBackground(t){const i="hide";this.allBackgrounds.forEach(e=>{const a=document.getElementById(e);t===e?a.classList.remove(i):a.classList.add(i)})}changeScale(t){this.clearAll();let i=v.options.scale;i===t&&(i="100");const e=t==="100"?1:.90625;j.updateScale(e);const a=`uiSize${i}`,h=`uiSize${t}`;this.allCanvases.forEach(b=>{it.get(b).dom.classList.replace(a,h)}),this.allBackgrounds.forEach(b=>{document.getElementById(b).classList.replace(a,h)}),document.getElementById("solforge").classList.replace(`gameSize${i}`,`gameSize${t}`),document.getElementById("log").classList.replace(`logSize${i}`,`logSize${t}`),v.options.scale=t,v.writeStorage("scale",t)}clearAll(){this.allCanvases.forEach(t=>{it.get(t).clear()})}allCanvases=["game-ui","field","player","hand","effects","decklist","card"];allBackgrounds=["playmat","blueface","mainmenu"]}const ut=new ra;class aa{positionChange(t){g.creatByTarget().forEach(i=>{i.enforceEffects("PS",t)})}defenderChange(t){g.qActiveCreats().forEach(e=>{e.effects.filter(a=>a.watch==="DF").filter(a=>a.area==="C"&&e.owner===t||a.area==="A").forEach(a=>O.getCard(a.logicCode).enforceEffect(a,e))})}playerHealthChange(){g.qActiveCreats().forEach(t=>{t.enforceEffects("PH")})}enforceAllNonPositionCreatureEffects(){g.qActiveCreats().forEach(i=>{i.enforceEffects("AT"),i.enforceEffects("AR"),i.enforceEffects("CH"),i.enforceEffects("DF",i.owner)})}}const ee=new aa;class sa{laneIdx=[1,2,3,4,5];jr5(t){const i=this.searchById(t);if(i)return i;throw console.error("naughty creature id",t),new Error("Could not find creature by id")}creatByLane(t,i){const e=this.searchByLane(t,i);if(e)return e;throw console.error("naughty creature lane ",t,i),new Error("Could not find creature by lane")}ddf6(t){const i=this.searchByFSA(t);if(i)return i;throw console.error("naughty FSA",t),new Error("Could not find creature by FSA")}searchById(t){return x.field.find(i=>i.id===t)}searchByLane(t,i){return x.field.find(e=>e.lane===t&&e.owner===i&&e.status==="A")}searchByFSA(t){return this.searchByLane(t.lane,t.playerA)}creatByTarget(t){let i=x.field;if(t){if(t.player!=="X"){const e=k.toBool(t.player);i=i.filter(a=>a.owner===e)}if(t.creatStatus!=="A"){const e=this.creatStatusTargetToCS(t.creatStatus);i=i.filter(a=>a.status===e)}if(!v.isUn(t.lanes)){const e=w.lanesToArr(t.lanes);i=i.filter(a=>e.includes(a.lane))}if(v.isUn(t.maxAttack)||(i=i.filter(e=>e.attack<=t.maxAttack)),t.notMe&&(i=i.filter(e=>e.id!==t.notMe)),t.victims){const e=v.deTil(t.victims);i=i.filter(a=>e.includes(a.id))}if(t.tribe!=="AN"&&(i=i.filter(e=>e.isTribe(t.tribe))),t.canLevel&&(i=i.filter(e=>O.getCard(e.code).canLevel())),t.level!=="LA"){const e=w.levelTargetToLevel(t.level);i=i.filter(a=>e.includes(a.level))}t.cardCode&&(i=i.filter(e=>O.getCard(e.code).cardCode()===t.cardCode)),t.canDefender&&(i=i.filter(e=>!e.negateDefender)),t.hasDefender&&(i=i.filter(e=>e.defender)),t.canArmor&&(i=i.filter(e=>!e.negateArmor)),t.hasArmor&&(i=i.filter(e=>e.armor>0)),t.canMove&&(i=i.filter(e=>!e.negateMobility)),t.hasMobility&&(i=i.filter(e=>e.mobility>0)),t.hasPoison&&(i=i.filter(e=>e.poison>0)),t.canRegen&&(i=i.filter(e=>!e.negateRegen)),t.hasRegen&&(i=i.filter(e=>e.regen>0)),t.faction!=="X"&&(i=i.filter(e=>e.faction===t.faction))}return i}cst2cs={["A"]:()=>{throw new Error("goof passed any to field state target mapper")},["V"]:()=>"A",["D"]:()=>"D",["R"]:()=>"R"};creatStatusTargetToCS(t){return this.cst2cs[t]()}emptyLanes(t){return this.laneIdx.filter(i=>!x.field.find(a=>a.owner===t&&a.lane===i&&a.status==="A"))}oppositeLane(t){return 6-t}adjacentPositions(t){return[[2],[1,3],[2,4],[3,5],[4]][t-1]}canMove(t){return t.mobility>0&&t.mobilityAvailable&&(!t.sleeping||t.aggressive)?this.emptyLanes(t.owner).filter(i=>Math.abs(t.lane-i)<=t.mobility):[]}birthCreature(t,i,e,a=0,h=void 0){if(i==="S"){const F=this.emptyLanes(e);if(F.length===0)return;a=F[v.randInt(0,F.length)]}else if(i==="P"&&!this.emptyLanes(e).includes(a))return;const m=(typeof t=="string"?O.getCard(t):t).jr3(e,a),b=x.field;if(i==="F"||i==="R"){const F=g.searchByLane(a,e);if(F){const R=y.new().crd(F.code).txt(" was replaced");i==="R"?R.txt(" with ").crd(m.code).txt(".").go():R.txt(".").go(),F.status="R",E.addEvents(c.replacedEvent(m,F))}}b.push(m);const S=c.enterFieldEvent(m);return S.forged=i==="F",x.birthOrder.push({creatId:m.id,time:h||Date.now()}),E.addEvents(S),m.enforceEffects("PH"),ee.positionChange(e),m}findBirthTime(t){const i=x.birthOrder.filter(e=>e.creatId===t).map(e=>e.time);if(i.length!==0)return i.length>1&&console.warn("wery curious, more than one birth record for creat "+t),i[0]}qActiveCreats(){return this.creatByTarget(c.crTarg())}qPlayerCreats(t){const i=c.crTarg();return i.player=k.toTarget(t),this.creatByTarget(i)}ddf1(){return this.creatByTarget(c.crFriendTarg())}qEnemyCreats(){return this.creatByTarget(c.crEnemyTarg())}}const g=new sa;class na{creatFightState(t,i){return t?i===1||t.defender||t.sleeping&&!t.aggressive?1:i===0?2:t.extraBattles>0?(t.extraBattles-=1,2):1:0}dukeItOut(t,i,e,a){if(t>0){let h=0;if(i>0){const u=t===2&&e.breakthrough;h=a.hurtBattle(e.attack,e,u)}else t===2&&(h=e.attack);h>0&&k.hurtPlayerBattle(!e.owner,h,e)}}fight(t){y.add("FIGHT!");let i=2,e=1;t&&(x.turn.mainBattle=!0,i=0,e=0);const a=k.getActiveB(),h=[],u=[];g.laneIdx.forEach(m=>{const b=g.searchByLane(m,a),S=g.searchByLane(6-m,!a),F=this.creatFightState(b,i),R=this.creatFightState(S,e);(F===2||R===2)&&(u.push([F,R,b,S],[R,F,S,b]),F===2&&(x.turn.friendlyFightStarters++,h.push([m,a])),R===2&&h.push([g.oppositeLane(m),!a]))}),this.barking&&h.length>0&&v.dogBark(),ut.drawCombat(h).then(()=>{u.forEach(m=>this.dukeItOut(...m)),ee.playerHealthChange(),U.deathCheck(),E.type="C0",C.actionDone()})}barking=!0}const si=new na;class oa{aiMode=!1;aiActive=!1;firstTurn=!0;winFlag=0;field=[];phase="ST";batch={type:"N0",events:[],triggerActions:[],deathCheck:!0,iatLane:0};turn=this.freshTurn();ui=this.freshUI();deathOrder=[];birthOrder=[];graveyard=[];newGame(t,i){v.resetIds(),si.barking=v.options.bark,k.activePlayer=v.randInt(0,2)===0,this.aiActive=!k.activePlayer&&this.aiMode,k.isLocalA=this.aiMode||k.activePlayer,C.actionHistory=[],this.graveyard=[],this.field=[],this.deathOrder=[],this.birthOrder=[],this.ui=this.freshUI(),this.firstTurn=!0,this.winFlag=0;const e=k.nameOSaurus();k.initPlayer(!0,t,"Forgy McGhee",25),k.initPlayer(!1,i,e[0],e[1]),y.setup(),y.add("Ready...FIGHT!"),pe.startTurn()}resetTurnData(){this.turn=this.freshTurn(),this.firstTurn&&(this.firstTurn=!1,this.turn.regularPlays=1)}setPhase(t){this.phase=t}getRegularPlays(){return this.turn.regularPlays}getCardsPlayed(){return this.turn.cardsPlayed}freshTurn(){return{mainBattle:!1,creaturesKilled:0,friendlyFightStarters:0,regularPlays:2,cardsPlayed:0,freeCards:[]}}freshUI(){return{handScrollLeft:0,detailStack:[],deckContents:[],deckScroll:0,deckSummary:!1,animating:!1}}}const x=new oa;class ha{loglist;you=!0;localPlayerKey="";oppPlayerKey="";localPlayerSpan="";oppPlayerSpan="";constructor(){this.loglist=document.getElementById("loglist")}setup(){this.you=k.getLocalB(),this.localPlayerKey=this.you?"^pa":"^pb",this.oppPlayerKey=this.you?"^pb":"^pa",this.localPlayerSpan=this.span(k.toPlayer(this.you).name,"green"),this.oppPlayerSpan=this.span(k.toPlayer(!this.you).name,"red")}addLi(t){const i=document.createElement("li");i.innerHTML=t,this.loglist.appendChild(i),i.scrollIntoView({behavior:"smooth",block:"end"})}span(t,i,e=""){const a=e.length>0?` onclick="sfapi.details('${e}')"`:"";return`<span class="${i}"${a}>${t}</span>`}add(t){this.addLi(t)}clearAll(){this.loglist.innerHTML=""}new(){return new Ai}factMap={["A"]:"all",["N"]:"nek",["T"]:"tem",["U"]:"ute"};parseCards(t){let i=!0;for(;i;){const e=t.indexOf("^c");if(e===-1)i=!1;else{const a=t.slice(e+2,e+6);if(a==="POIS")t=t.replaceAll("^c"+a,this.span("Poison","green"));else{const h=O.getCard(a);t=t.replaceAll("^c"+a,this.span(`${h.name} ${h.level}`,this.factMap[h.faction],a))}}}return t}parse(t){const e=t.guts.replaceAll(this.localPlayerKey,this.localPlayerSpan).replaceAll(this.oppPlayerKey,this.oppPlayerSpan),a=this.parseCards(e);this.add(a)}cardText(t){let i;if(t.type==="C"){const e=t,a=[];e.initRegen>0&&a.push("Regenerate "+e.initRegen),e.initArmor>0&&a.push("Armor "+e.initArmor),e.initMobile>0&&a.push("Mobility "+e.initMobile),e.initBT&&a.push("Breakthrough"),e.initDefend&&a.push("Defender"),e.initAggro&&a.push("Aggressive"),e.consistent&&a.push("Consistent"),a.length>0&&a.push(""),i=a.join(". ")+t.text}else i=t.text;return(t.isFree?"Free. ":"")+(t.overload?"Overload. ":"")+i}cardTextSplit(t){const i=[];if(t.isFree&&i.push("Free"),t.consistent&&i.push("Consistent"),t.overload&&i.push("Overload"),t.type==="C"){const e=t;e.initRegen>0&&i.push("Regenerate "+e.initRegen),e.initArmor>0&&i.push("Armor "+e.initArmor),e.initMobile>0&&i.push("Mobility "+e.initMobile),e.initBT&&i.push("Breakthrough"),e.initDefend&&i.push("Defender"),e.initAggro&&i.push("Aggressive")}if(t.text.length>0&&i.push(...t.text.split("~")),t.level===1){const e=t.cardCode(),a=Qe.find(h=>h[0]===e);if(a){let h;const u=a[1];u.length===2&&u[0]===u[1]?h="2x "+O.getCard(`${u[0]}1`).name:h=u.map(m=>O.getCard(`${m}1`).name).join(", "),i.push("Solbind: "+h)}}return i}factionText(t){switch(t){case "A":return"Alloyin";case "N":return"Nekrium";case "T":return"Tempys";case "U":return"Uterra";case "X":return""}}cardTypeText(t){return t==="C"?"Creature":"Spell"}rarityText(t){switch(t){case "C":return"Common";case "R":return"Rare";case "H":return"Heroic";case "L":return"Legendary";case "T":return"Token"}}levelGateText(t,i=!1){const e=i?" ":"";return t===1?`level 1${e}`:t===2?`level 2 or lower${e}`:""}jr9(t,i,e=!1){return t!==0&&i!==0?`${this.bufferson(t,!0)}${e?",":" and"} ${this.bufferson(i,!1)}`:t!==0?this.bufferson(t,!0):this.bufferson(i,!1)}bufferson(t,i){return`${t>0?"+":""}${t} ${i?"attack":"health"}`}dbdtac(t=-1){return`deals battle damage to a ${t===-1?"":this.levelGateText(t,!0)}creature`}dbdtap(){return"deals battle damage to a player"}daluac(t=!1){return(t?"D":"d")+"iscard and level up a card"}forglied(t){return t==="X"?"Forge":`Allied ${this.factionText(t)}`}fastName(t){t.length===3&&(console.warn("HEY a 3 char card code was passed to fastName, why?: "+t),t=`${t}1`);const i=O.getCard(t);return i.name+" "+i.level}pName(t){return t?"A":"B"}cardActionText(t){let i=`Card (${this.fastName(t.hostCard)}) `;if(t.zone==="F"){const e=t,a=e.playerA?e.lane:6-e.lane,h=g.searchByFSA(e),u=h?this.fastName(h.code):"Empty";i+=`Lane ${a}${this.pName(e.playerA)} ${u}`}else if(t.zone==="H"){const e=t;i+=`Hand (${this.fastName(e.card)})`}else if(t.zone==="P"){const e=t;i+=`Player (${this.pName(e.playerA)})`}else t.zone==="R"?i+="Full Board":t.zone==="B"?i+="Button":t.zone==="N"&&(i+="Special");return i}actionText(t){switch(t.actionKey){case "ACTV":return`Activate (${this.fastName(t.hostCard)})`;case "CARD":return this.cardActionText(t);case "FITE":return"Fight";case "FORG":return`Forge to Lane ${6-t.lane}`;case "HDSC":return`Hand Discard (${this.fastName(t.hostCard)})`;case "HPLY":const e=t;return`Play (${this.fastName(e.card)})`;case "MEND":return"Move End";case "MOVE":return"Move Start";case "NOTR":return"Pick None";case "ENDT":return"Donethanks";case "CANC":return"Cancel";default:return t.actionKey}}tribeT={["AN"]:"Any",["AB"]:"Abomination",["AG"]:"Angel",["AS"]:"Asir",["BR"]:"Bear",["BE"]:"Beast",["CT"]:"Cat",["CR"]:"Chrysalis",["CY"]:"Cyborg",["DF"]:"Darkforged",["DM"]:"Demon",["DN"]:"Dinosaur",["DG"]:"Dragon",["DK"]:"Drakin",["DY"]:"Dryad",["ER"]:"Earth",["EL"]:"Elemental",["EN"]:"Energeist",["FY"]:"Fairy",["FR"]:"Fire",["FB"]:"Forgeborn",["FT"]:"Frost",["GT"]:"Giant",["GN"]:"Gnome",["GL"]:"Golem",["GG"]:"Grimgaunt",["GD"]:"Guardian",["HM"]:"Human",["HY"]:"Hydra",["IC"]:"Ice",["IN"]:"Insect",["LT"]:"Lightning",["LP"]:"Lupin",["MT"]:"Manticore",["MC"]:"Mech",["MM"]:"Metamind",["NG"]:"Naga",["OZ"]:"Ooze",["PX"]:"Phoenix",["PL"]:"Plant",["RM"]:"Ram",["RB"]:"Robot",["SY"]:"Satyr",["SE"]:"Seraph",["SH"]:"Shaman",["SS"]:"Shapeshifter",["SK"]:"Skeleton",["SN"]:"Snake",["SP"]:"Spider",["ST"]:"Spirit",["TG"]:"Tigrin",["TK"]:"Tuskin",["VP"]:"Vampire",["WD"]:"Wanderer",["WN"]:"Wind",["WF"]:"Wolf",["WR"]:"Wurm",["YT"]:"Yeti",["ZB"]:"Zombie"};tribeText(t){return this.tribeT[t]}}const y=new ha;class la{handleMainMenuButton(t){t.param==="D"?(pt.setMode("D"),v.options.wasDrafting=!0,ht.initDraft()):t.param==="C"?(pt.setMode("C"),v.options.wasDrafting=!1,Et.initConstructed()):t.param==="I"?(pt.setMode("I"),ut.drawAll()):window.open("deckbuilder.html")}handleMenuButton(t){const i=v.deTil(t.param),e=i[0];let a=!0;if(e==="RP")a=!1,y.clearAll(),v.options.wasDrafting?ht.replay():Et.replay();else if(e==="MM")pt.setMode("M"),y.clearAll();else if(e==="CN"||e==="CP"||e==="CX"||e==="CR"||e==="CI"||e==="CV"||e==="LK")Et.handleMenuPick(e,i[1]);else if(e==="DN"||e==="DR"||e==="DI"||e==="DV"||e==="LD"||e==="GP"||e==="OD"||e==="DT")ht.handleMenuPick(e,i[1]);else if(e==="HH")v.toggleOption("highHealth");else if(e==="CH")v.toggleOption("cheater");else if(e==="BB")v.toggleOption("bark");else if(t.param==="BC")v.toggleOption("bigCards");else if(e==="90"){const h=v.options.scale==="90"?"100":"90";ut.changeScale(h)}else e==="RU"?(a=!1,window.open("https://grousewood-games.github.io/solforge/docs/rules")):e==="FQ"?(a=!1,window.open("https://grousewood-games.github.io/solforge/docs/faq")):(a=!1,console.error("missing handler for menu button param "+t.param));a&&ut.drawAll()}handleUIButton(t){t.param==="DM"?(v.setClickMode("I"),ut.drawAll()):t.param==="TM"?(v.setClickMode("T"),ut.drawAll()):t.param==="EX"?(pt.setMode("X"),C.ddf5(this.generateExitActions())):console.error("missing handler for common button param "+t.param)}generateExitActions(){const t=c.basicAction("CANC");return t.param="PM",[t,c.menuButtonAction("MM")]}}const Ze=new la;class ca{stack=["M"];setMode(t){this.deetMode(t)||t==="X"?this.stack.push(t):(this.stack=[t],t==="G"?(it.get("game-ui").clear(),ut.setBackground("playmat")):t==="D"||t==="C"||t==="I"?(it.get("game-ui").clear(),ut.setBackground("blueface")):t==="M"&&(ut.clearAll(),ut.setBackground("mainmenu")))}popMode(){this.stack.pop()}get mode(){const t=this.stack;return t[t.length-1]}get isDetailMode(){return this.deetMode(this.mode)}get baseMode(){return this.stack[0]}deetMode(t){return t==="R"||t==="T"}}const pt=new ca;class ua{constructor(){this.loader=document.getElementById("fileupload"),this.loader.addEventListener("change",t=>this.loadInputHandler(t))}shuffleDeck(t){const i=k.toPlayer(t),e=[],a=[];if(i.deck.forEach(h=>{O.getCard(h).consistent?e.push(h):a.push(h)}),e.length===0)this.shuffle(i.deck);else{this.shuffle(a);const h=20-e.length,u=e.concat(a.slice(0,h));this.shuffle(u),i.deck=a.slice(h).concat(u)}}shuffle(t){const i=t.length,e=(a,h)=>{const u=t[a];t[a]=t[h],t[h]=u};if(i>0){let a,h;const u=i*4;for(let m=0;m<u;m++)a=v.randInt(0,i),h=v.randInt(0,i),e(a,h)}}randomDeck(t,i,e){const a=t===i;let h;return a?h=this.ripper(t,e,30):h=this.ripper(t,e,15).concat(this.ripper(i,e,15)),{cards:h,name:"Random Nonsense",factions:a?[t]:[t,i]}}testies(t){const i=this.ripper(this.randFaction(),3,15);return i.push({card:t,num:15}),{cards:i,name:"Test Fun",factions:[]}}testies2(t,i){return{cards:[{card:t,num:15},{card:i,num:15}],name:"Test Fun",factions:[]}}treatsAbound(t){const i=t?1:v.randInt(1,4);return this.randomDeck(this.randFaction(),this.randFaction(),i)}randFaction(){return De[v.randInt(0,4)]}randomStockDeck(){const t=Ae.map(e=>e.decks).flat(),i=v.randInt(0,t.length);return t[i]}stockDeckByName(t,i){let e;if(Ae.some(a=>a.id===t?a.decks.some(h=>{h.name===i&&(e=h)}):!1),e)return e;throw new Error("Stock Deck not found: Set: "+t+"; Name: "+i)}ripper(t,i,e){const a=[[15,8,5],[30,15,10]],h=this.getDeckCards([],[t]),u=[],m=a[e===15?0:1][i-1];for(;u.length<m;){const S=v.randInt(0,h.length),F=h[S];u.find(R=>R===F)||u.push(F)}const b=u.map(S=>({card:S,num:i}));return i===2&&e===15&&(b[0].num=1),b}deckify(t){const i=t.map(e=>{const a=Qe.find(h=>h[0]===e);return a?a[1]:[]}).flat();return t.concat(i).map(e=>`${e}1`)}parseDeck(t){const i=t.map(e=>Array(e.num).fill(e.card)).flat();return this.deckify(i)}validDeck(t){const i={};t.forEach(S=>{i[S.card]?i[S.card]+=S.num:i[S.card]=S.num});const e=Object.entries(i).map(S=>({card:S[0],num:S[1]})),a=e.map(S=>S.num).reduce((S,F)=>S+F,0);if(a!==30)return"Deck must have 30 cards, found "+a;const h=[];let u="";if(e.some(S=>{const F=Mt.findIndex(R=>R.crd===S.card);return F===-1?(u=S.card,!0):(h.push(Mt[F].fct),!1)}))return`Invalid card code: '${u}'`;let m=0;if(e.some(S=>S.num>3?(u=S.card,m=S.num,!0):!1))return`${m} copies of '${u}' ${y.fastName(u).slice(0,-2)}`;const b=[...new Set(h)];return b.length>2?"Deck must have two or less factions, found: "+b.join():""}getDeckCards(t=[],i=[],e=[]){return t.length===0&&i.length===0&&e.length===0?Mt.map(a=>a.crd):t.length>0&&i.length>0&&e.length===0?Mt.filter(a=>t.includes(a.rty)&&i.includes(a.fct)).map(a=>a.crd):t.length>0&&i.length===0&&e.length===0?Mt.filter(a=>t.includes(a.rty)).map(a=>a.crd):t.length===0&&i.length>0&&e.length===0?Mt.filter(a=>i.includes(a.fct)).map(a=>a.crd):t.length>0&&i.length>0&&e.length>0?Mt.filter(a=>t.includes(a.rty)&&i.includes(a.fct)&&e.includes(Math.floor(a.set))).map(a=>a.crd):t.length>0&&i.length===0&&e.length>0?Mt.filter(a=>t.includes(a.rty)&&e.includes(Math.floor(a.set))).map(a=>a.crd):t.length===0&&i.length>0&&e.length>0?Mt.filter(a=>i.includes(a.fct)&&e.includes(Math.floor(a.set))).map(a=>a.crd):Mt.filter(a=>e.includes(Math.floor(a.set))).map(a=>a.crd)}getCardFaction(t){const i=Mt.find(e=>e.crd===t);return i?i.fct:"X"}getCardRarity(t){const i=Mt.find(e=>e.crd===t);return i?i.rty:"T"}cardStats(){De.forEach(t=>{const i=`${y.factionText(t)} total: ${this.getDeckCards(void 0,[t]).length}; `,e=de.map(a=>`${y.rarityText(a)}: ${this.getDeckCards([a],[t]).length}`).join("; ");console.log(i+e)})}loadPromise=new ni;fileguts="";loader;async loadFromFile(){if(this.loadPromise=new ni,this.loader.click(),await this.loadPromise.getPromise(),this.fileguts==="")return"";if(this.fileguts.startsWith("!")){const a=this.fileguts.substring(1);return this.fileguts="",a}const t=JSON.parse(this.fileguts);this.fileguts="";const i=t.cards,e=this.validDeck(i);return e||t}readError(t){this.fileguts="!"+t,this.loadPromise.resolveMe()}loadInputHandler(t){const i=this.loader.files;if(i&&i.length>0){const a=i[0];var e=new FileReader;e.onload=h=>{try{var u=e.result;if(u){var m=JSON.parse(new TextDecoder("utf-8").decode(new Uint8Array(u)));m.cards&&Array.isArray(m.cards)&&!m.cards.some(b=>!(b&&typeof b.card=="string"&&Number.isInteger(b.num)))?(this.fileguts=JSON.stringify(m),this.loadPromise.resolveMe()):this.readError("File format is invalid.")}else this.readError("File read was empty.")}catch(b){console.error(b),this.readError("Error reading file.")}};try{e.readAsArrayBuffer(a)}catch{this.readError("Could not read file.")}}else this.loadPromise.resolveMe()}}class ni{realPromise;resolveMe(){}rejectMe(){}getPromise(){return this.realPromise}constructor(){this.realPromise=new Promise((t,i)=>{this.resolveMe=t,this.rejectMe=i})}}const Yt=new ua;class da{enterMainPhase(){x.setPhase("MN");const t=k.getActive(),i=this.getMainPhaseActions(t);C.ddf5(i)}passTheTurn(){k.activePlayer=!k.activePlayer,x.setPhase("WT"),x.aiMode?x.aiActive=!x.aiActive:k.isLocalA=k.activePlayer,this.startTurn()}startTurn(){Ee.log&&x.aiActive&&x.aiMode&&console.log("AI Turn Start"),y.new().txt("------").go(),y.new().plr(k.getActiveB()).txt(" starts turn.").go(),x.resetTurnData(),x.setPhase("ST"),E.addEvents(c.playerEvent("TRS",k.getActiveB())),this.expireMods(),this.whatNext()}async whatNext(){if(x.winFlag!==0){C.actionHistory=[],x.aiActive=!1,x.ui.animating=!1,await ut.drawAll();return}if(await ut.drawAll(),C.actionHistory.length>0)C.ddf5();else if(E.getNextTrigger())Ke.resolve(E.getNextTrigger());else if(!E.deathCheck)U.deathCheck(),this.whatNext();else if(x.batch.events.length>0)E.startBatch();else switch(x.field=x.field.filter(t=>t.status==="A"),x.deathOrder=[],x.birthOrder=[],x.phase){case "MN":this.enterMainPhase();break;case "ET":x.setPhase("PT"),E.addEvents(c.playerEvent("PTN",k.getActiveB())),pe.expireMods(),this.whatNext();break;case "PT":this.passTheTurn();break;case "WT":console.error("Hit unhandled waiting phase"),x.setPhase("MN"),this.whatNext();break;case "ST":x.setPhase("MN"),Ee.cheater()?v.sleep(500).then(()=>this.whatNext()):this.whatNext();break}}expireMods(){const t=x.phase,i=g.creatByTarget(c.crTarg());let e=[];t==="PT"?i.forEach(a=>{a.mods.forEach(h=>{h.expiry==="EN"?h.expiry="ET":h.expiry==="ET"&&e.push([a,h])})}):t==="ST"&&i.forEach(a=>{a.mods.forEach(h=>{h.expiry==="SN"?h.expiry="ST":h.expiry==="ST"&&e.push([a,h])})}),e.length>0&&(e.forEach(a=>a[0].expireMod(a[1])),ee.enforceAllNonPositionCreatureEffects())}getMainPhaseActions(t){const i=this.getHandActions(t),e=this.getFieldActions(t);let a=!x.turn.mainBattle,h="M";return a||(a=g.ddf1().some(m=>m.extraBattles>0&&m.isActive&&!m.defender),h="E"),a&&i.push({actionKey:"FITE",zone:"B",param:h,hostCard:""}),a||i.push({actionKey:"ENDT",zone:"B",param:"",hostCard:""}),[i,e].flat()}getHandActions(t){const i=[...new Set(t.hand)],e=[],a=[];i.forEach(b=>{O.getCard(b).isFree?e.push(b):a.push(b)});const h=e.map(b=>[b,"FREE"]);x.turn.freeCards.forEach(b=>{w.cardByTarget(a,b.condition).forEach(F=>{h.push([F[0],b.id]),a.splice(a.indexOf(F[0]),1)})}),h.push(...a.map(b=>[b,""]));const u=x.turn.regularPlays>0;let m=t.hand.map((b,S)=>[b,S]);return u||(m=m.filter(b=>!a.includes(b[0]))),m.map(b=>{const S=h.find(F=>F[0]===b[0]);return S||console.error("No cost found for card"+b[0]),c.handSelectAction("HPLY",b[0],S[1],b[1])})}getFieldActions(t){const i=g.qPlayerCreats(t.isPlayerA),e=i.filter(h=>g.canMove(h).length>0).map(h=>c.fieldSelectAction("MOVE",h.lane,h.owner)),a=i.filter(h=>h.isActive&&h.activationAvailable?O.getCard(h.code).canActivate(h):!1).map(h=>{const u=c.fieldSelectAction("ACTV",h.lane,h.owner);return u.hostCard=h.code,u.param=h.id,u});return e.forEach(h=>{const u=a.findIndex(m=>m.lane===h.lane);u>-1&&(a.splice(u,1),h.param="ACTV")}),e.concat(a)}}const pe=new da;class fa{playerA;playerB;activePlayer;isLocalA;constructor(){this.playerA=this.newPlayer(!0),this.playerB=this.newPlayer(!1),this.activePlayer=!0,this.isLocalA=!0}pt2pb={["X"]:()=>{throw new Error("goof passed any to player target boolean-o-fier")},["A"]:()=>!0,["B"]:()=>!1,["F"]:()=>this.getActiveB(),["E"]:()=>!this.getActiveB()};b2p(t){return t?this.playerA:this.playerB}toPlayer(t){return typeof t=="boolean"?this.b2p(t):typeof t=="string"?this.b2p(this.pt2pb[t]()):t}toBool(t){return typeof t=="boolean"?t:typeof t=="string"?this.pt2pb[t]():t.isPlayerA}toTarget(t){return typeof t=="string"?t:(typeof t=="boolean"?t:t.isPlayerA)?"A":"B"}getActive(){return this.b2p(this.activePlayer)}getActiveB(){return this.activePlayer}getLocal(){return this.b2p(this.isLocalA)}getLocalB(){return this.isLocalA}hurtPlayer(t,i){return i<1?0:(t.health-=i,i)}ddf3(t,i,e){const a=this.toPlayer(t),h=this.hurtPlayer(a,i);h>0&&(y.new().crd(e).txt(` dealt ${h} dmg to `).plr(a).txt(".").go(),E.addEvents(c.damageEvent(!1,h,!1,!1,a.isPlayerA,void 0)),ee.playerHealthChange())}hurtPlayerBattle(t,i,e){const a=this.toPlayer(t),h=this.hurtPlayer(a,i);h>0&&(y.new().crd(e.code).txt(` dealt ${h} battle dmg to `).plr(a).txt(".").go(),E.addEvents(c.damageEvent(!0,h,!0,!1,a.isPlayerA,e)))}healPlayer(t,i){const e=this.toPlayer(t);e.health+=i,y.new().plr(e).txt(` gained ${i} health.`).go(),E.addEvents(c.playerHealEvent("PHL",e.isPlayerA,i)),ee.playerHealthChange()}drawCard(t,i){const e=this.toPlayer(t);for(let a=0;a<i;a++){const h=e.deck.pop();h&&e.hand.push(h)}}newPlayer(t){return{hand:[],deck:[],discard:[],isPlayerA:t,health:120,name:"",nameOffset:0,triggers:[],turn:1,rank:1,avatar:Math.floor(Math.random()*17)}}initPlayer(t,i,e,a){const h=this.toPlayer(t);h.name=e,h.nameOffset=a,h.turn=1,h.rank=1,h.health=v.options.highHealth?360:120,h.discard=[],h.deck=Yt.parseDeck(i),h.triggers=[],Yt.shuffleDeck(h),h.hand=h.deck.splice(-5,5)}nameOSaurus(){const t=[["The Garmgunt",5],["Dr. Lucksack",15],["Sgt. Misplay",22],["Salty O'Teary",12],["M.V.P. Sprout",19],["Uncle Punchy",7],["Yesetherian",20],["Rubbish Asir",20],["Hogwash Druid",0],["Offal Savant",15],["Filth Knight",17],["Dirty Mystic",16],["Ether Buffoon",6],["Nexus Dimwit",12],["Hairy Poppins",11],["Al E. Gator",26],["Anita Bath",28],["Bennie Factor",9],["Chris P. Bacon",9],["Don Keigh",29],["Earl E. Bird",25],["Hugh Jass",34],["Jay Walker",28],["Barb Dwyer",22],["Robyn Banks",18],["Anna Graham",9],["Holly Graham",6],["Justin Case",26],["Sir Loins",39]],i=t[v.randInt(0,t.length)];return[i[0],i[1]+18]}}const k=new fa;class ga{toActions(t){return(Array.isArray(t)?t:[t]).map(e=>{const a=this.actionTargGuts(e);return a.forEach(h=>{h.hostCard=e.hostCard,h.param=e.param}),a}).flat()}actionTargGuts(t){if(t.target==="TH")return this.deckByTarget(t).map(i=>c.handSelectAction(t.actionKey,i[0],"",i[1]));if(t.target==="TF"){if(t.field==="O")return g.creatByTarget(t).map(i=>c.fieldSelectAction(t.actionKey,i.lane,i.owner));{const i=t.player==="X"?[!0,!1]:[k.toBool(t.player)],e=v.isUn(t.lanes)?g.laneIdx:this.lanesToArr(t.lanes);if(t.field==="A")return i.map(a=>e.map(h=>c.fieldSelectAction(t.actionKey,h,a))).flat();if(t.field==="E")return i.map(a=>g.emptyLanes(a).filter(h=>e.includes(h)).map(h=>c.fieldSelectAction(t.actionKey,h,a))).flat()}}if(t.target==="TP")return t.player==="X"?[c.playerSelectAction(t.actionKey,!0),c.playerSelectAction(t.actionKey,!1)]:[c.playerSelectAction(t.actionKey,k.toBool(t.player))];if(t.target==="TB")return[{actionKey:t.actionKey,zone:"B",hostCard:t.hostCard,param:""}];if(t.target==="TR")return[{actionKey:t.actionKey,zone:"R",hostCard:t.hostCard,param:""}];if(t.target==="TD")return[];throw new Error("Target encountered that doesnt have mappings to actions: "+t.target)}cardByTarget(t,i){let e=t.map((a,h)=>[a,h]);if(i){if(v.isUn(i.deckPositionSkip)||(e=e.filter(a=>a[1]!==i.deckPositionSkip)),i.faction!=="X"&&(e=e.filter(a=>O.getCard(a[0]).faction===i.faction)),i.tribe!=="AN"&&(e=e.filter(a=>{const h=O.getCard(a[0]);return h.type==="C"?h.isTribe(i.tribe):!1})),i.canLevel&&(e=e.filter(a=>O.getCard(a[0]).canLevel())),i.level!=="LA"){const a=w.levelTargetToLevel(i.level);e=e.filter(h=>{const u=parseInt(h[0].substring(3,4));return a.includes(u)})}if(i.card!=="A"){const a=i.card==="C"?"C":"S";e=e.filter(h=>O.getCard(h[0]).type===a)}i.cardCode&&(e=e.filter(a=>O.getCard(a[0]).cardCode()===i.cardCode))}return e}deckByTarget(t){const i=k.toPlayer(t.player);let e;if(t.target==="TH")e=i.hand;else if(t.target==="TD")e=i.discard;else if(t.target==="DK")e=i.deck;else throw new Error("bad target passed to deckByTarget: "+t.target);return this.cardByTarget(e,t)}buttonTarget(t,i="",e=""){return c.actionTarget("TB",t,i,e)}boardTarget(t,i){return c.actionTarget("TR",t,i,"")}ddf2(t){return t===1?"L1":t===2?"LN":"LA"}lt2l={["LA"]:()=>[1,2,3,4],["L1"]:()=>[1],["L2"]:()=>[2],["L3"]:()=>[3],["LN"]:()=>[1,2]};levelTargetToLevel(t){return this.lt2l[t]()}levelTargetTest(t,i){return this.levelTargetToLevel(t).includes(i)}levelTestCommon(t,i){return this.levelTargetTest(this.ddf2(i),t)}lanesToArr(t){return Array.isArray(t)?t:[t]}}const w=new ga;class ma{ddf8(t){return t.trigger.type==="FR"?this.forgeTriggerTest(t,!1):t.trigger.type==="VN"?this.vengeanceTriggerTest(t):t.trigger.type==="FK"?this.flankTriggerTest(t):t.trigger.type==="AS"?this.forgeTriggerTest(t,!0):t.trigger.type==="UP"?this.upgradeTriggerTest(t):t.trigger.type==="DM"&&t.event.code==="DMG"||t.trigger.type==="EF"&&t.event.code==="ENT"||t.trigger.type==="DS"&&t.event.code==="DIE"||t.trigger.type==="PC"&&t.event.code==="PLC"||t.trigger.type==="MV"&&t.event.code==="MOV"||t.trigger.type==="RP"&&t.event.code==="RPL"||t.trigger.type==="LG"&&t.event.code==="PHL"||t.trigger.type==="TS"&&t.event.code==="TRS"||t.trigger.type==="TE"&&t.event.code==="TRE"||t.trigger.type==="PT"&&t.event.code==="PTN"||t.trigger.type==="RU"&&t.event.code==="RKU"?this.generalTriggerTest(t):!1}resolve(t){t.host==="C"?(t.trigger.interactive&&(x.batch.iatLane=g.jr5(t.creatId).lane),O.getCard(t.trigger.logicCode).jr8(t)):t.host==="P"?console.error("player hosted trigger encountered. No code!"):t.host==="H"?console.error("hand card hosted trigger encountered. No code!"):console.error("Encountered trigger reaction with mystery host ",t)}forgeTriggerTest(t,i){if(t.event.code==="ENT"){const e=t.event;if(e.forged){const a=g.jr5(t.creatId),h=a.id===e.creature.id&&a.status==="A";return i&&h?!a.opposed:h}}return!1}upgradeTriggerTest(t){if(t.event.code==="RPL"){const i=t.event,e=g.searchById(t.creatId);if(e)return e.id===i.creature.id;console.warn("Venegeance trigger test could not find its creature",t)}return!1}vengeanceTriggerTest(t){if(t.event.code==="DIE"){const i=t.event,e=g.searchById(t.creatId);if(e)return e.status==="D"&&e.id===i.creature.id;console.warn("Venegeance trigger test could not find its creature",t)}return!1}flankTriggerTest(t){if(t.event.code==="MOV"){const i=t.event;if(!i.creature)throw new Error("Creature Moved event not provided creature payload");const e=g.jr5(t.creatId);return e.status==="A"&&e.id===i.creature.id}return!1}generalTriggerTest(t){return O.getCard(t.trigger.logicCode).ddf8(t)}}const Ke=new ma;class pa{forgeCard(t,i){const e=this.cardPlayed(i),a=k.getActive();y.new().txt("Forged ").crd(e.code).txt(".").go(),g.birthCreature(e,"F",a.isPlayerA,t.lane),C.actionDone()}levelAndDiscard(t){const i=O.getCard(t.card),e=k.getActive();return e.hand.splice(t.position,1),i.overload||e.discard.push(i.levelUpCard()),i}cardPlayed(t,i=!1){const e=this.levelAndDiscard(t),a=k.getActive();if(t.cost==="")x.turn.regularPlays-=1;else if(t.cost!=="FREE"){const h=x.turn.freeCards.findIndex(u=>u.id===t.cost);h>-1?x.turn.freeCards.splice(h,1):console.error("Could not find free card rule!")}if(x.turn.cardsPlayed+=1,!i){const h=c.playCardEvent(t.card,a.isPlayerA);E.addEvents(h)}return e}spellCast(){this.cardPlayed(C.cardBeingPlayed),C.actionDone()}endTurn(){const t=k.getActive();t.discard.push(...t.hand),t.hand=[],t.turn++;const i=t.turn>4;E.addEvents(c.playerEvent("TRE",t.isPlayerA)),i&&(t.turn=1,t.rank++,E.addEvents(c.playerEvent("RKU",t.isPlayerA)),t.deck.push(...t.discard),t.discard=[],Yt.shuffleDeck(t.isPlayerA)),g.qActiveCreats().forEach(e=>{e.extraBattles=0}),k.drawCard(t,5),x.setPhase("ET"),C.actionDone()}mobility(t){const i=g.jr5(t.param);i.mobilityAvailable=!1,i.move(t.lane),C.actionDone()}allied(t,i){const e=i??k.getActive(),a=c.target("TH");return a.player=k.toTarget(e),a.faction=t,w.deckByTarget(a).length>0}freeCard(t){const i=c.freeCard(t);return x.turn.freeCards.push(i),i}}const L=new pa;class oi{id;dom;context;width;height;constructor(t){if(this.id=t,this.dom=document.getElementById(t),!this.dom)throw new Error(`Could not find canvas id ${t}`);this.context=this.dom.getContext("2d"),this.width=this.dom.width,this.height=this.dom.height,this.context.textBaseline="top",this.context.shadowOffsetX=1,this.context.shadowOffsetY=1}show(){this.dom.hidden=!1}hide(){this.dom.hidden=!0}get visible(){return!this.dom.hidden}clear(){this.context.clearRect(0,0,this.width,this.height)}sprite(t,i,e){this.context.drawImage(t,i,e)}updateScale(t){this.context.scale(t,t)}}class Nt{getCanv(t){return t instanceof oi?t:it.get(t)}async drawSprite(t,i,e,a,h={}){const u=this.getCanv(t).context,m=await v.getSprite(v.imgRoot+i);let b=1;h&&(b=h.alpha??1),b<1&&(u.globalAlpha=b),u.drawImage(m,e,a,m.naturalWidth,m.naturalHeight),b<1&&(u.globalAlpha=1)}async drawText(t,i,e,a,h={}){const u=this.getCanv(t).context,m=h.fontSize??24;v.pxRatio===2&&(a=this.retinaTextY(a,m)),u.fillStyle=h.colour||"#000000",u.font=`${m}px ${h.fontName||"cinzel"}`,u.shadowColor=h.shadow?"#000000":"#00000000",u.fillText(i,e,a),u.shadowColor="#00000000"}async spriteNumber(t,i,e,a,h,u){let m=e-this.numOffset(i,h);const b=[];i.toString().split("").forEach(S=>{b.push(this.drawSprite(t,this.numSpriteUrl(S,h,u),m,a)),m+=this.numSize(S,h)}),await Promise.all(b)}async drawHighlight(t,i,e,a,h,u="#00FF00"){const m=u.length===7?u.concat("aa"):u,b=this.getCanv(t);b.context.strokeStyle=m,b.context.beginPath(),b.context.rect(i,e,a,h),b.context.stroke()}hlColour(t){return t==="CANC"?"#FF0000":"#00FF00"}drawRarity(t,i,e,a){return this.drawSprite(t,`icons/rarity/new/${y.rarityText(i).toLowerCase()}.png`,e,a)}drawFaction(t,i,e,a){const h=i==="T"?2:0;return this.drawSprite(t,`icons/faction/${y.factionText(i).toLowerCase()}.png`,e+h,a+3)}retinaTextY(t,i){let e;return i<21?e=6:i<27?e=7:e=8,t-e}smallNumSize={"-":7,0:10,1:9,2:10,3:8,4:10,5:9,6:10,7:9,8:8,9:9};bigNumSize={"-":8,0:13,1:9,2:13,3:11,4:14,5:12,6:12,7:12,8:12,9:12};numSize(t,i){return i==="S"?this.smallNumSize[t]:this.bigNumSize[t]}numOffset(t,i){const e=t.toString().split("").reduce((a,h)=>a+this.numSize(h,i),0)-(i==="B"?2:1);return Math.floor(e/2)}numSpriteUrl(t,i,e){return`text/nums/${i}/${e}/${t}.png`}haze="#222222d8"}class ye extends Nt{async drawButton(t,i,e,a,h,u=7,m=!1,b=!0){let S,F;m?(S="ui/button/menu_on.png",F="#d7fc03"):(S="ui/button/menu_off.png",F="#00DEF7");const R=this.buttonBounds(i,e);if(await this.drawSprite(t,S,R[0],R[1]),await this.drawText(t,h,R[0]+7+u,R[1]+24,{colour:F,fontSize:30}),!m||b){const X=new nt(a,...R,et.Both);j.add(X)}}async buttonMaker(t,i,e,a,h,u=7,m=!1,b=!0){const S={actionKey:"MNBT",zone:"N",hostCard:"",param:a};await this.drawButton(t,i,e,S,h,u,m,b)}buttonBounds(t,i){return[t-7,i-7,232,69]}}class Ye extends Nt{async makeIconButton(t,i,e,a){let u;u=`ui/button/ui_${a}.png`,await this.drawSprite(t,u,i,e);const m=c.basicAction("UIBT");m.param=a;const b=new nt(m,i,e,40,40,et.Both);j.add(b)}async makeVScroller(t,i,e,a,h){const u=this.vScrollHilightBounds(i,e);await this.drawSprite(t,`ui/arrow/${a?"up":"down"}.png`,i,e);const m={zone:"N",actionKey:h,hostCard:"",param:a?"U":"D"},b=new nt(m,...u,et.Both);j.add(b)}vScrollHilightBounds(t,i){return[t-3,i-3,40,27]}}class Xe extends Nt{async drawActions(t){if(pt.baseMode==="G"){const i=it.get("effects"),e=t.filter(a=>a.zone==="B");if(e.length>1&&console.error("Two button actions encountered in one batch",e),e.length===0||x.aiActive||v.clickMode==="I"&&!pt.isDetailMode){const a=this.buttonBounds();await this.drawSprite(i,"ui/button/off.png",a[0],a[1])}else{const a=e[0],h=this.buttonBounds();await this.drawSprite(i,"ui/button/on.png",h[0],h[1]);let u;a.actionKey==="CARD"?u=a.param:u=a.actionKey,await this.drawSprite(i,`text/butt/${u}.png`,h[0]+23,h[1]+18);const m=this.highlightBounds(),b=new nt(a,...m);a.actionKey==="CNCL"&&(b.mouse=et.Both),j.add(b)}}}buttonBounds(){return[856,406,160,63]}highlightBounds(){const t=this.buttonBounds(),i=5,e=[-1,-1,2,2];return t.map((a,h)=>a+i*e[h])}}class _t extends Nt{async drawCard(t,i,e,a){const h=this.getCanv(i),u=this.extractStats(t),m=u.cardClass;if(await this.drawSprite(h,m.image(!1),e+14,a+35),await this.drawSprite(h,this.frameImg(m.level,m.faction,m.type,!1),e,a),await this.drawSprite(h,`text/card/${m.cardCode()}.png`,e+12,a+16),u.isCreature){const b=a+178;await this.spriteNumber(h,u.att,e+24,b,"S","Y"),await this.spriteNumber(h,u.hlt,e+127,b,"S","Y")}if(u.sleeping&&await this.drawSprite(h,"icons/effects/defensive.png",e+5,a+40,{alpha:.7}),u.iconList.length>0){const b=e+57-17*(u.iconList.length-1);await Promise.all(u.iconList.map(async(S,F)=>this.drawIcon(h,b+F*35,a+140,S[0],S[1])))}}async drawBigCard(t,i,e,a){const h=this.extractStats(i);if(await this.drawSprite(t,i.image(!0),e+38,a+117),await this.drawSprite(t,this.frameImg(i.level,i.faction,i.type,!0),e,a),i.rarity!=="T"&&await this.drawRarity(t,i.rarity,e+309,a+394),h.isCreature){const u=a+555;await this.spriteNumber(t,h.att,e+44,u,"B","Y"),await this.spriteNumber(t,h.hlt,e+325,u,"B","Y")}}async drawIcon(t,i,e,a,h=0){const u=this.getCanv(t);if(await this.drawSprite(u,`icons/effects/${a}.png`,i,e),h>0){const m=a==="poison"?12:9;await this.spriteNumber(u,h,i+17,e+m,"S","B")}}extractStats(t){let i,e=!1,a=0,h=0,u=!1,m=0,b=!1,S=!1,F=!1,R=!1,X=0,rt=0,V=0,q=!1,dt=!1;if(!(t instanceof Pt))e=!0,a=t.attack,h=t.health,u=t.sleeping&&!t.aggressive,m=t.regen,b=t.breakthrough,S=t.defender,F=t.aggressive,X=t.armor,rt=t.poison,V=t.mobility,R=t.changed,i=O.getCard(t.code);else{if(t.type==="C"){e=!0;const yt=t;a=yt.jr1,h=yt.jr2,m=yt.initRegen,b=yt.initBT,S=yt.initDefend,F=yt.initAggro,X=yt.initArmor,V=yt.initMobile}q=t.overload,dt=t.consistent,i=t}const lt=[];return q&&lt.push(["overload",0]),dt&&lt.push(["consistent",0]),m>0&&lt.push(["regenerate",m]),b&&lt.push(["breakthrough",0]),S&&lt.push(["defender",0]),F&&lt.push(["aggressive",0]),X>0&&lt.push(["armor",X]),rt>0&&lt.push(["poison",rt]),V>0&&lt.push(["mobility",V]),R&&lt.push(["changed",0]),{cardClass:i,isCreature:e,iconList:lt,hlt:h,att:a,sleeping:u}}async drawHilight(t,i,e,a="#00FF00"){await super.drawHighlight(t,...this.highlightBounds(i,e),a)}cardBounds(t,i){return[t,i,150,205]}highlightBounds(t,i){const e=this.cardBounds(t,i),a=5,h=[-1,-1,2,2];return e.map((u,m)=>u+a*h[m])}frameImg(t,i,e,a){return`frames/${a?"big":"small"}/lvl${t}_${i}${e}.png`}levelImg(t){return`icons/frame/lvl${t}.png`}oldFrameImg(t){return`icons/frame/frame${t}.png`}factionImg(t){return`icons/faction/orb${t}.png`}}const hi=30,Ie=540,li=5;class ci extends Nt{async drawCards(t){const i=it.get("hand");i.clear();const e=new _t,a=e.highlightBounds(0,0)[2]+li;let h=hi;const u=this.paginatron(t);for(let m=u[0];m<=u[1];m++){const b=O.getCard(t.hand[m]);await e.drawCard(b,i,h,Ie),h+=a}}async drawActions(t){const i=v.clickMode!=="I",e=it.get("effects"),a=new _t,h=a.highlightBounds(0,0)[2]+li,u=new $t(0,520,1e3,250),m=new $t(0,520,1e3,250,et.Right),b=this.paginatron(k.getActive());await Promise.all(t.filter(S=>S.zone==="H").map(async S=>{const F=S;if(F.position>=b[0]&&F.position<=b[1]){const R=hi+(F.position-b[0])*h;if(S.actionKey==="DEET"){const X=new nt(S,...a.highlightBounds(R,Ie),et.Right);m.addChild(X)}else if(i){const X=new nt(S,...a.highlightBounds(R,Ie));u.addChild(X),await a.drawHilight(e,R,Ie,this.hlColour(F.actionKey))}}})),i&&j.add(u),j.add(m),b[0]>0&&await this.makeScroller(e,!1),b[1]<b[2]&&await this.makeScroller(e,!0)}paginatron(t){let i=x.ui.handScrollLeft;return i>0&&t.hand.length-i<5&&(i=Math.max(0,t.hand.length-5),x.ui.handScrollLeft=i),[i,Math.min(i+4,t.hand.length-1),t.hand.length-1]}scrollHilightBounds(t,i){return[t-3,i-2,27,38]}async makeScroller(t,i){const e=i?894:856,a=726,h=this.scrollHilightBounds(e,a);await this.drawSprite(t,`ui/arrow/${i?"right":"left"}.png`,e,a),await this.drawHighlight(t,...h);const u={zone:"N",actionKey:"SCRH",hostCard:"",param:i?"R":"L"},m=new nt(u,...h,et.Both);j.add(m)}}class qe extends Nt{fieldBoundary=[17,62,821,443];async drawCards(t){const i=k.getLocalB(),e=it.get("field");e.clear();const a=new _t,h=g.qActiveCreats().map(u=>{let m=0;t&&t.scrappers.some(S=>S[0]===u.lane&&S[1]===u.owner)&&(m=t.battlePhase);const b=this.coordCalc(u.lane,u.owner,i,m);return a.drawCard(u,e,...b)});if(await Promise.all(h),E.iaTrigLane>0){const u=this.coordCalc(E.iaTrigLane,k.getActiveB(),i),m=a.cardBounds(...u);await this.drawSprite(e,"icons/rewards/gold.png",m[0]+m[2]/2-20,m[1]+m[3]+5)}}async drawActions(t){const i=v.clickMode!=="I",e=k.getLocalB(),a=it.get("effects"),h=new _t,u=new $t(...this.fieldBoundary),m=new $t(...this.fieldBoundary,et.Right);await Promise.all(t.filter(b=>b.zone==="F"||b.zone==="R").map(async b=>{if(b.zone==="R"&&i){const S=new nt(b,...this.fieldBoundary);j.add(S),await this.drawHighlight(a,...this.fieldBoundary)}else{const S=b,F=this.coordCalc(S.lane,S.playerA,e);if(b.actionKey==="DEET"){const R=new nt(b,...h.highlightBounds(...F),et.Right);m.addChild(R)}else if(i){const R=new nt(b,...h.highlightBounds(...F));u.addChild(R),await h.drawHilight(a,...F,this.hlColour(S.actionKey))}}})),i&&u.childs.length>0&&j.add(u),m.childs.length>0&&j.add(m)}async drawFight(t){if(t.length>0){const i={battlePhase:1,scrappers:t},e=72;await new Xe().drawActions([]),await this.drawCards(i),await v.sleep(e),i.battlePhase=2,await this.drawCards(i),await v.sleep(e),i.battlePhase=3,await this.drawCards(i),await v.sleep(e),i.battlePhase=4,await this.drawCards(i),await v.sleep(e+70),i.battlePhase=3,await this.drawCards(i),await v.sleep(e),i.battlePhase=2,await this.drawCards(i),await v.sleep(e),i.battlePhase=1,await this.drawCards(i),await v.sleep(e)}}coordCalc(t,i,e,a=0){const h=e===i,u=166,m=5;let b,S,F;return[b,F,S]=h?[22,290,1]:[687,65,-1],[b+(t-1)*u*S,F+a*m*(-1*S)]}}class je extends Nt{avatars=["barf","beee","behold","boof","crowley","darko","deert","eyebs","fine","furiousgeorge","ghoost","judge","kenta","nom","pupsky","skelly","stache"];async drawPlayer(t,i,e,a){const h=this.getCanv(i);await this.drawSprite(h,`avatar/${this.avatars[t.avatar]}.jpg`,e+46,a+48),await this.drawSprite(h,"ui/player_frame.png",e,a),await this.drawSprite(h,"ui/player_health.png",e+10,a+102),await this.spriteNumber(h,t.health,e+45,a+149,"B","G"),await this.drawText(h,`Turn: ${t.turn.toString()}   Rank: ${t.rank.toString()}`,e+25,a+210,{colour:"#f5f242",fontSize:20}),await this.drawText(h,t.name,e+t.nameOffset,a+185,{colour:"#42a4f5",fontSize:20})}async drawAllPlayers(){const t=it.get("player");t.clear();const i=!x.aiActive,e=k.getLocal(),a=k.toPlayer(!e.isPlayerA);if(await this.drawPlayer(e,t,...this.playerOrigin(!0)),await this.drawPlayer(a,t,...this.playerOrigin(!1)),e.isPlayerA===k.getActiveB()){let h=862;const u=295,m=x.getRegularPlays(),b=Array(m).fill("blue").concat(x.turn.freeCards.map(F=>F.sourceCard)),S=[];b.forEach(F=>{let R;if(F==="blue")R=F;else if(R="green",i){const X={actionKey:"DEET",zone:"N",hostCard:"",param:F},rt=new nt(X,h-1,u-1,28,41,et.Both);j.add(rt)}S.push(this.drawSprite(t,`ui/${R}card.png`,h,u)),h+=30}),await Promise.all(S)}await this.drawDeckButton(t,e,!0,i),await this.drawDeckButton(t,e,!1,i)}async drawDeckButton(t,i,e,a){let h,u,m;if(e?(h=i.discard.length,u=935,m="T"):(h=i.deck.length,u=858,m="U"),await this.drawSprite(t,`ui/button/faction_${m}.png`,u,350),await this.spriteNumber(t,h,u+38,350+14,"S","Y"),h>0&&a){const S=c.basicAction("VWDK");S.param=e?"VD":"VR";const F=new nt(S,u,350,77,44,et.Both);j.add(F)}}async drawActions(t){if(v.clickMode==="I")return;const i=it.get("effects"),e=k.getLocalB();await Promise.all(t.filter(a=>a.zone==="P").map(a=>{const h=a,u=this.playerOrigin(h.playerA===e),m=this.highlightBounds(...u),b=new nt(a,...m);return j.add(b),this.drawHighlight(i,...m)}))}playerOrigin(t){return[832,t?485:0]}playerBounds(t,i){return[t+18,i+18,170,170]}highlightBounds(t,i){return this.playerBounds(t,i)}async drawGameOver(){const t=it.get("field"),i=94,e=k.getLocalB(),a=x.winFlag,h=e&&a===1||!e&&a===-1;await this.drawSprite(t,`ui/you-${h?"win":"lose"}.png`,i,89),j.removeAll();const u=new ye,m=it.get("effects");await u.drawButton(m,i+62,520,c.menuButtonAction("MM"),"Main Menu",20,!1),await u.drawButton(m,i+389,520,c.menuButtonAction("RP"),"Replay",55,!1)}}const ui=15,di=15,ya=5;class ba extends Nt{constructor(){super();const i=new _t().highlightBounds(0,0);this.xOffset=i[2]+ya,this.yOffset=i[3]+25}xOffset;yOffset;async drawCards(){const t=it.get("decklist");t.clear(),t.context.fillStyle=this.haze,t.context.fillRect(0,0,849,v.gameHeight);const i=new _t,a=Ht.visibleContent().map((h,u)=>{const m=O.getCard(h.cardCode),b=this.listXY(u);return i.drawCard(m,t,...b).then(()=>{if(h.cardCount>0)return this.drawCount(t,b[0]+62,b[1]+163,h.cardCount)})});await Promise.all(a)}async drawActions(t){const i=it.get("decklist"),e=new _t,a=new Ye,h=v.clickMode!=="I",u=Ht.visibleContent(),m=x.ui,b=m.deckScroll,S=b+15,R=m.deckSummary?et.Both:et.Right,X=new $t(...this.deckBoundary()),rt=new $t(...this.deckBoundary(),R),V=[];t.forEach(q=>{if(q.actionKey==="DEET"){const dt=q;if(dt.position>=b&&dt.position<S){const lt=new nt(q,...e.highlightBounds(...this.listXY(dt.position-b)),R);rt.addChild(lt)}}else if(q.actionKey==="CARD"&&h){const dt=q,lt=u.findIndex(yt=>yt.sourceIdx===dt.position);if(lt>-1){const yt=this.listXY(lt-b),xt=new nt(q,...e.highlightBounds(...yt));X.addChild(xt),V.push(e.drawHilight(i,...yt,this.hlColour(q.actionKey)))}}}),h&&X.childs.length>0&&j.add(X),rt.childs.length>0&&j.add(rt),Ht.canPageDown&&V.push(a.makeVScroller(i,319,723,!1,"SCRK")),Ht.canPageUp&&V.push(a.makeVScroller(i,487,723,!0,"SCRK")),await Promise.all(V)}async drawCount(t,i,e,a){await this.drawSprite(t,"ui/dullcard.png",i,e),await this.spriteNumber(t,a,i+13,e+13,"S","Y")}listXY(t){return[ui+t%5*this.xOffset,di+Math.floor(t/5)*this.yOffset]}deckBoundary(){return[ui,di,this.xOffset*5,this.yOffset*3]}}class va extends Nt{async drawDetails(t){const i=[],e=it.get("card");e.clear(),e.context.fillStyle=this.haze,e.context.fillRect(0,0,849,v.gameHeight);const a=30,h=30,u=O.getCard(Kt.currentCard),m=new _t;v.options.bigCards?i.push(m.drawBigCard(e,u,a,h)):i.push(m.drawCard(u,e,134,280));const b=435;let S=30;const F="#f5f242",R="#03fcfc",X=33,rt=23,V=28;let q=u.name;for(;q.length>0;){S+=36;let bt;if(q.length<rt)bt=q,q="";else{const Ut=q.lastIndexOf(" ",rt);bt=q.substring(0,Ut),q=q.substring(Ut+1)}i.push(this.drawText(e,bt,b,S,{colour:R,fontSize:28}))}S+=36,i.push(this.drawText(e,this.cardSummary(u),b,S,{colour:R,fontSize:20})),u.type==="C"&&(S+=30,i.push(this.drawText(e,this.tribeSummary(u),b,S,{colour:R,fontSize:20})));let dt=y.cardTextSplit(u);S+=40,dt.forEach(bt=>{for(;bt.length>0;){let Ut;if(bt.length<X)Ut=bt,bt="";else{const ce=bt.lastIndexOf(" ",X);Ut=bt.substring(0,ce),bt=bt.substring(ce+1)}i.push(this.drawText(e,Ut,b,S,{colour:F,fontSize:20})),S+=V}});const lt=this.levelFun(u),yt=lt.length;if(lt.length>1){const bt=u.cardCode(),Ut=yt===3?[19,147,270]:yt===2?[78,216]:[0,98,196,294];lt.forEach((ce,Ge)=>{i.push(this.drawLevelButton(e,bt,ce,40+Ut[Ge],658,ce===u.level))})}const xt=new ye;let jt=0;const le=513,It=697,be=74;pt.baseMode!=="G"&&(i.push(xt.drawButton(e,le,It,t,"Close",65,!1)),jt++);const ve=new nt(t,a,h,377,603,et.Both);if(j.add(ve),Kt.canGoBack){const bt=Kt.goBackAction();i.push(xt.drawButton(e,le,this.buttonY(It,jt,be),bt,"Back",72,!1)),jt++}Kt.friendos.forEach(bt=>{const Ut=O.getCard(bt),ce=Kt.friendAction(bt),Ge=Kt.friendTxt(Ut.cardCode());i.push(xt.drawButton(e,le,this.buttonY(It,jt,be),ce,Ge[1]||Ut.name,Ge[0],!1)),jt++}),await Promise.all(i)}buttonY(t,i,e){return t-i*e}cardSummary(t){const i=y.factionText(t.faction),e=y.rarityText(t.rarity),a=y.cardTypeText(t.type);return`${i}, ${e} ${a}`}tribeSummary(t){return t.tribe.map(i=>y.tribeText(i)).join(" ")}async drawLevelButton(t,i,e,a,h,u){if(await this.drawSprite(t,`icons/frame/level${e}.png`,a,h),!u){const F=Kt.levelAction(e),R=new nt(F,a-15,h-5,88,112,et.Both);j.add(R)}const b=O.getCard(`${i}${e}`).levelSpice(),S=[[-16,55],[41,55],[25,62]];await Promise.all(b.map((F,R)=>{const X=a+S[R][0],rt=h+S[R][1];if(F.icon==="A"||F.icon==="H"){let V,q;return F.icon==="A"?(V="icons/frame/attack.png",q=X+17):(V="icons/frame/health.png",q=X+16),this.drawSprite(t,V,X-1,rt-1).then(()=>this.spriteNumber(t,F.num,q,rt+10,"S","Y"))}else return Promise.resolve()}))}levelFun(t){return t.maxLevel===3?t.minLevel===1?[1,2,3]:[3]:t.maxLevel===t.minLevel?[t.minLevel]:t.maxLevel===4?[1,2,3,4]:[1,2]}}class Aa extends Nt{packLeft=22;packTop=190;packBoundary=[this.packLeft-5,this.packTop-10,537,480];async drawPack(t,i){const e=new _t,a=v.clickMode!=="I",h=[],u=new $t(...this.packBoundary),m=new $t(...this.packBoundary,et.Right);t.filter(S=>S.pack).forEach(S=>{const F=this.coordCalcPack(S.index);if(S.actionKey==="DRFT"){const R=O.getCard(S.param+"1");if(h.push(e.drawCard(R,i,...F).then(()=>this.drawRarity(i,R.rarity,F[0]+112,F[1]+4))),a){const X=new nt(S,...e.highlightBounds(...F));u.addChild(X)}}else{const R=new nt(S,...e.highlightBounds(...F),et.Right);m.addChild(R)}}),a&&u.childs.length>0&&j.add(u),m.childs.length>0&&j.add(m),await Promise.all(h)}async drawList(t,i){let e=170;const a=570,h=[],u=ht.picksAsDeck,m=new $t(a,e,600,600,et.Both),b=t,S=15,F=ht.scrollIdx;ht.canPageDown&&await this.makeScroller(i,!1),ht.canPageUp&&await this.makeScroller(i,!0),b.filter(R=>!R.pack).forEach(R=>{if(R.index>=F&&R.index<F+S){const X=O.getCard(R.param);h.push(this.drawFaction(i,X.faction,a,e),this.drawRarity(i,X.rarity,a+28,e),this.drawText(i,`${u[R.index].num}x ${X.name}`,a+65,e+7,{colour:"#f5f242"}));const rt=new nt(R,a,e-2,600,35,et.Both);m.addChild(rt),e+=35}}),await Promise.all(h),j.add(m)}coordCalcPack(t){const a=t%3,h=Math.floor(t/3);return[this.packLeft+a*176,this.packTop+h*235]}async makeScroller(t,i){const e=new Ye,a=522,h=720-(i?40:0);await e.makeVScroller(t,a,h,i,"SCRD")}async drawStats(t){const i=ht.stats;let e=this.packBoundary[0]+10;const a=this.packBoundary[1]+this.packBoundary[3]+20;await this.threeLine(t,e,a,["Creat:","Spell:","Total:"]),e+=75,await this.threeLine(t,e,a,i.getTotal()),await Promise.all(De.map(h=>{const u=i.getFactTotal(h);if(u[2]===0)return[Promise.resolve()];{e+=75;const m=this.threeLine(t,e,a,u),b=this.drawFaction(t,h,e-8,a-39);return[m,b]}}).flat())}async threeLine(t,i,e,a){const h={colour:"#ffd865",fontSize:18,fontName:"serif"},u=30;await Promise.all(a.map((m,b)=>this.drawText(t,m.toString(),i,e+u*b,h)))}async drawDraftMenu(t){const i=new ye,e=new we,a=240,h=80,u=45,m=34;let b=50,S=a;await e.headerText(b+28,S,"Opponent",t),S+=u,await i.buttonMaker(t,b,S,"DI","DUMB BOT",27,ht.vsAI,!1),S+=h,await i.buttonMaker(t,b,S,"DV","HUMAN",47,!ht.vsAI,!1),S+=h+16,await e.headerText(b+17,S,"Rarity Filter",t),S+=h-m-6,await this.rarityButton(t,b+20,S,"L",ht.getRarity("L")),await this.rarityButton(t,b+125,S,"H",ht.getRarity("H")),S+=h,await this.rarityButton(t,b+20,S,"R",ht.getRarity("R")),await this.rarityButton(t,b+125,S,"C",ht.getRarity("C")),S=a+u+h*5,await i.buttonMaker(t,b,S,"MM","MAIN MENU",16),b=404,S=a,await e.headerText(b+5,S,"Draft Modes",t),S+=u,await i.buttonMaker(t,b,S,"GP","GOOD PACKS",9,ht.fatPacks),S+=h,await i.buttonMaker(t,b,S,"LD","LEGENDARY",17,ht.legDraft),S+=h,await i.buttonMaker(t,b,S,"OD","OVERDRAFT",17,ht.overdraft),b=757,S=a,await e.headerText(b+76,S,"Sets",t),S+=u,await this.chestButton(t,b+3,S,1,ht.getSet(1)),await this.chestButton(t,b+124,S,2,ht.getSet(2)),S+=88,await this.chestButton(t,b+3,S,3,ht.getSet(3)),await this.chestButton(t,b+124,S,4,ht.getSet(4)),S=a+u+h*5,await i.buttonMaker(t,b,S,"DN","NEXT",68)}async rarityButton(t,i,e,a,h){const u={actionKey:"MNBT",zone:"N",hostCard:"",param:v.enTil("DR",a)},m=`ui/button/rarity_${a}${h?"y":"n"}.png`;await this.drawSprite(t,m,i,e);const b=new nt(u,i,e,75,65,et.Both);j.add(b)}async chestButton(t,i,e,a,h){const u={actionKey:"MNBT",zone:"N",hostCard:"",param:v.enTil("DT",a)},m=`icons/sets/Chest_Set${a}${h?"y":"n"}.png`;await this.drawSprite(t,m,i,e);const b=new nt(u,i,e,90,74,et.Both);j.add(b)}}class Je extends Nt{async drawSets(t,i){let e=200;const a=100,h=[],u=new $t(a,e,400,600);t.filter(m=>m.actionKey==="DSET").forEach(m=>{const b=Ae[parseInt(m.param)];h.push(this.drawText(i,b.name,a,e,{colour:"#f5f242"}),this.drawSprite(i,"icons/chest_small.png",a-48,e-5));const S=new nt(m,a,e-2,400,35,et.Both);u.addChild(S),e+=45}),j.add(u),await Promise.all(h)}async drawList(t,i){let e=170;const a=570,h=[],u=new $t(a,e,600,600);t.filter(m=>m.actionKey==="DECK").forEach(m=>{const b=v.deTil(m.param),S=Yt.stockDeckByName(b[0],b[1]);h.push(this.drawFaction(i,S.factions[0],a,e),this.drawText(i,S.name,a+65,e+7,{colour:"#f5f242"})),S.factions.length===2&&h.push(this.drawFaction(i,S.factions[1],a+28,e));const F=new nt(m,a,e-2,600,35,et.Both);u.addChild(F),e+=35}),await Promise.all(h),j.add(u)}packBoundary=[17,190,537,480];coordCalcPack(t){const a=t%3,h=Math.floor(t/3);return[22+a*176,200+h*235]}iAmError(t){const i=it.get("game-ui");this.drawText(i,t,295,655,{colour:"#f5142e",fontSize:26})}async drawConstrMenu(t){const i=new ye,e=new we,a=240,h=80,u=45;let m=50,b=a;await e.headerText(m+28,b,"Opponent",t),b+=u,await i.buttonMaker(t,m,b,"CI","DUMB BOT",27,Et.vsAI,!1),b+=h,await i.buttonMaker(t,m,b,"CV","HUMAN",47,!Et.vsAI,!1),b+=h*4,await i.buttonMaker(t,m,b,"MM","MAIN MENU",16),m=404,b=a,await e.headerText(m+46,b,"Player 1",t);const S=Et.p1.mode;b+=u,await i.buttonMaker(t,m,b,v.enTil("CP","A"),"PRE-CON",39,S==="CP",!1),b+=h,await i.buttonMaker(t,m,b,v.enTil("CR","A"),"RANDOM",36,S==="CR",!1),b+=h,await i.buttonMaker(t,m,b,v.enTil("CX","A"),"SCRAMBLE",30,S==="CX",!1),b+=h,await i.buttonMaker(t,m,b,v.enTil("LK","A"),"LOAD FILE",32,S==="LK"),S==="LK"&&await this.drawFileDeck(t,m,b,Et.p1.deck),m=757,b=a,await e.headerText(m+44,b,"Player 2",t);const F=Et.p2.mode;b+=u,await i.buttonMaker(t,m,b,v.enTil("CP","B"),"PRE-CON",39,F==="CP",!1),b+=h,await i.buttonMaker(t,m,b,v.enTil("CR","B"),"RANDOM",36,F==="CR",!1),b+=h,await i.buttonMaker(t,m,b,v.enTil("CX","B"),"SCRAMBLE",30,F==="CX",!1),b+=h,await i.buttonMaker(t,m,b,v.enTil("LK","B"),"LOAD FILE",32,F==="LK"),F==="LK"&&await this.drawFileDeck(t,m,b,Et.p2.deck),b+=h*2,await i.buttonMaker(t,m,b,"CN","NEXT",68)}async drawFileDeck(t,i,e,a){const h=e+89;await this.drawText(t,a.name.slice(0,20),i,e+70,{colour:"#f5f242",fontSize:18}),a.factions.length===1?await this.drawFaction(t,a.factions[0],i+96,h):(await this.drawFaction(t,a.factions[0],i+78,h),await this.drawFaction(t,a.factions[1],i+113,h))}}class we extends Nt{async drawExtrasMenu(t){const i=new ye,e=240,a=80,h=45;let u=50,m=e;await this.headerText(u+28,m,"More Info",t),m+=h,await i.buttonMaker(t,u,m,"RU","RULES",66),m+=a,await i.buttonMaker(t,u,m,"FQ","INFO & FAQ",20),m+=a*3,await i.buttonMaker(t,u,m,"MM","MAIN MENU",16),u=404,m=e,await this.headerText(u+37,m,"UI Modes",t),m+=h,await i.buttonMaker(t,u,m,"90","90% SIZE",47,v.options.scale==="90"),m+=a,await i.buttonMaker(t,u,m,"BC","BIG CARDS",29,v.options.bigCards),u=757,m=e,await this.headerText(u+12,m,"Game Modes",t),m+=h,await i.buttonMaker(t,u,m,"HH","BIG HEALTH",20,v.options.highHealth),m+=a,await i.buttonMaker(t,u,m,"CH","CHEATER",37,v.options.cheater),m+=a,await i.buttonMaker(t,u,m,"BB","BATTLE BARK",13,v.options.bark),await this.drawText(t,"v0.5.3",494,730,{fontSize:16,colour:"#7b68ee"})}async headerText(t,i,e,a){await this.drawText(a,e,t,i,{colour:"#f5f242",fontSize:30})}async drawPickerPlayer(t,i,e){let a;i?a="Player 1":e?a="Dumb Bot":a="Player 2",await this.headerText(54,75,a,t)}}class ka extends Nt{async drawMenu(t){let e=22;await this.drawSprite(t,"ui/button/constructed.png",778,e);const a=new nt(this.makeAction("C"),...this.buttHilightBounds(778,e),et.Both);j.add(a),e=148,await this.drawSprite(t,"ui/button/draft.png",778,e);const h=new nt(this.makeAction("D"),...this.buttHilightBounds(778,e),et.Both);j.add(h),e=508,await this.drawSprite(t,"ui/button/deck.png",778,e);const u=new nt(this.makeAction("B"),...this.buttHilightBounds(778,e),et.Both);j.add(u),e=634,await this.drawSprite(t,"ui/button/info.png",778,e);const m=new nt(this.makeAction("I"),...this.buttHilightBounds(778,e),et.Both);j.add(m),await this.drawSprite(t,"gwg/gwg_red.png",58,0)}buttBounds(t,i){return[t,i,242,113]}buttHilightBounds(t,i){const a=[-3,-3,6,6];return this.buttBounds(t,i).map((h,u)=>h+a[u])}makeAction(t){return{zone:"N",actionKey:"MENU",hostCard:"",param:t}}}class Ta{gameWidth;gameHeight;spriteCache;dogAudio;idnum;_clickMode;pxRatio=1;options;imgRoot;constructor(){this.spriteCache={},this.imgRoot="./img/",this.gameWidth=1024,this.gameHeight=768,this.idnum=0,this.dogAudio=document.getElementById("dogbark"),this._clickMode="M",this.options={bark:!0,bigCards:!0,highHealth:!1,cheater:!1,wasDrafting:!1,scale:"100"}}randInt(t,i){return Math.floor(Math.random()*(i-t))+t}isUn(t){return typeof t>"u"}async sleep(t){return new Promise(i=>{setTimeout(()=>{i()},t)})}async getSprite(t){return this.spriteCache[t]||(this.spriteCache[t]=this.imageLoader(t)),this.spriteCache[t]}async bulkLoadSprite(t){await Promise.all(t.map(i=>this.getSprite(`${this.imgRoot}${i}`)))}dogBark(){this.dogAudio.volume=.3,this.dogAudio.play()}genId(){return this.idnum+=1,"@"+this.idnum.toString(36)}resetIds(){this.idnum=0}enTil(...t){return t.join("~")}deTil(t){return t.split("~")}imageLoader(t){return new Promise(i=>{const e=new Image;e.onload=()=>{i(e)},e.src=t})}writeStorage(t,i){localStorage.setItem(t,i)}readStorage(t){return localStorage.getItem(t)}readStringStorage(t,i){const e=this.readStorage(t);return e===null?i:e}readBoolStorage(t,i){const e=this.readStorage(t);return e===null?i:e==="Y"}writeBoolStorage(t,i){this.writeStorage(t,i?"Y":"N")}restoreOptions(){const t=this.options;t.bark=this.readBoolStorage("bark",!0),t.bigCards=this.readBoolStorage("bigCards",!0),t.cheater=this.readBoolStorage("cheater",!1),t.highHealth=this.readBoolStorage("highHealth",!1),t.scale=this.readStringStorage("scale","100")}toggleOption(t){Game.options[t]=!Game.options[t],this.writeBoolStorage(t,Game.options[t])}setClickMode(t){this._clickMode=t}get clickMode(){return this._clickMode}}const v=new Ta;window.onload=async()=>{await document.fonts.ready;let n=[];document.fonts.forEach(V=>{V.load(),n.push(V.loaded)}),await Promise.all(n),["game-ui","field","player","hand","effects","decklist","card"].forEach(V=>{it.register(V)});const i=it.get("effects");i.context.lineWidth=2,v.pxRatio=window.devicePixelRatio;let e;(V=>{V.Neutral="N",V.Cancel="C",V.Down="D"})(e||(e={}));let a=!0,h=800,u="N",m;try{document.createEvent("TouchEvent"),v.setClickMode("T"),a=!1}catch{}const b=()=>{m&&(clearTimeout(m),m=void 0)},S=(V,q,dt)=>{const lt=j.hitTest(V,q,dt);lt&&C.handleAction(lt)},F=V=>{S(V.pageX,V.pageY,V.button)},R=V=>{V.touches.length>1?(u="C",b()):u==="N"&&(u="D",m=setTimeout(()=>{u="C";const q=V.touches[0];S(q.pageX,q.pageY,et.ForceRight),m=void 0},h))},X=V=>{if(u==="D"){if(b(),u="N",V.changedTouches.length>0){const q=V.changedTouches[0];S(q.pageX,q.pageY,et.Left)}}else V.touches.length===0&&(u="N")},rt=document.getElementById("solforge");a?(rt.addEventListener("click",F),rt.addEventListener("contextmenu",V=>(V.preventDefault(),F(V),!1))):(rt.addEventListener("touchstart",R),rt.addEventListener("touchend",X)),window.sfapi={details:V=>{Kt.init(V)},setLog:V=>{Ee.setLog(V)},peekAll:()=>{const V=k.toPlayer(!1),q=V.deck.concat(V.hand,V.discard).sort();console.log(q.map(dt=>y.fastName(dt)).join(`
`))},peekDeck:()=>{const V=k.toPlayer(!1),q=V.deck.map(xt=>y.fastName(xt)).sort(),dt=V.hand.map(xt=>y.fastName(xt)).sort(),lt=V.discard.map(xt=>y.fastName(xt)).sort(),yt=["-- Deck --"].concat(q,"-- Hand --",dt,"-- Discard --",lt);console.log(yt.join(`
`))}},v.restoreOptions(),v.options.scale!=="100"&&ut.changeScale(v.options.scale),ut.drawAll()}})();
